<!doctype html>
<html class="theme-next use-motion ">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.3"/>




  <meta name="keywords" content="Windows,伺服器安裝與設定," />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.3" />



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    analytics: {
      google: 'UA-450710-8'
    },
    sidebar: 'post'
  };
</script>




  <title> 在 Windows 上使用 Trac on Apache - 安裝與設定篇 // 網站製作學習誌 </title>
</head>

<body>
<!--[if lte IE 8]> <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'> <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari." style='margin-left:auto;margin-right:auto;display: block;'/></a></div> <![endif]-->
  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">網站製作學習誌</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
     
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br />
          首頁
        </a>
      </li>
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br />
          歸檔
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          標籤
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              在 Windows 上使用 Trac on Apache - 安裝與設定篇
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於 2007-02-06
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2007/02/06/156/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2007/02/06/156/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <h2 id="說明">說明</h2><p>最近公司的伙伴們變多了，專案的控管也變得越來越重要；原來的 Trac/Subversion 獨立伺服器在權限控制方面也變得有點礙手礙腳，所以這次我決定改以 Apache 為基礎伺服器的方式來安裝 Trac/Subversion 。</p>
<p>我打算把此系列文章分成三個部份：</p>
<ul>
<li><p>第一部份是第一次的伺服器程式安裝步驟，及相關的 Trac 模組與 Subversion 的安裝。</p>
</li>
<li><p>第二部份是每次新建立一個專案時所必要的設定。</p>
</li>
<li><p>第三部份是 Trac 的使用方式。 </p>
</li>
</ul>
<p>以下先來看看如何安裝及設定。</p>
<a id="more"></a>
<h2 id="檔案下載">檔案下載</h2><ul>
<li><a href="http://httpd.apache.org/download.cgi" target="_blank" rel="external">Apache 2.0</a>(apache_2.0.59-win32-x86-no_ssl.msi)</li>
</ul>
<ul>
<li>我們用它來當做伺服器，這裡一定要用 2.0.x 版。 </li>
</ul>
<ul>
<li><a href="http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91" target="_blank" rel="external">Subversion</a> (svn-win32-1.4.3.zip)</li>
</ul>
<ul>
<li>基本上只要抓最新的 1.4.x 版 </li>
</ul>
<ul>
<li><a href="http://www.python.org/download/releases/2.4.4/" target="_blank" rel="external">Python</a> (python-2.4.4.msi)</li>
</ul>
<ul>
<li>一定要用 2.4.x 版，因為相關套件的整合度較高。 </li>
</ul>
<ul>
<li><a href="http://apache.stu.edu.tw/httpd/modpython/win/3.2.10/" target="_blank" rel="external">mod_python</a> (mod_python-3.2.10.win32-py2.4-apache2.0.exe)</li>
</ul>
<ul>
<li>請配合上面的 Apache 及 Python 版本，並抓取最新版。 </li>
</ul>
<ul>
<li><a href="http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91&amp;filter=py" target="_blank" rel="external">Python bindings for Subversion</a> (svn-python-1.4.3.win32-py2.4.exe)</li>
</ul>
<ul>
<li>這個可以讓我們透過 Python 操控 SVN ，要配合 Python 的版本抓取最新版。 </li>
</ul>
<ul>
<li><a href="http://pysqlite.org/" target="_blank" rel="external">pysqlite</a> (pysqlite-2.3.3.win32-py2.4.exe)</li>
</ul>
<ul>
<li>這個可以讓我們透過 Python 操控 Sqlite ，要配合 Python 的版本抓取最新版。</li>
</ul>
<ul>
<li><a href="http://clearsilver.yi.org/" target="_blank" rel="external">ClearSilver</a> (clearsilver-0.9.14.win32-py2.4.exe)</li>
</ul>
<ul>
<li>這個是一個樣版引擎，要配合 Python 的版本抓取最新版。</li>
</ul>
<ul>
<li><a href="http://sourceforge.net/projects/silvercity/" target="_blank" rel="external">SilverCity</a> (SilverCity-0.9.6.win32-py2.4.exe)</li>
</ul>
<ul>
<li>這個是一個程式碼上色模組，要配合 Python 的版本抓取最新版。</li>
</ul>
<ul>
<li><a href="http://peak.telecommunity.com/DevCenter/setuptools" target="_blank" rel="external">setuptools</a>   (ez_setup.py)</li>
</ul>
<ul>
<li>這個是方便我們安裝 Python 模組用的， Trac 的模組會用到。 </li>
</ul>
<ul>
<li><a href="http://trac.edgewall.org/wiki/TracDownload" target="_blank" rel="external">Trac</a>  (trac-0.10.3.win32.exe)</li>
</ul>
<ul>
<li>這個就是用 Python 開發的 Trac 主程式了。 </li>
</ul>
<ul>
<li><a href="http://tortoisesvn.net/downloads" target="_blank" rel="external">TortoiseSVN</a> (TortoiseSVN-1.4.3.8645-win32-svn-1.4.3.msi)</li>
</ul>
<ul>
<li>Windows 上的 Subversion 視覺化用戶端，找最新的就對了。</li>
</ul>
<ul>
<li><a href="http://tortoisesvn.net/downloads" target="_blank" rel="external">TortoiseSVN Language Pack</a> (LanguagePack-1.4.3.8645-win32-zh_TW.exe)</li>
</ul>
<ul>
<li>TortoiseSVN 的正體中文語言套件，要配合上面的 TortoiseSVN 版本。</li>
</ul>
<ul>
<li><a href="http://www.cosmo-system.jp/iwasa/svn2clwin.html" target="_blank" rel="external">svn2cl for win32</a> (svn2cl-0.7-win2.zip)</li>
</ul>
<ul>
<li>將 SVN 的記錄轉換成 ChangeLog 的工具 (Optional) 。</li>
</ul>
<h2 id="安排目錄結構">安排目錄結構</h2><p>和之前一樣，我打算把相關的程式放在 D:\AppServ 底下，而檔案庫則放在 D:\Repository 底下。以下是我所規劃的目錄結構：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:&#10;|&#10;|- AppServ (&#20282;&#26381;&#22120;&#30456;&#38364;&#31243;&#24335;)&#10;|  |&#10;|  |- Apache2 ( Apache &#30340;&#20027;&#35201;&#31243;&#24335;&#27284;)&#10;|  |&#10;|  |- python ( Python &#30340;&#20027;&#35201;&#31243;&#24335;&#27284;)&#10;|  |&#10;|  |- svn ( Subversion &#30340;&#20027;&#35201;&#31243;&#24335;&#27284;)&#10;|  |&#10;|  |- trac ( Trac &#30340;&#30456;&#38364;&#25209;&#27425;&#31243;&#24335;&#27284;)&#10;|&#10;|- Repository (&#27284;&#26696;&#24235;)&#10;|&#10;|- svn&#10;|&#10;|- trac</span><br></pre></td></tr></table></figure>
<p>繼續往下以前，請先按照上面的結構把目錄建立好。</p>
<p>註：放在 D: (或其他非 C: 分割區) 的好處是不用擔心重灌後，資料及相關設定會消失。</p>
<h2 id="安裝_Apache_2">安裝 Apache 2</h2><h3 id="第一次安裝">第一次安裝</h3><p>如果有使用 IIS 的話，請先把 IIS 停掉。然後執行 apache_2.0.59-win32-x86-no_ssl.msi 。 </p>
<p>然後要注意的是安裝位置，這裡我會把它安裝在 D:\AppServ\Apache2 下，方法如下：</p>
<ul>
<li><p>安裝到 Setup Type 時選 Custom ，並按 Next 。</p>
</li>
<li><p>把 Apache HTTP Server 2.0.xx 的 Install to 改到 D:\AppServ ，這樣下方 Apache Runtime 的 Install to 會自動變成 D:\AppServ\Apache2 。 </p>
</li>
</ul>
<p>至於其他選項就按照當時情況自行決定囉。</p>
<p>安裝好後，在 D:\AppServ\Apache\conf\httpd.conf 中把 Port 80 改成 Port 8000 (或其他不影響系統運作的數字) ，然後重新啟動 Apache 及 IIS 。</p>
<p>後面的說明將會以 Port 8000 為主。</p>
<p>接著把 D:\AppServ\Apache2\bin 加入系統變數 PATH 裡，這樣方便到時候直接使用指令來控制 Apache 。</p>
<h3 id="重灌系統後的安裝">重灌系統後的安裝</h3><p>假設我們的 D:\AppServ\Apache2 底下已經 Apache 的程式檔，只是重灌後使得系統設定消失。這樣的話，我們要先把D:\AppServ\Apache2\bin 加入系統變數 PATH 裡，接著再用以下方式重新建立服務 (粗體字部份) ：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">C:\&#62;&#60;strong&#62;apache -k install -D Apache2&#60;/strong&#62;</span><br></pre></td></tr></table></figure>
<p>最後用：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">C:\&#62;&#60;strong&#62;apache -k start &#60;/strong&#62;</span><br></pre></td></tr></table></figure>
<p>來啟動服務。</p>
<h2 id="安裝_Subversion">安裝 Subversion</h2><h3 id="第一次安裝-1">第一次安裝</h3><ul>
<li><p>解開 svn-win32-1.4.3.zip ，將 svn-win32-1.4.3 這個資料夾重新命名為 svn (裡面應該有 bin 等資料夾) ，並將它移至 D:\AppServ 下。</p>
</li>
<li><p>將 D:\AppServ\svn\mod_authz_svn.so 及 D:\AppServ\svn\mod_dav_svn.so 兩個檔案複製到 D:\AppServ\Apache2\modules 下。</p>
</li>
<li><p>將 D:\AppServ\svn\bin 加到 PATH 系統環境變數裡。</p>
</li>
<li>在系統環境變數裡加上以下兩個變數：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">APR_ICONV_PATH = D:\AppServ\svn\iconv&#10;SVN_EDITOR = notepad.exe (&#25110;&#20854;&#20182;&#24931;&#29992;&#30340;&#25991;&#23383;&#32232;&#36655;&#22120;&#22519;&#34892;&#27284;&#32085;&#23565;&#36335;&#24465;)</span><br></pre></td></tr></table></figure>
<p>後面會再說明 Apache 部份需要設定的部份。</p>
<h3 id="更新">更新</h3><p>當 Subversion 推出新版時，一樣是把新版本的壓縮檔下載回來，而更新的步驟跟第一次安裝是一樣的。</p>
<h2 id="安裝_Python_及_Trac_相關模組">安裝 Python 及 Trac 相關模組</h2><h3 id="Python_主程式">Python 主程式</h3><p>python 的主程式安裝也很簡單，除了安裝位置改在 D:\AppServ\python 底下，其他就使用預設值即可。</p>
<p>安裝好後，將 D:\AppServ\python 加入 PATH 系統環境變數裡。</p>
<h3 id="相關模組">相關模組</h3><p>以下的模組直接執行該 exe 檔即可，沒有任何設定需要注意。 </p>
<ul>
<li><p>執行 svn-win32-1.4.3_py-2.4.exe ，會在 Python 的安裝目錄中註冊 svn 模組。</p>
</li>
<li><p>執行 pysqlite-2.3.3.win32-py2.4.exe ，會在 Python 的安裝目錄中註冊 pysqlite 模組。</p>
</li>
<li><p>執行 clearsilver-0.9.14.win32-py2.4.exe ，會在 Python 的安裝目錄中註冊 clearsilver 模組。</p>
</li>
<li><p>執行 trac-0.10.3.win32.exe ，會在 Python 的安裝目錄中註冊 trac 模組。</p>
</li>
<li><p>執行 SilverCity-0.9.6.win32-py2.4.exe ，會在 Python 的安裝目錄中註冊 SilverCity 模組。</p>
</li>
</ul>
<h3 id="mod_python_模組">mod_python 模組</h3><p>執行 mod_python-3.2.10.win32-py2.4-apache2.0.exe ，一樣是按照預設值安裝；但是當問到「 Where is Apache installed? 」時要選擇「 D:\AppServ\Apache2 」，這時安裝程式會把 mod_python.so 複製到 D:\AppServ\Apache2\modules 底下。</p>
<p> 後面會再說明 Apache 部份需要設定的部份。</p>
<h3 id="setuptools_模組">setuptools 模組</h3><p>如果剛剛已經有 Python 的安裝路徑設定在 PATH 系統變數裡的話，那麼直接點兩下 ez_setup.py 執行即可；或是開啟命令提示列視窗，並切換到 ez_setup.py 所存放的路徑下，並用以下指令執行 (粗體字部份) ：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\downloads\python&#62;&#60;strong&#62;python ez_setup.py&#60;/strong&#62;</span><br></pre></td></tr></table></figure>
<p>這樣 ez_setup.py 會自動從網路下載相關套件，並安裝到 Python 裡。</p>
<h3 id="更新-1">更新</h3><p>如果上面的任何程式有更新版本的話，也是將個別的檔案下載回來，再按照上面的步驟重新做一次即可。</p>
<h2 id="安裝_TortoiseSVN">安裝 TortoiseSVN</h2><h3 id="第一次安裝-2">第一次安裝</h3><ul>
<li><p>執行 TortoiseSVN-1.4.3.8645-win32-svn-1.4.3.msi ，安裝完成後暫時不要重開機。</p>
</li>
<li><p>執行 LanguagePack-1.4.3.8645-win32-zh_TW.exe ，這時才需要重開機。</p>
</li>
</ul>
<p>安裝好以後，請參考<a href="http://www.jeffhung.net/blog/articles/jeffhung/758/" target="_blank" rel="external">此篇文章</a>調整 TortoiseSVN 的效能。 </p>
<h3 id="更新-2">更新</h3><p>當 TortoiseSVN 有更新版本時，要分別下載主程式與對應版本的語言套件。然後直接按照第一次安裝的步驟執行，不必移除舊有版本。</p>
<h2 id="安裝_Trac_Plugins">安裝 Trac Plugins</h2><p>Trac 0.10.x 預設並沒有安裝管理套件，所以這裡我們要手動為它安裝。</p>
<p>註：據 Trac 官方指出，在 0.11 版後會內建相關的管理套件。 </p>
<p>補充：我找到了一篇不錯的 Blog 文章：「<a href="http://b6s.blogspot.com/2006/12/trac-plugin.html" target="_blank" rel="external">Trac 管理小記（一）：安裝 plugin 注意事項</a>」，裡面有介紹 Trac 應該安裝的 Plugins 。 </p>
<h3 id="安裝_WebAdmin_(for_Trac_0-10-x)">安裝 WebAdmin (for Trac 0.10.x)</h3><p><a href="http://trac.edgewall.org/wiki/WebAdmin" target="_blank" rel="external">WebAdmin</a> 是用來管理 Trac 專案相關設定的套件，安裝步驟如下：</p>
<p><del>先開啟 DOS 命令列模式視窗，並切換到一個暫時的目錄 (假設是 D:\downloads\trac\plugins ) ，然後輸入以下指令 (粗體字部份) ：</del> </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#60;del&#62;D:\downloads\trac\plugins&#62;&#60;strong&#62;mkdir webadmin&#60;/strong&#62;&#10;D:\downloads\trac\plugins&#62;&#60;strong&#62;cd webadmin&#60;/strong&#62;&#10;D:\downloads\trac\plugins\webadmin&#62;&#60;strong&#62;svn co [http://svn.edgewall.com/repos/trac/sandbox/webadmin/](http://svn.edgewall.com/repos/trac/sandbox/webadmin/) .&#60;/strong&#62; (&#35531;&#27880;&#24847;&#26368;&#24460;&#26377;&#19968;&#20491;&#21477;&#40670;)&#10;D:\downloads\trac\plugins\webadmin&#62;&#60;strong&#62;python setup.py install&#60;/strong&#62;&#60;/del&#62;</span><br></pre></td></tr></table></figure>
<p>這樣就能將 WebAdmin 安裝到 Trac 裡了，後面會說明如何在專案中啟用它們。</p>
<h4>補充：</h4>

<p>上面的做法顯示我不曉得 easy_install 可以讓 plugin 的安裝更簡單，在看了 b6s 的介紹後，我才知道可以改用如下的方式。</p>
<p>先在命令列模式視窗中切換到 D:\AppServ\python 路徑，然後輸入以下指令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\AppServ\python\Scripts&#62;&#60;strong&#62;easy_install [http://svn.edgewall.com/repos/trac/sandbox/webadmin/](http://svn.edgewall.com/repos/trac/sandbox/webadmin/)&#60;/strong&#62;</span><br></pre></td></tr></table></figure>
<p>是不是比上面的方式簡單多了？</p>
<h3 id="安裝_AccountManager_(for_Trac_0-10-x)">安裝 AccountManager (for Trac 0.10.x)</h3><p>AccountManager 是用來管理 Trac 專案的成員帳號，安裝步驟如下： </p>
<p><del>先開啟 DOS 命令列模式視窗，並切換到一個暫時的目錄 (假設是 D:\downloads\trac\plugins ) ，然後輸入以下指令 (粗體字部份) ：</del> </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#60;del&#62;D:\downloads\trac\plugins&#62;&#60;strong&#62;mkdir accountmanager&#60;/strong&#62;&#10;D:\downloads\trac\plugins&#62;&#60;strong&#62;cd accountmanager&#60;/strong&#62;&#10;D:\downloads\trac\plugins\accountmanager&#62;&#60;strong&#62;svn co [http://trac-hacks.swapoff.org/svn/accountmanagerplugin/0.10](http://trac-hacks.swapoff.org/svn/accountmanagerplugin/0.10) .&#60;/strong&#62; (&#35531;&#27880;&#24847;&#26368;&#24460;&#26377;&#19968;&#20491;&#21477;&#40670;)&#10;D:\downloads\trac\plugins\accountmanager&#62;&#60;strong&#62;python setup.py install&#60;/strong&#62;&#60;/del&#62;</span><br></pre></td></tr></table></figure>
<p>這樣就能將 AccountManager 安裝到 Trac 裡了，後面會說明如何在專案中啟用它們。</p>
<h4>補充：</h4>

<p>跟 WebAdmin 一樣，我們把安裝方式改為：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\AppServ\python\Scripts&#62;&#60;strong&#62;easy_install [http://trac-hacks.swapoff.org/svn/accountmanagerplugin/0.10](http://trac-hacks.swapoff.org/svn/accountmanagerplugin/0.10)&#60;/strong&#62;</span><br></pre></td></tr></table></figure>
<h3 id="補充：安裝_IniAdmin">補充：安裝 IniAdmin</h3><p>這個 Plugin 是 <a href="http://b6s.blogspot.com/" target="_blank" rel="external">b6s</a> 介紹的，可以讓我們直接在 Web 介面上調整 trac.ini 。安裝方式如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\Appserv\python\Scripts&#62;&#60;strong&#62;easy_install [http://trac-hacks.org/svn/iniadminplugin/trunk/](http://trac-hacks.org/svn/iniadminplugin/trunk/)&#60;/strong&#62;</span><br></pre></td></tr></table></figure>
<p>相關的調整後面會再說明。</p>
<h3 id="Plugins_的更新">Plugins 的更新</h3><p><del>更新 Plugins 很簡單，只要利用 svn update 把最新版的 Plugins 更新回本地端，然後重新安裝即可。以 WebAdmin 為例，更新方式如下：</del></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#60;del&#62;D:\downloads\trac\plugins&#62;&#60;strong&#62;cd webadmin&#60;/strong&#62;&#10;D:\downloads\trac\plugins\webadmin&#62;&#60;strong&#62;svn update&#60;/strong&#62;&#10;D:\downloads\trac\plugins\webadmin&#62;&#60;strong&#62;python setup.py clean&#60;/strong&#62; (&#38750;&#24517;&#35201;)&#10;D:\downloads\trac\plugins\webadmin&#62;&#60;strong&#62;python setup.py install&#60;/strong&#62;&#60;/del&#62;</span><br></pre></td></tr></table></figure>
<p><del>這樣就可以了。</del></p>
<h4>補充：</h4>

<p>更新 Plugin 的方式就是重新執行上面補充的步驟即可。 </p>
<p>Trac 的 plugins 更新後，一定要重新啟動 Apache 。如果這時有登入 Trac 管理畫面的話，也必須登出再重新登入。</p>
<h2 id="Apache_設定">Apache 設定</h2><h3 id="設定使用者">設定使用者</h3><p> 我們可以讓 Trac 和 Subversion 的使用者共用同一組帳號，而這些帳號可以由 Apache 的 htpasswd 指令來建立。</p>
<p>假設我們把帳號密碼檔放置在 D:\Repository\project-users.db 這個文字檔裡，那麼我們可以在命令提示列中輸入以下指令 (粗體字部份) ：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\Repository&#62;&#60;strong&#62;htpasswd -c project-users.db admin&#60;/strong&#62;&#10;Automatically using MD5 format.&#10;New password: &#60;strong&#62;******&#60;/strong&#62;&#10;Re-type new password: &#60;strong&#62;******&#60;/strong&#62;&#10;Adding password for user admin</span><br></pre></td></tr></table></figure>
<p>上面的指令會先建立一個 <strong>project-users.db</strong> 文字檔，這個就是我們存放帳號密碼的地方；然後我們需要為帳號 admin 設定一組密碼，這樣一來，帳號 admin 將會是往後我們為所有專案所預設的最高管理員。 </p>
<p>假如開發的是網站專案，會需要自動更新測試環境的檔案時，就需要再建立一個 website 帳號：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\Repository&#62;&#60;strong&#62;htpasswd project-users.db website&#60;/strong&#62;&#10;Automatically using MD5 format.&#10;New password: &#60;strong&#62;******&#60;/strong&#62;&#10;Re-type new password: &#60;strong&#62;******&#60;/strong&#62;&#10;Adding password for user website</span><br></pre></td></tr></table></figure>
<p>website 帳號的密碼請自行決定。 </p>
<h3 id="模組設定">模組設定</h3><p>首先要先以文字編輯器開啟 D:\AppServ\Apache2\conf\httpd.conf ，然後搜尋到：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#LoadModule dav_module modules/mod_dav.so</span><br></pre></td></tr></table></figure>
<p>將上面的註解 ( # 字號) 去除，然後在整個 LoadModule 區段的下方加入以下設定：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># For Subversion&#10;LoadModule dav_svn_module modules/mod_dav_svn.so&#10;LoadModule authz_svn_module modules/mod_authz_svn.so&#10;# For Trac&#10;LoadModule python_module modules/mod_python.so</span><br></pre></td></tr></table></figure>
<p>這樣 Apache 重新啟動時，就會載入 DAV 、 SVN 和 Python 等模組。 </p>
<h3 id="SVN_設定">SVN 設定</h3><p>假如希望某專案的 svn 的路徑是長成這樣：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://localhost:8000/svn/projectname</span><br></pre></td></tr></table></figure>
<p>那麼就需要在 httpd.conf 的最後面加上以下設定： </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#60;Location /svn&#62;&#10;DAV svn&#10;SVNParentPath D:/Repository/svn&#10;#   &#60;LimitExcept GET PROPFIND OPTIONS REPORT&#62;&#10;AuthType Basic&#10;AuthName &#34;CompanyName&#34;&#10;AuthUserFile &#34;D:/Repository/project-users.db&#34;&#10;Require valid-user&#10;#   &#60;/LimitExcept&#62;&#10;&#60;/Location&#62;</span><br></pre></td></tr></table></figure>
<p>這樣不論任何要存取檔案庫的動作 (例如 Checkout 或 Commit ) ，SVN 用戶端都會詢問帳號和密碼。如果希望 Checkout 時不詢問帳號密碼 (也就是匿名帳號可取得檔案) ，那麼就將 LimitExcept 部份的註解拿掉。 </p>
<p>註：當然也可以配合 domainname 和 VirtualHost 來設定，不過內部使用的話這樣就夠了；以下的 Trac 設定也是一樣。</p>
<h3 id="Trac_設定">Trac 設定</h3><p>如果希望用以下網址來連到某專案的 Trac 管理系統：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://localhost:8000/trac/projectname</span><br></pre></td></tr></table></figure>
<p>那麼也是在 httpd.conf 的最後面加上：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#60;Location /trac&#62;&#10;SetHandler mod_python&#10;PythonHandler trac.web.modpython_frontend&#10;PythonOption TracEnvParentDir D:/Repository/trac&#10;PythonOption TracUriRoot /trac&#10;AuthType Basic&#10;AuthName &#34;CompanyName&#34;&#10;AuthUserFile &#34;D:/Repository/project-users.db&#34;&#10;Require valid-user&#10;&#60;/Location&#62;</span><br></pre></td></tr></table></figure>
<p>這樣任何人在連線到該網址時，都會詢問帳號密碼；這樣在權限控管上會較為安全一點。不過這樣會有一個缺點，那就是到時 Trac 的 logout 功能會沒有作用。如果想讓匿名帳號可以先連進來，然後再使用 Trac 的 login 功能來登入的話，可以改成以下方式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#60;Location /trac&#62;&#10;SetHandler mod_python&#10;PythonHandler trac.web.modpython_frontend&#10;PythonOption TracEnvParentDir D:/Repository/trac&#10;PythonOption TracUriRoot /trac&#10;&#60;/Location&#62;&#10;&#60;LocationMatch &#34;/trac/[^/]+/login&#34;&#62;&#10;AuthType Basic&#10;AuthName &#34;CompanyName&#34;&#10;AuthUserFile &#34;D:/Appserv/project-users.db&#34;&#10;Require valid-user&#10;&#60;/LocationMatch&#62;</span><br></pre></td></tr></table></figure>
<p>這樣一來，也可以 logout 後重新以另一個帳號登入。 </p>
<h2 id="總結">總結</h2><p>再把重點提示一次：</p>
<ul>
<li><p>下載相關檔案。</p>
</li>
<li><p>安裝 Apache 、 Python (Trac) 、 Subversion 。</p>
</li>
<li><p>設定 Apache 。 </p>
</li>
</ul>
<p>以上就是 Trac/Subversion on Apache 的安裝與設定，通常只要做一次即可。而如果已經按照上面的說明將環境安裝好，那麼請再看第二篇有關第一次建立專案的說明。</p>
<p>註：這裡提到的方式也許不是最好的，希望有經驗的前輩能夠提點一下更好的方式。</p>
<p>下一篇：<a href="http://blog.roodo.com/jaceju/archives/2703935.html" target="_blank" rel="external">在 Windows 上使用 Trac on Apache - 專案建置篇</a></p>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Windows/"> #Windows </a>
          
            <a href="/tags/伺服器安裝與設定/"> #伺服器安裝與設定 </a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2007/02/26/158/">在 Windows 上使用 Trac on Apache - 使用說明篇</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2007/02/06/157/">在 Windows 上使用 Trac on Apache - 專案建置篇</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    
      <div class="comments" id="comments">
        
          <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
        
      </div>
    
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目錄
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            本站概覽
          </li>
        </ul>
      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Jace Ju" />
          <p class="site-author-name">Jace Ju</p>
        </div>
        <p class="site-description motion-element"></p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">584</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">分類</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">52</span>
              <span class="site-state-item-name">標籤</span>
              </a>
          </div>

        </div>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/jaceju" target="_blank">GitHub</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://twitter.com/jaceju" target="_blank">Twitter</a>
            </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

      </div>

      
        <div class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#說明"><span class="nav-number">1.</span> <span class="nav-text">說明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#檔案下載"><span class="nav-number">2.</span> <span class="nav-text">檔案下載</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安排目錄結構"><span class="nav-number">3.</span> <span class="nav-text">安排目錄結構</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安裝_Apache_2"><span class="nav-number">4.</span> <span class="nav-text">安裝 Apache 2</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一次安裝"><span class="nav-number">4.1.</span> <span class="nav-text">第一次安裝</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重灌系統後的安裝"><span class="nav-number">4.2.</span> <span class="nav-text">重灌系統後的安裝</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安裝_Subversion"><span class="nav-number">5.</span> <span class="nav-text">安裝 Subversion</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一次安裝-1"><span class="nav-number">5.1.</span> <span class="nav-text">第一次安裝</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更新"><span class="nav-number">5.2.</span> <span class="nav-text">更新</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安裝_Python_及_Trac_相關模組"><span class="nav-number">6.</span> <span class="nav-text">安裝 Python 及 Trac 相關模組</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Python_主程式"><span class="nav-number">6.1.</span> <span class="nav-text">Python 主程式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#相關模組"><span class="nav-number">6.2.</span> <span class="nav-text">相關模組</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mod_python_模組"><span class="nav-number">6.3.</span> <span class="nav-text">mod_python 模組</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setuptools_模組"><span class="nav-number">6.4.</span> <span class="nav-text">setuptools 模組</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更新-1"><span class="nav-number">6.5.</span> <span class="nav-text">更新</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安裝_TortoiseSVN"><span class="nav-number">7.</span> <span class="nav-text">安裝 TortoiseSVN</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一次安裝-2"><span class="nav-number">7.1.</span> <span class="nav-text">第一次安裝</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更新-2"><span class="nav-number">7.2.</span> <span class="nav-text">更新</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安裝_Trac_Plugins"><span class="nav-number">8.</span> <span class="nav-text">安裝 Trac Plugins</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安裝_WebAdmin_(for_Trac_0-10-x)"><span class="nav-number">8.1.</span> <span class="nav-text">安裝 WebAdmin (for Trac 0.10.x)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#undefined"><span class="nav-number">8.1.1.</span> <span class="nav-text">補充：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安裝_AccountManager_(for_Trac_0-10-x)"><span class="nav-number">8.2.</span> <span class="nav-text">安裝 AccountManager (for Trac 0.10.x)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#undefined"><span class="nav-number">8.2.1.</span> <span class="nav-text">補充：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#補充：安裝_IniAdmin"><span class="nav-number">8.3.</span> <span class="nav-text">補充：安裝 IniAdmin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Plugins_的更新"><span class="nav-number">8.4.</span> <span class="nav-text">Plugins 的更新</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#undefined"><span class="nav-number">8.4.1.</span> <span class="nav-text">補充：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Apache_設定"><span class="nav-number">9.</span> <span class="nav-text">Apache 設定</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#設定使用者"><span class="nav-number">9.1.</span> <span class="nav-text">設定使用者</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模組設定"><span class="nav-number">9.2.</span> <span class="nav-text">模組設定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SVN_設定"><span class="nav-number">9.3.</span> <span class="nav-text">SVN 設定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Trac_設定"><span class="nav-number">9.4.</span> <span class="nav-text">Trac 設定</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#總結"><span class="nav-number">10.</span> <span class="nav-text">總結</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </div>
      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Jace Ju</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js"></script>


  <script type="text/javascript" src="/js/helpers.js"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js" id="motion.global"></script>




  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if (isDesktop() && CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    });
  </script>




  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  
  

  

    
      
    

    <script type="text/javascript">
      var disqus_shortname = 'jaceju';
      var disqus_identifier = '2007/02/06/156/';
      var disqus_title = '在 Windows 上使用 Trac on Apache - 安裝與設定篇';
      var disqus_url = 'http://jaceju.net/2007/02/06/156/';

      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }());
    </script>
  




  
  
  <script type="text/javascript" src="/js/analytics_google-analytics.js"></script>


</body>
</html>
