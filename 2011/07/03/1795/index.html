<!DOCTYPE html><html lang="zh-tw"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 在 Windows 下使用 LiveReload · 網站製作學習誌</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/jekyll.css"><!--[if lt IE 9]>
<script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--></head><body><header class="row-flex-row limit-width vh-center"><a href="/" class="logo"><img src="/favicon.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">主页</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   博客</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li><li class="nav-list-item"><a href="https://github.com/xxxxx" target="_blank" class="nav-link">   github</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2011/07/03/1795/" class="post-title-link">在 Windows 下使用 LiveReload</a></h2><div class="post-meta"><ul class="post-tag-list"><li class="post-tag-item"><a href="/tags/Web-開發/" class="post-tag-link">Web 開發</a></li><li class="post-tag-item"><a href="/tags/開發工具/" class="post-tag-link">開發工具</a></li></ul><div class="post-time">星期二, 二月 2日 2016</div></div><div class="post-content"><p><a href="https://github.com/mockko/livereload" target="_blank" rel="external">LiveReload</a> 是一個很棒的 Web 開發輔助工具，它可以讓我們在修改完 HTML 、 CSS 、 JavaScript 或是圖檔後，立即在瀏覽器上看到成果，而不需要重新整理頁面。</p>
<p>LiveReload 是 Ruby 的一個 gem 套件，使用時必須先安裝好 Ruby 的開發環境。比較常見的 Ruby 開發環境是以 Apple Mac 系統為主，因此網路上大部份的教學也都是用 Mac 系統做示範；但是很多公司目前還是以 Windows 為主要的開發環境，所以本文就簡單為大家介紹如何在 Windows 上使用 LiveReload 。</p>
<a id="more"></a>
<h2 id="安裝_Ruby_開發環境">安裝 Ruby 開發環境</h2><h3 id="下載安裝程式">下載安裝程式</h3><p>在網路上已經有高手幫我們做好 Ruby for Windows 的安裝程式，它稱為 <a href="http://rubyinstaller.org/" target="_blank" rel="external">RubyInstaller</a> ，我們只要下載回來安裝即可。</p>
<p>首先我們要下載 RubyInstaller 及 DevKit 兩個壓縮檔。請至 <a href="http://rubyinstaller.org/downloads/" target="_blank" rel="external">RubyInstaller::Downloads</a> 下載以下兩個檔案：</p>
<pre><code><span class="bullet">* </span>[<span class="link_label">Ruby 1.9.2-p180</span>](<span class="link_url">http://rubyforge.org/frs/download.php/74299/ruby-1.9.2-p180-i386-mingw32.7z</span>)
<span class="bullet">* </span>[<span class="link_label">DevKit-tdm-32-4.5.1-20101214-1400-sfx.exe</span>](<span class="link_url">http://github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.1-20101214-1400-sfx.exe</span>)
</code></pre><p>註：以上的版本可能會變，在下載時請多留意。</p>
<h3 id="安裝_RubyInstaller">安裝 RubyInstaller</h3><p>將 ruby-1.9.2-p180-i386-mingw32.7z 解開至任何你想安裝 Ruby 的路徑下，這裡我將以 D:\AppServ 為例；然後將解開後的 ruby-1.9.2-p180-i386-mingw32 資料夾，更名為 ruby 即可。</p>
<p>接著在系統環境變數 PATH 前，加入以下路徑：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\AppServ\ruby\bin;</span><br></pre></td></tr></table></figure>
<p>這樣就能在命令列模式下，自動找到 ruby 或 gem 等的相關執行檔。</p>
<p>註：「修改 Windows 系統環境變數」的方法，請自行上 Google 搜尋。</p>
<h3 id="安裝_DevKit">安裝 DevKit</h3><p>首先執行自解檔 DevKit-tdm-32-4.5.1-20101214-1400-sfx.exe ，解壓縮的目錄選擇「 D:\AppServ\ruby\devkit 」。</p>
<p>接著開啟命令列模式視窗 (cmd.exe) ，並執行以下指令來產生 config.yml ：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#62; cd D:\AppServ\ruby\devkit&#10;&#62; ruby dk.rb init</span><br></pre></td></tr></table></figure>
<p> 註：這裡的 &gt; 符號是提示字元，不必輸入。</p>
<p>接下來我們要編輯 D:\AppServ\ruby\devkit\config.yml ，請用記事本開啟該檔案後，在最後面加一行：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- D:/AppServ/ruby</span><br></pre></td></tr></table></figure>
<p>註：最前面的 - (dash) 符號也要輸入，它在 YAML 裡是表示陣列元素的意思。</p>
<p>最後在命令列模式下執行以下指令，就可以在 Ruby 裡安裝 DevKit ：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#62; ruby dk.rb install</span><br></pre></td></tr></table></figure>
<h3 id="測試_DevKit">測試 DevKit</h3><p>安裝 DevKit 的主要目的是讓 Ruby 開發環境可以編譯出  native 的 gem 套件，因此我們來簡單以 rdiscount 這個套件來測試一下 DevKit 是否安裝成功。</p>
<p>首先在命令列模式下輸入以下指令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#62; gem install rdiscount --platform=ruby</span><br></pre></td></tr></table></figure>
<p>如果 DevKit 安裝無誤的話，應該會看到以下訊息：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Temporarily enhancing PATH to include DevKit...&#10;Building native extensions.  This could take a while...&#10;Successfully installed rdiscount-1.6.8&#10;1 gem installed&#10;Installing ri documentation for rdiscount-1.6.8...&#10;Installing RDoc documentation for rdiscount-1.6.8...</span><br></pre></td></tr></table></figure>
<p>接著我們用以下指令來測試看看 rdiscount 是否安裝無誤：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#62; ruby -rubygems -e &#34;require &#39;rdiscount&#39;; puts RDiscount.new(&#39;**Hello RubyInstaller**&#39;).to_html&#34;</span><br></pre></td></tr></table></figure>
<p>出現以下訊息就表示安裝成功了：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#60;p&#62;&#60;strong&#62;Hello RubyInstaller&#60;/strong&#62;&#60;/p&#62;</span><br></pre></td></tr></table></figure>
<h2 id="安裝_LiveReload">安裝 LiveReload</h2><p>接下來要安裝主角 LiveReload 了。</p>
<p>這裡我按照官方的安裝方法一直失敗，原因就出在於 eventmachine 這個套件無法編譯成功。因此我們要先執行以下指令來取得最新的 beta 版本編譯：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#62; gem install eventmachine --pre</span><br></pre></td></tr></table></figure>
<p>編譯並安裝好 eventmachine 後，就可以執行以下指令來安裝 LiveReload 了：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#62; gem install eventmachine-win32 win32-changenotify win32-event livereload --platform=ruby</span><br></pre></td></tr></table></figure>
<h2 id="安裝_Browser_Extension/Add-on">安裝 Browser Extension/Add-on</h2><p>建置好 LiveReload 的環境後，當然還需要瀏覽器配合才行，目前在 Chrome/Firefox/Safari 都已經有對應的套件可以使用了：</p>
<pre><code><span class="bullet">* </span>Chrome - [<span class="link_label">https://chrome.google.com/webstore/detail/jnihajbhpnppcggbcgedagnkighmdlei</span>](<span class="link_url">https://chrome.google.com/webstore/detail/jnihajbhpnppcggbcgedagnkighmdlei</span>)
<span class="bullet">* </span>Firefox - [<span class="link_label">https://addons.mozilla.org/zh-TW/firefox/addon/livereload/</span>](<span class="link_url">https://addons.mozilla.org/zh-TW/firefox/addon/livereload/</span>)
<span class="bullet">* </span>Safari - [<span class="link_label">https://github.com/downloads/mockko/livereload/LiveReload-1.6.2.safariextz</span>](<span class="link_url">https://github.com/downloads/mockko/livereload/LiveReload-1.6.2.safariextz</span>)
</code></pre><p>請直接以對應的瀏覽器下載安裝即可。</p>
<h2 id="使用_LiveReload">使用 LiveReload</h2><p>LiveReload 會監控我們網站檔案的變化，然後通知瀏覽器來更新頁面；以下就是 LiveReload 的使用介紹：</p>
<h3 id="啟用_LiveReload_監控">啟用 LiveReload 監控</h3><p>首先在命令列模式下，切換到想監控的網站所在的路徑後，再輸入以下指令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#62; livereload</span><br></pre></td></tr></table></figure>
<p>這時會出現以下訊息：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Version:  1.6  (compatible with browser extension versions 1.6.x)&#10;Port:     35729&#10;Watching: D:/Web/wwwroot/sass&#10;  - extensions: .html .css .js .png .gif .jpg .php .php5 .py .rb .erb&#10;  - live refreshing disabled for .js: will reload the whole page when .js is changed&#10;  - excluding changes in: */.git/* */.svn/* */.hg/*&#10;  - with a grace period of 0.05 sec after each change&#10;LiveReload is waiting for browser to connect.</span><br></pre></td></tr></table></figure>
<p>這樣就表示 LiveReload 已經開始工作了。</p>
<p>或是我們也可以同時監控多個路徑：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#62; livereload /path/to/dir1 /path/to/dir2 /path/to/dir3</span><br></pre></td></tr></table></figure>
<h3 id="啟用瀏覽器的_LiveReload_功能">啟用瀏覽器的 LiveReload 功能</h3><p>接著在瀏覽器打開要測試的網址，例如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://localhost/livereload-test/</span><br></pre></td></tr></table></figure>
<p>然後啟用 LiveReload 功能，各瀏覽器啟用方法如下：</p>
<pre><code><span class="bullet">* </span>Chrome
</code></pre><p>按下工具列的 LR 按鈕即可，按鈕的圖示會變成淺綠色。</p>
<pre><code><span class="bullet">* </span>Safari
</code></pre><p>在畫面的滑鼠右鍵選單中，選擇「 Enable LiveReload 」。</p>
<pre><code><span class="bullet">* </span>Firefox
</code></pre><p>按下瀏覽器下方狀態列的 LR 圖示即可，這時圖示會變成淺綠色。</p>
<blockquote><br><br>如果在 Firefox 啟用 LiveReload 時，跳出以下訊息：<br><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">LiveReload failed to establish connection: WebSocket is disabled.&#10;To turn it on, open about:config and set network.websocket.override-security-block to true.</span><br></pre></td></tr></table></figure><br><br>那麼就在網址列輸入 about:config 來打開 Firefox 的選項設定視窗，並在篩選條件輸入：<br><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">network.websocket.override-security-block</span><br></pre></td></tr></table></figure><br><br>這樣就會找到 network.websocket.override-security-block 這個設定值，接著雙擊它，讓它的設定值為 true 即可。<br></blockquote>

<p>啟用瀏覽器的 LiveReload 功能後，應該就會在剛剛的命令列模式下，看到以下 log 資訊：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Browser connected.&#10;Browser URL: http://localhost/livereload-test/</span><br></pre></td></tr></table></figure>
<p>這樣就表示瀏覽器已經開始執行 LiveReload 的功能；而且我們也可以同時開啟 Chrome 、 Firefox 及 Safari 的 LiveReload ，這樣就可以一次看到三種瀏覽器呈現的效果了。</p>
<h3 id="實例說明">實例說明</h3><p>假設現在 LiveReload 監控的路徑為 D:\wwwroot\livereload-test ，在這個資料夾下我們有 index.html 及 css/style.css 這兩個檔案。</p>
<p>index.html</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#60;!DOCTYPE html&#62;&#10;&#60;html&#62;&#10;    &#60;head&#62;&#10;        &#60;meta charset=&#34;UTF-8&#34;/&#62;&#10;        &#60;title&#62;LiveReload Test&#60;/title&#62;&#10;        &#60;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;css/style.css&#34; /&#62;&#10;    &#60;/head&#62;&#10;    &#60;body&#62;&#10;        &#60;div id=&#34;navbar&#34;&#62;TODO write content&#60;/div&#62;&#10;    &#60;/body&#62;&#10;&#60;/html&#62;</span><br></pre></td></tr></table></figure>
<p>style.css</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">body &#123;&#10;background: #300;&#10;color: #FFF;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>請利用編輯器修改 css/style.css 的 body background 值，再看看瀏覽器是否有即時產生變化。而在命令列模式執行的 livereload 指令，同時也會顯示修改了哪些檔案：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Modified: index.html&#10;Modified: css/style.css</span><br></pre></td></tr></table></figure>
<p>是不是很酷呢？</p>
<h2 id="心得">心得</h2><p>LiveReload 真的是一個很棒的想法，它節省了很多切換到瀏覽器畫面後重整頁面的時間，讓我們可以真的做到隨打隨看，即時調整網頁呈現的效果。</p>
<p>真的不得不佩服想出這些開發工具的高手們，他們偉大的工作成果造福了我們這些 Web 開發者，也使得我們能有更多時間去處理其他的需求。</p>
<p>不過就像龍哥在讀書會裡說過的：使用了 LiveReload 後，你會發現自己在開發網站時，需要第二顆螢幕了。</p>
</div></article><div class="pagination"><a href="/2011/07/03/1806/" class="pagination-prev">PREV</a><a href="/2011/06/17/1791/" class="pagination-next">NEXT</a></div></div><aside class="sidebar"><h3>分类标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ASP/">ASP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AngularJS/">AngularJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BDD/">BDD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Backbone-js/">Backbone.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li></ul><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2015/11/09/php-closure-testing/">在 PHPUnit 中測試需要 closure 的函式</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/27/web-testing-with-phpunit-mink/">利用 PHPUnit 與 Mink 來做 Web 測試</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/14/what-is-test/">這樣寫測試錯了嗎？</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/05/simple-refatoring-example-01/">邁向 PHP 重構之路 - 以 Laravel 程式碼片段為例</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/29/laravel-mailcatcher/">在 Laravel 上用 MailCatcher 發送測試信件</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/26/laravel-events-broadcasting/">Laravel 5.1 Events Broadcasting 實務練習</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/08/front-end-framework-summary/">幾個有興趣的前端框架</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/10/laravel-5-1/">Laravel 5.1 正式釋出</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><P>© 2016 <a href="/">Jace Ju</P></div><div class="power"><p><a href="http://pinggod.com/">Sean Sun</a>, 
<a href="https://hexo.io">Hexo</a>, 
<a href="https://github.com/">GitHub</a>, 
<a href="https://jekyllrb.com/">Jekyll</a></p></div></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?a36e15d9e2adec9a21fcdd9f686b1ed2";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>