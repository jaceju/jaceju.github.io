<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>Posts on ç¶²ç«™è£½ä½œå­¸ç¿’èªŒ</title>
		<link>https://jaceju.net/posts/</link>
		<description>Recent content in Posts on ç¶²ç«™è£½ä½œå­¸ç¿’èªŒ</description>
		<generator>Hugo -- gohugo.io</generator>
		<language>zh-TW</language>
		<copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright>
		<lastBuildDate>Tue, 08 Sep 2020 12:13:15 +0800</lastBuildDate>
		<atom:link href="https://jaceju.net/posts/index.xml" rel="self" type="application/rss+xml" />
		
		<item>
			<title>ç”¨ Livewire åœ¨ Laravel æ‡‰ç”¨è£¡å¯¦ç¾ç„¡ç—›çš„å‰å¾Œç«¯æºé€š</title>
			<link>https://jaceju.net/laravel-livewire/</link>
			<pubDate>Tue, 08 Sep 2020 12:13:15 +0800</pubDate>
			
			<guid>https://jaceju.net/laravel-livewire/</guid>
			<description>&lt;h2 id=&#34;ç·£èµ·&#34;&gt;ç·£èµ·&lt;/h2&gt;
&lt;p&gt;å¦‚æœä»Šå¤©çµ¦ç¶²ç«™é–‹ç™¼è€…ä¸€å€‹æœ€ç°¡å–®çš„é¡Œç›®ï¼šã€Œå¦‚ä½•åœ¨ä¸é‡æ•´é é¢çš„æƒ…æ³ä¸‹ï¼Œè®“å‰ç«¯ä»‹é¢å¯ä»¥å–å¾—å¾Œç«¯è³‡æ–™çš„ç‹€æ…‹ï¼Ÿã€æˆ‘ç›¸ä¿¡å¹¾ä¹æ‰€æœ‰é–‹ç™¼è€…éƒ½èƒ½å¯¦ä½œå‡ºä¾†ï¼Œç•¢ç«Ÿé€™å€‹æ©Ÿåˆ¶ç®—æ˜¯ç¾ä»£ç¶²ç«™é–‹ç™¼çš„åŸºç¤ã€‚&lt;/p&gt;
&lt;p&gt;é€™å€‹é¡Œç›®çš„ç­”æ¡ˆå¾æ¦‚å¿µä¸Šä¾†èªªï¼Œå°±æ˜¯å¾ˆç°¡å–®çš„ä¸‰å€‹æ­¥é©Ÿï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¾Œç«¯é€å‡º HTML çµ¦ç€è¦½å™¨ä¾†å‘ˆç¾ç¶²é ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨é é¢ä¸Šç”¨ AJAX å‘å¾Œç«¯ API ç™¼èµ·è«‹æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æ¥æ”¶åˆ° AJAX çš„çµæœå¾Œï¼Œå°‡çµæœå‘ˆç¾åˆ°å°æ‡‰çš„ä½ç½®ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç•¶ç„¶ä¸åƒ…æ˜¯å–å¾—çµæœï¼ŒåŒæ¨£çš„æ–¹å¼ä¹Ÿå¯ä»¥ç”¨åœ¨æŠŠå‰ç«¯çš„è³‡æ–™é€å¾€å¾Œç«¯çš„æ¥­å‹™è™•ç†é‚è¼¯ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;åªä¸éé€™èƒŒå¾Œæœ‰å¾ˆå¤šéº»ç…©äº‹è¦è™•ç†ï¼Œåƒæ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¾Œç«¯è¦å»ºç«‹å°æ‡‰å‰ç«¯æ“ä½œçš„ API ï¼Œä¸¦ä¸”è¦é¡§åŠå®‰å…¨æ€§ (ä¾‹å¦‚é˜²ç¯„ CSRF ) ã€‚&lt;/li&gt;
&lt;li&gt;å‰ç«¯è¦é€é XHR ç™¼èµ·è¦æ±‚ï¼Œä¸¦è™•ç† API å„ç¨®ç‹€æ…‹çš„çµæœã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦å­¸ç¿’å¦‚ä½•æ“ä½œå‰ç«¯ DOM å…ƒç´ ï¼Œè®“å¾Œç«¯è³‡è¨Šå¯ä»¥ç¶åœ¨å…ƒç´ ä¸Šæˆ–æ˜¯é€éå…ƒç´ çš„äº‹ä»¶ä¾†å–å¾—å…ƒç´ ä¸Šçš„è³‡è¨Šã€‚&lt;/li&gt;
&lt;li&gt;å‰ç«¯è¦ç¶­è­·ä»‹é¢ç‹€æ…‹ï¼Œåœ¨é‡æ–°æ•´ç†é é¢å¾Œè¦èƒ½å¾Œç«¯è³‡æ–™ç‹€æ…‹åŒæ­¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è«¸å¦‚æ­¤é¡çš„åŸºç¤å·¥å¤«é‚„ä¸å°‘ï¼Œé›–ç„¶ç¾ä»£åŒ–çš„å‰å¾Œç«¯æ¡†æ¶æˆ–å·¥å…·éƒ½å¹«æˆ‘å€‘è™•ç†æ‰äº†ï¼Œä½†å¯¦æˆ°ä¸Šè¦æŠŠå®ƒå€‘å…œèµ·ä¾†é‚„æ˜¯è¦èŠ±æ‰ä¸å°‘æ™‚é–“ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰æ²’æœ‰ä»€éº¼æ›´å¥½çš„æ–¹æ³•ï¼Œå¯ä»¥è®“é–‹ç™¼è€…å¯ä»¥åšæ›´å°‘çš„äº‹ï¼Œè€Œé”åˆ°åŒæ¨£çš„æ•ˆæœå‘¢ï¼Ÿ&lt;/p&gt;</description>
			<content type="html"><![CDATA[<h2 id="ç·£èµ·">ç·£èµ·</h2>
<p>å¦‚æœä»Šå¤©çµ¦ç¶²ç«™é–‹ç™¼è€…ä¸€å€‹æœ€ç°¡å–®çš„é¡Œç›®ï¼šã€Œå¦‚ä½•åœ¨ä¸é‡æ•´é é¢çš„æƒ…æ³ä¸‹ï¼Œè®“å‰ç«¯ä»‹é¢å¯ä»¥å–å¾—å¾Œç«¯è³‡æ–™çš„ç‹€æ…‹ï¼Ÿã€æˆ‘ç›¸ä¿¡å¹¾ä¹æ‰€æœ‰é–‹ç™¼è€…éƒ½èƒ½å¯¦ä½œå‡ºä¾†ï¼Œç•¢ç«Ÿé€™å€‹æ©Ÿåˆ¶ç®—æ˜¯ç¾ä»£ç¶²ç«™é–‹ç™¼çš„åŸºç¤ã€‚</p>
<p>é€™å€‹é¡Œç›®çš„ç­”æ¡ˆå¾æ¦‚å¿µä¸Šä¾†èªªï¼Œå°±æ˜¯å¾ˆç°¡å–®çš„ä¸‰å€‹æ­¥é©Ÿï¼š</p>
<ul>
<li>å¾Œç«¯é€å‡º HTML çµ¦ç€è¦½å™¨ä¾†å‘ˆç¾ç¶²é ã€‚</li>
<li>åœ¨é é¢ä¸Šç”¨ AJAX å‘å¾Œç«¯ API ç™¼èµ·è«‹æ±‚ã€‚</li>
<li>åœ¨æ¥æ”¶åˆ° AJAX çš„çµæœå¾Œï¼Œå°‡çµæœå‘ˆç¾åˆ°å°æ‡‰çš„ä½ç½®ä¸Šã€‚</li>
</ul>
<p>ç•¶ç„¶ä¸åƒ…æ˜¯å–å¾—çµæœï¼ŒåŒæ¨£çš„æ–¹å¼ä¹Ÿå¯ä»¥ç”¨åœ¨æŠŠå‰ç«¯çš„è³‡æ–™é€å¾€å¾Œç«¯çš„æ¥­å‹™è™•ç†é‚è¼¯ä¸Šã€‚</p>
<p>åªä¸éé€™èƒŒå¾Œæœ‰å¾ˆå¤šéº»ç…©äº‹è¦è™•ç†ï¼Œåƒæ˜¯ï¼š</p>
<ul>
<li>å¾Œç«¯è¦å»ºç«‹å°æ‡‰å‰ç«¯æ“ä½œçš„ API ï¼Œä¸¦ä¸”è¦é¡§åŠå®‰å…¨æ€§ (ä¾‹å¦‚é˜²ç¯„ CSRF ) ã€‚</li>
<li>å‰ç«¯è¦é€é XHR ç™¼èµ·è¦æ±‚ï¼Œä¸¦è™•ç† API å„ç¨®ç‹€æ…‹çš„çµæœã€‚</li>
<li>éœ€è¦å­¸ç¿’å¦‚ä½•æ“ä½œå‰ç«¯ DOM å…ƒç´ ï¼Œè®“å¾Œç«¯è³‡è¨Šå¯ä»¥ç¶åœ¨å…ƒç´ ä¸Šæˆ–æ˜¯é€éå…ƒç´ çš„äº‹ä»¶ä¾†å–å¾—å…ƒç´ ä¸Šçš„è³‡è¨Šã€‚</li>
<li>å‰ç«¯è¦ç¶­è­·ä»‹é¢ç‹€æ…‹ï¼Œåœ¨é‡æ–°æ•´ç†é é¢å¾Œè¦èƒ½å¾Œç«¯è³‡æ–™ç‹€æ…‹åŒæ­¥ã€‚</li>
</ul>
<p>è«¸å¦‚æ­¤é¡çš„åŸºç¤å·¥å¤«é‚„ä¸å°‘ï¼Œé›–ç„¶ç¾ä»£åŒ–çš„å‰å¾Œç«¯æ¡†æ¶æˆ–å·¥å…·éƒ½å¹«æˆ‘å€‘è™•ç†æ‰äº†ï¼Œä½†å¯¦æˆ°ä¸Šè¦æŠŠå®ƒå€‘å…œèµ·ä¾†é‚„æ˜¯è¦èŠ±æ‰ä¸å°‘æ™‚é–“ã€‚</p>
<p>æœ‰æ²’æœ‰ä»€éº¼æ›´å¥½çš„æ–¹æ³•ï¼Œå¯ä»¥è®“é–‹ç™¼è€…å¯ä»¥åšæ›´å°‘çš„äº‹ï¼Œè€Œé”åˆ°åŒæ¨£çš„æ•ˆæœå‘¢ï¼Ÿ</p>
<p><a href="https://laravel-livewire.com/">Livewire</a> å°±æ˜¯åœ¨é€™å€‹æ¦‚å¿µä¸‹æ‰€ç”¢ç”Ÿçš„å¥—ä»¶ï¼Œç›®çš„å°±æ˜¯ç‚ºäº†æ¸›å°‘é–‹ç™¼è€…åœ¨å‰å¾Œç«¯æºé€šæ™‚è¦èŠ±è²»çš„å·¥å¤«ã€‚</p>
<p>é€™å€‹å¥—ä»¶å¾ˆæ—©æˆ‘å°±åœ¨ <a href="https://laravel-news.com/laravel-livewire-1-0-0">Laravel News</a> è£¡çŸ¥é“äº†ï¼Œåªæ˜¯ä¸€ç›´éƒ½æ²’æœ‰å‹•åŠ›å»è©¦è©¦ã€‚ä¸éç•¶ Laravel å®˜æ–¹é‡‹å‡ºäº† <a href="https://github.com/laravel/jetstream">Laravel Jetstream</a> é€™å€‹éå¸¸æ£’çš„æœå‹™å¹³å°éª¨æ¶ç”¢ç”Ÿå™¨æ™‚ï¼Œæˆ‘åœ¨ç ”ç©¶çš„æ™‚å€™ç™¼ç¾å®‰è£ Jetsteam çš„éç¨‹ä¸­ï¼Œå¯ä»¥é¸æ“‡ Livewire æˆ–æ˜¯ <a href="https://inertiajs.com/">Inertia.js</a> ã€‚</p>

<div class="note">
<p>è¨»ï¼š Inertia.js çš„æ¦‚å¿µè·Ÿ Livewire æ¦‚å¿µå¾ˆåƒï¼Œä¹Ÿæ˜¯ä¸»æ‰“ä¸éœ€è¦è‡ªè¡Œå»ºç«‹å¾Œç«¯ API (ä½†æ¥­å‹™é‚è¼¯çš„æ’°å¯«é‚„æ˜¯å¿…è¦çš„) ï¼›ä¸éå®ƒæ˜¯å¾ SPA (Single Page Application) çš„è§’åº¦å‡ºç™¼ï¼Œè‘—é‡åœ¨å‰ç«¯çš„é–‹ç™¼ä¸Šã€‚åœ¨ IThome éµäººè³½ä¸Šæœ‰<a href="https://ithelp.ithome.com.tw/users/20113602/ironman/3322">ç³»åˆ—æ–‡</a>å¯ä»¥åƒè€ƒã€‚</p>

</div>

<p>æ—¢ç„¶å®˜æ–¹å¥—ä»¶ä¹Ÿé–‹å§‹ç”¨äº†ï¼Œè¡¨ç¤º Livewire ä¸æœƒæ˜¯æ›‡èŠ±ä¸€ç¾çš„æŠ€è¡“ï¼›å› æ­¤æˆ‘å°±æƒ³å¥½å¥½åœ°çœ‹çœ‹å®ƒæ˜¯æ€éº¼é‹ä½œçš„ï¼Œè®“å®˜æ–¹é¸æ“‡å®ƒä¾†ç•¶åšå¥—ä»¶çš„åº•å±¤æ©Ÿåˆ¶ã€‚</p>
<p>è€Œè¦ç­è§£ä¸€å€‹å·¥å…·ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯å¾å¯¦ä½œé–‹å§‹ã€‚æ¥è‘—æˆ‘æœƒä»¥å®˜æ–¹æ–‡ä»¶çš„æ•™å­¸ç‚ºä¸»ï¼Œç°¡å–®åœ°åˆ†æ Livewire çš„é‹ä½œæ–¹å¼ã€‚</p>
<h2 id="åˆæ¢-livewire">åˆæ¢ Livewire</h2>
<p>ç”±æ–¼ Livewire æ˜¯ä¾é™„åœ¨ Laravel æ‡‰ç”¨ç¨‹å¼ä¸Šçš„æ©Ÿç´šï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦åœ¨æœ¬æ©Ÿå»ºç«‹ä¸€å€‹ Laravel æ‡‰ç”¨ç¨‹å¼ã€‚</p>
<p>é¦–å…ˆæˆ‘å€‘å®‰è£ Laravel Installer æˆ–æ˜¯å°‡å®ƒå‡ç´šè‡³ 4.0 ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ composer global require laravel/installer
</code></pre></div><p>æ¥è‘—å»ºç«‹ä¸¦å•Ÿå‹•ä¸€å€‹ Laravel çš„æ‡‰ç”¨ç¨‹å¼æœå‹™ï¼Œé€™è£¡æˆ‘ç”¨ Valet (Mac only) ä¾†å»ºç«‹ç«™å°ï¼Œå…¶å®ƒç’°å¢ƒè«‹è‡ªè¡Œç ”ç©¶ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ laravel new livewire-demo --dev <span class="c1"># è¨»ï¼š --dev æœƒå®‰è£é–‹ç™¼ç‰ˆæœ¬çš„ Laravel éª¨æ¶ (ç›®å‰æ˜¯ 8.0)</span>
$ <span class="nb">cd</span> livewire-demo
$ valet link <span class="o">&amp;&amp;</span> valet secure
</code></pre></div><p>æœ‰äº†ä¸€å€‹ä¹¾æ·¨çš„ Laravel æ‡‰ç”¨ç¨‹å¼ç’°å¢ƒï¼Œæˆ‘å€‘å°±å¯ä»¥ä¾†è©¦ç©ä¸€ä¸‹ Livewire äº†ã€‚</p>
<p>å…ˆå®‰è£ livewire å¥—ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ composer require livewire/livewire
</code></pre></div><p>æˆ‘å€‘çœ‹ä¸€ä¸‹æ–°å¢äº†ä»€éº¼ routes ï¼š</p>
<pre><code>$ php artisan route:list -c
+----------+----------------------------------+------------------------------------------------------+
| Method   | URI                              | Action                                               |
+----------+----------------------------------+------------------------------------------------------+
| ...      | ...                              | ...                                                  |
| GET|HEAD | livewire/livewire.js             | Livewire\Controllers\LivewireJavaScriptAssets@source |
| GET|HEAD | livewire/livewire.js.map         | Livewire\Controllers\LivewireJavaScriptAssets@maps   |
| POST     | livewire/message/{name}          | Livewire\Controllers\HttpConnectionHandler           |
| GET|HEAD | livewire/preview-file/{filename} | Livewire\Controllers\FilePreviewHandler@handle       |
| POST     | livewire/upload-file             | Livewire\Controllers\FileUploadHandler@handle        |
+----------+----------------------------------+------------------------------------------------------+
</code></pre><p>å¯ä»¥çœ‹åˆ°å®ƒæä¾›äº†å‰ç«¯ assets ã€ä¾›å‰ç«¯æºé€šç”¨çš„è¨Šæ¯ API ã€ä¸Šå‚³æª”æ¡ˆèˆ‡æª”æ¡ˆé è¦½çš„ API ã€‚</p>
<p>ä¸éé€™äº› API åŸå‰‡ä¸ŠçŸ¥é“å°±å¥½ï¼Œåœ¨å¯¦éš›é–‹ç™¼æ™‚å› ç‚º Livewire å·²ç¶“å¹«æˆ‘å€‘å°è£é€™äº› API çš„æ“ä½œï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šä¸æœƒçœ‹åˆ°å®ƒå€‘ã€‚</p>
<p>ç„¶å¾Œæˆ‘å€‘è¦åœ¨ blade template (é€™è£¡ç‚º <code>resources/views/welcome.blade.php</code> ) ä¸ŠåŠ å…¥ Livewire æä¾›çš„ tag <code>&lt;livewire:styles /&gt;</code> èˆ‡ <code>&lt;livewire:scripts /&gt;</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Laravel Livewire Demo<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="c">&lt;!-- Styles --&gt;</span>
    <span class="p">&lt;</span><span class="nt">livewire:styles</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">livewire:scripts</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<div class="note">
<p>è¨»ï¼š Tag æ˜¯ Laravel 7 ä¹‹å¾Œæ‰æ”¯æ´çš„å¯«æ³•ï¼Œå¦‚æœæ˜¯ Laravel 6 ä»¥å‰çš„ç‰ˆæœ¬ï¼Œå¿…é ˆç”¨ <code>@livewireStyles</code> åŠ <code>@livewireScripts</code> ã€‚</p>

</div>

<p>æ¥è‘—æ‰“é–‹é é¢åŸå§‹ç¢¼ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ° styles å’Œ scripts åˆ†åˆ¥è¢«ä»£æ›æˆä»¥ä¸‹ HTML ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="o">[</span><span class="nt">wire</span><span class="err">\</span><span class="p">:</span><span class="nd">loading</span><span class="o">],</span> <span class="o">[</span><span class="nt">wire</span><span class="err">\</span><span class="p">:</span><span class="nd">loading</span><span class="err">\</span><span class="p">.</span><span class="nc">delay</span><span class="o">]</span> <span class="p">{</span>
        <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">[</span><span class="nt">wire</span><span class="err">\</span><span class="p">:</span><span class="nd">offline</span><span class="o">]</span> <span class="p">{</span>
        <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">[</span><span class="nt">wire</span><span class="err">\</span><span class="p">:</span><span class="nd">dirty</span><span class="o">]</span><span class="p">:</span><span class="nd">not</span><span class="o">(</span><span class="nt">textarea</span><span class="o">)</span><span class="p">:</span><span class="nd">not</span><span class="o">(</span><span class="nt">input</span><span class="o">)</span><span class="p">:</span><span class="nd">not</span><span class="o">(</span><span class="nt">select</span><span class="o">)</span> <span class="p">{</span>
        <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
...
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/livewire/livewire.js?id=d3352e4f7c3be3e22a1f&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="p">&gt;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">livewire</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s1">&#39;Livewire: It looks like Livewire\&#39;s @livewireScripts JavaScript assets have already been loaded. Make sure you aren\&#39;t loading them twice.&#39;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">livewire</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Livewire</span><span class="p">();</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">Livewire</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">livewire</span><span class="p">;</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">livewire_app_url</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">livewire_token</span> <span class="o">=</span> <span class="s1">&#39;syJQNxWSjopRJLvEKlImImypOHrzRLq7MJgArStk&#39;</span><span class="p">;</span>

    <span class="cm">/* Make Alpine wait until Livewire is finished rendering to do its thing. */</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">deferLoadingAlpine</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;livewire:load&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">callback</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">};</span>

    <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;DOMContentLoaded&#34;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">livewire</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
    <span class="p">});</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div><p>å¤§è‡´ä¸Šå°±æ˜¯ CSS ç”¨ä¾†éš±è—è¼‰å…¥ä¸­æˆ–é›¢ç·šç­‰ç‹€æ…‹çš„ Livewire å…ƒä»¶ï¼Œè€Œ JS é™¤äº†å®šç¾©è·Ÿå¾Œç«¯æºé€šçš„é€£ç·šè³‡è¨Šå¤–ï¼Œä¹Ÿç”¨ä¾†ç›£è½é é¢ä¸Šæ‰€æœ‰ Livewire å…ƒä»¶çš„äº‹ä»¶ï¼›è‡³æ–¼ç´°ç¯€å°±ä¸å¤šè§£é‡‹äº†ï¼Œç›¸ä¿¡å¤§å®¶æ‡‰è©²éƒ½çœ‹å¾—æ‡‚ã€‚</p>
<p>æ¥è‘—ä¾†çœ‹çœ‹<a href="(https://laravel-livewire.com/docs/quickstart)">å®˜æ–¹æä¾›çš„ä¾‹å­</a>ï¼Œé€™è£¡æˆ‘å€‘è¦æ–°å¢ä¸€å€‹æ‰‹å‹•è¨ˆæ•¸å™¨ã€‚</p>
<p>é¦–å…ˆç”¨ä»¥ä¸‹æŒ‡ä»¤ä¾†å»ºç«‹è¨ˆæ•¸å™¨çš„å…ƒä»¶èˆ‡æ¨£ç‰ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ php artisan make:livewire counter
 COMPONENT CREATED  ğŸ¤™

CLASS: app/Http/Livewire/Counter.php
VIEW:  resources/views/livewire/counter.blade.php
</code></pre></div><p><code>app/Http/Livewire/Counter.php</code> çš„å…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Livewire</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Livewire\Component</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Counter</span> <span class="k">extends</span> <span class="nx">Component</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">render</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;livewire.counter&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>æ³¨æ„é€™è£¡çš„ <code>Livewire Component</code> è·Ÿ Laravel 7 ä¹‹å¾Œçš„ <a href="https://laravel.com/docs/7.x/blade#components">Blade Components</a> çš„å¯¦ä½œæ˜¯ä¸ä¸€æ¨£çš„ï¼Œé›–ç„¶å®ƒå€‘çš„ç”¨æ³•åŸºæœ¬ä¸Šå¾ˆåƒï¼Œä½†é‚„æ˜¯åˆ¥ææ··äº†ã€‚</p>
<p>å†ä¾†çœ‹ <code>resources/views/livewire/counter.blade.php</code> ï¼Œå®ƒç›®å‰åªæœ‰ä¸€å€‹ <code>div</code> æ¨™ç±¤å°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    {{-- ä¸€å¥éš¨æ©ŸæŒ‘é¸çš„ä¿šèª --}}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div><p>ç¾åœ¨æˆ‘å€‘è¦è®“é€™å€‹è¨ˆæ•¸å™¨å‹•èµ·ä¾†äº†ï¼Œç¬¬ä¸€æ­¥æ˜¯åœ¨ <code>Counter</code> é¡åˆ¥è£œä¸Šè¨ˆæ•¸å™¨çš„æš«å­˜ç‹€æ…‹èˆ‡è¡Œç‚ºé‚è¼¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// ...
</span><span class="c1"></span>
<span class="k">class</span> <span class="nc">Counter</span> <span class="k">extends</span> <span class="nx">Component</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">increment</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">count</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">decrement</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">count</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><p>ä¸‹ä¸€æ­¥æ˜¯ä¿®æ”¹ <code>counter.blade.php</code> çš„å…§å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;text-align: center&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">wire:click</span><span class="o">=</span><span class="s">&#34;increment&#34;</span><span class="p">&gt;</span>+<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ $count }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">wire:click</span><span class="o">=</span><span class="s">&#34;decrement&#34;</span><span class="p">&gt;</span>-<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div><p>ä½ æœƒç™¼ç¾æˆ‘å€‘ç”¨ <code>wire:click</code> å»ç¶å®šå¾Œç«¯ <code>Counter</code> é¡åˆ¥çš„ <code>increment</code> å’Œ <code>decrement</code> é€™å…©å€‹æ–¹æ³•ï¼Œé€™å°±æ˜¯ Livewire ä¸»æ‰“çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<p>ç¾åœ¨æˆ‘å€‘è¦ä¾†ä½¿ç”¨é€™å€‹è¨ˆæ•¸å™¨å…ƒä»¶äº†ã€‚ä¿®æ”¹ <code>resources/views/welcome.blade.php</code> ï¼Œåœ¨ <code>&lt;body&gt;</code> å¾ŒåŠ å…¥ <code>&lt;livewire:counter /&gt;</code> é€™å€‹ tag ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">...

<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">livewire:counter</span> <span class="p">/&gt;</span>

...
</code></pre></div><p>æ¥è‘—é‡æ•´ç€è¦½å™¨é é¢ï¼Œä½ æ‡‰è©²æœƒçœ‹åˆ°ä»¥ä¸‹ç•«é¢ï¼š</p>
<p><img src="/resources/laravel-livewire/counter.png" alt=""></p>
<p>å†çœ‹çœ‹é é¢åŸå§‹æª”ï¼Œä½ æœƒç™¼ç¾ <code>counter.blade.php</code> çš„ <code>div</code> æ¨™ç±¤å¤šäº†ä¸€äº›å±¬æ€§ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">wire:id</span><span class="o">=</span><span class="s">&#34;VhVG7h01POBNuWMvpaVx&#34;</span>
     <span class="na">wire:initial-data</span><span class="o">=</span><span class="s">&#34;{&amp;quot;fingerprint&amp;quot;:{&amp;quot;id&amp;quot;:&amp;quot;VhVG7h01POBNuWMvpaVx&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;counter&amp;quot;,&amp;quot;locale&amp;quot;:&amp;quot;en&amp;quot;},&amp;quot;effects&amp;quot;:{&amp;quot;listeners&amp;quot;:[],&amp;quot;path&amp;quot;:&amp;quot;https:\/\/livewire-demo.test&amp;quot;},&amp;quot;serverMemo&amp;quot;:{&amp;quot;children&amp;quot;:[],&amp;quot;errors&amp;quot;:[],&amp;quot;htmlHash&amp;quot;:&amp;quot;31258d01&amp;quot;,&amp;quot;data&amp;quot;:{&amp;quot;count&amp;quot;:0},&amp;quot;checksum&amp;quot;:&amp;quot;2ed61de3befc848b43c1cb84eb3bf9f2a65cae1586c1631bc4d49efa284ab3ac&amp;quot;}}&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;text-align: center&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">wire:click</span><span class="o">=</span><span class="s">&#34;increment&#34;</span><span class="p">&gt;</span>+<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">wire:click</span><span class="o">=</span><span class="s">&#34;decrement&#34;</span><span class="p">&gt;</span>-<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div><p><code>wire:id</code> æ˜¯å…ƒä»¶çš„å”¯ä¸€è­˜åˆ¥ï¼Œå‡è¨­é é¢æœ‰å¤šå€‹è¨ˆæ•¸å™¨ï¼Œ <code>wire:id</code> èƒ½è®“ Livewire çŸ¥é“ç›®å‰æˆ‘å€‘æ“ä½œçš„æ˜¯å“ªä¸€å€‹è¨ˆæ•¸å™¨ã€‚</p>
<p>å†æŠŠå±¬æ€§ <code>wire:initial-data</code> è£¡çš„ <code>&amp;quot;</code> æ›¿æ›æˆ <code>&quot;</code> å¾Œå†æ’ç‰ˆä¸€ä¸‹å°±å¯ä»¥å¾—åˆ°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;fingerprint&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;VhVG7h01POBNuWMvpaVx&#34;</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;counter&#34;</span><span class="p">,</span>
    <span class="nt">&#34;locale&#34;</span><span class="p">:</span> <span class="s2">&#34;en&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;effects&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;listeners&#34;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="nt">&#34;path&#34;</span><span class="p">:</span> <span class="s2">&#34;https://livewire-demo.test&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;serverMemo&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;children&#34;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="nt">&#34;errors&#34;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="nt">&#34;htmlHash&#34;</span><span class="p">:</span> <span class="s2">&#34;31258d01&#34;</span><span class="p">,</span>
    <span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;count&#34;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="nt">&#34;checksum&#34;</span><span class="p">:</span> <span class="s2">&#34;2ed61de3befc848b43c1cb84eb3bf9f2a65cae1586c1631bc4d49efa284ab3ac&#34;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>é€™å°±æ˜¯ Livewire ç”¨ä¾†è®“å‰ç«¯å¯ä»¥è·Ÿå¾Œç«¯æºé€šçš„è³‡è¨Šï¼Œè€Œä¸”å…¶ä¸­ä¹ŸåŠ ä¸Šä¸€äº›é˜²æ­¢ä¿®æ”¹çš„æªæ–½ï¼Œç•¢ç«Ÿã€Œ<strong>ä¸è¦ç›¸ä¿¡ç”¨æˆ¶ç«¯ä¾†çš„æ‰€æœ‰è³‡è¨Š</strong>ã€æ˜¯å¾Œç«¯é–‹ç™¼çš„é‡è¦è§€å¿µä¹‹ä¸€ã€‚</p>
<p>æ¥ä¸‹ä¾†æ‰“é–‹ç€è¦½å™¨çš„é™¤éŒ¯å·¥å…·ï¼Œè§€å¯Ÿè·Ÿ XHR æœ‰é—œçš„ç¶²è·¯é€£ç·šã€‚ç„¶å¾ŒæŒ‰ä¸€ä¸‹é é¢ä¸Šçš„æŒ‰éˆ• <code>+</code> ä¾†è®“æ•¸å­—ç™¼ç”Ÿè®ŠåŒ–ï¼Œé€™æ™‚å€™æˆ‘å€‘å°±æœƒçœ‹åˆ° Livewire è§¸ç™¼äº†ä¸€å€‹ XHR çš„é€£ç·šï¼Œå®ƒæ‰“åˆ°ä»¥ä¸‹é€™å€‹ API ï¼š</p>
<pre><code>[POST] https://livewire-demo.test/livewire/message/counter
</code></pre><p>é€™å°±æ˜¯æˆ‘å€‘ä¸Šé¢çœ‹åˆ°é‚£å€‹æŒ‡å‘ <code>livewire/message/{name}</code> çš„ Laravel route ã€‚</p>
<p>è€Œå®ƒçš„ request payload é•·é€™æ¨£ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;fingerprint&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;VhVG7h01POBNuWMvpaVx&#34;</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;counter&#34;</span><span class="p">,</span>
    <span class="nt">&#34;locale&#34;</span><span class="p">:</span> <span class="s2">&#34;en&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;serverMemo&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;children&#34;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="nt">&#34;errors&#34;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="nt">&#34;htmlHash&#34;</span><span class="p">:</span> <span class="s2">&#34;31258d01&#34;</span><span class="p">,</span>
    <span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;count&#34;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="nt">&#34;checksum&#34;</span><span class="p">:</span> <span class="s2">&#34;2ed61de3befc848b43c1cb84eb3bf9f2a65cae1586c1631bc4d49efa284ab3ac&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;updates&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;callMethod&#34;</span><span class="p">,</span>
      <span class="nt">&#34;payload&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;method&#34;</span><span class="p">:</span> <span class="s2">&#34;increment&#34;</span><span class="p">,</span>
        <span class="nt">&#34;params&#34;</span><span class="p">:</span> <span class="p">[]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div><p>å¯ä»¥ç™¼ç¾åˆ°å®ƒä¸Ÿäº†ä¸€å€‹ <code>increment</code> æ–¹æ³•åç¨±çµ¦å¾Œç«¯ã€‚ä¹Ÿå°±æ˜¯èªª Livewire ä¸¦ä¸æ˜¯åœ¨å‰ç«¯é€²è¡Œé‹ç®—ï¼Œè€Œæ˜¯é€é XHR å‚³éæ–¹æ³•åç¨±ä¾†è¦æ±‚å¾Œç«¯çš„è¨ˆæ•¸å™¨å…ƒä»¶å° <code>count</code> å€¼é€²è¡Œè¨ˆç®—ã€‚</p>
<p>è¦ç‰¹åˆ¥æ³¨æ„ï¼Œé€™æ™‚å€™ Livewire æ˜¯ç”¨<strong>å‰ç«¯çš„ <code>count</code> å€¼</strong>åŠ ä¸Šè¦å‘¼å«çš„æ–¹æ³• <code>increment</code> çµ¦å¾Œç«¯çš„é‹ç®—é‚è¼¯ï¼Œä¾†è®“ <code>count</code> å€¼åŠ ä¸€ï¼›å¦‚æœä¸æ­é…å­˜å„²æ©Ÿåˆ¶çš„è©± (ä¾‹å¦‚ Session / DB ç­‰) ï¼Œå¾Œç«¯ä¸¦ä¸æœƒè¨˜ä½ç›®å‰çš„è¨ˆæ•¸å™¨çš„ <code>count</code> å€¼ï¼Œæ‰€ä»¥é‡æ–°æ•´ç†é é¢å¾Œå®ƒå°±æœƒé‚„åŸå›å…ƒä»¶çš„åˆå§‹å€¼ã€‚</p>
<p>æœ€å¾Œä¾†çœ‹çœ‹å›æ‡‰çš„å…§å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;effects&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;html&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;div wire:id=\&#34;VhVG7h01POBNuWMvpaVx\&#34; style=\&#34;text-align: center\&#34;&gt;\n    &lt;button wire:click=\&#34;increment\&#34;&gt;+&lt;/button&gt;\n    &lt;h1&gt;1&lt;/h1&gt;\n    &lt;button wire:click=\&#34;decrement\&#34;&gt;-&lt;/button&gt;\n&lt;/div&gt;\n&#34;</span><span class="p">,</span>
    <span class="nt">&#34;dirty&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;count&#34;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&#34;serverMemo&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;htmlHash&#34;</span><span class="p">:</span> <span class="s2">&#34;fbf6038e&#34;</span><span class="p">,</span>
    <span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;count&#34;</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">},</span>
    <span class="nt">&#34;checksum&#34;</span><span class="p">:</span> <span class="s2">&#34;6685b4e7d45f9c4db431e5c267eed759eae1c950096ced91feccfc94cd109411&#34;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>åœ¨è¨ˆæ•¸å™¨çš„é‹ç®—å®Œæˆå¾Œï¼Œå°±æœƒå°‡ blade æ¨£ç‰ˆå¥—ç”¨æ–°è®Šæ•¸çµæœå¾Œæ‰€ç”¢ç”Ÿçš„ HTML å…§å®¹å›å‚³ï¼Œä¸¦å–ä»£æ‰ç›®å‰å…ƒä»¶çš„ HTML ã€‚</p>
<p>è‡³æ­¤ï¼Œå¤§è‡´ä¸Šå¯ä»¥ç­è§£ Livewire çš„é‹ä½œæµç¨‹å…¶å¯¦è·Ÿæˆ‘å€‘å¹³å¸¸åšçš„äº‹æ²’ä»€éº¼å·®åˆ¥ï¼Œåªä¸é Livewire å°è£äº†èƒŒå¾Œçš„ç´°ç¯€ï¼Œä½¿å…¶æ›´ç‚ºè‡ªå‹•åŒ–ï¼Œè®“é–‹ç™¼è€…å¯ä»¥æ›´å°ˆæ³¨åœ¨è‡ªå·±çš„æ¥­å‹™é‚è¼¯ä¸Šã€‚ç•¶ç„¶å¦‚æœå¤§å®¶å°ç´°ç¯€æœ‰èˆˆè¶£çš„è©±ï¼Œå¯ä»¥åƒè€ƒå®˜æ–¹æ–‡ä»¶æˆ–åŸå§‹æª”ã€‚</p>
<h2 id="å„ªç¼ºé»åˆ†æ">å„ªç¼ºé»åˆ†æ</h2>
<p>é›–ç„¶é‚„æ²’ç©å¾—å¾ˆæ·±ï¼Œä¸éå¤§è‡´ä¸Šå¯ä»¥æƒ³åˆ° Livewire æœ‰ä»¥ä¸‹çš„å„ªé»ï¼š</p>
<ul>
<li>ç°¡å–®çš„æƒ…å¢ƒå¹¾ä¹ä¸éœ€è¦å¯« JavaScript ã€‚</li>
<li>å…ƒä»¶çš„ç‹€æ…‹ç”±å¾Œç«¯ç®¡ç†ï¼Œå‰ç«¯çš„å·¥è®Šå°‘ï¼Œé©åˆå°å‰ç«¯ä¸é‚£éº¼ç†Ÿæ‚‰çš„å¾Œç«¯é–‹ç™¼è€…ã€‚</li>
</ul>
<p>åªæ˜¯å°±æˆ‘çš„ç¶“é©—ä¾†åˆ¤æ–·ï¼Œå®ƒä¹Ÿå¯èƒ½æœ‰ä»¥ä¸‹çš„ç¼ºé»ï¼š</p>
<ul>
<li>ä¸€äº›è·Ÿå¾Œç«¯é‚è¼¯ç„¡é—œçš„è¤‡é›œå‰ç«¯ UI æˆ–æ©Ÿåˆ¶ï¼Œå¯èƒ½é‚„æ˜¯éœ€è¦è—‰åŠ©å…¶å®ƒ UI æ¡†æ¶æˆ–å¥—ä»¶ä¾†å”åŠ©ã€‚</li>
<li>è¤‡é›œçš„ UI å…ƒä»¶åˆ‡æ³•å’Œå¾Œç«¯å…ƒä»¶çš„æ­é…å¯èƒ½è¦èŠ±é»æ™‚é–“ç†è§£ã€‚</li>
<li>å› ç‚ºå‰å¾Œç«¯çš„ç•Œç·šè®Šå¾—æ¨¡ç³Šï¼Œæœƒå®¹æ˜“è®“æ–°æ‰‹ææ··å‰å¾Œç«¯çš„é‹ä½œæ©Ÿåˆ¶ã€‚</li>
</ul>
<p>ç•¶ç„¶é€™ä¹Ÿåªæ˜¯æˆ‘æ·ºå˜—å¾Œçš„å°è±¡ï¼Œä¹Ÿè¨±å†æ·±å…¥ä¸€é»ä¹‹å¾Œï¼Œå¯èƒ½åˆæœƒæœ‰ä¸åŒçš„è¦‹è§£ã€‚</p>
<h2 id="çµè«–">çµè«–</h2>
<p>ä¸å¾—ä¸èªª Livewire çœŸçš„æ˜¯ä¸€å€‹å¯ä»¥ç¯€çœé–‹ç™¼è€…ä¸å°‘åŠ›æ°£çš„æœ‰è¶£å·¥å…·ï¼›ç•¶ç„¶å®ƒæ‰€æ‡‰ç”¨çš„æ¦‚å¿µæˆ‘æƒ³ä¹Ÿä¸æ˜¯æ–°çš„ï¼Œåªä¸éå°æ–¼å‚³çµ± Laravel é–‹ç™¼è€…ä¾†èªªï¼Œç¢ºå¯¦å¯èƒ½ä¸€ä¸‹å­é›£ä»¥æ¥å—ã€‚ç¾éšæ®µå¦‚æœè¦å°å…¥ Livewire ï¼Œæˆ‘å»ºè­°å¾æ¯”è¼ƒåŠŸèƒ½æ¯”è¼ƒç°¡å–®ï¼Œæƒ…å¢ƒæ²’æœ‰é‚£éº¼è¤‡é›œçš„æ–°å°ˆæ¡ˆé–‹å§‹ï¼Œå»ç†Ÿæ‚‰å®ƒçš„é‹ä½œæ–¹å¼å’Œç¼ºé»ã€‚</p>
<p>æœ¬æ–‡åªæ˜¯éå¸¸ç°¡å–®åœ°ä»‹ç´¹äº† Livewire çš„æ¦‚å¿µå’Œç”¨æ³•ï¼Œæˆ‘çŸ¥é“å„ä½å¿ƒä¸­å°å®ƒé‚„æœ‰å¾ˆå¤šç–‘å•ï¼Œé€™äº›ä½ éƒ½å¯ä»¥è©¦è‘—å¾å®˜æ–¹æ–‡ä»¶å’Œ issue ä¸­æ‰¾ç­”æ¡ˆã€‚è‡³æ–¼æ›´é€²ä¸€æ­¥çš„æ‡‰ç”¨æ–¹å¼ï¼Œç•¶ç„¶å°±æ˜¯æ¨è–¦ Laravel å®˜æ–¹é‡‹å‡ºçš„ <a href="https://github.com/laravel/jetstream">Laravel Jetstream</a> ã€‚</p>
<h2 id="åƒè€ƒ">åƒè€ƒ</h2>
<ul>
<li><a href="https://laravel-livewire.com/docs/quickstart">Laravel Livewire::Quickstart</a></li>
<li><a href="https://medium.com/@avnshrathod/laravel-livewire-installation-and-demo-dfaf930f5f64">Laravel livewire installation and demo</a></li>
<li><a href="https://laravelarticle.com/laravel-livewire-crud-tutorial">Laravel Livewire CRUD tutorial</a></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>æˆ‘çš„ 2019 å¹´</title>
			<link>https://jaceju.net/my-2019/</link>
			<pubDate>Thu, 26 Dec 2019 16:59:15 +0800</pubDate>
			
			<guid>https://jaceju.net/my-2019/</guid>
			<description>åˆåˆ°äº†ä¸€å¹´çš„å°¾è²äº†ï¼Œå¹´åˆå›é¡§äº†å»å¹´çš„é»é»æ»´æ»´ï¼Œè¶è‘—ä»Šå¹´é‚„æœ‰ä¸€é»é»æ™‚é–“ï¼Œä¹Ÿæ‡‰è©²å¥½å¥½ä¾†æ•´ç†ä¸€ä¸‹è‡ªå·±åšäº†å“ªäº›äº‹ã€‚ è¦æŠŠ 2019 å¹´æˆ‘åšçš„äº‹ç¸½çµæˆä¸€å¥è©±çš„è©±ï¼Œ</description>
			<content type="html"><![CDATA[<p>åˆåˆ°äº†ä¸€å¹´çš„å°¾è²äº†ï¼Œå¹´åˆå›é¡§äº†<a href="/my-2018/">å»å¹´çš„é»é»æ»´æ»´</a>ï¼Œè¶è‘—ä»Šå¹´é‚„æœ‰ä¸€é»é»æ™‚é–“ï¼Œä¹Ÿæ‡‰è©²å¥½å¥½ä¾†æ•´ç†ä¸€ä¸‹è‡ªå·±åšäº†å“ªäº›äº‹ã€‚</p>
<p>è¦æŠŠ 2019 å¹´æˆ‘åšçš„äº‹ç¸½çµæˆä¸€å¥è©±çš„è©±ï¼Œå°±æ˜¯ï¼š</p>
<blockquote>
<p><strong>é€æ¼¸å¾€åˆç†çš„æ¶æ§‹å»æ”¹å–„ï¼Œå¥½è®“æ¥ä¸‹ä¾†è¦åšçš„äº‹æ›´å¿«æ›´å®¹æ˜“ã€‚</strong></p>
</blockquote>
<p>ç•¶ç„¶æˆ‘æƒ³é€™ä»¶äº‹æœ¬ä¾†å°±æ˜¯ç¨‹å¼é–‹ç™¼åŸºæœ¬ä¸­çš„åŸºæœ¬ï¼Œåªä¸éç›¸è¼ƒæ–¼å…¶å®ƒæŠ€è¡“ä¸Šæˆ‘æ¯”è¼ƒè‘—é‡é€™éƒ¨ä»½ï¼Œæ‰€ä»¥å°±è¢«æˆ‘é¸åšä»Šå¹´çš„ç¸½çµäº†ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="2019-å¹´åšäº†ä»€éº¼">2019 å¹´åšäº†ä»€éº¼</h2>
<p>é‚„æ˜¯å…ˆç²—ç•¥åœ°åˆ—ä¸€ä¸‹è‡ªå·±ä»Šå¹´åšäº†å“ªäº›äº‹ï¼š</p>
<ul>
<li>å®Œå–„ä¸¦ç™¼ä½ˆä¸€èµ·è½çš„ç›£æ§å¾Œå°ã€‚</li>
<li>æŸ Web æ‡‰ç”¨ç¨‹å¼æ”¹ç‰ˆ (å› ç‚ºé‚„æ²’å®Œæˆï¼Œæ‰€ä»¥æš«æ™‚ä¸èƒ½å…¬é–‹æ˜¯ä»€éº¼ã€‚)</li>
<li>é–‹ç™¼ä¸Šé¢ Web æ‡‰ç”¨ç¨‹å¼æ–°ç‰ˆæœ¬æ‰€éœ€è¦çš„ Web API ï¼ŒåŒæ™‚ä¹Ÿæä¾›çµ¦å…¶å®ƒ Web æœå‹™ä½¿ç”¨ã€‚</li>
<li>é‡æ–°å­¸ç¿’å‰ç«¯é–‹ç™¼ã€‚</li>
<li>ç·¨å¯«åœ˜éšŠç”¨çš„é–‹ç™¼æ–‡ä»¶ã€‚</li>
<li>å¯«äº†å¹¾ç¯‡ç°¡å ±ï¼Œæ•´ç†ä¸€äº›é–‹ç™¼ç¶“é©—å’Œå€‹äººå­¸ç¿’ç­†è¨˜ã€‚</li>
<li>åªè®€äº†å¹¾æœ¬ç¶“å…¸æŠ€è¡“æ›¸ç±ï¼Œä½†éæŠ€è¡“æ€§è³ªçš„æ›¸å€’æ˜¯çœ‹äº†ä¸å°‘ã€‚</li>
<li>ç ´é—œäº†å¹¾æ¬¾éŠæˆ²ã€‚</li>
</ul>
<h2 id="ä»Šå¹´æœ‰ä»€éº¼é«”æ‚Ÿ">ä»Šå¹´æœ‰ä»€éº¼é«”æ‚Ÿï¼Ÿ</h2>
<p>åœ¨ç¨‹å¼é–‹ç™¼ä¸Šçš„è§€å¿µå¤§è‡´å°±æ˜¯é‚£äº›è€ç”Ÿå¸¸è«‡çš„æ±è¥¿ï¼Œä»Šå¹´åœ¨é–‹ç™¼ä¸Šä¹Ÿè„«é›¢ä¸äº†å®ƒå€‘ã€‚ä¸éé‚„æ˜¯é‡é»åœ°æ•´ç†ä¸€ä¸‹ä¸€äº›é«”æ‚Ÿï¼Œä¹Ÿç•¶åšè‡ªæˆ‘çš„æˆé•·ç´€éŒ„ã€‚</p>
<h3 id="æ¶æ§‹å¥½å°éœ€æ±‚çš„åæ‡‰å°±å¿«">æ¶æ§‹å¥½å°éœ€æ±‚çš„åæ‡‰å°±å¿«</h3>
<p>è€å¯¦èªªæˆ‘è‡ªå·±å†æ€éº¼ç·´å¯« code çš„é€Ÿåº¦ï¼Œç¯€çœä¸‹ä¾†çš„æ™‚é–“ä¹Ÿæ²’æœ‰æ¯”æˆ‘æŠŠæ¶æ§‹åšå¥½æ‰€ç¯€çœçš„æ™‚é–“ä¾†å¾—å¤šã€‚ç•¶ç„¶é€™ä¸æ˜¯èªªå¯« code çš„é€Ÿåº¦ä¸é‡è¦ï¼Œåªä¸éå‰é¡Œæ˜¯åœ¨é¢å°ç”¢å“éœ€æ±‚æ™‚ï¼Œæ‡‰è©²æ˜¯å»æ€è€ƒï¼š</p>
<blockquote>
<p><strong>å…ˆçœ‹æ¸…æ¥šè·¯è©²æ€éº¼èµ°æ¯”è¼ƒçœæ™‚ï¼Œè€Œä¸æ˜¯ä¸€é–‹å§‹å°±æƒ³æ€éº¼è·‘æ¯”è¼ƒå¿«ã€‚</strong></p>
</blockquote>
<p>æˆ‘è‡ªå·±åœ¨ç¨‹å¼æ¶æ§‹çš„è¨­è¨ˆä¸Šå¤§è‡´ä¸Šè‘—é‡å¹¾å€‹é»ï¼š</p>
<ul>
<li><strong>æ˜“æ–¼ç†è§£</strong>ï¼šæ¶æ§‹ä¸æ˜¯è¨­è¨ˆä¾†çµ¦è‡ªå·±è‡ªå—¨çš„ï¼Œè€Œæ˜¯è¦è®“åŒäº‹ä¹Ÿèƒ½æ¸…æ¥šå®ƒçš„è„ˆçµ¡ã€‚</li>
<li><strong>æ˜“æ–¼é–‹ç™¼</strong>ï¼šç•¶æ¶æ§‹çš„æŠ½è±¡åŒ–å¤ æ˜ç¢ºæ™‚ï¼Œå¾ˆå¤šæ™‚å€™æˆ‘åªéœ€è¦æ·»åŠ æ¸¬è©¦å’Œæ–°é¡åˆ¥ï¼Œå°±å¯ä»¥å¾ˆå¿«æ»¿è¶³éœ€æ±‚ã€‚</li>
<li><strong>å–„ç”¨ç‰¹æ€§</strong>ï¼šå„˜å¯èƒ½å¾ç¨‹å¼èªè¨€çš„ç‰¹æ€§ä¾†è¨­è¨ˆæ¶æ§‹ï¼Œé™¤äº†è¦å¥½é–‹ç™¼ä¹‹å¤–ï¼Œæ›´è¦é¿å…ç„¡è¬‚çš„æ•ˆèƒ½æµªè²»ã€‚</li>
</ul>
<h3 id="æ¶æ§‹ç°¡å–®æ‰å¥½æ”¹å‹•">æ¶æ§‹ç°¡å–®æ‰å¥½æ”¹å‹•</h3>
<p>æ—©æœŸåœ¨è¨­è¨ˆæ¶æ§‹æ™‚ï¼Œæˆ‘å€‘ç¸½æ˜¯æœƒæŠŠå¾ˆå¤šç‹€æ³è€ƒæ…®é€²ä¾†ï¼›çµæœåœ¨ä¸æ–·åœ°æ·»åŠ æ¢ä»¶å¾Œï¼Œæ•´å€‹æ¶æ§‹å°±è®Šå¾—è¶Šä¾†è¶Šè‡ƒè…«ã€‚ä½†äº‹å¯¦è­‰æ˜ï¼Œé€™äº›è€ƒé‡ä¸¦æ²’æœ‰é‚£éº¼å¿…è¦ï¼Œè€Œä¸”é‚„å¤§å¤§åœ°å‰Šå¼±äº†å¾ŒçºŒæ¶æ§‹çš„å¯èª¿æ•´æ€§ã€‚</p>
<p>å› æ­¤å¾Œä¾†æˆ‘åœ¨è¨­è¨ˆæ¶æ§‹æ™‚ä¸€ç›´æŠŠæ¡é€™å€‹åŸå‰‡ï¼š</p>
<blockquote>
<p><strong>é™¤ééœ€æ±‚å¾ˆæ˜ç¢ºåœ°ä¸€å®šè¦åšï¼Œå¦å‰‡ä¸è¦å°ç³»çµ±åšå‡ºéå¤šçš„å‡è¨­ã€‚</strong></p>
</blockquote>
<p>å¾é€™å€‹åŸå‰‡è£¡ï¼Œæˆ‘å»¶ä¼¸å‡ºå¹¾å€‹é‡é»ï¼š</p>
<ul>
<li>å…ˆé‡å°æœ€é—œéµçš„æ ¸å¿ƒå•é¡Œå»è¨­è¨ˆï¼Œè®“æ¶æ§‹åœç¹åœ¨ç”¢å“çš„æ ¸å¿ƒå»å¾€å¤–å»¶å±•ï¼Œæœ€å¾Œæ‰¾åˆ°æœ€åˆç†è€Œä¸”ç°¡å–®çš„è¨­è¨ˆã€‚</li>
<li>ä¸è¦ä¸€é–‹å§‹å°±è©¦è‘—å¥—ç”¨è¨­è¨ˆæ¨¡å¼ï¼Œè€Œæ˜¯å»ç™¼æ˜é€™å€‹æ¶æ§‹å¯ä»¥é å‘å“ªå€‹æ¨¡å¼ï¼Œæˆ–æ ¹æœ¬ä¸é©ç”¨ä»»ä½•æ¨¡å¼ã€‚</li>
<li>å°‡åˆ†è§£æ¶æ§‹æˆæ¨¡çµ„ä¸¦é€ä¸€æŠ½è±¡åŒ–ï¼›æŠ½è±¡åŒ–æ˜¯é¿å…å°æ¨¡çµ„æœ‰å¤ªå¤šå‡è¨­ï¼ŒåŒæ™‚ä¹Ÿå®šç¾©å‡ºæ¯å€‹æ¨¡çµ„çš„è·è²¬èˆ‡é‚Šç•Œã€‚</li>
</ul>
<h3 id="code-review-å°±æ˜¯æ”¹å–„çš„æ©Ÿæœƒ">Code Review å°±æ˜¯æ”¹å–„çš„æ©Ÿæœƒ</h3>
<p>é›–ç„¶åœ¨è¨­è¨ˆæ¶æ§‹æ™‚æˆ‘æœƒè·Ÿä¸€èµ·åˆä½œå°ˆæ¡ˆçš„åŒäº‹ç”¨ç™½æ¿ç•«åœ–è¨è«–ï¼Œä½†å¯¦éš›çš„ç¨‹å¼ç¢¼å¯«å‡ºä¾†å‡ºå¾Œï¼Œå¯èƒ½å°±è·Ÿç•¶åˆæƒ³åƒçš„ä¸å¤ªä¸€æ¨£äº†ã€‚æ‰€ä»¥åœ¨æˆ‘è¨­è¨ˆå¥½ç¨‹å¼æ¶æ§‹ï¼Œä¸”è‡ªå·±è©¦è‘—åœ¨ä¸Šé¢é–‹ç™¼æ–°åŠŸèƒ½å¾Œï¼Œä¸€å®šéƒ½æœƒè«‹åŒäº‹å¹«å¿™ code review ï¼›åœ¨ code review çš„éç¨‹ä¸­ï¼ŒåŒäº‹å°±æœƒçµ¦æˆ‘éå¸¸å¤šæ¶æ§‹å¦‚ä½•æ”¹å–„çš„å»ºè­°ã€‚</p>
<p>é‡å°æ¶æ§‹çš„ code review ï¼Œå¤§è‡´ä¸Šæœ‰ä»¥ä¸‹æ–¹å‘ï¼š</p>
<ul>
<li><strong>å¯¦ä½œå…±è­˜</strong>ï¼šæ¯å€‹äººå°èªè¨€ç‰¹æ€§çš„æŒæ¡ä¸ä¸€å®šç›¸åŒï¼Œå› æ­¤å¯ä»¥å¾ç¨‹å¼ç¢¼ä¾†ç¢ºèªå¤§å®¶å°æ¶æ§‹å¦‚ä½•å¯¦ä½œæ˜¯å¦æœ‰æ­£ç¢ºçš„å…±è­˜ã€‚</li>
<li><strong>éœ€æ±‚å°å‘</strong>ï¼šæœ‰æ™‚å€™é”æˆç›®çš„çš„æ¶æ§‹ä¸æœƒåªæœ‰ä¸€ç¨®å½¢å¼ï¼Œæ‰€ä»¥è«‹å°éœ€æ±‚å·²ç¶“æœ‰é¡ä¼¼ç¶“é©—çš„åŒäº‹ code review æ™‚å°±å¯ä»¥æ‰¾åˆ°ç¬¦åˆéœ€æ±‚çš„å½¢å¼ã€‚</li>
<li><strong>ç™¼ç¾ç¼ºé»</strong>ï¼šæœ‰æ™‚å¯¦ä½œæ™‚ä¼¼ä¹æ²’ä»€éº¼å•é¡Œçš„æ¶æ§‹ï¼Œç•¶ code review æŸäº›é»å¾Œæ‰ç™¼ç¾æœƒæœ‰é æƒ³ä¹‹å¤–çš„ç‹€æ³ã€‚é€™æ™‚å€™å°±è¦è¿…é€Ÿèª¿æ•´æ€ç¶­ï¼Œé‡æ–°è¨è«–å‡ºæ¶æ§‹åœ¨é¢è‡¨éœ€æ±‚æ™‚çš„ç¼ºé»ã€‚</li>
</ul>
<h2 id="ç°¡å ±åˆ†äº«">ç°¡å ±åˆ†äº«</h2>
<p>é›–ç„¶æ²’æœ‰å…¬é–‹çš„æ¼”è¬›ï¼Œä½†ç‚ºäº†ä¸è®“è‡ªå·±åšç°¡å ±çš„èƒ½åŠ›é€€åŒ–ï¼Œä»Šå¹´æˆ‘é‚„æ˜¯ç”Ÿå‡ºå¹¾å€‹å¯ä»¥åˆ†äº«çš„ç°¡å ±ã€‚</p>
<h3 id="å°ˆæ¡ˆæ”¹ç‰ˆç´€éŒ„æˆ‘å€‘çš„é³³å‡°å°ˆæ¡ˆ">å°ˆæ¡ˆæ”¹ç‰ˆç´€éŒ„ï¼šæˆ‘å€‘çš„é³³å‡°å°ˆæ¡ˆ</h3>
<p>ä»Šå¹´èŠ±äº†ä¸€é»æ™‚é–“æŠŠè‡ªå·±åœ¨æŸå€‹èˆŠå°ˆæ¡ˆæ”¹ç‰ˆçš„éç¨‹è¨˜éŒ„ä¸‹ä¾†ï¼Œå› ç‚ºè¦ç¢°åˆ°é€™é¡å°ˆæ¡ˆçš„æ©Ÿæœƒé›–ç„¶å¾ˆå¤šï¼Œä½†çœŸæ­£èƒ½æˆåŠŸçš„å»å¾ˆå°‘ï¼ŒåŸå› åœ¨æ–¼æ”¿æ²»å› ç´ çš„å¹²æ“¾ä»¥åŠæ²’æœ‰è™•ç†å¥½éæ¸¡æ™‚æœŸçš„è½‰æ›ã€‚</p>
<!-- raw HTML omitted -->
<h3 id="å‰ç«¯é–‹ç™¼åŸºç¤-vuejs-å…¥é–€">å‰ç«¯é–‹ç™¼åŸºç¤ï¼š Vue.js å…¥é–€</h3>
<p>é€™ä»½ç°¡å ±å…¶å¯¦æ˜¯å¾ˆæ—© Vue.js 1 çš„æ™‚å€™åšçš„ï¼Œä¸éå› ç‚ºä»Šå¹´æœ‰å‰ç«¯å°ˆæ¡ˆçš„éœ€æ±‚ï¼Œå› æ­¤ç‰¹åœ°å°‡å®ƒæ”¹æˆäº† Vue.js 2 çš„ç‰ˆæœ¬ã€‚</p>
<!-- raw HTML omitted -->
<h3 id="å€‹äººèƒ½åŠ›å­¸ç¿’-compiler-å…¥é–€ç­†è¨˜">å€‹äººèƒ½åŠ›å­¸ç¿’ï¼š Compiler å…¥é–€ç­†è¨˜</h3>
<p>åœ¨è³‡è¨Šé ˜åŸŸæ‰“æ»¾é€™éº¼ä¹…ï¼Œè€å¯¦èªªæˆ‘é‚„æ˜¯è¦ºå¾—è‡ªå·±æ¯”ä¸ä¸Šé‚£äº›ç§‘ç­å‡ºèº«çš„äººï¼›åƒæ˜¯ç·¨è­¯å™¨é€™ç¨®å¾ˆåŸºç¤çš„çŸ¥è­˜ï¼Œæˆ‘ä¸€ç›´æ²’èƒ½ç†è§£å¾—å¾ˆæ·±å…¥ã€‚ç‚ºäº†å…§éƒ¨åˆ†äº«æ™‚ä¸å†åƒè€æœ¬ï¼ŒèŠ±äº†ä¸€é»æ™‚é–“æŠŠé€™æ–¹é¢çš„åŸºç¤å¾é ­å­¸äº†ä¸€éï¼›é€™æ‰ç™¼ç¾å…¶å¯¦æœ‰å¾ˆå¤šå¹³å¸¸çœ‹åˆ°çš„å·¥å…·ï¼Œå®ƒå€‘çš„èƒŒå¾Œéƒ½æ˜¯é‹ç”¨åˆ°è£¡é¢çš„åŸç†ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>ä»Šå¹´é›–ç„¶æ˜¯è·¨éä¸æƒ‘ä¹‹å¹´ï¼Œä½†è€å¯¦èªªéå¾—æœ‰é»è¿·æƒ˜ï¼Œä¹Ÿæ²’ä»€éº¼å¿ƒæƒ…åƒèˆ‡ç¤¾ç¾¤çš„æ´»å‹•ï¼›ä¼‘é–’æ™‚é–“å¤§å¤šèŠ±åœ¨é–±è®€ä¸Šé¢ï¼Œå¸æ”¶ä¸€äº›è·ŸæŠ€è¡“ç„¡é—œçš„çŸ¥è­˜ã€‚ç”Ÿæ´»ä¸¦ä¸æ˜¯é‚£éº¼ç²¾é‡‡ï¼Œä½†å¹³æ·¡æ˜¯ç¦ã€‚</p>
<p>ç„¶å¾Œæˆ‘é‚„æ˜¯è¦æ„Ÿè¬æˆ‘çš„åŒäº‹å€‘ï¼Œå¦‚æœæ²’æœ‰ä»–å€‘çš„æ™ºæ…§èˆ‡æºé€šèƒ½åŠ›ï¼Œæˆ‘æƒ³æœ‰å¾ˆå¤šäº‹æƒ…æˆ‘è‡ªå·±æ˜¯å¾ˆé›£é †åˆ©ä¸”æ¼‚äº®åœ°è™•ç†æ‰ã€‚</p>
<p>2020 å¹´ä¼¼ä¹æœƒæœ‰å¾ˆå¤šè®ŠåŒ–ï¼Œå¸Œæœ›è‡ªå·±ä¹Ÿèƒ½å¤ ç¹¼çºŒå¹³å¸¸å¿ƒå»é¢å°ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>é—œæ–¼ PHP Traversing çš„é€™æª”äº‹</title>
			<link>https://jaceju.net/all-about-php-traversing/</link>
			<pubDate>Tue, 24 Dec 2019 10:37:59 +0800</pubDate>
			
			<guid>https://jaceju.net/all-about-php-traversing/</guid>
			<description>foreach å¤§æ¦‚æ˜¯ PHP ç¨‹å¼ä¸­æœ€å¸¸è¦‹çš„èªæ³•çµæ§‹ä¹‹å¾Œï¼Œæœ¬æ–‡å°‡æœƒä»‹ç´¹ foreach çš„ä¸€äº›è§€å¿µï¼Œä»¥åŠå¹¾å€‹è·Ÿå®ƒç›¸é—œçš„ PHP 7 ç‰¹è‰²ã€‚ foreach èµ·æ‰‹å¼ å¸¸è¦‹çš„ foreach ç”¨æ³• ä¸€èˆ¬æˆ‘å€‘æœ€å¸¸çœ‹åˆ° foreach ç”¨åœ¨éæ­· (traversing)</description>
			<content type="html"><![CDATA[<p><code>foreach</code> å¤§æ¦‚æ˜¯ PHP ç¨‹å¼ä¸­æœ€å¸¸è¦‹çš„èªæ³•çµæ§‹ä¹‹å¾Œï¼Œæœ¬æ–‡å°‡æœƒä»‹ç´¹ <code>foreach</code> çš„ä¸€äº›è§€å¿µï¼Œä»¥åŠå¹¾å€‹è·Ÿå®ƒç›¸é—œçš„ PHP 7 ç‰¹è‰²ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="foreach-èµ·æ‰‹å¼">foreach èµ·æ‰‹å¼</h2>
<h3 id="å¸¸è¦‹çš„-foreach-ç”¨æ³•">å¸¸è¦‹çš„ foreach ç”¨æ³•</h3>
<p>ä¸€èˆ¬æˆ‘å€‘æœ€å¸¸çœ‹åˆ° <a href="https://www.php.net/manual/en/control-structures.foreach.php"><code>foreach</code></a> ç”¨åœ¨éæ­· (traversing) é™£åˆ—è£¡çš„å…ƒç´ ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$arr = [1, 2, 3];

foreach ($arr as $num) {
    echo &#34;$num\n&#34;;
}
</code></pre></div><p>è€Œå¦‚æœæƒ³éæ­·é—œé€£å¼é™£åˆ— (associative array) ï¼ŒåŒæ™‚å–å¾—å…ƒç´ çš„éµ (key) èˆ‡å€¼ (value) ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹èªæ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$arr = [&#39;a&#39; =&gt; 1, &#39;b&#39; =&gt; 2, &#39;c&#39; =&gt; 3];

foreach ($arr as $key =&gt; $num) {
    echo &#34;$key =&gt; $num\n&#34;;
}
</code></pre></div><p>å¦‚æœé™£åˆ—å…ƒç´ æœ¬èº«ä¹Ÿæ˜¯é™£åˆ—ï¼Œæˆ‘å€‘ç¨±ç‚ºã€Œå·¢ç‹€é™£åˆ— (nested array) ã€ã€‚åœ¨éæ­·å·¢ç‹€é™£åˆ—æ™‚ï¼Œæˆ‘å€‘å¯ä»¥ç”¨ <code>list(...)</code> ä¾†è§£æ§‹æ¯å€‹é™£åˆ—å…ƒç´ ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$arr = [
    [&#39;a&#39;, 1],
    [&#39;b&#39;, 2],
    [&#39;c&#39;, 3],
];

foreach ($arr as list($alpha, $num)) {
    echo &#34;$alpha =&gt; $num\n&#34;;
}
</code></pre></div><p>åœ¨ PHP 7.1 ä¹‹å¾Œï¼Œä½ å¯ä»¥ç”¨æ–¹æ‹¬è™Ÿä¾†å–ä»£ <code>list()</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">foreach ($arr as [$alpha, $num]) {
    echo &#34;$alpha =&gt; $num\n&#34;;
}
</code></pre></div><p>ç•¶ç„¶åˆ¥å¿˜äº† PHP 7.1 ä¹‹å¾Œï¼Œ <code>list()</code> å¯ä»¥ç”¨æŒ‡å®šéµçš„æ–¹å¼ä¾†å–å€¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$users = [
    [&#39;id&#39; =&gt; 1, &#39;name&#39; =&gt; &#39;Alice&#39;, &#39;age&#39; =&gt; 18],
    [&#39;id&#39; =&gt; 2, &#39;name&#39; =&gt; &#39;Bob&#39;, &#39;age&#39; =&gt; 24],
    [&#39;id&#39; =&gt; 3, &#39;name&#39; =&gt; &#39;Carl&#39;, &#39;age&#39; =&gt; 33]
];

foreach ($users as [&#39;name&#39; =&gt; $name, &#39;age&#39; =&gt; $age, &#39;id&#39; =&gt; $id]) {
    var_dump(&#34;$id $name: $age&#34;);
}
</code></pre></div><h3 id="å¦‚æœæ²’æœ‰-foreach">å¦‚æœæ²’æœ‰ foreach</h3>
<p>PHP æœ‰æä¾›å¹¾å€‹å‡½å¼ç”¨ä¾†æ“ä½œé™£åˆ—è£¡çš„æŒ‡æ¨™ï¼Œä»¥åŠå–å¾—æŒ‡æ¨™æŒ‡å‘çš„é™£åˆ—å…ƒç´ ï¼›åˆ†åˆ¥æ˜¯ <a href="https://www.php.net/manual/en/function.reset.php"><code>reset</code></a> / <a href="https://www.php.net/manual/en/function.prev.php"><code>prev</code></a> / <a href="https://www.php.net/manual/en/function.next.php"><code>next</code></a> / <a href="https://www.php.net/manual/en/function.current.php"><code>current</code></a> / <a href="https://www.php.net/manual/en/function.end.php"><code>end</code></a> ã€‚</p>
<p>ä½ å¯ä»¥ç”¨ <a href="https://www.php.net/manual/en/control-structures.while.php"><code>while</code></a> æ­é…ä»¥ä¸Šçš„å‡½å¼ä¾†éæ­·é™£åˆ—ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$arr = [null, 1, 2, false, null, 3, 4];

// ç›´æ¥æ‰¾åˆ°æœ€å¾Œä¸€å€‹å…ƒç´ 
// é€™è£¡æŒ‡æ¨™æ˜¯æŒ‡å‘æœ€å¾Œä¸€å€‹å…ƒç´ 
var_dump(end($arr));

// å› ç‚ºæŒ‡æ¨™å·²ç¶“è·‘åˆ°æœ€å¾Œä¸€å€‹å…ƒç´ çš„ä½ç½®
// æ‰€ä»¥è¦é‡ç½®æŒ‡æ¨™
reset($arr);

// éæ­·é™£åˆ—è£¡çš„å…ƒç´ 
while (!is_null(key($arr))) {
    var_dump(current($arr));
    next($arr);
}

// æŒ‡æ¨™çš„ä½ç½®å·²ç¶“æ²’æœ‰å…ƒç´ äº†
var_dump(current($arr));
</code></pre></div><p>å¦ä¸€å€‹ä¸ç”¨ <code>foreach</code> çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>array_walk</code> é€™å€‹å‡½å¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$arr = [1, 2, 3];

array_walk($arr, function ($item) {
    echo &#34;$item &#34;;
});

$arr = [&#39;a&#39; =&gt; 1, &#39;b&#39; =&gt; 2, &#39;c&#39; =&gt; 3];

array_walk($arr, function ($item, $key) {
    echo &#34;$key =&gt; $item&#34;;
});
</code></pre></div><h3 id="ç”¨-foreach-ä¾†åˆ—èˆ‰ç‰©ä»¶å±¬æ€§">ç”¨ foreach ä¾†åˆ—èˆ‰ç‰©ä»¶å±¬æ€§</h3>
<p><code>foreach</code> ä¹Ÿå¯ä»¥ç”¨ä¾†åˆ—èˆ‰ (listing) ç‰©ä»¶çš„å±¬æ€§ï¼Œåªè¦è©²ç‰©ä»¶ä¸æ˜¯å±¬æ–¼å¯éæ­·çš„ç‰©ä»¶ã€‚</p>
<p>ç•¶ä½ å°ä¸€å€‹ç‰©ä»¶å¯¦é«”ç”¨ <code>foreach</code> ä¾†åˆ—èˆ‰å±¬æ€§çš„è©±ï¼Œä½ åªèƒ½çœ‹åˆ°å®ƒçš„å…¬é–‹å±¬æ€§ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class MyClass
{
    public $publicVar = &#39;public var&#39;;

    protected $protectedVar = &#39;protected var&#39;;

    private $privateVar = &#39;private var&#39;;
}

$class = new MyClass();

foreach ($class as $key =&gt; $value) {
    echo &#34;$key =&gt; $value\n&#34;;
}
</code></pre></div><p>ä½†æ˜¯å¦‚æœä½ æ˜¯åœ¨ç‰©ä»¶å…§éƒ¨å° <code>$this</code> åšåˆ—èˆ‰å±¬æ€§ï¼Œé‚£éº¼ä½ å¯ä»¥çœ‹åˆ°é€™å€‹ç‰©ä»¶æ‰€æœ‰çš„å±¬æ€§ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class MyClass
{
    public $publicVar = &#39;public var&#39;;

    protected $protectedVar = &#39;protected var&#39;;

    private $privateVar = &#39;private var&#39;;

    public function iterateSelf()
    {
        foreach ($this as $key =&gt; $value) {
            print &#34;$key =&gt; $value\n&#34;;
        }
    }
}

$class = new MyClass();

$class-&gt;iterateSelf();
</code></pre></div><p>æ³¨æ„ï¼Œä¹‹æ‰€ä»¥ç‰¹æ„ç”¨ã€Œåˆ—èˆ‰å±¬æ€§ã€å°‡ã€Œéæ­·å…ƒç´ ã€çš„æ¦‚å¿µå€åˆ†é–‹ä¾†ï¼Œå¯¦åœ¨æ˜¯å› ç‚º <code>foreach</code> å° PHP ç‰©ä»¶çš„æ“ä½œçœŸçš„å¾ˆå¾®å¦™ã€‚</p>
<p>ä¸€èˆ¬ä¾†èªªï¼Œæˆ‘å€‘å¸Œæœ›ç”¨ <code>foreach</code> ä¾†éæ­·é›†åˆçš„å…ƒç´ ï¼Œè€Œä¸æ˜¯åˆ—èˆ‰ç‰©ä»¶çš„å±¬æ€§ï¼›æ‰€ä»¥ç•¶ç‰©ä»¶å±¬æ–¼ä¸€å€‹é›†åˆæ™‚ï¼Œå°±éœ€è¦è®“ç‰©ä»¶æ‰€å±¬çš„é¡åˆ¥å¯¦ä½œä¸€äº›ç‰¹åˆ¥çš„ä»‹é¢ã€‚</p>
<h2 id="ç”¨-foreach-ä¾†éæ­·çš„ä»‹é¢">ç”¨ foreach ä¾†éæ­·çš„ä»‹é¢</h2>
<h3 id="traversable">Traversable</h3>
<p>å¦‚æœä½ éœ€è¦çš„æ˜¯ä¸€å€‹å¯ä»¥è¢«éæ­·çš„ç‰©ä»¶ (é€šå¸¸æ˜¯é›†åˆç‰©ä»¶) ï¼Œé‚£éº¼ä½ å¯ä»¥æª¢æŸ¥å®ƒæ˜¯ä¸æ˜¯å±¬æ–¼ <code>Traversable</code> é€™å€‹ä»‹é¢ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">if ($obj instanceof Traversable) {
    // ...
}
</code></pre></div><p>ä½†æ˜¯è¦æ³¨æ„ <code>Traversable</code> çš„å¹¾å€‹ç‰¹é»ï¼š</p>
<ol>
<li>é¡åˆ¥ä¸èƒ½ç›´æ¥å¯¦ä½œ <code>Traversable</code> ä»‹é¢ã€‚</li>
<li>é›–ç„¶é™£åˆ—å¯ä»¥ç”¨ <code>foreach</code> ä¾†éæ­·ï¼Œä½†å®ƒä¸¦ä¸å±¬æ–¼ <code>Traversable</code> ä»‹é¢ã€‚</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// ä¸èƒ½ç›´æ¥å¯¦ä½œ
class MyExample implements Traversable {} // Error

// é™£åˆ—ä¸å±¬æ–¼ Traversable
$arr = [1, 2, 3];
var_dump($arr instanceof Traversable); // false
</code></pre></div><p>å†æ¬¡å¼·èª¿ï¼šç‰©ä»¶é›–ç„¶å¯ä»¥ç”¨ <code>foreach</code> ä¾†æ“ä½œï¼Œä½†å®ƒä¸ä¸€å®šæ˜¯ <code>Traversable</code> ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// ç‰©ä»¶å¯ä»¥ foreach åˆ—èˆ‰å±¬æ€§ï¼Œä½†ä¸ä¸€å®šæ˜¯ Traversable
$obj = (object) [&#39;a&#39; =&gt; 1, &#39;b&#39; =&gt; 2, &#39;c&#39; =&gt; 3];
foreach ($obj as $key =&gt; $value) {
    echo &#34;$key =&gt; $value\n&#34;;
}
var_dump($obj instanceof Traversable); // false

class MyExample {}
$obj = new MyExample();
var_dump($obj instanceof Traversable); // false
</code></pre></div><h3 id="iterator-èˆ‡-iteratoraggregate">Iterator èˆ‡ IteratorAggregate</h3>
<p>ç”±æ–¼ä¸èƒ½ç›´æ¥å¯¦ä½œ <code>Traversable</code> ä»‹é¢ï¼Œå®˜æ–¹å»ºè­°æ‡‰è©²æ”¹ç‚ºå¯¦ä½œ <code>Iterator</code> æˆ–æ˜¯ <code>IteratorAggregate</code> é€™é¡çš„ä»‹é¢ï¼Œå®ƒå€‘éƒ½ç¹¼æ‰¿è‡ª <code>Traversable</code> ä»‹é¢ã€‚</p>
<p><code>Iterator</code> ä»‹é¢å°±å¦‚åŒå‰é¢ä»‹ç´¹çš„ <code>next</code> ã€ <code>current</code> ç­‰å‡½å¼ä¸€æ¨£ï¼Œæä¾›äº†æ“ä½œæŒ‡æ¨™èˆ‡å–å¾—æŒ‡æ¨™æ‰€æŒ‡å‘çš„å…ƒç´ ç­‰æ–¹æ³•ä»‹é¢ï¼Œä»¥ä¾›é¡åˆ¥ä¾†å¯¦ä½œã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€å€‹å¾ˆå…¸å‹çš„ç¯„ä¾‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class IteratorExample implements Iterator
{
    private $position = 0;

    private $data = [];

    public function __construct(array $data)
    {
        $this-&gt;position = 0;
        $this-&gt;data = $data;
    }

    public function rewind()
    {
        $this-&gt;position = 0;
    }

    public function current()
    {
        return $this-&gt;data[$this-&gt;position];
    }

    public function key()
    {
        return $this-&gt;position;
    }

    public function next()
    {
        ++$this-&gt;position;
    }

    public function valid()
    {
        return array_key_exists(
            $this-&gt;position,
            $this-&gt;data
        );
    }
}
</code></pre></div><p>æˆ‘å€‘å¯ä»¥ç”¨ <code>while</code> æ•˜è¿°ä¾†éæ­· <code>Iterator</code> ç‰©ä»¶è£¡çš„å…ƒç´ ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$it = new IteratorExample([&#39;a&#39;, null, &#39;b&#39;, &#39;c&#39;]);

$it-&gt;rewind();

while ($it-&gt;valid()) {
    $key = $it-&gt;key();
    var_dump($it-&gt;current());
    $it-&gt;next();
}
</code></pre></div><p>ç•¶ç„¶ä¹Ÿå¯ä»¥ç”¨ <code>foreach</code> ä¾†éæ­·ï¼Œå› ç‚ºé€™æ™‚æ‰€ç”Ÿæˆçš„ç‰©ä»¶å¯¦é«”å·²ç¶“å±¬æ–¼ <code>Traversable</code> ä»‹é¢äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">foreach ($it as $value) {
    var_dump($value);
}

var_dump($it instanceof Traversable); // true
</code></pre></div><p>å¯¦ä½œ <code>Iterator</code> ä»‹é¢çš„å¥½è™•ï¼Œå°±æ˜¯å¯ä»¥ä¾ç…§è‡ªå®šç¾©çš„é‚è¼¯ä¾†éæ­·ç‰©ä»¶å…§çš„å…ƒç´ ï¼Œé€™åœ¨æŸäº›ç‰¹åˆ¥çš„æƒ…å¢ƒä¸‹å¾ˆå¥½ç”¨ã€‚</p>
<p>å¦ä¸€å€‹æ›´ç‚ºç°¡ä¾¿çš„ä»‹é¢æ˜¯ <code>IteratorAggregate</code> ï¼Œå®ƒåªéœ€è¦å¯¦ä½œ <code>getIterator</code> é€™å€‹æ–¹æ³•å°±å¯ä»¥äº†ï¼Œ <code>getIterator</code> æ–¹æ³•å¿…é ˆå›å‚³ä¸€å€‹å¯¦ä½œ <code>Iterator</code> çš„ç‰©ä»¶ã€‚</p>
<p>PHP å…§å»ºäº†<a href="https://www.php.net/manual/en/spl.iterators.php">å¤šç¨® Iterator é¡åˆ¥</a>è®“é–‹ç™¼è€…ä¸éœ€è¦å¾é ­å®šç¾©ä¸€å€‹å¯¦ä½œ <code>Iterator</code> ä»‹é¢çš„é¡åˆ¥ï¼Œä»¥ä¸‹ç¤ºç¯„ <code>ArrayIterator</code> é€™å€‹é¡åˆ¥å¦‚ä½•è·Ÿ <code>IteratorAggregate</code> ä»‹é¢æ­é…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class IteratorAggregateExample implements IteratorAggregate
{
    private $data = [];

    public function __construct(array $data)
    {
        $this-&gt;data = $data;
    }

    public function getIterator()
    {
        return new ArrayIterator($this-&gt;data);
    }
}

$it = new IteratorAggregateExample([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]);

foreach ($it as $value) {
    echo &#34;$value\n&#34;;
}
</code></pre></div><p>ç”¨ <code>IteratorAggregate</code> ä»‹é¢çš„å¥½è™•æ˜¯ï¼Œä½ å¯ä»¥å‹•æ…‹æ›´æ› <code>getIterator</code> æ–¹æ³•çš„å›å‚³å…§å®¹ï¼Œè€Œä¸å¿…è®“ç¨‹å¼ç¶æ­»åœ¨ç‰¹å®šçš„ Iterator é¡åˆ¥ä¸Šã€‚</p>
<h3 id="iterable-å‹åˆ¥">iterable å‹åˆ¥</h3>
<p><code>Traversable</code> é›–ç„¶å¯ä»¥ç”¨ä¾†åˆ¤æ–·è®Šæ•¸å¯å¦è¢«éæ­·ï¼Œä½†å®ƒå»ä¸é©ç”¨åœ¨é™£åˆ—è®Šæ•¸ä¸Šã€‚å› æ­¤ PHP åœ¨ 7.1 åŠ å…¥äº†ä¸€å€‹å½å‹åˆ¥ (pseudo-type) ï¼š <a href="https://www.php.net/manual/en/language.types.iterable.php"><code>iterable</code></a> ï¼Œå¯ä»¥ç”¨åœ¨ <a href="https://www.php.net/manual/en/functions.arguments.php#functions.arguments.type-declaration">Argument type declarations</a> (å³ type hint) åŠ <a href="https://www.php.net/manual/en/functions.returning-values.php#functions.returning-values.type-declaration">Return type declarations</a> ä¸Šã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function getArr(): iterable
{
    return [&#39;a&#39; =&gt; 1, &#39;b&#39; =&gt; 2, &#39;c&#39; =&gt; 3];
}

function traverse(iterable $list)
{
    foreach ($list as $item) {
        echo &#34;$item &#34;;
    }
}

$arr = getArr();
$it = new ArrayIterator($arr);

var_dump(is_iterable($arr)); // true
var_dump(is_iterable($it));  // true

traverse($arr); // 1 2 3
traverse($it);  // 1 2 3
</code></pre></div><p>å› æ­¤å»ºè­°åœ¨ç¨‹å¼ä¸­ï¼Œå¯ä»¥ç”¨ <code>iterable</code> å‹åˆ¥ä¾†å–ä»£ <code>Traversable</code> ä»‹é¢ã€‚</p>
<h2 id="å¦‚ä½•åœ¨-foreach-æ™‚ç¯€çœè¨˜æ†¶é«”">å¦‚ä½•åœ¨ foreach æ™‚ç¯€çœè¨˜æ†¶é«”</h2>
<p>æœ‰æ™‚å€™è¦éæ­·çš„å°è±¡ï¼Œåœ¨ç”Ÿæˆå¾Œå¯èƒ½æœƒä½”ç”¨å¾ˆå¤§çš„è¨˜æ†¶é«”ç©ºé–“ï¼Œé€™å¯èƒ½æœƒé€ æˆ PHP åŸ·è¡Œæ™‚æœŸçš„è¨˜æ†¶é«”ä¸è¶³ã€‚ä»¥ <code>range</code> ç‚ºä¾‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function showMemUsageIf(bool $show = false): void
{
    if ($show) {
        echo round(memory_get_usage() / 1024 / 1024, 2) . &#39; MB&#39; . PHP_EOL;
    }
}

showMemUsageIf(true); // 15.42 MB
$a = range(1, 1000000);
foreach ($a as $num) { ... }
showMemUsageIf(true); // 47.43 MB
</code></pre></div><p>å› æ­¤åœ¨ PHP 5.5 ä¹‹å¾Œçš„ç‰ˆæœ¬ï¼Œæä¾›äº† <a href="https://www.php.net/manual/en/class.generator.php">Generator</a> é€™å€‹é¡åˆ¥ï¼Œå®ƒå¯ä»¥å”åŠ©æˆ‘å€‘åœ¨å¿…è¦æ™‚æ‰ç”Ÿæˆè¦è™•ç†çš„å…ƒç´ ã€‚</p>
<p>ä½†æ˜¯ä½ ä¸èƒ½ç›´æ¥ç”¨ <code>new</code> ä¾†ç”Ÿæˆä¸€å€‹ <code>Generator</code> é¡åˆ¥çš„ç‰©ä»¶å¯¦é«”ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ PHP æä¾›äº† <code>yield</code> é€™å€‹æ–°èªæ³•ã€‚</p>
<p><code>yield</code> ç”¨é€”å’Œ <code>return</code> å¾ˆé¡ä¼¼ï¼Œä½† <code>yield</code> åªèƒ½æ”¾åœ¨å‡½å¼æˆ–é¡åˆ¥æ–¹æ³•ä¸­ï¼Œè€ŒåŒ…å«äº† <code>yield</code> çš„å‡½å¼æˆ–é¡åˆ¥æ–¹æ³•ï¼Œå…¶å›å‚³å€¼çš„å‹æ…‹éƒ½æ˜¯ <code>Generator</code> é¡åˆ¥ã€‚</p>
<p>ç”±æ–¼ <code>Generator</code> é¡åˆ¥å¯¦ä½œäº† <code>Iterator</code> ä»‹é¢ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ <code>foreach</code> ä¾†éæ­·å…¶ç‰©ä»¶å¯¦é«”ã€‚</p>
<p>å…ˆä¾†çœ‹ä¸€å€‹åŸºæœ¬çš„ <code>yield</code> ç”¨æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function gen()
{
    echo &#34;a: &#34;;
    yield 1;

    echo &#34;b: &#34;;
    yield 2;

    echo &#34;c: &#34;;
    yield 3;

    // ç•¶ç„¶ä¹Ÿå¯ä»¥æ”¾åœ¨è¿´åœˆè£¡
    foreach ([&#39;d&#39; =&gt; 4, &#39;e&#39; =&gt; 5] as $key =&gt; $num) {
        echo &#34;$key: &#34;;
        yield $num;
    }
}

foreach (gen() as $num) {
    echo &#34;$num &#34;;
}
</code></pre></div><p>å¯ä»¥çœ‹åˆ°ç•¶åŸ·è¡Œ <code>foreach</code> çš„ç¬¬ä¸€è¼ªæ™‚ï¼Œ <code>gen()</code> å‡½å¼ä¸¦ä¸æ˜¯ä¸€æ¬¡è·‘å®Œï¼Œè€Œæ˜¯æœƒåœåœ¨ç¬¬ä¸€å€‹ <code>yield</code> ä¸Šï¼Œä¸¦å›å‚³ <code>yield</code> å¾Œé¢çš„å€¼ã€‚è€Œç¬¬äºŒè¼ªå‰‡æ˜¯å¾ç¬¬ä¸€å€‹ <code>yield</code> å¾Œç¹¼çºŒåŸ·è¡Œï¼Œç„¶å¾Œåœåœ¨ç¬¬äºŒå€‹ <code>yield</code> ã€‚</p>
<p>ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œæ¯ç•¶åŸ·è¡Œåˆ° <code>yield</code> æ™‚ï¼Œ <code>Generator</code> å°±æœƒä¿ç•™ç›®å‰çš„åŸ·è¡Œä½ç½®ï¼Œä¸¦çµ¦å‡ºç•¶ä¸‹ <code>yield</code> çš„çµæœï¼Œé€™åœ¨è™•ç†å¤§é‡è³‡æ–™æ™‚å°±é¡¯å¾—éå¸¸æœ‰ç”¨äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘å€‘ç”¨ <code>Generator</code> ä¾†é‡å¯« <code>range</code> ï¼Œé€™å€‹æ–°å‡½å¼æˆ‘å€‘å‘½åç‚º <code>xrange</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function xrange($start, $limit, $step = 1) {
    if ($start <span class="err">&lt;</span> $limit) {
        if ($step <span class="err">&lt;</span>= 0) {
            throw new LogicException(&#39;Step must be +ve&#39;);
        }

        for ($i = $start; $i <span class="err">&lt;</span>= $limit; $i += $step) {
            yield $i;
        }
    } else {
        if ($step &gt;= 0) {
            throw new LogicException(&#39;Step must be -ve&#39;);
        }

        for ($i = $start; $i &gt;= $limit; $i += $step) {
            yield $i;
        }
    }
}

showMemUsageIf(true); // 15.42 MB
$a = xrange(1, 1000000);
foreach ($a as $num) { ... }
showMemUsageIf(true); // 15.42 MB
</code></pre></div><p>å¯ä»¥çœ‹åˆ°æ”¹ç”¨ <code>Generator</code> å¾Œï¼Œè¨˜æ†¶é«”çš„ç”¨é‡å¹¾ä¹æ²’æœ‰ä»€éº¼æ”¹è®Šã€‚</p>
<p>å†èˆ‰ä¸€å€‹ä¾‹å­ï¼Œä¾‹å¦‚æˆ‘å€‘æƒ³è¦è™•ç†ä¸€å€‹è¶…å¤§çš„ log æ–‡å­—æª”ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function readLog(string $file)
{
    $f = fopen($file, &#39;r&#39;);
    try {
        while ($line = fgets($f)) {
            yield $line;
        }
    } finally {
        fclose($f);
    }
}

foreach (readLog(&#34;access.log&#34;) as $line) {
    // echo $line;
}
</code></pre></div><p>é€éé€™å€‹æ–¹å¼ï¼Œæˆ‘å€‘å¯ä»¥æŠŠæ¯ä¸€è¡Œ log çš„è™•ç†é‚è¼¯å’Œè®€æª”é‚è¼¯åˆ†é›¢é–‹ä¾†ï¼Œè€Œä¸”ä¹Ÿä¸æœƒä½”ç”¨å¤ªå¤šè¨˜æ†¶é«”ã€‚</p>
<h3 id="generator-çš„ç‰¹ç•°åŠŸèƒ½">Generator çš„ç‰¹ç•°åŠŸèƒ½</h3>
<p><code>Generator</code> æœ‰å¹¾å€‹ç‰¹åˆ¥ <code>yield</code> çš„ç”¨æ³•ï¼Œé€™è£¡ç‰¹åˆ¥ä»‹ç´¹ä¸€ä¸‹ã€‚</p>
<p><code>yield</code> å¯ä»¥è·Ÿ <code>return</code> ä¸€èµ·ä½¿ç”¨ï¼Œä¸éé€™æ™‚å€™å¿…é ˆç”¨ <code>Generator::getReturn()</code> ä¾†å–å¾—å›å‚³å€¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function getValues(): iterable
{
    yield &#39;value&#39;;
    return &#39;returnValue&#39;;
}

$values = getValues(); // $values æ˜¯ä¸€å€‹ Generator
foreach ($values as $value) {
    var_dump($value);
}
echo $values-&gt;getReturn(); // &#39;returnValue&#39;
</code></pre></div><p><code>yield</code> å¯ä»¥å›å‚³éµ (key) èˆ‡å€¼ (value) ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function getMembers(): iterable
{
    yield &#39;a&#39; =&gt; 1;
    yield &#39;b&#39; =&gt; 2;
    yield &#39;c&#39; =&gt; 3;
}

foreach (getMembers() as $key =&gt; $value) {
    echo &#34;$key: $value\n&#34;;
}
</code></pre></div><p>å·¢ç‹€çš„ Generator å¯ä»¥ç”¨ <code>yield from</code> ä¾†é”æˆï¼Œ <code>yield from</code> å¾Œé¢è¦è·Ÿè‘—ä¸€å€‹ <code>iterable</code> çš„å€¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function one(): iterable
{
    yield 1;
}

function two_one(): iterable
{
    yield 2;
    yield from one();
}

function ten_to_seven(): iterable
{
    for ($i = 10; $i &gt;= 7; $i--) {
        yield $i;
    }
}

function count_down(): iterable
{
    yield from ten_to_seven();
    yield from [6, 5];
    yield from new ArrayIterator([4, 3]);
    yield from two_one();
}

foreach (count_down() as $num) {
    echo &#34;$num &#34;;
}
</code></pre></div><p>ç•¶ç„¶ <code>yield</code> ä¹Ÿå¯ä»¥ç”¨ä¾†å›å‚³åŒ¿åå‡½å¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function getFunctions()
{
    yield function ($num) {
        return $num;
    };

    yield function ($num) {
        return $num + 1;
    };

    yield function ($num) {
        return $num + 2;
    };
}

foreach (getFunctions() as $func) {
    var_dump($func(1));
}
</code></pre></div><p>ä½†ä»¥ä¸‹é€™å€‹ä¾‹å­æ˜¯éŒ¯èª¤çš„ï¼Œå› ç‚º anonymous function æ˜¯ä¸€å€‹ <code>Closure</code> ç‰©ä»¶ï¼Œä¸èƒ½æ¥åœ¨ <code>yield from</code> å¾Œé¢ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function getFunctions()
{
    yield from function ($num) {
        for ($i = 1; $i <span class="err">&lt;</span>= $num; $i++) {
            yield $i;
        }
    };
}

foreach (getFunctions() as $func) {
    // ...
}

// PHP Fatal error:  Uncaught Error: Can use &#34;yield from&#34; only with arrays and Traversables
</code></pre></div><p>ç›´æ¥ <code>yield</code> å°±å¯ä»¥äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function getFunctions()
{
    yield function ($num) {
        for ($i = 1; $i <span class="err">&lt;</span>= $num; $i++) {
            yield $i;
        }
    };

    yield function ($num) {
        for ($i = $num; $i &gt;= 1; $i--) {
            yield $i;
        }
    };
}

foreach (getFunctions() as $func) {
    foreach ($func(10) as $result) {
        var_dump($result);
    }
}
</code></pre></div><h2 id="åœ¨-phpunit-çš„-data-providers-ä¸­ä½¿ç”¨-yield">åœ¨ PHPUnit çš„ Data Providers ä¸­ä½¿ç”¨ yield</h2>
<p>åœ¨å¯« PHPUnit çš„æ¸¬è©¦æ¡ˆä¾‹æ™‚ï¼Œæˆ‘å€‘é€šå¸¸æœƒå°æŸå€‹å–®å…ƒçš„ç¨‹å¼çµ¦å‡ºå¤šçµ„ä¸åŒçš„æ¸¬è©¦è³‡æ–™ï¼Œå¥½é©—è­‰å®ƒçš„é‚è¼¯æ­£ç¢ºæ€§ï¼›è€Œé€™é€šå¸¸æœƒé€é <a href="https://phpunit.readthedocs.io/en/8.5/writing-tests-for-phpunit.html#data-providers">Data Providers</a> é€™å€‹æ©Ÿåˆ¶ä¾†å®Œæˆï¼Œä¾‹å¦‚ä»¥ä¸‹é€™å€‹åŠ æ³•æ¸¬è©¦ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">use PHPUnit\Framework\TestCase;

class DataTest extends TestCase
{
    /**
     * @dataProvider additionProvider
     *
     * @param int $a
     * @param int $b
     * @param int $expected
     */
    public function testAdd(int $a, int $b, int $expected)
    {
        $this-&gt;assertSame($expected, $a + $b);
    }

    public function additionProvider(): iterable
    {
        return [
            [0, 0, 0],
            [0, 1, 1],
            [1, 0, 1],
            [1, 1, 2],
        ];
    }
}
</code></pre></div><p>åœ¨ä¸Šé¢çš„æ¸¬è©¦ä¸­ï¼Œ <code>additionProvider</code> é€™å€‹æ–¹æ³•å°±æ˜¯æˆ‘å€‘çš„ data-provider ï¼Œå®ƒå¿…é ˆå›å‚³ä¸€å€‹é™£åˆ— (é€™è£¡ç¨±ç‚º data set) çš„é™£åˆ—ï¼›è€Œåœ¨æ¸¬è©¦æ¡ˆä¾‹ <code>testAdd</code> é€™å€‹æ–¹æ³•ä¸Šï¼Œæˆ‘å€‘è¦åŠ å…¥å®ƒçš„è¨»è§£ï¼Œä¸¦ç”¨ <code>@dataProvider</code> ä¾†å®£å‘Šæˆ‘å€‘çš„ data-provider æ˜¯ <code>additionProvider</code> é€™å€‹æ–¹æ³•ï¼›è€Œ <code>additionProvider</code> çš„ç¬¬äºŒå±¤é™£åˆ—çš„é …ç›® (å³ data set è£¡çš„æ¯å€‹å…ƒç´ ) ï¼Œå°±æœƒä¾åºä»£å…¥ <code>testAdd</code> æ–¹æ³•åƒæ•¸ <code>$a</code> ã€ <code>$b</code> ã€ <code>$expected</code> è£¡ã€‚</p>
<p>ä¸éå¾ˆå¤šå‰›ç”¨ data-provider çš„æœ‹å‹å¸¸æœƒå¿˜äº†è¦åŒ…ç¬¬ä¸€å±¤çš„é™£åˆ—ï¼Œå°è‡´æ¸¬è©¦éŒ¯èª¤ï¼›é€™è£¡æˆ‘å€‘å¯ä»¥æ”¹ç”¨ <code>yield</code> ä¾†å›å‚³æ¯å€‹ data set ï¼Œå¥½é¿é–‹é€™é¡çš„éŒ¯èª¤ï¼ŒåŒæ™‚ä¹Ÿå¯ä»¥è®“ data-provider æ›´åŠ æ˜“è®€ (é›–ç„¶è¦å¤šæ‰“å¹¾å€‹ <code>yield</code> å°±æ˜¯äº†) ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    public function additionProvider(): iterable
    {
        yield [0, 0, 0];
        yield [0, 1, 1];
        yield [1, 0, 1];
        yield [1, 1, 2];
    }
</code></pre></div><p>ç•¶ç„¶ä¹Ÿå¯ä»¥ç”¨ <code>key =&gt; value</code> çš„å½¢å¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    public function additionProvider(): iterable
    {
        yield &#39;Set 1&#39; =&gt; [0, 0, 0];
        yield &#39;Set 2&#39; =&gt; [0, 1, 1];
        yield &#39;Set 3&#39; =&gt; [1, 0, 1];
        yield &#39;Set 4&#39; =&gt; [1, 1, 2];
    }
</code></pre></div><h2 id="åƒè€ƒ">åƒè€ƒ</h2>
<ul>
<li><a href="https://www.jianshu.com/p/86fefb0aacd9">php ä¹‹ Generator ç”Ÿæˆå™¨åŠ yield</a></li>
<li><a href="https://learnku.com/laravel/t/8704/using-yield-to-do-memory-optimization-in-php">åœ¨ PHP ä¸­ä½¿ç”¨ <code>yield</code> ä¾†åšå…§å­˜å„ªåŒ–</a></li>
<li><a href="https://www.entropywins.wtf/blog/2017/10/09/yield-in-phpunit-data-providers/">Yield in PHPUnit data providers</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>ã€Šéºç•™ç³»çµ±é‡å»ºå¯¦æˆ°ã€‹å°è®€èˆ‡å¿ƒå¾—</title>
			<link>https://jaceju.net/review-reengineering-legacy-software/</link>
			<pubDate>Wed, 06 Mar 2019 12:31:33 +0800</pubDate>
			
			<guid>https://jaceju.net/review-reengineering-legacy-software/</guid>
			<description>æœ€è¿‘çµ‚æ–¼æŠŠã€Šéºç•™ç³»çµ±é‡å»ºå¯¦æˆ°ã€‹çœ‹å®Œäº†ï¼Œæœ‰ä¸€ç¨®è¢«æ·±æ·±éœ‡æ†¾çš„æ„Ÿè¦ºï¼›ä½ çŸ¥é“åœ¨çœ‹ä¸€æœ¬æ›¸æ™‚ï¼Œèƒ½æ·±åˆ»åœ°æŠŠè‡ªå·±çš„ç¶“é©—æŠ•å°„åœ¨å­—è£¡è¡Œé–“æ˜¯å¤šçˆ½çš„ä¸€ä»¶äº‹å—ï¼Ÿæ¯çœ‹ä¸€</description>
			<content type="html"><![CDATA[<p><img src="https://cf-assets2.tenlong.com.tw/products/images/000/111/651/original/51PgSbJUUNL.jpg?1525598072" alt="éºç•™ç³»çµ±é‡å»ºå¯¦æˆ°"></p>
<p>æœ€è¿‘çµ‚æ–¼æŠŠ<a href="https://www.tenlong.com.tw/products/9787115465856">ã€Šéºç•™ç³»çµ±é‡å»ºå¯¦æˆ°ã€‹</a>çœ‹å®Œäº†ï¼Œæœ‰ä¸€ç¨®è¢«æ·±æ·±éœ‡æ†¾çš„æ„Ÿè¦ºï¼›ä½ çŸ¥é“åœ¨çœ‹ä¸€æœ¬æ›¸æ™‚ï¼Œèƒ½æ·±åˆ»åœ°æŠŠè‡ªå·±çš„ç¶“é©—æŠ•å°„åœ¨å­—è£¡è¡Œé–“æ˜¯å¤šçˆ½çš„ä¸€ä»¶äº‹å—ï¼Ÿæ¯çœ‹ä¸€æ®µæ–‡å­—ï¼Œå°±å¥½åƒåœ¨è¬›è‡ªå·±çš„æ•…äº‹ï¼Œé‚£ç¨®ã€Œä½œè€…ä½ ç‚ºä»€éº¼é€™éº¼æ‡‚ï¼ï¼Ÿã€çš„æ„Ÿè¦ºçœŸçš„æœƒè®“äººæ„Ÿå‹•å¾—æ‰æ·šï¼â€¬å¦‚æœèªª<a href="https://www.tenlong.com.tw/products/9789864765867">ã€Šé³³å‡°å°ˆæ¡ˆã€‹</a>æ˜¯è¬›çµ„è­˜è®Šé©å’Œå·¥ä½œæ–¹æ³•ï¼Œé‚£é€™æœ¬ã€Šéºç•™ç³»çµ±é‡å»ºå¯¦æˆ°ã€‹å°±æ˜¯è¬›å°ˆæ¡ˆé‡æ§‹èˆ‡é‡å»ºçš„æ–¹æ³•èˆ‡éç¨‹ã€‚</p>
<p>é›–ç„¶å®ƒå‡ºç‰ˆçš„æ™‚é–“åªæœ‰å…©å¹´å¤š (é€™è£¡æ˜¯æŒ‡åŸæ–‡æ›¸) ï¼Œä½†åœ¨æˆ‘å¿ƒä¸­å®ƒå·²ç¶“æ˜¯ç¶“å…¸äº†ï¼ä»¥ä¸‹æˆ‘ç°¡å–®åšå€‹å°è®€ã€‚</p>
<!-- raw HTML omitted -->
<p>ç¬¬ä¸€ç« å¾ˆç”Ÿå‹•åœ°æå¯«å‡ºäº†èˆŠæœ‰è»Ÿé«”å°ˆæ¡ˆçš„ç‰¹å¾µèˆ‡æ¨£è²Œï¼Œé‚„æœ‰å®ƒç‚ºä»€éº¼æœƒè®Šæˆé€™æ¨£ï¼Œä»¥åŠæˆ‘å€‘åœ¨ç¶­è­·æ™‚çš„å¿ƒå¢ƒã€‚ä½ æœƒç™¼ç¾ä½œè€…åœ¨å­—è£¡è¡Œé–“çš„æè¿°éƒ½å¾ˆè²¼è¿‘æˆ‘å€‘æ‰€é¢å°çš„çœŸå¯¦ç‹€æ³ï¼Œä¸å¾—ä¸èªªä½œè€…é€™ä¸€è·¯èµ°ä¾†ä¹Ÿæ˜¯å¾ˆè‹¦å‘€ã€‚</p>
<p>ç¬¬äºŒç« è¬›çš„æ˜¯ä½ ç‚ºä»€éº¼æœƒå°é€™äº›èˆŠå°ˆæ¡ˆæœ‰è² é¢çš„è§€æ„Ÿï¼Œæ‰€ä»¥åœ¨é‡æ§‹ä¹‹å‰æˆ‘å€‘è¦å…ˆæ·±å…¥ç­è§£å°ˆæ¡ˆä»¥æ‰¾åˆ°é€™äº›ç—›é»ã€‚é€éä¸€äº›å·¥å…·çš„è¼”åŠ©ï¼Œæˆ‘å€‘å¯ä»¥å°‡é€™äº›ç—›é»æ•¸æ“šåŒ–èˆ‡å¯è¦–åŒ–ï¼Œä»¥ä¾¿æŠŠé‡æ§‹çš„æ™‚é–“èŠ±åœ¨æœ‰åƒ¹å€¼çš„åœ°æ–¹ã€‚</p>
<p>ç¬¬ä¸‰ç« è¦é–‹å§‹æº–å‚™é‡æ§‹äº†ï¼Œé€™é‚Šè¬›çš„é‡é»æ˜¯æ±ºå®šè©²é‡æ§‹é‚„æ˜¯é‡å¯«ï¼Œè¦è®“æ•´å€‹åœ˜éšŠç­è§£æ•´å€‹è¨ˆåŠƒæœ‰å“ªäº›é¢¨éšªï¼Œä¸¦å¾—åˆ°ä¸Šé ­çš„æ‰¹å‡†ã€‚æˆ‘è‡ªå·±ä¹Ÿæœ‰é€™æ–¹é¢çš„ç¶“é©—åˆ†äº«ï¼Œè«‹åƒè€ƒï¼š<a href="https://jaceju.net/refactor-or-rebuild/">ã€Šé¢å° Legacy Code ï¼Œè©²é‡æ§‹é‚„æ˜¯é‡å¯«ï¼Ÿã€‹</a>ã€‚</p>
<p>ç¬¬å››ç« é€²å…¥é‡æ§‹ç¨‹å¼ç¢¼çš„éšæ®µï¼Œå¼·èª¿åœ¨é‡æ§‹ç¨‹å¼ç¢¼æ™‚è¦æ³¨æ„çš„äº‹æƒ…ï¼Œé‚„æœ‰å¦‚ä½•é€éå·¥å…·å’Œæ–¹æ³•ä¾†å”åŠ©é‡æ§‹ã€‚æœ¬ç« ä¹Ÿç”¨ä¸€äº›ä¾‹å­ä¾†èªªæ˜è©²è¢«é‡æ§‹çš„ç¨‹å¼ç¢¼ç‰¹å¾µï¼Œä»¥åŠè©²æ€éº¼è£œä¸Šè‡ªå‹•åŒ–æ¸¬è©¦ã€‚ä½œè€…ä¹Ÿæ¨è–¦<a href="https://www.tenlong.com.tw/products/9787111466253">ã€Šä¿®æ”¹ä»£ç¢¼çš„è—è¡“ã€‹</a>é€™æœ¬æ›¸ (ä¸­è­¯æœ¬å·²çµ•ç‰ˆ) ï¼Œ<a href="https://www.facebook.com/jaceju/posts/2078275572254125">æˆ‘å‰é™£å­ä¹Ÿå‰›çœ‹å®Œ</a>ã€‚</p>
<p>ç¬¬äº”ç« è¬›çš„æ˜¯é‡æ­æ•´å€‹å°ˆæ¡ˆæ¶æ§‹ï¼Œç•¢ç«Ÿæœ‰æ™‚åªé‡æ§‹ç¨‹å¼ç¢¼å¯èƒ½ç„¡æ³•è®“ç¶­è­·é›£åº¦æ¸›ä½ã€‚æœ¬ç« è¬›åˆ°æ€éº¼æŠŠä¸€å¤§å¡Šçš„å–®é«”æ¶æ§‹åˆ†è§£æˆè¼ƒå°çš„æ¨¡çµ„ï¼Œç„¶å¾Œä»‹ç´¹å¹¾å€‹å¸¸è¦‹çš„å°ˆæ¡ˆç³»çµ±æ¶æ§‹ï¼Œä¸¦åˆ†æäº†å®ƒå€‘çš„å„ªç¼ºé»ã€‚</p>
<p>ç¬¬å…­ç« å°±æ˜¯è¬›èˆŠå°ˆæ¡ˆæ²’æ•‘äº†è¦é‡å¯«ï¼Œå‰ææ˜¯ä½ å·²ç¶“è©¦éå„ç¨®è—¥æ–¹è¦å¹«å®ƒé‡æ§‹ã€‚æœ¬ç« ä»‹ç´¹äº†è©²é‡å°å“ªäº›åœ°æ–¹é‡å¯«çš„åˆ†æï¼Œç­è§£èˆŠæœ‰ç¨‹å¼è£¡æœ‰å¯¦ä½œå“ªäº›è¦æ ¼ã€é¿é–‹ä»€éº¼å•é¡Œï¼Œä»¥åŠå„ç¨®æ–°èˆŠè³‡æ–™åº«çš„è½‰ç§»æ–¹æ³•ã€‚</p>
<p>æ¥ä¸‹ä¾†çš„ç« ç¯€é–‹å§‹é€²å…¥ DevOps çš„éƒ¨ä»½ã€‚</p>
<p>ç¬¬ä¸ƒç« ä»‹ç´¹äº†æ€éº¼è®“é–‹ç™¼ç’°å¢ƒçš„å»ºç½®è‡ªå‹•åŒ–ï¼Œç›®æ¨™æ˜¯è®“æ–°äººåœ¨æ¥æ‰‹å°ˆæ¡ˆæ™‚ï¼Œå¯ä»¥å¿«é€Ÿåœ°é€²å…¥ç‹€æ³ï¼Œè€Œä¸å¿…èŠ±è²»å¿ƒåŠ›åœ¨å»ºç«‹é–‹ç™¼ç’°å¢ƒä¸Šï¼›é‡é»æ˜¯å°ˆæ¡ˆçš„èªªæ˜æ–‡ä»¶ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨è‡ªå‹•åŒ–å·¥å…·ä¾†å¿«é€Ÿå»ºç«‹é–‹ç™¼ç’°å¢ƒï¼Œä¸¦ä¸”åœ¨æœ¬æ©Ÿå°±å¯ä»¥ç¨ç«‹é‹ä½œã€‚</p>
<p>ç¬¬å…«ç« è¬›åˆ°æ€éº¼æŠŠè‡ªå‹•åŒ–å»ºç½®å»¶ä¼¸åˆ°æ¸¬è©¦ç’°å¢ƒå’Œç·šä¸Šç’°å¢ƒï¼Œè€Œä¸”æœ€å¥½æ˜¯æ”¾åœ¨é›²ç«¯æœå‹™ä¸Šä»¥æ¸›è¼•ç¶­é‹è² æ“”ã€‚å¦å¤–å°±æ˜¯ä¸è¦è®“å„å€‹é‹è¡Œç’°å¢ƒæœ‰æ‰€å·®ç•°ï¼Œå°è‡´å‡ºç¾åœ¨ç‰¹å®šç’°å¢ƒæ‰æœƒç™¼ç”Ÿçš„å•é¡Œã€‚</p>
<p>ç¬¬ä¹ç« æåˆ°å»ºç½®ã€æŒçºŒæ•´åˆä»¥åŠä½ˆç½²çš„è‡ªå‹•åŒ–ã€‚å„˜å¯èƒ½æ›´æ›æ‰éæ™‚çš„å·¥å…·ï¼Œå› ç‚ºæ–°çš„å»ºç½®ç”¨çš„å·¥å…·éˆé€šå¸¸æœƒæ›´å®¹æ˜“ä½¿ç”¨ä¸”æ˜“æ–¼ç¶­è­·ã€‚</p>
<p>ç¬¬åç« ä¹Ÿæ˜¯æœ€å¾Œä¸€ç« ï¼Œé€™é‚Šç®—æ˜¯å‰é¢ç« ç¯€çš„å›é¡§ã€‚å„˜å¯èƒ½è¦ä½¿ç”¨ç¾ä»£åŒ–çš„æŠ€è¡“ä¾†é–‹ç™¼ï¼Œåœ˜éšŠä¹‹é–“ä¹Ÿè¦äº’ç›¸å…¬é–‹è³‡è¨Šï¼›ç„¶å¾Œåšå¥½æŒçºŒæ”¹å–„ï¼Œä¸¦å°‡ä¸€åˆ‡è‡ªå‹•åŒ–ã€‚å¯ä»¥çš„è©±è¦è®“ç¨‹å¼æˆ–ç³»çµ±å„˜å¯èƒ½åœ°å°ï¼Œå°‡å®ƒå€‘åˆ†è§£å¾Œæœƒæ›´å®¹æ˜“ç¶­è­·ã€‚</p>
<p>ç•¶ç„¶ä¸Šé¢åªæ˜¯å°é€™æœ¬æ›¸ä»‹ç´¹å€‹å¤§æ¦‚ï¼Œä½†æˆ‘ç›¸ä¿¡å¦‚æœä½ ä¹Ÿå°èˆŠå°ˆæ¡ˆå¾ˆå›°æ“¾çš„è©±ï¼Œé€™å€‹å°è®€æ‡‰è©²èƒ½å¼•èµ·ä½ å°é€™æœ¬æ›¸çš„èˆˆè¶£ã€‚å¯æƒœæˆ‘å¤ªæ™šçŸ¥é“æœ‰é€™æœ¬æ›¸ï¼Œæ‰€ä»¥åœ¨é‡å»ºæŸå€‹å°ˆæ¡ˆæ™‚çœŸçš„æ˜¯è·Œè·Œæ’æ’ï¼›ä¸éä¹Ÿå› ç‚ºæœ‰é€™æ¨£çš„ç¶“é©—ï¼Œæ‰æœƒå°é€™æœ¬æ›¸çš„å…§å®¹ç‰¹åˆ¥æœ‰æ„Ÿè§¸ã€‚ä¹‹å¾Œæœ‰æ©Ÿæœƒçš„è©±ï¼Œæˆ‘æœƒåˆ†äº«ä¸€ä¸‹æˆ‘å€‘çœŸå¯¦çš„ç¶“é©—çµ¦å¤§å®¶ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>åœ¨ Laravel å°ˆæ¡ˆä¸­æ•´åˆ Vue CLI</title>
			<link>https://jaceju.net/integrate-vue-cli-into-laravel/</link>
			<pubDate>Tue, 12 Feb 2019 14:27:08 +0800</pubDate>
			
			<guid>https://jaceju.net/integrate-vue-cli-into-laravel/</guid>
			<description>è‡ªå¾ Vue CLI 3 ç™¼ä½ˆä»¥ä¾†ï¼Œå¦‚ä½•å°‡å®ƒæ•´åˆåœ¨ Laravel è£¡æ˜¯ä¸å°‘é–‹ç™¼è€…çš„ç–‘å•ï¼›å› æ­¤ Vue çš„è€çˆ¸å°¤é›¨æºªä¾¿é‡å°é€™å€‹å•é¡Œå¯«äº†ä¸€å€‹æ•™å­¸ç¯„ä¾‹ ï¼Œæœ¬æ–‡å³æ˜¯åƒè€ƒè©²ç¯„ä¾‹æ‰€å¯«ï¼Œä¸éæœ‰æ ¹</description>
			<content type="html"><![CDATA[<p>è‡ªå¾ Vue CLI 3 ç™¼ä½ˆä»¥ä¾†ï¼Œå¦‚ä½•å°‡å®ƒæ•´åˆåœ¨ Laravel è£¡æ˜¯ä¸å°‘é–‹ç™¼è€…çš„ç–‘å•ï¼›å› æ­¤ Vue çš„è€çˆ¸å°¤é›¨æºªä¾¿é‡å°é€™å€‹å•é¡Œå¯«äº†ä¸€å€‹<a href="https://github.com/yyx990803/laravel-vue-cli-3">æ•™å­¸ç¯„ä¾‹</a> ï¼Œæœ¬æ–‡å³æ˜¯åƒè€ƒè©²ç¯„ä¾‹æ‰€å¯«ï¼Œä¸éæœ‰æ ¹æ“š Laravel çš„æ–°ç‰¹æ€§åšä¸€äº›èª¿æ•´ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="æº–å‚™ç’°å¢ƒ">æº–å‚™ç’°å¢ƒ</h2>
<p>é–‹å§‹å‰è¨˜å¾—å…ˆå®‰è£å¿…è¦å·¥å…·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ composer global install laravel/installer
$ composer global install laravel/valet
$ npm i -g @vue/cli
</code></pre></div><h2 id="å»ºç«‹ä¸¦ä¿®æ”¹-laravel-å°ˆæ¡ˆ">å»ºç«‹ä¸¦ä¿®æ”¹ Laravel å°ˆæ¡ˆ</h2>
<p>å»ºç«‹ä¸€å€‹ä¹¾æ·¨çš„ Laravel 5.7 å°ˆæ¡ˆï¼Œç„¶å¾Œåˆªæ‰æ‰€æœ‰è·Ÿå‰ç«¯æœ‰é—œçš„ç›®éŒ„èˆ‡æª”æ¡ˆã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ laravel new project
$ <span class="nb">cd</span> project
$ rm -rf package.json <span class="se">\
</span><span class="se"></span>  webpack.mix.js <span class="se">\
</span><span class="se"></span>  yarn.lock <span class="se">\
</span><span class="se"></span>  resources/view/welcome.blade.php <span class="se">\
</span><span class="se"></span>  resources/<span class="o">{</span>js,sass<span class="o">}</span> <span class="se">\
</span><span class="se"></span>  public/<span class="o">{</span>js,css<span class="o">}</span>
</code></pre></div><p>ç„¶å¾Œä¿®æ”¹ <code>routes/web.php</code> ï¼Œå°‡å…§å®¹ç½®æ›æˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Route</span><span class="p">;</span>

<span class="nx">Route</span><span class="o">::</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;/{any}&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;any&#39;</span><span class="p">,</span> <span class="s1">&#39;.*&#39;</span><span class="p">);</span>
</code></pre></div><p>ç‚ºäº†é¿å…å»ºç½®å¾Œçš„éœæ…‹æª”æ¡ˆè¢«åŠ å…¥ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œä¿®æ”¹å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹çš„ <code>.gitignore</code> ï¼ŒåŠ å…¥ä»¥ä¸‹å…§å®¹ï¼š</p>
<pre><code>/public/js
/public/css
/public/img
/public/svg
/resources/views/index.blade.php
</code></pre><p>ç„¶å¾Œåšç‰ˆæœ¬æ§åˆ¶ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ git init
$ git add .
$ git ci -m <span class="s2">&#34;Init project&#34;</span>
</code></pre></div><p>æ¥è‘—ç”¨ Valet ä¾†è¨­å®šç¶²ç«™ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ valet link
$ valet secure project
</code></pre></div><p>é€™æ¨£æˆ‘å€‘æ¸¬è©¦ç”¨çš„ç¶²å€å³ç‚º <a href="https://project.test"><code>https://project.test</code></a> ã€‚</p>
<h2 id="å»ºç«‹å‰ç«¯ç”¨è³‡æ–™å¤¾">å»ºç«‹å‰ç«¯ç”¨è³‡æ–™å¤¾</h2>
<p>æ¥ä¸‹ä¾†ç”¨ Vue CLI å»ºç«‹å‰ç«¯è³‡æ–™å¤¾ï¼Œä»¥ä¾¿ç®¡ç†æ‰€æœ‰è·Ÿå‰ç«¯æœ‰é—œçš„è³‡æºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ vue create frontend
<span class="c1"># é€™é‚Šè¦–å°ˆæ¡ˆè¦æ¨¡ä¾†æ±ºå®šè¦ç”¨å“ªäº›è¨­å®š</span>
</code></pre></div><p>å»ºç«‹ <code>frontend/vue.config.js</code> ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// åœ¨å°ˆæ¡ˆé–‹ç™¼ä¸­å¦‚æœå‘¼å« API æ™‚æœƒ pass çµ¦é€™å€‹ proxy ç¶²å€
</span><span class="c1"></span>  <span class="c1">// é€™é‚Šå°±ç”¨å‰é¢ä»¥ Valet å»ºç«‹çš„ç¶²ç«™ç¶²å€
</span><span class="c1"></span>  <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">proxy</span><span class="o">:</span> <span class="s1">&#39;https://project.test&#39;</span>
  <span class="p">},</span>

  <span class="c1">// å»ºç½®å‰ç«¯éœæ…‹æª”æ¡ˆæ™‚è¦æ“ºæ”¾çš„ç›®éŒ„
</span><span class="c1"></span>  <span class="c1">// åœ¨ package.json ä¹Ÿè¦èª¿æ•´ &#34;build&#34; é€™å€‹ script
</span><span class="c1"></span>  <span class="nx">outputDir</span><span class="o">:</span> <span class="s1">&#39;../public&#39;</span><span class="p">,</span>

  <span class="c1">// é–‹ç™¼éšæ®µä¿®æ”¹ index.html ä¾†è®“ js/css å¯ä»¥ä½œç”¨
</span><span class="c1"></span>  <span class="c1">// ä¸Šç·šéšæ®µå‰‡æœƒä¿®æ”¹ Laravel çš„æ¨£ç‰ˆ
</span><span class="c1"></span>  <span class="nx">indexPath</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="s1">&#39;production&#39;</span>
    <span class="o">?</span> <span class="s1">&#39;../resources/views/index.blade.php&#39;</span>
    <span class="o">:</span> <span class="s1">&#39;index.html&#39;</span>
<span class="p">}</span>
</code></pre></div><p>ç„¶å¾Œä¿®æ”¹ <code>frontend/package.json</code> çš„ <code>scripts.build</code> ï¼Œä¸»è¦æ˜¯é¿å…æŠŠ <code>public</code> æ•´å€‹åˆªé™¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">&#34;scripts&#34;: {
  &#34;serve&#34;: &#34;vue-cli-service serve&#34;,
<span class="gd">- &#34;build&#34;: &#34;vue-cli-service build&#34;,
</span><span class="gd"></span><span class="gi">+ &#34;build&#34;: &#34;rm -rf ../public/{js,css,img} &amp;&amp; vue-cli-service build --no-clean&#34;,
</span><span class="gi"></span>  &#34;lint&#34;: &#34;vue-cli-service lint&#34;
},
</code></pre></div><p>æœ€å¾Œå°±å¯ä»¥ç”¨ä»¥ä¸‹æŒ‡ä»¤ä¾†é–‹ç™¼æˆ–å»ºç½®å°ˆæ¡ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> frontend
$ yarn <span class="c1"># å®‰è£å¥—ä»¶</span>
$ yarn serve <span class="c1"># å•Ÿå‹•é–‹ç™¼ç”¨ä¼ºæœå™¨</span>
$ yarn build <span class="c1"># å»ºç½®ä¸Šç·šç”¨ç‰ˆæœ¬</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>æˆ‘å¦‚ä½•å¾éœ€æ±‚å‡ºç™¼åˆ°å®Œæˆä¸€å€‹å°ˆæ¡ˆ</title>
			<link>https://jaceju.net/how-i-built-my-side-project/</link>
			<pubDate>Wed, 30 Jan 2019 12:04:37 +0800</pubDate>
			
			<guid>https://jaceju.net/how-i-built-my-side-project/</guid>
			<description>èº«ç‚ºä¸€å€‹ Web é–‹ç™¼è€…ï¼Œæœ‰æ™‚å€™æˆ‘é‚„æ˜¯æœƒå•è‡ªå·±ï¼šã€Œå¦‚æœä»Šå¤©è®“ä½ ä¸€å€‹äººå¾é ­é–‹ç™¼å‡ºä¸€å€‹ç¶²ç«™ï¼Œä½ è¦æ€éº¼é–‹å§‹å‘¢ï¼Ÿã€é€™å€’ä¸æ˜¯èªªæˆ‘ä¸çŸ¥é“æ€éº¼åšï¼Œè€Œæ˜¯è¦è®“æˆ‘è‡ªå·±å¾¹</description>
			<content type="html"><![CDATA[<p>èº«ç‚ºä¸€å€‹ Web é–‹ç™¼è€…ï¼Œæœ‰æ™‚å€™æˆ‘é‚„æ˜¯æœƒå•è‡ªå·±ï¼šã€Œå¦‚æœä»Šå¤©è®“ä½ ä¸€å€‹äººå¾é ­é–‹ç™¼å‡ºä¸€å€‹ç¶²ç«™ï¼Œä½ è¦æ€éº¼é–‹å§‹å‘¢ï¼Ÿã€é€™å€’ä¸æ˜¯èªªæˆ‘ä¸çŸ¥é“æ€éº¼åšï¼Œè€Œæ˜¯è¦è®“æˆ‘è‡ªå·±å¾¹åº•åœ°å»ç†è§£éœ€æ±‚æ‰€é¢å°çš„å•é¡Œï¼Œç„¶å¾Œæ˜ç™½è‡ªå·±å¯ä»¥ç”¨ä»€éº¼å·¥å…·å»è§£æ±ºå®ƒã€‚</p>
<p>å‰›å¥½å‰é™£å­é‡åˆ°ä¸€å€‹å…¬å¸å…§éƒ¨çš„éœ€æ±‚ï¼Œè®“æˆ‘æœ‰æ©Ÿæœƒé‡æ–°çœè¦–ä¸€ä¸‹è‡ªå·±ç›®å‰çš„æŠ€èƒ½æ˜¯å¦è¶³ä»¥å®Œæˆé€™å€‹éœ€æ±‚ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å¾éœ€æ±‚é–‹å§‹">å¾éœ€æ±‚é–‹å§‹</h2>
<p>åœ¨æˆ‘å€‘çš„ç”¢å“ç”¨æˆ¶ç«¯è¦å‡ºç‰ˆå‰ï¼Œéƒ½æœƒç”± SQA å…ˆé€²è¡Œè‡ªå‹•åŒ–æ¸¬è©¦ï¼Œç„¶è€Œé€™äº›æ¸¬è©¦å»ç„¡æ³•åœ¨ä¼ºæœå™¨ç«¯çš„ API ä½ˆç½²å®Œæˆæ™‚è‡ªå‹•åŸ·è¡Œã€‚ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼Œæˆ‘å€‘å…§éƒ¨åœ¨è¨è«–éå¾Œï¼Œæ±ºå®šå»ºç«‹ä¸€å€‹ä½ˆç½²ç›£æ§æœå‹™ï¼Œåœ¨ API å°ˆæ¡ˆå®Œæˆä½ˆç½²å¾Œï¼Œè‡ªå‹•é€šçŸ¥ SQA çš„ CI ç³»çµ±ä¾†é€²è¡Œè‡ªå‹•åŒ–æ¸¬è©¦ã€‚</p>
<p>åªæ˜¯æˆ‘å€‘å…¬å¸çš„ç¶²è·¯æ¶æ§‹æ¯”è¼ƒç‰¹åˆ¥ï¼Œ SQA çš„ CI ç’°å¢ƒç„¡æ³•å¾å¤–ç•Œç©¿é€ï¼Œæ‰€ä»¥æˆ‘å€‘ä¹Ÿå¾ˆé›£æ‹¿ç¾æˆçš„æœå‹™ä¾†å¥—ç”¨ (ä¾‹å¦‚ SNS) ï¼›åŠ ä¸Šæˆ‘å€‘å¾…ä½ˆç½²çš„æ©Ÿå™¨é€šå¸¸æœ‰å¾ˆå¤šå°ï¼Œç„¡æ³•å¾ˆå®¹æ˜“åœ°åœ¨æ‰€æœ‰æ©Ÿå™¨éƒ½ä½ˆç½²å®Œæˆå¾Œå¾—åˆ°å®ƒå€‘çš„ç‹€æ…‹ï¼Œéœ€è¦ä¸€äº›ç‰¹åˆ¥çš„æ©Ÿåˆ¶ä¾†è™•ç†ã€‚å› æ­¤é€™å¥—ç›£æ§æœå‹™å°±æ±ºå®šç”±æˆ‘ä¾†å¯¦ä½œï¼Œä¹Ÿæ–¹ä¾¿é‡å°æˆ‘å€‘çš„ç’°å¢ƒåšå®¢è£½åŒ–ã€‚ç”±æ–¼é€™ç‰½æ‰¯åˆ°ä¸€äº›æ•æ„Ÿè³‡è¨Šï¼Œæˆ‘åªèƒ½èªªé€™å€‹æœå‹™çš„æ©Ÿåˆ¶å¤§è‡´ä¸Šæ˜¯é€éç›£æ§ä¸Šå‚³åˆ° AWS S3 çš„ä½ˆç½²ç‹€æ…‹ï¼Œä»¥åšåˆ°å°ˆæ¡ˆä½ˆç½²èˆ‡æœå‹™é€šçŸ¥çš„è§£è€¦ã€‚</p>
<p>ç•¶ç„¶é€™å€‹æ–¹æ¡ˆæ˜¯å› ç‚ºæˆ‘å€‹äººåœ¨æœ‰é™çš„çŸ¥è­˜è£¡æ€è€ƒå‡ºä¾†çš„ï¼Œä¸è¦‹å¾—æ˜¯æœ€ä½³æ–¹æ¡ˆï¼›æ‰€ä»¥é‚„æ˜¯è¦å¼·èª¿ä¸€ä¸‹ï¼Œ**é€™ç¯‡æ–‡ç« ä¸¦ä¸æ˜¯æ¢è¨æœ‰ä»€éº¼å¥½æ–¹æ¡ˆï¼Œè€Œæ˜¯è¦ç´€éŒ„æˆ‘åœ¨é–‹ç™¼é€™å€‹å°ˆæ¡ˆæ™‚çš„æ­·ç¨‹ã€‚**æˆ‘ç›¸ä¿¡å„ä½å¦‚æœæœ‰æ©Ÿæœƒè·Ÿæˆ‘èº«è™•ä¸€æ¨£çš„ç‹€æ³æ™‚ï¼Œä¸€å®šå¯ä»¥æƒ³åˆ°æ¯”æˆ‘çš„é€™å€‹æ–¹æ¡ˆæ›´è°æ˜çš„æ–¹å¼ã€‚</p>
<h2 id="æ‰€ä»¥æ€éº¼é–‹å§‹å‘¢">æ‰€ä»¥æ€éº¼é–‹å§‹å‘¢ï¼Ÿ</h2>
<p>é¦–å…ˆæˆ‘å€‘ç•¶ç„¶æ˜¯å¯¦é©—çœ‹çœ‹é€™å€‹æƒ³æ³•å¯ä¸å¯è¡Œï¼Œå…å¾—å¾Œé¢åšç™½å·¥ã€‚æˆ‘è·Ÿ SRE çš„åŒäº‹å…ˆå¾è¦æ ¼å®šç¾©é–‹å§‹ï¼Œä¹Ÿå°±æ˜¯ä»–è©²ä¸Šå‚³ä»€éº¼æ ¼å¼çš„è³‡è¨Šåˆ° S3 ä¸Šä¾†è®“æˆ‘å­˜å–ï¼›é€™æ¨£ä¸€ä¾† SRE åŒäº‹å¯ä»¥å…ˆè¡Œè™•ç†ä¸Šå‚³ç‹€æ…‹çš„éƒ¨ä»½ï¼Œè€Œæˆ‘é€™é‚Šä¹Ÿå¯ä»¥åšè§£æç‹€æ…‹çš„ PoC ã€‚</p>
<p>åœ¨ç¢ºå®šé€™å€‹æ©Ÿåˆ¶å¯è¡Œå¾Œï¼Œå°±å¯ä»¥æ­£å¼è®“å®ƒç¹¼çºŒå¾€ä¸‹èµ°äº†ã€‚æ¥è‘—æˆ‘å°±é–‹å§‹æ€è€ƒé€™å€‹å°ˆæ¡ˆé‚„éœ€è¦ä»€éº¼é€²ä¸€æ­¥çš„è³‡è¨Šï¼Œä¹Ÿå°±æ˜¯é€²å…¥åˆ°äº†è¨­è¨ˆéšæ®µã€‚ç”±æ–¼é€™å€‹æœå‹™ä¸é™æ–¼åªç”¨åœ¨ä¸€å€‹å°ˆæ¡ˆä¸Šï¼Œå› æ­¤æˆ‘ä¹ŸæŠŠå®ƒè¨­è¨ˆæˆè®“é–‹ç™¼è€…å¯ä»¥åŠ å…¥ä»–å€‘è‡ªå·±çš„å°ˆæ¡ˆï¼›ä¹Ÿåªæœ‰ç™»è¨˜åœ¨æ¡ˆçš„å°ˆæ¡ˆæ‰èƒ½äº«æœ‰é€™å€‹æœå‹™çš„æ©Ÿåˆ¶ï¼Œä¹Ÿæ–¹ä¾¿æˆ‘åœ¨ä»‹é¢ä¸Šçš„å‘ˆç¾ä»¥åŠæœªä¾†å°æ¬Šé™ä¸Šçš„æ§ç®¡ã€‚</p>
<p>è€Œåœ¨é€šçŸ¥æœå‹™çš„éƒ¨ä»½ï¼Œ SQA çš„åŒäº‹ä¹Ÿæä¾›äº†ä»–å€‘çš„ webhook ä¾†è®“æˆ‘ä¸²æ¥ï¼›åªä¸éå¦‚æœæ¯æ¬¡éƒ½çœŸçš„è§¸ç™¼ä»–å€‘çš„è‡ªå‹•åŒ–æ¸¬è©¦çš„è©±ï¼Œä»–å€‘çš„å›°æ“¾ä¹Ÿä¸å°ã€‚å› æ­¤åœ¨é€™é‚Šä¸€é–‹å§‹æˆ‘ä¹Ÿä¸æ˜¯çœŸçš„å»æ‰“ä»–å€‘çµ¦çš„ç¶²å€ï¼Œè€Œæ˜¯å…ˆè©¦è‘—è§¸ç™¼ä¸€äº›ç„¡å‚·å¤§é›…çš„æ¸¬è©¦ç¶²å€ã€‚é€™æ™‚å€™æˆ‘å°±æƒ³åˆ°ï¼Œä¹Ÿè¨±é€™å€‹æ©Ÿåˆ¶ä¹Ÿä¸è¦‹å¾—åªèƒ½è§¸ç™¼ SQA çš„è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œè€Œæ˜¯å¯ä»¥è§¸ç™¼å…¶ä»–æœå‹™çš„ webhook ï¼Œå› æ­¤æˆ‘å°±å°‡å®ƒè¨­è¨ˆæˆå¯ä»¥è¨­å®šæƒ³è¦é€šçŸ¥çš„æœå‹™ï¼Œè€Œéç›´æ¥å¯«æ­»åœ¨ç¨‹å¼è£¡ã€‚</p>
<p>å¤§è‡´ä¸Šéœ€è¦çš„è³‡è¨Šéƒ½å®šç¾©å¥½å¾Œï¼Œæˆ‘å°±é–‹å§‹è¨­è¨ˆ Database Schema ä»¥åŠé–‹ç¥¨è«‹è¨—å…¶ä»–éƒ¨é–€åŒäº‹å”åŠ©å»ºç«‹ä¸€äº›ç¶²ç«™å¿…è¦çš„åŸºç¤å»ºè¨­ã€‚</p>
<h2 id="ä¾†å€‹ç®¡ç†ä»‹é¢å§">ä¾†å€‹ç®¡ç†ä»‹é¢å§</h2>
<p>æ—¢ç„¶æ˜¯ç›£æ§ä½ˆç½²ç‹€æ…‹ï¼Œæ‰€ä»¥å°±éœ€è¦æœ‰å€‹åœ°æ–¹è®“æˆ‘å€‘çœ‹åˆ°ç›®å‰ä½ˆç½²çš„ç‹€æ…‹ã€‚é€™è£¡æˆ‘æ±ºå®šç”¨å‰å¾Œç«¯åˆ†é›¢çš„æ–¹å¼ä¾†è£½ä½œé€™å€‹å°ˆæ¡ˆï¼Œå¾Œç«¯çš„éƒ¨ä»½ç•¶ç„¶æ¯«ç„¡ç–‘å•åœ°æ˜¯é¸ç”¨æˆ‘å€‹äººç†Ÿæ‚‰çš„ <a href="https://laravel.com/">Laravel</a> ä¾†åšç‚º API çš„åŸºç¤ï¼Œè€Œåœ¨å‰ç«¯çš„éƒ¨ä»½æˆ‘å‰‡æ˜¯é¸ç”¨äº† <a href="https://vuejs.org/">Vue.js</a> åšå¾Œå°ä»‹é¢ã€‚</p>
<p>åœ¨ API çš„éƒ¨ä»½ä¸»è¦æ˜¯è¨­è¨ˆçµ¦å‰ç«¯ UI å­˜å–å¾Œç«¯è³‡æºï¼Œä»¥åŠçµ¦ CI ä½ˆç½²æŒ‡ä»¤åš hook ä½¿ç”¨ï¼›åŸºæœ¬ä¸Š API éƒ¨ä»½ç”¨åˆ°çš„æŠ€è¡“å¤§è‡´ä¸Šæ˜¯ï¼š</p>
<ul>
<li><a href="https://laravel.com/docs/5.7/routing">Laravel Routing</a> - ç”¨åœ¨ RESTful API ä¸Š</li>
<li><a href="https://laravel.com/docs/5.7/validation">Laravel Validation</a> - ç”¨åœ¨ POST è³‡æ–™çš„é©—è­‰</li>
<li><a href="https://laravel.com/docs/5.7/eloquent">Laravel Eloquent ORM</a> - å»ºç«‹ Service å±¤ä¾†éš”é›¢ Model çš„æ“ä½œ</li>
</ul>
<p>è€Œå‰ç«¯ UI å‰‡æ˜¯åŒ…å«äº†ç›£æ§ç”¨çš„ dashboard ï¼Œä»¥åŠå°ˆæ¡ˆèˆ‡æœå‹™çš„è¨­å®šåŠŸèƒ½ã€‚é€™è£¡æˆ‘ç”¨åˆ°äº†ä»¥ä¸‹çš„å¥—ä»¶å’ŒæŠ€è¡“ï¼š</p>
<ul>
<li><a href="https://element.eleme.io/">Element</a></li>
<li><a href="https://vuex.vuejs.org/">Vuex</a></li>
<li><a href="https://router.vuejs.org/">Vue Router</a></li>
<li><a href="https://github.com/axios/axios">Axois</a></li>
<li><a href="https://laravel.com/docs/5.7/mix">Laravel Mix</a></li>
</ul>
<p>é€™äº›æ‡‰è©²éƒ½æ˜¯ Vue.js åŠ Laravel åœ¨å‰ç«¯é–‹ç™¼æ™‚å¾ˆå¸¸è¦‹çš„å·¥å…·äº†ï¼Œæ‰€ä»¥é€™é‚Šæˆ‘ä¹Ÿä¸å¤šæã€‚æˆ‘åœ¨å‰ç«¯ä¸ŠèŠ±æ¯”è¼ƒå¤šå¿ƒåŠ›çš„éƒ¨ä»½æ˜¯å¦‚ä½•è®“å¾Œç«¯çš„ç‹€æ…‹å¯ä»¥å³æ™‚åæ‡‰åˆ°å‰ç«¯ UI ä¾†ï¼Œé€™éƒ¨ä»½å°±ç”¨åˆ°äº†ä»¥ä¸‹çš„æŠ€è¡“ï¼š</p>
<ul>
<li><a href="https://laravel.com/docs/5.7/events">Laravel Events</a></li>
<li><a href="https://laravel.com/docs/5.7/broadcasting">Laravel Broadcasting</a>
<ul>
<li><a href="https://github.com/happyDemon/vue-echo">Vue-Echo</a></li>
<li><a href="https://github.com/tlaverdure/laravel-echo-server">Laravel Echo Server</a> (ä»¥ <a href="http://pm2.keymetrics.io/">PM2</a> å•Ÿå‹•)</li>
</ul>
</li>
</ul>
<p>æ¥ä¸‹ä¾†å°±æ˜¯æŠŠé€™äº›åŸºæœ¬è¦ç´ çµ„åˆèµ·ä¾†ï¼Œå®ƒå€‘çš„é‹ä½œæ–¹å¼æ˜¯é€™æ¨£å­çš„ï¼š</p>
<p><img src="/resources/how-i-built-my-side-project/laravel-echo-flow.png" alt=""></p>
<p>æœ€å¾Œçš„æˆæœå°±åƒé€™æ¨£ï¼š</p>
<p><img src="/resources/how-i-built-my-side-project/ui-v1.png" alt=""></p>
<p>è¨»ï¼šè«‹ä¸è¦åæ§½æˆ‘çš„å‘½åï¼Œå‘½åä¸€ç›´æ˜¯æˆ‘çš„å¼±é» Orz</p>
<h2 id="å†ç¨å¾®èŠèŠä¸»è¦çš„æ ¸å¿ƒåŠŸèƒ½">å†ç¨å¾®èŠèŠä¸»è¦çš„æ ¸å¿ƒåŠŸèƒ½</h2>
<p>é€™å€‹å°ˆæ¡ˆçš„ä¸»è¦æ ¸å¿ƒåŠŸèƒ½æ˜¯é€™æ¨£å­çš„ï¼šç•¶ CI åŸ·è¡Œå®Œä½ˆç½²æŒ‡ä»¤å¾Œï¼Œæœƒé€šçŸ¥ç›£æ§ç¨‹å¼åœ¨ S3 ä¸Šè¿½è¹¤å„å°ä¸»æ©Ÿçš„ä½ˆç½²ç‹€æ…‹ã€‚é€™é‚Šæ¡ç”¨çš„æŠ€è¡“æœ‰ï¼š</p>
<ul>
<li><a href="https://laravel.com/docs/5.7/queues">Laravel Queues</a></li>
<li><a href="https://laravel.com/docs/5.7/scheduling">Laravel Task Scheduling</a></li>
<li><a href="https://laravel.com/docs/5.7/filesystem">Laravel Filesystem</a></li>
</ul>
<p>æˆ‘ä¸€ç›´è¦ºå¾— Laravel åœ¨æŠ½è±¡åŒ–é€™éƒ¨ä»½åšå¾—å¯¦åœ¨å¤ªå¥½äº†ï¼Œåƒæ˜¯æ‹œ Laravel Filesystem æ‰€è³œï¼Œæˆ‘å¯ä»¥æŠŠå­˜å– storage é€™éƒ¨ä»½æŠ½è±¡åŒ–å¾Œå…ˆåœ¨æœ¬åœ°ç«¯æ¸¬è©¦ï¼Œåˆ°æ™‚å€™æƒ³åˆ‡æ›æˆ S3 çš„è©±åªè¦æ”¹å€‹è¨­å®šå°±æå®šäº†ã€‚</p>
<p>é€™éƒ¨ä»½çš„åŠŸèƒ½å…¶å¯¦åœ¨ PoC æ™‚å°±åšå¾—å·®ä¸å¤šäº†ï¼Œä½†å¾Œä¾†å¤šåŠ çš„ä¸€äº›åˆ¤æ–·å¼è®“æˆ‘è¦ºå¾—å®ƒå¯ä»¥ç”¨ <a href="https://www.sitepoint.com/introduction-to-chain-of-responsibility/">Chain of Responsibility</a> é€™å€‹æ¨¡å¼ä¾†é‡å¯«å®ƒï¼Œå¤§æ¦‚åƒé€™æ¨£å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">AbstractStep::registerSteps([
    resolve(UpdateHostDeployStatuses::class),
    resolve(CheckDeployStatusTimeout::class),
    resolve(CheckHostDeployStatusCompleted::class),
    resolve(NotifyAllServices::class),
])-&gt;handle($this-&gt;deployStatus);
</code></pre></div><p>è¨»ï¼šæ¦‚å¿µå¯¦ä½œå¯ä»¥åƒè€ƒæˆ‘çš„ <a href="https://gist.github.com/jaceju/a7267159ffd3b1c1785e40d28ff4e5b3">gist</a> ã€‚</p>
<p>é€™éº¼ä¸€ä¾†æˆ‘çš„ä¸»è¦ç¨‹å¼é‚è¼¯çš„æ¶æ§‹å°±éå¸¸æ¸…æ™°ï¼Œä»»ä½•æ™‚å€™æƒ³è¦èª¿æ•´æµç¨‹éƒ½éå¸¸å®¹æ˜“ï¼Œåœ¨å¾Œä¾†è¦æ–°å¢éœ€æ±‚æ™‚è­‰æ˜é€™å€‹è¨­è¨ˆæ˜¯éå¸¸å¥½çš„ã€‚</p>
<p>é€™è£¡è¦è£œå……ä¸€ä¸‹åŒäº‹å•æˆ‘çš„å•é¡Œï¼šã€Œé€™å€‹è¨­è¨ˆçœ‹èµ·ä¾†è·Ÿ Laravel Pipeline å¾ˆåƒï¼Œç‚ºä»€éº¼ä½ ä¸ç”¨å®ƒå‘¢ï¼Ÿã€å¥½å•é¡Œï¼Œç¬¬ä¸€æ˜¯ CoR æ¨¡å¼å¯¦ç¾ä¸Šä¹Ÿä¸å›°é›£ï¼Œè€Œä¸”æˆ‘ä¿æœ‰è‡ªè¨‚çš„å½ˆæ€§ï¼›ç¬¬äºŒæˆ‘å…¶å¯¦æ ¹æœ¬å¿˜äº†æœ‰ Laravel Pipeline é€™å€‹æ©Ÿåˆ¶ (ç•¢ç«Ÿæ²’æœ‰æ­£å¼æ–‡ä»¶) ã€‚ä½†å¾Œä¾†è¤‡ç¿’äº†ä¸€ä¸‹ Laravel Pipeline å¾Œï¼Œé‚„æ˜¯è¦ºå¾—å°±é€™å€‹éœ€æ±‚ä¾†èªªï¼Œæˆ‘è‡ªå·±å¯«çš„æ¯”è¼ƒå¥½æ‡‚ã€‚</p>
<h2 id="æ²’æ¸¬è©¦æˆ‘ä¸æœƒå¯«ç¨‹å¼">æ²’æ¸¬è©¦æˆ‘ä¸æœƒå¯«ç¨‹å¼</h2>
<p>é›–ç„¶æ“ºåˆ°ç¾åœ¨æ‰è¬›ï¼Œä½†å…¶å¯¦æˆ‘çš„é–‹ç™¼éç¨‹å¤§è‡´ä¸Šéƒ½æœƒä»¥ TDD å’Œ BDD çš„æ–¹å¼é€²è¡Œã€‚è€Œåœ¨é€™å€‹å°ˆæ¡ˆçš„æ¸¬è©¦è£¡ï¼Œæˆ‘åšäº†ä»¥ä¸‹çš„éƒ¨ä»½ï¼š</p>
<ul>
<li>API schema é©—è­‰</li>
<li>é¡åˆ¥çš„å–®å…ƒæ¸¬è©¦</li>
<li>ä»¥å¯¦ä¾‹ä¾†é©—è­‰è¦æ ¼</li>
</ul>
<p>å…ˆä¾†èŠèŠä»€éº¼æ˜¯ã€Œ API schema é©—è­‰ã€å‘¢ï¼Ÿæ›å¥è©±èªªå°±æ˜¯ä½ å®šç¾©å¥½äº†ä¸€å€‹ RESTful API çš„ schema å¾Œï¼Œä½ é æœŸ API ç¨‹å¼çš„è¼¸å‡ºæ‡‰è©²è¦ç¬¦åˆé€™ä»½ schema ã€‚ç”±æ–¼æˆ‘æ˜¯ç”¨ <a href="https://apiblueprint.org/">API-Blueprint</a> åœ¨åˆ¶è¨‚ API schema ï¼Œå®ƒå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°‡é€™äº› schema ä»¥ <a href="https://github.com/apiaryio/drafter">Drafter</a> è½‰æ›æˆ JSON æ ¼å¼ï¼Œå†é…åˆ Laravel çš„ <a href="https://laravel.com/docs/5.7/http-tests">HTTP Tests</a> ä»¥åŠæˆ‘è‡ªå·±é–‹ç™¼çš„ <a href="https://github.com/goez-tools/apib-unit">Unit Test Helper for API-Blueprint</a> ï¼Œå°±å¯ä»¥åœ¨æ¸¬è©¦è£¡è‡ªå‹•é©—è­‰æˆ‘çš„ API ç¨‹å¼è¼¸å‡ºæ˜¯å¦ç¬¦åˆé€™äº› schema äº†ã€‚</p>
<p>è‡³æ–¼é¡åˆ¥çš„å–®å…ƒæ¸¬è©¦ï¼Œæˆ‘ä¸»è¦ç”¨åœ¨ä¸€äº›è¼”åŠ©ç”¨é¡åˆ¥çš„æ¸¬è©¦ï¼Œå› ç‚ºå®ƒå€‘é€šå¸¸ä¸æœƒç‰½æ‰¯åˆ°è³‡æ–™åº«æˆ–å¤–éƒ¨æœå‹™ï¼Œå¾ˆå–®ç´”çš„å°±æ˜¯ä¸€äº›è¨ˆç®—é‚è¼¯ï¼›è€Œé€™é‚Šæ¡ç”¨çš„å°±æ˜¯ Laraval çš„ <a href="https://laravel.com/docs/5.7/testing">Testing</a> æ©Ÿåˆ¶ï¼Œæ‰€ä»¥å°±ä¸å¤šæäº†ã€‚</p>
<p>æœ€å¾Œæˆ‘å€‹äººæœ€æœ‰æˆå°±æ„Ÿçš„å°±æ˜¯ä»¥å¯¦ä¾‹ä¾†é©—è­‰è¦æ ¼é€™éƒ¨ä»½äº†ï¼Œå› ç‚ºå®ƒå°±æ˜¯çœŸçœŸæ­£æ­£çš„ã€Œæ´»æ–‡ä»¶ã€ã€‚å…ˆä¾†çœ‹çœ‹ä¾‹å­ï¼š</p>
<p><img src="/resources/how-i-built-my-side-project/live-document.png" alt=""></p>
<p>æ˜¯ä¸æ˜¯çœ‹èµ·ä¾†å¾ˆåƒè¦æ ¼æ–‡ä»¶ï¼Œé‡è¦çš„æ˜¯å®ƒçš„æ¯å€‹å ´æ™¯éƒ½æ˜¯å¯ä»¥ç”¨ç¨‹å¼è‡ªå‹•å»é©—è­‰çš„ï¼›é€™é‚Šå°±æ˜¯ç”¨ <a href="http://behat.org/">Behat</a> é€™å€‹ BDD å·¥å…·ä¾†å¯¦ä½œçš„ï¼Œç´°ç¯€è«‹åƒè€ƒæ‹™ä½œï¼š</p>
<ul>
<li><a href="https://jaceju.net/behat-in-laravel/">åœ¨ Laravel ä¸­ä½¿ç”¨ Behat ä¾†åŠ å¼·æ¸¬è©¦çš„å¯è®€æ€§ - åŸºç¤ç¯‡</a></li>
<li><a href="https://jaceju.net/behat-in-laravel-advance/">åœ¨ Laravel ä¸­ä½¿ç”¨ Behat ä¾†åŠ å¼·æ¸¬è©¦çš„å¯è®€æ€§ - é€²éšç¯‡</a></li>
</ul>
<h2 id="ä¸Šç·šå¾Œæ‰æ˜¯æŒ‘æˆ°">ä¸Šç·šå¾Œæ‰æ˜¯æŒ‘æˆ°</h2>
<p>åšåˆ°é€™é‚Šï¼Œæˆ‘å°±è®“é€™å€‹ç³»çµ±ä¸Šç·šè©¦ç”¨äº†ï¼Œä¸ç„¶æˆ‘ä¹Ÿä¸çŸ¥é“å®ƒåˆ°åº•æœ‰æ²’æœ‰ä»€éº¼æˆ‘æ²’æƒ³åˆ°çš„å•é¡Œã€‚æœç„¶åœ¨ä¸Šç·šä¸ä¹…ï¼Œå°±é™¸é™¸çºŒçºŒåœ°æ”¶åˆ°äº†ä¸€äº›åé¥‹ï¼š</p>
<ul>
<li>å¯å¦æ”¯æ´èˆŠæœ‰çš„ä½ˆç½²æ©Ÿåˆ¶ï¼Ÿ</li>
<li>å¯å¦æ›´æ¸…æ¥šçš„çŸ¥é“ä½ˆç½²éç¨‹ï¼Ÿ</li>
<li>å¯å¦åœ¨ä½ˆç½²å‰å°±è‡ªå‹•å»ºç«‹è¡Œäº‹æ›†æ´»å‹•ï¼Ÿ</li>
</ul>
<h3 id="å¦‚ä½•æ”¯æ´èˆŠæœ‰ä½ˆç½²æ©Ÿåˆ¶">å¦‚ä½•æ”¯æ´èˆŠæœ‰ä½ˆç½²æ©Ÿåˆ¶ï¼Ÿ</h3>
<p>åœ¨æˆ‘å€‘å…¬å¸é‚„æ˜¯æœ‰ä¸€äº›èˆŠå°ˆæ¡ˆåœ¨ä½ˆç½²å¾Œä¹Ÿéœ€è¦è§¸ç™¼ SQA çš„è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œåªæ˜¯å®ƒå€‘ä¸¦æ²’æœ‰é€é CI ä¾†åšä½ˆç½²ï¼Œè€Œæ˜¯é€éæ‰‹å‹•è¼¸å…¥æŒ‡ä»¤ä¾†ä½ˆç½²ï¼›å› æ­¤æˆ‘çš„ç›£æ§æ©Ÿåˆ¶å°±å¿…é ˆæä¾›ä¸€äº›æ–¹æ³•ä¾†è®“é€™äº›èˆŠå°ˆæ¡ˆä¹Ÿæ”¯æ´ã€‚é›–ç„¶æˆ‘ä¸€é–‹å§‹ä¹Ÿå¹«é€™é¡å‹å°ˆæ¡ˆåšäº†è·³éç›£æ§æ©Ÿåˆ¶è€Œç›´æ¥é€šçŸ¥ SQA CI æœå‹™çš„è¨­è¨ˆï¼Œç„¶è€Œå¾Œä¾†æˆ‘å€‘é‚„æ˜¯é‡æ–°è¨è«–ä¸€äº›æ”¹å–„çš„åšæ³•ï¼Œå› æ­¤é€™éƒ¨ä»½ä¹Ÿé‚„åœ¨é€²è¡Œä¸­ã€‚</p>
<h3 id="å¦‚ä½•æ›´æ¸…æ¥šçš„çŸ¥é“ä½ˆç½²éç¨‹">å¦‚ä½•æ›´æ¸…æ¥šçš„çŸ¥é“ä½ˆç½²éç¨‹ï¼Ÿ</h3>
<p>åœ¨ç¬¬ä¸€ç‰ˆçš„ä»‹é¢å…¶å¯¦ä¹Ÿåªèƒ½çœ‹åˆ°ä½ˆç½²éšæ®µè€Œå·²ï¼Œç„¡æ³•ç­è§£æ¯å€‹éšæ®µçš„ç´°ç¯€ã€‚æ‰€ä»¥æˆ‘é‡æ–°è¨­è¨ˆäº†å¾Œç«¯äº‹ä»¶ï¼Œä¸¦åšäº†äº‹ä»¶çš„ç´€éŒ„ï¼Œç„¶å¾ŒæŠŠé€™äº›è³‡è¨Šåœ¨å‰ç«¯ç”¨æ™‚é–“è»¸çš„æ–¹å¼ä¾†å‘ˆç¾ã€‚è€Œåœ¨é‡æ–°è¨­è¨ˆä»‹é¢æ™‚ï¼Œæˆ‘æ”¹ç”¨äº†ä»¥ä¸‹çš„æŠ€è¡“ï¼š</p>
<ul>
<li><a href="https://cli.vuejs.org/guide/">Vue-CLI 3</a></li>
<li><a href="https://github.com/vueComponent/ant-design-vue">Ant-Design-Vue</a></li>
</ul>
<p>Vue-CLI æ•´åˆåˆ° Laravel çš„æ–¹å¼å¯ä»¥åƒè€ƒ Vue è€çˆ¸å°¤é›¨æºªå¯«çš„ <a href="https://github.com/yyx990803/laravel-vue-cli-3">Using Vue CLI 3 with Laravel</a> ä¸€ä¾‹ã€‚</p>
<p>é¸ç”¨ Ant-Design-Vue ä¸»è¦æ˜¯å®ƒæœ‰å¾ˆæ£’çš„ step å…ƒä»¶èˆ‡ timeline å…ƒä»¶ï¼Œå‰›å¥½æ»¿è¶³æˆ‘çš„éœ€æ±‚ã€‚åªæ˜¯å°±åœ¨æˆ‘æŠŠæ–°ä»‹é¢åšå®Œå¿«ä¸Šç·šæ™‚ï¼Œå‰›å¥½é‡åˆ°äº† <a href="https://github.com/ant-design/ant-design/issues/13848">Ant-Design è–èª•ç¯€å½©è›‹ (ç‚¸å½ˆ) äº‹ä»¶</a> ï¼Œå·®é»æ²’è®“æˆ‘å¾æ¤…å­ä¸Šè·Œä¸‹ä¾†ï¼›ç•¶ä¸‹ä¹Ÿåªèƒ½è‡ªå˜²é‚„å¥½é€™åªæ˜¯å€‹ side project ï¼Œå¤§å®¶å°å®ƒæ²’é€™éº¼æ•æ„Ÿã€‚</p>
<p>ç¸½ä¹‹æ”¹å–„å¾Œçš„ä»‹é¢åƒé€™æ¨£å­ï¼š</p>
<p><img src="/resources/how-i-built-my-side-project/ui-v2-1.png" alt=""></p>
<p>è€Œä¸”ä½ˆç½²ç´°ç¯€ä¹Ÿä¸€ç›®ç­ç„¶ï¼š</p>
<p><img src="/resources/how-i-built-my-side-project/ui-v2-2.png" alt=""></p>
<h3 id="å¦‚ä½•åœ¨ä½ˆç½²å‰å°±è‡ªå‹•å»ºç«‹è¡Œäº‹æ›†æ´»å‹•">å¦‚ä½•åœ¨ä½ˆç½²å‰å°±è‡ªå‹•å»ºç«‹è¡Œäº‹æ›†æ´»å‹•</h3>
<p>å› ç‚ºå…¬å¸æ”¿ç­–é—œä¿‚ï¼Œæˆ‘å€‘å…§éƒ¨åœ¨å°‡ä¸»è¦å°ˆæ¡ˆä½ˆç½²ä¸Šç·šæˆ–èª¿æ•´ç·šä¸Šè¨­å®šæ™‚ï¼Œé€šå¸¸éœ€è¦å»ºç«‹ä¸€å€‹ Goolge è¡Œäº‹æ›†æ´»å‹•ï¼Œè®“æ‰€æœ‰åœ˜éšŠå°é€™äº›é‡è¦äº‹ä»¶èƒ½ä¸€ç›®ç­ç„¶ã€‚ä¸éå› ç‚ºæ‰‹å‹•å»ºç«‹å¤ªéº»ç…©äº†ï¼Œæ‰€ä»¥æˆ‘çš„éƒ¨é–€ä¸»ç®¡ä¸€ç›´å¾ˆæƒ³æŠŠé€™æ®µè‡ªå‹•åŒ–ï¼Œä¹Ÿå°±æ˜¯åœ¨å»ºç«‹ Release Merge Request æ™‚æœƒè‡ªå‹•å»ºç«‹æ´»å‹•ï¼Œåœ¨å°ˆæ¡ˆä½ˆç½²ä¸Šç·šå¾Œå°‡æ´»å‹•æ¨™ç¤ºç‚ºçµæŸã€‚</p>
<p>åœ¨æˆ‘å€‘è¨è«–ä¹‹å¾Œï¼Œæˆ‘ç™¼ç¾å…¶å¯¦å¯ä»¥é€éæˆ‘çš„ç›£æ§æœå‹™ä¾†å®Œæˆé€™å€‹è‡ªå‹•åŒ–æ©Ÿåˆ¶ã€‚æˆ‘åœ¨ç›£æ§æœå‹™ä¸Šæä¾›äº†ä¸€å€‹ API ï¼Œè®“ GitLab å¯ä»¥åœ¨å»ºç«‹æˆ–æ›´æ–° Merge Request æ™‚é€é webhook è§¸ç™¼ï¼›ç„¶å¾Œå†é€é <a href="https://cloud.google.com/">Google Cloud Platform</a> æä¾›çš„ Calendar API ä¾†å»ºç«‹è¡Œäº‹æ›†æ´»å‹•ï¼Œåœ¨ Laravel é€™è£¡æœ‰ä¸€å€‹å¾ˆæ–¹ä¾¿çš„å¥—ä»¶ <a href="https://github.com/spatie/laravel-google-calendar"><code>spatie/laravel-google-calendar</code></a> å¯ä»¥å¹«æˆ‘è™•ç† Calendar API ä¸Šçš„ä¸²æ¥ã€‚</p>
<h2 id="ç‚ºæœªä¾†çš„ä½ è‘—æƒ³å¯«é»æ–‡ä»¶å§">ç‚ºæœªä¾†çš„ä½ è‘—æƒ³ï¼Œå¯«é»æ–‡ä»¶å§</h2>
<p>è¿‘å¹´ä¾†æˆ‘ä¸€ç›´å¾ˆè‘—é‡å¯«æ–‡ä»¶é€™ä»¶äº‹ï¼Œç‚ºçš„å°±æ˜¯å¸Œæœ›ä¹‹å¾Œæ¥æ‰‹ç¶­è­·çš„äººå¯ä»¥çœé»å¿ƒï¼Œä¸å¿…ä¸€é–‹å§‹å°±åªèƒ½è·³é€²ç¨‹å¼è£¡å»æŒ–è¦æ ¼ã€‚é›–ç„¶åœ¨ BDD å¹«åŠ©ä¸‹å¯ä»¥ç†è§£é€™å€‹ç³»çµ±èƒ½åšä»€éº¼ï¼Œä½†æœ‰äº›éè¦æ ¼çš„è³‡è¨Šé‚„æ˜¯éœ€è¦é¡å¤–å¯«æ–‡ä»¶èªªæ˜ä¸€ä¸‹ã€‚åœ¨é€™å€‹å°ˆæ¡ˆæˆ‘ä¹Ÿä¸æƒ³æ”¾æ£„é€™å€‹å …æŒï¼Œæ‰€ä»¥æˆ‘å¯«çš„æ–‡ä»¶åŒ…å«é€™äº›è³‡è¨Šï¼š</p>
<ul>
<li>ç°¡ä»‹èˆ‡ä½¿ç”¨æ–¹å¼</li>
<li>å¦‚ä½•æ•´åˆ Google Calendar</li>
<li>æ­£å¼ç’°å¢ƒç’°å¢ƒè¨­ç½®</li>
<li>é–‹ç™¼æŒ‡å—</li>
</ul>
<p><img src="/resources/how-i-built-my-side-project/doc.png" alt=""></p>
<p>é€™é‚Šå°±ç”¨åˆ°äº† <a href="https://github.com/GitbookIO/gitbook-cli">GitBook CLI</a> ä¾†å¹«æˆ‘ç”¢ç”Ÿæ–‡ä»¶ï¼Œä¸¦ä¸”æ”¾åˆ° GitLab Pages ä¸Šã€‚</p>
<p>å¦å¤–ä¹Ÿå› ç‚ºæˆ‘æ˜¯ç”¨ <a href="https://apiblueprint.org/">API-Blueprint</a> ä¾†æ’°å¯« API è¦æ ¼ï¼Œæ‰€ä»¥ API æ–‡ä»¶å°±å¯ä»¥é€é <a href="https://github.com/danielgtaylor/aglio">Aglio</a> é€™å€‹å·¥å…·ä¾†ç”¢ç”Ÿã€‚æˆæœå°±åƒé€™æ¨£ï¼š</p>
<p><img src="/resources/how-i-built-my-side-project/api.png" alt=""></p>
<p>ç•¶ç„¶æ–‡ä»¶çš„ç”¢ç”Ÿä¹Ÿæ˜¯è‡ªå‹•åŒ–çš„ï¼Œé€™éƒ¨ä»½å°±æ˜¯é€é GitLab CI æ­é…ä»¥ Docker åŸ·è¡Œçš„ runner ä¾†ç”¢ç”Ÿã€‚</p>
<p>è¨»ï¼šæ›´æ­£ä¸€ä¸‹ï¼Œæˆ‘å€‘ä¸æ˜¯ç”¨ <a href="https://apiary.io/">Apiary</a> é€™å€‹å·¥å…·ï¼Œé›–ç„¶å®ƒä¹Ÿä¸éŒ¯ç”¨ã€‚</p>
<h2 id="çµè«–">çµè«–</h2>
<p>æ„Ÿè¬å¤§å®¶è·Ÿæˆ‘ä¸€èµ·å¾ˆå¿«åœ°èµ°éé€™å€‹å°ˆæ¡ˆçš„å»ºç«‹éç¨‹ï¼Œé›–ç„¶å®ƒæ–·æ–·çºŒçºŒèŠ±äº†æˆ‘å¿«åŠå¹´çš„æ™‚é–“ã€‚è€å¯¦èªªæˆ‘çš„è¨˜æ†¶åŠ›ä¹Ÿä¸æ˜¯å¾ˆå¼·ï¼Œåƒæ˜¯åœ¨é–‹ç™¼é€™å€‹å°ˆæ¡ˆæ™‚ï¼Œå…¶å¯¦æœ‰å¾ˆå¤šæŠ€è¡“æˆ‘ä¹Ÿè¨˜ä¸æ¸…å…¨è²Œï¼Œå¤§å¤šæ•¸ç´°ç¯€é‚„æ˜¯è¦é‚Šåšé‚ŠæŸ¥æ‰‹å†Šï¼›æ‰€ä»¥è¶è‘—ç¾åœ¨è¨˜æ†¶é‚„é®®æ˜æ™‚ï¼Œè¶•ç·ŠæŠŠé€™å€‹éç¨‹è¨˜éŒ„ä¸‹ä¾†ï¼Œå…å¾—ä»¥å¾Œå¯èƒ½è¦å¯«æ›¸æ™‚å°±å¿˜äº†è‡ªå·±æ›¾ç¶“åšéä»€éº¼äº† (æƒ³å¤ªå¤š) ã€‚</p>
<p>è€Œä¸”å„ä½å¤§æ¦‚å¯ä»¥ç™¼ç¾å…¶å¯¦æˆ‘åœ¨é€™å€‹å°ˆæ¡ˆä¸Šç”¨çš„æŠ€è¡“éƒ½å¾ˆå¹³å¸¸ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç›®å‰ç¶²ç«™é–‹ç™¼è€…éƒ½æ‡‚çš„æ±è¥¿ã€‚äº‹å¯¦ä¸Šå°±æˆ‘å€‹äººçš„ç¶“é©—ï¼Œå¤§å¤šæ•¸å°ˆæ¡ˆçš„éœ€æ±‚å…¶å¯¦ç”¨ä¸åˆ°ä»€éº¼é«˜æ·±çš„æŠ€è¡“ï¼Œç›®å‰ä¸»æµçš„é–‹ç™¼å·¥å…·æˆ–æ¡†æ¶å¹¾ä¹éƒ½å¯ä»¥æ»¿è¶³é€™äº›éœ€æ±‚ã€‚æ‰€ä»¥ä¸è¦çœ‹è¼•é‚£äº›çœ‹èµ·ä¾†ä¸æ½®çš„å·¥å…·ï¼ŒçœŸæ­£è©²ç£¨ç·´èˆ‡ç²¾é€²çš„æ˜¯å…¶å¯¦æ˜¯ä½ è‡ªå·±å¦‚ä½•å»åˆ†æä¸¦è§£æ±ºå•é¡Œçš„èƒ½åŠ›ã€‚</p>
<p>å†ç¸½çµä¸€ä¸‹æ•´å€‹æ­·ç¨‹ï¼š</p>
<ol>
<li>ç¢ºèªéœ€æ±‚çœŸæ­£åˆ°åº•è¦çš„æ˜¯ä»€éº¼ã€‚</li>
<li>è¨è«–ä¸¦æå‡ºæœ‰å…±è­˜çš„æ–¹æ¡ˆã€‚</li>
<li>å¯¦é©—ä¸¦ç¢ºèªæ–¹æ¡ˆæ˜¯å¯è¡Œçš„ã€‚</li>
<li>é–‹ç™¼åˆæœŸç‰ˆæœ¬ä¸¦ä¸Šç·šé‹è¡Œã€‚</li>
<li>æ”¶é›†åé¥‹ä¸¦æŒçºŒæ”¹å–„ã€‚</li>
</ol>
<p>æœ€å¾Œæˆ‘æƒ³èªªé€™å€‹å°ˆæ¡ˆå°æˆ‘çš„æ„ç¾©æ˜¯å¾ˆå¤§çš„ï¼Œå› ç‚ºå®ƒè§£æ±ºäº†åœ˜éšŠçš„ç—›é»ï¼Œè®“åœ˜éšŠå¯ä»¥ä¸å¿…åˆ†å¿ƒåœ¨ä¸€äº›é›œå‹™ä¸Šï¼›æ‰€ä»¥æˆ‘èªç‚ºæ‰€è¬‚çš„æˆå°±æ„Ÿï¼Œæœ‰æ™‚ä¸è¦‹å¾—æ˜¯å­¸æœƒå¤šæ–°ç©çš„æŠ€è¡“ï¼Œè€Œæ˜¯åšå‡ºå°åˆ¥äººä¾†èªªæ˜¯æœ‰æ„ç¾©çš„äº‹æƒ…ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>Laravel åŸ·è¡Œæ¸¬è©¦æ™‚å‡ºç¾ Function name must be a string</title>
			<link>https://jaceju.net/function-name-must-be-a-string-in-laravel-testing/</link>
			<pubDate>Mon, 28 Jan 2019 12:26:42 +0800</pubDate>
			
			<guid>https://jaceju.net/function-name-must-be-a-string-in-laravel-testing/</guid>
			<description>åœ¨ Laravel æ’°å¯«å–®å…ƒæ¸¬è©¦æœ‰ç”¨åˆ° @dataProvider ï¼ŒåŸ·è¡Œæ¸¬è©¦æ™‚å»å‡ºç¾ Function name must be a string çš„éŒ¯èª¤ã€‚ é€™æ˜¯å› ç‚ºæ‰€æœ‰çš„ Data Provider æœƒæ¯” setUp æ›´æ—©è¢«åŸ·è¡Œï¼Œæ‰€ä»¥ä¸èƒ½åœ¨ Data Provider è£¡ç”¨ä»»ä½•åœ¨ setUp å¾Œæ‰æœƒæœ‰çš„æ±è¥¿ï¼Œ</description>
			<content type="html"><![CDATA[<p>åœ¨ Laravel æ’°å¯«å–®å…ƒæ¸¬è©¦æœ‰ç”¨åˆ° <code>@dataProvider</code> ï¼ŒåŸ·è¡Œæ¸¬è©¦æ™‚å»å‡ºç¾ <code>Function name must be a string</code> çš„éŒ¯èª¤ã€‚</p>
<p>é€™æ˜¯å› ç‚ºæ‰€æœ‰çš„ Data Provider æœƒæ¯” <code>setUp</code> æ›´æ—©è¢«åŸ·è¡Œï¼Œæ‰€ä»¥ä¸èƒ½åœ¨ Data Provider è£¡ç”¨ä»»ä½•åœ¨ <code>setUp</code> å¾Œæ‰æœƒæœ‰çš„æ±è¥¿ï¼Œä¾‹å¦‚ <code>$this-&gt;app</code> æˆ– helper function ï¼Œå› ç‚ºé€™æ™‚å€™å®ƒå€‘é‚„æ²’æœ‰è¢«åˆå§‹åŒ–æˆ–è¢« autoload è¼‰å…¥ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>èº«ç‚ºå‰ç«¯å·¥ç¨‹å¸«ï¼Œå°ä½ ä¾†èªªï¼Œä½ èªç‚ºæœ€é‡è¦çš„æ˜¯ä»€éº¼ï¼Ÿ</title>
			<link>https://jaceju.net/what-is-essential-to-frontend-engineers/</link>
			<pubDate>Tue, 15 Jan 2019 00:06:19 +0800</pubDate>
			
			<guid>https://jaceju.net/what-is-essential-to-frontend-engineers/</guid>
			<description>å¥½å‹ Kuro å…¬é–‹å•äº†é€™å€‹å•é¡Œï¼Œå˜—è©¦æŒ‘æˆ°ä¸€ä¸‹ã€‚ä¸éä¸»è¦ä¹Ÿåªæ˜¯æ•´ç†äº†ä¸€ä¸‹æˆ‘å¾èº«é‚Šçš„å‰ç«¯åŒäº‹åŠç¤¾ç¾¤æœ‹å‹å€‘ä¸Šçœ‹åˆ°çš„ä¸€äº›ç‰¹è³ªï¼Œç•¢ç«Ÿæ¯”èµ·æˆ‘ä¾†ï¼Œä»–å€‘åœ¨å‰ç«¯é ˜åŸŸæ‰“</description>
			<content type="html"><![CDATA[<p>å¥½å‹ Kuro å…¬é–‹å•äº†<a href="https://www.facebook.com/kurotanshi/posts/10210440012635051">é€™å€‹å•é¡Œ</a>ï¼Œå˜—è©¦æŒ‘æˆ°ä¸€ä¸‹ã€‚ä¸éä¸»è¦ä¹Ÿåªæ˜¯æ•´ç†äº†ä¸€ä¸‹æˆ‘å¾èº«é‚Šçš„å‰ç«¯åŒäº‹åŠç¤¾ç¾¤æœ‹å‹å€‘ä¸Šçœ‹åˆ°çš„ä¸€äº›ç‰¹è³ªï¼Œç•¢ç«Ÿæ¯”èµ·æˆ‘ä¾†ï¼Œä»–å€‘åœ¨å‰ç«¯é ˜åŸŸæ‰“æ»¾å¾—æ›´ä¹…ã€‚ç•¶ç„¶é€™äº›ç‰¹è³ªæ‡‰è©²æ˜¯é©ç”¨å¤§éƒ¨ä»½å·¥ç¨‹å¸« (ä¸è«–å“ªä¸€ç«¯) ï¼Œä½†æˆ‘é‚„æ˜¯èªç‚ºå‰ç«¯å·¥ç¨‹å¸«å¹³æ™‚è¦æ›´è‘—é‡é€™äº›ç‰¹è³ªã€‚</p>
<p>è¨»ï¼šå…¶ä»–é ˜åŸŸæˆ–è¨±ä¹Ÿæœ‰ã€Œå‰ç«¯ã€é€™å€‹è¡“èªï¼Œä½†ä¸€èˆ¬äººèªçŸ¥çš„ã€Œå‰ç«¯ã€æ˜¯æ³›æŒ‡ã€Œ Web å‰ç«¯ã€ã€‚</p>
<p>é€™äº›ç‰¹è³ªåŒ…å«ï¼š</p>
<ul>
<li>åšå¯¦çš„åŸºç¤èƒ½åŠ›</li>
<li>æ“…é•·æ‰¾å‡ºå•é¡Œé»</li>
<li>æ“æœ‰éˆæ´»çš„æ€ç¶­</li>
<li>æ™‚å¸¸ä¿æŒå¥½å¥‡å¿ƒ</li>
</ul>
<!-- raw HTML omitted -->
<h2 id="åšå¯¦çš„åŸºç¤èƒ½åŠ›">åšå¯¦çš„åŸºç¤èƒ½åŠ›</h2>
<p>ç¾ä»£å¾ˆå¤šå‰›æ¥è§¸å‰ç«¯çš„é–‹ç™¼è€…éƒ½èª¤ä»¥ç‚ºåªè¦å­¸å¥½æ¡†æ¶ã€æœƒå¥—ç‰ˆé¢ã€æœ€å¾Œç™¼ä½ˆç¶²ç«™å°±æ˜¯ä»–å€‘å…¨éƒ¨çš„å·¥ä½œäº†ï¼›é›–ç„¶ä¸å¾—ä¸èªªé€™æ˜¯å¾ˆå¤šå…¬å¸æ‰¾äººçš„ç›®çš„ï¼Œè®“å¾ˆå¤šè‡ªç¨±å‰ç«¯å·¥ç¨‹å¸«çš„æœ‹å‹ä¹Ÿåªèƒ½åœ¨äººå¾Œé»˜é»˜æµæ·šã€‚</p>
<p>ä½†å¦‚æœæƒ³è®“è‡ªå·±æˆç‚ºä¸€å€‹å„ªç§€çš„å‰ç«¯é–‹ç™¼è€…ï¼Œä¸èƒ½åªåšé€™äº›å®›å¦‚æ‰“é›œçš„è¡¨é¢å·¥ä½œï¼Œè€Œæ˜¯è¦æ·±æ·±åœ°æ‰“å¥½åŸºç¤ã€‚åŸºæœ¬ä¸Šï¼Œå‰ç«¯å¤§éƒ¨ä»½çš„å·¥ä½œæˆæœéƒ½å¾—é ç€è¦½å™¨å‘ˆç¾ï¼Œè€Œå…¶ä¸­è¦ç†è§£çš„åŸºç¤å¤§è‡´ä¸Šå¯ä»¥åˆ†æˆå¹¾å€‹é‡é»ï¼š</p>
<ul>
<li>ç€è¦½å™¨è¦å‘ˆç¾çš„å…§å®¹å¾å“ªä¾†ï¼Ÿ</li>
<li>ç€è¦½å™¨èƒŒå¾Œåˆ°åº•åšäº†äº›ä»€éº¼ï¼Ÿ</li>
<li>æ€éº¼è®“ç€è¦½å™¨æ­£ç¢ºå‘ˆç¾å…§å®¹ï¼Ÿ</li>
</ul>
<p>å‰›å¥½æœ‰ä¸€ç¯‡<a href="https://cythilya.github.io/2018/11/26/what-happens-when-you-type-an-url-in-the-browser-and-press-enter/">ã€Šåœ¨ç€è¦½å™¨è¼¸å…¥ç¶²å€ä¸¦é€å‡ºå¾Œï¼Œåˆ°åº•ç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿã€‹</a>æŠŠé€™äº›è¦é»ä»‹ç´¹å¾—å¾ˆæ¸…æ¥šï¼Œè€Œæ–‡ç« ä¸­çš„å„å€‹ç’°ç¯€å°±æ˜¯å‰ç«¯é–‹ç™¼è€…æ‰€è©²å…·å‚™çš„åŸºç¤ã€‚</p>
<p>é‚£è©²æ€éº¼é–‹å§‹æ‰“å¥½é€™äº›åŸºç¤å‘¢ï¼Ÿä½ å¯ä»¥åœ¨ Google ä¸Šæœå°‹ä¸€ä¸‹ã€Œ 2018 å‰ç«¯æŠ€èƒ½æ¨¹ã€ï¼Œå¤§æ¦‚æœƒè¹¦å‡ºä¸å°‘æœ‰ç”¨çš„åƒè€ƒè³‡æºï¼Œä»¥ä¸‹ç¾…åˆ—å¹¾å€‹ï¼š</p>
<ul>
<li><a href="https://blog.fundebug.com/2018/09/04/2018-frontend-roadmap/">2018 å‰ç«¯å·¥ç¨‹å¸«æˆé•·è·¯ç·šåœ– (è­¯æ–‡)</a> <a href="https://medium.com/tech-tajawal/modern-frontend-developer-in-2018-4c2072fa2b9c">(åŸæ–‡)</a></li>
<li><a href="https://sherlock.phodal.com/">Skill Tree Sherlock</a></li>
<li><a href="https://leohxj.gitbooks.io/front-end-database/interview/skill-path.html">å‰ç«¯æŠ€èƒ½åœ–è­œ</a> (é€™æœ¬é›»å­æ›¸è£¡é¢é‚„æœ‰å¾ˆå¤šå¯¶å¯ä»¥æŒ–ã€‚)</li>
</ul>
<p>è¨»ï¼šä½ å¯èƒ½æœƒå•ç‚ºä»€éº¼ä¸æ˜¯æ‰¾ 2019 å¹´çš„æŠ€èƒ½æ¨¹ï¼Ÿæ‹œè¨—ï¼Œç¾åœ¨æ‰ä¸€æœˆè€¶ï¼Œå»å¹´çš„ç¹¼çºŒç”¨å°±å¥½ã€‚</p>
<p>ç•¶ç„¶ä¸¦ä¸æ˜¯èªªä¸Šé¢åˆ—çš„å…¨éƒ¨æŠ€èƒ½éƒ½æ˜¯åŸºç¤ï¼Œä½†è‡³å°‘ç€è¦½å™¨ç›¸é—œåŠç¶²é ä¸‰å·¨é ­ HTML/CSS/JavaScript èƒŒå¾Œçš„çŸ¥è­˜éƒ½æ˜¯å‰ç«¯å·¥ç¨‹å¸«æ—¥å¸¸å·¥ä½œä¸­å¿…å‚™çš„åŸºç¤æŠ€èƒ½ã€‚æœ‰å¥è©±æˆ‘è¨˜å¾—å¥½åƒæ˜¯é€™éº¼èªªçš„ï¼š</p>
<blockquote>
<p>å¤§å¸«åªæ˜¯æŠŠåŸºç¤åŠŸç·´å¾—æ¯”åˆ¥äººæ›´æ¥µè‡´è€Œå·²ã€‚</p>
</blockquote>
<p>æ‰€ä»¥åšå¯¦çš„åŸºç¤èƒ½åŠ›æ˜¯å‰ç«¯å·¥ç¨‹å¸«å¾ˆé‡è¦çš„ç‰¹è³ªï¼Œæœ‰äº›å‰ç«¯å·¥ç¨‹å¸«åŸºç¤å¥½åˆ°åªè¦æ˜¯å¯ä»¥ç”¨ JavaScript åšå‡ºä¾†æ”¾åˆ°ç€è¦½å™¨ä¸Šè·‘çš„æ±è¥¿ï¼Œä»–å€‘éƒ½æœƒå»åšï¼Œæ›´ä½•æ³é€™ä¸–ç•Œä¸Šæ¯å€‹æ±è¥¿çœ‹èµ·ä¾†éƒ½åƒ JavaScript ã€‚</p>
<h2 id="æ“…é•·æ‰¾å‡ºå•é¡Œé»">æ“…é•·æ‰¾å‡ºå•é¡Œé»</h2>
<p>å¤§å¤šæ•¸å‰ç«¯å·¥ç¨‹å¸«å¹³å¸¸ä¸åªæ˜¯åœ¨é–‹ç™¼æ–°åŠŸèƒ½è€Œå·²ï¼Œä»–å€‘é‚„éœ€è¦é¢è‡¨ä½¿ç”¨è€…åœ¨ç€è¦½å™¨æ“ä½œä¸Šçš„å„ç¨®å•é¡Œï¼Œé‚„æœ‰é–‹ç™¼å·¥å…·å¸¶ä¾†çš„å„ç¨®å•é¡Œï¼Œä»¥åŠç‚ºäº†è§£æ±ºå•é¡Œæ‰€é–‹ç™¼çš„å·¥å…·æ‰€å¸¶ä¾†çš„æ–°å•é¡Œã€‚æœ‰åšå¯¦çš„åŸºç¤èƒ½åŠ›é‚„æœ‰ <a href="https://stackoverflow.com/">Stack Overflow</a> ä½œç‚ºå¾Œç›¾ï¼Œä»–å€‘å°±èƒ½åœ¨çœ‹åˆ°é€™äº›å•é¡Œæ™‚ï¼Œå¯ä»¥å¾ˆå¿«åˆ†æå‡ºå•é¡Œé»ã€‚</p>
<p>æ‰€ä»¥çŸ¥é“å¦‚ä½•ç”¨ç€è¦½å™¨æä¾›çš„é–‹ç™¼è€…å·¥å…·ä¾†åµéŒ¯æˆ–æ˜¯æŸ¥çœ‹æ•ˆèƒ½ç“¶é ¸ï¼Œç†Ÿæ‚‰å„ç¨®ç€è¦½å™¨ä¹‹é–“ä¸ä¸€è‡´çš„å¯¦ä½œç­‰ç­‰ï¼Œé€™äº›éƒ½æ˜¯å‰ç«¯é–‹ç™¼è€…åœ¨å°‹æ‰¾å•é¡Œé»æ™‚å¾ˆé‡è¦çš„æŠ€èƒ½ã€‚ä»Šå¤©å¦‚æœæ˜¯æˆ‘é¢è©¦å‰ç«¯å·¥ç¨‹å¸«æ™‚ï¼Œæˆ‘ç¬¬ä¸€å€‹å•é¡Œå¤§æ¦‚æœƒå•ï¼šã€Œä½ çŸ¥é“ä¸»æµç€è¦½å™¨é–‹å•Ÿé–‹ç™¼è€…å·¥å…·çš„å¿«é€Ÿéµå—ï¼Ÿã€</p>
<h2 id="æ“æœ‰éˆæ´»çš„æ€ç¶­">æ“æœ‰éˆæ´»çš„æ€ç¶­</h2>
<p>ã€ŒæŠ€è¡“é ˜åŸŸè£¡ä¸æœƒåªæœ‰ä¸€ç¨®è§£æ±ºéœ€æ±‚çš„æ–¹å¼ã€‚ã€é€™å¥è©±çš„å¨åŠ›åœ¨å‰ç«¯é–‹ç™¼ä¸­ç‰¹åˆ¥é¡¯è‘—ã€‚å‰ç«¯é–‹ç™¼è€…çš„å¼·å¤§ä¸åœ¨æ–¼ä»–å€‘å­¸æœƒå¤šå°‘å·¥å…·ï¼Œè€Œæ˜¯æœƒä¸æœƒç”¨æ‰‹é‚Šæ—¢æœ‰çš„å·¥å…·ä¾†è™•ç†éœ€æ±‚æˆ–æ˜¯è§£æ±ºå•é¡Œã€‚ä½ ä»¥ç‚ºæˆ‘è¦èªªã€Œé¾äº”æ‰‹ä¸Šåªè¦æœ‰æ§ï¼Œèª°éƒ½æ®ºä¸äº†ä»–ã€‚ã€å—ï¼Ÿå°ï¼Œæˆ‘å·²ç¶“èªªäº†ã€‚</p>
<p>åœ¨æˆ‘æ‰€çŸ¥é“çš„å‰ç«¯é–‹ç™¼è€…è£¡ï¼Œæœ‰ä¸€å€‹æ€ç¶­éˆæ´»åˆ°æ¥µè‡´çš„ç”·äººå« Martin Kleppe ï¼Œä»–å¸¸ç”¨çš„å¸³è™Ÿæ˜¯ <a href="https://twitter.com/aemkei">@aemkei</a> ã€‚ä»–å° JavaScript çš„<del>æƒ¡æ</del>ç ”ç©¶å¾ˆé›£æœ‰äººå¯ä»¥ç›¸æä¸¦è«–ï¼Œæˆ‘æ›¾ç¶“åœ¨ JSConf è£¡çœ‹éä»–çš„æ¼”è¬›ï¼Œé‚£æ™‚æˆ‘æ‰çŸ¥é“è‡ªå·±åœ¨ JavaScript ä¸Šæ€ç¶­æœ‰å¤šåƒµç¡¬ï¼Œå¤§æ¦‚è·Ÿæˆ‘çš„è‚ä¸€æ¨£ç¡¬ã€‚</p>
<p>ä¾†çœ‹çœ‹ä»–çš„ç°¡å ±å’Œè­°ç¨‹éŒ„å½±ï¼š</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="æ™‚å¸¸ä¿æŒå¥½å¥‡å¿ƒ">æ™‚å¸¸ä¿æŒå¥½å¥‡å¿ƒ</h2>
<p>å°±è·Ÿè²“ä¸€æ¨£ï¼Œä½ å¤§æ¦‚å¾ˆé›£é˜»æ­¢å‰ç«¯é–‹ç™¼è€…çš„å¥½å¥‡å¿ƒã€‚å¸¸æœƒçœ‹åˆ°å‰ç«¯åŒäº‹æˆ–ç¤¾ç¾¤æœ‹å‹åœ¨ç¶²è·¯ä¸Šé€›ä¸€é€›å¾Œå°±æ’¿åˆ°ä¸€äº›æœ‰è¶£çš„ JavaScript æˆ– CSS å¯«æ³•ï¼Œæ¥è‘—å°±æœƒåˆ†äº«å‡ºä¾†è¨è«–å®ƒå€‘æ˜¯ç”¨äº†å“ªäº›æŠ€å·§ã€‚ç„¶è€Œå¥½å¥‡å¿ƒæœƒæ®ºæ­»è²“ï¼Œä¹Ÿæœƒæ®ºæ­»å‰ç«¯å·¥ç¨‹å¸«ï¼›ä»–å€‘é™¤äº†å–œæ­¡å»æ¢ç©¶é‚£äº›æ–°å¥‡çš„ç©æ„æ˜¯æ€éº¼åšåˆ°ä¹‹å¤–ï¼Œä¹Ÿå¯èƒ½æœƒåœ¨çœ‹åˆ°ä¸€å€‹æ•ˆæœå¾Œï¼Œå°±æ—¥ä»¥ç¹¼å¤œï¼Œè‡ªå·±å¾é ­æ‘¸ç´¢ä¾†åšå‡ºåŒæ¨£çš„æ•ˆæœã€‚</p>
<p>ç•¶ç„¶ä»–å€‘ä¹Ÿä¸æœƒåƒ…æ»¿è¶³æ–¼åšåˆ°åˆ¥äººå·²ç¶“åšå‡ºçš„æˆæœï¼Œé‚„æœƒè‡ªå·±å»ç ”ç©¶ W3C åˆ¶å®šçš„è¦æ ¼æˆ–æ˜¯å…¶å®ƒæŠ€è¡“çš„ç†è«–ï¼Œé€²ä¸€æ­¥æ‰“é€ å‡ºå‰æ‰€æœªè¦‹ã€ä»¤äººé©šè±”çš„æˆå“ï¼›æ‰€ä»¥ä½ å¯ä»¥èªªå¥½å¥‡å¿ƒå°±æ˜¯å‰ç«¯å·¥ç¨‹å¸«é€²æ­¥çš„åŸå‹•åŠ›ï¼Œå¦å‰‡åˆ°ä»Šå¤©æˆ‘å€‘å¯èƒ½é‚„æ˜¯åœ¨ã€Œé¦–é è£½ä½œç™¾å¯¶ç®±ã€è£¡æ‰¾ç¨‹å¼ç¢¼è¤‡è£½è²¼ä¸Šã€‚ä¸éç¾åœ¨æœ‰é€²æ­¥ä¸€é»ï¼Œå¤§å¤šæ•¸å‰ç«¯å·¥ç¨‹å¸«éƒ½å­¸æœƒåœ¨ <a href="https://codepen.io/">CodePen</a> æˆ–æ˜¯ <a href="https://jsbin.com/">JS Bin</a> æ‰¾ç¨‹å¼ç¢¼äº†ã€‚</p>
<h2 id="çµè«–">çµè«–</h2>
<p>å¥½å•¦ï¼Œæˆ‘é‚„æ˜¯è¦æ›å€‹å…æˆ°ç‰Œ (ä½ çœ‹æˆ‘é€£è©•è«–éƒ½ä¸çµ¦ä½ å¯«äº†) ï¼Œå¸Œæœ›å„ä½åˆ¥èªç‚ºé€™äº›ç‰¹è³ªå°±æ˜¯å…¨éƒ¨æˆ–æ˜¯çµ•å°ï¼›æ›´å¥½çš„æ–¹å¼æ˜¯ç›´æ¥å»è§€å¯Ÿå„ä½èº«é‚Šçš„å„ªç§€å‰ç«¯å·¥ç¨‹å¸«ï¼Œçœ‹çœ‹ä»–å€‘å¹³æ™‚åœ¨ç©äº›ä»€éº¼éŠæˆ²ï¼Œä¸å°ï¼Œæ˜¯æœ‰ä»€éº¼æ¨£çš„ç‰¹è³ªæ‰æœƒå¦‚æ­¤å—äººå°Šæ•¬ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>æˆ‘çš„ 2018 å¹´</title>
			<link>https://jaceju.net/my-2018/</link>
			<pubDate>Wed, 02 Jan 2019 01:01:30 +0800</pubDate>
			
			<guid>https://jaceju.net/my-2018/</guid>
			<description>åˆéäº†ä¸€å¹´äº†ï¼Œ 2018 å¹´åªåœ¨é€™å€‹éƒ¨è½æ ¼é›¶é›¶è½è½åœ°åŠ äº†å¹¾ç¯‡æ–‡ç« ï¼Œæ„Ÿè¦ºè‡ªå·±ä¼¼ä¹æ²’ä»€éº¼é•·é€²ã€‚æœ€è¿‘å¯«ä½œçš„æ©Ÿæœƒå¤§å¤šæ˜¯åœ¨å°ˆæ¡ˆçš„æ–‡ä»¶ä¸Šï¼Œå°æ–¼æŠ€è¡“çŸ¥è­˜çš„ç ”ç©¶èˆ‡è‡ªå·±</description>
			<content type="html"><![CDATA[<p>åˆéäº†ä¸€å¹´äº†ï¼Œ 2018 å¹´åªåœ¨é€™å€‹éƒ¨è½æ ¼é›¶é›¶è½è½åœ°åŠ äº†å¹¾ç¯‡æ–‡ç« ï¼Œæ„Ÿè¦ºè‡ªå·±ä¼¼ä¹æ²’ä»€éº¼é•·é€²ã€‚æœ€è¿‘å¯«ä½œçš„æ©Ÿæœƒå¤§å¤šæ˜¯åœ¨å°ˆæ¡ˆçš„æ–‡ä»¶ä¸Šï¼Œå°æ–¼æŠ€è¡“çŸ¥è­˜çš„ç ”ç©¶èˆ‡è‡ªå·±å…§å¿ƒçš„æ¢è¨è®Šå¾—è¶Šä¾†è¶Šå°‘ï¼Œæ‰€ä»¥æ‡‰è©²æ˜¯ä¾†å¯«ç¯‡å¿ƒå¾—æ„Ÿæƒ³çš„æ™‚å€™äº†ã€‚</p>
<p>è€å¯¦èªªåŸæœ¬æ‰“ç®—å¯«ç¯‡å¹´åº•å›é¡§ï¼Œä¸éæ•´ç†äº†ä¸€ä¸‹æ‰‹é‚Šçš„éš¨æ‰‹ç­†è¨˜å’Œå¹³å¸¸è¨˜åœ¨ Facebook ä¸Šçš„è³‡è¨Šå¾Œï¼Œç™¼ç¾æƒ³è¬›çš„æ±è¥¿å¤ªå¤šäº†ï¼Œå°±éš¨æ€§æƒ³åˆ°ä»€éº¼å¯«ä»€éº¼å§ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="2018-å¹´åšçš„äº‹">2018 å¹´åšçš„äº‹</h2>
<p>å…ˆç²—ç•¥åœ°è¨˜ä¸€ä¸‹æˆ‘åœ¨ 2018 å¹´åšçš„äº‹æƒ…ï¼š</p>
<ul>
<li>èŠ±äº†ä¸€å¹´è·ŸåŠŸèƒ½åœ˜éšŠå®Œæˆäº†ä¸€èµ·è½å°ˆæ¡ˆçš„æ–°åŠŸèƒ½ã€‚</li>
<li>å°‡åŸæœ‰æ’ç¨‹ç¨‹å¼æ”¹æˆåœ¨ Docker ä¸Šé‹è¡Œçš„ Daemon æœå‹™ï¼Œä»¥æ±‚æ›´å³æ™‚çš„åæ‡‰ã€‚</li>
<li>é–‹ç™¼è®“ Laravel å°ˆæ¡ˆèƒ½è·Ÿå…¬å¸è¨­å®šæª”ç³»çµ±æ›´æ˜“æ¥åˆçš„å¥—ä»¶ã€‚</li>
<li>å»ºç«‹å…§éƒ¨æœå‹™ä¸²æ¥ç³»çµ±ï¼Œå¢å¼·ä½ˆç½²å¾Œè‡ªå‹•åŒ–æ¸¬è©¦çš„æ©Ÿåˆ¶ã€‚</li>
<li>æ”¹è‰¯äº†æ•¸å€‹å…§éƒ¨ç”¨ç¨ç«‹å¥—ä»¶çš„æ¶æ§‹ï¼Œä½¿å…¶æ›´æ˜“æ“´å……ã€‚</li>
<li>ç‚ºå¤§éƒ¨ä»½å°ˆæ¡ˆè£œé½Šç¼ºå°‘çš„æ–‡ä»¶ã€‚</li>
<li>èˆ‰è¾¦äº†ç¨‹å¼ç¢¼ç ”ç¿’æœƒï¼Œå­¸ç¿’ä¸€äº›å€¼å¾—å€Ÿé‘‘çš„ç¨‹å¼æ¶æ§‹æˆ–å¯«æ³•ã€‚</li>
</ul>
<p>ä¸éå¦‚æœè¦æŠŠ 2018 å¹´çš„äº‹åšå€‹ç°¡å–®çš„æ–‡å­—ç¸½çµï¼Œé‚£æ‡‰è©²å°±æ˜¯ã€Œæ”¹å–„ã€ã€‚è€Œã€Œæ”¹å–„ã€ä¸å…‰åªåœ¨æŠ€è¡“å±¤é¢çš„è®ŠåŒ–ï¼ŒåŒæ™‚ä¹Ÿæœ‰æŒçºŒç¶­é‹çš„æ”¹è‰¯ï¼Œä»¥åŠæ€ç¶­è§€å¿µçš„èª¿æ•´ã€‚</p>
<p>æˆ‘å€‘åœ˜éšŠç¶“å¸¸åœ¨å¾®èª¿ç¨‹å¼æ¶æ§‹ï¼Œç›®çš„å°±æ˜¯å¸Œæœ›èƒ½å› æ‡‰ä¸æ–·è®ŠåŒ–çš„éœ€æ±‚ï¼Œè®“ç¨‹å¼å¯æ˜“æ–¼ç¶­è­·ã€‚é€™äº›èª¿æ•´ä¸åƒ…åªæ˜¯æ‡‰ç”¨ç¨‹å¼å±¤ç´šï¼Œä¹ŸåŒ…å«äº†åº•ä¸‹çš„è¼”åŠ©ç”¨å¥—ä»¶ã€‚æˆ‘å€‘æœƒèŠ±ä¸€äº›æ™‚é–“å»è¨è«–æ€éº¼è¨­è¨ˆæ¶æ§‹æ‰æœƒå¥½ç¶­è­·ã€ç¨‹å¼ä»‹é¢æ‰æœƒå¥½ç”¨ï¼›æœ€é‡è¦çš„ï¼Œæ˜¯è¦è®“åœ˜éšŠç†è§£æ¯å€‹è¨­è¨ˆæœƒæœ‰ä»€éº¼å„ªç¼ºé»ï¼Œè€Œä¸æœƒæ­¢æ–¼ã€Œæœƒå‹•å°±å¥½ã€çš„å¿ƒæ…‹ä¸Šã€‚é›–ç„¶å‰æœŸæŠ•è³‡äº†å¾ˆå¤šæ™‚é–“ï¼Œä½†äº‹å¯¦è­‰æ˜é€™äº›æ±ºå®šéƒ½å¹«æˆ‘å€‘ç¯€çœæ›´å¤šæ™‚é–“ã€‚</p>
<p>é™¤äº†è‡ªå·±æ‰‹é‚Šçš„å°ˆæ¡ˆå¤–ï¼Œè·Ÿå…¶ä»–éƒ¨é–€åˆä½œä¸Šçš„æ”¹å–„ä¹Ÿæ˜¯é‡é»ã€‚ç‚ºäº†è®“æˆ‘å€‘çš„å°ˆæ¡ˆä½ˆç½²ä¸Šç·šå¾Œï¼Œèƒ½å¤ é©…å‹•å¾ŒçºŒè®“ SQA èƒ½é€²è¡Œè‡ªå‹•åŒ–é©—è­‰çš„æ­¥é©Ÿï¼Œæˆ‘ä¹Ÿåšäº†å€‹ç°¡å–®çš„å…§éƒ¨æœå‹™ä¸²æ¥ç³»çµ±ã€‚é€™å€‹ç³»çµ±æ´»ç”¨äº†è¨±å¤š Laravel æä¾›çš„æ©Ÿåˆ¶ï¼Œä¹Ÿè®“æˆ‘é‡æ–°è¤‡ç¿’èˆ‡å­¸ç¿’ä¸å°‘å‰ç«¯é–‹ç™¼çš„æŠ€å·§ã€‚ç”±æ–¼ BDD ç›®å‰å·²ç¶“å…§åŒ–æˆæˆ‘é–‹ç™¼æ™‚çš„æµç¨‹äº†ï¼Œæ‰€ä»¥é€™å€‹å°ˆæ¡ˆåœ¨å¾Œç«¯ç¨‹å¼çš„éƒ¨ä»½æˆ‘ä¹Ÿæ˜¯ç”¨ BDD é–‹ç™¼ï¼›ä½†æ˜¯ BDD å·¥å…·çš„éƒ¨ä»½æˆ‘ä¸€ç›´ä¸å¤ªæ»¿æ„ï¼›åœ¨èŠ±äº†ä¸€äº›æ™‚é–“ç ”ç©¶å¾Œï¼Œçµ‚æ–¼è¢«æˆ‘æ‰¾åˆ°é‚„ä¸éŒ¯çš„æ–¹æ³•ã€‚</p>
<ul>
<li><a href="https://jaceju.net/behat-in-laravel/">åœ¨ Laravel ä¸­ä½¿ç”¨ Behat ä¾†åŠ å¼·æ¸¬è©¦çš„å¯è®€æ€§ - åŸºç¤ç¯‡</a></li>
<li><a href="https://jaceju.net/behat-in-laravel-advance/">åœ¨ Laravel ä¸­ä½¿ç”¨ Behat ä¾†åŠ å¼·æ¸¬è©¦çš„å¯è®€æ€§ - é€²éšç¯‡</a></li>
</ul>
<p>èªªçœŸçš„ï¼Œä¸ç®¡å“ªä¸€é …ã€Œæ”¹å–„ã€éƒ½å¾ˆèŠ±æ™‚é–“ï¼Œåªæ˜¯æˆ‘å€‘éƒ½æ˜¯æŠ“ç·Šä¸€äº›ç©ºé¤˜æ™‚é–“ä¾†åšæ”¹å–„ï¼›æˆ‘å€‘ä¸æ±‚ä¸€æ­¥åˆ°ä½ï¼Œè€Œæ˜¯ä¸€é»ä¸€é»åœ°ç´¯ç©ï¼›å› ç‚ºä»Šå¤©ä½ ä¸åšï¼Œæ˜å¤©ä½ å°±æœƒå¾Œæ‚”ã€‚</p>
<h2 id="é‚£äº›å°ç¨‹å¼é–‹ç™¼ä¸Šçš„é«”æ‚Ÿ">é‚£äº›å°ç¨‹å¼é–‹ç™¼ä¸Šçš„é«”æ‚Ÿ</h2>
<p>2018 å¹´æˆ‘å°ç¨‹å¼é–‹ç™¼æœ‰ä¸€äº›æ–°çš„é«”æ‚Ÿï¼Œé›–ç„¶å¤§éƒ¨ä»½éƒ½æ˜¯è»Ÿé«”ç•Œå¾ˆå¸¸è½åˆ°çš„è§€å¿µï¼Œä½†è‡ªå·±åœ¨å¯¦å‹™ä¸Šé«”æœƒä¹‹å¾Œåˆæ˜¯å¦ä¸€ç¨®ä¸ä¸€æ¨£çš„æ„Ÿå—ã€‚</p>
<h3 id="æ¶æ§‹">æ¶æ§‹</h3>
<p>æˆ‘å¸¸å¸¸å•è‡ªå·±ï¼šé™¤äº†æ¡†æ¶å¹«ä½ å®šç¾©å¥½çš„æ¶æ§‹å¤–ï¼Œä½ æœ‰è¾¦æ³•è¨­è¨ˆå‡ºèƒ½é©æ‡‰æ¥­å‹™é‚è¼¯è®ŠåŒ–çš„æ¶æ§‹å—ï¼Ÿ</p>
<p>æ¶æ§‹çš„å½ˆæ€§ä¸æ˜¯ä¿ç•™ä¸‹ä¾†çš„ï¼Œæ˜¯éš¨è‘—éœ€æ±‚èª¿æ•´å‡ºä¾†çš„ã€‚å¦‚æœä¸æ™‚å¸¸å¾éœ€æ±‚çš„æºé ­å¯©è¦–æ¶æ§‹çš„è¨­è¨ˆï¼Œè€Œä¸€ç›´é ­ç—›é†«é ­ã€è…³ç—›é†«è…³åœ° workaround ä¸‹å»ï¼Œè»Ÿé«”çš„è…æ•—å°‡æ˜¯å¯é æœŸçš„ã€‚å¦å¤–ç³»çµ±æ¶æ§‹æœ¬èº«ä¹Ÿè·Ÿç¨‹å¼æ¶æ§‹æœ‰å¯†åˆ‡é—œä¿‚ï¼Œå¾ˆå¤šæ™‚å€™ SRE æ¡ç”¨çš„æ–¹æ¡ˆä¹Ÿæœƒé–“æ¥åœ°å½±éŸ¿åˆ°æˆ‘å€‘æ€éº¼å»è¨­è¨ˆç¨‹å¼çš„æ¶æ§‹ã€‚æ‰€ä»¥è©²æ“”å¿ƒçš„ä¸æ˜¯éœ€æ±‚èˆ‡åº•å±¤ç³»çµ±çš„æ”¹è®Šï¼Œè€Œæ˜¯æ¶æ§‹çš„æ¨¡çµ„é–“æ²’æœ‰åšå¥½éš”é›¢æ‰€å°è‡´çš„æŠ½æ›å›°é›£ï¼›ç°¡å–®ä¾†èªªï¼Œå¦‚æœç„¡æ³•å¾æŸå€‹é»åˆ‡é–‹å¾Œï¼Œèª¿æ•´å…¶ä¸­ä¸€é‚Šè€Œä¸å½±éŸ¿æ•´å€‹æœå‹™ï¼Œé‚£å°±æ˜¯æœ‰å•é¡Œçš„æ¶æ§‹äº†ã€‚</p>
<p>æ‰€ä»¥èº«ç‚ºè¨­è¨ˆæ¶æ§‹çš„äººï¼Œå¿…é ˆå­¸æœƒå¾éœ€æ±‚ä¸­ç†å‡ºä¸€å€‹æ˜“æ‡‚çš„è¦å‰‡ï¼Œé€²è€Œèª¿æ•´å‡ºæ˜“æ–¼å¯¦ä½œèˆ‡æ“´å±•çš„æ¶æ§‹ï¼›è€Œä¸æ˜¯çœ‹åˆ°ä¸€å€‹æ–°éœ€æ±‚ï¼Œå°±åœ¨åŸå…ˆçš„æ¶æ§‹æ¨¹ä¸­é•·å‡ºä¸€å€‹é›œäº‚çš„åˆ†æ”¯ã€‚å°ˆæ¡ˆçš„èµ·é ­æ²’æœ‰å°‡æ¶æ§‹è¨­è¨ˆå¥½ï¼Œæœªä¾†æ”¹æ¶æ§‹æ‰€è¦èŠ±çš„å·¥çœŸçš„å¾ˆå¤§ï¼›å°¤å…¶ç•¶åŒäº‹å·²ç¶“ç…§è‘—é€™å€‹æ¶æ§‹å¯«å‡ºä¸å°‘æ–°åŠŸèƒ½çš„æ™‚å€™ï¼Œå¾—é‡é ­ç†è§£åŒäº‹çš„ç¨‹å¼ç¢¼ä¾†é‡æ§‹å®ƒå€‘ã€‚</p>
<h3 id="æ¸¬è©¦">æ¸¬è©¦</h3>
<p>ä¸å¾—ä¸èªªæˆ‘å€‘åœ˜éšŠå·²ç¶“æŠŠè‡ªå‹•åŒ–æ¸¬è©¦ (å¤§å¤šæ•¸æ˜¯å¾Œç«¯) åˆ—å…¥æ¨™æº–é–‹ç™¼æµç¨‹äº†ï¼Œè‡³æ–¼æ˜¯ä¸æ˜¯ç”¨åˆ¶å¼çš„ TDD æµç¨‹ä¾†é–‹ç™¼ä¸¦ä¸æ˜¯é‚£éº¼è¦æ±‚ï¼Œé‡é»åœ¨æ–¼æˆ‘å€‘å¯«çš„æ¸¬è©¦æœ‰æ²’æœ‰é©—è­‰åˆ°éœ€æ±‚æ‰€è¦çš„çµæœã€‚æ¯æ¬¡å¹«ä¼™ä¼´ code review æ™‚ï¼Œåªè¦çœ‹ä»–çš„ merge request æè¿°èˆ‡æ¸¬è©¦æ˜¯å¦ç¬¦åˆï¼Œå¤§è‡´ä¸Šå°±èƒ½ç¢ºå®šè©²æƒ…å¢ƒçš„ç¨‹å¼ç¢¼é‚è¼¯å°ä¸å°ã€‚</p>
<p>ç•¶ç„¶æ¸¬è©¦ä¹Ÿä¸æ˜¯è¬éˆä¸¹ï¼Œç¸½æ˜¯æœƒæœ‰äº›æƒ…å¢ƒä½ æ²’è€ƒæ…®åˆ°ã€‚æœ‰ä¸€æ¬¡æˆ‘ç™¼ç¾æŸå€‹ä¸»å°ˆæ¡ˆåœ¨æ›´æ–°äº†æŸå€‹å…§éƒ¨ç”¨å¥—ä»¶çš„æ–°ç‰ˆå¾Œï¼Œæ„å¤–çš„å°è‡´ç¨‹å¼åæ‡‰é€Ÿåº¦è®Šæ…¢ï¼›ä¸€é–‹å§‹ä»¥ç‚ºæ˜¯ç³»çµ±æ•ˆèƒ½ä¸å½°ï¼Œå¾Œä¾†è¿½ code è¿½äº†å…©å€‹å¤šå°æ™‚æ‰æ‰¾åˆ° bug æ‰€åœ¨ã€‚é€™å€‹å¥—ä»¶æœ‰æ–°èˆŠå…©å€‹é¡åˆ¥ï¼ŒèˆŠé¡åˆ¥æ˜¯é‡å° legacy project å¯«çš„ï¼Œæ–°é¡åˆ¥æ˜¯é‡å°æ–°å°ˆæ¡ˆå¯«çš„ã€‚è€Œé‡å°èˆŠç’°å¢ƒå¯«çš„é¡åˆ¥ï¼Œæ¸¬è©¦éï¼Œå®Œç¾ï¼›é‡å°æ–°ç’°å¢ƒå¯«çš„é¡åˆ¥ï¼Œä¹Ÿæ¸¬è©¦éï¼Œå®Œç¾ã€‚ä½†å•é¡Œå°±å‡ºåœ¨ä¸»å°ˆæ¡ˆåœ¨æŠŠå¥—ä»¶è£¡çš„å…©å€‹æ–°èˆŠé¡åˆ¥æ··åœ¨ä¸€èµ·ç”¨ï¼Œçµæœç™¼ç”Ÿè¡çªã€‚æ‰€ä»¥æˆ‘å¾—åˆ°ä¸€å€‹å¿ƒå¾—ï¼šå°±ç®—å–®å…ƒæ¸¬è©¦é€šéï¼Œä¹Ÿæ°¸é ä¸è¦é è¨­åˆ¥äººæœƒæ€éº¼ç”¨ä½ å¯«çš„ç¨‹å¼ã€‚</p>
<h3 id="bug">Bug</h3>
<p>åœ¨ä¸€èµ·è½æ–°åŠŸèƒ½ä¸Šç·šçš„é€™é™£å­ï¼Œæˆ‘å€‘å¾ˆå¸¸é‡åˆ°ä¸€äº›åªæœ‰åœ¨ä¸Šç·šç’°å¢ƒæ‰æœƒé‡åˆ°çš„ bug ï¼Œé€™æ™‚å€™æ‰é«”æœƒåˆ°ä»€éº¼æ˜¯ï¼šã€Œ Log åˆ° debug æ™‚æ–¹æ¨å°‘ã€ã€‚åƒ 2018 å¹´æœ€å¾Œä¸€å€‹ä¸Šç­æ—¥ï¼Œæˆ‘å€‘å°±å¾ log ä¸­æ‰¾åˆ°æŸå€‹ bug çš„æˆå› ï¼›ä¼™ä¼´ä¹Ÿé‡æ–° review ç¨‹å¼ç¢¼è£¡ç›¸é—œçš„é‚è¼¯ï¼Œçµ‚æ–¼åœ¨æ”¾å‡å‰æŠŠ bug çµ¦è§£æ±ºäº†ã€‚</p>
<p>Bug è·Ÿæ¸¬è©¦ä¹Ÿæ˜¯æ¯æ¯ç›¸é—œï¼Œæˆ‘å€‘åœ¨è§£ä¸€äº›åªèƒ½åœ¨ä¸Šç·šç’°å¢ƒé‡ç¾çš„ bug æ™‚ï¼Œæœƒè¬›æ±‚ä»¥ä¸‹åŸå‰‡ï¼š</p>
<blockquote>
<p>å…ˆæ±‚ä¸å‚·èº«é«” (ä¸ç ´å£åŸæœ‰åŠŸèƒ½) ï¼Œå†è¬›æ±‚è—¥æ•ˆ (çœŸçš„æœ‰è§£æ±ºå•é¡Œ) ã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯ç„¡è«–å¦‚ä½•ï¼Œæˆ‘å€‘æ‰€åšçš„ä»»ä½•ä¿®æ­£éƒ½ä¸å¯ä»¥è®“åŸæœ‰çš„æ¸¬è©¦å¤±æ•—ï¼›æ›å¥è©±èªªï¼ŒåŸæœ‰çš„åŠŸèƒ½ä¸å¯ä»¥æ²’æœ‰æ¸¬è©¦ï¼æ²’å¯«æ¸¬è©¦çš„ç¨‹å¼ debug èµ·ä¾†å°±åƒã€Šé†‰å¾Œå¤§ä¸ˆå¤«ã€‹ä¸­çš„åŠ‡æƒ…ï¼šéš”å¤©ä¾†ä¸Šç­çš„ä½ åªèƒ½å¾ log è£¡çš„è››çµ²é¦¬è·¡ä¸­å»ä¸€ä¸€å›æƒ³ä½ æ˜¨æ™šä¸‹ç­å‰åˆ°åº•åšäº†ä»€éº¼æ‰å°è‡´é€™å€‹ bug ï¼Œå› ç‚ºåŸæœ‰çš„ç¨‹å¼ç¢¼é‚è¼¯å·²ç¶“ä¸æ˜¯ä½ é æœŸä¸­çš„é‚£æ¨£äº†ã€‚</p>
<p>é‚„æœ‰å°±æ˜¯åˆ¥å¹¹è ¢äº‹ã€‚æœ‰æ¬¡ QA åæ‡‰äº†ä¸€å€‹ bug ï¼Œè½èµ·ä¾†æ˜¯å¾Œç«¯é€™é‚Šçš„å•é¡Œï¼›æ‰€ä»¥ PM å°±å•æˆ‘å€‘æ€éº¼å›äº‹ï¼Œæˆ‘å°±æƒ³é€™ä¸Šæ¬¡ä¸æ˜¯ä¿®æ­£äº†å—ï¼Ÿçµæœä¸€æŸ¥ï¼Œæœ‰äººå¹¹äº†è ¢äº‹äº† (å°±æ˜¯æˆ‘) ã€‚å¾Œä¾†é–‹æœƒæ™‚æˆ‘æŠŠä¿®æ­£çš„æ–¹å¼å‘ŠçŸ¥äº† PM å¾Œï¼š</p>
<p>ã€Œè½èµ·ä¾†ä¿®æ­£å¾Œçš„é‚è¼¯æ‡‰è©²æ²’å•é¡Œå‘€ï¼Ÿã€</p>
<p>ã€Œå—¯ï¼Œå•é¡Œæ˜¯å®ƒä¸€ç›´èººåœ¨æ¸¬è©¦ç’°å¢ƒæ²’ä¸Šç·šã€‚ã€</p>
<h3 id="æ–‡ä»¶">æ–‡ä»¶</h3>
<p>2018 å¹´ä¹Ÿä¸æ™‚åœ°åœ¨é‚„æŠ€è¡“å‚µï¼Œå…¶ä¸­ä¸€é …å°±æ˜¯æ–‡ä»¶ã€‚å…¶å¯¦åœ¨å¯«æ–‡ä»¶çš„éç¨‹ä¸­ï¼ŒåŒæ™‚ä¹Ÿæ˜¯åœ¨æª¢è¨è‡ªå·±éå¾€é‚£äº›ä¸æˆç†Ÿçš„æ€ç¶­ã€‚ç•¶åˆå¯èƒ½æ˜¯å› ç‚ºå°ˆæ¡ˆè¶•æ™‚é–“ï¼Œå¯èƒ½æ˜¯å› ç‚ºé‚è¼¯ä¸å¤ åš´è¬¹ï¼›å¯èƒ½æ˜¯å› ç‚ºæƒ³èªªå£é ­äº¤æ¥ä¸€ä¸‹å°±å¥½ï¼Œå¯èƒ½æ˜¯å› ç‚ºç•¶åˆæ²’æƒ³éé€™ç©æ„æœƒè®Šæˆå¤§å®¶éƒ½è¦ç”¨çš„æ±è¥¿ã€‚ä½†ç„¡è«–å¦‚ä½•ï¼Œå¦‚æœä¸èƒ½ç•™é»æ±è¥¿ä¾†è®“åˆ¥äººç­è§£è‡ªå·±åšçš„æ˜¯ä»€éº¼ï¼Œé‚£ä½ çš„æˆæœåˆ°å¾Œé¢å°±è®Šå¾—è·Ÿåƒåœ¾æ²’ä»€éº¼å…©æ¨£äº†ã€‚</p>
<p>åªè¦æ˜¯ä¸€å®¶å…¬å¸ï¼Œäººéƒ½æœƒä¾†ä¾†å»å»ï¼Œåœ¨å…¬å¸è£¡ä»»ä½•æ´»è‘—çš„ç¨‹å¼ä¸å¯èƒ½åªé ä¸€å€‹äººä¾†å»¶çºŒå®ƒçš„ç”Ÿå‘½ã€‚ç¨‹å¼é–‹ç™¼æœ¬ä¾†å°±ä¸æ˜¯æˆ‘åšä¸€åŠä½ å°±èƒ½é¦¬ä¸Šæ¥æ‰‹ç¹¼çºŒçš„äº‹ï¼Œå…¶ä¸­çš„è„ˆçµ¡å¦‚æœå‰äººæ²’æœ‰ä¿ç•™ä¸‹ä¾† (è¨»è§£ã€æ–‡ä»¶ã€æ¸¬è©¦) ï¼Œé‚£éº¼æˆ‘å€‘å°±å¾—èŠ±æ™‚é–“å¾é ­çœ‹ç¨‹å¼ç¢¼ï¼›è€Œä¸”å°±ç®—çœ‹å®Œæ‰€æœ‰ç¨‹å¼ç¢¼ï¼Œä¹Ÿä¸èƒ½ä¿è­‰å°±èƒ½ç†è§£ç•¶åˆç‚ºä»€éº¼è¦é€™æ¨£å¯«ã€‚</p>
<p>æ°¸é ä¸è¦ç›¸ä¿¡ä¸Šæ˜ŸæœŸäº”çš„è‡ªå·±æœ‰ç•™ä¸‹å®Œç¾ä½†æœªå®Œæˆçš„ç¨‹å¼ç¢¼çµ¦æ˜ŸæœŸä¸€çš„è‡ªå·±ã€‚ç¨‹å¼ä¹‹ç¥å¯ä»¥ä¿è­‰ç•¶ä½ éäº†å€‹å¿«æ¨‚çš„é€±æœ«å¾Œï¼Œä¸€å®šæœƒå¿˜äº†ä½ ä¸Šå€‹æ˜ŸæœŸå¯«äº†ä»€éº¼ç©æ„ã€‚æ‰€ä»¥å°±ç®—åªæ˜¯å¯«çµ¦è‡ªå·±çœ‹çš„è¨»è§£ï¼Œä¹Ÿè¦è¨˜å¾—å¯«ä¸‹ç•¶åˆç‚ºä»€éº¼è¦å¯«é€™äº›ç¨‹å¼ç¢¼ã€‚</p>
<p>å¦‚æœæœ‰å¯«æ™‚é–“å¯«æ–‡ä»¶ï¼Œé‚£éº¼æ–‡ä»¶åˆ°åº•è¦å¯«äº›ä»€éº¼å‘¢ï¼Ÿå¯ä»¥å›æƒ³ä¸€ä¸‹ä½ å¾é ­æ‰“é€ é€™å€‹å°ˆæ¡ˆæ™‚çš„æ­·ç¨‹ï¼Œæœ‰å“ªäº›è©²æ³¨æ„çš„åœ°æ–¹ï¼Œæœ‰å“ªäº›è©²é€£çµ¡çš„äººï¼›é€™äº›æ‘¸ç´¢çš„è·¯å¾‘ï¼Œé€™å°±æœƒæ˜¯ä½ æ–°å°ˆæ¡ˆçš„æ–‡ä»¶å¤§ç¶±ã€‚ç„¶å¾Œèª¿æ•´å¿ƒå¢ƒï¼ŒæŠ±æŒè‘—ä»¥å¾€è‡ªå·±æ¥æ‰‹å‰äººå°ˆæ¡ˆæ™‚çš„å¿ƒæƒ…ä¾†å¯«ï¼Œæ‰ä¸æœƒè¦ºå¾—å¯«æ–‡ä»¶æ˜¯ä»¶æµªè²»æ™‚é–“çš„äº‹ï¼Œå› ç‚ºæˆ‘å€‘å¯ä»¥å¹«æœªä¾†çš„è‡ªå·±æ´»å¾—æ›´è¼•é¬†ã€‚</p>
<p>é‚£çœŸçš„æ²’æ™‚é–“å¯«æ–‡ä»¶æ€éº¼è¾¦ï¼Ÿè€Œä¸”é€™æ™‚å€™ TDD å°±èƒ½æ´¾ä¸Šç”¨å ´äº†ï¼Œé‚£äº›é‡å°æƒ…å¢ƒæ‰€å¯«çš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œæ­£å¥½å¯ä»¥å”åŠ©æˆ‘å€‘å›æ†¶é€™äº›ç¨‹å¼ç¢¼çš„é‚è¼¯ã€‚å°±ç®—ç”¨æ²’æ™‚é–“é€™å€‹è—‰å£ä¸å¯«æ–‡ä»¶ï¼Œæ¸¬è©¦æ¡ˆä¾‹å¤šå°‘ä¹Ÿèƒ½ç®—æ˜¯æˆ‘å€‘åœ¨é€™å€‹å°ˆæ¡ˆä¸Šå°æ–‡ä»¶çš„æ™æ‰ã€‚</p>
<p>ä»Šå¤©çš„ä½ ï¼Œä¹Ÿè¨±å¯ä»¥å¹«ä¸‰å¤©å¾Œçš„è‡ªå·±æˆ–æ¥æ‰‹ä½ ç¨‹å¼çš„äººå¤šåšé»ä»€éº¼ã€‚</p>
<h2 id="éƒ¨é–€çš„ä¼™ä¼´å€‘">éƒ¨é–€çš„ä¼™ä¼´å€‘</h2>
<p>å¿…é ˆèªªï¼Œæˆ‘ä¸€ç›´å¾ˆæ…¶å¹¸æˆ‘èº«è™•çš„éƒ¨é–€æ˜¯ä¸€å€‹å¾ˆæ£’çš„æŠ€è¡“åœ˜éšŠï¼›é›–ç„¶æˆ‘åœ¨éƒ¨é–€è£¡æ‰®æ¼”çš„è§’è‰²æ˜¯ä»£ç† leader ï¼Œä½†ç¾åœ¨æˆ‘å€‘å°éšŠæˆå“¡å·²ç¶“å¯ä»¥æ¥åˆ°ä»»å‹™å¾Œè‡ªå‹•å‹•èµ·ä¾†äº†ï¼Œè©²åšä»€éº¼éƒ½å¾ˆæ¸…æ¥šï¼Œä¸éœ€è¦æˆ‘ä»‹å…¥å¤ªå¤šï¼›è€Œä¸”é‡åˆ°å•é¡Œæœƒè‡ªå‹•è‡ªç™¼åœ°æ‰¾å¤§å®¶ä¸€èµ·è¨è«–ä¾†ä¸€èµ·æƒ³è¾¦æ³•è§£æ±ºï¼Œè€Œä¸å†æ˜¯åŸ‹é ­è‡ªå¹¹ã€‚äº‹å¯¦ä¸Šï¼Œæˆ‘ä¸€ç›´è¦ºå¾—æˆ‘å€‘éƒ¨é–€çš„ä¼™ä¼´å€‘æœ‰å¹¾å€‹ä¸éŒ¯çš„ç‰¹è³ªã€‚</p>
<h3 id="ç†è§£è‡ªå·±æ‰“ç®—è¦åšçš„">ç†è§£è‡ªå·±æ‰“ç®—è¦åšçš„</h3>
<p>æ¯æ¬¡æ”¶åˆ°éœ€æ±‚ï¼Œæˆ‘å€‘ä¸æœƒå¤ªæ—©è·³å…¥ç´°ç¯€ï¼Œè€Œæ˜¯å…ˆä»”ç´°è¨è«–å®ƒçš„åˆç†æ€§ä»¥åŠå½±éŸ¿ç¯„åœï¼›å¤šæ•¸æ™‚å€™æˆ‘å€‘å¯ä»¥èŠ±æ¯”è¼ƒå°‘çš„åŠ›æ°£å»å®Œæˆéœ€æ±‚ï¼Œè€Œä¸æœƒå› ç‚ºéœ€æ±‚çš„ä¸ç¢ºå®šæ€§è€Œæ”¹ä¾†æ”¹å» (ç•¶ç„¶é‚„æ˜¯æœ‰æ©Ÿæœƒç™¼ç”Ÿä¿®æ”¹) ã€‚</p>
<p>åƒæˆ‘çš„ä¼™ä¼´å¸¸æœƒå…ˆæŠŠä»–å°éœ€æ±‚çš„ç†è§£åšå€‹æ•´ç†ï¼Œç„¶å¾Œé™„ä¸Šä»–èªç‚ºå¯è¡Œçš„è§£æ±ºæ–¹æ¡ˆï¼Œæœ€å¾Œè«‹æ•´å€‹æŠ€è¡“éƒ¨é–€ä¸€èµ·å¯©è¦–èˆ‡è¨è«–ã€‚æˆ‘çš„ä¼™ä¼´å€‘å°±æ˜¯å¯ä»¥é€™éº¼ç”¨å¿ƒçœ‹å¾…æ¯é …äº¤äºˆä»–å€‘çš„ä»»å‹™ï¼Œé€™å°±æ˜¯é€™å€‹åœ˜éšŠè®“æˆ‘å¾ˆå®‰å¿ƒçš„åŸå› ã€‚</p>
<h3 id="æŒçºŒæ”¹å–„å·²ç¶“åšéçš„">æŒçºŒæ”¹å–„å·²ç¶“åšéçš„</h3>
<p>æˆ‘çš„ä¼™ä¼´å€‘å¾ˆæ£’çš„ä¸€é»å°±æ˜¯ä¸æœƒæ»¿è¶³æ–¼ç¾åœ¨èƒ½å‹•çš„ç¨‹å¼ç¢¼ï¼Œä»–å€‘æœƒåœ¨æ¸¬è©¦çš„ä¿éšœä¸­å»å°‹æ‰¾æ›´æ˜“ç¶­è­·çš„æ–¹æ³•ä¾†æ”¹å–„ç¨‹å¼ç¢¼ã€‚æ”¹å–„çš„æ™‚æ©Ÿä¸é™æ–¼ç¨‹å¼ä¸Šç·šï¼Œä¹Ÿæœƒåœ¨é–‹ç™¼ä¸­ã€ code review æ™‚æ‰¾æ™‚é–“åšã€‚</p>
<p>ç•¶é‡åˆ°éœ€æ±‚èˆ‡ç¾åœ¨æ¶æ§‹è¡çªçš„ç‹€æ³æ™‚ï¼Œä»–å€‘å°±æœƒç«‹åˆ»æ€è€ƒä¸¦è¨è«–ç¾åœ¨æ¶æ§‹çš„ç¼ºé»ï¼Œé€²è€Œæå‡ºæ”¹å–„çš„æ–¹æ¡ˆã€‚æ¥è‘—å°±æœƒè·Ÿ TPM å•†è­°ä¸¦å®‰æ’æ™‚é–“ä¾†é€²è¡Œï¼Œå®Œå…¨æ²’æœ‰ã€Œé€™é‚Š workaround å°±å¥½ã€çš„æƒ³æ³•ã€‚</p>
<h3 id="ä¸ä¾·é™åœ¨éœ€æ±‚æƒ³åšçš„">ä¸ä¾·é™åœ¨éœ€æ±‚æƒ³åšçš„</h3>
<p>æˆ‘å€‘æœ‰æ™‚æœƒåšä¸€äº›å”åŠ©é–‹ç™¼çš„å°å·¥å…·ä¾†è®“åœ˜éšŠä½¿ç”¨ï¼Œè€Œä¸æ˜¯éœ€æ±‚è¦ä»€éº¼æˆ‘å€‘å°±åªåšä»€éº¼ã€‚ä¹çœ‹ä¹‹ä¸‹æˆ‘å€‘èŠ±äº†å¾ˆå¤šæ™‚é–“ï¼Œä½†æ•´é«”ä¾†èªªåœ˜éšŠæœƒç¯€çœè¨±å¤šæ™‚é–“ã€‚</p>
<p>åƒæ˜¯åœ¨åšä¸€èµ·è½æ–°åŠŸèƒ½æ™‚ï¼Œæˆ‘åŸæœ¬æ‰“ç®—è‡ªå¹¹ä¸€å€‹æä¾›çµ¦ client team æ¸¬è©¦ç”¨çš„å°å·¥å…·ï¼›æ²’æƒ³åˆ°å‰ç«¯åŒäº‹ä¸»å‹•å¹«å¿™ï¼Œæ‰ä¸€ä¸‹åˆå°±åšå‡ºè¶…ä¹æˆ‘æƒ³åƒçš„ä»‹é¢äº†ï¼Œè€Œä¸”é€™é‚„åŒ…æ‹¬äº†ä»–ç ”ç©¶äº†æŸå€‹ UI framework çš„æ™‚é–“ï¼</p>
<h3 id="å‹‡æ–¼æŒ‘æˆ°å¾æ²’åšéçš„">å‹‡æ–¼æŒ‘æˆ°å¾æ²’åšéçš„</h3>
<p>æ›¾ç¶“æœ‰å€‹éœ€æ±‚è¦ç”¨åˆ°ä¸€å€‹æˆ‘å€‘ä¸ç†Ÿæ‚‰çš„æŠ€è¡“ï¼Œä½†æˆ‘çš„ä¼™ä¼´å€‘å¾ç ”ç©¶ã€è¨è«–ã€è£½è¨‚è¦æ ¼åˆ°å¯¦ä½œå®Œæˆä¸¦ä¸Šç·šï¼Œå‰å¾ŒåªèŠ±äº†å…©å€‹æ˜ŸæœŸçš„æ™‚é–“ï¼Œè€Œä¸”å“è³ªä¹Ÿå¥½åˆ°æ²’è©±èªªï¼Œç”±æ­¤å°±èƒ½çŸ¥é“ä»–å€‘çœŸçš„å¾ˆç”¨å¿ƒåœ¨é¢å°è‡ªå·±çš„æŒ‘æˆ°ï¼›é€™èƒŒå¾Œä¸è«–æ˜¯ä»–å€‘å …å¼·çš„å¯¦åŠ›æˆ–æ˜¯æ•¢æ–¼å†’éšªçš„å¿ƒæ…‹ï¼Œéƒ½å†å†å‘ˆç¾å‡ºé€™æ˜¯å€‹èƒ½ç¨ç•¶ä¸€é¢çš„åœ˜éšŠï¼Œå«æˆ‘æ€èƒ½ä¸æ„›ä»–å€‘å‘¢ï¼Ÿâ€¬</p>
<p>â€ªç„¶è€Œæˆ‘ä¹Ÿä¸æ˜¯æŠŠå·¥ä½œä¸€è‚¡è…¦å¡çµ¦ä¼™ä¼´ï¼Œä»¥ä¸‹éƒ½æ˜¯æˆ‘ä¸€ç›´å˜—è©¦å»åšçš„æ–¹å‘ï¼š</p>
<ol>
<li>è¦å…ˆç­è§£ä¼™ä¼´å€‘æ˜¯å¦æœ‰èˆˆè¶£èˆ‡æ™‚é–“ç ”ç©¶æ›´æ·±å…¥çš„æŠ€è¡“ã€‚</li>
<li>äº¤æ¥ä¸è—ç§ï¼Œä»»ä½•è‡ªå·±æƒ³éçš„ï¼Œç ”ç©¶éçš„éƒ½å„˜å¯èƒ½äº¤ä»£ã€‚</li>
<li>äº¤æ¥æ™‚ä¹Ÿå¯è½å–ä¼™ä¼´å€‘çš„æƒ³æ³•ï¼Œæ‰¾å‡ºè‡ªå·±çš„ç›²é»ã€‚</li>
<li>ä¼™ä¼´æƒ³æ€éº¼åšç”±ä»–ï¼Œä½†è¦è®“ä¼™ä¼´ç­è§£å„ªå…ˆåºã€‚</li>
<li>ç›¸ä¿¡ä¼™ä¼´èƒ½åšå¥½ï¼Œå°‘å¹²é ã€‚</li>
</ol>
<p>å…¶å¯¦å‡èšä¼™ä¼´çš„å‘å¿ƒåŠ›é æ¯”å­¸ç¿’æŠ€è¡“é‚„è¦é›£ï¼Œç•¶ä½ èº«è™•ä¸€å€‹å„ªç§€çš„åœ˜éšŠå¾Œï¼Œå°±å®Œå…¨ä¸æœƒæƒ³é›¢é–‹å®ƒäº†ï¼›é€™å¤§æ¦‚æ˜¯æˆ‘é€² KKBOX ä¹‹å¾Œï¼Œæœ€å¤§çš„æ”¶ç©«ä¹‹ä¸€å§ã€‚</p>
<h2 id="ä¸€å€‹çœŸæ­£çš„åœ˜éšŠ">ä¸€å€‹çœŸæ­£çš„åœ˜éšŠ</h2>
<p>æ¯æ¬¡çœ‹åˆ°åŒäº‹å€‘åœ¨è¨è«–æŠ€è¡“æˆ–æ˜¯è§£æ±ºæœå‹™ä¸Šçš„å•é¡Œæ™‚ï¼Œå°±æœƒæ·±æ·±è¦ºå¾—è‡ªå·±çœŸçš„åªæ˜¯å€‹èƒ½åŠ›æœ‰é™çš„å°èºçµ²ï¼›å¦‚æœæ²’æœ‰èº«é‚ŠåŠå…¶ä»–éƒ¨é–€åŒäº‹å€‘çš„å¹«åŠ©ï¼Œè€Œæ˜¯åƒä»¥å‰ä¸€æ¨£è‡ªå·±ä¸€å€‹äººå¾è»Ÿé«”æ¶æ§‹è¨­è¨ˆã€å‰å¾Œç«¯ç¨‹å¼é–‹ç™¼åˆ°åº•å±¤æœå‹™å»ºç½®ä¸€æ¢é¾åšå®Œï¼Œæ‰€è¦èŠ±è²»çš„æ™‚é–“å’Œç²¾åŠ›ä¸çŸ¥é“æœ‰å¤šå°‘ã€‚</p>
<p>2018 å¹´èŠ±äº†ä¸€äº›æ™‚é–“è¨˜éŒ„äº†ä¸€äº›è·Ÿåœ˜éšŠæœ‰é—œçš„é»é»æ»´æ»´ã€‚</p>
<h3 id="è®“åœ˜éšŠç¶­æŒç†±æƒ…">è®“åœ˜éšŠç¶­æŒç†±æƒ…</h3>
<p>æœ‰æ™‚å·¥ç¨‹å¸«æå‡ºåŠŸèƒ½é€æ­¥ä¸Šç·šçš„å»ºè­°å»å¾ˆå°‘è¢«æ¡ç´ï¼Œå¸¸å¸¸æ˜¯åšå®Œä¸€å¤§åŒ…å¾Œæ‰ä¸Šç·šï¼›é€™ä¸åƒ…åƒ…æ˜¯æ› æ—¥è²»æ™‚ï¼Œè€Œä¸”å¸¸å¸¸æœƒå› ç‚ºå¸‚å ´çš„è®ŠåŒ–ä½¿å¾—é€™äº›åŠªåŠ›ç™½è²»ã€‚é€™æ¨£ä¸€ä¾†åªæœƒæ‰“æ“Šæ•´å€‹åœ˜éšŠçš„å£«æ°£ï¼Œè®“åœ˜éšŠæ¼¸æ¼¸å°ç”¢å“å¤±å»ç†±æƒ…ã€‚</p>
<p>æŸåŒäº‹æ›¾ç¶“èªªéï¼šã€Œæˆ‘å€‘ä¸æ˜¯æ²’æœ‰ Agile ç²¾ç¥ï¼Œæˆ‘å€‘æ˜¯æ²’æœ‰ç²¾ç¥ã€‚ã€</p>
<p>å…¶å¯¦ä¸ç®¡æœ‰æ²’æœ‰ Agile ï¼Œåœ˜éšŠéœ€è¦çš„æ˜¯å°æ–¼å·¥ä½œçš„ç†±æƒ…ï¼Œå°æ–¼ç”¢å“çš„ç†±æƒ…ã€‚è€Œé€™æ¨£çš„ç†±æƒ…ï¼Œå¿…é ˆå¾ä¸Šè€Œä¸‹åœ°å‚³é”ï¼Œè®“åœ˜éšŠæˆå“¡æ˜ç™½è‡ªå·±çš„åŠªåŠ›æˆæœæ˜¯æœ‰æ©Ÿæœƒè¢«ä½¿ç”¨è€…çœ‹è¦‹çš„ã€‚</p>
<blockquote>
<p>è¦å½¢æˆå„ªç§€çš„ç”¢å“ï¼Œåˆ¥åªåšåšæ•æ·çš„å½¢ï¼Œå»æ²’æœ‰è²«å¾¹æ•æ·çš„æ„ã€‚</p>
</blockquote>
<p>é‚£éº¼å¦‚æœåœ˜éšŠæœ‰çš„æ˜¯ç†±æƒ…ï¼Œå»ä¸çŸ¥é“è©²æ€éº¼åšæ™‚æ€éº¼è¾¦ï¼Ÿå°±åšçµ¦ä»–å€‘çœ‹å‘€ï¼Œé¡˜æ„æˆé•·çš„äººå°±æœƒåšå¾—æ¯”ä½ æ›´å¥½ã€‚åœ¨åœ˜éšŠè£¡æˆ‘ä¸æ˜¯æœ€å²å®³çš„ä¸€å€‹ï¼Œä½†æˆ‘æœƒå„˜å¯èƒ½æŠŠåŸºç¤å»ºè¨­åšå¥½ï¼Œè®“å¤§å®¶çŸ¥é“æ€éº¼å»æ‰“å¥½æ ¹åŸºï¼Œä¸¦è¨­è¨ˆå‡ºæ›´æ£’çš„æ¶æ§‹ã€‚æˆ–è¨±æˆ‘å€‘å¯ä»¥ç”¨é«˜é¡çš„è–ªè³‡å¸å¼•åˆ°å„ªç§€çš„äººæï¼Œä½†å»ä¸è¦‹å¾—èƒ½å‰µé€ å‡ºå„ªç§€çš„åœ˜éšŠã€‚åªæœ‰ä¿¡ä»»åŠä»¥èº«ä½œå‰‡æ‰èƒ½è®“åœ˜éšŠæˆå“¡é¡˜æ„æ›´ç©æ¥µåœ°å»å±•ç¾è‡ªå·±çš„è‡ªä¸»æ€§ï¼Œå› ç‚ºä»–å€‘çŸ¥é“è‡ªå·±çš„èƒŒå¾Œæœ‰å…¶ä»–ä¼™ä¼´å¯ä»¥ä¿¡è³´ï¼</p>
<h3 id="çœ‹å¾—è¦‹çš„æœƒè­°å…±è­˜">çœ‹å¾—è¦‹çš„æœƒè­°å…±è­˜</h3>
<p>å¶çˆ¾åœ¨é–‹æœƒæ™‚ï¼Œæœƒçœ‹åˆ°æœ‰äººè¬›å®Œç°¡å ±å¾Œï¼Œå°±è¦å¤§å®¶é–‹å§‹è¨è«–ï¼›ä½†è€å¯¦èªªé€™ç¨®æœƒè­°å¾ˆé›£é”æˆå…±è­˜ï¼Œè€Œä¸€å€‹æ²’æœ‰å…±è­˜çš„æœƒè­°åªæ˜¯æµªè²»å¤§å®¶çš„æ™‚é–“ã€‚é‚£éº¼è©²æ€éº¼è®“å¤§å®¶æœ‰å…±è­˜ï¼Ÿæ–¹å‘å¾ˆç°¡å–®ï¼šå‰µé€ è®“å¤§å®¶èƒ½æå‡ºè‡ªå·±çœ‹æ³•çš„æ©Ÿæœƒï¼ŒåŒæ™‚ä¹Ÿè®“æ¯å€‹äººéƒ½çœ‹åˆ°å½¼æ­¤çš„çœ‹æ³•ã€‚</p>
<p>æ›¾ç¶“åœ¨å¹´åˆçµ„ç¹”çš„åŠŸèƒ½åœ˜éšŠè£¡ï¼Œé‡åˆ°ä¸€å€‹æŠ€è¡“å•é¡Œéœ€è¦è¨è«–ï¼›é€™æ™‚æˆ‘è©¦è‘—åˆ©ç”¨ç™½æ¿åŠ ä¸Šæ–‡ä»¶çš„æŠ•å½±ï¼Œè®“å¤§å®¶å°å¯¦ä½œç´°ç¯€ã€å•é¡Œé‡‹ç–‘é‚„æœ‰è¦æ ¼çš„ç¢ºèªéƒ½æœ‰äº†å…±è­˜ï¼Œçµæœé€™å€‹æ–¹æ³•è®“æ•´å€‹åœ˜éšŠåœ¨ä¸€å€‹å°æ™‚æœƒè­°ä¸­æå®šäº†ä¸‰å€‹å•é¡Œã€‚äº‹å¾Œåœ¨æª¢è¨æœƒè­°ä¸Šï¼Œåœ˜éšŠè£¡è² è²¬å¯¦ä½œ client çš„æˆå“¡ä¹Ÿå°é€™å€‹æ–¹æ³•éå¸¸è®šè³ã€‚</p>
<p>æˆ‘å€‹äººç”¨çš„æ–¹å¼ä¸¦æ²’æœ‰åƒè€ƒå“ªä¸€ç¨®æ–¹æ³•è«–ï¼Œæˆ‘åªæ˜¯æ€è€ƒäº†ä¸€ä¸‹æ€éº¼åœ¨ç™½æ¿ä¸Šå‚³é”å¤§å®¶çš„çœ‹æ³•æ¯”è¼ƒåˆé©ã€‚ä½†æˆ‘å€‹äººé‚„æ˜¯å»ºè­°å­¸ç¿’ä¸€äº›ç›¸é—œçš„çŸ¥è­˜ï¼Œä¾‹å¦‚ã€Œçœ‹æ¿æ–¹æ³•ã€æˆ–æ˜¯åƒè€ƒåƒæ˜¯ã€Šå¼•å°è€…çš„å·¥å…·ç®±ã€‹é€™é¡æ›¸ç±è£¡çš„æŠ€å·§ï¼›ç•¶ç„¶ï¼Œä¹Ÿè¦å­¸è‘—æ´»ç”¨é€™äº›æŠ€å·§ï¼Œè€Œä¸æ˜¯ç…§æœ¬å®£ç§‘åœ°å»åšã€‚</p>
<h3 id="é¢å°è®ŠåŒ–">é¢å°è®ŠåŒ–</h3>
<p>æèµ·è»Ÿé«”ç•Œçš„éœ€æ±‚æ”¹è®Šï¼Œæˆ‘æƒ³å¤§æ¦‚å¯ä»¥å›æƒ³ä¸€ä¸‹äºŒå¸«å…„æ‰€è¬›éçš„ä¸€äº›è©±ã€‚</p>
<p>å‰å¤©ä»–èªªï¼šã€Œå¾æ•¸æ“šä¾†çœ‹ï¼Œæˆ‘å€‘çš„ç”¢å“ç•«é¢æ‡‰è©²è¦é‡å°å€‹åˆ¥ä½¿ç”¨è€…åšå®¢è£½åŒ–ï¼ã€</p>
<p>æ˜¨å¤©ä»–èªªï¼šã€Œæˆ‘å¸Œæœ›æ¯å€‹ç•«é¢çš„å‘ˆç¾éƒ½æ‡‰è©²çµ±ä¸€ï¼Œé€™æ¨£æ‰æœ‰ä¸€è‡´æ„Ÿã€‚ã€</p>
<p>ä»Šå¤©ä»–èªªï¼šã€Œä¸è¦ç®¡æ•¸æ“šèªªä»€éº¼ï¼Œæˆ‘å€‘æ‡‰è©²ä¸»å‹•æ‰¾å‡ºæœ€å¥½çš„ä½¿ç”¨é«”é©—æä¾›çµ¦ä½¿ç”¨è€…ï¼ã€</p>
<p>å‰›å‰›ä»–èªªï¼šã€Œåˆ¥ç®¡ä»€éº¼ä½¿ç”¨è€…é«”é©—äº†ï¼è¶•å¿«æƒ³è¾¦æ³•çµ¦æˆ‘è¡è¨»å†Šæœƒå“¡æ•¸ï¼ã€</p>
<p>æœ‰æ™‚å€™éœ€æ±‚çš„æ”¹è®Šä¸æ˜¯ä¾†è‡ªæ–¼ä½¿ç”¨è€…ï¼Œè€Œæ˜¯äººåœ¨ç„¡åŠ©æˆ–æƒ³ä¸å‡ºå¥½æ–¹æ³•æ™‚ç”¢ç”Ÿçš„å¥‡æ€ªå¿µé ­ï¼Œç•¶ç„¶é€™äº›ä¸è«–å…¬å¸å¤§å°éƒ½æœ‰æ©Ÿæœƒç™¼ç”Ÿï¼Œè€Œèº«ç‚ºåœ˜éšŠçš„ä¸€åˆ†å­ï¼Œå°±å¿…é ˆé©æ™‚åœ°çµ¦äºˆå»ºè­°ã€‚</p>
<p>ä¸éäººç”Ÿç¸½æ˜¯æœ‰ç„¡å¥ˆçš„æ™‚å€™ï¼Œæ—¢ç„¶è¦åƒï¼Œé‚£å°±ç”¨è‡ªå·±çš„æ–¹å¼åƒå§ï¼Œç¸½ä¸èƒ½è®“è‡ªå·±å°æ–¼ç¨‹å¼é–‹ç™¼çš„ç†±æƒ…ä¹Ÿæ²’äº†ã€‚</p>
<p>ç¬¬ä¸€æ­¥æˆ‘å€‘å¾ç¨‹å¼é¢ä¸‹æ‰‹ï¼Œæˆ‘å€‘å–„ç”¨äº†æ¡†æ¶çš„å„ªé»ä¾†å»ºç«‹è‰¯å¥½çš„åŸºç¤æ¶æ§‹ï¼Œå¤šæ•¸éœ€æ±‚çš„è®ŠåŒ–éƒ½å¯ä»¥åœ¨å¾ˆçŸ­çš„æ™‚é–“èª¿æ•´éä¾†ã€‚ç¬¬äºŒæ­¥æˆ‘å€‘ä¸å†å–®æ–¹é¢æ¥å— PM å‚³é”éä¾†çš„è§£æ±ºæ–¹æ¡ˆï¼Œè€Œæ˜¯ç›´æ¥è†è½éœ€æ±‚æ–¹çš„å•é¡Œå›°é›£é»ï¼›è€Œç›´æ¥è½å®Œä¹‹å¾Œæ‰€æƒ³å‡ºä¾†çš„æ–¹æ¡ˆï¼Œéƒ½é æ¯”åŸä¾†è¤‡é›œå¾ˆå¤šçš„è§£æ±ºæ–¹æ¡ˆä¾†å¾—ç°¡å–®åˆç¬¦åˆè¦æ±‚ã€‚é€™åŒæ™‚ä¹Ÿçµ¦æˆ‘ä¸€å€‹æ–°çš„é«”æ‚Ÿï¼š</p>
<blockquote>
<p>åˆ¥ä¸€ç›´è¦ºå¾—è¦ç”¨è‡ªå·±çŸ¥é“çš„å°ˆæ¥­ä¾†è§£æ±ºå•é¡Œï¼Œè¦æƒ³æƒ³æœ‰æ²’æœ‰å…¶ä»–å°ˆæ¥­èƒ½å¤ è§£æ±ºåŒæ¨£çš„å•é¡Œã€‚</p>
</blockquote>
<p>å¾ˆå¤šæ™‚å€™åˆ©ç›Šé—œä¿‚äºº (stakeholder) éƒ½æ˜¯ä¸‰å¿ƒäºŒæ„çš„ï¼Œæˆ–æ˜¯æƒ³åˆ°ä»€éº¼å‘Šè¨´ä½ ä»€éº¼ï¼Œæ‰€ä»¥ä¸€å®šè¦å¥½å¥½æ€è€ƒä»–å€‘å•é¡Œçš„æœ¬è³ªï¼Œä½ æå‡ºçš„æ–¹æ¡ˆæ‰èƒ½çœŸæ­£è§£æ±ºä»–å€‘çš„ç—›é»ã€‚ä¸éæ›´éº»ç…©ä¸æ˜¯æ¯å€‹åˆ©ç›Šé—œä¿‚äººéƒ½æœ‰åŒæ¨£çš„éœ€æ±‚ï¼Œå¾ˆæœ‰æ©Ÿæœƒé€™å€‹éœ€æ±‚æ˜¯ A æƒ³åšçš„ï¼Œçµæœåœ¨ B é‚£é‚Šæ˜¯æœƒå‡ºå•é¡Œçš„ã€‚æ‰€ä»¥åŸå‰‡ä¸Šæœ‰å€‹é‡é»è¦ä¿æ¡ï¼š</p>
<blockquote>
<p>â€ªæ¯å€‹éœ€æ±‚éƒ½è¦ç¢ºèªåˆ©ç›Šé—œä¿‚äººè²·å–®ï¼Œâ€¬â€ªé¿å…å¯¦ä½œå®Œæˆå¾Œæ‰ç™¼ç¾æœ‰äººä¸å–œæ­¡ã€‚â€¬</p>
</blockquote>
<p>é‚„æœ‰ä¸€ç¨®æƒ…æ³æ˜¯ PM çµ¦äº†è¶…ç´šè¤‡é›œçš„è¦æ ¼æ–‡ä»¶ (PRD, Product Requirements Document) ï¼Œä½ åšå®Œæ¢ä»¶ A å¾Œï¼Œæ‰ç™¼ç¾è·Ÿæ¢ä»¶ B æœ‰è¡çªã€‚ç„¶è€Œè¦é¿å…é€™å€‹å•é¡Œï¼Œä¸€å€‹å¾ˆé‡è¦çš„æ–¹æ³•å°±æ˜¯è«‹ PM çµ¦å¯¦ä¾‹ã€‚</p>
<blockquote>
<p>èˆ‡å…¶æŠŠ PRD å¯«å¾—èŠ±èŠ±ç¶ ç¶ ï¼Œä¸å¦‚è¡¨åˆ—å‡ºå„ç¨®æƒ…å¢ƒçš„å¯¦ä¾‹ã€‚</p>
</blockquote>
<p>é€™éº¼ä¸€ä¾†åœ¨è¨è«–éœ€æ±‚å¯¦ä¾‹æ™‚å°±ç™¼ç¾ bug çš„æˆæœ¬ï¼Œé æ¯”å¯¦ä½œå®Œæ‰ç™¼ç¾ bug çš„æˆæœ¬ä½å¾—å¤šï¼›å‰è€…å¯èƒ½åªéœ€è¦å¹¾å¥è©±è§£æ±ºï¼Œå¾Œè€…å¯èƒ½è¦èŠ±å¹¾å€‹äººé€±æ‰èƒ½è§£æ±ºã€‚</p>
<h2 id="å°è‡ªå·±çš„æœŸè¨±">å°è‡ªå·±çš„æœŸè¨±</h2>
<p>2018 å¹´å…¶å¯¦æˆ‘çš„å€¦æ€ æ„Ÿæœ‰é»é‡ï¼Œåƒèˆ‡ç¤¾ç¾¤æ´»å‹•çš„æ„é¡˜ä¹Ÿä¸é«˜ï¼Œå¾ˆå¤šæ™‚é–“éƒ½èŠ±åœ¨èª¿é©è‡ªå·±çš„å¿ƒæƒ…ä¸Šã€‚æœƒé€™æ¨£çš„åŸå› æœ‰å¾ˆå¤šï¼Œä½†æˆ‘è‡ªå·±èªç‚ºå°ç”¢å“æ–°åŠŸèƒ½ç›®æ¨™çš„ä¸èªåŒå¯èƒ½æ˜¯ä¸»å› ä¹‹ä¸€ã€‚ä¸éè·Ÿè‘—ä¸€ç¾¤å¥½ä¼™ä¼´å·¥ä½œï¼Œå¤šå°‘æ²–æ·¡äº†æˆ‘è¢«é€™äº›è² é¢ç‹€æ…‹çš„å½±éŸ¿ã€‚</p>
<p>æ¥ä¸‹ä¾†çš„ 2019 å¹´ï¼Œæˆ‘æœŸè¨±è‡ªå·±åšåˆ°é€™äº›ï¼š</p>
<ul>
<li>èª¿é©è‡ªå·±çš„å¿ƒæ…‹ï¼Œè®“è‡ªå·±èƒ½æ›´ç©æ¥µåœ°çœ‹å¾…äº‹ç‰©ã€‚</li>
<li>è¨“ç·´è‡ªå·±çš„å¯«ä½œèˆ‡è¬›è©±æ›´æœ‰æ¢ç†ã€‚</li>
<li>æŠŠè²·çš„æ›¸çœ‹ä¸€çœ‹ï¼ŒæŠŠè²·çš„éŠæˆ²ç©ä¸€ç©ã€‚</li>
<li>ä¸è¦åªå•è‡ªå·±å•é¡Œï¼Œé‚„èƒ½è¦è¬›å‡ºè‡ªå·±èƒ½æ¥å—çš„ç­”æ¡ˆã€‚</li>
<li>å­¸ç¿’æ–°çš„æ±è¥¿ï¼Œä¸è¦åªä¾·é™å·¥ä½œä¸Šçš„æŠ€è¡“ã€‚</li>
</ul>
<p>æœ€å¾Œï¼Œå†çµ¦è‡ªå·±ä¸€æ¬¡é€™æ®µè©±ï¼š</p>
<blockquote>
<p>ä¸è¦å› åˆ¥äººåšäº†ä»€éº¼æ‰€ä»¥è·Ÿè‘—å»åšä»€éº¼ï¼Œâ€¬è€Œæ˜¯è¦è‡ªå·±æƒ³åšä»€éº¼æ‰€ä»¥ç”¨å¿ƒå»åšä»€éº¼ã€‚</p>
<p>â€¬â€ªç„¶å¾Œï¼ŒæˆåŠŸäº†æœƒæœ‰å¿«æ¨‚ï¼Œå¤±æ•—äº†ä¹Ÿæœƒæœ‰é«”æ‚Ÿã€‚â€¬</p>
</blockquote>
<p>å¯«è‘—å¯«è‘—ï¼Œå¹´å°±åœ¨æˆ‘æ‰‹æŒ‡æ•²æ“Šä¸­è·¨éå»äº†ã€‚</p>
<p>æ–°å¹´å¿«æ¨‚ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>åœ¨ Laravel ä¸­ä½¿ç”¨ Behat ä¾†åŠ å¼·æ¸¬è©¦çš„å¯è®€æ€§ - é€²éšç¯‡</title>
			<link>https://jaceju.net/behat-in-laravel-advance/</link>
			<pubDate>Fri, 09 Nov 2018 18:38:53 +0800</pubDate>
			
			<guid>https://jaceju.net/behat-in-laravel-advance/</guid>
			<description>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»‹ç´¹äº†å¦‚ä½•æŠŠ Behat æ•´åˆåˆ° Laravel è£¡ï¼›ä¸éå¾Œä¾†æˆ‘ç™¼ç¾åœ¨å°ˆæ¡ˆè¦æ ¼è¶Šä¾†è¶Šè¤‡é›œæ™‚ï¼ŒæŠŠæ‰€æœ‰ step definitions éƒ½å¯«åœ¨ FeatureContext é¡åˆ¥ä¸­è®Šå¾—éå¸¸ä¸æ˜“é–±è®€ã€‚å¦ä¸€å€‹å•é¡Œå°±æ˜¯æˆ‘</description>
			<content type="html"><![CDATA[<p>åœ¨<a href="https://jaceju.net/2018-11-08-behat-in-laravel/">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»‹ç´¹äº†å¦‚ä½•æŠŠ Behat æ•´åˆåˆ° Laravel è£¡ï¼›ä¸éå¾Œä¾†æˆ‘ç™¼ç¾åœ¨å°ˆæ¡ˆè¦æ ¼è¶Šä¾†è¶Šè¤‡é›œæ™‚ï¼ŒæŠŠæ‰€æœ‰ step definitions éƒ½å¯«åœ¨ <code>FeatureContext</code> é¡åˆ¥ä¸­è®Šå¾—éå¸¸ä¸æ˜“é–±è®€ã€‚å¦ä¸€å€‹å•é¡Œå°±æ˜¯æˆ‘ä¸æƒ³è¦ç”¨ <code>putenv</code> å‡½å¼ä¾†å®šç¾©ç’°å¢ƒè®Šæ•¸ï¼Œè€Œæ˜¯å¸Œæœ›èƒ½æœ‰ <a href="https://github.com/laracasts/Behat-Laravel-Extension">Behat-Laravel-Extension</a> æŠŠç’°å¢ƒè®Šæ•¸æ”¾åœ¨ <code>.env.behat</code> è£¡çš„ç”¨æ³•ã€‚</p>
<p>è€Œç¶“éä¸æ–·åœ°æ”¹è‰¯å¾Œï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€å€‹ç›®å‰æˆ‘å¾ˆæ»¿æ„çš„åšæ³•ï¼›æ‰€ä»¥æ¥ä¸‹ä¾†æˆ‘æœƒå»¶çºŒä¸Šä¸€ç¯‡çš„ç¯„ä¾‹ä¾†ä»‹ç´¹æ–°çš„åšæ³•ã€‚</p>
<h2 id="æ”¹è‰¯ç’°å¢ƒæ”¹æ•¸çš„è¨­å®šæ–¹å¼">æ”¹è‰¯ç’°å¢ƒæ”¹æ•¸çš„è¨­å®šæ–¹å¼</h2>
<p>ç‚ºäº†è®“ Behat åŸ·è¡Œæ™‚å¯ä»¥è®€å– <code>.env.behat</code> ï¼Œæˆ‘å€‘éœ€è¦åœ¨ Application åˆå§‹åŒ–æ™‚è¼‰å…¥æ–°çš„ç’°å¢ƒè¨­å®šæª”æ¡ˆã€‚å› æ­¤æˆ‘å€‘å°±ä¸èƒ½ç›´æ¥ç”¨ Laravel æä¾›çš„ <code>Tests\CreatesApplication</code> é€™å€‹ trait äº†ï¼Œå› ç‚ºå®ƒé è¨­æœƒè¼‰å…¥ <code>.env</code> æª”ï¼›é€™æ™‚é€™ä¹Ÿè¡¨ç¤ºæˆ‘å€‘ä¸å†éœ€è¦ç›´æ¥ç¹¼æ‰¿ <code>Tests/TestCase</code> é€™å€‹é¡åˆ¥ï¼Œå› ç‚ºå®ƒä¹Ÿåªæ˜¯ä½¿ç”¨äº† <code>Tests\CreatesApplication</code> é€™å€‹ trait ã€‚</p>
<p>å–è€Œä»£ä¹‹çš„æ˜¯æˆ‘å€‘æ”¹ç‚ºç¹¼æ‰¿ <code>Illuminate\Foundation\Testing\TestCase</code> é€™å€‹é¡åˆ¥ï¼Œç„¶å¾Œè‡ªè¡Œè¦†å¯« <code>createApplication</code> é€™å€‹æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Behat\Behat\Context\Context</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Contracts\Console\Kernel</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Testing\TestCase</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">FeatureContext</span> <span class="k">extends</span> <span class="nx">TestCase</span> <span class="k">implements</span> <span class="nx">Context</span>
<span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span>
    <span class="k">protected</span> <span class="k">const</span> <span class="no">ENV_FILE</span> <span class="o">=</span> <span class="s1">&#39;.env.behat&#39;</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @return \Illuminate\Foundation\Application
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">createApplication</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$app</span> <span class="o">=</span> <span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../../bootstrap/app.php&#39;</span><span class="p">;</span>

        <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">loadEnvironmentFrom</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="na">ENV_FILE</span><span class="p">);</span>

        <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">make</span><span class="p">(</span><span class="nx">Kernel</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">bootstrap</span><span class="p">();</span>

        <span class="k">return</span> <span class="nv">$app</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ°æ–°çš„ <code>createApplication</code> æ–¹æ³•ä¸»è¦æ˜¯åœ¨ <code>Kernel::bootstrap</code> ä¹‹å‰ï¼Œè®“ Application æ”¹è®€ <code>.env.behat</code> ã€‚</p>
<p>æ¥ä¸‹åŠ å…¥ <code>.env.behat</code> ï¼Œå…§å®¹å¯åƒè€ƒ <code>phpunit.xml</code> è£¡çš„ <code>&lt;php&gt;</code> å€æ®µè¨­å®šï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">APP_ENV</span><span class="o">=</span><span class="s">testing</span>
<span class="na">DB_CONNECTION</span><span class="o">=</span><span class="s">sqlite</span>
<span class="na">DB_DATABASE</span><span class="o">=</span><span class="s">:memory:</span>
<span class="na">BROADCAST_DRIVER</span><span class="o">=</span><span class="s">log</span>
<span class="na">CACHE_DRIVER</span><span class="o">=</span><span class="s">array</span>
<span class="na">SESSION_DRIVER</span><span class="o">=</span><span class="s">array</span>
<span class="na">BCRYPT_ROUNDS</span><span class="o">=</span><span class="s">4</span>
<span class="na">QUEUE_DRIVER</span><span class="o">=</span><span class="s">sync</span>
</code></pre></div><h2 id="åˆ†é¡-step-definitions">åˆ†é¡ Step definitions</h2>
<p>ç•¶ step definitions å¾ˆå¤šæ™‚ï¼Œé€šé€šéƒ½æ”¾åœ¨ <code>FeatureContext</code> é¡åˆ¥è£¡å°±ä¸æ˜¯å€‹æ˜æ™ºçš„åšæ³•äº†ã€‚æ‰€ä»¥æ¥ä¸‹ä¾†æˆ‘ä¾ç…§ step definitions çš„é¡å‹ä¾†å»ºç«‹ä¸åŒçš„ Context æª”ï¼Œé€™æ¨£ç¶­è­·èµ·ä¾†ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚</p>
<p>é¦–å…ˆæˆ‘å€‘è¦åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹å»ºç«‹ä¸€å€‹ <code>behat.yml</code> æª”ï¼Œ Behat åœ¨åŸ·è¡Œæ™‚æœƒè®€å–å®ƒè£¡é¢çš„è¨­å®šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="k">default</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">suites</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">default</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="k">contexts</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- ApiFeatureContext<span class="w">
</span><span class="w">      </span>- DatabaseAssertionContext<span class="w">
</span></code></pre></div><p>ç„¶å¾Œæˆ‘å€‘åŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">vendor/bin/behat --init
</code></pre></div><p>é€™éº¼ä¸€ä¾† Behat æœƒå¹«æˆ‘å€‘è‡ªå‹•ç”¢ç”Ÿæ‰€æœ‰ context æª”æ¡ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">+f features/bootstrap/ApiFeatureContext.php - place your definitions, transformations and hooks here
+f features/bootstrap/DatabaseAssertionContext.php - place your definitions, transformations and hooks here
</code></pre></div><p>è¨»ï¼šé›–ç„¶é€™è£¡åªé‡å°ç¯„ä¾‹æ‹†åˆ†ï¼Œä½†ä½ å¯ä»¥åŠ å…¥å…¶å®ƒçš„ context æª”ï¼Œå¾Œé¢æˆ‘æœƒçµ¦ä¸€äº›ä¾‹å­ã€‚</p>
<p>æ¥è‘—ç·¨è¼¯æ¯å€‹ context æª”ï¼Œå…ˆè®“å®ƒå€‘ç¹¼æ‰¿ <code>FeatureContext</code> é¡åˆ¥ï¼Œä¸¦æ‹¿æ‰ <code>__construct</code> å»ºæ§‹å­ï¼›ç„¶å¾Œå†æŠŠåŸä¾†æ”¾åœ¨ <code>FeatureContext</code> é¡åˆ¥è£¡çš„ step definitions æ¬åˆ°å°æ‡‰çš„ context é¡åˆ¥è£¡ã€‚</p>
<p>API ç›¸é—œçš„ step definitions æ”¾åœ¨ <code>ApiFeatureContext</code> é¡åˆ¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Behat\Gherkin\Node\TableNode</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ApiFeatureContext</span> <span class="k">extends</span> <span class="nx">FeatureContext</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * @var string
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$apiUrl</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @var array
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$apiBody</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="sd">/**
</span><span class="sd">     * @var \Illuminate\Foundation\Testing\TestResponse
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$response</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @Given API ç¶²å€ç‚º :apiUrl
</span><span class="sd">     * @param string $apiUrl
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">apiUrl</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$apiUrl</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">apiUrl</span> <span class="o">=</span> <span class="nv">$apiUrl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @Given API é™„å¸¶è³‡æ–™ç‚º
</span><span class="sd">     * @param TableNode $table
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">apiBody</span><span class="p">(</span><span class="nx">TableNode</span> <span class="nv">$table</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">apiBody</span> <span class="o">=</span> <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">getHash</span><span class="p">()[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @When ä»¥ :method æ–¹æ³•è¦æ±‚ API
</span><span class="sd">     * @param string $method
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">request</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$method</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">response</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$method</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">apiUrl</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">apiBody</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @Then å›å‚³ç‹€æ…‹æ‡‰ç‚º :statusCode
</span><span class="sd">     * @param int $statusCode
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">assertStatus</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$statusCode</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">response</span><span class="o">-&gt;</span><span class="na">assertStatus</span><span class="p">(</span><span class="nv">$statusCode</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>è³‡æ–™åº«ç›¸é—œçš„ step definitions æ”¾åœ¨ <code>DatabaseAssertionContext</code> é¡åˆ¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Behat\Gherkin\Node\TableNode</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DatabaseAssertionContext</span> <span class="k">extends</span> <span class="nx">FeatureContext</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * @Then è³‡æ–™è¡¨ :tableName æ‡‰æœ‰è³‡æ–™
</span><span class="sd">     * @param string $tableName
</span><span class="sd">     * @param TableNode $table
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">assertTableRecordExisted</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$tableName</span><span class="p">,</span> <span class="nx">TableNode</span> <span class="nv">$table</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertDatabaseHas</span><span class="p">(</span><span class="nv">$tableName</span><span class="p">,</span> <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">getHash</span><span class="p">()[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>ç•¶ç„¶ä¸åƒ… API å’Œè³‡æ–™åº«å¯ä»¥æ‹†åˆ†ï¼Œä¾‹å¦‚å»ºç«‹ Model è³‡æ–™ã€ Event æˆ– Queue ç›¸é—œçš„ step definitions å¯ä»¥é€™æ¨£åšã€‚</p>
<p>Model Factory ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">ModelFactoryContext</span> <span class="k">extends</span> <span class="nx">FeatureContext</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * @Given å­˜åœ¨ä½¿ç”¨è€… :name
</span><span class="sd">     * @param string $name
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">user</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">factory</span><span class="p">(</span><span class="nx">\App\User</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">([</span>
            <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>Event ç›¸é—œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">App\Events\UserCreated</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Event</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">EventAssertionContext</span> <span class="k">extends</span> <span class="nx">FeatureContext</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * @BeforeScenario
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setUpFake</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">Event</span><span class="o">::</span><span class="na">fake</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @Then æ‡‰ç™¼é€äº‹ä»¶ã€Œå·²æ–°å¢ç”¨æˆ¶ã€
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">assertDeployStatusCreatedEventDispatched</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Event</span><span class="o">::</span><span class="na">assertDispatched</span><span class="p">(</span><span class="nx">UserCreated</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>å…¶ä»–å°±è«‹å¤§å®¶è‡ªè¡Œç™¼æ®äº†ã€‚</p>
<h2 id="é€²ä¸€æ­¥æ”¹è‰¯">é€²ä¸€æ­¥æ”¹è‰¯</h2>
<p>ä¸Šè¿°çš„èª¿æ•´æœ‰å€‹ç¼ºé»ï¼Œå°±æ˜¯ <code>FeatureContext::before</code> æ–¹æ³•åŠ <code>FeatureContext::after</code> æ–¹æ³•éƒ½æœƒåˆå§‹åŒ– Context é¡åˆ¥æ™‚éƒ½è·‘ä¸€æ¬¡ï¼Œä½†æ¯å€‹æƒ…å¢ƒåœ¨åŸ·è¡Œæ™‚éƒ½æœƒå†æ¬¡åˆå§‹åŒ–æ‰€æœ‰ Context é¡åˆ¥ï¼›æ›å¥è©±èªªæ¯å€‹æƒ…å¢ƒåœ¨åŸ·è¡Œæ™‚ï¼Œæœ‰å¹¾å€‹ Context é¡åˆ¥ï¼Œå°±æœƒåŸ·è¡Œå¹¾æ¬¡ <code>FeatureContext::before</code> æ–¹æ³•åŠ <code>FeatureContext::after</code> æ–¹æ³•ã€‚é€™æ¨£ä¸€ä¾† <code>$this-&gt;app</code> å°±æœƒè¢«é‡è¤‡åˆå§‹åŒ–ï¼Œå¾’ç„¶æµªè²»åŸ·è¡Œæ™‚é–“ã€‚</p>
<p>æˆ‘å€‘å¸Œæœ› <code>FeatureContext::before</code> æ–¹æ³•åŠ <code>FeatureContext::after</code> æ–¹æ³•åœ¨æ¯å€‹æƒ…å¢ƒåŸ·è¡Œå‰å¾Œå„åŸ·è¡Œä¸€æ¬¡å°±å¥½ï¼Œå¯æ˜¯æ¯å€‹ context ç‰©ä»¶å¯¦é«”å› ç‚ºä½œç”¨åŸŸçš„é—œä¿‚ï¼Œå®ƒå€‘æ‹¿åˆ°çš„ <code>$this-&gt;app</code> éƒ½ä¸æœƒæ˜¯åŒä¸€å€‹ï¼›é€™æ™‚ä¹Ÿéœ€è¦ä¸€å€‹æ©Ÿåˆ¶ä¾†è¨˜ä½å·²ç¶“è¢«åˆå§‹åŒ–çš„ <code>$this-app</code> ï¼Œæ‰ä¸ç”¨æ¯å€‹ context éƒ½åšä¸€æ¬¡ã€‚</p>
<p>ç¶œåˆä¸Šè¿°çš„æƒ³æ³•ï¼Œæœ€å¾Œå®Œæ•´çš„ <code>FeatureContext</code> é¡åˆ¥å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Behat\Behat\Context\Context</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Contracts\Console\Kernel</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Testing\RefreshDatabase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Testing\TestCase</span><span class="p">;</span>

<span class="k">abstract</span> <span class="k">class</span> <span class="nc">FeatureContext</span> <span class="k">extends</span> <span class="nx">TestCase</span> <span class="k">implements</span> <span class="nx">Context</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">RefreshDatabase</span><span class="p">;</span>

    <span class="k">protected</span> <span class="k">const</span> <span class="no">ENV_FILE</span> <span class="o">=</span> <span class="s1">&#39;.env.behat&#39;</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @var \Illuminate\Foundation\Application
</span><span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">static</span> <span class="nv">$contextSharedApp</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @return \Illuminate\Foundation\Application
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">createApplication</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$app</span> <span class="o">=</span> <span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../../bootstrap/app.php&#39;</span><span class="p">;</span>

        <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">loadEnvironmentFrom</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="na">ENV_FILE</span><span class="p">);</span>

        <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">make</span><span class="p">(</span><span class="nx">Kernel</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">bootstrap</span><span class="p">();</span>

        <span class="k">return</span> <span class="nv">$app</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @BeforeScenario
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">before</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">static</span><span class="o">::</span><span class="nv">$contextSharedApp</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">parent</span><span class="o">::</span><span class="na">setUp</span><span class="p">();</span>
            <span class="k">static</span><span class="o">::</span><span class="nv">$contextSharedApp</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">app</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">app</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="nv">$contextSharedApp</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @AfterScenario
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">after</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">static</span><span class="o">::</span><span class="nv">$contextSharedApp</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">parent</span><span class="o">::</span><span class="na">tearDown</span><span class="p">();</span>
            <span class="k">static</span><span class="o">::</span><span class="nv">$contextSharedApp</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>ç›¸ä¿¡ä¸Šé¢çš„ç¨‹å¼ç¢¼æ‡‰è©²å¾ˆç°¡å–®ï¼Œé€™é‚Šå°±ä¸å†å¤šåšèªªæ˜äº†ã€‚æœ€å¾Œæˆ‘ä¸€æ¨£æŠŠç¯„ä¾‹æ”¾åœ¨ GitHub ä¸Šï¼Œè«‹å¤§å®¶è‡ªè¡Œä¸‹è¼‰åƒè€ƒã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>åœ¨ Laravel ä¸­ä½¿ç”¨ Behat ä¾†åŠ å¼·æ¸¬è©¦çš„å¯è®€æ€§ - åŸºç¤ç¯‡</title>
			<link>https://jaceju.net/behat-in-laravel/</link>
			<pubDate>Thu, 08 Nov 2018 18:30:00 +0800</pubDate>
			
			<guid>https://jaceju.net/behat-in-laravel/</guid>
			<description>Laravel çš„æ¸¬è©¦æ¡†æ¶æ˜¯åŸºæ–¼ PHPUnit ä¸Šæ‰€å»ºç«‹å‡ºä¾†çš„ï¼Œè€Œåœ¨ Laravel 5.5 ä¹‹å¾Œï¼Œæ¸¬è©¦æ¡†æ¶çš„åŠŸèƒ½ä¹Ÿå¤§å¹…åœ°åŠ å¼·äº†ã€‚åªä¸éåœ¨è¶Šä¾†è¶Šè¤‡é›œçš„å°ˆæ¡ˆè¦æ ¼ä¸‹ï¼Œæˆ‘å€‹äººè¦ºå¾— PHPUnit åœ¨æƒ…å¢ƒæ¡ˆä¾‹çš„æè¿°</description>
			<content type="html"><![CDATA[<p>Laravel çš„æ¸¬è©¦æ¡†æ¶æ˜¯åŸºæ–¼ PHPUnit ä¸Šæ‰€å»ºç«‹å‡ºä¾†çš„ï¼Œè€Œåœ¨ Laravel 5.5 ä¹‹å¾Œï¼Œæ¸¬è©¦æ¡†æ¶çš„åŠŸèƒ½ä¹Ÿå¤§å¹…åœ°åŠ å¼·äº†ã€‚åªä¸éåœ¨è¶Šä¾†è¶Šè¤‡é›œçš„å°ˆæ¡ˆè¦æ ¼ä¸‹ï¼Œæˆ‘å€‹äººè¦ºå¾— PHPUnit åœ¨æƒ…å¢ƒæ¡ˆä¾‹çš„æè¿°èƒ½åŠ›ä¸Šé‚„æ˜¯ä¸å¤ªå¤ ï¼Œæœ€å¥½å¯ä»¥ç”¨äººå€‘çœ‹å¾—æ‡‚çš„èªè¨€ï¼›è€Œç›®å‰èƒ½å¤ ç”¨è‡ªç„¶èªè¨€ä¾†æè¿°è¦æ ¼æƒ…å¢ƒçš„ï¼Œç•¶ç„¶å°±æ˜¯ <a href="https://cucumber.io/">Cucumber</a> çš„ <a href="http://behat.org/en/latest/user_guide/gherkin.html">Gherkin</a> èªæ³•äº†ã€‚</p>
<!-- raw HTML omitted -->
<p>Cucumber åœ¨ PHP ä¸­çš„å¯¦ä½œï¼Œå°±æ˜¯ <a href="http://behat.org">Behat</a> é€™å€‹ BDD æ¡†æ¶ï¼›é›–ç„¶æˆ‘å¾ˆæ—©å°±æ¥è§¸éå®ƒäº†ï¼Œä½†å¯¦éš›ç†Ÿæ‚‰å®ƒå‰‡æ˜¯åœ¨ <a href="https://skilltree.my/events/skilltree3">91 å“¥çš„ TDD èª²ç¨‹</a>ä¹‹å¾Œçš„è‡ªæˆ‘ç·´ç¿’è£¡ã€‚å¾Œä¾†æˆ‘çœ‹åˆ° <a href="https://laracasts.com/">Laracasts</a> è£¡ Jeffrey Way ä»‹ç´¹ä»–é–‹ç™¼çš„ <a href="https://github.com/laracasts/Behat-Laravel-Extension">Behat-Laravel-Extension</a> å¯ä»¥å°‡ Behat æ•´åˆåˆ° Laravel ä¸­ï¼Œè‘—å¯¦è®“æˆ‘é–‹å¿ƒäº†ä¸€é™£å­ã€‚</p>
<p>ä¸ä¹…å¾Œæˆ‘å°±é€é Behat-Laravel-Extension åœ¨æ–°é–‹ç™¼çš„ API å°ˆæ¡ˆè£¡æ•´åˆäº† Behat ï¼Œä¹Ÿç¢ºå¯¦é«”æœƒåˆ°äº† BDD çš„å„ªç•°ä¹‹è™•ï¼›è€ŒåŒäº‹ä¹Ÿåœ¨æ¥æ‰‹é€™å€‹å°ˆæ¡ˆæ™‚ï¼Œå› ç‚ºé€éè‡ªç„¶èªè¨€æ‰€æè¿°çš„æƒ…å¢ƒï¼Œå¾ˆå¿«åœ°æŒæ¡äº†æ•´å€‹å°ˆæ¡ˆçš„è¦æ ¼ã€‚æˆ‘å€‘å°±é€™æ¨£é€é BDD å¾ˆå¿«åœ°æŠŠä¸€å€‹åˆä¸€å€‹çš„ API ç”Ÿå‡ºä¾†ï¼Œå…¼é¡§äº†é–‹ç™¼æ•ˆç‡èˆ‡è¦æ ¼æ–‡ä»¶ã€‚</p>
<p>ä¸éé€™ä¸€å…©å¹´ä¾† Behat-Laravel-Extension å·²ç¶“å¾ˆä¹…æ²’äººç¶­è­·äº†ï¼Œåœ¨æˆ‘è©¦åœ–å‡ç´šå°ˆæ¡ˆçš„ Laravel ç‰ˆæœ¬æ™‚ï¼Œé€™å€‹å¥—ä»¶ç™¼ç”Ÿäº†ç‰ˆæœ¬ä¸ç›¸å®¹çš„å•é¡Œï¼›åŠ ä¸Š Behat-Laravel-Extension ç›¸ä¾äº†è¨±å¤šæˆ‘å…¶å¯¦ç”¨ä¸åˆ°çš„ Behat å»¶ä¼¸å¥—ä»¶ï¼Œå› æ­¤æ‰¾å‡ºä¸€å€‹æ›´ç²¾ç°¡çš„æ–¹æ¡ˆå°±å‹¢åœ¨å¿…è¡Œäº†ã€‚</p>
<h2 id="çªç ´é»">çªç ´é»</h2>
<p>è¦æŠŠ Behat ç”¨åœ¨ Laravel çš„æ¸¬è©¦ä¸Šï¼Œæœ€å¤§çš„å•é¡Œæ˜¯å¦‚ä½•åˆå§‹åŒ– Application ã€‚äº‹å¯¦ä¸Š Behat åŸ·è¡Œæ™‚åªæ˜¯æŠŠ <code>features/*.feature</code> æª”çš„ step definitions å’Œ <code>FeatureContext</code> é¡åˆ¥ (<code>features/bootstrap/FeatureContext.php</code>) è£¡çš„ method å°æ‡‰èµ·ä¾†å¾Œï¼Œå†è·‘éæ¯å€‹ scenario è€Œå·²ï¼Œæ‰€ä»¥åˆå§‹åŒ– Application å®ƒä¸¦ä¸è² è²¬ã€‚</p>
<p>ä¸éå¦‚æœå„ä½æœ‰è¿½è¹¤é Laravel å°ˆæ¡ˆçš„ <code>Illuminate\Foundation\Testing\TestCase</code> é€™å€‹é¡åˆ¥çš„åŸå§‹ç¢¼ï¼Œä½ æœƒç™¼ç¾å®ƒåœ¨ <code>setUp</code> è£¡å·²ç¶“åˆå§‹åŒ–äº† Application ï¼›è€Œæ—¢ç„¶å·²ç¶“æœ‰é¡åˆ¥æŠŠé€™ä»¶äº‹åšå¥½ï¼Œæˆ‘æ˜¯ä¸æ˜¯å°±å¯ä»¥ç›´æ¥æ‹¿å®ƒä¾†ç”¨ï¼Ÿæ²’éŒ¯ï¼é€™å°±æ˜¯æˆ‘å¾Œä¾†æƒ³åˆ°çš„æ–¹æ³•ã€‚ä¸éè©¦äº†ä¸€é™£å­ï¼Œé™¸é™¸çºŒçºŒæœ‰äº›å•é¡Œæˆ‘ç„¡æ³•é †åˆ©è§£æ±ºï¼Œå°è‡´é€™å€‹ä½œæ³•ä¸€ç›´è¢«æˆ‘å¡µå°åœ¨è…¦æµ·è£¡ã€‚</p>
<p>è¨»ï¼šå…¶å¯¦ Behat-Laravel-Extension ä¸»è¦ä¹Ÿæ˜¯ç”¨ä¾†å¹«å¿™åšåˆå§‹åŒ– Application çš„å·¥ä½œã€‚</p>
<p>å°±åœ¨å‰é™£å­æˆ‘å›é ­æ€è€ƒé€™å€‹å•é¡Œæ™‚ï¼Œæƒ³èªªæ˜¯ä¸æ˜¯ä¹Ÿæœ‰äººæœ‰æƒ³éåŒæ¨£çš„ä½œæ³•ï¼Œçµæœé‚„çœŸçš„æœ‰ï¼å¤–åœ‹ Laravel é–‹ç™¼è€… <a href="https://matthewdaly.co.uk/">Matthew Daly</a> æ—©åœ¨ä¸€å¹´å¤šå‰å°±æƒ³åˆ°é€™å€‹æ–¹æ³•äº†ï¼š <a href="https://matthewdaly.co.uk/blog/2017/02/18/integrating-behat-with-laravel/">Integrating Behat With Laravel</a> ã€‚</p>
<p>ä»¥ä¸‹æˆ‘å€‘å°±ä¾†å¯¦é©—ä¸€ä¸‹é€™å€‹åšæ³•ã€‚</p>
<h2 id="åœ¨-laravel-åˆå§‹åŒ–-behat-ç’°å¢ƒ">åœ¨ Laravel åˆå§‹åŒ– Behat ç’°å¢ƒ</h2>
<p>é¦–å…ˆæˆ‘å€‘è¦å»ºç«‹ä¸€å€‹æ–°çš„ Laravel å°ˆæ¡ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">laravel new Behat-in-Laravel
<span class="nb">cd</span> Behat-in-Laravel
</code></pre></div><p>è¨»ï¼šå¦‚æœæƒ³åœ¨ç¾æœ‰å°ˆæ¡ˆä¸Šç›´æ¥ä¾†çš„è©±ï¼Œå¯ä»¥çœæ‰é€™å€‹æ­¥é©Ÿï¼Œä¸éè¨˜å¾—å…ˆå°‡ç¨‹å¼é€²ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ã€‚</p>
<p>å®‰è£ Behat ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">composer require behat/behat --dev
</code></pre></div><p>æ¥è‘—ç”¨ä»¥ä¸‹æŒ‡ä»¤ä¾†åˆå§‹åŒ– Behat çš„ç’°å¢ƒï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">vendor/bin/behat --init
</code></pre></div><p>é€™å°‡æœƒå»ºç«‹ä»¥ä¸‹è³‡æ–™å¤¾èˆ‡æª”æ¡ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">+d features - place your *.feature files here
+d features/bootstrap - place your context classes here
+f features/bootstrap/FeatureContext.php - place your definitions, transformations and hooks here
</code></pre></div><p>åˆ°é€™è£¡æˆ‘å€‘åªæ˜¯åˆå§‹åŒ–ç’°å¢ƒè€Œå·²ï¼Œæ¥ä¸‹ä¾†ç·¨è¼¯ <code>features/bootstrap/FeatureContext.php</code> é€™å€‹æª”æ¡ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Behat\Behat\Context\Context</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Behat\Gherkin\Node\PyStringNode</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Behat\Gherkin\Node\TableNode</span><span class="p">;</span>

<span class="sd">/**
</span><span class="sd"> * Defines application features from the specific context.
</span><span class="sd"> */</span>
<span class="k">class</span> <span class="nc">FeatureContext</span> <span class="k">implements</span> <span class="nx">Context</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * Initializes context.
</span><span class="sd">     *
</span><span class="sd">     * Every scenario gets its own context instance.
</span><span class="sd">     * You can also pass arbitrary arguments to the
</span><span class="sd">     * context constructor through behat.yml.
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ° <code>FeatureContext</code> é¡åˆ¥å…¶å¯¦åªæœ‰å¯¦ä½œ <code>Behat\Behat\Context\Context</code> é€™å€‹ä»‹é¢ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥å°å®ƒé€²è¡Œä¸€äº›æ”¹é€ æ‰‹è¡“ã€‚</p>
<p>é¦–å…ˆç›´æ¥æŠŠ <code>FeatureContext</code> é¡åˆ¥ç¹¼æ‰¿ Laravel å°ˆæ¡ˆé™„å¸¶çš„ <code>Tests\TestCase</code> é€™å€‹é¡åˆ¥ï¼Œä¸¦æ‹¿æ‰ <code>__construct</code> å»ºæ§‹å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Behat\Behat\Context\Context</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Behat\Gherkin\Node\PyStringNode</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Behat\Gherkin\Node\TableNode</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Tests\TestCase</span><span class="p">;</span>

<span class="sd">/**
</span><span class="sd"> * Defines application features from the specific context.
</span><span class="sd"> */</span>
<span class="k">class</span> <span class="nc">FeatureContext</span> <span class="k">extends</span> <span class="nx">TestCase</span> <span class="k">implements</span> <span class="nx">Context</span>
<span class="p">{</span>
<span class="p">}</span>
</code></pre></div><p>æ¥ä¸‹ä¾†å°±æ˜¯é‡é ­æˆ²äº†ï¼ŒåŠ ä¸Š <code>before</code> åŠ <code>after</code> å…©å€‹ public methods ï¼Œç„¶å¾Œè®“å®ƒå€‘åˆ†åˆ¥å‘¼å« <code>TestCase</code> çš„ <code>setUp</code> èˆ‡ <code>tearDown</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class FeatureContext extends TestCase implements Context
{
    /**
     * @BeforeScenario
     */
    public function before()
    {
        $this-&gt;setUp();
    }

    /**
     * @AfterScenario
     */
    public function after()
    {
        $this-&gt;tearDown();
    }
}
</code></pre></div><p>ç•¶ç„¶åˆ¥å¿˜äº†åŠ ä¸Šé€™å…©å€‹ hooks ï¼š <code>@BeforeScenario</code> åŠ <code>@AfterScenario</code> ã€‚</p>
<p>ä¹‹å‰å¤±æ•—çš„åŸå› ä¸»è¦æ˜¯è³‡æ–™åº«ç›¸é—œçš„ç’°å¢ƒè®Šæ•¸åŠ migration ï¼Œè€Œåœ¨å‰è¿°çš„æ–‡ç« ä¸­ Matthew æ˜¯é€™æ¨£è§£æ±ºçš„ï¼Œæˆ‘å€‘ç…§æŠ„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    /**
     * @BeforeScenario
     */
    public function before()
    {
        putenv(&#39;DB_CONNECTION=sqlite&#39;);
        putenv(&#39;DB_DATABASE=:memory:&#39;);
        $this-&gt;setUp();
    }
</code></pre></div><p>è¨»ï¼šæ–‡ç«  Matthew æ˜¯åœ¨ <code>__construct</code> ä¸­åšç’°å¢ƒè®Šæ•¸çš„åˆå§‹åŒ–èˆ‡ <code>setUp</code> ï¼Œç†ç”±å¯èƒ½æ˜¯ç‚ºäº†ä¸é‡è¤‡åˆå§‹åŒ– Application ï¼›ä½†æˆ‘ä¹‹å¾Œæœƒä»‹ç´¹æ›´å·§å¦™çš„æ–¹æ³•ï¼Œæ‰€ä»¥æ”¹å¯«åœ¨é€™é‚Šã€‚</p>
<p>é‚£éº¼è©²æ€éº¼åš migration å‘¢ï¼Ÿæ–‡ç« ä¸­å› ç‚º Laravel çš„ç‰ˆæœ¬æ˜¯ <code>5.4</code> çš„é—œä¿‚ï¼Œæ‰€ä»¥æ˜¯æ‰‹å‹•å‘¼å« artisan æŒ‡ä»¤ä¾†è™•ç†ï¼Œä¸éç¾åœ¨æˆ‘å€‘æœ‰ <code>RefreshDatabase</code> é€™å€‹ trait å¯ä»¥ç”¨äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">use Illuminate\Foundation\Testing\RefreshDatabase;

/**
 * Defines application features from the specific context.
 */
class FeatureContext extends TestCase implements Context
{
    use RefreshDatabase;
</code></pre></div><p>åŠ å…¥ <code>RefreshDatabase</code> trait å¾Œï¼Œ migration ç›¸é—œçš„å‹•ä½œå°±æœƒåœ¨ <code>setUp</code> æ–¹æ³•è£¡åŸ·è¡Œï¼›ç•¶ç„¶æ‰€æœ‰ Laravel æ¸¬è©¦æ¡†æ¶æä¾›çš„ trait éƒ½å¯ä»¥é€™æ¨£åŠ å…¥ï¼Œ <code>setUp</code> æ–¹æ³•éƒ½æœƒå¹«ä½ è™•ç†å¥½ã€‚</p>
<p>é€™æ¨£ä¸€ä¾† Behat å°±å¯ä»¥åœ¨ Laravel æ¸¬è©¦æ¡†æ¶çš„åŸºç¤ä¸ŠåŸ·è¡Œæˆ‘å€‘çš„æ¸¬è©¦ï¼Œè€Œä¸å¿…å†é€éå…¶ä»– extension å›‰ã€‚</p>
<h2 id="ç¯„ä¾‹">ç¯„ä¾‹</h2>
<p>æ¥ä¸‹ä¾†æˆ‘ç›´æ¥ä¾†å€‹è¶…ç°¡æ˜“ç¯„ä¾‹ï¼Œä¾†ç¢ºèªä¸€ä¸‹é€™å€‹åšæ³•æ˜¯å¦æœ‰æ•ˆã€‚<strong>ä¸éè¦äº‹å…ˆæé†’å¤§å®¶ï¼Œé€™å€‹ç¯„ä¾‹åƒ…æ˜¯ç‚ºäº†ç¤ºç¯„ Behat æ•´åˆåˆ° Laravel çš„é–‹ç™¼æµç¨‹ï¼Œæ‰€ä»¥æœƒçœç•¥æ‰ Behat èˆ‡ Laravel çš„åŸºç¤ä»‹ç´¹ï¼Œä»¥åŠå¯¦å‹™é–‹ç™¼æ™‚è©²æ³¨æ„çš„ç´°ç¯€ã€‚</strong></p>
<p>å‡è¨­å°ˆæ¡ˆæœ‰ä»¥ä¸‹é€™å€‹éœ€æ±‚ï¼š</p>
<pre><code>æä¾›ä½¿ç”¨è€…åç¨±ã€ Email èˆ‡å¯†ç¢¼ï¼Œä¸¦å‘¼å«å»ºç«‹ User çš„ API å¾Œï¼Œæœƒåœ¨è³‡æ–™åº«å»ºç«‹ä¸€ç­†ä½¿ç”¨è€…çš„è³‡æ–™ã€‚
</code></pre><p>ç¶“éè¦æ ¼è¨è«–å¾Œï¼Œæˆ‘å€‘ç”¨ Gherkin èªæ³•å»ºç«‹äº† <code>features/users-api.feature</code> é€™å€‹æª”æ¡ˆï¼Œä¸¦åŒ…å«äº†ä¸€å€‹æƒ…å¢ƒï¼š</p>
<pre><code>#language: zh-TW

åŠŸèƒ½: User APIs

  å ´æ™¯: å»ºç«‹ä½¿ç”¨è€…
    å‡å®š API ç¶²å€ç‚º &quot;/api/users&quot;
    è€Œä¸” API é™„å¸¶è³‡æ–™ç‚º
      | name | email            | password |
      | User | user@example.com | example  |
    ç•¶ ä»¥ &quot;POST&quot; æ–¹æ³•è¦æ±‚ API
    é‚£éº¼ å›å‚³ç‹€æ…‹æ‡‰ç‚º 201
    è€Œä¸” è³‡æ–™è¡¨ &quot;users&quot; æ‡‰æœ‰è³‡æ–™
      | id | name | email            |
      | 1  | User | user@example.com |
</code></pre><p>å…ˆåŸ·è¡Œä¸€æ¬¡ä»¥ä¸‹æŒ‡ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">vendor/bin/behat --append-snippets
</code></pre></div><p>å®ƒæœƒå•æˆ‘å€‘è¦æŠŠ step definitions æ”¾åœ¨å“ªè£¡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">åŠŸèƒ½: User APIs

  å ´æ™¯: å»ºç«‹ä½¿ç”¨è€…                 <span class="c1"># features/users-api.feature:5</span>
    å‡å®š API ç¶²å€ç‚º <span class="s2">&#34;/api/users&#34;</span>
    è€Œä¸” API é™„å¸¶è³‡æ–™ç‚º
      <span class="p">|</span> name <span class="p">|</span> email            <span class="p">|</span> password <span class="p">|</span>
      <span class="p">|</span> User <span class="p">|</span> user@example.com <span class="p">|</span> example  <span class="p">|</span>
    ç•¶ ä»¥ <span class="s2">&#34;POST&#34;</span> æ–¹æ³•è¦æ±‚ API
    é‚£éº¼ å›å‚³ç‹€æ…‹æ‡‰ç‚º <span class="m">201</span>
    è€Œä¸” è³‡æ–™è¡¨ <span class="s2">&#34;users&#34;</span> æ‡‰æœ‰è³‡æ–™
      <span class="p">|</span> id <span class="p">|</span> name <span class="p">|</span> email            <span class="p">|</span>
      <span class="p">|</span> <span class="m">1</span>  <span class="p">|</span> User <span class="p">|</span> user@example.com <span class="p">|</span>

<span class="m">1</span> scenario <span class="o">(</span><span class="m">1</span> undefined<span class="o">)</span>
<span class="m">5</span> steps <span class="o">(</span><span class="m">5</span> undefined<span class="o">)</span>
0m0.17s <span class="o">(</span>21.79Mb<span class="o">)</span>

 &gt;&gt; default suite has undefined steps. Please choose the context to generate snippets:

  <span class="o">[</span>0<span class="o">]</span> None
  <span class="o">[</span>1<span class="o">]</span> FeatureContext
</code></pre></div><p>é¸ <code>1</code> æŠŠæ‰€æœ‰çš„ step definitions éƒ½å­˜åœ¨ <code>FeatureContext</code> é¡åˆ¥è£¡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">u features/bootstrap/FeatureContext.php - <span class="sb">`</span>API ç¶²å€ç‚º <span class="s2">&#34;/api/users&#34;</span><span class="sb">`</span> definition added
u features/bootstrap/FeatureContext.php - <span class="sb">`</span>API é™„å¸¶è³‡æ–™ç‚º<span class="sb">`</span> definition added
u features/bootstrap/FeatureContext.php - <span class="sb">`</span>ä»¥ <span class="s2">&#34;POST&#34;</span> æ–¹æ³•è¦æ±‚ API<span class="sb">`</span> definition added
u features/bootstrap/FeatureContext.php - <span class="sb">`</span>å›å‚³ç‹€æ…‹æ‡‰ç‚º 201<span class="sb">`</span> definition added
u features/bootstrap/FeatureContext.php - <span class="sb">`</span>è³‡æ–™è¡¨ <span class="s2">&#34;users&#34;</span> æ‡‰æœ‰è³‡æ–™<span class="sb">`</span> definition added
</code></pre></div><p>ç”¨ç·¨è¼¯å™¨æ‰“é–‹ <code>features/bootstrap/FeatureContext.php</code> å¾Œï¼Œå°±æœƒçœ‹åˆ°ä»¥ä¸‹æ–°å¢çš„æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">
    /**
     * @Given API ç¶²å€ç‚º :arg1
     */
    public function apiWangZhiWei($arg1)
    {
        throw new PendingException();
    }

    /**
     * @Given API é™„å¸¶è³‡æ–™ç‚º
     */
    public function apiFuDaiZiLiaoWei(TableNode $table)
    {
        throw new PendingException();
    }

    /**
     * @When ä»¥ :arg1 æ–¹æ³•è¦æ±‚ API
     */
    public function yiFangFaYaoQiuApi($arg1)
    {
        throw new PendingException();
    }

    /**
     * @Then å›å‚³ç‹€æ…‹æ‡‰ç‚º :arg1
     */
    public function huiChuanZhuangTaiYingWei($arg1)
    {
        throw new PendingException();
    }

    /**
     * @Then è³‡æ–™è¡¨ :arg1 æ‡‰æœ‰è³‡æ–™
     */
    public function ziLiaoBiaoYingYouZiLiao($arg1, TableNode $table)
    {
        throw new PendingException();
    }
</code></pre></div><p>é›–ç„¶ <code>behat --append-snippets</code> æ‰€ç”¢ç”Ÿçš„æ–¹æ³•åœ¨ annonation æœƒä¿ç•™åŸä¾†çš„ä¸­æ–‡å¥å­ï¼Œä½†å»æœƒæŠŠä¸­æ–‡çš„ step definition è½‰æ›æˆæ‹¼éŸ³å¼çš„æ–¹æ³•åç¨±ï¼Œå› æ­¤æˆ‘å€‘éœ€è¦å°‡æ¯å€‹æ–¹æ³•çš„åç¨±æ›æˆå¯è®€æ€§é«˜çš„åç¨±ï¼ŒåŒæ™‚èª¿æ•´åƒæ•¸åç¨±ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    /**
     * @Given API ç¶²å€ç‚º :apiUrl
     * @param string $apiUrl
     */
    public function apiUrl(string $apiUrl)
    {
        throw new PendingException();
    }

    /**
     * @Given API é™„å¸¶è³‡æ–™ç‚º
     * @param TableNode $table
     */
    public function apiBody(TableNode $table)
    {
        throw new PendingException();
    }

    /**
     * @When ä»¥ :method æ–¹æ³•è¦æ±‚ API
     * @param string $method
     */
    public function request(string $method)
    {
        throw new PendingException();
    }

    /**
     * @Then å›å‚³ç‹€æ…‹æ‡‰ç‚º :statusCode
     * @param int $statusCode
     */
    public function assertStatus(int $statusCode)
    {
        throw new PendingException();
    }

    /**
     * @Then è³‡æ–™è¡¨ :tableName æ‡‰æœ‰è³‡æ–™
     * @param string $tableName
     * @param TableNode $table
     */
    public function assertTableRecordExisted(string $tableName, TableNode $table)
    {
        throw new PendingException();
    }
</code></pre></div><p>ç„¶å¾Œå†æ¬¡åŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">vendor/bin/behat --append-snippets
</code></pre></div><p>å°±ä¸æœƒå†æ¬¡è©¢å•æ˜¯ä¸æ˜¯è¦åŠ å…¥ snippets ï¼Œè€Œæ˜¯å¸Œæœ›ä½ æŠŠ step definitions çš„æ–¹æ³•å¯¦ä½œå‡ºä¾†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">åŠŸèƒ½: User APIs

  å ´æ™¯: å»ºç«‹ä½¿ç”¨è€…                 <span class="c1"># features/users-api.feature:5</span>
    å‡å®š API ç¶²å€ç‚º <span class="s2">&#34;/api/users&#34;</span> <span class="c1"># FeatureContext::apiUrl()</span>
      TODO: write pending definition
    è€Œä¸” API é™„å¸¶è³‡æ–™ç‚º            <span class="c1"># FeatureContext::apiBody()</span>
      <span class="p">|</span> name <span class="p">|</span> email            <span class="p">|</span> password <span class="p">|</span>
      <span class="p">|</span> User <span class="p">|</span> user@example.com <span class="p">|</span> example  <span class="p">|</span>
    ç•¶ ä»¥ <span class="s2">&#34;POST&#34;</span> æ–¹æ³•è¦æ±‚ API     <span class="c1"># FeatureContext::request()</span>
    é‚£éº¼ å›å‚³ç‹€æ…‹æ‡‰ç‚º <span class="m">201</span>           <span class="c1"># FeatureContext::assertStatus()</span>
    è€Œä¸” è³‡æ–™è¡¨ <span class="s2">&#34;users&#34;</span> æ‡‰æœ‰è³‡æ–™     <span class="c1"># FeatureContext::assertTableRecordExisted()</span>
      <span class="p">|</span> id <span class="p">|</span> name <span class="p">|</span> email            <span class="p">|</span>
      <span class="p">|</span> <span class="m">1</span>  <span class="p">|</span> User <span class="p">|</span> user@example.com <span class="p">|</span>

<span class="m">1</span> scenario <span class="o">(</span><span class="m">1</span> pending<span class="o">)</span>
<span class="m">5</span> steps <span class="o">(</span><span class="m">1</span> pending, <span class="m">4</span> skipped<span class="o">)</span>
0m0.18s <span class="o">(</span>21.82Mb<span class="o">)</span>
</code></pre></div><p>æ¥ä¸‹ä¾†æŠŠæ–¹æ³•å¯¦ä½œè£œä¸Šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    /**
     * @var string
     */
    private $apiUrl = &#39;&#39;;

    /**
     * @var array
     */
    private $apiBody = [];

    /**
     * @var \Illuminate\Foundation\Testing\TestResponse
     */
    private $response;

    /**
     * @Given API ç¶²å€ç‚º :apiUrl
     * @param string $apiUrl
     */
    public function apiUrl(string $apiUrl)
    {
        $this-&gt;apiUrl = $apiUrl;
    }

    /**
     * @Given API é™„å¸¶è³‡æ–™ç‚º
     * @param TableNode $table
     */
    public function apiBody(TableNode $table)
    {
        $this-&gt;apiBody = $table-&gt;getHash()[0];
    }

    /**
     * @When ä»¥ :method æ–¹æ³•è¦æ±‚ API
     * @param string $method
     */
    public function request(string $method)
    {
        $this-&gt;response = $this-&gt;json($method, $this-&gt;apiUrl, $this-&gt;apiBody);
    }

    /**
     * @Then å›å‚³ç‹€æ…‹æ‡‰ç‚º :statusCode
     * @param int $statusCode
     */
    public function assertStatus(int $statusCode)
    {
        $this-&gt;response-&gt;assertStatus($statusCode);
    }

    /**
     * @Then è³‡æ–™è¡¨ :tableName æ‡‰æœ‰è³‡æ–™
     * @param string $tableName
     * @param TableNode $table
     */
    public function assertTableRecordExisted(string $tableName, TableNode $table)
    {
        $this-&gt;assertDatabaseHas($tableName, $table-&gt;getHash()[0]);
    }
</code></pre></div><p>å†æ¬¡åŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">vendor/bin/behat --append-snippets
</code></pre></div><p>å°±æœƒå‡ºç¾ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">åŠŸèƒ½: User APIs

  å ´æ™¯: å»ºç«‹ä½¿ç”¨è€…                 <span class="c1"># features/users-api.feature:5</span>
    å‡å®š API ç¶²å€ç‚º <span class="s2">&#34;/api/users&#34;</span> <span class="c1"># FeatureContext::apiUrl()</span>
    è€Œä¸” API é™„å¸¶è³‡æ–™ç‚º            <span class="c1"># FeatureContext::apiBody()</span>
      <span class="p">|</span> name <span class="p">|</span> email            <span class="p">|</span> password <span class="p">|</span>
      <span class="p">|</span> User <span class="p">|</span> user@example.com <span class="p">|</span> example  <span class="p">|</span>
    ç•¶ ä»¥ <span class="s2">&#34;POST&#34;</span> æ–¹æ³•è¦æ±‚ API     <span class="c1"># FeatureContext::request()</span>
    é‚£éº¼ å›å‚³ç‹€æ…‹æ‡‰ç‚º <span class="m">201</span>           <span class="c1"># FeatureContext::assertStatus()</span>
      Expected status code <span class="m">201</span> but received 404.
      Failed asserting that <span class="nb">false</span> is true.
    è€Œä¸” è³‡æ–™è¡¨ <span class="s2">&#34;users&#34;</span> æ‡‰æœ‰è³‡æ–™     <span class="c1"># FeatureContext::assertTableRecordExisted()</span>
      <span class="p">|</span> id <span class="p">|</span> name <span class="p">|</span> email            <span class="p">|</span>
      <span class="p">|</span> <span class="m">1</span>  <span class="p">|</span> User <span class="p">|</span> user@example.com <span class="p">|</span>

Failed scenarios:

    features/users-api.feature:5

<span class="m">1</span> scenario <span class="o">(</span><span class="m">1</span> failed<span class="o">)</span>
<span class="m">5</span> steps <span class="o">(</span><span class="m">3</span> passed, <span class="m">1</span> failed, <span class="m">1</span> skipped<span class="o">)</span>
0m0.19s <span class="o">(</span>22.82Mb<span class="o">)</span>
</code></pre></div><p>å‰©ä¸‹çš„å°±æ˜¯å®Œæˆ API ç¨‹å¼ç¢¼å¯¦ä½œå•¦ï¼Œé€™è£¡å°±ä¸å¤šåšä»‹ç´¹äº†ï¼Œå®Œæˆçš„ç¨‹å¼ç¢¼è«‹åˆ° <a href="https://github.com/jaceju-tutorial-examples/behat-in-laravel-basic">GitHub</a> ä¸ŠæŸ¥çœ‹ã€‚</p>
<p>ä¸‹ä¸€ç¯‡æˆ‘æœƒå†ä»‹ç´¹ç¨å¾®é€²éšçš„åšæ³•ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>ç†è§£ composer.json çš„ replace</title>
			<link>https://jaceju.net/composer-replace/</link>
			<pubDate>Fri, 02 Nov 2018 12:30:00 +0800</pubDate>
			
			<guid>https://jaceju.net/composer-replace/</guid>
			<description>é€šå¸¸ä½ åœ¨ composer.json è£¡å¾ˆå°‘æœƒç”¨åˆ° replace é€™å€‹ schema å±¬æ€§ ï¼Œä¸éåœ¨ä»¥ä¸‹æƒ…å¢ƒå®ƒå°±å¾ˆæœ‰ç”¨äº†ã€‚ ä¾‹å¦‚ä½ æ­£åœ¨é–‹ç™¼ä¸€å€‹å°ˆæ¡ˆ (ä¹Ÿå°±æ˜¯åœ¨ composer.json ä¸­çš„ type ç‚º project ) ï¼Œå®ƒç›¸ä¾ original/library é€™å€‹å¥—ä»¶ä»¥åŠ other/package é€™å€‹å¥—</description>
			<content type="html"><![CDATA[<p>é€šå¸¸ä½ åœ¨ composer.json è£¡å¾ˆå°‘æœƒç”¨åˆ° <code>replace</code> é€™å€‹ schema å±¬æ€§ ï¼Œä¸éåœ¨ä»¥ä¸‹æƒ…å¢ƒå®ƒå°±å¾ˆæœ‰ç”¨äº†ã€‚</p>
<p>ä¾‹å¦‚ä½ æ­£åœ¨é–‹ç™¼ä¸€å€‹å°ˆæ¡ˆ (ä¹Ÿå°±æ˜¯åœ¨ <code>composer.json</code> ä¸­çš„ <code>type</code> ç‚º <code>project</code> ) ï¼Œå®ƒç›¸ä¾ <code>original/library</code> é€™å€‹å¥—ä»¶ä»¥åŠ <code>other/package</code> é€™å€‹å¥—ä»¶ã€‚å¾ˆå·§çš„æ˜¯ï¼Œ <code>other/package</code> é€™å€‹å¥—ä»¶ä¹Ÿç›¸ä¾äº† <code>original/library</code> é€™å€‹å¥—ä»¶ã€‚</p>
<p><img src="/resources/composer-replace/original-library.png" alt=""></p>
<p>å‡è¨­ç¾åœ¨ä½ è¦ºå¾— <code>orginal/library</code> é€™å€‹å¯èƒ½å·²ç¶“å¤ªè€èˆŠï¼Œä½†ç¶­è­·è€…åˆä¸æƒ³è®“ä½ æ›´å‹•å®ƒï¼Œæ‰€ä»¥ä½ æ±ºå®šæŠŠå®ƒ fork å‡ºä¾†æ”¹æˆä¸€å€‹ç›¸å®¹ä½†æ˜¯åŠŸèƒ½æ›´å¼·å¤§çš„ <code>better/library</code> ï¼Œä¸¦ä¸”æŠŠå®ƒæ¨™ä¸Šæ–°ç‰ˆè™Ÿé‡‹å‡ºã€‚</p>
<p>ç¾åœ¨å›åˆ°ä½ çš„å°ˆæ¡ˆï¼Œå°‡åŸä¾†çš„ <code>original/library</code> æ”¹æˆ <code>better/library</code> ï¼Œä¸¦å¸Œæœ›ä¸€åˆ‡æ­£å¸¸ï¼›åªæ˜¯ <code>other/package</code> é‚„ç›¸ä¾åœ¨ <code>original/library</code> ï¼Œä½¿å¾—å®ƒè·Ÿä½ çš„ <code>better/library</code> æœ‰è¡çªã€‚é‚£éº¼è©²æ€éº¼è®“ <code>other/package</code> ä¹Ÿæ”¹ç”¨ <code>better/library</code> å‘¢ï¼Ÿæˆ‘å€‘å¯ä¸æ‰“ç®—å† fork ä¸€ä»½ <code>other/package</code> ï¼</p>
<p>é€™æ™‚å€™å°±æ˜¯ <code>replace</code> å‡ºå ´çš„æ™‚æ©Ÿäº†ã€‚</p>
<!-- raw HTML omitted -->
<p><code>replace</code> çš„ç”¨æ³•å¾ˆç°¡å–®ï¼Œä½ å¯ä»¥åœ¨ <code>better/library</code> çš„ <code>composer.json</code> è£¡åŠ å…¥é€™å€‹è¨­å®šï¼š</p>
<pre><code>&quot;replace&quot;: {
    &quot;original/library&quot;:&quot;1.*&quot;
}
</code></pre><p>é€™éº¼ä¸€ä¾† composer å°±æœƒåœ¨å®‰è£ <code>other/package</code> æ™‚ï¼Œè‡ªå‹•æŠŠæœ‰ç”¨åˆ° <code>original/library</code> å…¨æ›æˆ <code>better/library</code> äº†ã€‚</p>
<p><img src="/resources/composer-replace/better-library.png" alt=""></p>
<p>å¦å¤– <code>replace</code> ä¹Ÿå¸¸ç”¨åœ¨ä¸»å¥—ä»¶åŒ…å«å¤šå€‹å­å¥—ä»¶çš„ç”¨é€”ï¼Œå› ç‚ºé€šå¸¸å®‰è£ä¸»å¥—ä»¶æ™‚å°±æœƒæ¶µè“‹æ‰€æœ‰å­å¥—ä»¶çš„åŠŸèƒ½ï¼›ä¾‹å¦‚ <code>laravel/framework</code> å°±æ˜¯é€™æ¨£çš„ç”¨æ³•ï¼Œä½ æœƒçœ‹åˆ°å®ƒçš„ <code>composer.json</code> åŒ…å«äº†é€™æ®µï¼š</p>
<pre><code>&quot;replace&quot;: {
    &quot;illuminate/auth&quot;: &quot;self.version&quot;,
    &quot;illuminate/broadcasting&quot;: &quot;self.version&quot;,
    ...
    &quot;illuminate/view&quot;: &quot;self.version&quot;,
    &quot;tightenco/collect&quot;: &quot;self.version&quot;
},
</code></pre><p>è·Ÿå‰é¢ä¸€æ¨£çš„é‚è¼¯ï¼Œå‡è¨­ä½ çš„å°ˆæ¡ˆç›¸ä¾äº† <code>laravel/framework</code> ï¼Œè€Œå¦ä¸€å€‹ç›¸ä¾çš„å¥—ä»¶ç”¨åˆ°äº† <code>illuminate/auth</code> çš„è©±ï¼Œé‚£éº¼å®ƒå°±æœƒä»¥ <code>laravel/framework</code> çš„ç‰ˆæœ¬ç‚ºä¸»ï¼Œè€Œä¸æœƒé‡è¤‡å†è¼‰å…¥ <code>illuminate/auth</code> ã€‚è€Œå…¶ä¸­ <code>self.version</code> å°±æ˜¯æŒ‡å‘ä¸»å¥—ä»¶ç›®å‰çš„ç‰ˆæœ¬ã€‚</p>
<p>å…§å®¹ä¾†æºåƒè€ƒï¼š <a href="http://stackoverflow.com/questions/18882201/how-does-the-replace-property-work-with-composer/18905069#18905069">How does the â€œreplaceâ€ property work with composer?</a></p>
]]></content>
		</item>
		
		<item>
			<title>é‡æ§‹æˆ–é‡å¯« Legacy code çš„å¹¾å€‹éšæ®µ</title>
			<link>https://jaceju.net/steps-of-refactoring-or-rebuilding/</link>
			<pubDate>Wed, 09 May 2018 20:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/steps-of-refactoring-or-rebuilding/</guid>
			<description>çœ‹å®Œå‰ä¸€ç¯‡çš„ä»‹ç´¹ï¼Œæˆ‘æƒ³ä½ æ‡‰è©²å·²ç¶“æƒ³å¥½é¢å° legacy code æ™‚ï¼Œæ‡‰è©²è¦é‡æ§‹é‚„æ˜¯é‡å¯«äº†ã€‚å¦‚æœä½ æ‰“ç®—å°æ­£åœ¨ç·šä¸Šçš„ç¨‹å¼ç¢¼é€²è¡Œé‡æ§‹ï¼Œé‚£å°±åƒåœ¨å¹«é£›è¡Œä¸­çš„é£›æ©Ÿæ›å¼•æ“ä¸€æ¨£</description>
			<content type="html"><![CDATA[<p>çœ‹å®Œ<a href="/refactor-or-rebuild">å‰ä¸€ç¯‡çš„ä»‹ç´¹</a>ï¼Œæˆ‘æƒ³ä½ æ‡‰è©²å·²ç¶“æƒ³å¥½é¢å° legacy code æ™‚ï¼Œæ‡‰è©²è¦é‡æ§‹é‚„æ˜¯é‡å¯«äº†ã€‚å¦‚æœä½ æ‰“ç®—å°æ­£åœ¨ç·šä¸Šçš„ç¨‹å¼ç¢¼é€²è¡Œé‡æ§‹ï¼Œé‚£å°±åƒåœ¨å¹«é£›è¡Œä¸­çš„é£›æ©Ÿæ›å¼•æ“ä¸€æ¨£ï¼›å¦‚æœæ˜¯é‡å¯«ï¼Œé‚£å°±æ˜¯é€ ä¸€æ¶æ–°é£›æ©Ÿè®“å®ƒå‡ç©ºï¼Œç„¶å¾Œåœ¨ç©ºä¸­æŠŠèˆŠé£›æ©Ÿè£¡çš„ä¹˜å®¢æ¥éä¾†ä¸€æ¨£ã€‚</p>
<p>é‚£éº¼è¦æ€éº¼åœ¨ç©ºä¸­å¹«é£›æ©Ÿæ›å¼•æ“æˆ–æ¥é€ä¹˜å®¢å‘¢ï¼Ÿæ‡‰è©²æœ‰äº›å…·é«”çš„æ–¹æ¡ˆå§ï¼Ÿå…¶å¯¦æœ‰å¹¾ä»¶äº‹æ˜¯å…©å€‹æ–¹æ³•éƒ½å¿…é ˆå…ˆåšçš„ï¼Œä»¥ä¸‹å°±æ•´ç†äº†å¹¾å€‹é‡æ§‹æˆ–é‡å¯«å‰é‡è¦çš„æ­¥é©Ÿã€‚</p>
<!-- raw HTML omitted -->
<h2 id="ç¶œè¦½å…¨å±€">ç¶œè¦½å…¨å±€</h2>
<p>ä¸è«–ä½ æ‰“ç®—é‡æ§‹æˆ–é‡å¯«ï¼Œæˆ‘éƒ½æœƒå»ºè­°ä½ èŠ±é»æ™‚é–“æ•´ç†ä¸€ä¸‹å°ˆæ¡ˆç›®å‰çš„è¦æ ¼ä»¥åŠå„åŠŸèƒ½çš„ä½¿ç”¨æƒ…å¢ƒï¼›é€™äº›è³‡è¨Šçš„ä¾†æºå¯èƒ½æœ‰å¥½å¹¾ç¨®ï¼šæ–‡ä»¶è£¡æˆ– issue tracking ç³»çµ±ä¸­æœ‰è¨˜è¼‰çš„ã€å°ˆæ¡ˆé—œä¿‚äººæˆ–æ›¾ç¶“ç¶­è­·éè©²å°ˆæ¡ˆçš„åŒäº‹é‚„è¨˜å¾—çš„ã€ç›´æ¥å¾ UI ä¸Šæ“ä½œå¾Œæ‰€å¾—åˆ°çš„çµæœç­‰ç­‰ã€‚</p>
<p>é€™äº›è³‡è¨Šå¯ä»¥ç”¨ç™½æ¿åŠ ä¾¿åˆ©è²¼ä¾†æ•´ç†ï¼Œæˆ–æ˜¯ä½¿ç”¨ Trello è®“å¤§å®¶éƒ½èƒ½çœ‹åˆ°ï¼›å¦‚æœå°ˆæ¡ˆå¤ªéé¾å¤§ï¼Œé‚£éº¼è‡³å°‘æ•´ç†ä¸€ä¸‹ä½ è² è²¬çš„éƒ¨ä»½ã€‚é€™éº¼åšçš„åŸå› æ˜¯å¹«åŠ©ä½ æˆ–åœ˜éšŠæ›´ç‚ºç†è§£é€™å€‹å°ˆæ¡ˆçš„å…¨è²Œã€‚åŒæ™‚ä¹Ÿå¯ä»¥è¶é€™å€‹æ™‚å€™å»ç¢ºèªåŠŸèƒ½çš„å­˜å»¢ï¼Œä»¥åŠæ˜¯å¦æœ‰å“ªäº›è¦æ ¼èˆ‡å¯¦ä½œçš„å°æ‡‰ä¸Šå…¶å¯¦æœ‰å•é¡Œçš„ã€‚</p>
<p>ä½ å¯èƒ½æœƒè¦ºå¾—é€™æ‡‰è©²æ˜¯ PM çš„å·¥ä½œï¼Œä½†æˆ‘å¿…é ˆèªªï¼Œç¾å¯¦ä¸­çš„ä½ å°±æ˜¯ PM çš„å»¶ä¼¸ã€‚ç•¶ç„¶å¦‚æœæ˜¯æ•´å€‹åœ˜éšŠæ±ºå®šè¦é‡æ§‹æˆ–é‡å¯«çš„è©±ï¼Œå°±è®“å¤§å®¶ä¸€èµ·ä¾†åšé€™äº›å·¥ä½œå§ã€‚</p>
<h2 id="ç†è§£-legacy-code-çš„æ¶æ§‹">ç†è§£ legacy code çš„æ¶æ§‹</h2>
<p>å¦‚æœä½ ä¸çŸ¥é“ legacy code æ˜¯æ€éº¼é‹ä½œçš„ï¼Œé‚£å°±åˆ¥æƒ³è¦é‡æ§‹æˆ–é‡å¯«äº†ã€‚æœ‰æ™‚å€™ legacy code ä¸­çš„æŸäº›è¨­è¨ˆï¼Œé€šå¸¸æ˜¯å› ç‚ºç•¶æ™‚çš„æ™‚ç©ºèƒŒæ™¯è€Œç”¢ç”Ÿçš„ã€‚æ‰€ä»¥ç•¶ä½ èƒ½å¤ å¾ç³»çµ±æ¶æ§‹åˆ°ç¨‹å¼æ¶æ§‹ä¾†æ·±å…¥ç†è§£å‰äººåœ¨ legacy code ä¸­åšäº†å“ªäº›äº‹æƒ…ï¼Œå°±èƒ½ç­è§£ä½ é¢è‡¨äº†ä»€éº¼æ¨£çš„é™åˆ¶ã€‚</p>
<p>åœ¨ç†è§£çš„éç¨‹ä¸­ï¼Œä½ å¯ä»¥å˜—è©¦æ•´ç†å‡ºä¸€äº›é–‹ç™¼æ–‡ä»¶ï¼Œé‡æ¸…ç¨‹å¼éœ€è¦çš„ç³»çµ±ç’°å¢ƒã€ä½¿ç”¨çš„è³‡æ–™åº«æˆ–å¤–éƒ¨æœå‹™ã€æˆ–æ˜¯ç›¸ä¾çš„å¥—ä»¶ç­‰è³‡è¨Šã€‚å¾—åˆ°é€™äº›è³‡è¨Šå¾Œï¼Œä½ å¯ä»¥è‘—æ‰‹åˆ†ææ‡‰è©²å“ªäº›éƒ¨ä»½æ‡‰è©²é‡æ§‹æˆ–æ˜¯é‡å¯«ï¼›å› ç‚ºæœ‰æ™‚å€™å¯èƒ½æœƒå› ç‚ºæŸäº› legacy code è€Œå°è‡´ç³»çµ±ç„¡æ³•é€²è¡Œå®‰å…¨æ€§å‡ç´šï¼Œæˆ–æ˜¯æœå‹™è½‰æ›ä¸Šçš„å›°é›£ï¼Œåƒé€™é¡çš„ç¨‹å¼ç¢¼å°±å¯èƒ½è¦é€²è¡Œé‡å¯«ã€‚</p>
<h2 id="å°å…¥æŒçºŒæ•´åˆèˆ‡è‡ªå‹•åŒ–ä½ˆç½²">å°å…¥æŒçºŒæ•´åˆèˆ‡è‡ªå‹•åŒ–ä½ˆç½²</h2>
<p>å¤šæ•¸ legacy å°ˆæ¡ˆå¾é–‹ç™¼åˆ°ä¸Šç·šçš„éç¨‹ä¸­ï¼Œå¸¸å¸¸æœ‰å¾ˆå¤šåœ°æ–¹éœ€è¦äººå·¥ä»‹å…¥ï¼Œåƒæ˜¯éœæ…‹åˆ†æã€ç¨‹å¼ç¢¼é¢¨æ ¼åŠèªæ³•æª¢æŸ¥ã€æ¸¬è©¦ã€ä½ˆç½²ç­‰ç­‰ã€‚é€éå°å…¥æŒçºŒæ•´åˆ (Continuous Integration ç°¡ç¨± CI) ä»¥åŠè‡ªå‹•åŒ–ä½ˆç½²å¾Œï¼Œé€™äº›å°ˆæ¡ˆå°±å†ä¹Ÿä¸æ˜¯ legacy å°ˆæ¡ˆäº†ï¼›æ•´å€‹å»ºç½®ä½ˆç½²çš„éç¨‹å®Œå…¨è‡ªå‹•åŒ–ï¼Œå› ç‚ºäººå·¥ä»‹å…¥è€Œå‡ºéŒ¯çš„æ©Ÿæœƒå¤§å¤§é™ä½ã€‚</p>
<p>é€™ä¸€æ­¥çœ‹èµ·ä¾†å°å¯¦éš›çš„ç¨‹å¼ç¢¼æ²’ä»€éº¼å½±éŸ¿ï¼Œä½†äº‹å¯¦ä¸Šå°é–‹ç™¼è€…å¿ƒç†å±¤é¢å½±éŸ¿éå¸¸å·¨å¤§ã€‚ä¸€èˆ¬ä¾†èªªï¼Œé€™å€‹æµç¨‹é‚„æœƒæ­é…ç‰ˆæœ¬æ§åˆ¶ç³»çµ±çš„åˆ†æ”¯ä¾†åšä¸åŒåŸ·è¡Œç’°å¢ƒçš„è‡ªå‹•åŒ–ä½ˆç½²ï¼Œåˆ†é›¢å‡ºæ¸¬è©¦ç’°å¢ƒèˆ‡æ­£å¼ç’°å¢ƒï¼›åœ¨ç¨‹å¼ä½ˆç½²åˆ°æ¸¬è©¦ç’°å¢ƒæ™‚ï¼Œå°±èƒ½è®“é–‹ç™¼è€…æ›´å¿«é€Ÿåœ°ç™¼ç¾æŸäº›ç„¡æ³•é€éå–®å…ƒæ¸¬è©¦ä¾†æ‰¾å‡ºçš„æ•´åˆæ€§å•é¡Œã€‚</p>
<h2 id="å°å…¥-e2e-è‡ªå‹•åŒ–æ¸¬è©¦">å°å…¥ e2e è‡ªå‹•åŒ–æ¸¬è©¦</h2>
<p>å¦ä¸€é …æ›´é‡è¦çš„å·¥ä½œæ˜¯è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œå®ƒå°ç¨‹å¼ä¾†èªªå°±åƒæ˜¯å€‹å®‰å…¨ä¿éšªã€‚æ‰€è¬‚çš„ legacy code é€šå¸¸å°±æ˜¯æŒ‡æ²’æœ‰è‡ªå‹•åŒ–æ¸¬è©¦çš„ç¨‹å¼ç¢¼ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨ä¿®æ”¹å®ƒå€‘æ™‚ç¸½æ˜¯æœƒè®“äººå¿ƒé©šè†½è·³ï¼Œæ·±æ€•æ”¹æ±å£è¥¿ã€‚å› æ­¤ä¸è«–æ˜¯æƒ³é‡æ§‹æˆ–æ˜¯é‡å¯«ï¼Œéƒ½å¿…é ˆå…ˆç‚ºç¨‹å¼ç¢¼åŠ è‡ªå‹•åŒ–æ¸¬è©¦æ‰è¡Œã€‚</p>
<p>ä½†é€™æ™‚å€™å¹«ç´°éƒ¨ç¨‹å¼åšå–®å…ƒæ¸¬è©¦å…¶å¯¦ä¸æ˜¯å¾ˆæ˜æ™ºçš„æŠ‰æ“‡ï¼Œå› ç‚ºå¤§ç²’åº¦çš„é‡æ§‹æˆ–æ˜¯æ•´å€‹é‡å¯«ï¼Œéƒ½æœƒè®“ç¨‹å¼å–®å…ƒæœ‰å¤§å¹…åº¦çš„èª¿æ•´ã€‚å› æ­¤é€šå¸¸æœƒä¾æ“šæ­£åœ¨ä¸Šç·šçš„ç¨‹å¼æ‰€å‘ˆç¾çš„å¤–åœ¨è¡Œç‚ºä¾†åšç‚ºæ¸¬è©¦çµæœçš„é©—è­‰åŸºæº–ï¼Œä¸€èˆ¬ä¾†èªªé€™å°±æ˜¯æŒ‡æ’°å¯« e2e æ¸¬è©¦ï¼›è€Œå‰é¢æ•´ç†å‡ºä¾†çš„è¦æ ¼èˆ‡æƒ…å¢ƒï¼Œé€™æ™‚å°±å¯ä»¥ç”¨ä¾† e2e æ¸¬è©¦çš„æ¸¬è©¦æ¡ˆä¾‹äº†ã€‚</p>
<p>å®Œæˆ e2e æ¸¬è©¦å¾Œï¼Œæ¥ä¸‹ä¾†å°±å¯ä»¥é€²è¡Œé‡æ§‹æˆ–é‡å¯«äº†ã€‚è€Œé‡æ§‹æˆ–é‡å¯«éƒ½æœ‰æŸäº›æŠ€å·§ï¼Œä»¥ä¸‹ä»‹ç´¹å¹¾å€‹ï¼š</p>
<h2 id="é¸å€‹å¥½-ide-è®“è‡ªå·±çœ‹è¦‹-legacy-code-çš„ç—…å› ">é¸å€‹å¥½ IDE è®“è‡ªå·±çœ‹è¦‹ legacy code çš„ç—…å› </h2>
<p>ä»¥ PHP ç‚ºä¾‹ï¼Œå¾ˆå¤šäººæœƒè¦ºå¾—ç”¨ VIM æˆ–å…¶ä»–ç¨‹å¼ç·¨è¼¯å™¨ä¾†é–‹ç™¼ PHP å°±å·²ç¶“è¶³å¤ äº†ï¼Œç•¶ç„¶é€™æ²’æœ‰ä»€éº¼ä¸å¥½ã€‚åªæ˜¯ç•¶æ¯æ¬¡æˆ‘ç”¨ PhpStorm æ‰“é–‹ç”¨ä»–å€‘å¯«çš„ç¨‹å¼ç¢¼æ™‚ï¼Œå°±æœƒçœ‹åˆ°ç´…è‰²æ³¢æµªåº•ç·šã€åœŸé»ƒè‰²èƒŒæ™¯çš„å¸¸æ•¸ã€ç°è‰²çš„è®Šæ•¸æˆ–é¡åˆ¥ï¼Œå¿ƒä¸­å°±æœƒæœ‰ç¨®ä¸å¿«çš„æ„Ÿè¦ºã€‚å› ç‚ºä½ å¤ªæ™šçŸ¥é“ä½ çš„ç¨‹å¼ç¢¼æœ‰ç—…ï¼Œè€Œé€™äº›ç—…æ˜¯å…¶ä»–ç·¨è¼¯å™¨æ²’æœ‰å¹«ä½ æ‰¾åˆ°çš„ã€‚</p>
<p>ä¹Ÿè¨±ä½ æƒ³åˆ°äº†ç¨‹å¼ç¢¼éœæ…‹åˆ†ææ˜¯å¯ä»¥ç™¼è¦ºé€™äº›å•é¡Œçš„æ–¹æ³•ï¼Œåªæ˜¯å¤§å¤šæ•¸é–‹ç™¼è€…ä¸æœƒæ„è­˜åˆ°è¦å»åšé€™ä»¶äº‹ï¼›è€Œä¸”å³ä¾¿çŸ¥é“è©²åšè€Œå»åšï¼Œæ™‚é–“ä¸€ä¹…ä¹Ÿæœƒè¦ºå¾—éº»ç…©æˆ–æ ¹æœ¬å°±å¿˜äº†é€™å›äº‹ã€‚ä¹Ÿè¨±æœ‰äº›äººæƒ³èªªä¹¾è„†åœ¨ commit å‰å…ˆè®“å·¥å…·å»è‡ªå‹•æª¢æŸ¥å§ï¼Œé€™è½èµ·ä¾†åƒæ˜¯å€‹å¥½ä¸»æ„ï¼›åªæ˜¯è¦ç­‰åˆ°æ¯æ¬¡ commit æ‰æœƒç™¼ç¾é€™äº›å•é¡Œï¼Œä½ æ—©å°±éºå¤±ç•¶ä¸‹ coding æ™‚çš„ mind context äº†ã€‚</p>
<h2 id="ç”¨åŠŸèƒ½åˆ‡æ›-feature-toggle-ä¾†é‡æ§‹">ç”¨åŠŸèƒ½åˆ‡æ› (Feature Toggle) ä¾†é‡æ§‹</h2>
<p>é¢å°çµ•å¤§éƒ¨ä»½çš„ legacy code æˆ‘å€‘å¾ˆé›£ä¸€æ­¥åˆ°ä½åœ°é‡æ§‹å®ƒï¼Œé€™æ™‚æˆ‘å€‘å¯ä»¥é€é feature toggle é€™ç¨®æ‰‹æ³•ä¾†å°‡ç³»çµ±çš„åŠŸèƒ½ä¸€å€‹ä¸€å€‹åœ°è½‰æ›åˆ°æ–°çš„æ¶æ§‹ä¸Šã€‚ Feature toggle å¯ä»¥è®“æ–°èˆŠç¨‹å¼æ¶æ§‹åŒæ™‚ä¸¦è¡Œï¼Œåˆ©ç”¨é–‹é—œè®Šæ•¸ä¾†åˆ‡æ›æ–°èˆŠç¨‹å¼ã€‚</p>
<p>ç”±æ–¼ç³»çµ±å°å¤–çš„ API æˆ–é é¢ä¸¦æ²’æœ‰æ”¹è®Šï¼Œè€Œä¸”åœ¨ e2e æ¸¬è©¦çš„ä¿è­‰ä¸‹ï¼Œä½¿ç”¨è€…å…¶å¯¦ä¸¦ä¸æœƒæœ‰æ‰€æ„Ÿè¦ºã€‚å¦ä¸€å€‹å¥½è™•å°±æ˜¯ï¼Œå³ä½¿æ˜¯åœ¨é‡æ§‹çš„éç¨‹ä¸­æœ‰æ–°éœ€æ±‚çš„åŠ å…¥ï¼Œå°±å¯ä»¥å°‡å®ƒæ”¾åˆ°æ–°æ¶æ§‹ä¸­ï¼Œä¸å¿…å›åˆ° legacy code ä¸­å†åšä¸€æ¬¡ã€‚</p>
<h2 id="ç”¨æ¡†æ¶é‡æ–°æ”¹å¯«">ç”¨æ¡†æ¶é‡æ–°æ”¹å¯«</h2>
<p>å¦‚æœ legacy code é€£ e2e æ¸¬è©¦éƒ½ä¸å¥½åšï¼Œé‚£éº¼è¡¨ç¤ºå®ƒè·Ÿç’°å¢ƒçš„é—œä¿‚å·²ç¶“æ ¹æ·±è’‚å›ºäº†ã€‚æˆ‘åœ¨é‡åˆ°é€™é¡å°ˆæ¡ˆæ™‚ï¼Œé¸æ“‡çš„å°±æ˜¯é‡å¯«ã€‚åªä¸éé‡å¯«ä¸èƒ½å†é‡è¹ˆè¦†è½ï¼Œæ‰€ä»¥é¸æ“‡ä¸€å€‹èƒ½å¤ æ–¹ä¾¿åš e2e æ¸¬è©¦æˆ–æ•´åˆæ¸¬è©¦çš„æ¡†æ¶å°±æ˜¯æˆ‘é‡å¯«çš„ç¬¬ä¸€å€‹ç›®æ¨™ã€‚é›–ç„¶èªª e2e æ¸¬è©¦æˆ–æ•´åˆæ¸¬è©¦ä¹Ÿæ˜¯å¯ä»¥è‡ªå·±ä¾†ï¼Œä½†èˆ‡å…¶æŠŠåŠ›æ°£èŠ±åœ¨æ¸¬è©¦æ¶æ§‹çš„è¨­è¨ˆä¸Šï¼Œä¸å¦‚å»æ‰¾å€‹å„ªç§€æ¡†æ¶ä¾†å¾—å¿«ï¼›å› ç‚ºå„ªç§€çš„æ¡†æ¶é€šå¸¸å·²ç¶“æŠŠå¾ˆå¤šåº•å±¤çš„å·¥ä½œæŠ½è±¡åŒ–ï¼Œæ­é…æ•´ç†å¥½çš„è¦æ ¼èˆ‡æƒ…å¢ƒæ‰€æ’°å¯«çš„ e2e æ¸¬è©¦ï¼Œå°±å¯ä»¥è®“é–‹ç™¼è€…å°ˆæ³¨åœ¨åŠŸèƒ½é¢çš„é–‹ç™¼ä¸Šã€‚</p>
<p>åœ¨ç”¨æ¡†æ¶é‡å¯«æ™‚ï¼Œå¯ä»¥æŠŠæ¡ä¸€å€‹é‡é»ï¼šè¶Šé«˜å±¤è¶Šæ¥è¿‘éœ€æ±‚ï¼Œè¶Šåº•å±¤è¶Šæ¥è¿‘å¯¦ä½œï¼›ä¹Ÿå°±æ˜¯åˆ©ç”¨æ¡†æ¶çš„æŠ½è±¡æ©Ÿåˆ¶ä¾†å°è£åº•å±¤çš„æ“ä½œç´°ç¯€ï¼Œä¾‹å¦‚è³‡æ–™åº«æˆ–å¿«å–ç­‰ã€‚é€™éº¼ä¸€ä¾†å³ä½¿åº•å±¤æœå‹™éœ€è¦æŠ½æ›ï¼Œä¹Ÿä¸è‡³æ–¼å½±éŸ¿åˆ°é«˜å±¤çš„é‚è¼¯ã€‚å¾ˆå¤š legacy code å°±æ˜¯åœ¨é‚è¼¯å±¤é‚„å¤¾é›œå¾ˆå¤šåº•å±¤æœå‹™çš„æ“ä½œï¼Œçµæœåœ¨ç³»çµ±éœ€è¦æ›´æ›ç’°å¢ƒæ™‚ï¼Œå¾—èŠ±å¾ˆå¤šåŠ›æ°£åœ¨ä¿®æ”¹é€™äº›ç¨‹å¼ç¢¼ã€‚</p>
<h2 id="è¨å­å¯«æ–‡ä»¶é‚£å°±æ”¹ç”¨-bdd-behavior-driven-development">è¨å­å¯«æ–‡ä»¶ï¼Ÿé‚£å°±æ”¹ç”¨ BDD (Behavior-Driven Development)</h2>
<p>é‡å¯«çš„å°ˆæ¡ˆæˆ‘æœƒè¦æ±‚ç”¨ BDD ä¾†é–‹ç™¼ï¼ŒåŸå› ç„¡å®ƒï¼šå› ç‚ºå¯«å¥½çš„æ–‡ä»¶å°±å¯ä»¥æ‹¿ä¾†é©—è­‰ç¨‹å¼ç¢¼ã€‚å¦‚æœä½ è¦ºå¾—å¯«æ–‡ä»¶å¾ˆæµªè²»æ™‚é–“ï¼Œä¸å¦‚å¯«ç¨‹å¼ä¸€æ¬¡æå®šï¼Œé‚£éº¼ BDD çµ•å°æœƒæ˜¯ä½ æ‡‰è©²è©¦è©¦çš„é–‹ç™¼æ¨¡å¼ã€‚å› ç‚ºå¸¸è¦‹çš„ BDD æ¡†æ¶é€šå¸¸æ˜¯æ¡ç”¨ <a href="https://github.com/cucumber/cucumber/wiki/Gherkin">Gherkin èªæ³•</a>ä¾†æå¯«åŠŸèƒ½ (feature) ï¼Œé€™ä½¿å¾—æ–‡ä»¶æœ¬èº«å¾ˆå¥½è®€ï¼Œåˆå®¹æ˜“è½‰æ›æˆé©—è­‰ç”¨çš„ context ç¨‹å¼ï¼Œæ‰€ä»¥ä¹Ÿå¾ˆé©åˆç”¨åœ¨ PM èˆ‡é–‹ç™¼è€…åˆä½œï¼›ä¹Ÿå°±æ˜¯ PM å¯« feature ï¼Œè®“é–‹ç™¼è€…ç”¨ feature ä¾†é©—è­‰è‡ªå·±å¯«çš„ç¨‹å¼ç¢¼ã€‚</p>
<p>BDD é€šå¸¸æ˜¯ä»¥æƒ…å¢ƒä¾†ç•¶é©—è­‰æ¡ˆä¾‹ï¼Œæ‰€ä»¥å‰é¢æ”¶é›†åˆ°çš„è¦æ ¼å’Œæƒ…å¢ƒå¾ˆé©åˆç”¨åœ¨é€™è£¡ï¼Œä¹Ÿå› æ­¤ BDD é€šå¸¸æœƒçµåˆ e2e æ¸¬è©¦ä¾†é€²è¡Œã€‚é€™éº¼ä¸€ä¾†æ–‡ä»¶çš„æ›´æ–°ï¼Œä¹Ÿæœƒå½±éŸ¿åˆ°æ¸¬è©¦æ˜¯å¦èƒ½å¤ é€šéï¼Œå°±ä¸æœƒå†ç™¼ç”Ÿæ–‡ä»¶å’Œç¨‹å¼ç¢¼ä¸ä¸€è‡´çš„æƒ…æ³äº†ã€‚</p>
<h2 id="æŒçºŒä¿æŒæ­£ç¢ºçš„å¿ƒæ…‹">æŒçºŒä¿æŒæ­£ç¢ºçš„å¿ƒæ…‹</h2>
<p>ä¸çŸ¥é“æ˜¯å“ªä¸€åœ‹çš„ç«¥è»å®ˆå‰‡æåˆ°ï¼šã€Œè®“å‡ºå»çš„ç‡Ÿåœ°æ¯”é€²å»æ™‚ä¹¾æ·¨ã€‚ã€é€™æ˜¯èº«ç‚ºå„ªç§€é–‹ç™¼è€…ä¹Ÿå¿…é ˆéµå®ˆçš„å¥½å®ˆå‰‡ã€‚é¢å° legacy code æˆ‘å€‘ç•¶ç„¶å¯ä»¥æŠ±æ€¨ï¼Œä½†ä¹Ÿä¸å¯ä»¥å› æ­¤å°±æ’’æ‰‹ä¸ç®¡ã€‚æ—¢ç„¶æ¥æ‰‹ç¶­è­·äº†ï¼Œåœ¨æ²’ä»€éº¼å¤–åŠ›çš„ç‹€æ³ä¸‹ (é€šå¸¸æ˜¯æ”¿æ²»å› ç´ ) ï¼Œå°±æ‡‰è©²åˆ©ç”¨å„ç¨®æ–¹æ³•ä¸€æ­¥ä¸€æ­¥è®“å®ƒè®Šçš„æ›´å¥½ç¶­è­·ï¼Œè€Œä¸æ˜¯æˆç‚ºä¹‹å¾Œæ¥æ‰‹çš„äººçš„å¤¢é­˜ã€‚</p>
<p>ä¸è«–æ˜¯é‡æ§‹æˆ–æ˜¯é‡å¯«ï¼Œèƒ½ç”Ÿå‡ºæ˜“æ–¼ç¶­è­·çš„å„ªè‰¯ç¨‹å¼ç¢¼çµ•å°æ˜¯é–‹ç™¼è€…çš„é©•å‚²ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>é¢å° Legacy Code ï¼Œè©²é‡æ§‹é‚„æ˜¯é‡å¯«ï¼Ÿ</title>
			<link>https://jaceju.net/refactor-or-rebuild/</link>
			<pubDate>Wed, 09 May 2018 20:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/refactor-or-rebuild/</guid>
			<description>åœ¨ç¨‹å¼å·²ç¶“ä¸Šç·šå¾ˆä¹…å¾ˆä¹…çš„æƒ…æ³ä¸‹ï¼Œå…¬å¸ä¹Ÿæ‰¾äº†ä¸å°‘äººä¾†ç¶­è­·é€™äº›ç¨‹å¼ç¢¼ï¼›è€Œå› ç‚ºé–‹ç™¼è€…ä¾†ä¾†å»å»ï¼ŒåŠ ä¸Šæ¯å€‹äººå°ç¨‹å¼é–‹ç™¼çš„è§€å¿µä¸åŒï¼Œä»–å€‘ä¹Ÿè¨±éƒ½æœ‰éé€™æ¨£çš„</description>
			<content type="html"><![CDATA[<p>åœ¨ç¨‹å¼å·²ç¶“ä¸Šç·šå¾ˆä¹…å¾ˆä¹…çš„æƒ…æ³ä¸‹ï¼Œå…¬å¸ä¹Ÿæ‰¾äº†ä¸å°‘äººä¾†ç¶­è­·é€™äº›ç¨‹å¼ç¢¼ï¼›è€Œå› ç‚ºé–‹ç™¼è€…ä¾†ä¾†å»å»ï¼ŒåŠ ä¸Šæ¯å€‹äººå°ç¨‹å¼é–‹ç™¼çš„è§€å¿µä¸åŒï¼Œä»–å€‘ä¹Ÿè¨±éƒ½æœ‰éé€™æ¨£çš„æ„Ÿå—ï¼š</p>
<ul>
<li>å› ç‚ºç¼ºå°‘è¦æ ¼æ–‡ä»¶ï¼Œé€™åœ˜ç¨‹å¼ç¢¼åˆ°åº•æœ‰å“ªäº›æ˜¯è©²æ‹”é‚„æ˜¯ä¸è©²æ‹”ï¼Œå¾ˆæŠ–ï¼›ç®—äº†ï¼Œæ”¾è‘—ä¸ç®¡å§ã€‚</li>
<li>å› ç‚ºè¿«æ–¼æ™‚é–“å£“åŠ›ï¼Œè¢«åªæ±‚è§£æ±ºçœ¼å‰å•é¡Œæ‰€å¸¶ä¾†çš„ä¸ç©©å®šæ€§å›°æ“¾è‘—ï¼›ç®—äº†ï¼Œæœ‰ bug å†ä¿®ã€‚</li>
<li>å› ç‚ºæ²’æœ‰å¯«éæ¸¬è©¦ï¼Œä¿®æ­£ç¨‹å¼æ™‚å¸¸å¸¸æ“”å¿ƒæ”¹æ±å£è¥¿çš„ä¸å®‰å…¨æ„Ÿï¼›ç®—äº†ï¼Œæœ‰äººå«å†èªªã€‚</li>
<li>å› ç‚ºåœ˜éšŠå·²æœ‰æ…£ä¾‹ï¼Œæƒ³è¦å‹•æ‰‹èª¿æ•´æ¶æ§‹ï¼Œå»æ€•åŒäº‹ä¸æ”¯æŒï¼›ç®—äº†ï¼Œçµ¦ä¸‹å€‹äººå¼„å§ã€‚</li>
<li>å› ç‚ºä¾è³´èªè¨€ç‰¹æ€§ï¼Œæœ‰äº›å¥½çš„ä½œæ³•å¼•å…¥ä¹‹å¾Œåè€Œé€ æˆå•é¡Œï¼›ç®—äº†ï¼Œåæ­£æœƒå‹•å°±å¥½ã€‚</li>
</ul>
<p>çµæœå°ˆæ¡ˆä¸­çš„æŠ€è¡“å‚µè¶Šæ¬ è¶Šå¤šï¼Œè€Œé€™äº›ç¨‹å¼ç¢¼ä¹Ÿè®Šæˆäº†æ‰€è¬‚çš„ legacy code ã€‚</p>
<!-- raw HTML omitted -->
<p>åœ¨ç¶­è­·é€™æ¨£çš„ legacy code æ™‚ï¼Œæˆ‘æƒ³å¾ˆå¤šé–‹ç™¼è€…æ‡‰è©²éƒ½æ€è€ƒéé€™å€‹å•é¡Œï¼šã€Œæˆ‘åˆ°åº•æ‡‰è©²è¦é‡æ§‹é‚„æ˜¯é‡å¯«ï¼Ÿã€è€å¯¦èªªæˆ‘çš„ç­”æ¡ˆå°±æ˜¯ &ldquo;It depends&rdquo; ã€‚</p>
<p>é‡æ§‹èˆ‡é‡å¯«æ²’æœ‰å“ªç¨®æ–¹æ³•ä¸€å®šæ¯”è¼ƒå¥½ï¼Œä¸éåœ¨é¸æ“‡ä¹‹å‰ï¼Œæˆ‘é‚„æ˜¯å¾—å…ˆæŠŠé‡æ§‹å’Œé‡å¯«çš„ä¸åŒèªªæ˜æ¸…æ¥šã€‚</p>
<h2 id="é‡æ§‹ä¸æ˜¯ä½ æƒ³çš„é‚£æ¨£">é‡æ§‹ä¸æ˜¯ä½ æƒ³çš„é‚£æ¨£</h2>
<p>ä¸éå¾ˆå¤šäººå°ã€Œé‡æ§‹ã€é€™å€‹è©æœ‰æ‰€èª¤è§£ï¼Œä»¥ç‚ºå®ƒæ˜¯åœ¨åŠŸèƒ½å®Œæˆå¾Œå¤§å¹…åº¦åœ°ä¿®æ”¹åŸæœ‰çš„ç¨‹å¼ç¢¼ï¼›æ”¾åœ¨ legacy code ä¸Šæ™‚ï¼Œå¤§æ¦‚å°±æœƒèªç‚ºæ˜¯ã€Œæ¶æ§‹è¨­è¨ˆç¿»æ–°ã€é€™ç¨®ç¨‹åº¦çš„ä¿®æ”¹ã€‚</p>
<p>äº‹å¯¦ä¸Šé‡æ§‹çš„ç²’åº¦æ˜¯éå¸¸å°çš„ï¼Œå®ƒä¸¦ä¸æ˜¯æ•´å€‹å°ˆæ¡ˆåšå®Œä¹‹å¾Œæ‰é–‹å§‹ï¼Œè€Œæ˜¯é–‹ç™¼åŠŸèƒ½çš„éç¨‹ä¸­å°±ä¸€å°æ­¥ä¸€å°æ­¥çš„é€²è¡Œã€‚é‡æ§‹çš„æ™‚é–“é»ä¸è¦é›¢å¯«å®Œç¨‹å¼ç¢¼çš„æ™‚é–“é»å¤ªé ï¼Œåƒæ˜¯åœ¨å®Œæˆä¸€å°éƒ¨ä»½çš„åŠŸèƒ½å¾Œå°±ç«‹åˆ»å›é ­çœ‹çœ‹æ˜¯å¦èƒ½è®“ç¨‹å¼ç¢¼æ›´çµæ§‹åŒ–ï¼Œæˆ–æ˜¯åœ¨æ¯æ¬¡é–‹å§‹æ–°åŠŸèƒ½å…ˆæ€è€ƒæ—¢æœ‰çµæ§‹æ˜¯å¦å½±éŸ¿äº†æ–°åŠŸèƒ½çš„åŠ å…¥ï¼›ç„¶å¾Œé‡å°é€™äº›éƒ¨ä»½é€²è¡Œå¾®èª¿ï¼Œæ‰€ä»¥é‡æ§‹ä½”çš„æ˜¯é–‹ç™¼ä¸€å°éƒ¨ä»½çš„æ™‚é–“ã€‚</p>
<p>æœƒæå‡ºè¦é‡æ§‹ legacy code çš„äººï¼Œå¤šæ•¸æ˜¯å¸Œæœ›ä¸è¦èŠ±å¤ªå¤šåŠ›æ°£å»æ’°å¯«æ–°çš„ç¨‹å¼ç¢¼ï¼Œè€Œæ˜¯é‡ç”¨å·²ç¶“å­˜åœ¨çš„é‚è¼¯ï¼›ç•¢ç«Ÿå·²ä¸Šç·šé‹ä½œçš„èˆŠæœ‰ç¨‹å¼ç¢¼ï¼Œæ¯”èµ·é‚£äº›æ²’ç¶“éæ™‚é–“é©—è­‰éçš„æ–°å¯«ç¨‹å¼ç¢¼ä¾†å¾—å¯é æ•¸ç™¾å€ã€‚åªæ˜¯å¦‚æœæƒ³é‡ç”¨é€™äº›æ—¢æœ‰é‚è¼¯æœ‰å…©å€‹å‰æï¼šä¸€ã€å®ƒå€‘æ˜“æ–¼ç†è§£ä¸”æœ‰çµ„ç¹”åŒ–ï¼›äºŒã€æœ‰è‡ªå‹•åŒ–æ¸¬è©¦ã€‚ä¸éä»¤äººè‹¦æƒ±çš„æ˜¯ï¼šå¤§å¤šæ•¸ legacy code éƒ½å¾ˆé›£é”æˆé€™å…©å€‹è¦æ±‚ã€‚</p>
<p>ä½†å‡è¨­é€™å…©å€‹å‰æé”åˆ°çš„æƒ…æ³ä¸‹ï¼Œé€²è¡Œå¤§ç²’åº¦çš„é‡æ§‹ä¹Ÿä¸æ˜¯ä¸å¯èƒ½ï¼Œä½†é‚„æ˜¯æœ‰äº›å·¥ä½œå¾—å…ˆé€²è¡Œã€‚</p>
<h2 id="é‡å¯«ä¹Ÿä¸æ˜¯ä½ æƒ³çš„é‚£æ¨£">é‡å¯«ä¹Ÿä¸æ˜¯ä½ æƒ³çš„é‚£æ¨£</h2>
<p>é‚£éº¼é‡å¯«æ•´å€‹å°ˆæ¡ˆå‘¢ï¼Ÿé‡å¯«è½èµ·ä¾†æ˜¯æ“ºè„«ä¸€äº›èˆŠåŒ…è¢±çš„å¥½æ–¹æ³•ï¼Œä¼¼ä¹é€™æ¨£å°±å¯ä»¥ä¸ç”¨å†å»ç†æœƒé‚£äº› legacy code äº†ã€‚æ‰€ä»¥å°±å¯èƒ½æœƒæœ‰äº›å‰›åˆ°å…¬å¸å¹¾å€‹æœˆçš„æ–°äººï¼Œæœƒåœ¨çœ‹ä¸æ…£å‰äººå¯«çš„ç¨‹å¼ç¢¼æ™‚å°±æå‡ºäº†é‡å¯«çš„å»ºè­°ï¼Œåªä¸éäº‹æƒ…é€šå¸¸ä¸æœƒæ˜¯åƒä»–å€‘æƒ³å¾—é€™éº¼ç°¡å–®ã€‚</p>
<p>å¾ˆå¤š legacy code å•é¡Œéƒ½ä¸æ˜¯æŠ€è¡“çš„å•é¡Œï¼Œè€Œæ˜¯å®ƒå·²ç¶“å‰µé€ å‡ºä¸€å€‹æ¯å€‹äººéƒ½ä¾è³´è‘—å®ƒçš„ä¸–ç•Œï¼Œæ‰€æœ‰ç›¸é—œäººå£«èˆ‡ç¾å­˜ç³»çµ±å°è¦å‰‡çš„èªçŸ¥éƒ½æ˜¯åŸºæ–¼é€™äº› legacy code ï¼›å› æ­¤ä¸€æ—¦ä½ æ±ºå®šçœŸçš„è¦é‡å¯«æ•´å€‹å°ˆæ¡ˆï¼Œä½ å¿…é ˆæœ‰ç›¸ç•¶çš„è‡ªä¿¡å»èªªæœæ‰€æœ‰é—œä¿‚äººï¼Œä¸¦çˆ­å–åˆ°ä¸Šé ­çš„æ”¯æŒï¼›æœ€å¥½èƒ½æå‡ºä¸€ä»½å¯è¡Œçš„ roadmap ï¼Œä¾†è®“å¤§å®¶èƒ½å¤ å¯©è¦–ä½ çš„æƒ³æ³•ã€‚å†ä¾†ä¹Ÿè¦è€ƒæ…®åˆ°å…¬å¸æ˜¯å¦å°é€™å€‹å°ˆæ¡ˆæœ‰å…¶ä»–é å®šä¸­çš„è¨ˆåŠƒï¼Œæœ‰æ²’æœ‰æ™‚é–“è®“ä½ é‡å¯«ã€‚</p>
<p>é‡å¯«æœ€é‡è¦çš„ä¸€é»ï¼Œæ˜¯ä½ å¤ ä¸å¤ æ¸…æ¥šé€™å€‹ç³»çµ±ç¾è¡Œçš„è¦æ ¼ã€‚ç•¶ä½ çœŸçš„å¯ä»¥é‡å¯«æ™‚ï¼Œä½ å¿…é ˆé‚€è«‹ PM æˆ–ç†Ÿæ‚‰é€™å€‹ç³»çµ±ä¾†é¾å»è„ˆçš„äººå“¡ä¾†å”åŠ©ä½ ç­è§£æ•´å€‹èˆŠæœ‰ç³»çµ±ã€‚å¾ˆå¤šå¤±æ•—çš„é‡å¯«ï¼Œå°±æ˜¯å› ç‚ºä¸å¤ ç­è§£åŸæœ‰çš„ç³»çµ±è¦å‰‡ï¼Œä¸æ¸…æ¥šç‚ºä»€éº¼å‰äººé‡å°æŸäº›æƒ…å¢ƒæ’°å¯« workaround ï¼Œçµæœåœ¨æ–°å°ˆæ¡ˆä¸Šç·šæ™‚å› ç‚ºå°‘åšäº†æŸäº›ç´°éƒ¨åŠŸèƒ½è€Œä½¿å¾—æ•´å€‹æœå‹™å¤§çˆ†ç‚¸ã€‚æ‰€ä»¥ç•¶ä½ æƒ³å¤§åˆ€é—Šæ–§åœ°ç æ‰é‡å¯«ï¼Œå°±å¾—æƒ³è¾¦æ³•æŠŠæ‰€æœ‰è¦å‰‡éƒ½æ¶µè“‹åˆ°ï¼›è€Œé€™ä»¶äº‹æœ¬èº«å°±æ˜¯æ› æ—¥è²»æ™‚ï¼Œä½ ä¸å¯èƒ½é¦¬ä¸Šå®Œæˆï¼Œæ‰€ä»¥é‚„æ˜¯å¿…é ˆé¡§å¥½ç¾è¡Œçš„ legacy code ã€‚</p>
<p>é€™ä½¿å¾—é‡å¯«æœ‰å€‹å¾ˆæ˜é¡¯çš„åŠ£å‹¢ï¼šç•¶é—œä¿‚äººæ‰“ç®—åœ¨æœå‹™æ–°å¢åŠŸèƒ½æ™‚ï¼Œä½ å¯èƒ½è¦åœ¨èˆŠå°ˆæ¡ˆå’Œæ–°å°ˆæ¡ˆä¸ŠåŒæ™‚é€²è¡Œã€‚æ‰€ä»¥ä¸€èˆ¬é‡å¯«æ™‚éƒ½æœƒè«‹ PM å‡çµéœ€æ±‚ï¼Œè®“æ–°å°ˆæ¡ˆä¸Šç·šå¾Œå†ç¹¼çºŒå¯¦ä½œé€™äº›æ–°åŠŸèƒ½ï¼›åªæ˜¯é€™æ™‚å€™ä½ å°±å¾—è·Ÿæ™‚é–“è³½è·‘ï¼Œå¦‚æœä½ å®¶ PM äººå¾ˆå¥½çš„è©±æœƒå¹«ä½ æ“‹éœ€æ±‚ï¼Œåªæ˜¯ä»–æ“‹å¾—äº†ä¸€æ™‚ï¼Œæ“‹ä¸äº†ä¸€ä¸–ã€‚</p>
<h2 id="æ‰€ä»¥æˆ‘åˆ°åº•è©²é¸å“ªæ¢è·¯">æ‰€ä»¥æˆ‘åˆ°åº•è©²é¸å“ªæ¢è·¯ï¼Ÿ</h2>
<p>å‡è¨­ä¸è«–æ˜¯é‡æ§‹æˆ–æ˜¯é‡å¯«ï¼Œå…¬å¸éƒ½çµ¦æ™‚é–“äº†ï¼Œæˆ‘å€‘è©²æ€éº¼é¸æ“‡å‘¢ï¼Ÿé›–ç„¶èªªæ˜¯ &ldquo;It depends&rdquo; ï¼Œä½†ç¸½æ‡‰è©²æœ‰äº›åˆ¤æ–·çš„åŸå‰‡å§ï¼Ÿé€™é‚Šæˆ‘ç°¡å–®æ•´ç†é‡æ§‹æ™‚è¦è‘—é‡çš„å¹¾å€‹è¦é»ï¼š</p>
<ol>
<li>å°ˆæ¡ˆæœ¬èº«å·²ç¶“æœ‰æ•´ç†å¥½ç›¸é—œæ–‡ä»¶ï¼ŒåŒæ™‚ä¹Ÿæœ‰è‡ªå‹•åŒ–æ¸¬è©¦ã€‚</li>
<li>å°ˆæ¡ˆæœ¬èº«åªæ˜¯éƒ¨ä»½ç¨‹å¼é«”è³ªä¸ä½³ï¼Œæ•´é«”ä¾†èªªé‚„ç®—å¥½ç†è§£ã€‚</li>
<li>å°ˆæ¡ˆå½±éŸ¿åˆ°çš„é—œä¿‚äººå¤ªå¤šï¼Œç„¡æ³•è¼•æ˜“å‡çµéœ€æ±‚ã€‚</li>
</ol>
<p>ç¬¦åˆä¸Šè¿°ç‰¹é»çš„å°ˆæ¡ˆï¼Œä½ å¯ä»¥è€ƒæ…®ç”¨é‡æ§‹ï¼Œä¸€é»ä¸€é»åœ°ä¾†å°‡å®ƒçš„é«”è³ªèª¿æ•´å¥½ã€‚</p>
<p>é‚£éº¼ä»€éº¼æ™‚å€™è¦è€ƒæ…®é‡å¯«ï¼Ÿ</p>
<ol>
<li>æ”¹å€‹å¹¾è¡Œç¨‹å¼ç¢¼å°±å¾—èŠ±å¾ˆå¤šæˆæœ¬ä¾†æ‰‹å‹•æ¸¬è©¦ã€‚</li>
<li>å°ˆæ¡ˆç”¨çš„æŠ€è¡“å·²ç¶“æ²’äººæ”¹å¾—å‹•å®ƒäº†ï¼Œæˆ–æ˜¯æ–°çš„ç³»çµ±ç’°å¢ƒä¸æ”¯æ´ã€‚</li>
<li>ç¾è¡Œçš„æŠ€è¡“æˆ–æ˜¯ä½ çš„èƒ½åŠ›å¯èƒ½å¯ä»¥æ›´å¿«åœ°å¯¦ç¾åŒæ¨£çš„ç³»çµ±ã€‚</li>
<li>æ²’äººçŸ¥é“æŸäº›åŠŸèƒ½é‚„æœ‰æ²’æœ‰ç”¨ï¼Œæ–‡ä»¶ä¹Ÿæ—©å°±éºå¤±äº†ã€‚</li>
</ol>
<p>ç•¶ç„¶ä»¥ä¸Šåˆ—çš„é€™äº›è¦é»ä¸è¦‹å¾—æœ‰å…¨é¢çš„è€ƒé‡ï¼Œé‡è¦çš„é‚„æ˜¯è¦çœ‹å¤§å®¶æ‰€é¢å°çš„å°ˆæ¡ˆç‹€æ³ä¾†æ±ºå®šã€‚ç°¡å–®ä¾†èªªï¼Œç•¶ legacy code çš„è¤‡é›œåº¦å·²ç¶“é«˜åˆ°ä½ é›£ä»¥ç¶­è­·ï¼Œæ¯æ¬¡ä¿®æ”¹éƒ½è¦è€—è²»å¤§é‡æ™‚é–“èˆ‡äººåŠ›å»é©—è­‰æ™‚ï¼Œä¹Ÿè¨±å°±æ˜¯é‡å¯«çš„å¥‘æ©Ÿï¼›åœ¨é€™ä¹‹å‰ï¼Œä½ é‚„æ˜¯æ‡‰è©²ä»¥é‡æ§‹ç‚ºå„ªå…ˆã€‚</p>
<p>ä¸è«–æ˜¯é‡æ§‹æˆ–é‡å¯«ï¼Œéƒ½ä¸€å®šè¦ç­è§£é€™å…©è€…å°å…¬å¸æ‰€ç”¢ç”Ÿçš„è¡æ“Šï¼Œé€™æ¨£æ‰èƒ½æ‰¾å‡ºå½±éŸ¿æœ€å°çš„æ–¹å¼ä¾†è®“ legacy project ç…¥ç„¶ä¸€æ–°ã€‚</p>
<p>ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä¾†èŠèŠä¸€äº›æˆ‘åœ¨<a href="/steps-of-refactoring-or-rebuilding">é‡æ§‹æˆ–é‡å¯«æ™‚çš„ç¶“é©—èˆ‡å¿ƒå¾—</a>ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>æ¸¬è©¦è©²é©—è­‰çµæœé‚„æ˜¯è©²é©—è­‰ç´°ç¯€</title>
			<link>https://jaceju.net/to-test-the-detail-or-to-test-the-result/</link>
			<pubDate>Sat, 18 Mar 2017 23:29:11 +0800</pubDate>
			
			<guid>https://jaceju.net/to-test-the-detail-or-to-test-the-result/</guid>
			<description>å¾ˆå¤šäººåœ¨å¯«æ¸¬è©¦æ™‚ï¼Œå¸¸æœƒé™·å…¥è©²å»æ¸¬è©¦çµæœé‚„æ˜¯æ¸¬è©¦ç´°ç¯€çš„å›°æ“¾è£¡ã€‚é›–ç„¶æˆ‘çš„æ¸¬è©¦å¯«å¾—ä¸ç®—å¤ªå¤šï¼Œä½†æˆ‘é‚„æ˜¯æä¾›ä¸€äº›çœ‹æ³•èˆ‡å¯¦å‹™ä¸Šçš„ç¶“é©—ä¾›å¤§å®¶åƒè€ƒã€‚ å¾ç”Ÿæ´»ä¸­</description>
			<content type="html"><![CDATA[<p><img src="/resources/to-test-the-detail-or-to-test-the-result/to-test-the-detail-or-to-test-the-result.png" alt=""></p>
<p>å¾ˆå¤šäººåœ¨å¯«æ¸¬è©¦æ™‚ï¼Œå¸¸æœƒé™·å…¥è©²å»æ¸¬è©¦çµæœé‚„æ˜¯æ¸¬è©¦ç´°ç¯€çš„å›°æ“¾è£¡ã€‚é›–ç„¶æˆ‘çš„æ¸¬è©¦å¯«å¾—ä¸ç®—å¤ªå¤šï¼Œä½†æˆ‘é‚„æ˜¯æä¾›ä¸€äº›çœ‹æ³•èˆ‡å¯¦å‹™ä¸Šçš„ç¶“é©—ä¾›å¤§å®¶åƒè€ƒã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å¾ç”Ÿæ´»ä¸­çš„å¯¦ä¾‹ä¾†çœ‹">å¾ç”Ÿæ´»ä¸­çš„å¯¦ä¾‹ä¾†çœ‹</h2>
<p>æˆ‘å€‘å¾ä¸€å€‹ç”Ÿæ´»ä¸Šçš„ä¾‹å­ä¾†èªªæ˜å¥½äº†ï¼Œä»¥ä¸‹æˆ‘æœƒæŠŠã€Œä½ ã€ç•¶æˆä¸»è§’ï¼Œé€™æ¨£ä»£å…¥æ„Ÿæœƒå¼·çƒˆä¸€é»ã€‚</p>
<p>å‡è¨­ä½ æ¯é€±ä¸‰ä¸‹ç­å¾Œéƒ½è¦å›ºå®šåƒåŠ æŸå€‹èšæœƒï¼Œè€Œé€™å€‹èšæœƒçš„é–‹å§‹æ™‚é–“æ˜¯æ™šä¸Šä¸ƒé»åŠï¼›æ›å¥è©±èªªï¼Œä¸ç®¡ä½ ä½•æ™‚ä¸‹ç­ï¼Œä½ ä¸€å®šè¦åœ¨ä¸ƒé»åŠå‰å‡ºç¾åœ¨æœƒå ´ã€‚</p>
<p>ç”¨ç¨å¾®æ­£å¼ä¸€é»çš„ User Story å¯«æ³•å°±æœƒåƒé€™æ¨£ï¼š</p>
<pre><code>ç‚ºäº†ã€Œä¸‹ç­å»åƒåŠ æ¯é€±ä¸‰ä¸ƒé»åŠçš„èšæœƒã€
èº«ç‚ºã€Œå›ºå®šæˆå“¡ã€
æˆ‘è¦åœ¨ã€Œä¸ƒé»åŠå‰å‡ºç¾åœ¨æœƒå ´ã€
</code></pre><p>å¥½äº†ï¼Œç¾åœ¨ä½ éœ€è¦äº¤é€šå·¥å…·å»æœƒå ´ï¼Œä»¥ä½ çš„ç¶“é©—ï¼Œä½ è¦ºå¾—å…¬è»Šæ˜¯æœ€å¿«çš„æ–¹å¼ã€‚</p>
<p>(ç‚ºäº†è§£é‡‹æ–¹ä¾¿ï¼Œé€™è£¡æˆ‘æœƒç‰¹æ„å¿½ç•¥èµ°è·¯ç­‰å…¶ä»–ç‘£ç¢çš„è¡Œç‚ºæ‰€è€—è²»çš„æ™‚é–“ï¼Œè«‹ä¸è¦å¤ªåœ¨æ„ã€‚)</p>
<p>æ‰€ä»¥ä»¥ä¸‹æ˜¯ä½ çš„æ¸¬è©¦éç¨‹ï¼š</p>
<ul>
<li>å‡å®šæˆ‘æ™šä¸Šå…­é»åŠä¸‹ç­</li>
<li>å‡å®šå…¬è»Šæ˜¯æ™šä¸Šå…­é»å››ååˆ†ä¾†</li>
<li>æˆ‘æ­å…¬è»Šæ­äº†å››ååˆ†é˜</li>
<li>æˆ‘æ–·å®šè‡ªå·±åœ¨æ™šä¸Šä¸ƒé»åŠå‰åˆ°é”æœƒå ´</li>
</ul>
<p>çœ‹èµ·ä¾†å¾ˆå®Œç¾ï¼Œé€£çºŒå¹¾é€±ä¸‹ä¾†é€™å€‹æ¸¬è©¦ä¹Ÿæ²’ç™¼ç”Ÿä»€éº¼å•é¡Œï¼Œç›´åˆ°æŸå¤©ä½ åš´é‡é²åˆ°ã€‚</p>
<p>è¿½æŸ¥é€™å€‹æ¸¬è©¦å¤±æ•—çš„åŸå› ï¼Œä½ ç™¼ç¾å…¬è»Šæ™‚åˆ»æ›´æ”¹äº†ï¼ŒåŸæœ¬å…­é»å››ååˆ†çš„å…¬è»Šæ”¹åˆ°å…­é»äº”ååˆ†ï¼›å¦å¤–åŠ ä¸Šä¸ƒé»æ™‚æŸæ®µè·¯å£å¡è»Šç‹€æ³çªç„¶è®Šå¾—å¾ˆåš´é‡ï¼Œä½¿å¾—åŸæœ¬å››ååˆ†é˜çš„è·¯ç¨‹è®Šæˆäº”ååˆ†é˜ã€‚é€™å…©å€‹å› ç´ ä½¿å¾—ä½ å¿…é ˆå¦å¤–æ‰¾å°‹æ›¿ä»£çš„äº¤é€šå·¥å…·ï¼Œä¾‹å¦‚æ·é‹æˆ–è¨ˆç¨‹è»Šï¼Œæƒ³ç•¶ç„¶é€™å€‹æ¸¬è©¦ä¹Ÿä¸èƒ½å†ç”¨äº†ã€‚</p>
<p>å¾ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œæ­å…¬è»Šçš„ç´°ç¯€å½±éŸ¿è‘—ä½ å°é€™å€‹è¦æ ¼çš„é©—è­‰ï¼Œä½†å¯¦éš›ä¸Šè¦æ ¼ä¸¦æ²’æœ‰è¦æ±‚ä½ ä¸€å®šè¦æ­å…¬è»Šã€‚æ­å…¬è»Šæœ¬èº«ä¸Šä¸€ç¨® Non-Feature ï¼Œæ˜¯é–‹ç™¼è€…ç‚ºäº†æ»¿è¶³éœ€æ±‚è€ŒåŠ å…¥çš„é¡å¤–æ¢ä»¶ã€‚äº‹å¯¦ä¸Šä½ æ­ä»»ä½•ä¸€ç¨®äº¤é€šå·¥å…·éƒ½å¯ä»¥ï¼Œåªè¦å®ƒèƒ½åœ¨æ™‚é–“å…§å¸¶ä½ åˆ°ç›®çš„åœ°å°±è¡Œã€‚</p>
<p>æ—¢ç„¶åœ¨é€™å€‹éœ€æ±‚ä¸­æ­å…¬è»Šæ˜¯ä¸å¿…è¦çš„ç´°ç¯€ï¼Œæˆ‘å€‘å¯ä»¥æŠŠæ¸¬è©¦æ”¹æˆé€™æ¨£ï¼š</p>
<ul>
<li>å‡å®šæˆ‘æ™šä¸Šå…­é»åŠä¸‹ç­ã€‚</li>
<li>æˆ‘æ­ä¸Šè»Šç¨‹ä¸€å°æ™‚ä»¥å…§çš„äº¤é€šå·¥å…·ã€‚</li>
<li>æˆ‘æ–·å®šè‡ªå·±åœ¨æ™šä¸Šä¸ƒé»åŠå‰åˆ°é”æœƒå ´ã€‚</li>
</ul>
<p>ç¾åœ¨ä½ å°±å¯ä»¥æ­ä»»ä½•ä¸€ç¨®äº¤é€šå·¥å…·ï¼Œåªè¦å®ƒèƒ½æ»¿è¶³ä½ çš„éœ€æ±‚ã€‚æ›å¥è©±èªªï¼Œä½ çš„ç¨‹å¼æ˜¯ä¾è³´åœ¨äº¤é€šå·¥å…·é€™å€‹ä»‹é¢ä¸Šã€‚</p>
<p>é€™éº¼ä¸€ä¾†å°±èƒ½å°å‡ºä¸€å€‹è§€å¿µï¼š<strong>æ¸¬è©¦æ¡ˆä¾‹æ‡‰è©²åªæ¸¬è©¦é—œæ³¨çš„äº‹æƒ…ï¼Œç•¶æ¸¬è©¦ç²’åº¦è¶Šç²—ï¼Œé—œæ³¨çš„äº‹ä¹Ÿè©²è¶ŠæŠ½è±¡</strong>ã€‚</p>
<p>è®“æ¸¬è©¦ç›¸ä¾æ–¼ä»‹é¢çš„å¥½è™•åœ¨æ–¼é‡æ§‹æ™‚ï¼Œæˆ‘å€‘ä¸ç”¨å†å°ç´°ç¯€å»èª¿æ•´æ¸¬è©¦ï¼›ä½ åªéœ€è¦å°ä»‹é¢å»èª¿æ•´æœŸæœ›çš„è¼¸å‡ºå°±å¥½ï¼Œå³ä¾¿æ˜¯ä½ æƒ³æ¸¬è©¦ç•°å¸¸ç‹€æ³ã€‚</p>
<h2 id="é‚£éº¼ç´°ç¯€ä¸é‡è¦å—">é‚£éº¼ç´°ç¯€ä¸é‡è¦å—ï¼Ÿ</h2>
<p>ä½ å¯èƒ½æœƒæƒ³ï¼šã€Œä¸å°å‘€ï¼Œæˆ‘é‚„æ˜¯å°è»Šç¨‹ä¸€å°æ™‚è¦æ€éº¼é”æˆé€™ä»¶äº‹æ²’ä»€éº¼æ¦‚å¿µã€‚åƒå‰›å‰›å…¬è»Šæ™‚åˆ»å’Œå…¬è»Šè»Šç¨‹å°±å¾ˆå®¹æ˜“é©—è­‰ï¼Œåªæœ‰ä¸€å°æ™‚é€™å€‹æ¢ä»¶çš„è©±æˆ‘å¾ˆé›£é©—è­‰ï¼Œæ‰€ä»¥é‚„æ˜¯è¦é©—è­‰ç´°ç¯€å§ï¼Ÿã€</p>
<p>ç•¶ç„¶ï¼Œé€™è£¡æˆ‘å€‘ç¢ºå¯¦éœ€è¦å°ç‰¹å®šäº¤é€šå·¥å…·çš„è»Šç¨‹æœ‰é©—è­‰æ–¹æ³•ï¼Œä½†å®ƒä¸å±¬æ–¼é¡¯æ€§çš„éœ€æ±‚ï¼Œæˆ‘å€‘è¦å¦å¤–å°é€™é¡éš±æ€§éœ€æ±‚ä¾†ç¨ç«‹å‡ºæˆ‘å€‘çš„æ¨¡çµ„ã€‚</p>
<p>å‰›å‰›æåˆ°æˆ‘å€‘å¯ä»¥æœ‰ä¸åŒçš„äº¤é€šå·¥å…·ä¾†é”æˆéœ€æ±‚ï¼Œä½†æˆ‘å€‘å› ç‚ºç¶“é©—åªé¸æ“‡äº†å…¬è»Šï¼›é€™å°æ‡‰åˆ°è»Ÿé«”é–‹ç™¼å¯¦å‹™ä¸Šçš„è©±ï¼Œä¹Ÿå°±æ˜¯å› ç‚ºæ™‚ç¨‹é—œä¿‚ï¼Œæˆ‘å€‘æœƒå…ˆç”¨æŸç¨®ç•¶ä¸‹å¯è¡Œçš„åšæ³•ã€‚</p>
<p>é€™æ™‚å€™æˆ‘å€‘è¦å°å¯¦ä½œäº¤é€šå·¥å…·é€™å€‹ä»‹é¢çš„å…¬è»Šåšè¡Œç‚ºä¸Šçš„é©—è­‰ï¼Œç›®æ¨™æ˜¯ä¸€å°æ™‚å…§çš„è»Šç¨‹ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥å°å…¬è»Šå¯«å‡ºä»¥ä¸‹çš„æ¸¬è©¦ï¼š</p>
<ul>
<li>å‡å®šæ™šä¸Šå…­é»å››ååˆ†æœ‰ä¸€ç­ 306 å…¬è»Šå¾ç”²åœ°å‡ºç™¼ã€‚</li>
<li>å‡å®šå®ƒåˆ°é”ä¹™åœ°çš„çš„æ™‚åˆ»ç‚ºæ™šä¸Šä¸ƒé»äºŒååˆ†ã€‚</li>
<li>æˆ‘æ­ä¸Šé€™ç­å…¬è»Šã€‚</li>
<li>æˆ‘æ–·å®šæˆ‘åˆ°é”ä¹™åœ°èŠ±äº†å››ååˆ†é˜ã€‚</li>
</ul>
<p>å› ç‚ºæˆ‘å€‘é—œæ³¨çš„å°è±¡æ˜¯å…¬è»Šï¼Œæ‰€ä»¥é€™æ™‚å€™å…¬è»Šæ™‚åˆ»å’Œå“ªç­å…¬è»Šé€™äº›ç´°ç¯€å°æˆ‘å€‘ä¾†èªªå°±æ˜¯å¿…è¦çš„ã€‚</p>
<p>æŠŠå¯¦ä½œæ‹†é–‹ä¾†ç¨ç«‹æ¸¬è©¦å¾Œï¼Œä½ å°±å¯ä»¥å°ˆæ³¨åœ¨é€™å€‹å¯¦ä½œæ‡‰è©²æœ‰çš„è¡Œç‚ºï¼›é‡æ§‹ä¹Ÿä¸æˆå•é¡Œï¼Œåªè¦å®ƒæœ€å¾Œç¬¦åˆæˆ‘å€‘éœ€è¦çš„ä»‹é¢å³å¯ã€‚è€Œç•¶ä½ éœ€è¦æ›´æ›å¯¦ä½œæ™‚ï¼Œä¹Ÿä¸æœƒå› æ­¤å°ä¸Šä¸€å±¤çš„æ¸¬è©¦æœ‰å¤ªå¤§çš„å½±éŸ¿ï¼Œä¸è«–ä½ æ˜¯ä¸æ˜¯ç”¨åˆ°æ¸¬è©¦æ›¿èº« (ä¸ç”¨æ›¿èº«æ™‚ä¹Ÿè¨±æœƒæœ‰å°èª¿æ•´ï¼Œä¾‹å¦‚æ›´æ›å¯¦ä½œé¡åˆ¥) ã€‚</p>
<h2 id="å¯¦å‹™ç¶“é©—">å¯¦å‹™ç¶“é©—</h2>
<p>æˆ‘å€‘åœ¨å¯¦ä½œ API æ™‚ï¼Œå°±æ˜¯åˆ©ç”¨é€™æ¨£çš„æ€ç¶­åœ¨å¯«æ¸¬è©¦çš„ï¼šæˆ‘å€‘æœƒå…ˆå®šç¾©å¥½ API è¦æ€éº¼ç”¨ï¼Œä¹Ÿå°±æ˜¯å¤–éƒ¨æœƒæ€éº¼æ“ä½œé€™å€‹ API ï¼Œæ‰€æœ‰çš„æ¸¬è©¦ä¹Ÿæ˜¯é‡å°é€™å€‹è¡Œç‚ºè€Œå¯«ã€‚åœ¨å¯¦ä½œä¸Šå‘¢ï¼Œå®ƒå¯¦éš›æ˜¯é€é controller å»å‘¼å« service çš„æ–¹æ³•ï¼Œè€Œ service å±¤ä¹Ÿæœƒå‘¼å«å¾ˆå¤š libraries æˆ– respositories ä¾†åšè³‡æ–™ä¸Šçš„äº’å‹•ã€‚</p>
<p>ä¸€é–‹å§‹æˆ‘è² è²¬å¯« API çš„æ¸¬è©¦èˆ‡å¯¦ä½œï¼Œä½† service å‰‡äº¤çµ¦åŒäº‹é–‹ç™¼ã€‚æˆ‘å€‘è¨è«–å¥½å®ƒå€‘å…©è€…ä¹‹é–“ç”¨ä»€éº¼æ–¹æ³•æºé€šï¼Œç”¨ä»€éº¼æ ¼å¼æºé€šä¹‹å¾Œï¼Œå°±å„è‡ªé€²è¡Œ TDD é–‹ç™¼ã€‚é€™éº¼ä¸€ä¾†ï¼Œæˆ‘ä¸å¿…æ“”å¿ƒ service å¯¦ä½œæœƒå½±éŸ¿æˆ‘çš„é–‹ç™¼ï¼ŒåŒäº‹ä¹Ÿåªè¦å°ˆæ³¨åœ¨ service çš„è¡Œç‚ºæ˜¯ä¸æ˜¯ç¬¦åˆæ¥­å‹™é‚è¼¯çš„éœ€æ±‚å°±å¯ä»¥ã€‚</p>
<h2 id="çµè«–">çµè«–</h2>
<p>æˆ‘åœ¨é–‹ç™¼æ¶æ§‹çš„ä¸­å¿ƒæ€æƒ³ä¸€ç›´æ˜¯ï¼šè¶Šä¸Šå±¤å°±è¶ŠæŠ½è±¡ä¾†è²¼è¿‘éœ€æ±‚ï¼Œè¶Šä¸‹å±¤å°±è¶Šå…·é«”ä»¥é”æˆå¯¦ä½œï¼›æ¯ä¸€å±¤éƒ½æ‡‰è©²æ¸…æ¥šå®ƒæ˜¯å› ç‚ºäº†ä»€éº¼ç›®çš„è€Œå­˜åœ¨ï¼Œé€²è€Œå°ˆæ³¨å»å¯¦ç¾é€™å€‹ç›®çš„ã€‚</p>
<p>æˆ‘å¾Œä¾†ç™¼ç¾é€™å€‹æ€æƒ³ä¹Ÿå¯ä»¥å¥—ç”¨åœ¨å¯«æ¸¬è©¦ä¸Šé¢ï¼šä¸è«–æ˜¯å“ªä¸€å±¤çš„æ¸¬è©¦éƒ½æ‡‰è©²å°ˆæ³¨åœ¨é©—è­‰è©²å±¤è¢«è³¦äºˆçš„è²¬ä»»ä¸Šï¼Œä¸è¦è·¨å±¤å»çœ‹ä¸‹ä¸€å±¤çš„ç´°ç¯€æ˜¯æ€éº¼åšçš„ï¼›çµæœåœ¨æ¸¬è©¦ä¸­å¤§é‡æ¸¬è©¦äº†é€™äº›ç´°ç¯€ï¼Œå°è‡´åœ¨ä¿®æ”¹ç¨‹å¼æ™‚ï¼Œé‚„å¾—èŠ±å¤§é‡æ™‚é–“å»ä¿®æ”¹æ¸¬è©¦ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>åˆ†æ PHP ç¨‹å¼ç¢¼å“è³ª</title>
			<link>https://jaceju.net/php-quality-analysis/</link>
			<pubDate>Wed, 11 Jan 2017 18:29:49 +0800</pubDate>
			
			<guid>https://jaceju.net/php-quality-analysis/</guid>
			<description>å‰å…©å¤© Laravel è€çˆ¸ Taylor åˆ†äº«äº†ä»–å°å¹¾å€‹çŸ¥åçš„ framework æ‰€åšçš„ç¨‹å¼ç¢¼å“è³ªåˆ†æï¼Œå¼•èµ·äº†ç¤¾ç¾¤å¾ˆå¤§çš„è¨è«–ã€‚ å› æ­¤ï¼Œæˆ‘æƒ³è—‰æ©Ÿåˆ†äº«ä¸€ä¸‹ï¼š å¦‚ä½•å° PHP ç¨‹å¼ç¢¼åšåˆ†æã€‚ åˆ†æå‡ºä¾†çš„æ•¸å€¼</description>
			<content type="html"><![CDATA[<p>å‰å…©å¤© Laravel è€çˆ¸ Taylor åˆ†äº«äº†ä»–å°å¹¾å€‹çŸ¥åçš„ framework æ‰€åšçš„<a href="https://medium.com/@taylorotwell/measuring-code-complexity-64356da605f9#.i9ah5inwx">ç¨‹å¼ç¢¼å“è³ªåˆ†æ</a>ï¼Œå¼•èµ·äº†ç¤¾ç¾¤å¾ˆå¤§çš„<a href="https://www.facebook.com/groups/laravel.tw/permalink/1200376173364763/">è¨è«–</a>ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘æƒ³è—‰æ©Ÿåˆ†äº«ä¸€ä¸‹ï¼š</p>
<ul>
<li>å¦‚ä½•å° PHP ç¨‹å¼ç¢¼åšåˆ†æã€‚</li>
<li>åˆ†æå‡ºä¾†çš„æ•¸å€¼æœ‰ä»€éº¼æ„ç¾©ã€‚</li>
</ul>
<!-- raw HTML omitted -->
<h2 id="php-ç¨‹å¼ç¢¼åˆ†æå·¥å…·">PHP ç¨‹å¼ç¢¼åˆ†æå·¥å…·</h2>
<p>PHP ç¨‹å¼ç¢¼åˆ†æå·¥å…·å…¶å¯¦æœ‰å¾ˆå¤šï¼Œä½†ä¸€ä¸€å®‰è£å…¶å¯¦å¾ˆèŠ±æ™‚é–“ã€‚é€™è£¡æˆ‘æ¨è–¦ä¸€å€‹å¥—ä»¶ï¼š <a href="https://github.com/EdgedesignCZ/phpqa">PHPQA</a> ï¼Œå®ƒå·²ç¶“æŠŠä»¥ä¸‹å¸¸ç”¨çš„ PHP ç¨‹å¼ç¢¼åˆ†æå·¥å…·æ•´åˆåœ¨ä¸€å€‹å‘½ä»¤åˆ—è£¡äº†ï¼š</p>
<ul>
<li><a href="https://github.com/sebastianbergmann/phploc">phploc</a> - æ¸¬è©¦ PHP å°ˆæ¡ˆçš„å¤§å° (å³ç¨‹å¼ç¢¼è¡Œæ•¸ç­‰è³‡è¨Š)</li>
<li><a href="https://github.com/sebastianbergmann/phpcpd">phpcpd</a> - é‡è¤‡ç¨‹å¼åµæ¸¬</li>
<li><a href="https://github.com/squizlabs/PHP_CodeSniffer">phpcs</a> - ç¨‹å¼ç¢¼é¢¨æ ¼æª¢æŸ¥</li>
<li><a href="https://github.com/pdepend/pdepend">pdepend</a> - ç¨‹å¼ç¢¼ä¾è³´åº¦æª¢æŸ¥</li>
<li><a href="https://github.com/phpmd/phpmd">phpmd</a> - æ‰¾å‡ºå°ˆæ¡ˆè¤‡é›œåº¦éé«˜çš„ç¨‹å¼ç¢¼</li>
<li><a href="https://github.com/Halleck45/PhpMetrics">phpmetrics</a> - PHP ç¨‹å¼ç¢¼éœæ…‹åˆ†æ</li>
<li><a href="https://github.com/JakubOnderka/PHP-Parallel-Lint">parallel-lint</a> - åŒæ™‚æª¢æŸ¥å¤šå€‹ PHP æª”æ¡ˆçš„èªæ³•</li>
<li><a href="https://github.com/phpstan/phpstan">phpstan</a> - åœ¨é‚„æ²’åŸ·è¡Œç¨‹å¼å‰å°±æ‰¾åˆ°å¯èƒ½çš„ bug (çµæœå®ƒæœ¬èº«ä¹Ÿæœ‰ bug )</li>
</ul>
<p>PHPQA çš„å®‰è£æ–¹å¼å¾ˆç°¡å–®ï¼Œç”¨ composer å…¨åŸŸå®‰è£å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ composer global require edgedesign/phpqa --update-no-dev
</code></pre></div><p>ä¸éé€™æ™‚å€™å®‰è£çš„ <code>phpcpd 2.0.4</code> æœƒæœ‰<a href="https://github.com/sebastianbergmann/phpcpd/issues/132">å•é¡Œ</a>ï¼Œæ‰€ä»¥è¦å®‰è£ <code>dev-master</code> ç‰ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ composer global require sebastian/phpcpd:dev-master
</code></pre></div><p>ç¾åœ¨å¯ä»¥ç¢ºèªä¸€ä¸‹æ˜¯å¦æœ‰å®‰è£æˆåŠŸäº†ï¼ŒåŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ phpqa tools
+---------------+------------+----------------------------------------------+
<span class="p">|</span> Tool          <span class="p">|</span> Version    <span class="p">|</span> Authors                                      <span class="p">|</span>
+---------------+------------+----------------------------------------------+
<span class="p">|</span> phpqa         <span class="p">|</span> 1.9.1      <span class="p">|</span> Zdenek Drahos                                <span class="p">|</span>
<span class="p">|</span> phpmetrics    <span class="p">|</span> 1.10.0     <span class="p">|</span> Jean-FranÃ§ois LÃ©pine                         <span class="p">|</span>
<span class="p">|</span> phploc        <span class="p">|</span> 3.0.1      <span class="p">|</span> Sebastian Bergmann                           <span class="p">|</span>
<span class="p">|</span> phpcs         <span class="p">|</span> 2.7.1      <span class="p">|</span> Greg Sherwood                                <span class="p">|</span>
<span class="p">|</span> phpmd         <span class="p">|</span> 2.5.0      <span class="p">|</span> Manuel Pichler,Other contributors,Marc WÃ¼rth <span class="p">|</span>
<span class="p">|</span> pdepend       <span class="p">|</span> 2.3.2      <span class="p">|</span>                                              <span class="p">|</span>
<span class="p">|</span> phpcpd        <span class="p">|</span> dev-master <span class="p">|</span> Sebastian Bergmann                           <span class="p">|</span>
<span class="p">|</span> parallel-lint <span class="p">|</span> 0.9.2      <span class="p">|</span> Jakub Onderka                                <span class="p">|</span>
+---------------+------------+----------------------------------------------+
</code></pre></div><blockquote>
<p>è¨˜å¾—ç¢ºèªä¸€ä¸‹ <code>$HOME/.composer/vendor/bin</code> æœ‰åœ¨ä½ çš„ <code>$PATH</code> ç’°å¢ƒè®Šæ•¸è£¡ï¼Œä¸ç„¶æ²’è¾¦æ³•åŸ·è¡Œå®‰è£å¥½çš„æŒ‡ä»¤ã€‚</p>
</blockquote>
<h2 id="ç”¨-phpqa-ç”¢ç”Ÿåˆ†æå ±è¡¨">ç”¨ PHPQA ç”¢ç”Ÿåˆ†æå ±è¡¨</h2>
<p>ç¾åœ¨å¯ä»¥æ‰¾ä¸€å€‹ PHP å°ˆæ¡ˆä¾†è©¦è©¦ <code>phpqa</code> ï¼Œé€™è£¡æˆ‘ç›´æ¥ç”¨ä¸€å€‹æ–°çš„ Laravel å°ˆæ¡ˆä¾†å¯¦é©—ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ laravel new qa-example
$ <span class="nb">cd</span> qa-example
</code></pre></div><p>ç„¶å¾ŒåŸ·è¡Œ <code>phpqa</code> ä¾†è·‘å‡ºå ±è¡¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ phpqa --ignoredDirs vendor --report
</code></pre></div><p><code>--ignoredDirs</code> æ˜¯æŒ‡æ’é™¤æ‰æŒ‡å®šçš„ç›®éŒ„ï¼Œä¹Ÿå¯ä»¥æ”¹ç”¨ <code>--analyzedDirs</code> ä¾†åˆ†æç‰¹å®šçš„ç›®éŒ„ï¼›ç›®éŒ„åç¨±ä¹‹é–“å¯ä»¥ç”¨é€—è™Ÿ (<code>,</code>) éš”é–‹ã€‚</p>
<p>åŸ·è¡Œçµæœå¦‚ä¸‹ï¼š</p>
<pre><code>... (ç•¥) ...
[phpqa]
+---------------+----------------+--------------+--------+---------------------------+
| Tool          | Allowed Errors | Errors count | Is OK? | HTML report               |
+---------------+----------------+--------------+--------+---------------------------+
| phpmetrics    |                |              | âœ“      | build//phpmetrics.html    |
| phploc        |                |              | âœ“      | build//phploc.html        |
| phpcs         |                | 26           | âœ“      | build//phpcs.html         |
| phpmd         |                | 4            | âœ“      | build//phpmd.html         |
| pdepend       |                |              | âœ“      | build//pdepend.html       |
| phpcpd        |                | 0            | âœ“      | build//phpcpd.html        |
| parallel-lint |                | 0            | âœ“      | build//parallel-lint.html |
+---------------+----------------+--------------+--------+---------------------------+
| phpqa         |                | 30           | âœ“      | build//phpqa.html         |
+---------------+----------------+--------------+--------+---------------------------+

[phpqa] No failed tools
</code></pre><p>é€™æ¨£ <code>phpqa</code> å°±æœƒåœ¨å°ˆæ¡ˆä¸‹å»ºç«‹ <code>build</code> è³‡æ–™å¤¾ï¼Œè£¡é¢å°±æœƒæ”¾è‘—æ‰€æœ‰åˆ†æå ±è¡¨ï¼›æˆ‘å€‘åªéœ€è¦æ‰“é–‹ <code>build/phpqa.html</code> å°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å ±è¡¨äº†ã€‚</p>
<p><img src="../resources/phpqa/phpqa.png" alt="phpqa.html"></p>
<p>æ›´å¥½çš„åšæ³•æ˜¯æŠŠå®ƒå€‘æ•´åˆåˆ° CI è‡ªå‹•åŒ–æµç¨‹è£¡ï¼Œé€™æ¨£æ¯ä¸€æ¬¡ push ç¨‹å¼ç¢¼å¾Œå°±å¯ä»¥è‡ªå‹•ç”¢ç”Ÿé€™äº›å ±è¡¨ã€‚</p>
<p>å¦å¤–æˆ‘å€‘ä¹Ÿå¯ä»¥åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹å»ºç«‹ä¸€å€‹ <a href="https://github.com/EdgedesignCZ/phpqa/blob/master/.phpqa.yml"><code>.phpqa.yml</code></a> è¨­å®šæª”ï¼Œä¾†å¾®èª¿é€™äº›å·¥å…·çš„è¨­å®šã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="k">phpcs</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">standard</span><span class="p">:</span><span class="w"> </span>PSR2<span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">phpmd</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">standard</span><span class="p">:</span><span class="w"> </span>app/phpmd.xml<span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">phpcpd</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">minLines</span><span class="p">:</span><span class="w"> </span><span class="m">5</span><span class="w">
</span><span class="w">    </span><span class="k">minTokens</span><span class="p">:</span><span class="w"> </span><span class="m">70</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">phpstan</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">level</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span><span class="w">    </span><span class="c"># https://github.com/phpstan/phpstan#configuration</span><span class="w">
</span><span class="w">    </span><span class="c"># standard: tests/.travis/phpstan.neon</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># paths are relative to .phpqa.yml, so don&#39;t copy-paste this section if you don&#39;t have custom templates</span><span class="w">
</span><span class="w"></span><span class="k">report</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">phploc</span><span class="p">:</span><span class="w"> </span>app/report/phploc.xsl<span class="w">
</span><span class="w">    </span><span class="k">phpcpd</span><span class="p">:</span><span class="w"> </span>app/report/phpcpd.xsl<span class="w">
</span><span class="w">    </span><span class="k">phpcs</span><span class="p">:</span><span class="w"> </span>app/report/phpcs.xsl<span class="w">
</span><span class="w">    </span><span class="k">pdepend</span><span class="p">:</span><span class="w"> </span>app/report/pdepend.xsl<span class="w">
</span><span class="w">    </span><span class="k">phpmd</span><span class="p">:</span><span class="w"> </span>app/report/phpmd.xsl<span class="w">
</span></code></pre></div><p>åœ¨åŸ·è¡Œ <code>phpqa</code> æ™‚ï¼Œå¯ä»¥ç”¨ <code>--config</code> ä¾†æŒ‡å®šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ phpqa --config<span class="o">=</span>./.phpqa.yml --report
</code></pre></div><h2 id="å„å ±è¡¨çš„æ„ç¾©">å„å ±è¡¨çš„æ„ç¾©</h2>
<p>é€™è£¡åƒ…ç°¡å–®ä»‹ç´¹æ¯å€‹å ±è¡¨çš„æ„ç¾©ï¼Œè©³ç´°çš„ä»‹ç´¹å°±è«‹å¤§å®¶åƒè€ƒå®˜æ–¹èªªæ˜ã€‚</p>
<p><code>PhpMetrics report</code> æœ¬èº«å°±åŒ…å«äº†å¤šç¨®é¢å‘çš„åˆ†æï¼Œåƒæ˜¯è¤‡é›œåº¦ã€ç›¸ä¾æ€§ã€ç¨‹å¼ç¢¼å¤§å°ç­‰è³‡è¨Šï¼Œå®˜ç¶²æœ‰ä»‹ç´¹<a href="http://www.phpmetrics.org/documentation/how-to-read-report.html">å¦‚ä½•è§£è®€</a>ã€‚åœ¨ <code>Explore</code> é ç±¤ä¸Šå¯ä»¥ç€è¦½åˆ°æ‰€æœ‰æª”æ¡ˆçš„åˆ†ææŒ‡æ¨™ï¼Œé€™äº›æŒ‡æ¨™ä¹Ÿå¯ä»¥å¾å®˜æ–¹ç¶²ç«™ä¸Šæ‰¾åˆ°<a href="http://www.phpmetrics.org/documentation/index.html">å®ƒå€‘çš„èªªæ˜</a>ã€‚</p>
<p><code>phploc report</code> ä¸»è¦æ˜¯åˆ—å‡ºå°ˆæ¡ˆçš„ç¨‹å¼ç¢¼å¤§å°ï¼Œä½†æœƒç´°åˆ†å‡ºä¸€äº›è³‡è¨Šï¼›æ¯”è¼ƒé‡è¦çš„è³‡è¨Šåƒæ˜¯ï¼šé‚è¼¯ç¸½è¡Œæ•¸ (LLOC) ã€æœ€å¤§é¡åˆ¥è¡Œæ•¸ (Maximum Class Length) ã€æœ€å¤§å‡½å¼è¡Œæ•¸ (Maximum Method Length) ã€‚é€šå¸¸é¡åˆ¥è¡Œæ•¸æˆ–å‡½å¼è¡Œæ•¸å°è¡¨ç¤ºæœ‰è¼ƒä½³çš„ç¨‹å¼ç¢¼å“è³ªï¼Œå› ç‚ºå°é¡åˆ¥èˆ‡å°å‡½å¼è¼ƒå®¹æ˜“å°ˆæ³¨åœ¨ä¸€ä»¶äº‹ä¸Šï¼Œå¯è®€æ€§èˆ‡å¯ç¶­è­·æ€§éƒ½æœƒå¥½ä¸€äº›ã€‚</p>
<p><code>phpcs report</code> ä¸»è¦æœƒåˆ—å‡ºæ¯æ”¯ PHP æª”ä¸­ä¸ç¬¦åˆç¨‹å¼ç¢¼é¢¨æ ¼è¦ç¯„çš„åœ°æ–¹ï¼Œé è¨­çš„ç¨‹å¼ç¢¼è¦ç¯„æ˜¯ PSR2 ã€‚</p>
<p><code>phpmd report</code> æœƒåˆ—å‡ºä¸€äº›ç³Ÿç³•çš„ç¨‹å¼ç¢¼ï¼Œåƒæ˜¯å®šç¾©å¾Œå»æ²’æœ‰ç”¨åˆ°çš„è®Šæ•¸ã€æˆ–æ˜¯è®Šæ•¸åç¨±éæ–¼ç°¡ç•¥ç­‰ã€‚è©³ç´°çš„è¦å‰‡å¯ä»¥åƒè€ƒå®˜æ–¹æ‰‹å†Šçš„ <a href="https://phpmd.org/rules/index.html">Rules</a> èªªæ˜ã€‚</p>
<p><code>PDepend report</code> ä¹Ÿè·Ÿ <code>PhpMetrics</code> ä¸€æ¨£åŒæ™‚åŒ…å«äº†å¤šç¨®æŒ‡æ¨™ï¼Œä¸åŒçš„æ˜¯å®ƒå°æ¯å€‹é¡åˆ¥æ‰€ç›¸ä¾çš„é¡åˆ¥æœƒæœ‰æ¯”è¼ƒæ¸…æ¥šçš„åˆ—è¡¨ï¼Œè€Œä¸æ˜¯ç”¨é€£æ¥ç·šä¾†è¡¨ç¤ºã€‚é€™è£¡çš„å„é …æŒ‡æ¨™ä¸»è¦æ˜¯å½±éŸ¿é¡åˆ¥çš„ç©©å®šåº¦èˆ‡è€¦åˆåº¦ï¼Œä¾‹å¦‚æŠ½è±¡é¡ä¾è³´å¤ªå¤šå¯¦é«”é¡åˆ¥ï¼Œé‚£éº¼è€¦åˆåº¦å°±æœƒå¾ˆé«˜ï¼›å¦‚æœæœ‰å¤ªå¤šå¯¦é«”é¡åˆ¥çš„äº’å‹•ï¼Œé‚£éº¼ç©©å®šåº¦å°±æœƒä¸‹é™ã€‚<a href="https://www.testwo.com/blog/7640">é€™ç¯‡æ–‡ç« </a> æœ‰æ›´è©³ç´°çš„èªªæ˜ï¼Œå€¼å¾—ä¸€è®€ã€‚</p>
<p><code>phpcpd report</code> æœƒåˆ—å‡ºæœ‰è¤‡è£½è²¼ä¸Šç¨‹å¼ç¢¼çš„æª”æ¡ˆä»¥åŠé‡è¤‡å‡ºç¾çš„è¡Œæ•¸ã€‚ <code>phpcpd</code> ä¹Ÿæ˜¯ <code>PHPUnit</code> è€çˆ¸çš„ä½œå“ã€‚</p>
<p><code>parallel-lint</code> æœƒåˆ—å‡ºæœ‰ PHP èªæ³•éŒ¯èª¤çš„æª”æ¡ˆï¼Œé è¨­æœƒç”¨ç•¶ä¸‹çš„ PHP ç‰ˆæœ¬ä¾†é©—è­‰ã€‚</p>
<h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>å°±åƒåœ¨å¹³å¸¸é–‹ç™¼æ™‚ï¼Œæˆ‘å€‘æœƒå¾ç¨‹å¼ç¢¼æ¸¬è©¦è¦†è“‹ç‡å ±è¡¨ä¸­çœ‹å‡ºé‚„æœ‰æ²’æœ‰å€¼å¾—åŠ å¼·æ¸¬è©¦çš„éƒ¨ä»½ï¼›è€Œåˆ©ç”¨ phpqa æ‰€åˆ†æå‡ºä¾†çš„é€™äº›å ±è¡¨å…¶å¯¦ä¹Ÿæ˜¯è®“æˆ‘å€‘ç­è§£ç›®å‰ç¨‹å¼ç¢¼çš„ç¾ç‹€ï¼Œé€²è€Œå¾é€™äº›æŒ‡æ¨™æ‰¾å‡ºå¯èƒ½æœ‰å•é¡Œçš„åœ°æ–¹ä¾†åŠ ä»¥é‡æ§‹ã€‚</p>
<p>å¸Œæœ›é€™æ¨£çš„ä»‹ç´¹å¯ä»¥è®“å¤§å®¶é–‹å§‹ç”¨é€™äº›å·¥å…·ä¾†æ™‚æ™‚é—œå¿ƒè‡ªå·±çš„ç¨‹å¼ç¢¼å“è³ªï¼Œæ—©ä¸€æ­¥åˆ†æå‡ºç¨‹å¼ç¢¼ä¸­æ½›è—çš„å•é¡Œï¼Œé€™æ¨£ä¸€ä¾†æˆ‘å€‘å°±å¯ä»¥æŠŠæ™‚é–“èŠ±åœ¨å€¼å¾—ä¿®æ”¹çš„åœ°æ–¹ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>å¾ˆå€¼å¾—ä¸€çœ‹çš„ Spotify çš„å·¥ç¨‹æ–‡åŒ–</title>
			<link>https://jaceju.net/spotify-engineering-culture/</link>
			<pubDate>Tue, 27 Dec 2016 12:18:46 +0800</pubDate>
			
			<guid>https://jaceju.net/spotify-engineering-culture/</guid>
			<description>é€™æ˜¯åœ¨ç¶²è·¯ä¸Šæµå‚³å¾ˆä¹…çš„ Spotify å…¬å¸å·¥ç¨‹æ–‡åŒ–çš„ä»‹ç´¹ï¼Œé›–ç„¶æ˜¯å…©å¹´å‰çš„å½±ç‰‡ï¼Œä½†çœ‹å®Œå¾Œè¦ºå¾—è·Ÿæˆ‘å€‘å…¬å¸æœ‰å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹ï¼Œè€Œä¸”ä¹Ÿæœ‰å€¼å¾—å­¸ç¿’çš„éƒ¨ä»½ã€‚å› æ­¤ç‰¹åˆ¥æŠŠå…¶</description>
			<content type="html"><![CDATA[<p>é€™æ˜¯åœ¨ç¶²è·¯ä¸Šæµå‚³å¾ˆä¹…çš„ Spotify å…¬å¸å·¥ç¨‹æ–‡åŒ–çš„ä»‹ç´¹ï¼Œé›–ç„¶æ˜¯å…©å¹´å‰çš„å½±ç‰‡ï¼Œä½†çœ‹å®Œå¾Œè¦ºå¾—è·Ÿæˆ‘å€‘å…¬å¸æœ‰å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹ï¼Œè€Œä¸”ä¹Ÿæœ‰å€¼å¾—å­¸ç¿’çš„éƒ¨ä»½ã€‚å› æ­¤ç‰¹åˆ¥æŠŠå…¶é‡é»æ•´ç†ä¸¦ç´€éŒ„ä¸‹ä¾†ï¼Œä»¥ä¾›å¾€å¾Œçµ„ç¹”åƒè€ƒèˆ‡è¨è«–ã€‚</p>
<h2 id="part-1">Part 1</h2>
<!-- raw HTML omitted -->
<p>é‡é»æ•´ç†ï¼š</p>
<ul>
<li>åŸºæ–¼æ•æ·çš„å·¥ç¨‹æ–‡åŒ–ï¼šæ—©æœŸå¼•å…¥ Scrum ï¼Œä½†å½ˆæ€§å»æ‡‰ç”¨é€™äº›æ¨™æº–ã€‚</li>
<li>æ‹†åˆ†å°éšŠä¾†è‡ªä¸»ç®¡ç†èˆ‡åŸ·è¡Œä»»å‹™ï¼Œä½†éƒ½æœå‘ç”¢å“ç›®æ¨™å‰é€²ã€‚ä¸¦æƒ³è¾¦æ³•è®“ç›®æ¨™ä¸€è‡´æ€§èˆ‡å°éšŠè‡ªä¸»æ€§éƒ½é”åˆ°æœ€å¤§å€¼ã€‚</li>
<li>ç”±é ˜å°è€…å»æºé€šè©²è§£æ±ºçš„å•é¡Œèˆ‡åŸå› ï¼Œç”±æ•æ·åœ˜éšŠå…±åŒå»æ‰¾å‡ºæœ€å¥½çš„è§£æ±ºæ–¹æ¡ˆã€‚</li>
<li>ä¸å¼·åˆ¶æ‰€æœ‰å°éšŠæ¨™æº–åŒ–ï¼Œè®“å°éšŠè‡ªè¡Œæ±ºå®šè©²æ€éº¼é€²è¡Œä»»å‹™ã€‚è€Œå°éšŠä¹‹é–“å¯ä»¥äº’ç›¸å‚³æˆæŠ€è¡“ï¼Œè®“å·¥ä½œçš„é€²è¡Œé€æ¼¸æ¸›å°‘é˜»ç¤™ã€‚</li>
<li>å°‡ç³»çµ±çš„åŠŸèƒ½å–®ç´”åŒ–ä¸¦äº’ç›¸ç¨ç«‹ï¼Œä¸¦è®“ä¸€å€‹å°éšŠè² è²¬ä¸€å€‹ç³»çµ±ã€‚ä½†æ³¨é‡ç¨‹å¼ç¢¼å…±äº«ï¼Œä¸ç”¨ç­‰åˆ°è² è²¬çš„å°éšŠæœ‰ç©ºæ‰ä¿®æ”¹ã€‚å¯ä»¥åœ¨ä¿®æ”¹å®Œå¾Œç”±è² è²¬çš„å°éšŠ code review ã€‚</li>
<li>å°Šé‡éšŠå‹ï¼Œä¸¦ä¿¡ä»»æ¯å€‹äººçš„è‡ªä¸»æ€§ï¼Œä½†åˆå¯ä»¥åœ¨éœ€è¦å”åŠ©æ™‚ç²å¾—å¹«å¿™ã€‚</li>
<li>æŒçºŒæ”¹å–„è·å ´ç’°å¢ƒï¼Œè®“å“¡å·¥çš„æ»¿æ„åº¦é”åˆ°æœ€é«˜ã€‚</li>
<li>ç”¨éƒ¨è½ã€åˆ†æœƒã€å…¬æœƒç­‰åˆ†æ•£å¼ç¤¾ç¾¤çµæ§‹ä¾†å‡èšæ¯å€‹å“¡å·¥ï¼Œä¸è®“å…¬å¸éšå±¤å¼çµ„ç¹”æ¶æ§‹ä¾·é™äº†å“¡å·¥çš„é ˜åŸŸç™¼å±•èˆ‡è‡ªä¸»æ€§ã€‚</li>
<li>ç™¼ä½ˆç¨‹å¼ç‰ˆæœ¬æ‡‰è©²è¦å®¹æ˜“ä¸”é »ç¹ï¼Œæ‰€ä»¥æŠ•è³‡åœ¨è‡ªå‹•åŒ–æ¸¬è©¦èˆ‡æŒçºŒæ•´åˆäº¤ä»˜çš„åŸºç¤å»ºè¨­ä¸Šã€‚</li>
<li>ç™¼ä½ˆæ™‚æ‡‰è©²è¦äº’ä¸å½±éŸ¿ï¼Œæ‰€ä»¥å„æ¨¡çµ„æ”¹ç”¨åµŒå…¥å¼ç¶²é çš„å€å¡Šä¾†ç¨ç«‹é–‹ç™¼èˆ‡ç™¼ä½ˆã€‚</li>
<li>é–‹ç™¼å°éšŠåˆ†æˆï¼šç”¨æˆ¶ App å°éšŠç¾¤ã€åŠŸèƒ½é–‹ç™¼å°éšŠç¾¤ã€åŸºç¤å»ºè¨­å°éšŠç¾¤ã€‚</li>
<li>è‡ªä¸»æœå‹™æ¨¡å¼æ˜¯è®“å°éšŠå…ˆè¡Œå•Ÿç”¨ç’°å¢ƒï¼Œè®“å…¶ä»–å°éšŠå¯ä»¥æ›´å®¹æ˜“åŠ å…¥åŠŸèƒ½ï¼ŒåŒæ™‚ä¹Ÿè®“äº¤æ¥ä¸å†è¢«è¦–ç‚ºç•é€”ã€‚</li>
<li>åˆ©ç”¨åŠŸèƒ½åˆ‡æ›æ¨¡å¼ (Feature toggle) ä¾†åŠ å…¥æœªå®Œæˆçš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯ branch çš„æ–¹å¼ä¾†åŠ å…¥åŠŸèƒ½ã€‚é€™æ¨£å¯ä»¥æ—©æœŸæ›éœ²æ•´åˆå•é¡Œæˆ–æ›´å®¹æ˜“åœ°é€²è¡Œ A/B æ¸¬è©¦ã€‚</li>
<li>ä¿¡ä»»æ¯”æ§åˆ¶é‡è¦ï¼Œææ‡¼ä¸æœƒæŠ¹æ»…ä¿¡ä»»ï¼Œä½†æœƒæ‰¼æ®ºå‰µæ–°ã€‚å¦‚æœå¤±æ•—æœƒè¢«æ‡²ç½°ï¼Œäººå€‘å°±æœƒä¸æ•¢å˜—è©¦æ–°çš„äº‹ç‰©ã€‚</li>
</ul>
<h2 id="part-2">Part 2</h2>
<!-- raw HTML omitted -->
<p>é‡é»æ•´ç†ï¼š</p>
<ul>
<li>ä¸€å€‹åŒ…å®¹å¤±æ•—ä¸¦å¿«é€Ÿå¾©åŸçš„ç’°å¢ƒï¼Œè®“åœ˜éšŠèƒ½æ›´å¿«åœ°çŠ¯éŒ¯ï¼Œä¸¦å„˜å¿«å¾ä¸­å­¸ç¿’ï¼Œä¸¦ä¸”æ”¹å–„å®ƒå€‘ã€‚</li>
<li>ä¸æ˜¯æª¢è¨èª°çŠ¯éŒ¯ï¼Œè€Œæ˜¯æª¢è¨ç‚ºä»€éº¼æœƒçŠ¯é€™å€‹éŒ¯ï¼Œä»¥åŠå­¸åˆ°äº†ä»€éº¼ï¼Œæ”¹å–„äº†ä»€éº¼ã€‚</li>
<li>æŒçºŒæ”¹å–„æµç¨‹ï¼Œè€Œä¸æ˜¯åƒ…åƒ…ä¿®å¾©ç”¢å“ã€‚ä¸¦ä¸”å¾ä¸‹è€Œä¸Šé©…å‹•ï¼Œå¾ä¸Šåˆ°ä¸‹æ”¯æŒé€™å€‹æ–‡åŒ–</li>
<li>å¤±æ•—å¿…é ˆæœ‰çˆ†ç‚¸ç¯„åœï¼Œä¸èƒ½å› ç‚ºä¸€å€‹å°åŠŸèƒ½å¤±æ•—è€Œå½±éŸ¿æ•´å€‹ç³»çµ±ã€‚æ¯å€‹åŠŸèƒ½éƒ½æœƒäº‹å…ˆé‡‹å‡ºçµ¦å°éƒ¨ä»½ä½¿ç”¨è€…è©¦ç”¨ï¼Œç­‰å¾…ç©©å®šå¾Œå†é€æ­¥åˆ‡æ›ã€‚</li>
<li>å¯¦é©—éšæ®µçš„ç²¾å¯¦å‰µæ¥­ï¼šå…ˆæ€è€ƒåŠŸèƒ½æ˜¯ä¸æ˜¯ç”¨æˆ¶éœ€è¦çš„ï¼Œå†å»ºç«‹ prototype ä¾†è®“äººå€‘è©¦ç”¨ä¸¦å–å¾—å›é¥‹ï¼›ä¾ç…§å›é¥‹ä¾†å»ºç«‹ MVP ï¼Œå„˜å¿«é‡‹å‡ºçµ¦éƒ¨ä»½ç”¨æˆ¶ä¸¦ä¸”å­¸ç¿’èˆ‡æ”¹é€²ç›´åˆ°é”åˆ°é æœŸæˆæ•ˆï¼Œæœ€å¾Œæ‰å…¨é¢é‡‹å‡ºã€‚</li>
<li>é™¤éè·Ÿåˆä½œå¤¥ä¼´æˆ–è¡ŒéŠ·æ´»å‹•æœ‰é—œï¼Œå¦å‰‡å°±å…ˆå°ˆæ³¨æ–¼æ˜¯å¦äº¤ä»˜å‡ºæœ‰åƒ¹å€¼çš„å‰µæ–°åŠŸèƒ½ã€è€Œå¾Œæ‰æœƒæ³¨é‡è¨ˆåŠƒæ€§çš„é æœŸæˆæ•ˆã€‚</li>
<li>é§­å®¢æ—¥æˆ–é§­å®¢é€±å¯ä»¥è®“å·¥ç¨‹å¸«æœ‰ç©ºåšä¸€äº›è‡ªå·±æœ‰èˆˆè¶£çš„å‰µä½œæˆ–å¯¦é©—ï¼Œé‡é»åœ¨æœ‰è¶£ï¼Œè€Œä¸æ˜¯æœ‰ç”¨ã€‚é¼“å‹µå¤§å®¶æœ‰æ‰€å‰µæ–°ï¼Œä¸¦å¾ä¸­æ‰¾åˆ°éˆæ„Ÿã€‚</li>
<li>é¼“å‹µå¯¦é©—çš„æ–‡åŒ–ï¼Œå˜—è©¦å„ç¨®å¯èƒ½æ€§ä¸¦æ¯”è¼ƒå“ªç¨®æ¯”è¼ƒé©åˆåœ˜éšŠæˆ–åŠŸèƒ½ï¼Œè®“æ–‡åŒ–çš„å»¶çºŒæ˜¯åŸºæ–¼å®¢è§€æ¢ä»¶ä¾†æ±ºå®šçš„ã€‚</li>
<li>æ’æ–¥æµªè²»çš„æ–‡åŒ–ï¼Œæœ‰åƒ¹å€¼çš„äº‹å¯ä»¥æŒçºŒé€²è¡Œï¼Œæ²’æœ‰åƒ¹å€¼çš„äº‹å°±å„˜å¿«æ‹‹æ£„ï¼Œé¿å…æµªè²»å·¥ç¨‹å¸«å¯¶è²´çš„æ™‚é–“ã€‚</li>
<li>å¤§å‹å°ˆæ¡ˆé€šå¸¸æ˜¯æ²’æœ‰å¿…è¦çš„ï¼Œå„˜å¯èƒ½ä»¥ç²¾ç°¡çš„å°å°ˆæ¡ˆä¾†é€²è¡Œã€‚çœŸçš„æœ‰å¿…è¦çš„å¤§å‹å°ˆæ¡ˆå°±ç”¨è¦–è¦ºåŒ–æµç¨‹èˆ‡æ¯æ—¥æœƒè­°ï¼Œè®“æ¯å€‹å°éšŠèˆ‡åˆ©å®³é—œä¿‚äººèƒ½å”åŒè¨è«–åˆä½œä¸¦å¾—åˆ°å¿«é€Ÿçš„å›é¥‹ã€‚</li>
<li>å°è€Œç´¥å¯¦çš„é ˜å°åœ˜éšŠä¾†ç›£çœ‹æ•´å€‹å¤§å‹å°ˆæ¡ˆçš„æ–¹å‘ï¼ŒåŒ…å«æŠ€è¡“ç¶“ç†ã€ç”¢å“ç¶“ç†èˆ‡è¨­è¨ˆç¶“ç†ã€‚</li>
<li>åˆ©ç”¨çœ‹æ¿æ–¹æ³•ä¾†çœ‹è¦‹å°ˆæ¡ˆçš„å…¨è²Œï¼Œåƒæ˜¯é€²è¡Œä¸­çš„ä»»å‹™ï¼Œæˆ–é€ æˆç™¼å±•é˜»ç¤™çš„é …ç›®ã€‚</li>
<li>ç”¨ Awesome ä¾†å®šç¾©å“ªäº›äº‹æ˜¯å€¼å¾—åšåˆ°çš„æ–¹å‘ï¼Œç„¶å¾Œå†ç”¨çœ‹æ¿æ–¹æ³•ä¾†å°ˆæ³¨åœ¨æµç¨‹çš„æ”¹å–„èˆ‡å·¥ä½œçš„è¿½è¹¤ã€‚</li>
<li>é€éå¥å…¨çš„æ–‡åŒ–ä¾†å¿«é€Ÿä¿®å¾©æœ‰å•é¡Œçš„æµç¨‹ï¼›è®“æ–°äººåœ¨ä¸€é€±å…§é€éå¯†é›†è¨“ç·´å»ç†Ÿæ‚‰é€™äº›æ–‡åŒ–ï¼Œä¸¦ä¸”æœ‰çœŸæ­£çš„ç”¢å‡ºã€‚</li>
<li>ç”¨æ•…äº‹ä¾†æµå‚³æ–‡åŒ–çš„åƒ¹å€¼ï¼Œåˆ†äº«æˆåŠŸèˆ‡å¤±æ•—çš„ç¶“é©—ã€‚</li>
<li>çµ„ç¹”çš„æ–‡åŒ–å°±æ˜¯æˆå“¡çš„å¿ƒæ…‹èˆ‡è¡Œå‹•çš„ç¸½å’Œã€‚ç•¶æˆå“¡å¡‘é€ å‡ºè‡ªæˆ‘æœŸå¾…çš„è¡Œç‚ºï¼Œä»–å€‘å°±æ˜¯å…¬å¸çš„æ–‡åŒ–ã€‚</li>
</ul>
<h2 id="å¿ƒå¾—">å¿ƒå¾—</h2>
<p>åœ¨ KKBOX å·¥ä½œé€™éº¼ä¹…ï¼Œé›–ç„¶çŸ¥é“æˆ‘å€‘é‚„æœ‰å¾ˆå¤šè¦æ”¹é€²çš„åœ°æ–¹ï¼Œä½†ä¸€ç›´æ²’æœ‰å¾ˆèªçœŸåœ°æ€è€ƒé€™å€‹å•é¡Œï¼›è€Œå…©å¹´å‰çš„ Spotify åœ¨æ•æ·é–‹ç™¼çš„æµç¨‹ä¸Šï¼Œå…¶å¯¦æœ‰å¾ˆå¤šå€¼å¾—æˆ‘å€‘åœ˜éšŠå€Ÿé¡çš„åœ°æ–¹ã€‚é€™é»æˆ‘å€‘æ­£åœ¨è©¦è‘—é€éå¾ˆå¤šæ–¹å¼ä¾†å½±éŸ¿åœ˜éšŠæˆå“¡çš„æ…‹åº¦ï¼Œè®“ä»–å€‘èƒ½å¤ é€æ¼¸æ¥å—é€™æ¨£çš„è§€å¿µèˆ‡æ–¹æ³•ï¼Œé€²è€Œå¾€é€™å€‹æ™‚ä»£æ‡‰è©²è¦æœ‰çš„å…ˆé€²æµç¨‹ä¾†é‚é€²ã€‚</p>
<p>ä¸€å€‹è‰¯å¥½çš„å…¬å¸æ–‡åŒ–çœŸçš„è¦é æ¯å€‹å“¡å·¥å¿ƒè£¡é¡˜æ„å»æ”¹è®Šè‡ªå·±æ‰èƒ½å»ºç«‹èµ·ä¾†ï¼Œä¸€ç›´æŠ±æŒè‘—è¶•å¿«å®Œæˆå°ˆæ¡ˆé€²åº¦çš„å¿ƒæ…‹è€Œå¿˜äº†å…¬å¸çœŸæ­£ç”¢å“çš„åƒ¹å€¼ï¼Œæ˜¯ç„¡æ³•åœ¨é€™å€‹æ¥­ç•Œç¹¼çºŒç«‹è¶³çš„ã€‚æœŸç›¼å…¬å¸é«˜å±¤èƒ½é‡è¦–é€™æ¨£çš„æ–‡åŒ–ï¼Œä¸¦ä¸”è®“æ¯å€‹ KKBOX å“¡å·¥èƒ½ä»¥ä¸–ç•Œä¸€æµçš„è»Ÿé«”å…¬å¸ç‚ºæ¦®ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>å¦‚ä½•æ‰æœ‰è³‡æ ¼ç¨±ç‚ºè³‡æ·±å·¥ç¨‹å¸«</title>
			<link>https://jaceju.net/be-a-senior-engineer/</link>
			<pubDate>Sat, 24 Dec 2016 00:22:01 +0800</pubDate>
			
			<guid>https://jaceju.net/be-a-senior-engineer/</guid>
			<description>çœ‹åˆ°é€™ç¯‡æ¨ï¼Œå¿ƒä¸­é‚„æ»¿æœ‰æ„Ÿè§¸çš„ã€‚æœ¬ä¾†å°±ä¸æ˜¯è³‡æ­·æ··å¤ ä¹…ã€ç¨‹å¼å¯«å¾—å¥½å°±èƒ½ç®—å¾—ä¸Šè³‡æ·±å·¥ç¨‹å¸«ï¼›è³‡æ·±å·¥ç¨‹å¸«è©²æ€éº¼å®šç¾©å…¶å¯¦å¾ˆé›£æ‹¿å€‹æº–ï¼Œæˆ‘çš„ä¸»ç®¡ä¹Ÿæ›¾å•éæˆ‘é€™</description>
			<content type="html"><![CDATA[<!-- raw HTML omitted -->
<p>çœ‹åˆ°é€™ç¯‡æ¨ï¼Œå¿ƒä¸­é‚„æ»¿æœ‰æ„Ÿè§¸çš„ã€‚æœ¬ä¾†å°±ä¸æ˜¯è³‡æ­·æ··å¤ ä¹…ã€ç¨‹å¼å¯«å¾—å¥½å°±èƒ½ç®—å¾—ä¸Šè³‡æ·±å·¥ç¨‹å¸«ï¼›è³‡æ·±å·¥ç¨‹å¸«è©²æ€éº¼å®šç¾©å…¶å¯¦å¾ˆé›£æ‹¿å€‹æº–ï¼Œæˆ‘çš„ä¸»ç®¡ä¹Ÿæ›¾å•éæˆ‘é€™å€‹å•é¡Œï¼Œæˆ‘ä¸€æ™‚ä¹‹é–“ä¹Ÿå¾ˆé›£å®Œæ•´å›ç­”ã€‚ä¸éåœ¨é¢è©¦æ™‚å¸¸å¸¸çœ‹åˆ°å¾ˆå¤šé¢è©¦è€…éƒ½æ˜¯æ‡‰å¾µè³‡æ·±å·¥ç¨‹å¸«ï¼Œä½†å¯¦éš›å•ä»–å€‘ä¸€äº›å•é¡Œä¹‹å¾Œï¼Œå»ç™¼ç¾ä»–å€‘å»ç¼ºä¹äº†ä¸€äº›æ±è¥¿ã€‚</p>
<p>æ‰€ä»¥è—‰é€™å€‹æ©Ÿæœƒï¼Œæˆ‘æƒ³å¾å¹¾å€‹é¢å‘ä¾†èŠèŠæˆ‘å¿ƒç›®ä¸­çš„å·¥ç¨‹å¸«æ‡‰è©²å…·å‚™å“ªäº›ç‰¹è³ªèˆ‡èƒ½åŠ›ï¼Œè€Œé€™äº›ç‰¹è³ªèˆ‡èƒ½åŠ›ï¼Œæˆ‘éƒ½æ˜¯å¾èº«é‚Šå²å®³çš„åŒäº‹å€‘èˆ‡ç¤¾ç¾¤çš„æœ‹å‹å€‘èº«ä¸Šè§€å¯Ÿåˆ°çš„ï¼Œä»–å€‘éƒ½æ˜¯æˆ‘æ‰€æ•¬é‡çš„è³‡æ·±å·¥ç¨‹å¸« (ç•¶ç„¶è·ç¨±ä¸ä¸€å®šæ˜¯) ï¼›åŒæ™‚æˆ‘ä¹Ÿæœƒæä¾›ä¸€äº›éå»é‡åˆ°çš„åæŒ‡æ¨™ï¼Œé¿å…å¤§å®¶èª¤æœƒè³‡æ·±å·¥ç¨‹å¸«æ˜¯å¦éƒ½æ˜¯é€™æ¨£çš„äººã€‚</p>
<!-- raw HTML omitted -->
<h2 id="æŠ€è¡“èƒ½åŠ›å±¤é¢">æŠ€è¡“èƒ½åŠ›å±¤é¢</h2>
<h3 id="å°å·¥å…·æŠ€è¡“æœ‰æ·±å…¥çš„æŒæ¡åº¦">å°å·¥å…·æŠ€è¡“æœ‰æ·±å…¥çš„æŒæ¡åº¦</h3>
<p>é€™å€‹ç‰¹é»å¤§æ¦‚æ˜¯ä¸€èˆ¬äººç”¨ä¾†è©•æ–·è³‡æ·±å·¥ç¨‹å¸«èƒ½åŠ›æœ€æ˜é¡¯çš„è¡¨è±¡ç‰¹å¾µï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦å°‡å¸¸ç”¨çš„å·¥å…·èƒ½ç·´å¾—å¾ˆç†Ÿæˆ–æ˜¯å°èªè¨€ç†è§£å¾—å¤ æ·±ï¼ŒåŒæ™‚ä¹Ÿå°‡æŠ€è¡“å…§åŒ–åˆ°è‡ªå·±å¹³å¸¸çš„é–‹ç™¼ç¿’æ…£è£¡ï¼Œé”åˆ°ä¿¡æ‰‹æ»ä¾†çš„å¢ƒç•Œã€‚é€™æ¨£çš„è³‡æ·±å·¥ç¨‹å¸«åœ¨é–‹ç™¼ä¸Šèƒ½æœ‰å…¨é¢æ€§çš„è€ƒé‡ï¼ŒåŒæ™‚ä¹Ÿèƒ½å¹«åŠ©åœ˜éšŠæ›´æœ‰æ•ˆç‡åœ°é”æˆç›®æ¨™ã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰æ™‚é€™å€‹èƒ½åŠ›æœƒä»¥å€‹äººé–‹ç™¼çš„æ•ˆç‡ä¾†è©•ä¼°ï¼Œä½¿å¾—æœ‰äººå¸¸å¸¸èª¤èªç‚ºåªè¦èƒ½å¾ˆå¿«å®ŒæˆåŠŸèƒ½å°±æœ‰è³‡æ ¼ç•¶è³‡æ·±å·¥ç¨‹å¸«ï¼Œä½†ä»–å€‘å»å¿½ç•¥æ‰å…¶ä»–æ›´å€¼å¾—æ³¨æ„çš„èƒ½åŠ›ï¼Œçµæœç‚ºåœ˜éšŠå¸¶ä¾†ç½é›£ã€‚</p>
<h3 id="èƒ½å¯«å‡ºå¯ç†è§£å¯ç¶­è­·çš„ç¨‹å¼ç¢¼">èƒ½å¯«å‡ºå¯ç†è§£å¯ç¶­è­·çš„ç¨‹å¼ç¢¼</h3>
<p>é€™å€‹ç‰¹é»çš„ç‰¹å¾µå°±æ˜¯å¹³æ™‚å°±æœƒæ’°å¯«æ¸¬è©¦ã€ä¸¦å°è‡ªå·±çš„ç¨‹å¼ç¢¼åšé‡æ§‹ï¼›å°æ–¼è‡ªå·±çš„ç¨‹å¼ç¢¼é¢¨æ ¼ã€è®Šæ•¸æˆ–æ–¹æ³•åç¨±ç­‰éƒ½éå¸¸è¦æ±‚ï¼Œä¹Ÿçµ•å°ä¸æœƒç‰¹æ„å»èµ°é›£æ‡‚çš„æ·å¾‘ã€‚é€™æ¨£çš„è³‡æ·±å·¥ç¨‹å¸«æ˜¯éå¸¸è‡ªå¾‹çš„ï¼Œæ‰€ä»¥è¢«ä»– code review æ™‚å¯èƒ½æœƒæœ‰é»ç—›è‹¦ï¼Œä½†çµ•å°æœƒå­¸åˆ°å¾ˆå¤šã€‚é€šå¸¸åˆ°é€™å€‹éšæ®µçš„å·¥ç¨‹å¸«ï¼Œéƒ½æ˜¯å¿ƒéˆä¸Šå·²ç¶“å—éä¸å°‘å‚·å®³ï¼Œä¹Ÿå°è‡ªå·±ç™¼éèª“ä¸å†è®“è‡ªå·±çš„ç¨‹å¼ç¢¼å‚·å®³ä»–äººã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›å·¥ç¨‹å¸«æœƒéåº¦å¼·èª¿å·¥å…·æˆ–æ¨™æº–å¸¶ä¾†çš„è¦ç¯„ï¼Œåè€Œè®“æ•´å€‹åœ˜éšŠç–²æ–¼æ‡‰ä»˜é€™äº›è¦å‰‡ï¼Œå¤±å»äº†é–‹ç™¼ä¸Šçš„æ•æ·èˆ‡æ•ˆç‡ã€‚</p>
<h3 id="é¸æ“‡æŠ€è¡“çš„èƒ½åŠ›">é¸æ“‡æŠ€è¡“çš„èƒ½åŠ›</h3>
<p>é›–ç„¶å¯¦å‹™ç¶“é©—è±å¯Œè€Œèƒ½å¤ ç²¾æº–åˆ¤æ–·æ˜¯è³‡æ·±å·¥ç¨‹å¸«çš„å„ªå‹¢ä¹‹ä¸€ï¼Œç„¶è€Œåœ¨é¢è‡¨å°ˆæ¡ˆè¦ä½¿ç”¨çš„æŠ€è¡“é¸é …æ™‚ï¼Œè³‡æ·±å·¥ç¨‹å¸«ä¸æœƒæŠŠè‡ªå·±çš„å–œå¥½çš„æŠ€è¡“å¼·åŠ åœ¨åœ˜éšŠä¸Šï¼Œè€Œæ˜¯è·Ÿåœ˜éšŠä¸€èµ·è¨è«–èˆ‡ç ”ç©¶ï¼Œä¸¦åœ¨å¤šæ–¹è€ƒé‡å¾Œå»æŒ‘é¸å‡ºæœ€é©åˆé€™å€‹å°ˆæ¡ˆä»¥åŠé€™å€‹åœ˜éšŠçš„æŠ€è¡“ã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›æ™‚å€™è€é³¥æœƒèªç‚ºä»–æ‰€ç¿’æ…£çš„èˆŠæŠ€è¡“å¯ä»¥è§£æ±ºä¸€åˆ‡å•é¡Œï¼Œå³ä¾¿é€™ç¨®æŠ€è¡“ç¶­è­·èµ·ä¾†ä¸é‚£éº¼å®¹æ˜“ã€‚ç•¶å°ˆæ¡ˆä½¿ç”¨æ–°æŠ€è¡“é‡åˆ°ç“¶é ¸æ™‚ï¼Œä»–ä¸æœƒä¼¸æ‰‹å¹«å¿™ï¼Œåè€Œæœƒåœ¨æ—å¹¸ç½æ¨‚ç¦ã€‚</p>
<h3 id="è»Ÿé«”æ¶æ§‹åˆ†æèˆ‡è¨­è¨ˆèƒ½åŠ›">è»Ÿé«”æ¶æ§‹åˆ†æèˆ‡è¨­è¨ˆèƒ½åŠ›</h3>
<p>é€™å€‹éšæ®µçš„èƒ½åŠ›é å¾—æ˜¯éå¸¸å¤šçš„å¯¦æˆ°èˆ‡å°ˆæ¡ˆç¶“é©—ï¼ŒåŠ ä¸Šå°ç†è«–çš„èæœƒè²«é€šæ‰èƒ½å¾—åˆ°ã€‚ä¸€å€‹å„ªç§€çš„è³‡æ·±å·¥ç¨‹å¸«å¯ä»¥é‡å°éœ€æ±‚åšå‡ºå®Œæ•´çš„åˆ†æï¼Œä¸¦å¾ä¸Šè€Œä¸‹ã€ç”±ç²—åˆ°ç´°åœ°è¦åŠƒå‡ºè‰¯å¥½çš„è»Ÿé«”æ¶æ§‹è¨­è¨ˆï¼Œä¹Ÿèƒ½åœ¨ç¨‹å¼æ•ˆç‡èˆ‡å¯ç†è§£æ€§ä¹‹é–“å–å¾—å¹³è¡¡ã€‚ä»–å€‘å°æ–¼æ¯å€‹æŠ€è¡“çš„ç”Ÿæ…‹ç³»éƒ½æœ‰ä¸€å®šç¨‹åº¦çš„ç­è§£ï¼Œå¹«åŠ©è‡ªå·±çš„è¦åŠƒæ™‚èƒ½å¤ æ›´å¿«æ‰¾åˆ°å·¥å…·ï¼Œä¹Ÿèƒ½é¿é–‹åš´é‡çš„ç¼ºé™·ã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›å·¥ç¨‹å¸«å¯ä»¥å°‡æ›¸ä¸­ç†è«–èƒŒå¾—æ»¾ç“œçˆ›ç†Ÿï¼Œä½†åœ¨å¯¦éš›è¨­è¨ˆæ™‚å»æ²’æœ‰çœ‹æ¸…ç¾å¯¦è€Œè¦åŠƒå‡ºä¸ç”šåˆç†çš„æ¶æ§‹ï¼Œé€™æ˜¯å¤šæ•¸ç†è«–æ´¾å·¥ç¨‹å¸«çš„é€šç—…ã€‚</p>
<h3 id="åœ–åƒè§£èªªèƒ½åŠ›">åœ–åƒè§£èªªèƒ½åŠ›</h3>
<p>èƒ½å¤ åœ¨è§£é‡‹ä¸€å€‹æŠ€è¡“æ™‚ï¼Œç”¨ç°¡å–®æ¸…æ¥šçš„åœ–å½¢ä¾†è§£é‡‹åŸç†ï¼Œé€™é»æ˜¯è³‡æ·±å·¥ç¨‹å¸«å¿…å‚™çš„èƒ½åŠ›ã€‚é€šå¸¸å¦‚æœèƒ½ç”¨æ‰‹ç¹ªåœ–å½¢çš„æ–¹å¼ä¾†èªªæ˜ï¼Œè¡¨ç¤ºå°è©²æŠ€è¡“çš„åŸç†å·²ç¶“æœ‰è¶³å¤ çš„ç­è§£ã€‚å¾ç•«å‡ºä¾†çš„åœ–ä¹Ÿèƒ½çœ‹å‡ºå·¥ç¨‹å¸«å°æ–¼çŸ¥è­˜çš„çµ„ç¹”èƒ½åŠ›ï¼Œå¥½çš„åœ–åƒçµ„è­˜è¦èƒ½è®“å…¶ä»–äººä¸€çœ¼å°±èƒ½ç†è§£çŸ¥è­˜çš„å…¨è²Œï¼Œé€™å…¨ä»°è³´å·¥ç¨‹å¸«å°è©²çŸ¥è­˜çš„ç†è§£ã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›å·¥ç¨‹å¸«æœƒåªç•«å€‹æ–¹å¡Šæˆ–åœ“å½¢ï¼Œç„¶å¾Œå°±é–‹å§‹è¬›è§£ï¼›è€Œåœ¨è¬›è§£éç¨‹ä¸­ï¼Œå‹•ç­†çš„æ¬¡æ•¸ä¹Ÿä¸å¤šï¼›ä¹Ÿæœ‰äº›å·¥ç¨‹å¸«åªæ˜¯æŠŠè¨˜æ†¶è£¡çš„åœ–å½¢ç•«å‡ºä¾†ï¼Œä½†å»èªªä¸å‡ºæ‰€ä»¥ç„¶ã€‚é€™äº›éƒ½æ˜¯åœ–åƒè§£èªªèƒ½åŠ›ä¸å¤ çš„ç¾è±¡ã€‚</p>
<h3 id="æ–‡ä»¶ç·¨å¯«èƒ½åŠ›">æ–‡ä»¶ç·¨å¯«èƒ½åŠ›</h3>
<p>å¤šæ•¸çš„è»Ÿé«”å·¥ç¨‹å¸«éƒ½è¨å­åˆ¥äººä¸å¯«æ–‡ä»¶ï¼Œä½†è¨å­è‡ªå·±å¯«æ–‡ä»¶ã€‚å…¶å¯¦å¯«é–‹ç™¼æ–‡ä»¶ä¸¦ä¸æ˜¯æµªè²»æ™‚é–“çš„äº‹æƒ…ï¼Œè€Œæ˜¯å¯ä»¥æ¸›å°‘å…¶ä»–é–‹ç™¼è€…è·‘ä¾†æ‰“æ“¾è‡ªå·±çš„æ©Ÿæœƒã€‚åªæ˜¯å¾ˆå¤šæ•¸äººå°æ–¼è‡ªå·±çš„æ–‡ç­†æ²’æœ‰å¤ªå¤§çš„è‡ªä¿¡ï¼ŒæŠŠå®ƒç•¶æˆä¸å¯«æ–‡ä»¶çš„è—‰å£ã€‚è³‡æ·±å·¥ç¨‹å¸«é€šå¸¸æœƒåœ¨æ–‡ä»¶ä¸­äº¤ä»£é€™å€‹å°ˆæ¡ˆçš„èƒŒæ™¯ã€æ¶æ§‹ä»¥åŠå¦‚ä½•å®‰è£ã€ç¶­è­·ç­‰è³‡è¨Šï¼Œäº‹å¯¦ä¸Šä»–å€‘æœƒä»¥æœªä¾†çš„è‡ªå·±è¦é‡æ–°æ¥æ‰‹é€™å€‹å°ˆæ¡ˆçš„å¿ƒæƒ…ä¾†å¯«ï¼Œé€™æ¨£å°±ä¸æœƒèªç‚ºå¯«æ–‡ä»¶æ˜¯ç—›è‹¦çš„äº‹äº†ã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›å·¥ç¨‹å¸«æœƒç”¨è‡ªå‹•ç”¢ç”Ÿå™¨ç”Ÿå‡ºåˆ¶å¼åŒ–æ–‡ä»¶å¾Œå°±äº¤å·®äº†äº‹ï¼Œèªç‚ºé€™æ¨£å°±ç›¡äº†ç·¨å¯«æ–‡ä»¶çš„è²¬ä»»ã€‚ä½†é€šå¸¸é€™äº›æ–‡ä»¶åƒ…åƒ…åŒ…å«å‡½å¼å’Œåƒæ•¸çš„åç¨±ï¼Œæ²’æœ‰ä»»ä½•å®ƒç‚ºä½•å­˜åœ¨çš„èªªæ˜ï¼Œåƒè€ƒçš„åƒ¹å€¼ä¸¦ä¸å¤§ã€‚æœ‰æ™‚æ–‡ä»¶ä¸è¦‹å¾—è¦å¦å¤–å¯«ï¼Œè¨»è§£è£¡ä¹Ÿæ˜¯èªªæ˜ç‚ºä»€éº¼çš„å¥½åœ°æ–¹ã€‚</p>
<h3 id="èƒ½ç¶œè§€å…¨å±€çš„èƒ½åŠ›">èƒ½ç¶œè§€å…¨å±€çš„èƒ½åŠ›</h3>
<p>åœ¨è¨è«–ä¸€å€‹æ–°åŠŸèƒ½ï¼Œæˆ–æ˜¯ä¿®æ”¹ä¸€å€‹èˆŠåŠŸèƒ½æ™‚ï¼Œèƒ½ä¸èƒ½è€ƒæ…®åˆ°æ‰€æœ‰æœƒè¢«å½±éŸ¿çš„å±¤é¢ï¼Œé€²è€Œåˆ¤æ–·å¦‚ä½•è™•ç†ã€‚å¦å¤–é€™ä¹Ÿè€ƒé©—è‘—è³‡æ·±å·¥ç¨‹å¸«çš„è¨˜æ†¶èƒ½åŠ›ï¼Œå› ç‚ºé€šå¸¸é€™ä¸æ˜¯å·²ç¶“è¸©éç„¡æ•¸é¡ä¼¼çš„é›·ï¼Œå°±æ˜¯å°ç³»çµ±å·²ç¶“ç­è‹¥æŒ‡æŒäº†ã€‚è³‡æ·±å·¥ç¨‹å¸«æœƒç«™åœ¨ä¿¯ç°çš„è§’åº¦ä¾†è§€çœ‹æ•´å€‹å°ˆæ¡ˆå…¨è²Œï¼Œä¸¦æ¬Šå®œå„ç¨®æŠ€è¡“é¢çš„å„ªç¼ºé»å¾Œï¼Œæå‡ºå¯è¡Œçš„æ–¹æ¡ˆè®“æ±ºç­–è€…åƒè€ƒï¼Œä¹Ÿè®“å…¶ä»–åŸ·è¡Œçš„å·¥ç¨‹å¸«åœ¨å¯¦ä½œæ™‚èƒ½å¤ æœ‰ä¾å±çš„æ–¹å‘ã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›å·¥ç¨‹å¸«æœƒéåº¦æ†‚æ…®æœªä¾†çš„æƒ…æ³ï¼Œè€Œæå‡ºä¸€äº›å…¶å¯¦æ²’æœ‰æ˜é¡¯å¿…è¦çš„å› æ‡‰æªæ–½ï¼›æœ‰æ™‚é€™äº›äººæ˜¯ç‚ºäº†è®“è‡ªå·±èƒ½ä½”æœ‰ä¸€å¸­ä¹‹åœ°ï¼Œæ‰€ä»¥ç”¨ä¸€äº›æ²’æœ‰æ ¹æ“šçš„è«–é»ä¾†è®“è‡ªå·±é¡¯å¾—å¾ˆè³‡æ·±ã€‚</p>
<h3 id="å˜—è©¦å°å…¥å°åœ˜éšŠæ›´å¥½çš„æµç¨‹">å˜—è©¦å°å…¥å°åœ˜éšŠæ›´å¥½çš„æµç¨‹</h3>
<p>è³‡æ·±å·¥ç¨‹å¸«æœƒå¾æœ¨æ¡¶å®šå¾‹é«”èªåˆ°è‡ªå·±çš„æ•ˆç‡ä¸ç­‰æ–¼åœ˜éšŠçš„æ•ˆç‡ï¼Œæ‰€ä»¥æœƒè©¦è‘—å°å…¥è‰¯å¥½çš„é–‹ç™¼æµç¨‹ï¼Œæˆ–æ˜¯è‡ªå‹•åŒ–ä½ˆç½²ç­‰è®“åœ˜éšŠèƒ½æ›´æœ‰æ•ˆç‡çš„æŠ€è¡“ã€‚åœ¨é€™æœŸé–“ï¼Œä»–æœƒé€é code review æˆ–æ˜¯æ•™è‚²è¨“ç·´çš„æ–¹å¼ä¾†å”åŠ©ä¼™ä¼´å€‘å¾€å¥½çš„æ–¹å‘å‰é€²ï¼Œè®“ä»–å€‘æ„Ÿå—åˆ°å¥½çš„é–‹ç™¼æµç¨‹æ‰€å¸¶ä¾†çš„å¥½è™•ã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›å·¥ç¨‹å¸«å¾ˆå–œæ­¡æ–°æŠ€è¡“ï¼Œè€Œæ²’æœ‰è€ƒæ…®åˆ°åœ˜éšŠçš„æ¥å—åº¦å°±è²¿ç„¶å°å…¥ï¼›é€™ç¨®ç‹€æ³å¾ˆå®¹æ˜“é€ æˆæµªè²»éå¤šäººåŠ›åœ¨è§£æ±ºä¸€äº›æ–°æŠ€è¡“æ‰€å¸¶ä¾†çš„æ–°éº»ç…©ï¼Œé€²è€Œå½±éŸ¿æ•´å€‹åœ˜éšŠçš„å£«æ°£ã€‚</p>
<h2 id="å¿ƒç†ç´ è³ªå±¤é¢">å¿ƒç†ç´ è³ªå±¤é¢</h2>
<h3 id="çœŸæ­£èƒ½å®Œæˆä¸€ä»¶äº‹çš„è‡ªä¿¡">çœŸæ­£èƒ½å®Œæˆä¸€ä»¶äº‹çš„è‡ªä¿¡</h3>
<p>é€™å€‹ç‰¹é»ä¸¦ä¸æ˜¯æŒ‡è‡ªå‚²ï¼Œè€Œåœ¨æŠ€è¡“å±¤é¢çš„å„é …æŒ‡æ¨™éƒ½é”åˆ°ä¸€å®šæ°´æº–å¾Œï¼Œè³‡æ·±å·¥ç¨‹å¸«åœ¨é¢å°ä»»ä½•æŒ‘æˆ°æ™‚æ‰€ç”¢ç”Ÿçš„è‡ªä¿¡å¿ƒã€‚ä»–èƒ½å¾å„ç¨®é¢å‘ä¾†è¦åŠƒå‡ºå°ˆæ¡ˆæ‰€éœ€è¦çš„åŸºç¤å»ºè¨­ï¼Œåœ¨é–‹ç™¼æ™‚ä¹Ÿèƒ½å¤ å¾æ¶æ§‹é¢åˆ°ç¨‹å¼ç¢¼éƒ½æœ‰å¾ˆæ£’çš„è¦‹è§£èˆ‡å¯¦ä½œã€‚åœ¨ç¶“æ­·éå¤šå ´æˆ°å½¹å¾Œï¼Œé€™ç¨®æ…‹åº¦é€šå¸¸éƒ½èƒ½è´å¾—å…¶ä»–ä¼™ä¼´çš„æ•¬é‡ï¼Œæ˜ç™½åªè¦æœ‰ä»–åœ¨åœ˜éšŠè£¡ï¼Œå¾ˆå¤šå•é¡Œéƒ½èƒ½è¿åˆƒè€Œè§£ã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›å·¥ç¨‹å¸«æœƒæŠŠç†Ÿç·´å·¥å…·å¾Œå°±èƒ½å®Œæˆçš„äº‹ç•¶æˆè‡ªå·±çš„èƒ½åŠ›ï¼Œé€²è€Œç”¢ç”Ÿéåº¦çš„è‡ªä¿¡ï¼›ä¸€æ—¦æŠ½é›¢é€™äº›å·¥å…·ï¼Œä»–å€‘æœƒå¾ˆé›£æ‰¾åˆ°æ›¿ä»£æ–¹æ¡ˆä¾†è§£æ±ºå•é¡Œï¼Œé€²è€Œå°æå‡ºè³ªç–‘çš„äººç”¢ç”Ÿé˜²ç¦¦å¿ƒæ…‹ã€‚</p>
<h3 id="ä¸æ–·åœ°è‡ªæˆ‘æå‡">ä¸æ–·åœ°è‡ªæˆ‘æå‡</h3>
<p>åœ¨å·¥ä½œä¹‹é¤˜ï¼Œè³‡æ·±å·¥ç¨‹å¸«æœƒèª¿é…è‡ªå·±çš„æ™‚é–“ä¾†æ¥æ”¶æ–°çŸ¥ï¼Œä¹Ÿæœƒä¸æ–·åœ°åŠ å¼·è‡ªå·±çš„åŸºæœ¬èƒ½åŠ›ã€‚ç”±æ–¼ä»–å€‘çš„åŸºç¤æ‰“å¾—éå¸¸å¥½ï¼Œæ‰€ä»¥èƒ½å°æ–°äº‹ç‰©æœ‰èˆ‰ä¸€åä¸‰çš„èƒ½åŠ›ã€‚ä»–å€‘å°æ–°äº‹ç‰©æ¥å—åº¦é«˜ï¼Œä½†ä¹Ÿä¸æœƒéä»½è¿½é€æ–°äº‹ç‰©ï¼›ä»–å€‘æœƒé‡å°è‡ªå·±çš„èˆˆè¶£æˆ–æ˜¯å·¥ä½œçš„éœ€è¦ä¾†æœ‰è¨ˆåŠƒæ€§åœ°å­¸ç¿’ï¼Œé¿å…æŠŠæ™‚é–“èŠ±åœ¨å¤ªå¤šæ–¹å‘ä¸Šï¼Œçµæœåè€Œä¸€äº‹ç„¡æˆã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›å·¥ç¨‹å¸«æœƒæœ‰è‡ªå·±çš„ä¸€å¥—åæ–¹ï¼Œèªç‚ºé€™äº›åæ–¹å°±èƒ½å¹«ä»–é”åˆ°ç›®æ¨™ï¼Œä¸ç”¨èŠ±æ™‚é–“å­¸æ–°äº‹ç‰©ã€‚ä½†æ˜¯ç´¯ç©éŒ¯èª¤ç³Ÿç³•çš„ç¶“é©—ä¸¦ä¸èƒ½æˆç‚ºå¥½çš„è³‡æ·±å·¥ç¨‹å¸«ï¼Œå› ç‚ºä»–å¾ä¾†ä¸æ‰“ç®—ç†è§£æœ‰ç„¡æ–°çš„æ–¹æ³•å¯ä»¥åšå¾—æ›´å¥½ã€‚</p>
<h3 id="è‡¨å±ä¸äº‚">è‡¨å±ä¸äº‚</h3>
<p>å°ˆæ¡ˆåœ¨é€²è¡Œé–‹ç™¼æˆ–ç¶­è­·çš„éç¨‹ä¸­ï¼Œå¸¸å¸¸æœƒæœ‰ä¸€äº›æ„å¤–ç™¼ç”Ÿï¼Œé€™å¸¸æœƒè®“ä¸€äº›æ²’æœ‰ç¶“é©—çš„å·¥ç¨‹å¸«æ…Œäº†æ‰‹è…³ã€‚å„ªç§€çš„è³‡æ·±å·¥ç¨‹å¸«æœƒç§‰æŒè‘—ã€Œé›£é¡Œä¸æœƒå› ç‚ºä½ çš„æ†‚å¿ƒè€Œè®Šå¾—ç°¡å–®ï¼Œä¸å¦‚ä¿æŒå¹³å¸¸å¿ƒä¾†çœ‹å¾…ã€‚ã€çš„å¿ƒæ…‹ä¾†é¢å°æ„å¤–ã€‚é€™æœƒè®“ä»–å€‘è·³å‡ºè¢«æ¡†ä½çš„æ€ç¶­ï¼Œçœ‹è¦‹å•é¡Œçš„å…¨è²Œï¼Œé€²è€Œæ‰¾åˆ°æ›´å¥½çš„è§£æ±ºæ–¹æ¡ˆã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›å·¥ç¨‹å¸«æœƒåœ¨å•é¡Œç™¼ç”Ÿæ™‚æ¼ ä¸é—œå¿ƒï¼Œä¼¼ä¹é€™äº›å•é¡Œäº‹ä¸é—œå·±ä¸€æ¨£ã€‚é€™æœƒç™¼ç”Ÿåœ¨ä¸€äº›æ¬Šè²¬éåº¦åˆ†æ˜ï¼ŒçŠ¯éŒ¯å°±æœƒè¢«è™•ç½°çš„åˆ¶åº¦è£¡ã€‚</p>
<h3 id="æ¨‚æ–¼åˆ†äº«æ‰€çŸ¥">æ¨‚æ–¼åˆ†äº«æ‰€çŸ¥</h3>
<p>è³‡æ·±å·¥ç¨‹å¸«æœƒæ„è­˜åˆ°åªæœ‰æŠ€è¡“èƒ½åŠ›é«˜æ˜¯ä¸å¤ çš„ï¼Œä»–å€‘æœƒé€éæ¼”èªªçš„æ–¹å¼ä¾†è¨“ç·´è‡ªå·±çš„å£æ‰æŠ€å·§ï¼Œä¹Ÿæœƒé€éç´€éŒ„æ–‡ç« çš„æ–¹å¼ä¾†åŠ å¼·è‡ªå·±çš„æ–‡ç­†èƒ½åŠ›ã€‚è€Œè—‰ç”±é€™äº›åˆ†äº«ï¼Œé™¤äº†èƒ½å¹«åŠ©ä»–äººå°‘èµ°å†¤æ‰è·¯ä¹‹å¤–ï¼Œäº‹å¯¦ä¸Šä¹Ÿèƒ½å¾—åˆ°æ›´å¤šå›é¥‹ä¾†è®“è‡ªå·±çš„è¦–ç•Œè®Šå¾—æ›´åŠ å»£é—Šã€‚æŠ€è¡“ç¤¾ç¾¤æœ‰å¾ˆå¤šé€™æ¨£çš„å·¥ç¨‹å¸«ï¼Œä»–å€‘æœƒåœ¨å·¥ä½œä¹‹é¤˜åƒåŠ è®€æ›¸æœƒæˆ–ç ”è¨æœƒï¼Œä»¥åˆ†äº«æ›´å¤šå·¥ä½œä¸Šçš„ç¶“é©—ã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›å·¥ç¨‹å¸«å¾ˆå–œæ­¡åˆ†äº«æ›¸ä¸­çš„æ­»çŸ¥è­˜ï¼Œè€Œä¸æ˜¯è‡ªå·±çš„å¯¦å‹™ç¶“é©—è«‡ï¼›ä»–å€‘åˆ†äº«çš„çŸ¥è­˜å¯èƒ½å¾ˆæœ‰é“ç†ï¼Œä½†å»å¾ˆé›£è·Ÿå¯¦éš›ç‹€æ³æœ‰æ‰€é€£çµã€‚</p>
<h3 id="æºé€šå—äººæ•¬é‡">æºé€šå—äººæ•¬é‡</h3>
<p>åœ¨é€²è¡Œå°ˆæ¡ˆè¨è«–æ™‚ï¼Œåœ¨è‡ªå·±æœ‰æŠŠæ¡çš„éƒ¨ä»½æœƒåšå‡ºæœ‰è‡ªä¿¡çš„ç™¼è¨€ï¼›è€Œä¸”ä¹Ÿæœƒå°Šé‡åŒäº‹çš„æƒ³æ³•ï¼Œè€Œä¸æ˜¯ç”¨å—¤ä¹‹ä»¥é¼»çš„æ–¹å¼ä¾†åé§ã€‚è¬™éœæ˜¯è³‡æ·±å·¥ç¨‹å¸«ä¸€å€‹å¾ˆé‡è¦çš„ç‰¹è‰²ï¼Œä»–ä¸æœƒåœ¨ä¸æ‡‚çš„åœ°æ–¹ä¸Šçˆ­è¾¯ï¼Œè€Œæ˜¯æœƒåœ¨æ™‚é–“å…è¨±çš„ç‹€æ³ä¸‹è™›å¿ƒè«‹æ•™ï¼Œä¸ç„¶å°±æ˜¯ä¸‹æ¬¡è¨è«–å‰å…ˆä½œè¶³åŠŸèª²å†ä¸Šå ´ã€‚ä¼™ä¼´å€‘é€šå¸¸éƒ½æœƒå–œæ­¡æ‰¾ä»–è¨è«–æŠ€è¡“ï¼Œé€šå¸¸ä¹Ÿä¸ä¸€å®šæ˜¯å› ç‚ºèƒ½åŠ›è½å·®çš„é—œä¿‚ï¼Œè€Œæ˜¯è·Ÿä»–èŠæŠ€è¡“é€™ä»¶äº‹æœ¬èº«å°±å¾ˆå¿«æ¨‚ã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›èƒ½åŠ›å¾ˆå¼·çš„å·¥ç¨‹å¸«ï¼Œæœƒä»¥å¼·å‹¢çš„æ–¹å¼ä¾†è®“å°æ–¹æ¥å—è‡ªå·±çš„æƒ³æ³•ã€‚å³ä¾¿ä»–æ˜¯å°çš„ï¼Œä½†é€šå¸¸æ™‚é–“ä¸€ä¹…ä¹‹å¾Œï¼Œå°±æœƒç ´å£<del>çš‡åŸ</del>åœ˜éšŠå…§çš„å’Œè«§ã€‚</p>
<h3 id="å‹‡æ–¼èªéŒ¯è‡ªæˆ‘åçœ">å‹‡æ–¼èªéŒ¯ã€è‡ªæˆ‘åçœ</h3>
<p>ä¸è«–æ˜¯ç·šä¸Šçš„å¤§å•é¡Œï¼Œæˆ–æ˜¯é–‹ç™¼æ™‚çš„éŒ¯èª¤ï¼Œè³‡æ·±å·¥ç¨‹å¸«éƒ½æœƒå‹‡æ–¼èªéŒ¯ï¼›å¤šæ•¸é€™æ¨£çš„å·¥ç¨‹å¸«ï¼Œä¹Ÿéƒ½æ˜¯å‹‡æ–¼æ‰¿æ“”è²¬ä»»çš„äººã€‚ä»–æ‡‚å¾—æ‰¿èªè‡ªå·±çš„éŒ¯èª¤ä¸¦ä¸æ˜¯å¯æ¥çš„äº‹ï¼Œå› ç‚ºä»–çŸ¥é“é€™æ˜¯è‡ªå·±æˆé•·çš„å¥‘æ©Ÿï¼›æ‰€ä»¥ä»–æœƒåœ¨å•é¡Œè¢«è§£æ±ºä¹‹å¾Œï¼Œé‡æ–°çœè¦–è‡ªå·±åšéŒ¯äº†ä»€éº¼ã€‚é€™å€’ä¸æ˜¯èªªè³‡æ·±å·¥ç¨‹å¸«è©²æŠŠè²¬ä»»å¾€è‡ªå·±èº«ä¸Šæ”¬ï¼Œè€Œæ˜¯è¦è®“åœ˜éšŠèƒ½å¤ å„˜å¿«ç™¼ç¾å•é¡Œï¼Œå„˜å¿«å»è§£æ±ºã€‚é€™æ¨£çš„å·¥ç¨‹å¸«é€šå¸¸å¯ä»¥åœ¨åçœæœƒè­°ä¸Šæå‡ºä¸å°‘å¥½çš„è¦‹è§£ï¼Œå› ç‚ºä»–å…¶å¯¦å°±æ˜¯åœ˜éšŠçš„é¡å­ï¼Œèƒ½å¹«åŠ©å¤§å®¶çœ‹è¦‹è‡ªå·±å¿½ç•¥çš„å•é¡Œã€‚</p>
<p>åæŒ‡æ¨™ï¼šæœ‰äº›å·¥ç¨‹å¸«æœƒæŠ±è‘—ã€ŒæŠŠééŒ¯æ¨çµ¦åˆ¥äººï¼Œæ¯”è‡ªå·±æ‰¿èªä¾†å¾—ç°¡å–®ã€‚ã€ä»–å€‘å¯èƒ½æœƒä»¥è·è²¬æ¬Šé™ä¾†è®“è‡ªå·±ä¸å—è²¬é›£ï¼Œæˆ–æ˜¯æ¯«ç„¡è‚©è†€åœ°æŠŠééŒ¯ç›´æ¥æ¨çµ¦è³‡æ·ºçš„åŒäº‹ã€‚</p>
<h2 id="é€™äº›ä¸æ˜¯å…¨éƒ¨">é€™äº›ä¸æ˜¯å…¨éƒ¨</h2>
<p>ä»¥ä¸Šé€™äº›é¢å‘ä¸¦æ²’æœ‰å®Œæ•´åœ°æ¶µè“‹ä¸€å€‹è³‡æ·±å·¥ç¨‹å¸«æœƒæœ‰çš„ç‰¹è³ªèˆ‡èƒ½åŠ›ï¼Œæˆ‘æƒ³å„ä½å¯ä»¥å°±è¿‘è§€å¯Ÿè‡ªå·±èº«é‚Šçš„å„ªç§€åŒäº‹ï¼Œçœ‹çœ‹ä»–å€‘èº«ä¸Šæ˜¯æœ‰å“ªäº›å€¼å¾—ä½ æ•¬é‡çš„åœ°æ–¹ã€‚ç•¶ç„¶ä¹Ÿä¸æ˜¯èªªæ¯å€‹è³‡æ·±å·¥ç¨‹å¸«éƒ½è¦èƒ½åšåˆ°ä¸Šé¢é€™äº›ï¼Œåƒæˆ‘è‡ªå·±ä¹Ÿå¸¸å¸¸æœƒè‡ªçœæœ‰å“ªäº›ç‰¹è³ªèˆ‡èƒ½åŠ›æ˜¯æˆ‘é‚„æ²’é”åˆ°çš„ã€‚</p>
<p>è€Œä¸è«–æ˜¯èƒ½åŠ›æˆ–ç‰¹è³ªï¼Œå…¶å¯¦éƒ½æ˜¯ç›¸è¼”ç›¸ä¹˜çš„ã€‚åœ¨æŠ€è¡“èƒ½åŠ›ä¸Šé›–ç„¶å¯ä»¥é€éè‡ªæˆ‘è¨“ç·´ä¾†åŠ å¼·ï¼Œä¸éå¿ƒç†ç´ è³ªå°±æ¯”è¼ƒé›£åœ¨ä¸€å¤•ä¹‹é–“æ”¹è®Šäº†ã€‚å„ªç§€çš„è³‡æ·±å·¥ç¨‹å¸«å‰‡æœƒåœ¨é€™å…©æ–¹é¢åŒæ™‚ä¿±é€²ï¼Œå¾å·¥ä½œä¸Šå»æ‰¾å‡ºè®“è‡ªå·±çš„æŠ€è¡“èƒ½åŠ›èˆ‡å¿ƒç†ç´ è³ªéƒ½èƒ½æå‡çš„æ©Ÿæœƒã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>åœ¨ PHPUnit ä¸­æ¸¬è©¦éœ€è¦ closure çš„å‡½å¼</title>
			<link>https://jaceju.net/php-closure-testing/</link>
			<pubDate>Mon, 09 Nov 2015 19:11:39 +0800</pubDate>
			
			<guid>https://jaceju.net/php-closure-testing/</guid>
			<description>ä¸çŸ¥é“ä½ æœ‰æ²’æœ‰åœ¨é–‹ç™¼ PHP ç¨‹å¼çš„éç¨‹ä¸­ï¼Œæ¸¬è©¦ééœ€è¦ä½¿ç”¨ anonymous function æˆ– closure çš„å‡½å¼æˆ–é¡åˆ¥æ–¹æ³•ï¼Ÿæˆ‘åœ¨é–‹ç™¼è‡ªå·±çš„å‡½å¼åº«æ™‚ï¼Œå°±é‡åˆ°äº†éœ€è¦æ¸¬è©¦ closure æ˜¯å¦è¢«æ­£ç¢ºèª¿ç”¨çš„å•é¡Œã€‚</description>
			<content type="html"><![CDATA[<p>ä¸çŸ¥é“ä½ æœ‰æ²’æœ‰åœ¨é–‹ç™¼ PHP ç¨‹å¼çš„éç¨‹ä¸­ï¼Œæ¸¬è©¦ééœ€è¦ä½¿ç”¨ anonymous function æˆ– closure çš„å‡½å¼æˆ–é¡åˆ¥æ–¹æ³•ï¼Ÿæˆ‘åœ¨é–‹ç™¼è‡ªå·±çš„å‡½å¼åº«æ™‚ï¼Œå°±é‡åˆ°äº†éœ€è¦æ¸¬è©¦ closure æ˜¯å¦è¢«æ­£ç¢ºèª¿ç”¨çš„å•é¡Œã€‚</p>
<p>åœ¨è§£æ±ºå¹¾å€‹å•é¡Œå¾Œï¼Œæˆ‘ç™¼ç¾å…¶å¯¦åšæ³•ä¸¦ä¸é›£ï¼Œæ‰€ä»¥æ¥ä¸‹ä¾†æˆ‘å°±ä¾†ä»‹ç´¹å¹¾å€‹æ¸¬è©¦ closure çš„æ–¹å¼ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="ç¯„ä¾‹">ç¯„ä¾‹</h2>
<p>å…ˆä¾†çœ‹çœ‹ä¸€å€‹ç°¡å–®çš„ closure ä½¿ç”¨ç¯„ä¾‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Example
{
    public function runClosure(Closure $closure)
    {
        $closure();
    }
}
</code></pre></div><p>åœ¨ <code>Example::runClosure</code> æ–¹æ³•ä¸­æ¥å—äº†ä¸€å€‹ <code>$closure</code> åƒæ•¸ï¼Œè€Œå®ƒçš„å‹åˆ¥å±¬æ–¼ <code>Closure</code> é¡åˆ¥ï¼Œä½¿æˆ‘å€‘å¯ä»¥ç›´æ¥åœ¨ç¨‹å¼è£¡ç”¨ <code>$closure()</code> çš„æ–¹å¼ä¾†åŸ·è¡Œå®ƒçš„å…§å®¹ã€‚</p>
<p>æ¸¬è©¦å‰‡æ˜¯é€™æ¨£å¯«çš„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class ExampleTest extends PHPUnit_Framework_TestCase
{
    public function testRunClosure()
    {
        $example = new Example();

        $closure = function () {};
        $example-&gt;runClosure($closure);
    }
}
</code></pre></div><p>åœ¨æ¸¬è©¦ä¸­ï¼Œæˆ‘å€‘å‚³å…¥ä¸€å€‹ anonymous function çµ¦ç›®æ¨™ç‰©ä»¶çš„ <code>runClosure</code> æ–¹æ³•ä½¿ç”¨ã€‚åœ¨ PHP ä¸­ï¼Œ closure å’Œ anonymous function å…¶å¯¦æ˜¯ä¸€æ¨£çš„ï¼Œå®ƒå€‘æœ€å¾Œéƒ½æœƒè½‰åŒ–æˆ <code>Closure</code> ç‰©ä»¶ï¼›é€™é»å’Œ JavaScript ä¸åŒï¼Œè¦ç‰¹åˆ¥æ³¨æ„ã€‚</p>
<p>å•é¡Œä¾†äº†ï¼Œæˆ‘å€‘æ€éº¼é©—è­‰ <code>$closure</code> è¢«å‘¼å«äº†å‘¢ï¼Ÿ</p>
<h2 id="é‡åˆ°çš„å•é¡Œ">é‡åˆ°çš„å•é¡Œ</h2>
<p>æˆ‘ç¬¬ä¸€å€‹æƒ³æ³•æ˜¯ä½¿ç”¨ <a href="http://docs.mockery.io">Mockery</a> ä¾†å°‡ anonymous function åŒ…èµ·ä¾†ï¼Œçœ‹çœ‹ PHP åº•å±¤æœƒå‘¼å« closure çš„å“ªå€‹å‡½å¼ï¼Œæˆ‘å†åš <code>shouldReceive</code> é©—è­‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$closure = Mockery::mock(function () {});
$example-&gt;runClosure($closure);
</code></pre></div><p>çµæœåŸ·è¡Œæ¸¬è©¦æ™‚ï¼Œå‡ºç¾äº†ä»¥ä¸‹éŒ¯èª¤è¨Šæ¯ï¼š</p>
<pre><code>Argument 1 passed to Example::runClosure() must be an instance of Closure, instance of Mockery_0_Closure_Closure given
</code></pre><p>é€™å°±å¥‡æ€ªäº†ï¼Œ Mockery æ‰€ mock å‡ºä¾†çš„ç‰©ä»¶ï¼Œé¡å‹æ‡‰è©²æ˜¯ Closure çš„å­é¡åˆ¥å‘€ï¼Ÿç‚ºä»€éº¼æœƒè¢« type hint æ‰“æ§å‘¢ï¼Ÿ</p>
<p>å¸¶è‘—ç–‘æƒ‘ï¼Œæˆ‘è©¦è‘—ç›´æ¥ mock <code>Closure</code> é¡åˆ¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$closure = Mockery::mock(Closure::class);
$example-&gt;runClosure($closure);
</code></pre></div><p>éŒ¯èª¤è¨Šæ¯è®Šæˆäº†ï¼š</p>
<pre><code>Mockery\Exception: The class \Closure is marked final and its methods cannot be replaced. Classes marked final can be passed in to \Mockery::mock() as instantiated objects to create a partial mock, but only if the mock is not subject to type hinting checks.
</code></pre><p>åŸä¾†å•é¡Œå°±å‡ºåœ¨æ–¼ <code>Closure</code> é¡åˆ¥åœ¨ PHP ä¸­æ˜¯è¢«å®£å‘Šç‚º <code>final</code> ï¼Œä¹Ÿå°±æ˜¯ç„¡æ³•å†è¢«ç¹¼æ‰¿ã€‚è€Œ Mockery é‡åˆ°é€™æ¨£çš„é¡åˆ¥ï¼Œ<a href="http://docs.mockery.io/en/latest/reference/final_methods_classes.html">å®˜æ–¹çš„å»ºè­°</a>æ˜¯ï¼š</p>
<blockquote>
<p>The simplest solution is not to mark classes or methods as final!</p>
</blockquote>
<p>å°±æ˜¯ä¸è¦ç”¨ <code>final</code> å•¦ï¼å¯æ˜¯ Closure æ˜¯ PHP çš„å…§å»ºé¡åˆ¥ï¼Œæ²’è¾¦æ³•æŠŠ <code>final</code> æ‹¿æ‰ï¼Œé€™æ¨£ä¸€ä¾†ä¸å°±ç„¡è§£äº†ï¼Ÿ</p>
<h2 id="æ³¨å…¥-spy-ç‰©ä»¶ä¾†é©—è­‰">æ³¨å…¥ spy ç‰©ä»¶ä¾†é©—è­‰</h2>
<p>å…¶å¯¦è½‰å€‹å¿µé ­ï¼Œå› ç‚ºå‚³å…¥å¾…æ¸¬ç¨‹å¼çš„ closure å…§å®¹æ˜¯æˆ‘å¯ä»¥æ§åˆ¶çš„ï¼Œæ‰€ä»¥æˆ‘ä¸ä¸€å®šè¦å» mock closure ï¼Œè€Œæ˜¯è®“å®ƒå¯¦éš›è·‘è·‘çœ‹ï¼Œç„¶å¾Œé©—è­‰è£¡é¢çš„ç¨‹å¼ç¢¼æ˜¯å¦æœ‰è¢«åŸ·è¡Œå°±å¯ä»¥äº†ã€‚è€Œæœ€ç°¡å–®çš„æ–¹æ³•ï¼Œå°±æ˜¯æ’å…¥ä¸€å€‹ spy ç‰©ä»¶ï¼Œé€éå®ƒä¾†å¾—çŸ¥ closure æ˜¯å¦æœ‰è¢«åŸ·è¡Œã€‚</p>
<p>æˆ‘åœ¨æ¸¬è©¦æ¡ˆä¾‹è£¡ mock äº† <code>stdClass</code> é€™å€‹æ¨™æº–é¡åˆ¥ï¼Œç„¶å¾Œæ”¾åœ¨ <code>$spy</code> é€™å€‹è®Šæ•¸è£¡ï¼›ç„¶å¾Œå‘Šè¨´å®ƒæ‡‰è©²è¦æ¥æ”¶åˆ° <code>detected</code> é€™å€‹æ–¹æ³•è¢«åŸ·è¡Œä¸€æ¬¡çš„è³‡è¨Šã€‚æœ€å¾ŒæŠŠé€™å€‹ <code>$spy</code> è®Šæ•¸æ³¨å…¥ closure è£¡ï¼Œåœ¨è£¡é¢åŸ·è¡Œ <code>detected</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    public function testRunClosure()
    {
        $spy = Mockery::mock(stdClass::class);
        $example = new Example();

        $spy-&gt;shouldReceive(&#39;detected&#39;)-&gt;once();

        $example-&gt;runClosure(function () use ($spy) {
            $spy-&gt;detected();
        });
    }
</code></pre></div><p>é€™æ¨£ä¸€ä¾†å°±å¯ä»¥é€é Spy ç‰©ä»¶ä¾†é©—è­‰ closure æ˜¯å¦æœ‰è¢«åŸ·è¡Œäº†ã€‚</p>
<h2 id="é©—è­‰æ³¨å…¥ç›®æ¨™ç‰©ä»¶çš„-closure">é©—è­‰æ³¨å…¥ç›®æ¨™ç‰©ä»¶çš„ closure</h2>
<p>ä¸éæœ‰æ™‚å€™æˆ‘å€‘æœƒå¸Œæœ›åœ¨ closure è£¡ä½¿ç”¨ç›®æ¨™ç‰©ä»¶ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Example
{
    public function runClosure(Closure $closure)
    {
        $closure($this);
    }
}
</code></pre></div><p>é€™æ™‚ closure å°±å¯ä»¥å°‡ç›®æ¨™ç‰©ä»¶ç•¶åšåƒæ•¸æ³¨å…¥ï¼Œç„¶å¾Œå†åŸ·è¡Œå®ƒçš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$example = new Example();

$example-&gt;runClosure(function ($target) {
   $target-&gt;otherMethod();
});
</code></pre></div><p>ä½†æˆ‘åªæ˜¯è¦ç¢ºèªç›®æ¨™ç‰©ä»¶æœ‰è¢«æ­£ç¢ºå‚³å…¥ closure ä¸­ï¼Œæ‰€ä»¥æ‡‰è©²è¦é©—è­‰ç›®æ¨™ç‰©ä»¶çš„é¡åˆ¥æ˜¯ <code>Example</code> å°±å¯ä»¥äº†ã€‚æˆ‘å€‘å¯ä»¥ç›´æ¥åœ¨ closure ä¸­ä½¿ç”¨ <code>$this</code> ä¾†å‘¼å«é©—è­‰æ–¹æ³•ï¼Œå› ç‚ºé€™æ™‚çš„ <code>$this</code> æ˜¯æŒ‡å‘æ¸¬è©¦æ¡ˆä¾‹çš„ç‰©ä»¶ã€‚æ‰€ä»¥æ¸¬è©¦å°±å¯ä»¥å¯«æˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">public function testRunClosure()
{
    $example = new Example();

    $example-&gt;runClosure(function ($target) {
        $this-&gt;assertInstanceOf(Example::class, $target);
    });
}
</code></pre></div><p>åƒé€™æ¨£çš„å ´åˆå°±ä¸éœ€è¦ä½¿ç”¨ spy ç‰©ä»¶äº†ã€‚</p>
<h2 id="é©—è­‰ä½¿ç”¨-bindto-çš„-closure">é©—è­‰ä½¿ç”¨ bindTo çš„ closure</h2>
<p>å¦‚æœåœ¨å¾…æ¸¬ç›®æ¨™ç‰©ä»¶çš„æ–¹æ³•è£¡ï¼Œä½¿ç”¨ <code>Closure::bindTo</code> é€™å€‹æ–¹æ³•ä¾†é‡æ–°å®šç¾© <code>$this</code> æ™‚ï¼Œè©²æ€éº¼æ¸¬è©¦å‘¢ï¼Ÿä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">public function runClosure(Closure $closure)
{
    $cb = $closure-&gt;bindTo($this);
    $cb();
}
</code></pre></div><p>æ³¨æ„ï¼Œé€™æ™‚å€™ <code>$cb</code> ä¸¦ä¸æ˜¯ç”¨æ³¨å…¥çš„åƒæ•¸ï¼Œè€Œæ˜¯ä½¿ç”¨åŸ·è¡Œæ™‚æœŸçš„ context (ä¹Ÿå°±æ˜¯ <code>$this</code> ) ä¾†æŒ‡å‘ç›®æ¨™ç‰©ä»¶ï¼›é€™ä¹Ÿä½¿å¾—æˆ‘å€‘ä¸èƒ½åœ¨æ¸¬è©¦ä¸­ç›´æ¥ç”¨ <code>$this</code> ä¾†å‘¼å«é©—è­‰æ–¹æ³•ï¼Œå¿…é ˆå¦å°‹å‡ºè·¯ã€‚</p>
<p>æ‰€å¹¸ PHP çš„ closure é‚„æä¾›äº†ä¸€å€‹ <code>use</code> çš„èªæ³•ï¼Œè®“æˆ‘å€‘å¯ä»¥æŠŠå¤–éƒ¨è®Šæ•¸å¸¶å…¥ closure ä¸­ã€‚ä½†å®ƒä¸èƒ½ç›´æ¥å¸¶å…¥ <code>$this</code> ï¼Œæ‰€ä»¥å¿…é ˆæ›å€‹åå­—ã€‚æœ€å¾Œæ¸¬è©¦å°±å¯ä»¥æ”¹æˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">public function testRunClosure()
{
    $assert = $this;
    $example = new Example();

    $example-&gt;runClosure(function () use ($assert) {
        $assert-&gt;assertInstanceOf(Example::class, $this);
    });
}
</code></pre></div><h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>closure æ˜¯åœ¨ PHP 5.3 ä¸­å°±å¼•å…¥çš„ç‰¹æ€§ï¼Œç¾åœ¨è¶Šä¾†è¶Šå¤šå‡½å¼åº«èˆ‡æ¡†æ¶éƒ½å·²ç¶“å°‡å®ƒç´å…¥è¨­è¨ˆæ™‚çš„è€ƒé‡äº†ã€‚ç•¶ä½ æœ‰éœ€è¦è‡ªå·±è¨­è¨ˆä½¿ç”¨ closure çš„æ–¹æ³•æ™‚ï¼Œå°±å¯ä»¥å˜—è©¦é€™äº›æ–¹æ³•ä¾†æ¸¬è©¦ closure ï¼š</p>
<ol>
<li>ä½¿ç”¨ anonymous function æ™‚ï¼Œä½¿ç”¨ spy ç‰©ä»¶ä¾†è§€å¯Ÿã€‚</li>
<li>ç•¶ closure æœƒæ³¨å…¥ç›®æ¨™ç‰©ä»¶æ™‚ï¼Œç›´æ¥é©—è­‰ç›®æ¨™ç‰©ä»¶çš„é¡åˆ¥ã€‚</li>
<li>ç•¶ closure æ˜¯é€é <code>bindTo</code> ä¾†ç¹«çµç›®æ¨™ç‰©ä»¶æ™‚ï¼Œç”¨ <code>use</code> ä¾†å¦å¤–å‚³éæ¸¬è©¦æ¡ˆä¾‹ç‰©ä»¶ï¼Œä»¥ä¾¿å‘¼å« assertion æ–¹æ³•é©—è­‰ã€‚</li>
</ol>
<p>å¦‚æœæœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œä¹Ÿæ­¡è¿å¤§å®¶å»ºè­°ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>åˆ©ç”¨ PHPUnit èˆ‡ Mink ä¾†åš Web æ¸¬è©¦</title>
			<link>https://jaceju.net/web-testing-with-phpunit-mink/</link>
			<pubDate>Tue, 27 Oct 2015 18:36:05 +0800</pubDate>
			
			<guid>https://jaceju.net/web-testing-with-phpunit-mink/</guid>
			<description>å¦‚æœä½ é¢å°çš„æ˜¯ä»¥å‰èˆŠæœ‰çš„ PHP ç¨‹å¼ï¼Œæ˜¯æ™‚å€™è² èµ·ä¸€äº›è²¬ä»»äº†ã€‚ æˆ‘çŸ¥é“å®ƒæ”¹èµ·ä¾†å¾ˆç—›è‹¦ï¼Œä¸€å †ä¸è‰¯çš„ PHP ç¨‹å¼ç¿’æ…£éƒ½é˜»ç¤™ä½ çš„ä¿®æ­£ï¼›ä½¿å¾—æ¯æ¬¡èª¿æ•´åŠŸèƒ½æ™‚ï¼Œåˆ°åº•æ”¹å¾—</description>
			<content type="html"><![CDATA[<p>å¦‚æœä½ é¢å°çš„æ˜¯ä»¥å‰èˆŠæœ‰çš„ PHP ç¨‹å¼ï¼Œæ˜¯æ™‚å€™è² èµ·ä¸€äº›è²¬ä»»äº†ã€‚</p>
<p>æˆ‘çŸ¥é“å®ƒæ”¹èµ·ä¾†å¾ˆç—›è‹¦ï¼Œä¸€å †ä¸è‰¯çš„ PHP ç¨‹å¼ç¿’æ…£éƒ½é˜»ç¤™ä½ çš„ä¿®æ­£ï¼›ä½¿å¾—æ¯æ¬¡èª¿æ•´åŠŸèƒ½æ™‚ï¼Œåˆ°åº•æ”¹å¾—å°ä¸å°ï¼Œå¾—è¦ç­‰åˆ°ä¸Šç·šæ‰çŸ¥é“ã€‚æƒ³è¦é‡å¯«ä¸€å€‹æ–°ç‰ˆæœ¬ï¼Œä½†å¤ªå¤šçš„å¯¦ä½œç´°ç¯€ä½ ä¸æ¸…æ¥šï¼›ä¹Ÿæ²’æœ‰æœ€æ–°çš„è¦æ ¼æ–‡ä»¶ï¼Œè®“ä½ ç„¡æ³•ç‚ºæ–°ç‰ˆæœ¬åšå‡ºåŠŸèƒ½ç„¡èª¤çš„ä¿è­‰ã€‚</p>
<p>ç¾åœ¨ä½ å”¯ä¸€æ“æœ‰çš„ï¼Œå°±æ˜¯å·²ç¶“åœ¨ç·šä¸Šé‹ä½œçš„ç¨‹å¼é‚è¼¯ï¼›é›–ç„¶å®ƒå¯èƒ½é‚„æœ‰ bug ï¼Œä½†è‡³å°‘å¤§å¤šæ•¸çš„åŠŸèƒ½æ˜¯é€šéä½¿ç”¨è€…é©—è­‰çš„ã€‚é‚£éº¼å…ˆç‚ºå®ƒè²·å€‹ä¿éšªå§ï¼ç¢ºä¿ä¹‹å¾Œçš„ä¿®æ”¹ä¸æœƒå½±éŸ¿åˆ°å…¶ä»–åŠŸèƒ½çš„æ­£å¸¸é‹ä½œï¼›è€Œæœ€ç›´æ¥çš„æ–¹å¼ï¼Œå°±æ˜¯æŠŠç›®å‰ç¨‹å¼é‚è¼¯æ‰€å‘ˆç¾çš„çµæœæˆ–æ˜¯ä½¿ç”¨è€…çš„æ“ä½œï¼Œå¯«æˆè‡ªå‹•åŒ– Web æ¸¬è©¦ã€‚</p>
<p>å»ºç«‹ Web æ¸¬è©¦çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œé€™è£¡æˆ‘å°‡ä»‹ç´¹æˆ‘åœ¨å¯¦å‹™ä¸Šä½¿ç”¨ <a href="https://phpunit.de/">PHPUnit</a> åŠ ä¸Š <a href="http://mink.behat.org/en/latest/">Mink</a> æ­é… <a href="http://phantomjs.org/">PhantomJS</a> çš„æ–¹æ³•ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="æ‰€éœ€å·¥å…·èˆ‡åŸç†">æ‰€éœ€å·¥å…·èˆ‡åŸç†</h2>
<p>åœ¨ Web æ¸¬è©¦ä¸­ï¼Œä¸»è¦åˆ†æˆä¸‰å€‹éƒ¨ä»½ï¼š</p>
<ul>
<li>è‡ªå‹•åŒ–æ¸¬è©¦æ¡†æ¶ï¼šè² è²¬åŸ·è¡Œæ¸¬è©¦æ¡ˆä¾‹åŠé©—è­‰</li>
<li>ç€è¦½å™¨æ§åˆ¶å™¨æˆ–æ¨¡æ“¬å™¨ï¼šé€éè…³æœ¬ä¾†æ“ä½œæˆ–æ¨¡æ“¬ç€è¦½å™¨çš„è¡Œç‚º</li>
<li>ç›®æ¨™ç€è¦½å™¨ï¼šå°±æ˜¯æˆ‘å€‘å¸¸ç”¨çš„ç¶²é ç€è¦½å™¨</li>
</ul>
<p>PHPUnit æ˜¯ PHP ä¸­æœ€å¸¸è¦‹çš„è‡ªå‹•åŒ–æ¸¬è©¦æ¡†æ¶ï¼Œè¦æ‡‰ç”¨åœ¨èˆŠå°ˆæ¡ˆä¸­ä¹Ÿéå¸¸è¼•é¬†ã€‚</p>
<p>Mink æ‰®æ¼”çš„å°±æ˜¯æ§åˆ¶ç€è¦½å™¨çš„è§’è‰²ï¼Œå®ƒå¯ä»¥é€éä¸åŒçš„ <a href="http://mink.behat.org/en/latest/guides/drivers.html">Driver</a> ä¾†æ§åˆ¶æˆ–æ¨¡æ“¬ç€è¦½å™¨ã€‚</p>
<p>è€Œ PhantomJS å‰‡æ˜¯ä¸€å€‹é€éç¨‹å¼ä¾†æ“ä½œçš„ Headless WebKit ç€è¦½å™¨ï¼›ä¹Ÿå› ç‚ºå®ƒæ²’æœ‰è¦–çª—ä»‹é¢ï¼Œæ‰€ä»¥å•Ÿå‹•é€Ÿåº¦éå¸¸å¿«ï¼Œéå¸¸é©åˆç”¨ä¾†æ¸¬è©¦ã€‚å¦å¤–å®ƒé‚„å…§å»º <a href="GhostDriver">GhostDriver</a> ï¼Œè®“æˆ‘å€‘å¯ä»¥é€é <a href="https://code.google.com/p/selenium/wiki/JsonWireProtocol">WebDriver Wire Protocol</a>  ä¾†æ“ä½œå®ƒã€‚</p>
<p>æ‰€ä»¥æ•´å€‹ Web æ¸¬è©¦çš„åŸºç¤ï¼Œå°±æ˜¯åœ¨ PHPUnit çš„æ¸¬è©¦æ¡ˆä¾‹ä¸­ï¼Œé€é Mink çš„ Selenium2 Driver ä¾†æ“ä½œ PhamtomJS ã€‚</p>
<p>æ¥ä¸‹ä¾†å°±é€²å…¥å¯¦ä½œå§ã€‚</p>
<h2 id="å·¥å…·çš„å®‰è£">å·¥å…·çš„å®‰è£</h2>
<p>ä»¥ä¸‹ä»‹ç´¹çš„å®‰è£æ–¹å¼ï¼Œéƒ½æ˜¯åœ¨ Mac OS X ç’°å¢ƒä¸‹å®Œæˆï¼›å…¶ä»–ä½œæ¥­ç³»çµ±çš„å®‰è£æ–¹å¼ä¹Ÿå·®ä¸å¤šï¼Œé€™è£¡å°±ä¸å†è´…è¿°ã€‚</p>
<h3 id="å®‰è£-phpunit-èˆ‡-mink">å®‰è£ PHPUnit èˆ‡ Mink</h3>
<p>å…ˆå»ºç«‹ä¸€å€‹å°ˆæ¡ˆç›®éŒ„ï¼Œç„¶å¾Œåˆ‡æ›åˆ°å°ˆæ¡ˆç›®éŒ„ä¸‹ï¼ŒåŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">composer require phpunit/phpunit behat/mink-selenium2-driver
</code></pre></div><p>é€™æ¨£ Composer æœƒå°‡ PHPUnit ã€ Mink åŠ Mink Selenium 2 Driver å®‰è£åœ¨ <code>vendor</code> ç›®éŒ„ä¸‹ï¼Œä¸¦è‡ªå‹•å»ºç«‹ <code>composer.json</code> åŠ <code>composer.lock</code> å…©å€‹æª”æ¡ˆã€‚</p>
<p>è¨»ï¼šé€™è£¡æˆ‘å‡è¨­ä½ çš„ç’°å¢ƒå¯ä»¥åŸ·è¡Œ <code>composer</code> æŒ‡ä»¤ï¼Œæ‰€ä»¥ä¹Ÿä¸å†è´…è¿° Composer çš„å®‰è£æµç¨‹ã€‚</p>
<h3 id="å®‰è£-phantomjs">å®‰è£ PhantomJS</h3>
<p>æ¥è‘—åˆ° <a href="http://phantomjs.org/download.html">PhantomJS å®˜ç¶²</a>ä¸‹è¼‰ Mac OS X å°ˆç”¨çš„ ZIP æª”ã€‚ç„¶å¾ŒåŸ·è¡Œï¼š</p>
<pre><code>unzip phantomjs-2.0.0-macosx.zip
sudo mv phantomjs /usr/local/bin/
</code></pre><p>ç”¨ä»¥ä¸‹æŒ‡ä»¤ç¢ºèªæœ‰å®‰è£å®Œæˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">phantomjs --version
</code></pre></div><p>æ²’å•é¡Œçš„è©±ï¼Œæ‡‰è©²æœƒå‡ºç¾ <code>2.0.0</code> ã€‚</p>
<h2 id="è¨­å®šå°ˆæ¡ˆçš„-phpunit">è¨­å®šå°ˆæ¡ˆçš„ PHPUnit</h2>
<p>åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹æ–°å¢ <code>phpunit.xml</code> æª”ï¼Œå…§å®¹ç‚ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="nt">&lt;phpunit</span> <span class="na">backupGlobals=</span><span class="s">&#34;false&#34;</span>
         <span class="na">backupStaticAttributes=</span><span class="s">&#34;false&#34;</span>
         <span class="na">bootstrap=</span><span class="s">&#34;vendor/autoload.php&#34;</span>
         <span class="na">colors=</span><span class="s">&#34;true&#34;</span>
         <span class="na">convertErrorsToExceptions=</span><span class="s">&#34;true&#34;</span>
         <span class="na">convertNoticesToExceptions=</span><span class="s">&#34;true&#34;</span>
         <span class="na">convertWarningsToExceptions=</span><span class="s">&#34;true&#34;</span>
         <span class="na">processIsolation=</span><span class="s">&#34;false&#34;</span>
         <span class="na">stopOnFailure=</span><span class="s">&#34;false&#34;</span>
         <span class="na">syntaxCheck=</span><span class="s">&#34;false&#34;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;testsuites&gt;</span>
        <span class="nt">&lt;testsuite</span> <span class="na">name=</span><span class="s">&#34;Application Test Suite&#34;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;directory&gt;</span>./tests/<span class="nt">&lt;/directory&gt;</span>
        <span class="nt">&lt;/testsuite&gt;</span>
    <span class="nt">&lt;/testsuites&gt;</span>
<span class="nt">&lt;/phpunit&gt;</span>
</code></pre></div><p>åŸ·è¡Œ <code>./vendor/bin/phpunit</code> ï¼Œç¢ºèªæœ‰ä½¿ç”¨é€™å€‹è¨­å®šæª”ï¼š</p>
<pre><code>PHPUnit 5.0.8 by Sebastian Bergmann and contributors.

Time: 13 ms, Memory: 1.75Mb

No tests executed!
</code></pre><h2 id="æ¸¬è©¦å¯¦ä¾‹">æ¸¬è©¦å¯¦ä¾‹</h2>
<p>ç°¡å–®ä»‹ç´¹æ’°å¯«æ¸¬è©¦æ¡ˆä¾‹çš„æ­¥é©Ÿï¼š</p>
<ol>
<li>å»ºç«‹ä¸€å€‹ driver ç‰©ä»¶ï¼Œé€™è£¡æ˜¯ä½¿ç”¨ <code>Selenium2Driver</code> ã€‚</li>
<li>å»ºç«‹ä¸€å€‹ session ç‰©ä»¶ï¼Œä¸¦é€éä¸Šé¢çš„ driver ç‰©ä»¶ä¾†æ“ä½œç€è¦½å™¨ã€‚</li>
<li>å°‡ session ç‰©ä»¶é€£ä¸ŠæŒ‡å®šç¶²å€ã€‚</li>
<li>å¾ session å–å‡º page ç‰©ä»¶ä¾†æ“ä½œé é¢ã€‚</li>
<li>å–å‡º page ç‰©ä»¶çš„ç‹€æ…‹æˆ–å…§å®¹ä¾†é©—è­‰ã€‚</li>
</ol>
<p>è©³ç´°çš„æ¸¬è©¦å¯«æ³•å¯ä»¥åƒè€ƒ <a href="http://mink.behat.org/en/latest/index.html">Mink å®˜æ–¹æ–‡ä»¶</a>ã€‚</p>
<p>ä»¥ä¸‹æˆ‘ç¤ºç¯„å¦‚ä½•ç”¨ Google ä¾†æœå°‹é—œéµå­—ï¼Œä¸¦é©—è­‰æœå°‹çµæœæœ‰åŒ…å«æˆ‘æ‰€é æœŸçš„æ–‡å­—ã€‚</p>
<p>å…ˆå»ºç«‹ <code>tests</code> ç›®éŒ„ï¼Œç„¶å¾Œæ–°å¢ä¸€å€‹ <code>tests/GoogleSearchTest.php</code> æª”ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Behat\Mink\Driver\Selenium2Driver</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Behat\Mink\Session</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">GoogleSearchTest</span> <span class="k">extends</span> <span class="nx">PHPUnit_Framework_TestCase</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testSearchWithKeyword</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ä½¿ç”¨ Selenium2Driver ä¾†æ“ä½œ PhantomJS
</span><span class="c1"></span>        <span class="nv">$driver</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Selenium2Driver</span><span class="p">(</span><span class="s1">&#39;phantomjs&#39;</span><span class="p">);</span>

        <span class="c1">// å»ºç«‹ä¸€å€‹ Session ç‰©ä»¶ä¾†æ§åˆ¶ç€è¦§å™¨
</span><span class="c1"></span>        <span class="nv">$session</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Session</span><span class="p">(</span><span class="nv">$driver</span><span class="p">);</span>
        <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">();</span>

        <span class="c1">// ç€è¦½ Google é¦–é 
</span><span class="c1"></span>        <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">visit</span><span class="p">(</span><span class="s1">&#39;https://www.google.com&#39;</span><span class="p">);</span>

        <span class="c1">// æ“ä½œé é¢ç‰©ä»¶ä¾†æœå°‹é—œéµå­—
</span><span class="c1"></span>        <span class="nv">$page</span> <span class="o">=</span> <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">getPage</span><span class="p">();</span>
        <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">fillField</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">,</span> <span class="s1">&#39;Jace Ju&#39;</span><span class="p">);</span>
        <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;css&#39;</span><span class="p">,</span> <span class="s1">&#39;form&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">submit</span><span class="p">();</span>

        <span class="c1">// å¾—åˆ°æœå°‹çµæœå¾Œé©—è­‰æ˜¯å¦åŒ…å«é æœŸä¸­çš„æ–‡å­—
</span><span class="c1"></span>        <span class="nv">$text</span> <span class="o">=</span> <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">getText</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertContains</span><span class="p">(</span><span class="s1">&#39;ç¶²ç«™è£½ä½œå­¸ç¿’èªŒ&#39;</span><span class="p">,</span> <span class="nv">$text</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id="åŸ·è¡Œæ¸¬è©¦">åŸ·è¡Œæ¸¬è©¦</h2>
<p>åœ¨åŸ·è¡Œæ¸¬è©¦ä¹‹å‰ï¼Œéœ€è¦å…ˆå•Ÿå‹• PhantomJS ã€‚ PhantomJS æä¾›ä¸€å€‹ <code>--webdriver</code> çš„é¸é …è®“å®ƒå¯ä»¥å•Ÿç”¨é ç«¯ WebDriver æ¨¡å¼ï¼Œæ¥æ”¶æ¸¬è©¦ç¨‹å¼é€é WebDriver API å‚³ä¾†çš„è¦æ±‚ã€‚å¦å¤–å› ç‚ºæœ‰æ™‚æ¸¬è©¦çš„ç¶²å€æœƒåŒ…å« SSL ï¼Œæ‰€ä»¥è¦ç”¨ <code>--ssl-protocol=tlsv1</code> åŠ <code>--ignore-ssl-errors=true</code> ä¾†ç¢ºä¿ SSL çš„æ“ä½œæ­£å¸¸ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">phantomjs --webdriver<span class="o">=</span><span class="m">4444</span> --ssl-protocol<span class="o">=</span>tlsv1 --ignore-ssl-errors<span class="o">=</span><span class="nb">true</span>
</code></pre></div><p>PhantomJS é †åˆ©å•Ÿå‹•å¾Œï¼Œå°±å¯ä»¥å¦é–‹ä¸€å€‹ terminal è¦–çª—ä¾†é€²è¡Œæ¸¬è©¦äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">./vendor/bin/phpunit
</code></pre></div><p>æ¸¬è©¦ç„¡èª¤çš„è©±æœƒå‡ºç¾ä»¥ä¸‹çµæœï¼š</p>
<pre><code>PHPUnit 5.0.8 by Sebastian Bergmann and contributors.

.                                                                   1 / 1 (100%)

Time: 2.38 seconds, Memory: 4.50Mb

OK (1 test, 1 assertion)
</code></pre><h2 id="page-objects-æ¨¡å¼">Page Objects æ¨¡å¼</h2>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­æœ‰å€‹å•é¡Œï¼šç•¶é é¢åŠŸèƒ½æ²’æœ‰æ›´å‹•ï¼Œä½†æ˜¯ UI æ”¹è®Šæ™‚ (ä¾‹å¦‚ DOM å…ƒç´ æˆ– id/class åç¨±) ï¼Œæˆ‘å€‘å°±å¿…é ˆå»æ›´æ”¹æ¸¬è©¦æ¡ˆä¾‹çš„ç¨‹å¼ç¢¼ï¼›è€Œå¦‚æœåŒæ¨£çš„åŠŸèƒ½åœ¨å¤šå€‹æ¸¬è©¦æ¡ˆä¾‹ä¸­å‡ºç¾ï¼Œé‚£éº¼è¦æ”¹çš„åœ°æ–¹å°±æ›´å¤šäº†ã€‚æ‰€ä»¥åœ¨å¯¦å‹™ä¸­ï¼Œæˆ‘å€‘æœƒå°‡é é¢çš„åŠŸèƒ½è¡Œç‚ºèˆ‡ UI ç´°ç¯€åˆ†é›¢é–‹ä¾†ï¼Œä»¥è§£æ±º UI ç´°ç¯€é‡è¤‡çš„å•é¡Œï¼›ç‚ºäº†é€™å€‹ç›®æ¨™ï¼Œæˆ‘å€‘å¼•å…¥ <a href="https://code.google.com/p/selenium/wiki/PageObjects">Page Objects</a> é€™å€‹æ¨¡å¼ã€‚</p>
<p>è¦ç‰¹åˆ¥æ³¨æ„çš„æ˜¯ï¼Œ Page Objects æ¨¡å¼å’Œ Mink çš„ page ç‰©ä»¶æ˜¯å…©ä»¶äº‹ã€‚ Page Objects æ¨¡å¼ä¸»è¦æ˜¯é€é API æè¿°é é¢çš„è¡Œç‚ºï¼Œä¸¦å°è£ UI ç´°ç¯€ï¼›è€Œ Mink çš„ page ç‰©ä»¶å‰‡å¯¦éš›ä¸Šæ˜¯ä¸€å€‹ <code>DocumentElement</code> ç‰©ä»¶ï¼Œä¸»è¦æ˜¯ç”¨ä¾†æ“ä½œé é¢ä¸Šçš„å…ƒç´ ã€‚æ›å¥è©±èªªï¼Œåœ¨ Page Objects æ¨¡å¼ä¸­ï¼Œé é¢é¡åˆ¥æ‰€å°è£çš„ UI ç´°ç¯€ï¼Œå°±æ˜¯ç”¨ <code>DocumentElement</code> ç‰©ä»¶ä¾†æ“ä½œçš„ã€‚</p>
<h3 id="å¯¦ä½œ-page-objects-æ¨¡å¼">å¯¦ä½œ Page Objects æ¨¡å¼</h3>
<p>é›–ç„¶ Page Objects æ¨¡å¼å¯ä»¥è‡ªè¡Œå¯¦ä½œï¼Œä½†ç‚ºäº†çœä¸‹ä¸€äº›è‡ªè¡Œæ’°å¯«çš„æ™‚é–“ï¼Œæˆ‘ç‰¹åœ°å¯«äº†ä¸€å€‹ <a href="https://github.com/jaceju/mink-page-objects">goez/mink-page-objects</a> ä¾›å¤§å®¶ä½¿ç”¨ã€‚</p>
<p>é¦–å…ˆåœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹åŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ composer require goez/mink-page-objects --dev
</code></pre></div><p>å»ºç«‹ä¸€å€‹ <code>tests/bootstrap.php</code> ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="sd">/** @var Composer\Autoload\ClassLoader $loader */</span>
<span class="nv">$loader</span> <span class="o">=</span> <span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">addPsr4</span><span class="p">(</span><span class="s1">&#39;Google\\&#39;</span><span class="p">,</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/Google/&#39;</span><span class="p">);</span>
</code></pre></div><p>å°‡ <code>phpunit.xml</code> ä¸­çš„ <code>vendor/autoload.php</code> ï¼Œæ”¹ç‚º <code>tests/bootstrap.php</code> ã€‚</p>
<h3 id="å°‡é é¢ç´°ç¯€å°è£åœ¨é é¢è¡Œç‚ºåŠŸèƒ½è£¡">å°‡é é¢ç´°ç¯€å°è£åœ¨é é¢è¡Œç‚ºåŠŸèƒ½è£¡</h3>
<p>æ¥ä¸‹ä¾†å…ˆå»ºç«‹ <code>tests/Google/Home.php</code> æª”ï¼›é€™æ˜¯ Google é¦–é é¡åˆ¥ï¼Œå®ƒç¹¼æ‰¿æŠ½è±¡çš„ <code>Page</code> é¡åˆ¥ï¼Œä¸¦æä¾›ä¸€å€‹ <code>search</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Google</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Goez\PageObjects\Page</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Home</span> <span class="k">extends</span> <span class="nx">Page</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$parts</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;SearchForm&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;css&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;form&#39;</span><span class="p">],</span>
    <span class="p">];</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">search</span><span class="p">(</span><span class="nv">$keyword</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getPart</span><span class="p">(</span><span class="nx">SearchForm</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">search</span><span class="p">(</span><span class="nv">$keyword</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>æ¥ä¸‹ä¾†æˆ‘å»ºç«‹ä¸€å€‹ <code>tests/Google/SearchForm.php</code> ï¼Œå®ƒä¸»è¦æ˜¯å°è£æœå°‹çš„æ“ä½œç´°ç¯€ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Google</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Goez\PageObjects\Part</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SearchForm</span> <span class="k">extends</span> <span class="nx">Part</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * @param $keyword
</span><span class="sd">     * @return SearchResult
</span><span class="sd">     * @throws \Behat\Mink\Exception\ElementNotFoundException
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">search</span><span class="p">(</span><span class="nv">$keyword</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="o">-&gt;</span><span class="na">fillField</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">,</span> <span class="nv">$keyword</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="o">-&gt;</span><span class="na">submit</span><span class="p">();</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createPage</span><span class="p">(</span><span class="nx">SearchResult</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>é€™è£¡ï¼Œæˆ‘æŠŠåŸä¾†è¼¸å…¥é—œéµå­—ä¸¦é€å‡ºè¡¨å–®çš„ UI æ“ä½œï¼Œå°è£åœ¨ <code>search</code> æ–¹æ³•ä¸­ï¼Œä¸¦å›å‚³ä¸€å€‹æœå°‹çµæœé é¢ç‰©ä»¶ã€‚</p>
<p>å†å»ºç«‹ <code>tests/Google/SearchResult.php</code> æª”ï¼Œå®ƒä¸»è¦æ˜¯å°è£æœå°‹çµæœé ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Google</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Goez\PageObjects\Page</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SearchResult</span> <span class="k">extends</span> <span class="nx">Page</span>
<span class="p">{</span>

<span class="p">}</span>
</code></pre></div><p>æœ€å¾Œå°±å¯ä»¥æŠŠåŸä¾†çš„æ¸¬è©¦æ¡ˆä¾‹æ”¹ç”¨æ–°çš„é é¢é¡åˆ¥ä¾†é‡å¯«äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Behat\Mink\Driver\Selenium2Driver</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Behat\Mink\Session</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Goez\PageObjects\Context</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Goez\PageObjects\Helper\PhantomJSRunner</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Google\Home</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">GoogleSearchTest</span> <span class="k">extends</span> <span class="nx">PHPUnit_Framework_TestCase</span>
<span class="p">{</span>
    <span class="c1">// è‡ªå‹•å•Ÿå‹• phantomjs
</span><span class="c1"></span>    <span class="k">use</span> <span class="nx">PhantomJSRunner</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">testSearchWithKeyword</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$driver</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Selenium2Driver</span><span class="p">(</span><span class="s1">&#39;phantomjs&#39;</span><span class="p">);</span>

        <span class="nv">$session</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Session</span><span class="p">(</span><span class="nv">$driver</span><span class="p">);</span>
        <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">();</span>

        <span class="nv">$context</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Context</span><span class="p">(</span><span class="nv">$session</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;baseUrl&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://www.google.com&#39;</span><span class="p">,</span>
        <span class="p">]);</span>

        <span class="nv">$context</span><span class="o">-&gt;</span><span class="na">createPage</span><span class="p">(</span><span class="nx">Home</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">open</span><span class="p">()</span>
            <span class="o">-&gt;</span><span class="na">search</span><span class="p">(</span><span class="s1">&#39;Jace Ju&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">shouldContainText</span><span class="p">(</span><span class="s1">&#39;ç¶²ç«™è£½ä½œå­¸ç¿’èªŒ&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>é€™éº¼ä¸€ä¾†ï¼Œåœ¨æ¸¬è©¦æ¡ˆä¾‹ä¸­å°±å¯ä»¥æ¸…æ¥šåœ°ç”¨é é¢ç‰©ä»¶çš„è¡Œç‚ºå»æè¿°å¯¦éš›çš„éœ€æ±‚ï¼Œè€Œä¸æ˜¯è½åœ¨æ“ä½œ UI çš„æ€ç¶­è£¡ã€‚è®“å¤–éƒ¨çš„æ¸¬è©¦æ¡ˆä¾‹å¯ä»¥ç”¨æ›´èªæ„åŒ–çš„æ–¹å¼ä¾†ä½¿ç”¨é€™å€‹é¡åˆ¥ï¼Œæ˜¯ä¸€ç¨® <code>Tell Don't Ask</code> çš„å¯¦ç¾ã€‚</p>
<h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>é›–ç„¶èˆŠå°ˆæ¡ˆå¯èƒ½é›£ä»¥åšåˆ°å–®å…ƒæ¸¬è©¦ï¼Œä½†æˆ‘å€‘å¯ä»¥å…ˆåˆ©ç”¨ Web æ¸¬è©¦ä¾†é©—è­‰å®ƒå·²ç¶“å­˜åœ¨çš„è¡Œç‚ºï¼›è€Œåœ¨ Web æ¸¬è©¦ä¸­å¯ä»¥é€éç¨‹å¼ä¾†æ§åˆ¶ç€è¦½å™¨ï¼Œé”åˆ°è‡ªå‹•åŒ–æ¸¬è©¦çš„ç›®çš„ã€‚åœ¨æ’°å¯«æ¸¬è©¦æ¡ˆä¾‹æ™‚ï¼Œæœ€é‡è¦çš„æ˜¯å°éœ€æ±‚çš„æè¿°ï¼Œè€Œä¸æ˜¯ UI æ“ä½œçš„ç´°ç¯€ï¼›å› æ­¤å¯ä»¥ç”¨ Page Objects æ¨¡å¼ä¾†å°è£ UI ç´°ç¯€ï¼Œè®“é é¢ç‰©ä»¶æä¾›æœ‰èªæ„åŒ–çš„è¡Œç‚ºæ“ä½œæ–¹å¼ã€‚</p>
<p>å¸Œæœ›é€™å€‹ä»‹ç´¹èƒ½å¹«åŠ©å¤§å®¶å° Web æ¸¬è©¦æœ‰åŸºæœ¬çš„ç­è§£ï¼Œç•¶ç„¶åœ¨å¯¦å‹™ä¸Šå¯èƒ½æœƒé‡åˆ°çš„å•é¡Œæœƒæ›´è¤‡é›œï¼›æœ‰æ©Ÿæœƒçš„è©±æˆ‘æœƒå¦æ–‡åˆ†äº«è‡ªå·±åœ¨å¯¦å‹™ä¸Šé‡åˆ°çš„å•é¡Œï¼Œä¹Ÿæ­¡è¿å¤§å®¶æä¾›ä¸åŒçš„è¦‹è§£ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>é‚å‘ PHP é‡æ§‹ä¹‹è·¯ - ä»¥ Laravel ç¨‹å¼ç¢¼ç‰‡æ®µç‚ºä¾‹</title>
			<link>https://jaceju.net/simple-refatoring-example-01/</link>
			<pubDate>Mon, 05 Oct 2015 12:53:48 +0800</pubDate>
			
			<guid>https://jaceju.net/simple-refatoring-example-01/</guid>
			<description>ä¾†ä¸Š TDD èª²çš„å­¸å“¡å•åˆ°ä¸€å€‹ Laravel ç¨‹å¼ç¢¼é‡æ§‹çš„å•é¡Œï¼Œé€™è£¡ç°¡å–®åœ°åšåˆ†äº«ã€‚æœªä¾†å¦‚æœæœ‰å¥½çš„å¯¦æˆ°ç¯„ä¾‹ï¼Œé€™ç³»åˆ—å°±æœƒå»¶çºŒä¸‹å»ã€‚ é–‹å§‹é‡æ§‹ ç•¶ç„¶é‡æ§‹å‰ï¼Œæˆ‘å€‘å¿…é ˆå…ˆæœ‰æ¸¬è©¦</description>
			<content type="html"><![CDATA[<p>ä¾†ä¸Š TDD èª²çš„å­¸å“¡å•åˆ°ä¸€å€‹ Laravel ç¨‹å¼ç¢¼é‡æ§‹çš„å•é¡Œï¼Œé€™è£¡ç°¡å–®åœ°åšåˆ†äº«ã€‚æœªä¾†å¦‚æœæœ‰å¥½çš„å¯¦æˆ°ç¯„ä¾‹ï¼Œé€™ç³»åˆ—å°±æœƒå»¶çºŒä¸‹å»ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="é–‹å§‹é‡æ§‹">é–‹å§‹é‡æ§‹</h2>
<p>ç•¶ç„¶é‡æ§‹å‰ï¼Œæˆ‘å€‘å¿…é ˆå…ˆæœ‰æ¸¬è©¦åšä¿éšœã€‚åœ¨æ¯å€‹æ­¥é©Ÿå®Œæˆå¾Œï¼Œæˆ‘å€‘éƒ½æ‡‰è©²ç¢ºä¿ä¿®æ”¹å¾Œçš„ç¨‹å¼ç¢¼èƒ½é€šéæ¸¬è©¦çš„é©—è­‰ã€‚</p>
<p>æ¥ä¸‹ä¾†é–‹å§‹é‡æ§‹ï¼Œé€™æ˜¯åŸæœ¬çš„ç¨‹å¼ç¢¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// Step 0
if ($errorRedirectViewType == &#39;create&#39;) {
    return Redirect::route(self::__module . &#39;.&#39; . self::__function . &#39;.&#39; . $errorRedirectViewType)
        -&gt;with(&#39;message&#39;, &#39;ä¸€æ¨£çš„ message&#39;)
        -&gt;withInput($allInput);
} else {
    return Redirect::route(self::__module . &#39;.&#39; . self::__function . &#39;.&#39; . $errorRedirectViewType, [&#39;id&#39; =&gt; $allInput[&#39;id&#39;]])
        -&gt;with(&#39;message&#39;, &#39;ä¸€æ¨£çš„ message&#39;)
        -&gt;withInput($allInput);
}
</code></pre></div><p>ç¬¬ä¸€æ­¥æˆ‘å€‘å¼•å…¥ä¸€å€‹ <code>$redirect</code> è®Šæ•¸ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// Step 1
$redirect = null;
if ($errorRedirectViewType == &#39;create&#39;) {
    $redirect = Redirect::route(self::__module . &#39;.&#39; . self::__function . &#39;.&#39; . $errorRedirectViewType)
        -&gt;with(&#39;message&#39;, &#39;ä¸€æ¨£çš„ message&#39;)
        -&gt;withInput($allInput);
} else {
    $redirect = Redirect::route(self::__module . &#39;.&#39; . self::__function . &#39;.&#39; . $errorRedirectViewType, [&#39;id&#39; =&gt; $allInput[&#39;id&#39;]])
        -&gt;with(&#39;message&#39;, &#39;ä¸€æ¨£çš„ message&#39;)
        -&gt;withInput($allInput);
}
return $redirect;
</code></pre></div><p>ç¬¬äºŒæ­¥æˆ‘å€‘æŠŠå…±ç”¨çš„éƒ¨ä»½ç§»å‡º <code>if...else</code> å¤–ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// Step 2
$redirect = null;
if ($errorRedirectViewType == &#39;create&#39;) {
    $redirect = Redirect::route(self::__module . &#39;.&#39; . self::__function . &#39;.&#39; . $errorRedirectViewType);
} else {
    $redirect = Redirect::route(self::__module . &#39;.&#39; . self::__function . &#39;.&#39; . $errorRedirectViewType, [&#39;id&#39; =&gt; $allInput[&#39;id&#39;]]);
}
return $redirect
        -&gt;with(&#39;message&#39;, &#39;ä¸€æ¨£çš„ message&#39;)
        -&gt;withInput($allInput);
</code></pre></div><p>ç¬¬ä¸‰æ­¥æŠŠ <code>if...else</code> æç…‰æˆ <code>redirectByViewType</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// Step 3
// Extracted method
protected function redirectByViewType($errorRedirectViewType, $id)
{
    $redirect = null;
    if ($errorRedirectViewType == &#39;create&#39;) {
        $redirect = Redirect::route(self::__module . &#39;.&#39; . self::__function . &#39;.&#39; . $errorRedirectViewType);
    } else {
        $redirect = Redirect::route(self::__module . &#39;.&#39; . self::__function . &#39;.&#39; . $errorRedirectViewType, [&#39;id&#39; =&gt; $id]);
    }
    return $redirect;
}
</code></pre></div><p>ç„¶å¾Œæ”¹ç”¨æ–°çš„ <code>redirectByViewType</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// Step 3
$redirect = $this-&gt;redirectByViewType($errorRedirectViewType, $allInput[&#39;id&#39;]);

return $redirect
        -&gt;with(&#39;message&#39;, &#39;ä¸€æ¨£çš„ message&#39;)
        -&gt;withInput($allInput);
</code></pre></div><p>è‡³æ–¼ç¬¬äºŒæ­¥åˆ°ç¬¬ä¸‰æ­¥è¦ä¸è¦åšï¼Œå°±çœ‹æˆ‘å€‘æœ‰æ²’æœ‰ reuse é€™æ®µé‚è¼¯çš„éœ€æ±‚ï¼›ä½†ä¸€èˆ¬æˆ‘æœƒåšï¼Œå› ç‚ºç¨‹å¼ç¢¼çœ‹èµ·ä¾†å¥½è®€ï¼Œå¾Œé¢ä¹Ÿå¯ä»¥å†åšå…¶ä»–é‡æ§‹ã€‚</p>
<p>ç¬¬å››æ­¥å°±å¯ä»¥æŠŠåŸä¾†çš„ <code>$redirect</code> æ‹¿æ‰ï¼Œå› ç‚ºä¸éœ€è¦äº†ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// Step 4
return $this-&gt;redirectByViewType($errorRedirectViewType, $allInput[&#39;id&#39;])
        -&gt;with(&#39;message&#39;, &#39;ä¸€æ¨£çš„ message&#39;)
        -&gt;withInput($allInput);
</code></pre></div><p>é€™ç¨®å…ˆå¼•å…¥ä¸€å€‹è‡¨æ™‚è®Šæ•¸è®“é‡æ§‹å¥½é€²è¡Œçš„æ–¹å¼ï¼Œæ˜¯å¾ˆå¸¸è¦‹çš„ã€‚è€Œä»€éº¼æ™‚å€™æ‡‰è©²éœ€è¦ä½¿ç”¨é€™å€‹æŠ€å·§ï¼Ÿé€™å°±è¦å¤šç´¯ç©ç¶“é©—ã€‚é€šå¸¸ä½ å¯ä»¥æƒ³åƒä¸€ä¸‹é‡æ§‹å¾Œçš„ç¨‹å¼ç¢¼ï¼Œå¤§è‡´èˆ‡é‡æ§‹å‰æœƒæœ‰ä»€éº¼æ¨£çš„å·®ç•°ï¼Œå†åˆ¤æ–·æ˜¯å¦éœ€è¦å¼•ç”¨ä¸€å€‹è‡¨æ™‚è®Šæ•¸ã€‚</p>
<p>ç¬¬äº”æ­¥ï¼Œæˆ‘å€‘æŠŠ <code>redirectByViewType</code> é‡è¤‡çš„ç¨‹å¼ç¢¼å†å¼•ç”¨ä¸€å€‹è§£é‡‹ç”¨çš„è®Šæ•¸ <code>$routeName</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// Step 5
protected function redirectByViewType($errorRedirectViewType, $id)
{
    $redirect = null;
    $routeName = self::__module . &#39;.&#39; .
               self::__function . &#39;.&#39; .
               $errorRedirectViewType;

    if ($errorRedirectViewType == &#39;create&#39;) {
        $redirect = Redirect::route($routeName);
    } else {
        $redirect = Redirect::route($routeName, [&#39;id&#39; =&gt; $id]);
    }
    return $redirect;
}
</code></pre></div><p>é€™æ¨£ç¨‹å¼ç¢¼å°±æ›´å®¹æ˜“è¢«ç†è§£äº†ã€‚</p>
<h2 id="å¾Œè¨˜">å¾Œè¨˜</h2>
<p>å¸Œæœ›é€™å€‹å°ä¾‹å­å¯ä»¥è®“å¤§å®¶ç­è§£åˆ°ï¼Œå¯¦æˆ°ä¸­çš„é‡æ§‹å…¶å¯¦æ˜¯å¾ˆç°¡å–®çš„ã€‚å®ƒå°±æ˜¯åœ¨ä¸æ›´æ”¹åŸæœ‰é‚è¼¯çš„ç‹€æ…‹ä¸‹ï¼Œä¸€æ­¥ä¸€æ­¥è®“ä½ çš„ç¨‹å¼ç¢¼è®Šå¾—æ›´æ˜“è®€ä¹Ÿæ›´æ˜“ç¶­è­·ã€‚</p>
<p>ç•¶åˆå› ç‚ºæ˜¯è‡¨æ™‚ç¤ºç¯„çµ¦å­¸å“¡çœ‹ï¼Œæ‰€ä»¥ä¸¦æ²’æœ‰ç‰¹åˆ¥åŠ ä¸Šæ¸¬è©¦ï¼Œä¹Ÿæ²’æœ‰ç”¨ PhpStorm ä¾†å”åŠ©é‡æ§‹ï¼›çµæœå¾Œä¾†æˆ‘ç™¼ç¾åœ¨ extract method æ™‚ï¼Œå¿˜äº†æŠŠ <code>$allInput['id']</code> å¸¶åˆ° <code>redirectByViewType</code> è£¡é¢ã€‚</p>
<p>é€™å°±æ˜¯ä¸€ç¨®å·¥ç¨‹å¸«å¾ˆå®¹æ˜“å¿½ç•¥çš„ç›²é»ï¼Œå°±æ˜¯å¤ªå®¹æ˜“ç›¸ä¿¡è‡ªå·±çš„æƒ³æ³•ï¼Œè€Œä¸æ˜¯çœŸæ­£å»é©—è­‰å®ƒã€‚åœ¨æ²’æœ‰æ¸¬è©¦å’Œå·¥å…·çš„è¼”åŠ©ä¸‹ï¼Œåƒè¬è¦ç‰¹åˆ¥å°å¿ƒé€™ç¨®å°éŒ¯èª¤ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>åœ¨ Laravel ä¸Šç”¨ MailCatcher ç™¼é€æ¸¬è©¦ä¿¡ä»¶</title>
			<link>https://jaceju.net/laravel-mailcatcher/</link>
			<pubDate>Wed, 29 Jul 2015 15:22:29 +0800</pubDate>
			
			<guid>https://jaceju.net/laravel-mailcatcher/</guid>
			<description>é›–ç„¶ Laravel åœ¨å¯„é€æ¸¬è©¦ä¿¡ä»¶ä¸Šæä¾›äº† Mailgun é€™å€‹æœå‹™çš„ä¸²æ¥æ–¹å¼ï¼Œä¸éå¦‚æœèƒ½å¤ åœ¨ Homestead å°±å¯ä»¥ç›´æ¥æ¸¬è©¦æ˜¯æ›´æ£’çš„é¸æ“‡ï¼›è€Œ MailCatcher å‰›å¥½å°±æä¾›é€™æ¨£çš„åŠŸèƒ½ï¼Œå®ƒèƒ½å•Ÿå‹•ä¸€å€‹ SMTP æ¨¡æ“¬æœ</description>
			<content type="html"><![CDATA[<p>é›–ç„¶ Laravel åœ¨å¯„é€æ¸¬è©¦ä¿¡ä»¶ä¸Šæä¾›äº† <a href="http://www.mailgun.com/">Mailgun</a> é€™å€‹æœå‹™çš„ä¸²æ¥æ–¹å¼ï¼Œä¸éå¦‚æœèƒ½å¤ åœ¨ Homestead å°±å¯ä»¥ç›´æ¥æ¸¬è©¦æ˜¯æ›´æ£’çš„é¸æ“‡ï¼›è€Œ <a href="http://mailcatcher.me/">MailCatcher</a> å‰›å¥½å°±æä¾›é€™æ¨£çš„åŠŸèƒ½ï¼Œå®ƒèƒ½å•Ÿå‹•ä¸€å€‹ SMTP æ¨¡æ“¬æœå‹™ï¼Œä¸¦ä¸”è®“æˆ‘å€‘é€é Web ä»‹é¢ä¾†æŸ¥çœ‹ä¿¡ä»¶æ˜¯å¦æœ‰è¢«ç™¼é€å‡ºä¾†ã€‚</p>
<blockquote>
<p>è¨»ï¼šé¡ä¼¼çš„å·¥é¡é‚„æœ‰ç”¨ Go å¯«çš„ <a href="https://github.com/mailhog/MailHog">MailHog</a> ï¼Œæ“šèªªé€Ÿåº¦æ›´å¿«ï¼›é›–ç„¶æˆ‘é‚„æ²’è©¦éï¼Œä½†æˆ‘æƒ³ç”¨æ³•æ‡‰è©²æ˜¯ç›¸åŒçš„ã€‚</p>
</blockquote>
<p>ä»¥ä¸‹å°±ç°¡å–®ä»‹ç´¹ä¸€ä¸‹å¦‚ä½•åœ¨ Laravel 5.1 ä¸Šä½¿ç”¨ MailCatcher ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å®‰è£-mailcatcher">å®‰è£ MailCatcher</h2>
<p>é€™è£¡æˆ‘å€‘ç”¨ Homestead ç¤ºç¯„ï¼Œå…ˆæŠŠ Homestead çš„ port 1080/1025 å°åˆ°æœ¬æ©Ÿçš„ port 1080/1025 ï¼Œæ–¹ä¾¿ç¨å¾Œåœ¨æœ¬æ©Ÿæ“ä½œã€‚åŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ homestead edit
</code></pre></div><blockquote>
<p>è¨»ï¼š <code>$ </code>  ç‚ºæç¤ºå­—å…ƒï¼Œä¸éœ€è¦è¼¸å…¥ã€‚</p>
</blockquote>
<p>ç„¶å¾ŒåŠ å…¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="k">ports</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="k">send</span><span class="p">:</span><span class="w"> </span><span class="m">1080</span><span class="w">
</span><span class="w">      </span><span class="k">to</span><span class="p">:</span><span class="w"> </span><span class="m">1080</span><span class="w">
</span><span class="w">    </span>- <span class="k">send</span><span class="p">:</span><span class="w"> </span><span class="m">1025</span><span class="w">
</span><span class="w">      </span><span class="k">to</span><span class="p">:</span><span class="w"> </span><span class="m">1025</span><span class="w">
</span></code></pre></div><p>æ¥è‘—é€²å…¥ Homestead ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ homestead up
$ homestead ssh
</code></pre></div><p>ç¢ºèª Ruby ç’°å¢ƒæ˜¯å®‰è£å¥½çš„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ruby -v
ruby 2.1.2p95 <span class="o">(</span>2014-05-08<span class="o">)</span> <span class="o">[</span>x86_64-linux-gnu<span class="o">]</span>

$ gem -v
2.2.2
</code></pre></div><p>ç„¶å¾Œå®‰è£ MailCatcher ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo gem install mailcatcher --no-ri --no-rdoc
</code></pre></div><p>å®‰è£å®Œæˆå¾Œï¼Œç›´æ¥åŸ·è¡Œ <code>mailcatcher</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ mailcatcher --ip 0.0.0.0
Starting <span class="nv">MailCatcher</span>
<span class="o">==</span>&gt; smtp://0.0.0.0:1025
<span class="o">==</span>&gt; http://0.0.0.0:1080
*** MailCatcher runs as a daemon by default. Go to the web interface to quit.
</code></pre></div><p>é€™æ¨£ MailCatcher çš„ port 1025 å°±æœƒç›£è½ SMTP è«‹æ±‚ï¼Œè€Œ port 1080 å°±æœƒæ˜¯å®ƒçš„ Web ç®¡ç†ä»‹é¢ã€‚</p>
<p>æ‰“é–‹æœ¬æ©Ÿçš„ç€è¦½å™¨ï¼Œç€è¦½ <code>http://127.0.0.1:1080</code> ï¼Œæ‡‰è©²å°±æœƒçœ‹åˆ° MailCatcher çš„ Web ç®¡ç†ä»‹é¢ï¼š</p>
<p><img src="/resources/laravel-mailcatcher/mailcatcher-web-ui.png" alt="MailCatcher Web UI"></p>
<h2 id="ä¿®æ”¹-laravel-mail-è¨­å®š">ä¿®æ”¹ Laravel Mail è¨­å®š</h2>
<p>é€™è£¡æˆ‘å‡è¨­ä½ å·²ç¶“å»ºç«‹ä¸€å€‹ Laravel 5.1 å°ˆæ¡ˆäº†ï¼Œæ‰€ä»¥ä¿®æ”¹ <code>.env</code> ä¸­çš„ <code>MAIL_HOST</code> èˆ‡ <code>MAIL_PORT</code> å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">MAIL_HOST</span><span class="o">=</span><span class="s">127.0.0.1</span>
<span class="na">MAIL_PORT</span><span class="o">=</span><span class="s">1025</span>
</code></pre></div><p>å…¶ä»–ä¸€åˆ‡éƒ½å¯ä»¥ä¸éœ€è¦æ”¹å‹•ã€‚</p>
<h2 id="æ¸¬è©¦ç™¼é€ä¿¡ä»¶">æ¸¬è©¦ç™¼é€ä¿¡ä»¶</h2>
<p>æˆ‘å€‘å¯ä»¥ç›´æ¥ç”¨ tinker ä¾†æ¸¬è©¦æ˜¯å¦èƒ½å¤ ç™¼é€ä¿¡ä»¶ï¼ŒåŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ php artisan tinker
Psy Shell v0.5.2 <span class="o">(</span>PHP 5.6.8 â€” cli<span class="o">)</span> by Justin Hileman
&gt;&gt;&gt;
</code></pre></div><p>ç„¶å¾Œè¼¸å…¥ï¼š</p>
<pre><code>Mail::raw('This is a test mail', function ($message) {
$message-&gt;subject('Test');
$message-&gt;from('laravel@example.com', 'Laravel');
$message-&gt;to('user@example.com');
});
</code></pre><p>çµæœæ‡‰è©²æœƒå›å‚³ <code>1</code> ï¼Œç„¶å¾Œä½ å¯ä»¥å›åˆ°ç€è¦½å™¨æŸ¥çœ‹ MailCatcher æ˜¯å¦æœ‰æ”¶åˆ°é€™å°ä¿¡ï¼Œçµæœæ‡‰è©²æœƒå¦‚ä¸‹åœ–æ‰€ç¤ºï¼š</p>
<p><img src="/resources/laravel-mailcatcher/mailcatcher-result.png" alt="MailCatcher Result"></p>
<h2 id="èˆ‡å…¶ä»–æ¸¬è©¦æ¡†æ¶çš„æ•´åˆ">èˆ‡å…¶ä»–æ¸¬è©¦æ¡†æ¶çš„æ•´åˆ</h2>
<p>MailCatcher å¯ä»¥è·Ÿ PHP çš„è‡ªå‹•åŒ–æ¸¬è©¦æ¡†æ¶åšå¾ˆå¥½çš„æ•´åˆï¼Œè©³æƒ…å¯ä»¥åƒè€ƒä»¥ä¸‹æ–‡ç« ï¼š</p>
<ul>
<li>PHPUnit - <a href="http://codeception.com/12-15-2013/testing-emails-in-php.html">Testing Emails in PHP. Part 1: PHPUnit</a></li>
<li>Behat - <a href="https://github.com/kibao/behat-mailcatcher-extension">MailCatcher extension for Behat</a></li>
<li>Codeception - <a href="https://github.com/captbaritone/codeception-mailcatcher-module">Test emails in your Codeception acceptance tests</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>Laravel 5.1 Events Broadcasting å¯¦å‹™ç·´ç¿’</title>
			<link>https://jaceju.net/laravel-events-broadcasting/</link>
			<pubDate>Sun, 26 Jul 2015 00:38:37 +0800</pubDate>
			
			<guid>https://jaceju.net/laravel-events-broadcasting/</guid>
			<description>Laravel 5.1 æä¾›äº†ä¸€å€‹éå¸¸æ£’çš„ Events Broadcasting ç‰¹è‰²ï¼Œå®ƒèƒ½è®“é–‹ç™¼è€…å»ºç«‹ä¸€å€‹ RealTime Web App ã€‚ä½œè€… Taylor ä¹ŸéŒ„è£½äº†ä¸€å€‹ Events Broadcasting çš„æ•™å­¸å½±ç‰‡ï¼Œè®“é–‹ç™¼è€…å¯ä»¥æ›´å¿«ç­è§£é€™å€‹æ–°åŠŸèƒ½ã€‚ æ•™å­¸å½±ç‰‡ä¸­é›–ç„¶</description>
			<content type="html"><![CDATA[<p>Laravel 5.1 æä¾›äº†ä¸€å€‹éå¸¸æ£’çš„ Events Broadcasting ç‰¹è‰²ï¼Œå®ƒèƒ½è®“é–‹ç™¼è€…å»ºç«‹ä¸€å€‹ RealTime Web App ã€‚ä½œè€… Taylor ä¹ŸéŒ„è£½äº†ä¸€å€‹ Events Broadcasting çš„<a href="https://laracasts.com/lessons/broadcasting-events-in-laravel-5-1">æ•™å­¸å½±ç‰‡</a>ï¼Œè®“é–‹ç™¼è€…å¯ä»¥æ›´å¿«ç­è§£é€™å€‹æ–°åŠŸèƒ½ã€‚</p>
<p>æ•™å­¸å½±ç‰‡ä¸­é›–ç„¶æ˜¯ä½¿ç”¨ <a href="https://pusher.com/">Pusher</a> æœå‹™ä¾†åšäº‹ä»¶æ¨é€ï¼Œä¸é Laravel ä¹Ÿå¯ä»¥æ­é… <a href="http://redis.io/">Redis</a> ä¾†åšåˆ°åŒæ¨£çš„äº‹æƒ…ã€‚è€ƒé‡åˆ°æœªä¾†çš„ç³»çµ±ç™¼å±•ï¼Œæˆ‘æ‰“ç®—æ¡ç”¨ Redis ä¾†ç•¶åšäº‹ä»¶æ¨é€ä¼ºæœå™¨ï¼Œæ‰€ä»¥æœ¬æ–‡ä¹Ÿæœƒåœ¨æ­¤åŸºç¤é€²è¡Œèªªæ˜ã€‚</p>
<p>ä»¥ä¸‹å°±ä¾†ä»‹ç´¹å¦‚ä½•ç”¨ Laravel çš„ Events Broadcasting ä¾†å¯¦ä½œä¸€å€‹ç°¡å–®çš„èŠå¤©å®¤ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="åŸç†">åŸç†</h2>
<p>ç°¡å–®èªªæ˜ä¸€ä¸‹æœ¬æ–‡çš„å¯¦ä½œåŸç†ï¼š</p>
<ol>
<li>å•Ÿå‹• Redis ä¼ºæœå™¨ä¾†ç›£è½ Laravel ç™¼é€å‡ºä¾†çš„äº‹ä»¶ã€‚</li>
<li>é€é Node Express å»ºç«‹ä¸€å€‹ Socket.IO Server ï¼Œä¸¦ä¸”æ¥æ”¶ Redis Server æ¨é€éä¾†çš„äº‹ä»¶ï¼Œç„¶å¾Œå°‡å®ƒå»£æ’­åˆ° WebSocket ä¸Šã€‚</li>
<li>ç€è¦½å™¨ä¸Šå»ºç«‹èˆ‡ Socket.IO Server çš„é€£çµï¼Œé€é WebSocket æ¥æ”¶äº‹ä»¶ä¾†å®Œæˆå³æ™‚äº’å‹•ã€‚</li>
</ol>
<h2 id="é–‹ç™¼ç’°å¢ƒ">é–‹ç™¼ç’°å¢ƒ</h2>
<p>Laravel å®˜æ–¹æ¨è–¦é–‹ç™¼è€…ä½¿ç”¨ Homestead ï¼ŒåŸå› æ˜¯å®ƒå·²ç¶“å¹«æˆ‘å€‘å®‰è£å¥½æ‰€æœ‰ Laravel éœ€è¦çš„åŸ·è¡Œç’°å¢ƒï¼Œä¾‹å¦‚ Redis èˆ‡ Node.js ã€‚åœ¨ç¹¼çºŒä¸‹å»ä¹‹å‰ï¼Œè«‹å…ˆä¾ç…§<a href="http://laravel.com/docs/5.1/homestead">å®˜æ–¹èªªæ˜</a> (<a href="http://laravel.tw/docs/5.1/homestead">ä¸­æ–‡ç‰ˆ</a>) å°‡ Homestead å®‰è£å¥½ã€‚</p>
<p>ç„¶å¾Œåˆ©ç”¨ <code>homestead edit</code> æ‰“é–‹ Homestead çš„è¨­å®šæª”ï¼š</p>
<blockquote>
<p>è¨»ï¼šä»¥ä¸‹æŒ‡ä»¤ä¸­ï¼Œé–‹é ­çš„ <code>$ </code> ç‚ºç³»çµ±æç¤ºç¬¦è™Ÿï¼Œä¸ç”¨è¼¸å…¥ã€‚</p>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ homestead edit
</code></pre></div><p>ç¢ºèªæœ¬æ©Ÿè·¯å¾‘ <code>~/Projects</code> æœ‰æ­£ç¢º mount åˆ° Homestead çš„ <code>/home/vagrant/Projects</code> ä¸Šã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="k">folders</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="k">map</span><span class="p">:</span><span class="w"> </span>~/Projects<span class="w">
</span><span class="w">      </span><span class="k">to</span><span class="p">:</span><span class="w"> </span>/home/vagrant/Projects<span class="w">
</span></code></pre></div><p>è¦é€£ä¸Š Homestead è£¡çš„è™›æ“¬ç«™å° (Virtual Host) ï¼Œå¿…é ˆè¦è®“æœ¬æ©Ÿèªå¾—å°ˆæ¡ˆå°æ‡‰çš„ hostname ã€‚æ‰€ä»¥è¦ç·¨è¼¯æœ¬æ©Ÿçš„ <code>/etc/hosts</code> ï¼ŒåŠ å…¥ IP èˆ‡ hostname çš„å°æ‡‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">192.168.10.10 chat-room.app
</code></pre></div><p><code>192.168.10.10</code> æ˜¯åœ¨ Homestead.yml ä¸­è¨­å®šçš„ IP ã€‚</p>
<p>å•Ÿå‹• Homestead ï¼Œä¸¦ç”¨ ssh é€£å…¥ Homestead ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ homestead up
$ homestead ssh
</code></pre></div><p>æª¢æŸ¥ node.js ç‰ˆæœ¬ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ node -v
v1.8.1
</code></pre></div><blockquote>
<p>è¨»ï¼š Homestead æ˜¯é€é nvm å®‰è£ io.js ï¼Œæ‰€ä»¥å¯ä»¥è‡ªè¡Œå‡ç´š io.js åˆ°æœ€æ–°ç‰ˆã€‚</p>
</blockquote>
<p>æª¢æŸ¥ redis æ˜¯å¦å•Ÿå‹•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ redis-cli ping
PONG
</code></pre></div><p>æ–°å¢ä¸€å€‹è™›æ“¬ç«™å°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ serve chat-room.app ~/Projects/chat-room/public
</code></pre></div><h2 id="å»ºç«‹æ‡‰ç”¨ç¨‹å¼">å»ºç«‹æ‡‰ç”¨ç¨‹å¼</h2>
<p>åœ¨ Homestead ä¸­ï¼Œåˆ©ç”¨ composer ä¾†ä¸‹è¼‰å·²ç¶“è¨­å®šå¥½çš„ Laravel 5.1 Boilerplate ï¼ŒåŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> ~/Projects
$ composer create-project jaceju/b5 chat-room -s dev
</code></pre></div><p>ç¨‹å¼å°±æœƒé–‹å§‹ä¸‹è¼‰ä¸¦é€²è¡Œå®‰è£ã€‚å®Œæˆå¾Œé€²å…¥å°ˆæ¡ˆè³‡æ–™å¤¾ï¼Œä»¥ä¾¿é€²è¡Œå¾ŒçºŒæ“ä½œã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> chat-room
</code></pre></div><h3 id="èª¿æ•´-gulpfilejs">èª¿æ•´ gulpfile.js</h3>
<p>åœ¨ Homestead ä¸Šé–‹ç™¼æ™‚ï¼Œä¸éœ€è¦å•Ÿå‹• Web Server ï¼Œå› æ­¤è¦èª¿æ•´ <code>gulpfile.js</code> ã€‚</p>
<p>ç·¨è¼¯ <code>gulpfile.js</code> ï¼ŒæŠŠ <code>port</code> è®Šæ•¸èˆ‡ <code>serve</code> task ç§»é™¤ï¼Œä¸¦å°‡ <code>proxy</code> æ”¹åˆ° <code>chat-room.app</code> ï¼Œå®Œæˆå¾Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// ... (ç•¥)
</span><span class="c1"></span>
<span class="nx">elixir</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">mix</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">mix</span><span class="p">.</span><span class="nx">clean</span><span class="p">()</span>
        <span class="p">.</span><span class="nx">sass</span><span class="p">(</span><span class="s1">&#39;*.scss&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">wiredep</span><span class="p">()</span>
        <span class="p">.</span><span class="nx">jshint</span><span class="p">()</span>
        <span class="p">.</span><span class="nx">sync</span><span class="p">(</span><span class="s1">&#39;resources/assets/js/**/*.js&#39;</span><span class="p">,</span> <span class="s1">&#39;public/js&#39;</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">elixir</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">production</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">mix</span><span class="p">.</span><span class="nx">useref</span><span class="p">({</span> <span class="nx">src</span><span class="o">:</span> <span class="kc">false</span> <span class="p">})</span>
            <span class="p">.</span><span class="nx">version</span><span class="p">([</span><span class="s1">&#39;js/*.js&#39;</span><span class="p">,</span> <span class="s1">&#39;css/*.css&#39;</span><span class="p">])</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div><h2 id="å®‰è£å¿…è¦å¥—ä»¶">å®‰è£å¿…è¦å¥—ä»¶</h2>
<p>Laravel æ“ä½œ Redis æ˜¯é€é <a href="https://github.com/nrk/predis">Predis</a> å¥—ä»¶ï¼Œæ‰€ä»¥æˆ‘å€‘è¦é€é composer å®‰è£ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ composer require predis/predis
</code></pre></div><p>æ¥ä¸‹ä¾†è¦é€é Npm èˆ‡ Bower å®‰è£ Socket.IO Server ç›¸é—œå¥—ä»¶ï¼ŒåŒ…å«å‰å¾Œç«¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ npm install express ioredis socket.io --save
$ bower install socket.io-client --save
</code></pre></div><h2 id="å»ºç«‹-socketio-server">å»ºç«‹ Socket.IO Server</h2>
<p>æ¥ä¸‹ä¾†è¦åˆ©ç”¨ Node.js çš„ express å’Œ http æ¨¡çµ„å»ºç«‹ä¸€å€‹ Web Server ï¼Œç„¶å¾Œè®“ Socket.IO é€éé€™å€‹ WebServer ä¾†å»£æ’­å¾ Redis æ¥æ”¶åˆ°çš„äº‹ä»¶ã€‚å…ˆå»ºç«‹ <code>socket.js</code> ï¼Œå…§å®¹ç‚ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">)();</span>
<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">).</span><span class="nx">Server</span><span class="p">(</span><span class="nx">app</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">io</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;socket.io&#39;</span><span class="p">)(</span><span class="nx">http</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">Redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;ioredis&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Redis</span><span class="p">();</span>

<span class="c1">// Redis è¨‚é–± `chat-channel` é »é“
</span><span class="c1"></span><span class="nx">redis</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">&#39;chat-channel&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
<span class="p">});</span>

<span class="c1">// ç•¶ Redis æœ‰äº‹ä»¶ç™¼ç”Ÿæ™‚ï¼Œé€é Socket.IO Server ç™¼é€äº‹ä»¶
</span><span class="c1"></span><span class="nx">redis</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">channel</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">message</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
    <span class="nx">io</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="nx">channel</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="nx">message</span><span class="p">.</span><span class="nx">event</span><span class="p">,</span> <span class="nx">message</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// è®“ç”¨æˆ¶ç«¯å¯ä»¥é€é Port 3000 é€£æ¥ Socket.IO Server
</span><span class="c1"></span><span class="nx">http</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Listening on Port 3000&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><p>ç„¶å¾Œåœ¨ Homestead ä¸Šå•Ÿå‹• Socket.IO Server ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ node socket.js <span class="p">&amp;</span>
Listening on Port <span class="m">3000</span>
</code></pre></div><h2 id="ä¿®æ”¹è¨­å®š">ä¿®æ”¹è¨­å®š</h2>
<p>Laravel 5.1 é è¨­æ˜¯ä½¿ç”¨ Pusher åšç‚ºäº‹ä»¶æ¨é€ä¼ºæœå™¨ï¼Œå¯ä»¥åœ¨ <code>config/broadcasting.php</code> è£¡çœ‹åˆ°é€™å€‹è¨­å®šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">&#39;default&#39; =&gt; env(&#39;BROADCAST_DRIVER&#39;, &#39;pusher&#39;),
</code></pre></div><p>å› ç‚ºé€™è£¡ä½¿ç”¨äº† <code>env</code> å‡½å¼ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥ç·¨è¼¯ <code>.env</code> ï¼ŒåŠ å…¥ä»¥ä¸‹è¨­å®šä¾†æ”¹ç”¨ Redis ä¼ºæœå™¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">BROADCAST_DRIVER</span><span class="o">=</span><span class="s">redis</span>
</code></pre></div><h2 id="å»ºç«‹-event-é¡åˆ¥">å»ºç«‹ Event é¡åˆ¥</h2>
<p>æ¥ä¸‹ä¾†å°±è¦è®“ Laravel èƒ½å¤ ç™¼é€äº‹ä»¶äº†ï¼Œåœ¨ Laravel 5.0 ä»¥å¾Œçš„ç‰ˆæœ¬æä¾›äº† <code>make:event</code> é€™å€‹æŒ‡ä»¤å¯ä»¥å”åŠ©æˆ‘å€‘å»ºç«‹ Event é¡åˆ¥ã€‚é¦–å…ˆæˆ‘å€‘çš„èŠå¤©å®¤éœ€è¦ä¸€å€‹ã€Œè¨Šæ¯è¢«å»ºç«‹ã€çš„äº‹ä»¶ï¼Œæ‰€ä»¥åŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ php artisan make:event MessageCreated
</code></pre></div><p>é€™æ¨£å°±æœƒå»ºç«‹ <code>app/Events/MessageCreated.php</code> ã€‚</p>
<p>æ¥è‘—æˆ‘å€‘è¦è®“ <code>MessageCreated</code> é¡åˆ¥èƒ½å¤ è¢« Redis æ¨é€ï¼Œæ‰€ä»¥ç·¨è¼¯ <code>app/Events/MessageCreated.php</code> ï¼Œè®“å®ƒå¯¦ä½œ <code>Illuminate\Contracts\Broadcasting\ShouldBroadcast</code> ä»‹é¢ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">use Illuminate\Contracts\Broadcasting\ShouldBroadcast;

class MessageCreated extends Event implements ShouldBroadcast
</code></pre></div><p>åœ¨æ¨é€äº‹ä»¶æ™‚ï¼Œæˆ‘å€‘å¯ä»¥é™„å¸¶ä¸€çµ„è¦å‚³é€çš„è³‡æ–™ï¼Œç¨±ç‚º payload ã€‚é€šå¸¸æˆ‘å€‘æœƒåœ¨ Event é¡åˆ¥çš„å»ºæ§‹å­ä¸­å¸¶å…¥ payload ã€‚ä¿®æ”¹ <code>MessageCreated</code> é¡åˆ¥ï¼ŒåŠ å…¥ <code>$username</code> èˆ‡ <code>$message</code> å±¬æ€§ï¼Œä¸¦åœ¨å»ºæ§‹å­ä¸­æ³¨å…¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    private $username;

    private $message;

    public function __construct($username, $message)
    {
        $this-&gt;username = $username;
        $this-&gt;message = $message;
    }
</code></pre></div><p>æ¥è‘—æˆ‘å€‘è¦è®“å®ƒèƒ½åœ¨æ¨é€äº‹ä»¶æ™‚ï¼ŒæŠŠé€™å…©å€‹å±¬æ€§ä¸€èµ·å‚³é€å‡ºå»ï¼›ä¸»è¦æ˜¯é€é <code>broadcastWith</code> é€™å€‹æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    public function broadcastWith()
    {
        return [
            &#39;username&#39; =&gt; $this-&gt;username,
            &#39;message&#39; =&gt; $this-&gt;message,
        ];
    }
</code></pre></div><p>æœ€å¾Œæˆ‘å€‘éœ€è¦ä¸€å€‹é »é“ä¾†å»£æ’­äº‹ä»¶ï¼Œé€™æ˜¯å› ç‚ºè¦è®“ Redis å¯ä»¥è­˜åˆ¥è¦å»£æ’­çš„å°è±¡ã€‚æˆ‘å€‘å¯ä»¥åœ¨ <code>broadcastOn</code> æ–¹æ³•å›å‚³ Redis è¨‚é–±çš„é »é“åç¨±ï¼Œå³ç‚ºå‰é¢æŒ‡å®šçš„ <code>chat-channel</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    public function broadcastOn()
    {
        return [&#39;chat-channel&#39;];
    }
</code></pre></div><blockquote>
<p>è¨»ï¼šä¸€å€‹äº‹ä»¶å¯ä»¥å»£æ’­çµ¦æ•¸å€‹é »é“ï¼Œæ‰€ä»¥é€™è£¡è¦å›å‚³ä¸€å€‹é™£åˆ—ã€‚</p>
</blockquote>
<p>å®Œæˆå¾Œçš„ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Events</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Contracts\Broadcasting\ShouldBroadcast</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Queue\SerializesModels</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MessageCreated</span> <span class="k">extends</span> <span class="nx">Event</span> <span class="k">implements</span> <span class="nx">ShouldBroadcast</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">SerializesModels</span><span class="p">;</span>

    <span class="k">private</span> <span class="nv">$username</span><span class="p">;</span>

    <span class="k">private</span> <span class="nv">$message</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$username</span><span class="p">,</span> <span class="nv">$message</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">username</span> <span class="o">=</span> <span class="nv">$username</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="nv">$message</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">broadcastWith</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">username</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span><span class="p">,</span>
        <span class="p">];</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">broadcastOn</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;chat-channel&#39;</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id="å»ºç«‹-routes-èˆ‡-controller">å»ºç«‹ Routes èˆ‡ Controller</h2>
<p>é€™è£¡æˆ‘å€‘åªéœ€è¦å…©å€‹ route ï¼šèŠå¤©å®¤é é¢ï¼Œä»¥åŠç™¼é€è¨Šæ¯ã€‚æ”¹å¯« <code>app/Http/routes.php</code> ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;ChatController@index&#39;</span><span class="p">);</span> <span class="c1">// èŠå¤©å®¤é é¢
</span><span class="c1"></span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;send-message&#39;</span><span class="p">,</span> <span class="s1">&#39;ChatController@sendMessage&#39;</span><span class="p">);</span> <span class="c1">// ç™¼é€è¨Šæ¯
</span></code></pre></div><p>ç„¶å¾Œè¦å»ºç«‹ <code>ChatController</code> ä¾†è™•ç†ç¨‹å¼æµç¨‹ï¼Œåœ¨ Terminal ä¸­åŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ php artisan make:controller ChatController --plain
</code></pre></div><p>ç·¨è¼¯æ–°å»ºç«‹çš„ <code>app/Http/Controllers/ChatController.php</code> ï¼Œå…ˆåŠ å…¥ <code>index</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    public function index()
    {
        srand(time()); // äº‚æ•¸ç¨®å­
        $username = sprintf(&#39;user%06d&#39;, rand(1, 100000)); // æ±ºå®š user åç¨± (è¨»)
        return view(&#39;chat&#39;, compact(&#39;username&#39;));
    }
</code></pre></div><p>åœ¨ <code>index</code> æ–¹æ³•ä¸­ï¼Œä¸»è¦æ˜¯ç”¢ç”Ÿä¸€å€‹éš¨æ©Ÿçš„ä½¿ç”¨è€…åç¨±ï¼Œä¸¦é¡¯ç¤ºåœ¨é¦–é æ¨£ç‰ˆè£¡ã€‚</p>
<blockquote>
<p>è¨»ï¼šé€™è£¡ç”¢ç”Ÿ <code>username</code> çš„æ–¹æ³•ä¸¦ä¸åš´è¬¹ï¼Œæ²’æœ‰è€ƒæ…®åˆ°åç¨±é‡è¤‡çš„å•é¡Œï¼Œä½†ç¾éšæ®µå…ˆæš«æ™‚é€™æ¨£ã€‚</p>
</blockquote>
<p>æ¥ä¸‹ä¾†æˆ‘å€‘è¦æ¥æ”¶ä½¿ç”¨è€…å»ºç«‹çš„è¨Šæ¯ï¼Œç„¶å¾Œç™¼é€ä¸€å€‹ã€Œè¨Šæ¯è¢«å»ºç«‹ã€çš„äº‹ä»¶ï¼Œæ‰€ä»¥æ–°å¢ <code>sendMessage</code> æ–¹æ³•ï¼Œå…§å®¹ç‚ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    public function sendMessage(Request $request)
    {
        $username = $request-&gt;get(&#39;username&#39;);
        $message = $request-&gt;get(&#39;message&#39;);
        event(new MessageCreated($username, $message));
        return &#39;message sent&#39;;
    }
</code></pre></div><h2 id="å»ºç«‹æ¨£ç‰ˆé é¢">å»ºç«‹æ¨£ç‰ˆé é¢</h2>
<p>åˆ‡æ›åˆ°å‰ç«¯é–‹ç™¼æ¨¡å¼ï¼Œæˆ‘å€‘è¦ä¿®æ”¹ä¸€ä¸‹ä»‹é¢çš„å‘ˆç¾ã€‚</p>
<p>å…ˆè™•ç† HTML çš„éƒ¨ä»½ï¼Œå°‡åŸä¾†çš„ <code>resources/views/welcome.blade.php</code> é‡æ–°å‘½åç‚º <code>resources/views/chat.blade.php</code> ï¼Œå°‡ <code>div.container</code> çš„å…§å®¹ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;container&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;row&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;col-md-6 col-md-offset-3&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Chat Room Demo<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

            <span class="c">&lt;!-- è¨Šæ¯åˆ—è¡¨æ¡† --&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;chat-room&#34;</span><span class="p">&gt;</span>

            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="c">&lt;!-- è¼¸å…¥è¨Šæ¯çš„è¡¨å–® --&gt;</span>
            <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;send-message&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;/send-message&#34;</span><span class="p">&gt;</span>
                {!! csrf_field() !!}
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;hidden&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;username&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;{{ $username }}&#34;</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;input-group&#34;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;input-group-addon&#34;</span><span class="p">&gt;</span>{{ $username }}<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;message&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;form-control&#34;</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;input-group-btn&#34;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;btn btn-success&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;send&#34;</span><span class="p">&gt;</span>Send<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div><p>é€™æ¨£æœƒè®“ç•«é¢ä¸Šæœ‰ä¸€å€‹è¨Šæ¯åˆ—è¡¨æ¡†ä»¥åŠä¸€å€‹è¼¸å…¥è¨Šæ¯çš„è¡¨å–®ï¼Œå¦‚ä¸‹åœ–æ‰€ç¤ºã€‚</p>
<p><img src="/resources/chat-room-demo/interface.png" alt="ä»‹é¢"></p>
<p>æ¥ä¸‹ä¾†ç¨å¾®èª¿æ•´ä»‹é¢çš„æ¨£å¼ï¼Œç·¨è¼¯ <code>resources/assets/sass/app.scss</code> ï¼Œå°‡å…§å®¹ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-scss" data-lang="scss"><span class="k">@import</span> <span class="s2">&#34;../../../public/bower_components/bootstrap-sass/assets/stylesheets/bootstrap&#34;</span><span class="p">;</span>

<span class="nt">html</span><span class="o">,</span> <span class="nt">body</span> <span class="p">{</span>
  <span class="nt">height</span><span class="nd">:</span> <span class="nt">100</span><span class="err">%</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// è¨Šæ¯åˆ—è¡¨æ¡†
</span><span class="c1"></span><span class="nn">#chat-room</span> <span class="p">{</span>
  <span class="nt">border</span><span class="nd">:</span> <span class="nt">1px</span> <span class="nt">solid</span> <span class="nn">#ccc</span><span class="p">;</span>
  <span class="nt">height</span><span class="nd">:</span> <span class="nt">20rem</span><span class="p">;</span>
  <span class="nt">padding</span><span class="nd">:</span> <span class="nt">1rem</span><span class="p">;</span>
  <span class="nt">overflow-x</span><span class="nd">:</span> <span class="nt">hidden</span><span class="p">;</span>
  <span class="nt">overflow-y</span><span class="nd">:</span> <span class="nt">auto</span><span class="p">;</span>

  <span class="c1">// å–®å‰‡è¨Šæ¯
</span><span class="c1"></span>  <span class="nc">.message</span> <span class="p">{</span>
    <span class="nt">padding</span><span class="nd">:</span> <span class="nt">1rem</span><span class="p">;</span>
    <span class="nt">margin-bottom</span><span class="nd">:</span> <span class="nt">1rem</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// è¼¸å…¥è¨Šæ¯çš„è¡¨å–®
</span><span class="c1"></span><span class="nn">#send-message</span> <span class="p">{</span>
  <span class="nt">margin-top</span><span class="nd">:</span> <span class="nt">-1px</span><span class="p">;</span>

  <span class="nc">.input-group-addon</span> <span class="p">{</span>
    <span class="nt">border-top-left-radius</span><span class="nd">:</span> <span class="nt">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nc">.input-group-btn</span> <span class="o">&gt;</span> <span class="nc">.btn</span> <span class="p">{</span>
    <span class="nt">border-top-right-radius</span><span class="nd">:</span> <span class="nt">0</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>æœ€å¾Œé€é JavaScript è®“æ‰€æœ‰æ±è¥¿ä¸²åœ¨ä¸€èµ·ï¼Œ</p>
<p>ç·¨è¼¯ <code>resources/assets/js/app.js</code> ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">$chatRoom</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#chat-room&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">$sendMessage</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#send-message&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">$messageInput</span> <span class="o">=</span> <span class="nx">$sendMessage</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;input[name=message]&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">io</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">io</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">socket</span> <span class="o">=</span> <span class="nx">io</span><span class="p">(</span><span class="s1">&#39;http://chat-room.app:3000&#39;</span><span class="p">);</span>

<span class="c1">// ç•¶é€å‡ºè¡¨å–®æ™‚ï¼Œæ”¹ç”¨ Ajax å‚³é€ï¼Œä¸¦æ¸…ç©ºè¼¸å…¥æ¡†ã€‚
</span><span class="c1"></span><span class="nx">$sendMessage</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">action</span><span class="p">,</span> <span class="nx">$sendMessage</span><span class="p">.</span><span class="nx">serialize</span><span class="p">());</span>
    <span class="nx">$messageInput</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// ç•¶æ¥æ”¶åˆ°è¨Šæ¯å»ºç«‹çš„äº‹ä»¶æ™‚ï¼Œå°‡æ¥æ”¶åˆ°çš„ payload
</span><span class="c1"></span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;chat-channel:App\\Events\\MessageCreated&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">payload</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;div class=&#34;message alert-info&#34; style=&#34;display: none;&#34;&gt;&#39;</span><span class="p">;</span>
    <span class="nx">html</span> <span class="o">+=</span> <span class="nx">payload</span><span class="p">.</span><span class="nx">username</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span><span class="p">;</span>
    <span class="nx">html</span> <span class="o">+=</span> <span class="nx">payload</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
    <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">$message</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
    <span class="nx">$chatRoom</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$message</span><span class="p">);</span>
    <span class="nx">$message</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="s1">&#39;fast&#39;</span><span class="p">);</span>
    <span class="nx">$chatRoom</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span><span class="nx">scrollTop</span><span class="o">:</span> <span class="nx">$chatRoom</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">scrollHeight</span><span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><h2 id="åŸ·è¡Œæ¸¬è©¦">åŸ·è¡Œæ¸¬è©¦</h2>
<p>åœ¨ Homestead ä¸ŠåŸ·è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ gulp
</code></pre></div><p>ç„¶å¾Œåœ¨æœ¬æ©Ÿåˆ†åˆ¥é–‹å•Ÿå…©å€‹ç€è¦½å™¨è¦–çª—ç€è¦½ <code>http://chat-room.app</code> ï¼Œç„¶å¾Œåœ¨è¼¸å‡ºæ¡†ä¸Šè¼¸å…¥æ–‡å­—å¾ŒæŒ‰ <code>Send</code> ï¼Œæ‡‰è©²å°±æœƒè®“å…©å€‹ç€è¦½å™¨åŒæ™‚å‡ºç¾ç›¸åŒçš„æ–‡å­—ã€‚</p>
<p><img src="/resources/chat-room-demo/in-use.png" alt="å±•ç¤º"></p>
<p>å®Œæˆçš„ç¯„ä¾‹å¯ä»¥åœ¨æˆ‘çš„ <a href="https://github.com/jaceju/example-laravel-chat-room">GitHub</a> ä¸Šæ‰¾åˆ°ã€‚</p>
<h2 id="çµè«–">çµè«–</h2>
<p>é€™å€‹ Demo å¦‚æœçœŸçš„è¦åœ¨å¯¦å‹™ä¸Šä½¿ç”¨ï¼Œé‚„æœ‰å¾ˆå¤šåœ°æ–¹è¦è€ƒæ…®ï¼Œä¾‹å¦‚è¨Šæ¯æ­·å²ã€ä½¿ç”¨è€…ç™»å…¥ç­‰ç­‰ã€‚ä¸éé€™å·²ç¶“è¶³å¤ è®“æˆ‘å€‘ç­è§£ Laravel 5.1 åœ¨å¯¦ä½œ Broadcasting æ™‚æœ‰å¤šéº¼è¼•é¬†ï¼Œä½¿å¾—æˆ‘å€‘æ›´å®¹æ˜“åœ¨å°ˆæ¡ˆå‰æœŸå°±å…ˆå¯¦ç¾å¾ˆå¤šæƒ³æ³•ã€‚</p>
<p>å¸Œæœ›é€™å€‹ç°¡å–®çš„æ•™å­¸ï¼Œèƒ½å°å¤§å®¶ä½¿ç”¨ Laravel ä¾†é–‹ç™¼å³æ™‚ç³»çµ±æ™‚æœ‰æ‰€å¹«åŠ©ã€‚</p>
<h2 id="åƒè€ƒ">åƒè€ƒ</h2>
<ul>
<li><a href="https://laracasts.com/discuss/channels/general-discussion/step-by-step-guide-to-installing-socketio-and-broadcasting-events-with-laravel-51">Step by Step Guide to Installing Socket.io and Broadcasting Events with Laravel 5.1 </a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>Laravel 5.1 æ­£å¼é‡‹å‡º</title>
			<link>https://jaceju.net/laravel-5-1/</link>
			<pubDate>Wed, 10 Jun 2015 00:34:37 +0800</pubDate>
			
			<guid>https://jaceju.net/laravel-5-1/</guid>
			<description>ç¶“éäº†å¹¾å€‹æœˆçš„ç­‰å¾…ï¼Œ Laravel 5.1 çµ‚æ–¼åœ¨ç¾åœ‹æ™‚é–“ 6/9 æ­£å¼é‡‹å‡ºäº†ã€‚åŒæ™‚ Laracasts ä¹Ÿæ¨å‡ºäº†ä¸€ç³»åˆ—çš„ Laravel 5.1 æ–°åŠŸèƒ½ä»‹ç´¹ï¼Œçµ•å°æ˜¯æ¯ä½ Artisan å¿…çœ‹çš„å½±ç‰‡ã€‚ å®˜æ–¹ä¹Ÿä»‹ç´¹äº† 5.1 æœ‰å“ªäº›æ–°ç‰¹è‰²</description>
			<content type="html"><![CDATA[<p>ç¶“éäº†å¹¾å€‹æœˆçš„ç­‰å¾…ï¼Œ Laravel 5.1 çµ‚æ–¼åœ¨ç¾åœ‹æ™‚é–“ 6/9 <a href="https://laravel-news.com/2015/06/laravel-5-1-released/">æ­£å¼é‡‹å‡º</a>äº†ã€‚åŒæ™‚ Laracasts ä¹Ÿæ¨å‡ºäº†ä¸€ç³»åˆ—çš„ <a href="https://laracasts.com/series/whats-new-in-laravel-5-1">Laravel 5.1 æ–°åŠŸèƒ½ä»‹ç´¹</a>ï¼Œçµ•å°æ˜¯æ¯ä½ Artisan å¿…çœ‹çš„å½±ç‰‡ã€‚</p>
<p>å®˜æ–¹ä¹Ÿä»‹ç´¹äº† 5.1 æœ‰å“ªäº›<a href="http://laravel.com/docs/5.1/releases">æ–°ç‰¹è‰²</a> ï¼Œä»¥ä¸‹æˆ‘æœƒç°¡å–®ä»‹ç´¹å®ƒå€‘ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="ä¸å†æ”¯æ´-php-559-ä»¥å‰çš„ç‰ˆæœ¬">ä¸å†æ”¯æ´ PHP 5.5.9 ä»¥å‰çš„ç‰ˆæœ¬</h2>
<p>å¾æ¨å‡ºä»¥ä¾†ï¼Œæˆ‘å€‹äººèªç‚º Laravel çš„ä½œè€…ä¼¼ä¹éƒ½ä¸€ç›´åœ¨ä¾å¾ªè‘— PHP çš„æ–°ç‰¹è‰²ä¾†é–‹ç™¼ Laravel ï¼Œè®“æ•´å€‹ Framework ä¸è«–åœ¨ç¨‹å¼æ¶æ§‹æˆ–æ•ˆèƒ½ä¸Šï¼Œéƒ½èƒ½ä¿æŒåœ¨ä¸€å®šçš„æ°´æº–ã€‚é€™æ¬¡ 5.1 ç‰ˆä¹Ÿæ˜¯å¦‚æ­¤ï¼Œç›´æ¥å°±å‘Šè¨´å¤§å®¶ï¼šè©²æŠŠ PHP å‡ç´šåˆ° 5.5.9 ä»¥ä¸Šçš„ç‰ˆæœ¬äº†ï¼Œé€™æ¨£æ‰èƒ½ä½¿ç”¨æ–°ç‰ˆçš„ Laravel æ‰€å¸¶ä¾†çš„å¥½è™•ã€‚</p>
<p>å¾ˆé›£æƒ³åƒé€™æ¨£å…ˆé€²çš„ PHP Framework çš„é–‹ç™¼ä½œè€…ï¼ŒåŸä¾†æ˜¯å¯« .Net çš„ï¼›è€Œåœ¨é–‹ç™¼ Laravel ä¹‹å‰å®Œå…¨æ²’å­¸é PHP ï¼ŒçœŸæ˜¯ä»¤æˆ‘æ±—é¡ã€‚</p>
<h2 id="ç¬¬ä¸€å€‹-lts-ç‰ˆæœ¬">ç¬¬ä¸€å€‹ LTS ç‰ˆæœ¬</h2>
<p>ç•¶ç„¶éš¨è‘— PHP æŒçºŒæ¼”é€²çš„éç¨‹ä¸­ï¼Œå‹¢å¿…å°±å¾—æœ‰æ‰€å–æ¨ï¼›é€™æ¨£çš„ç‰¹è‰²è®“è¨±å¤šä¾è³´èˆŠçš„ Laravel ç‰ˆæœ¬æ‰€é–‹ç™¼çš„å°ˆæ¡ˆï¼Œåœ¨ç©©å®šèˆ‡å‡ç´šä¹‹é–“é¢è‡¨å¾ˆå¤§çš„æŠ‰æ“‡ã€‚åˆ°äº† Laravel 5.1 ï¼Œä½œè€…çµ‚æ–¼æ­£å¼å®£ä½ˆå®ƒæ˜¯ä¸€å€‹ LTS (Long Term Support) ç‰ˆæœ¬ï¼Œå°‡æœƒè®“ä¼æ¥­å®‰å¿ƒç”¨å®ƒä¾†é–‹ç™¼éœ€è¦ç©©å®šçš„é•·æœŸå°ˆæ¡ˆã€‚</p>
<p>ä¹Ÿå°±æ˜¯èªªç¾åœ¨ç”¨ Laravel 5.1 é–‹ç™¼çš„å°ˆæ¡ˆï¼Œåœ¨æœªä¾†çš„å…©ã€ä¸‰å¹´å…§å¯ä»¥ä¸ç”¨å†æ€•æ²’äººä¿®æ ¸å¿ƒçš„ bug äº†ã€‚</p>
<h2 id="æ–°çš„æ–‡ä»¶">æ–°çš„æ–‡ä»¶</h2>
<p>åœ¨ 5.1 å°‡è¦ç™¼ä½ˆä¹‹å‰ï¼Œä½œè€…èŠ±äº†å¾ˆå¤šå¿ƒåŠ›åœ¨å®Œå–„æ–‡ä»¶ã€‚ä¾‹å¦‚ <a href="http://laravel.com/docs/5.1/authentication">Authentication</a> çš„éƒ¨ä»½å°±åšäº†å¾ˆå®Œæ•´çš„ Quickstart ç¯„ä¾‹ï¼Œè®“é–‹ç™¼è€…ç­è§£å¦‚ä½•å»å¯¦ä½œè‡ªå·±çš„èªè­‰æ©Ÿåˆ¶ã€‚å¦å¤–å³æ™‚æœå°‹ä¹Ÿæ˜¯é€™æ¬¡æ–‡ä»¶ç³»çµ±çš„æ–°ç‰¹è‰²ï¼Œè®“é–‹ç™¼è€…å¯ä»¥å¾ˆå¿«åœ°ç”¨é—œéµå­—ä¾†æŸ¥é–±ç›¸é—œèªªæ˜ã€‚</p>
<p>ä¸éæˆ‘é‚„æ˜¯è¦ºå¾—å­—å¤ªå°ï¼Œè€Œä¸”æ¯æ¬¡è¦çœ‹å…¶ä»–ç« ç¯€éƒ½å¾—æ²å›å»é é¦–ã€‚</p>
<h2 id="psr-2">PSR-2</h2>
<p>åœ¨ Laravel 5.1 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè®“æˆ‘æœ€å›°æ“¾çš„å°±æ˜¯ä½œè€…è‡ªå·±å¼„äº†ä¸€å¥— Coding Style ï¼Œè€Œä¸æ˜¯ç…§è‘— PSR æ¨™æº–èµ°ã€‚çµ‚æ–¼åœ¨çœ¾é–‹ç™¼è€…çš„è¦æ±‚ä¸‹ï¼Œä½œè€…å¾å–„å¦‚æµï¼Œè®“æ ¸å¿ƒä»£ç¢¼ä»¥åŠç”¢ç”Ÿå™¨æ‰€ç”¢ç”Ÿçš„ç¨‹å¼ç¢¼ï¼Œéƒ½éµå®ˆäº† PSR-2 æ¨™æº–ã€‚</p>
<p>é€™å€‹çµæœï¼Œæˆ‘åªèƒ½æ‹æ‰‹å«å¥½äº†ï¼›å› ç‚ºå³ä¾¿ PSR-2 å†æ€éº¼ä¸å¦‚å·±æ„ï¼Œä½†å®ƒçµ‚æ­¸æ˜¯å¤§å®¶è¨è«–å‡ºä¾†çš„æ¨™æº–ã€‚ (å…¬å¸çš„ coding style ä¹Ÿä¸æ­£æ˜¯å¦‚æ­¤å—ï¼Ÿ)</p>
<ul>
<li>ç›¸é—œå½±ç‰‡ï¼š <a href="https://laracasts.com/series/whats-new-in-laravel-5-1/episodes/1">Adopting PSR-2</a></li>
</ul>
<h2 id="åœ¨æ¨£ç‰ˆä¸­æ³¨å…¥æœå‹™">åœ¨æ¨£ç‰ˆä¸­æ³¨å…¥æœå‹™</h2>
<p>åœ¨ Blade å¼•æ“ä¸­ä¹Ÿæ–°å¢äº†ä¸€å€‹ <code>@inject</code> æŒ‡ä»¤ï¼Œè®“é–‹ç™¼è€…å¯ä»¥å³æ™‚åœ°æ³¨å…¥ä¸€å€‹ç‰©ä»¶ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">@inject(&#39;metrics&#39;, &#39;App\Services\MetricsService&#39;)

<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    Monthly Revenue: {{ $metrics-&gt;monthlyRevenue() }}.
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div><p>é€™æ¨£ä¸€ä¾†æ‡‰è©²å°±å¯ä»¥ä¸å¿…åœ¨ Controller æˆ– View Composer ä¸­å¼•å…¥è®Šæ•¸äº†ã€‚</p>
<ul>
<li>ç›¸é—œæ–‡ä»¶ï¼š <a href="http://laravel.com/docs/5.1/blade#service-injection">Blade Templates - Service Injection</a></li>
<li>ç›¸é—œå½±ç‰‡ï¼š <a href="https://laracasts.com/series/whats-new-in-laravel-5-1/episodes/2">Injecting Services With Blade</a></li>
</ul>
<h2 id="middleware-åƒæ•¸">Middleware åƒæ•¸</h2>
<p>åŸæœ¬æˆ‘å€‘åªèƒ½å¾å‚³å…¥ request ç‰©ä»¶çµ¦ middleware ï¼Œå†å¾ request ç‰©ä»¶ä¸­å–å¾—åƒæ•¸çµ¦ middleware ä½¿ç”¨ï¼›åœ¨æ–°ç‰ˆæœ¬çµ‚æ–¼å¯ä»¥è‡ªè¨‚ middleware çš„åƒæ•¸ï¼Œå†å¾ route çš„å®šç¾©è£¡å‚³å…¥åƒæ•¸çµ¦ middleware ã€‚</p>
<p>ä¾‹å¦‚åœ¨è£½ä½œæ¬Šé™ç³»çµ±æ™‚ï¼Œå°±å¯ä»¥åœ¨ route å‚³å…¥æŒ‡å®šçš„è§’è‰²ï¼Œè®“ç®¡ç†æ¬Šé™çš„ middleware åˆ¤æ–·ä½¿ç”¨è€…æ˜¯å¦ç¬¦åˆé€™å€‹è§’è‰²ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class RoleMiddleware
{
    public function handle($request, Closure $next, $role)
    {
        if (! $request-&gt;user()-&gt;hasRole($role)) {
            // Redirect...
        }

        return $next($request);
    }
}

Route::put(&#39;post/{id}&#39;, [&#39;middleware&#39; =&gt; &#39;role:editor&#39;, function ($id) {
    //
}]);
</code></pre></div><p>å¦å¤– Middleware çš„è¨­è¨ˆä¹Ÿå› ç‚ºåº•å±¤çš„ Symfony æ¡ç”¨äº†å‰›å®šæ¡ˆçš„ PSR-7 æ¨™æº–ï¼Œæ‰€ä»¥ä¹Ÿç¬¦åˆ PSR-7 çš„æ¨™æº–ã€‚</p>
<ul>
<li>ç›¸é—œæ–‡ä»¶ï¼š <a href="http://laravel.com/docs/5.1/middleware#middleware-parameters">HTTP Middleware - Middleware Parameters</a></li>
</ul>
<h2 id="äº‹ä»¶å»£æ’­">äº‹ä»¶å»£æ’­</h2>
<p>Laravel åŸæœ¬å·²ç¶“åŒ…å«äº†ä¸€å€‹å¼·å¤§çš„äº‹ä»¶ç³»çµ±ï¼Œç¾åœ¨åŠ ä¸Šå¯¦ä½œæ›´ç°¡å–®çš„äº‹ä»¶å»£æ’­åŠŸèƒ½ï¼Œèƒ½è®“é–‹ç™¼è€…æ­é…ç‰¹å®šçš„æœå‹™ (ä¾‹å¦‚ Redis) ä»¥å»£æ’­ WebSocket äº‹ä»¶ï¼Œä¾¿å¯ä»¥æ›´æœ‰æ•ˆç‡åœ°åšå‡ºå³æ™‚æ‡‰ç”¨ç¨‹å¼ã€‚</p>
<p>åŸæœ¬æˆ‘æ‰“ç®—ç”¨ <a href="http://reactphp.org/">ReactPHP</a> çš„èªªï¼Œçœ‹ä¾†åˆè¦æ”¹è®Šä¸»æ„äº†ã€‚</p>
<ul>
<li>ç›¸é—œæ–‡ä»¶ï¼š <a href="http://laravel.com/docs/5.1/events#broadcasting-events">Events - Broadcasting Events</a></li>
<li>ç›¸é—œå½±ç‰‡ï¼š <a href="https://laracasts.com/series/intermediate-laravel/episodes/3">The Power of Eventing</a> (éœ€ä»˜è²»)</li>
</ul>
<h2 id="æ›´å®Œæ•´çš„æ¸¬è©¦æ¡†æ¶">æ›´å®Œæ•´çš„æ¸¬è©¦æ¡†æ¶</h2>
<p>å…ˆå‰çš„ç‰ˆæœ¬æ‰€æä¾›çš„æ¸¬è©¦å·¥å…·æä¾›çš„åŠŸèƒ½æœ‰é™ï¼Œåƒ…èƒ½åšåˆ°éƒ¨ä»½çš„æ•´åˆæ¸¬è©¦ã€‚ç¾åœ¨ Laravel 5.1 å¼•å…¥äº† laracasts çš„æ¸¬è©¦å¥—ä»¶ï¼Œè®“æ•´åˆæ¸¬è©¦è®Šå¾—æ›´æ˜“è®€ã€‚</p>
<p>æˆ‘æ‰å‰›æŠŠ <a href="http://codeception.com/">Codeception</a> å¼•å…¥è€Œå·²ï¼Œé€™å¥—è¦ä¸è¦ç”¨å¯èƒ½è¦å†ç ”ç©¶ä¸€ä¸‹ã€‚</p>
<ul>
<li>ç›¸é—œæ–‡ä»¶ï¼š <a href="http://laravel.com/docs/5.1/testing">Testing</a></li>
</ul>
<h2 id="å°çµ">å°çµ</h2>
<p>æ“šä½œè€…èªªï¼Œ Laravel 5.1 æ˜¯ä»–ç›®å‰æœ€æ»¿æ„çš„ç‰ˆæœ¬ï¼›ç•¶ç„¶é€™æˆ–è¨±æœ‰äº›è€ç‹è³£ç“œçš„æ„Ÿè¦ºï¼Œä½†å¾ Laravel 3 è¿½åˆ°ç¾åœ¨ï¼Œæˆ‘ä¹Ÿè¦ºå¾— Laravel çœŸçš„æ˜¯èˆ‡æ™‚ä¿±é€²ï¼Œä¸æ–·åœ°çµåˆè¨±å¤šå…ˆé€²çš„é–‹ç™¼è§€å¿µã€‚</p>
<p>æ¥ä¸‹ä¾†æˆ‘æœƒæŠŠä¸€äº›ç›®å‰æ­£åœ¨åŸ·è¡Œçš„å°ˆæ¡ˆéƒ½æ›æˆ 5.1 ï¼Œå†ä¾†çœ‹çœ‹å®ƒæ˜¯ä¸æ˜¯çœŸçš„æœ‰å¦‚ä½œè€…æ‰€èªªçš„é€™éº¼å¼·å¤§ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>åœ¨ Mac OS X ä¸Šæ­å»º Selenium æ¸¬è©¦ç’°å¢ƒ</title>
			<link>https://jaceju.net/selenium-on-mac/</link>
			<pubDate>Wed, 03 Jun 2015 10:21:45 +0800</pubDate>
			
			<guid>https://jaceju.net/selenium-on-mac/</guid>
			<description>åœ¨é–‹ç™¼ç¶²ç«™çš„éç¨‹ä¸­ï¼Œå› ç‚ºéœ€è¦æ¸¬è©¦ä»‹é¢ä»¥æ¨¡æ“¬ä½¿ç”¨è€…çš„æ“ä½œï¼Œæœ€ç†æƒ³çš„å·¥å…·å°±æ˜¯ Selenium äº†ã€‚ ç¾åœ¨æˆ‘æ˜¯ç”¨ Mac ä¾†ç•¶åšé–‹ç™¼ç’°å¢ƒï¼Œæ‰€ä»¥ç°¡å–®è¨˜éŒ„ä¸€ä¸‹å¦‚ä½•åœ¨ OS X ä¸Šå»ºç«‹ Selenium</description>
			<content type="html"><![CDATA[<p>åœ¨é–‹ç™¼ç¶²ç«™çš„éç¨‹ä¸­ï¼Œå› ç‚ºéœ€è¦æ¸¬è©¦ä»‹é¢ä»¥æ¨¡æ“¬ä½¿ç”¨è€…çš„æ“ä½œï¼Œæœ€ç†æƒ³çš„å·¥å…·å°±æ˜¯ <a href="http://www.seleniumhq.org/">Selenium</a> äº†ã€‚</p>
<p>ç¾åœ¨æˆ‘æ˜¯ç”¨ Mac ä¾†ç•¶åšé–‹ç™¼ç’°å¢ƒï¼Œæ‰€ä»¥ç°¡å–®è¨˜éŒ„ä¸€ä¸‹å¦‚ä½•åœ¨ OS X ä¸Šå»ºç«‹ Selenium æ¸¬è©¦ç’°å¢ƒã€‚</p>
<p>Selenium çš„ç°¡å–®åŸç†èˆ‡æ‡‰ç”¨å¯ä»¥åƒè€ƒï¼š<a href="http://jaceju.net/2015/05/23/skilltree-tdd-2/">è‡ªå‹•æ¸¬è©¦èˆ‡ TDD å¯¦å‹™é–‹ç™¼ - ä¸Šèª²å¿ƒå¾— (ä¸­)</a></p>
<!-- raw HTML omitted -->
<h2 id="æº–å‚™å·¥ä½œ">æº–å‚™å·¥ä½œ</h2>
<ol>
<li>ç¢ºèªå¯ä»¥åŸ·è¡Œ Java ï¼Œå› ç‚º Selenium Server éœ€è¦ç”¨ Java åŸ·è¡Œï¼›å¦‚æœæ²’æœ‰ Java çš„è©±ï¼Œå¯ä»¥å» Oracle å®˜æ–¹ç¶²ç«™<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">ä¸‹è¼‰</a> å¾Œå®‰è£ã€‚</li>
<li>ç¢ºèªå¯ä»¥åŸ·è¡Œ <a href="http://brew.sh/">homebrew</a> ï¼Œå› ç‚ºç¨å¾Œæœ‰å¹¾å€‹å¥—ä»¶æœƒä½¿ç”¨å®ƒä¾†å®‰è£ã€‚</li>
<li>åœ¨é©åˆçš„ä½ç½®å»ºç«‹ä¸€å€‹æ–°è³‡æ–™å¤¾ï¼Œä¾‹å¦‚ <code>~/Selenium</code> ï¼Œæ¥ä¸‹ä¾†çš„å·¥ä½œéƒ½æœƒåœ¨é€™è£¡é€²è¡Œã€‚</li>
<li>æœ€å¾Œåœ¨ Terminal ä¸­ä¸‹è¼‰æˆ‘å¯«å¥½çš„ script ä¸¦åŸ·è¡Œå®ƒï¼Œå®ƒæœƒä¸‹è¼‰ selenium server ä¸¦å®‰è£ ChromeDriver åŠå»ºç«‹ Firefox Profileã€‚</li>
</ol>
<p>å®Œæ•´çš„æŒ‡ä»¤å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mkdir -p ~/Selenium <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="nv">$_</span>
curl -S -s -L https://goo.gl/s519kT &gt; run-selenium
chmod +x run-selenium <span class="o">&amp;&amp;</span> mv run-selenium /usr/local/bin
run-selenium init
</code></pre></div><h2 id="è¨­å®šç€è¦½å™¨">è¨­å®šç€è¦½å™¨</h2>
<p>å…ˆç¢ºèªå¥½å·²ç¶“å®‰è£ <a href="http://mozilla.com.tw/">Firefox</a> ã€ <a href="https://www.google.com.tw/chrome/">Google Chrome</a> ç­‰ç€è¦½å™¨ï¼Œ Safari å‰‡å·²å…§å»ºã€‚</p>
<h3 id="google-chrome">Google Chrome</h3>
<p><a href="https://sites.google.com/a/chromium.org/chromedriver/">ChromeDriver</a> å¯ä»¥è®“ Selenium Server å‘¼å« Google Chrome åŸ·è¡Œï¼›å¦‚æœå‰é¢å·²ç¶“åŸ·è¡Œé <code>./run-selenium init</code> çš„è©±ï¼Œå°±å·²ç¶“å®‰è£å¥½äº†ã€‚å¯ä»¥åœ¨ Terminal åŸ·è¡Œ <code>chromedriver -v</code> ä¾†é©—è­‰æ˜¯å¦æ­£ç¢ºå®‰è£ã€‚</p>
<h3 id="safari">Safari</h3>
<p><a href="https://github.com/SeleniumHQ/selenium/wiki/SafariDriver">SafariDriver</a> å‰‡å¯ä»¥è®“ Selenium Server å‘¼å« Safari åŸ·è¡Œï¼Œå®ƒæ˜¯ä¸€å€‹ Safari Extension ï¼Œå¿…é ˆæ‰‹å‹•å®‰è£ã€‚</p>
<ol>
<li>åœ¨ Selenium å®˜ç¶²<a href="http://www.seleniumhq.org/download/">ä¸‹è¼‰é </a>æ‰¾åˆ° <code>SafariDriver</code> ï¼Œä¸‹è¼‰ <code>Latest release</code> é€£çµçš„ <code>SafariDriver.safariextz</code> æª”ã€‚</li>
<li>ç”¨æ»‘é¼ é›™æ“Š <code>SafariDriver.safariextz</code> æª”ï¼Œ Safari æœƒæç¤ºæ˜¯å¦å®‰è£ <code>WebDriver</code> ï¼Œé¸ã€Œå®‰è£ã€ã€‚</li>
<li>é–‹å•Ÿ Safari ï¼Œåœ¨ã€Œåå¥½è¨­å®šã€è£¡é¢åˆ‡æ›åˆ°ã€Œå»¶ä¼¸åŠŸèƒ½ã€é ç±¤ã€‚</li>
<li>åœ¨ã€Œå»¶ä¼¸åŠŸèƒ½ã€é ç±¤ç•«é¢ä¸Šï¼Œæ‡‰è©²å°±æœƒæœ‰ <code>WebDriver</code> ï¼Œç¢ºèªå®ƒæœ‰è¢«å•Ÿç”¨ã€‚</li>
<li><strong>æœ€å¾Œåœ¨ã€Œå®‰å…¨æ€§ã€é ç±¤ç•«é¢ä¸Šï¼Œå°‡ã€Œé˜»æ“‹å½ˆå‡ºå¼è¦–çª—ã€å–æ¶ˆå‹¾é¸ï¼Œé¿å…é˜»æ“‹æ¸¬è©¦ç¨‹å¼åŸ·è¡Œã€‚</strong></li>
</ol>
<h2 id="å•Ÿç”¨ä¸¦åœç”¨-selenium-server">å•Ÿç”¨ä¸¦åœç”¨ Selenium Server</h2>
<p>åœ¨è¦æ¸¬è©¦ä¹‹å‰ï¼Œå•Ÿç”¨ Selenium Server ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">run-selenium start
</code></pre></div><p>è¦çµæŸ Selenium Server å‰‡æ˜¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">run-selenium stop
</code></pre></div><h2 id="æ¸¬è©¦ç”¨ç¯„ä¾‹">æ¸¬è©¦ç”¨ç¯„ä¾‹</h2>
<p>é€™é‚Šå·²ç¶“æœ‰å€‹æˆ‘å¯«å¥½çš„<a href="https://github.com/jaceju/selenium-demo">ç¯„ä¾‹</a>ï¼Œå®ƒæ•´åˆäº†ä»¥ä¸‹å¹¾å€‹ Selenium Server çš„ç”¨æ³•ï¼š</p>
<ul>
<li><a href="https://github.com/giorgiosironi/phpunit-selenium">PHPUnit Selenium</a></li>
<li><a href="https://github.com/instaclick/php-webdriver">PHP WebDriver</a></li>
<li><a href="http://codeception.com/docs/modules/WebDriver">Codeception WebDriver Module</a></li>
</ul>
<p>ç”¨æ³•è«‹åƒè€ƒ <a href="https://github.com/jaceju/selenium-demo/blob/master/README.md">README</a> èªªæ˜ã€‚</p>
<h2 id="åƒè€ƒ">åƒè€ƒ</h2>
<ul>
<li><a href="http://www.hashbangcode.com/blog/automating-headless-selenium-phpunit-tests">Automating Headless Selenium PHPUnit Tests</a></li>
<li><a href="http://elementalselenium.com/tips/69-safari">Elemental Selenium - How To Use Safari</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>è‡ªå‹•æ¸¬è©¦èˆ‡ TDD å¯¦å‹™é–‹ç™¼ - ä¸Šèª²å¿ƒå¾— (ä¸‹)</title>
			<link>https://jaceju.net/skilltree-tdd-3/</link>
			<pubDate>Sun, 31 May 2015 10:10:10 +0800</pubDate>
			
			<guid>https://jaceju.net/skilltree-tdd-3/</guid>
			<description>ç¬¬ä¸‰é€±æ˜¯é€™é–€èª²ç¨‹çš„æœ€å¾Œä¸€å ‚èª²ï¼Œä¸Šå®Œèª²çš„æˆ‘å¿ƒè£¡å…¶å¯¦æœ‰å¾ˆå¤§çš„è¡æ“Šï¼Œä¸€ç›´ä¸çŸ¥é“è©²æ€éº¼æ•´ç†é€™æœ€å¾Œçš„å¿ƒå¾—ï¼›å°±å¥½åƒç¾å¦™çš„éŸ³æ¨‚æ„Ÿå‹•äº†ä½ çš„å¿ƒéˆï¼Œä½†è‡ªå·±ä¸€æ™‚ä¹‹</description>
			<content type="html"><![CDATA[<p>ç¬¬ä¸‰é€±æ˜¯é€™é–€èª²ç¨‹çš„æœ€å¾Œä¸€å ‚èª²ï¼Œä¸Šå®Œèª²çš„æˆ‘å¿ƒè£¡å…¶å¯¦æœ‰å¾ˆå¤§çš„è¡æ“Šï¼Œä¸€ç›´ä¸çŸ¥é“è©²æ€éº¼æ•´ç†é€™æœ€å¾Œçš„å¿ƒå¾—ï¼›å°±å¥½åƒç¾å¦™çš„éŸ³æ¨‚æ„Ÿå‹•äº†ä½ çš„å¿ƒéˆï¼Œä½†è‡ªå·±ä¸€æ™‚ä¹‹é–“å»å¾ˆé›£é‡ç¾é‚£æ¨£çš„å¼¦å¾‹ã€‚</p>
<p>å‰å…©é€±è¬›å¸«ä»‹ç´¹äº†<a href="http://jaceju.net/2015/05/17/skilltree-tdd/">å–®å…ƒæ¸¬è©¦åŸºç¤</a>ä»¥åŠ<a href="http://jaceju.net/2015/05/23/skilltree-tdd-2/">å¦‚ä½•é‡æ§‹èˆŠæœ‰ç¨‹å¼</a>ä¹‹å¾Œï¼Œä½†æˆ‘å€‘ä¾èˆŠé¢è‡¨äº†ä¸€å€‹å¾ˆå¤§çš„å•é¡Œï¼Œé‚£å°±æ˜¯ï¼šã€Œæˆ‘å€‘å¯«å‡ºä¾†çš„ç¨‹å¼ï¼Œä¸è¦‹å¾—å°±æ˜¯æˆ‘å€‘æ‰€æƒ³çš„ï¼›è€Œå°±ç®—ç¬¦åˆæˆ‘å€‘æƒ³çš„ï¼Œä¹Ÿä¸è¦‹å¾—æ˜¯éœ€æ±‚è¦çš„ã€‚ã€</p>
<pre><code>ã€Œå˜¿ï¼ä½ æ²’ç¡å¥½å—ï¼Ÿä¸Šæ˜ŸæœŸæçš„æœå°‹åŠŸèƒ½ä½ æ‡‰è©²å®Œæˆäº†å§ï¼Ÿã€
ã€Œå—¯ï¼Œæˆ‘æ˜¨å¤©åŠ ç­å®Œæˆäº†ï¼Œé‚„åŠ ä¸Šäº†æ¸¬è©¦ï¼Œæ‡‰è©²å¾ˆå®Œç¾ï¼Œä½ è©¦è©¦ã€‚ã€

ä¸ä¹…å¾Œ...

ã€Œæ€éº¼æˆ‘æœå°‹ã€ç‰¹åƒ¹ã€é€™å€‹å­—ï¼Œæ²’æœ‰å‡ºç¾ç‰¹åƒ¹å•†å“çš„é¡åˆ¥é ï¼Ÿã€
ã€Œä¸æ˜¯å§ï¼Ÿæœå°‹çµæœæ‡‰è©²æ˜¯ç¨ç«‹çš„æœå°‹åˆ—è¡¨å‘€ï¼é€™ä¸æ˜¯ common sense å—ï¼Ÿã€
ã€Œä¸å°ä¸å°ï¼Œä½ æ‡‰è©²åœ¨æˆ‘æœå°‹ã€ç‰¹åƒ¹ã€çš„æ™‚å€™ï¼Œç›´æ¥å°åˆ°ç‰¹åƒ¹å•†å“é å°±å¥½äº†ã€‚ã€
ã€Œé ï¼é€™å…©å›äº‹å§ï¼Ÿè€Œä¸”ä½ çµ¦çš„çš„éœ€æ±‚åªæœ‰æœå°‹å•†å“è€Œå·²ï¼Œå‰©ä¸‹çš„è¦æˆ‘è‡ªå·±è…¦è£œå–”ï¼Ÿã€
</code></pre><p>å¦‚æœé€™ç¨®æˆ²ç¢¼å¸¸å¸¸åœ¨è¾¦å…¬å®¤ä¸Šæ¼”çš„è©±ï¼Œæµªè²»çš„å¯ä¸åªæ˜¯é–‹ç™¼äººå“¡çš„æ™‚é–“å‘€ï¼é¢å°ä¸æ¸…ä¸æ¥šçš„éœ€æ±‚ï¼Œæˆ–æ˜¯é›™æ–¹å°éœ€æ±‚çš„èªçŸ¥ä¸Šæœ‰æ‰€èª¤è§£ï¼Œç”šè‡³é–‹ç™¼äººå“¡ã€Œå–„æ„åœ°ã€åŠ å…¥æ ¹æœ¬ä¸åœ¨éœ€æ±‚è£¡çš„ç¨‹å¼ç¢¼ï¼Œé€™äº›å•é¡Œéƒ½å°‡å¯èƒ½æ‹–å®æ•´å€‹å°ˆæ¡ˆçš„é€²åº¦ï¼</p>
<p>æ‰€ä»¥æœ€å¾Œä¸€é€±ï¼Œè¬›å¸«ç‚ºæˆ‘å€‘å¸¶ä¾†äº†æ•´å¥—èª²ç¨‹çš„é«˜æ½®ï¼šä¸åƒ…åƒ…æ˜¯ä»¥è¦æ ¼ä¾†å®Œæˆç¨‹å¼ç¢¼ï¼Œæ›´èƒ½<strong>ç”¨è¦æ ¼ä¾†è‡ªå‹•é©—è­‰ä½ çš„ç¨‹å¼ç¢¼ï¼</strong></p>
<!-- raw HTML omitted -->
<h2 id="æ¸¬è©¦é©…å‹•äº†é–‹ç™¼é‚£ä»€éº¼é©…å‹•äº†æ¸¬è©¦">æ¸¬è©¦é©…å‹•äº†é–‹ç™¼ï¼Œé‚£ä»€éº¼é©…å‹•äº†æ¸¬è©¦ï¼Ÿ</h2>
<p>è‡ªå¾å¤§å¸«å€‘å° TDD é€²è¡Œä¸€å ´è«–æˆ°å¾Œï¼Œå¾ˆå¤šäººç™¼ç¾è‡ªå·±èª¤è§£äº† TDD çš„çœŸç¾©ï¼Œé‚£å°±æ˜¯ï¼šæ‰€è¬‚çš„æ¸¬è©¦é©…å‹•å¾ä¾†ä¸æ˜¯ç‚ºäº†ã€Œè®“ç³»çµ±å› ç‚ºæœ‰å¯«æ¸¬è©¦è€Œé¡¯å¾—å°ˆæ¥­ã€æˆ–æ˜¯ã€Œå„˜å¯èƒ½å¯«å‡ºå®Œç¾è€Œç¨ç«‹çš„æ¸¬è©¦ç¨‹å¼ã€ï¼Œè€Œæ˜¯ã€Œå¾æœ‰ç›®æ¨™çš„æ¸¬è©¦ä¸­ä¾†å®Œæˆç¨‹å¼ç¢¼ã€ã€‚</p>
<p>TDD é›–ç„¶èƒ½é©…å‹•è‘—é–‹ç™¼è€…å°ˆæ³¨åœ¨æ¸¬è©¦æ‰€åœ¨ä¹çš„ç›®æ¨™ä¸Šï¼Œè®“ç¨‹å¼ç¢¼ä¸æœƒæœ‰éåº¦è¨­è¨ˆçš„å•é¡Œï¼›ä½†ç•¶ç›®æ¨™éŒ¯èª¤çš„è©±ï¼Œå³ä¾¿æ¸¬è©¦å¯«å¾—å†å®Œæ•´ä¹Ÿæ˜¯ç™½æ­ã€‚ç„¶è€Œæ¸¬è©¦çš„ç›®æ¨™åˆ°åº•æ˜¯ä»€éº¼å‘¢ï¼Ÿæƒ³ç•¶ç„¶çˆ¾å°±æ˜¯æˆ‘å€‘çš„éœ€æ±‚è¦æ ¼ï¼›ä¸éé€™å…©è€…ä¹‹é–“é‚„æ˜¯å­˜åœ¨è‘—å·¨å¤§çš„é–€æª»ï¼Œæ‰€ä»¥æˆ‘å€‘è¦é¢å°çš„å•é¡Œæ˜¯ï¼šåˆ°åº•è¦æ€éº¼è®“éœ€æ±‚è½‰æ›æˆæ¸¬è©¦çš„ç›®æ¨™ï¼Ÿè€Œä¸”éš¨è‘—éœ€æ±‚ä¸æ–·åœ°æˆé•·ï¼Œä¹Ÿè¦èƒ½é©…å‹•æˆ‘å€‘çš„æ¸¬è©¦æŒçºŒæ¼”é€²ï¼Ÿ</p>
<h2 id="éœ€æ±‚è©²å¦‚ä½•æè¿°">éœ€æ±‚è©²å¦‚ä½•æè¿°ï¼Ÿ</h2>
<p>ã€Œç¶²ç«™é€™éº¼å¤§ï¼Œä½¿ç”¨è€…å¾ˆé›£ä¸€ä¸‹å­å°±æ‰¾åˆ°ä»–å€‘è¦çš„å•†å“ï¼Œæˆ‘å€‘æ˜¯ä¸æ˜¯æ‡‰è©²æœ‰å€‹æœå°‹å•†å“çš„åŠŸèƒ½ï¼Ÿã€ç•¶å®¢æˆ¶æå‡ºé€™æ¨£çš„éœ€æ±‚æ™‚ï¼Œä»–å€‘é€šå¸¸ä¸æ˜ç™½ä¹Ÿä¸éœ€è¦æ˜ç™½ç¨‹å¼æ˜¯æ€éº¼åšçš„ (ä»–å€‘åªçŸ¥é“é€™æ¨£çš„æè¿°å¯ä»¥è®“å·¥ç¨‹å¸«ç´¯å®) ã€‚ç‚ºäº†é¿å…å®¢æˆ¶èˆ‡å·¥ç¨‹å¸«ä¹‹é–“æœ‰èªçŸ¥ä¸Šçš„è½å·®ï¼Œå°ˆæ¡ˆè² è²¬äºº (PO, Product Owner) å¯èƒ½å°±æœƒæƒ³è¾¦æ³•ç”Ÿå‡ºä¸€å¤§å †æ–‡ä»¶ï¼Œä¾†æè¿°è©³ç´°çš„ç³»çµ±è¦æ ¼ã€‚</p>
<p>ç„¶è€Œæˆ‘å€‘éƒ½çŸ¥é“åœ¨å¤§ç’°å¢ƒçš„è®ŠåŒ–ä¸‹ï¼Œéœ€æ±‚å¯èƒ½æœƒè¢«æ”¹å¾—é¢ç›®å…¨éï¼Œå…ˆå‰å¯«å¥½çš„æ–‡ä»¶å·²ç„¶æˆç‚ºä¸€å †å»¢ç´™ã€‚ç‚ºäº†ä¸è¦å¤§å®¶åšç™½å·¥ï¼Œæ•æ·é–‹ç™¼æå‡ºäº† User Stories é€™å€‹æ–¹å¼ï¼Œè®“çœŸæ­£æœ‰åƒ¹å€¼çš„éœ€æ±‚èƒ½è¢«å…ˆç°¡ç´„åœ°æè¿°å‡ºä¾†ï¼Œè€Œä¸æ˜¯ä¸€é–‹å§‹å°±é™·åœ¨æ–‡ä»¶åœ°ç„è£¡ã€‚</p>
<p>é€šå¸¸ä¸€å€‹ User Story å¯ä»¥ç”¨ä»¥ä¸‹çš„æ ¼å¼ä¾†æè¿°ï¼š</p>
<pre><code>As a &lt;role&gt;, I want to &lt;action&gt; because of &lt;business value&gt;.
(ã€ŒæŸå€‹è§’è‰²ã€å¯ä»¥ã€ŒåšæŸä»¶äº‹ã€ä¾†å¾—åˆ°ã€Œæœ‰å•†æ¥­åƒ¹å€¼çš„çµæœã€)
</code></pre><p>ä¾‹å¦‚ï¼š</p>
<pre><code>ã€Œä½¿ç”¨è€…ã€å¯ä»¥ã€Œè¼¸å…¥é—œéµå­—ã€ä¾†ã€Œæ‰¾å‡ºç«™å…§çš„å•†å“ã€
</code></pre><p>é€™æ¨£å°±æ˜¯ä¸€å€‹ User Story ï¼Œå®ƒæ˜ç™½åœ°æŒ‡å‡ºéœ€æ±‚çš„ç›®æ¨™æ˜¯ä»€éº¼ï¼Œè€Œä¸æœƒåŒ…å«æŠ€è¡“ç´°ç¯€ã€‚åŸºæœ¬ä¸Šï¼Œæˆ‘å€‘å¯ä»¥æŠŠ User Story æƒ³æˆæ˜¯ç”¨ä¾†ç¢ºèªç”¢å“åŠŸèƒ½çš„å¤§ç¶±ï¼Œå¯¦ä½œç´°ç¯€å¯ä»¥åœ¨ä¹‹å¾Œè£œä¸Šï¼Œå°±ä¸æœƒå› ç‚ºéœ€æ±‚çš„è®ŠåŒ–è€Œæµªè²»å¤§å®¶çš„æ™‚é–“ã€‚æ›´è©³ç´°çš„ User Story ä»‹ç´¹å¯ä»¥åƒè€ƒä»¥ä¸‹æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://ihower.tw/blog/archives/2090">User Stories (1) ä»€éº¼æ˜¯ User Story? by ihower</a> (çµæœé€™ç³»åˆ—å¥½åƒå¯Œå¥¸äº†&hellip;)</li>
<li><a href="http://kojenchieh.pixnet.net/blog/post/386322818">æ’°å¯«ä½¿ç”¨è€…æ•…äº‹å¸¸è¦‹çš„å•é¡Œ by David Ko</a></li>
</ul>
<p>ç•¶ç„¶åªé  User Story çš„æè¿°å°é–‹ç™¼è€…ä¾†èªªæ˜¯ä¸å‹å–„çš„ï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦é ä¸€äº›æ–¹æ³•è®“ User Story å’Œæˆ‘å€‘çš„ç¨‹å¼æœ‰æ‰€ç¹«çµï¼›ä¹Ÿå°±æ˜¯èªªæˆ‘å€‘è¦å¾ User Story ä¸­æ‰¾å‡ºæ›´è©³ç´°çš„è¦æ ¼ï¼Œé€²è€Œæ•´åˆåˆ°å‰é¢ TDD çš„æ¸¬è©¦ç›®æ¨™è£¡ã€‚ç•¶é€šéäº†ä»¥è¦æ ¼æ‰€å»ºç«‹å‡ºä¾†çš„æ¸¬è©¦ï¼Œæˆ‘å€‘çš„ç¨‹å¼ç¢¼ä¹Ÿæ‰çœŸæ­£åœ°ç¬¦åˆéœ€æ±‚ã€‚</p>
<p>ç‚ºäº†èƒ½é”åˆ°é–‹ç™¼ã€æ¸¬è©¦èˆ‡éœ€æ±‚ä¸‰ä½ä¸€é«”çš„ç›®æ¨™ï¼Œæ‰€ä»¥ <a href="http://goo.gl/gyuAWY">BDD - Behavior Driven Development (è¡Œç‚ºé©…å‹•é–‹ç™¼)</a> å°±èª•ç”Ÿäº†ã€‚</p>
<h2 id="å‘Šè¨´æˆ‘é€™å€‹åŠŸèƒ½æœƒæ€éº¼è¢«ä½¿ç”¨">å‘Šè¨´æˆ‘ï¼Œé€™å€‹åŠŸèƒ½æœƒæ€éº¼è¢«ä½¿ç”¨</h2>
<p>BDD å®šç¾©äº†éœ€æ±‚æ–¹å¦‚ä½•æ’°å¯« User Story ï¼Œä»¥åŠé–‹ç™¼äººå“¡å¦‚ä½•æŠŠ User Story è½‰æ›æˆæ¸¬è©¦ï¼›æ‰€ä»¥ BDD çš„é‡é»ä¸¦ä¸æ˜¯æ¸¬è©¦ï¼Œè€Œæ˜¯åœ¨å®šç¾©éœ€æ±‚çš„è¦æ ¼ã€‚ BDD åœ¨ä¸åŒçš„ç¨‹å¼èªè¨€ä¸­éƒ½æœ‰å¯¦ä½œï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><a href="http://jbehave.org/">JBehave</a> - Java ä¸Šçš„ BDD æ¡†æ¶ï¼ŒåŒæ™‚ä¹Ÿæ˜¯æœ€æ—©çš„ BDD æ¡†æ¶ã€‚</li>
<li><a href="http://rspec.info/">RSpec</a> - Ruby ä¸Šçš„ BDD æ¡†æ¶ï¼Œä½¿ç”¨ ruby ä¾†ç›´æ¥æè¿°è¦æ ¼ã€‚</li>
<li><a href="http://www.phpspec.net/">PHPSpec</a> - PHP ä¸Šçš„ BDD æ¡†æ¶ï¼Œä½¿ç”¨ php ä¾†ç›´æ¥æè¿°è¦æ ¼ã€‚</li>
<li><a href="https://cucumber.io/">Cucumber</a> - ä¸€å€‹ç”¨ Ruby å¯«çš„ BDD æ¡†æ¶ï¼Œå¾Œä¾†å› ç‚ºæ¨å‡º Cucumber-JVM å¾Œï¼Œè®“å…¶ä»– JVM-based èªè¨€ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚å®ƒçš„ç‰¹è‰²æ˜¯ç”¨æ–‡å­—æ ¼å¼çš„è¦æ ¼æª”æ¡ˆä¾†åŸ·è¡Œæ¸¬è©¦ï¼Œå¾Œä¾†å°±è®Šæˆäº†ä¸€å€‹æ¥­ç•Œéæˆæ–‡çš„æ¨™æº–ï¼Œå¾Œä¾†æœ‰<a href="https://cucumber.io/docs#cucumber-implementations">å¾ˆå¤š BDD æ¡†æ¶</a>å°±åƒè€ƒå®ƒçš„é‹ä½œæ–¹å¼ä¾†å¯¦ä½œäº†ã€‚</li>
<li><a href="http://www.specflow.org/">SpecFlow</a> - .Net ä¸Šçš„ Cucumber å¯¦ä½œï¼ŒåŒæ™‚ä¹Ÿæ˜¯é€™æ¬¡ä¸Šèª²æ‰€ä½¿ç”¨çš„æ¡†æ¶ã€‚</li>
<li><a href="http://behat.org/">Behat</a> - PHP ä¸Šçš„ Cucumber å¯¦ä½œã€‚</li>
</ul>
<p>Cucumber åˆ©ç”¨ <a href="https://github.com/cucumber/cucumber/wiki/Gherkin">Gherkin</a> èªæ³•ä¾†æè¿°éœ€æ±‚è¦æ ¼ï¼Œæ‰€ä»¥å‰é¢çš„ User Story å°±æœƒè®Šæˆä¸€å€‹ feature æª”ï¼š</p>
<pre><code># features/products_searching

Feature: ä½¿ç”¨è€…å¯ä»¥è¼¸å…¥é—œéµå­—ä¾†æ‰¾å‡ºç«™å…§çš„å•†å“
    In order to æ‰¾å‡ºæŒ‡å®šçš„å•†å“
    As a ä½¿ç”¨è€…
    I want to è¼¸å…¥é—œéµå­—
</code></pre><ul>
<li>è¨»ï¼šé€™è£¡æˆ‘ä¸æœƒç”¨èª²ç¨‹è£¡çš„ç¯„ä¾‹ï¼Œä¸€æ˜¯æˆ‘å¸Œæœ›è‡ªå·±æ˜¯çœŸçš„ç†è§£äº† BDD ï¼Œæ‰€ä»¥è‡ªå·±è©¦è‘—å¦‚ä½•å»æ‡‰ç”¨ï¼›äºŒæ˜¯èª²ç¨‹è£¡çš„ç¯„ä¾‹æ›´åŠ æœ‰æŒ‘æˆ°æ€§ï¼Œæˆ‘ä¸æƒ³ç ´äº†è¬›å¸«çš„å“ã€‚</li>
</ul>
<p>æ¥è‘—è¦å®šç¾©å‡ºé€™å€‹éœ€æ±‚çš„ä½¿ç”¨å ´æ™¯ï¼Œä¹Ÿå°±æ˜¯æ›´æ˜ç¢ºåœ°èªªæ˜é€™å€‹éœ€æ±‚çš„åŠŸèƒ½ã€Œè¦æ€éº¼è¢«ä½¿ç”¨ã€ï¼Œæˆ‘å€‘ç¨±ç‚º Scenario ã€‚</p>
<pre><code>Scenario: æœå°‹ &quot;iphone&quot; ï¼Œæ‰¾å‡ºçš„å•†å“åŒ…å«äº† 5 å€‹åç¨±ä¸­ç¬¦åˆ &quot;iphone&quot; çš„å•†å“
    Given åœ¨æœå°‹è¼¸å…¥æ¡†ä¸­è¼¸å…¥ &quot;iphone&quot;
    When æˆ‘æŒ‰ä¸‹æœå°‹æŒ‰éˆ•
    Then åœ¨æœå°‹é å¾—åˆ° 5 å€‹åç¨±ä¸­ç¬¦åˆ &quot;iphone&quot; çš„å•†å“

Scenario: æœå°‹ &quot;ç‰¹åƒ¹&quot; ï¼Œæœƒå°å‘ç‰¹åƒ¹å•†å“æ´»å‹•é 
    Given åœ¨æœå°‹è¼¸å…¥æ¡†ä¸­è¼¸å…¥ &quot;ç‰¹åƒ¹&quot;
    When æˆ‘æŒ‰ä¸‹æœå°‹æŒ‰éˆ•
    Then å°å‘ç‰¹åƒ¹å•†å“æ´»å‹•é 
</code></pre><p>æ¯å€‹ Scenario éƒ½æ˜¯ä¸€æ¢å®Œæ•´çš„åŠŸèƒ½åŸ·è¡Œè·¯å¾‘ï¼Œåªè¦æœ‰è·¯å¾‘åˆ†å‰ (ä¾‹å¦‚ <code>if</code> åˆ¤æ–·) çš„è©±ï¼Œå°±è¦æœ‰ä¸åŒçš„ Scenario ã€‚å…¶ä¸­ Given-When-Then å°±æ˜¯ç”¨ä¾†æè¿°ä¸€å€‹ Scenario çš„ä¸‰è¦è§’ï¼Œå®ƒå€‘çµ„åˆèµ·ä¾†çš„æ„æ€æ˜¯ï¼š</p>
<pre><code>å‡å®š (Given) åœ¨æŸå€‹æ¢ä»¶ä¸‹ï¼Œç•¶ (When) æˆ‘åšäº†æŸå€‹å‹•ä½œï¼Œç„¶å¾Œ (Then) å°±æœƒç™¼ç”Ÿä»€éº¼çµæœã€‚
</code></pre><p>æ˜¯ä¸æ˜¯æœ‰ç¨®æ—¢è¦–æ„Ÿï¼Ÿæ²’éŒ¯ï¼ Given-When-Then å‰›å¥½å°æ‡‰åˆ° 3A åŸå‰‡çš„ï¼š Arrange-Act-Assert ï¼Œæ‰€ä»¥ Scenario å¯ä»¥è¢«è½‰æ›æˆæ¸¬è©¦ï¼</p>
<h3 id="æˆ‘æƒ³ç”¨ä¸­æ–‡">æˆ‘æƒ³ç”¨ä¸­æ–‡</h3>
<p>å‰é¢åœ¨ feature æª”æ¡ˆä¿ç•™è‹±æ–‡å–®å­—ï¼Œæ˜¯ç‚ºäº†è®“ Gherkin çš„èªæ³•è§£é‡‹å™¨èƒ½å¤ è¾¨åˆ¥ï¼›å¦‚æœä¸å–œæ­¡é€™ç¨®å¯«æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸­æ–‡ï¼Œåªè¦åœ¨æª”æ¡ˆé–‹é ­åŠ ä¸Š <code># language: zh-TW</code> å°±å¯ä»¥ã€‚</p>
<p>ç„¶å¾ŒåŸä¾†çš„ feature æª”å°±å¯ä»¥æ”¹æˆï¼š</p>
<pre><code># features/product_searching.feature
# language: zh-TW

åŠŸèƒ½: ä½¿ç”¨è€…å¯ä»¥è¼¸å…¥é—œéµå­—ä¾†æ‰¾å‡ºç«™å…§çš„å•†å“
    ç‚ºäº† æ‰¾å‡ºæŒ‡å®šçš„å•†å“
    èº«ç‚º &quot;ä½¿ç”¨è€…&quot;  # è¨»ï¼šé€™è£¡ä»¥ã€Œè€…ã€çµå°¾çš„è©±åœ¨ behat è£¡æœƒè®Šäº‚ç¢¼ï¼Œæ‰€ä»¥ç‰¹åˆ¥è™•ç†
    æˆ‘è¦ è¼¸å…¥é—œéµå­—

å ´æ™¯: æœå°‹ &quot;iphone&quot; ï¼Œæ‰¾å‡ºçš„å•†å“åŒ…å«äº† 5 å€‹åç¨±ä¸­ç¬¦åˆ &quot;iphone&quot; çš„å•†å“
    å‡å®š åœ¨æœå°‹è¼¸å…¥æ¡†ä¸­è¼¸å…¥ &quot;iphone&quot;
    ç•¶ æˆ‘æŒ‰ä¸‹æœå°‹æŒ‰éˆ•
    é‚£éº¼ åœ¨æœå°‹é å¾—åˆ° 5 å€‹åç¨±ä¸­ç¬¦åˆ &quot;iphone&quot; çš„å•†å“

å ´æ™¯: æœå°‹ &quot;ç‰¹åƒ¹&quot; ï¼Œæœƒå°å‘ç‰¹åƒ¹å•†å“æ´»å‹•é 
    å‡å®š åœ¨æœå°‹è¼¸å…¥æ¡†ä¸­è¼¸å…¥ &quot;ç‰¹åƒ¹&quot;
    ç•¶ æˆ‘æŒ‰ä¸‹æœå°‹æŒ‰éˆ•
    é‚£éº¼ å°å‘ç‰¹åƒ¹å•†å“æ´»å‹•é 
</code></pre><p>è¨»ï¼šé€™è£¡å› ç‚ºæˆ‘æ˜¯ç”¨ Behat ï¼Œæ‰€ä»¥é—œéµå­—çš„éƒ¨ä»½æ˜¯æ¡ç”¨ Behat çš„èªæ³• (å¯ä»¥ç”¨ <code>behat --story-syntax --lang zh-TW</code> çœ‹åˆ°ç¯„ä¾‹) ã€‚</p>
<h2 id="è®“æ¸¬è©¦ç¨‹å¼è·Ÿè‘—éœ€æ±‚è·‘">è®“æ¸¬è©¦ç¨‹å¼è·Ÿè‘—éœ€æ±‚è·‘</h2>
<p>èª²ç¨‹è£¡æ˜¯ä½¿ç”¨ SpecFlow ï¼Œé€™è£¡æˆ‘æ”¹ç”¨ Behat ä¾†ç·´ç¿’ã€‚å…ˆåœ¨å°ˆæ¡ˆè£¡é¢åˆå§‹åŒ– Behat çš„åŸ·è¡Œç’°å¢ƒï¼š</p>
<pre><code>behat --init
</code></pre><p>å®ƒæœƒç”¢ç”Ÿä¸€å€‹ <code>features/bootstrap/FeatureContext.php</code> ï¼Œè€Œå®ƒå°±æ˜¯é€£ç¹« feature å’Œæ¸¬è©¦çš„é—œéµã€‚</p>
<p>å»ºç«‹ä¸€å€‹ <code>features/products_searching.feature</code> æª”ï¼Œç„¶å¾ŒæŠŠå‰é¢å®šç¾©çš„ featrue å…§å®¹è²¼ä¸Šå»ï¼Œæ¥è‘—å†åŸ·è¡Œ <code>behat</code> æŒ‡ä»¤å°±æœƒå¾—åˆ°ä»¥ä¸‹è¼¸å‡ºå…§å®¹ï¼š</p>
<p><img src="/resources/skilltree-tdd/behat-01.png" alt="Behat åŸ·è¡Œçµæœ"></p>
<p>å¯ä»¥çœ‹åˆ° Behat æŠŠ feature æª”è£¡çš„ Given-When-Then éƒ½è®Šæˆäº†æ–¹æ³•ï¼Œå®ƒå€‘ç¨±ç‚º Step Definition ã€‚ Step Definition æ˜¯å¯ä»¥è¢«é‡è¤‡ä½¿ç”¨çš„ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°å…©å€‹ Scenario å…±ç”¨äº†å…¶ä¸­å…©å€‹æ–¹æ³•ã€‚ä¸éå› ç‚º PHP ä¸æ”¯æ´ç”¨ä¸­æ–‡ç•¶åšæ–¹æ³•åç¨±ï¼Œå› æ­¤ Behat å¹«æˆ‘å€‘ç”¨å¾ˆå¥‡æ€ªçš„æ‹¼éŸ³çµ„æˆæ–¹æ³•åç¨±ã€‚</p>
<p>æŠŠ Behat ç”¢ç”Ÿçš„æ–¹æ³•è¤‡è£½åˆ° <code>FeatureContext.php</code> è£¡ï¼Œç„¶å¾ŒæŠŠæ–¹æ³•åç¨±æ”¹æˆæ˜“æ‡‚çš„è‹±æ–‡ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// ... ç•¥ ...
class FeatureContext implements Context, SnippetAcceptingContext
{
    /**
     * @Given åœ¨æœå°‹è¼¸å…¥æ¡†ä¸­è¼¸å…¥ :arg1
     */
    public function typingInSearchField($arg1)
    {
        throw new PendingException();
    }

    /**
     * @When æˆ‘æŒ‰ä¸‹æœå°‹æŒ‰éˆ•
     */
    public function iEnterSearchButton()
    {
        throw new PendingException();
    }

    /**
     * @Then åœ¨æœå°‹é å¾—åˆ° :arg2 å€‹åç¨±ä¸­ç¬¦åˆ :arg1 çš„å•†å“
     */
    public function getProductsThatIncludeInNameOnResultPage($arg1, $arg2)
    {
        throw new PendingException();
    }

    /**
     * @Then å°å‘ç‰¹åƒ¹å•†å“æ´»å‹•é 
     */
    public function redirectToPageOfSpecialOffer()
    {
        throw new PendingException();
    }
}
</code></pre></div><p>æ¥ä¸‹ä¾†å†åŸ·è¡Œä¸€æ¬¡ <code>behat</code> ï¼Œå°±æœƒçœ‹åˆ° Behat è¦æˆ‘å€‘ä¸€æ­¥ä¸€æ­¥å®Œæˆæ¸¬è©¦ç¢¼ï¼š</p>
<p><img src="/resources/skilltree-tdd/behat-02.png" alt="Behat åŸ·è¡Œçµæœ"></p>
<p>é€™å¯¦åœ¨æ˜¯å¤ªé…·äº†ï¼ç¾åœ¨æˆ‘å€‘å·²ç¶“è®“æ¸¬è©¦è·Ÿè¦æ ¼æ–‡ä»¶ç¹«çµåœ¨ä¸€èµ·ï¼Œæƒ³è¦å¢åŠ éœ€æ±‚æˆ–ä¿®æ”¹éœ€æ±‚ï¼Œå°±æ˜¯æ›´æ”¹æ¸¬è©¦æ­¥é©Ÿã€‚è€Œä¸” Scenario ä¹‹é–“é€šå¸¸åªæ˜¯ä¸€å…©å€‹æ­¥é©Ÿçš„è®ŠåŒ–ï¼Œæ‰€æœ‰å·²ç¶“æ¸¬è©¦éçš„æ­¥é©Ÿéƒ½å¯ä»¥é‡è¦†åˆ©ç”¨ï¼›è€Œæˆ‘å€‘è¦åšçš„å°±æ˜¯éš¨è‘—å¢é•·çš„è¦æ ¼ï¼Œè£œä¸Šæ–°å¢çš„ Step Definition å°±å¯ä»¥ï¼</p>
<p>è‡³æ–¼æ€éº¼å¯«æ¸¬è©¦å‘¢ï¼Ÿå…¶å¯¦å°±å’Œå–®å…ƒæ¸¬è©¦å¾ˆåƒï¼Œåªä¸éæ›äº†ä¸€ç¨®å¯«æ³•ï¼Œå‰å…©é€±å­¸çš„éƒ½å¯ä»¥æ‡‰ç”¨åœ¨é€™è£¡é¢ï¼é€™æ¨£çš„é–‹ç™¼æ–¹å¼çœŸå«äººæ¬²ç½·ä¸èƒ½ï¼</p>
<p>è¨»ï¼šå¿ƒå¾—ä¸æ‰“ç®—ä»‹ç´¹å¤ªå¤šå¯¦ä½œï¼Œæœ‰æ©Ÿæœƒæˆ‘å†è£œå…… Behat çš„åšæ³•ã€‚</p>
<h2 id="ä¸å†æ˜¯å°ç«‹è€Œæ˜¯èƒ½ä¸€èµ·é©—æ”¶éœ€æ±‚">ä¸å†æ˜¯å°ç«‹ï¼Œè€Œæ˜¯èƒ½ä¸€èµ·é©—æ”¶éœ€æ±‚</h2>
<p>å®šç¾©å¥½äº† feature æª”ï¼Œæˆ‘å€‘åªè¦æŠŠä¸€å€‹å€‹çš„ Scenario å®Œæˆï¼›å°±åƒé›•åˆ»ä¸€æ¨£ï¼Œä¸€åˆ€ä¸€åˆ€åˆ‡ï¼Œæœ€å¾Œå°±æœƒçœ‹åˆ°å®Œæ•´çš„æˆå“ã€‚è€Œ PO é©—æ”¶å°ˆæ¡ˆæ™‚åªéœ€è¦å°ç…§ feature æ‰€å°æ‡‰çš„æ¸¬è©¦æ˜¯å¦ç‚ºç¶ ç‡ˆï¼Œåªè¦é€šéäº†ï¼Œä¹Ÿå°±æ˜¯ç¬¦åˆéœ€æ±‚ï¼é€™æ¨£ä¸€ä¾†è¾¦å…¬å®¤å°±å†ä¹Ÿä¸æœƒæœ‰åŠæ‹”å¼©å¼µçš„æ°£æ°›äº†ï¼</p>
<p>ç•¶ç„¶ä¸€é–‹å§‹ä¸è¦‹å¾—æœƒé€™éº¼é †åˆ©ï¼Œèº«ç‚º BDD çš„å°å…¥è€…ï¼Œæˆ–è¨±æˆ‘å€‘éœ€è¦èŠ±æ›´å¤šè€å¿ƒä¾†å¼•å° PO å”åŠ©æˆ‘å€‘å»æ’°å¯« Scenario ï¼›ç•¶ä»–æ¼¸æ¼¸ç­è§£é€™æ¨£åšçš„å¥½è™•æ™‚ï¼Œå°±æœƒçŸ¥é“ç”¨é€™å€‹æ–¹å¼èƒ½è®“éœ€æ±‚æ›´å¿«è¢«æ»¿è¶³ã€‚æœªä¾†åªè¦æ•´å€‹åœ˜éšŠèªåŒä¸¦éµå¾ªé€™æ¨£çš„åšæ³•ï¼Œæˆ‘ç›¸ä¿¡ BDD ä¸€å®šèƒ½ç‚ºå°ˆæ¡ˆå¸¶ä¾†è«å¤§çš„ç›Šè™•ã€‚</p>
<h2 id="è®“æ–‡ä»¶æ´»ä¸‹å»">è®“æ–‡ä»¶æ´»ä¸‹å»</h2>
<p>åŸºæœ¬ä¸Šï¼Œ å¤šæ•¸çš„ Developer é€šå¸¸å¾ˆè¨å­ï¼š</p>
<ul>
<li>å¯«æ–‡ä»¶</li>
<li>å¯«è¨»è§£</li>
<li>å¯«æ¸¬è©¦</li>
</ul>
<p>ä½†æ˜¯æ›´è¨å­ï¼š</p>
<ul>
<li>åˆ¥çš„ Developer éƒ½ä¸å¯«æ–‡ä»¶</li>
<li>åˆ¥çš„ Developer éƒ½ä¸å¯«è¨»è§£</li>
<li>åˆ¥çš„ Developer éƒ½ä¸å¯«æ¸¬è©¦</li>
</ul>
<p>ç¾åœ¨æœ‰äº† feature æª”ï¼Œä¹Ÿå°±åŒæ™‚æœ‰äº†æ–‡ä»¶å’Œæ¸¬è©¦ï¼Œæ›´é…·çš„æ˜¯é€™å…©è€…æ˜¯éš¨è‘—ç¨‹å¼ç¢¼ä¸€èµ·æˆé•·çš„ï¼</p>
<p>è€Œé€™é–€èª²æœ€æœ‰åƒ¹å€¼çš„ä¸€ç¯€ï¼Œå°±æ˜¯æ•™ä½ å¦‚ä½•æŠŠ feature åŸ·è¡Œçš„çµæœè½‰æ›æˆ HTML åŠ Word æ–‡ä»¶ï¼Œé€™æ¨£ä¸€ä¾†åªè¦æ­é… CI å°±å¯ä»¥è®“æ‰€æœ‰ä½œæ¥­ä¸€æ°£å‘µæˆï¼é€™æ¨£çš„å¿«æ„Ÿï¼Œæ˜¯å·¥ç¨‹å¸«å¤¢å¯ä»¥æ±‚çš„å‘€ï¼</p>
<p>è©³ç´°æ–¹æ³•ç•¶ç„¶é‚„æ˜¯ä¸Šèª²æ‰æœ‰çš„ç¦åˆ©å›‰ï¼Œè‡³æ–¼ PHP çš„æ–¹æ³•æˆ‘é‚„åœ¨æ‰¾å°‹ä¸­ï¼Œé€™æ™‚å°±ä¸å¾—ä¸èªªå­¸ .Net çš„æœ‹å‹çœŸæ˜¯å¹¸ç¦ã€‚</p>
<h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>ä¸è¦ä¸€ç›´æƒ³è‘—è¦å¯«å‡ºå®Œç¾çš„æ¸¬è©¦ï¼Œå› ç‚ºé‚£é€šå¸¸å·²ç¶“åé›¢äº†çœŸæ­£çš„éœ€æ±‚ã€‚è®“ç¨‹å¼ç¬¦åˆéœ€æ±‚æ‰æ˜¯é–‹ç™¼è€…çš„æœ€çµ‚ç›®æ¨™ï¼Œåªæ˜¯å®Œæ•´è€Œè©³ç´°çš„éœ€æ±‚å»ä¸æœƒè‡ªå·±é•·è…³è·‘ä¾†ã€‚</p>
<p>è®“çœŸæ­£ç­è§£éœ€æ±‚çš„äººå”åŠ©ä½ ä¸€èµ·å®Œæˆè¦æ ¼ï¼Œè®“é€™äº›è¦æ ¼å”åŠ©ä½ å»ºç«‹æ¸¬è©¦ï¼Œè€Œä¸”åŸ·è¡Œæ¸¬è©¦ã€‚æœ€å¾Œæˆ‘å€‘å”¯ä¸€è¦é—œæ³¨çš„ï¼Œå°±æ˜¯å¦‚ä½•å»æ»¿è¶³é€™äº›æ¸¬è©¦çš„ç›®æ¨™ã€‚å°æ•´å€‹åœ˜éšŠä¾†èªªï¼ŒçœŸçš„èƒ½æ”¹å–„ä¸å°‘æµªè²»çš„å•é¡Œã€‚</p>
<p>å¦‚æœæœ‰æ©Ÿæœƒå†é–‹èª²çš„è©±ï¼Œæˆ‘å¼·çƒˆæ¨è–¦å¤§å®¶å ±ååƒåŠ å‘€ï¼è¶•å¿«é—œæ³¨ã€Œ<a href="http://skilltree.my/events/ebg">è‡ªå‹•æ¸¬è©¦èˆ‡ TDD å¯¦å‹™é–‹ç™¼</a>ã€çš„ä¸‹ä¸€æ¢¯èª²ç¨‹å§ï¼</p>
]]></content>
		</item>
		
		<item>
			<title>è‡ªå‹•æ¸¬è©¦èˆ‡ TDD å¯¦å‹™é–‹ç™¼ - ä¸Šèª²å¿ƒå¾— (ä¸­)</title>
			<link>https://jaceju.net/skilltree-tdd-2/</link>
			<pubDate>Sat, 23 May 2015 16:19:43 +0800</pubDate>
			
			<guid>https://jaceju.net/skilltree-tdd-2/</guid>
			<description>æ›¾ç¶“æœ‰å€‹å·¥ç¨‹å¸«å°è‘—å·²ç¶“ä¸Šç·šçš„ç¶²ç«™èªªï¼šã€Œåˆ¥èªªä½¿ç”¨è€…ä¸æ›‰å¾—é€™å€‹ç³»çµ±æ˜¯æ€éº¼é‹ä½œçš„ï¼Œå…¶å¯¦å·²ç¶“æ¥æ‰‹é‚£éº¼ä¹…çš„æˆ‘ä¹Ÿä¸çŸ¥é“ã€‚ã€ å¦‚æœä½ å°é€™å¥è©±å¿ƒæœ‰æˆšæˆšç„‰çš„è©±ï¼Œ</description>
			<content type="html"><![CDATA[<p>æ›¾ç¶“æœ‰å€‹å·¥ç¨‹å¸«å°è‘—å·²ç¶“ä¸Šç·šçš„ç¶²ç«™èªªï¼šã€Œåˆ¥èªªä½¿ç”¨è€…ä¸æ›‰å¾—é€™å€‹ç³»çµ±æ˜¯æ€éº¼é‹ä½œçš„ï¼Œå…¶å¯¦å·²ç¶“æ¥æ‰‹é‚£éº¼ä¹…çš„æˆ‘ä¹Ÿä¸çŸ¥é“ã€‚ã€</p>
<p>å¦‚æœä½ å°é€™å¥è©±å¿ƒæœ‰æˆšæˆšç„‰çš„è©±ï¼Œé‚£ä½ çœŸçš„ä¸å­¤å–®ã€‚å…¶å¯¦æœ‰å¾ˆå¤šç¶­è­·ç¶­è­·å‰äººç¨‹å¼ç¢¼çš„å·¥ç¨‹å¸«åœ¨åœ¨æ¥åˆ°æ–°çš„éœ€æ±‚è€Œå»ä¿®æ”¹ç¨‹å¼ç¢¼æ™‚ï¼Œå¸¸å¸¸æ˜¯å¾ˆæˆ°æˆ°ç«¶ç«¶çš„ï¼Œç„¶å¾Œè¾¦å…¬å®¤è£¡å°±æœƒéŸ¿èµ·é€™æ¨£çš„è²éŸ³ï¼š</p>
<pre><code>ã€Œæˆ‘è¨˜å¾—å‰ä¸€å€‹å·¥ç¨‹å¸«èªªé€™é‚ŠåŠ å¹¾è¡Œç¨‹å¼ç¢¼å°±å¯ä»¥äº†ï¼Œä½ è¦ºå¾—å‘¢ï¼Ÿã€
ã€Œæˆ‘ç›´è¦ºé€™æ¨£æ”¹æœƒå‡ºå•é¡Œ...æœ‰ç’°å¢ƒè®“æˆ‘å…ˆæ¸¬è©¦çœ‹çœ‹å—ï¼Ÿã€
ã€Œå…ˆä¸ç®¡ï¼Œå¾Œå¤©æ´»å‹•è¦ä¸Šäº†ï¼Œä½ å…ˆæ”¹å®Œè®“å®ƒä¸Šç·šå¾Œå†èªªã€‚ã€
ã€Œæ²’æœ‰æ¸¬è©¦çš„è©±...ã€
ã€Œé–‰å˜´ï¼å¿«å»æ”¹ã€‚ã€
ä¸ä¹…å¾Œ...
ã€Œæ…˜äº†ï¼è¨‚å–®å‡ºå¤§å•é¡Œäº†ï¼ä½ å¯ä»¥å…ˆé‚„åŸåŸä¾†çš„ç¨‹å¼ç¢¼å—ï¼Ÿã€
ã€Œä¸å°å‘€ï¼æˆ‘æ”¹é€™é‚Šæ€éº¼æœƒè®“é‚£è£¡å‡ºéŒ¯ï¼Ÿã€
åˆéäº†ä¸€æœƒå…’...
ã€Œä½ æœ‰é‚„åŸå—ï¼Ÿï¼æ•´å€‹è¨‚å–®è³‡æ–™å¤§äº‚äº†å‘€ï¼ä½ ä¸€å®šæœ‰å‹•åˆ°ä»€éº¼æ±è¥¿äº†ï¼ã€
ã€Œæˆ‘å…¨é‚„åŸäº†ï¼ç¾åœ¨è·‘çš„æ˜¯æˆ‘æ²’æ”¹éå‰çš„ç‰ˆæœ¬ï¼ã€
ã€Œä¸ç®¡ï¼åŠ ç­ä¿®å¥½å®ƒï¼ã€
ã€Œæˆ‘ä¸å°±èªªæ²’æ¸¬è©¦çš„è©±æœƒæœ‰å•é¡Œå—ï¼ï¼Ÿç‚ºä»€éº¼ä¸è½ï¼ï¼Ÿã€
ã€Œä½ è€é—†æˆ‘è€é—†ï¼Ÿå†é æ¯è©¦è©¦çœ‹ï¼ã€
ä¸‰å¤©å¾Œ...
ã€Œå¤ äº†ï¼æ‹æ¯èµ°ï¼æˆ‘ä¸æƒ³å†æ”¹é€™å€‹ç³»çµ±äº†ï¼ (æ‘”æ¯å­) ã€
</code></pre><p>å‡è¨­ä»Šå¤©æœ‰æ™‚é–“è®“ä½ èª¿æ•´é€™å€‹ç³»çµ±ï¼Œåœ¨ä¸çŸ¥é“ç·šä¸Šç³»çµ±æ•´é«”å¦‚ä½•é‹ä½œçš„ç‹€æ³ä¸‹ï¼Œä½ æœƒæ€éº¼è®“å®ƒå®¹æ˜“è¢«ç¶­è­·èˆ‡å¢æ·»æ–°åŠŸèƒ½å‘¢ï¼Ÿ</p>
<p>ä¸Šé€±æ‰€ä»‹ç´¹çš„<a href="http://jaceju.net/2015/05/17/skilltree-tdd/">å–®å…ƒæ¸¬è©¦</a>å…¶å¯¦é‚„æ²’è¾¦æ³•å¯ä»¥è®“æˆ‘å€‘ç«‹åˆ»å¥—ç”¨åœ¨é€™æ¨£çš„ç³»çµ±ä¸Šï¼Œæ‰€ä»¥æœ¬é€±èª²ç¨‹çš„é‡é»å°±åœ¨ï¼šå¦‚ä½•ç‚ºå·²ç¶“ä¸Šç·šçš„ legacy code åŠ ä¸Šæ¸¬è©¦ã€‚</p>
<p>ç‚ºäº†é”æˆé€™å€‹ç›®æ¨™ï¼Œè¬›å¸«ä»‹ç´¹äº†å…©å€‹æ‹›å¼ï¼š Web Testing èˆ‡ Refactoring ã€‚ä»¥ä¸‹æˆ‘å°±ä»¥æˆ‘çš„æ–¹å¼ä¾†ä»‹ç´¹æˆ‘æ‰€å­¸åˆ°çš„å¿ƒå¾—ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="web-testing">Web Testing</h2>
<p>çœ‹éè–é¬¥å£«æ˜ŸçŸ¢çš„è©±ï¼Œæ‡‰è©²éƒ½çŸ¥é“é›…å…¸å¨œèªªéï¼šã€Œä½ ä¸æ˜¯é‚„æœ‰ç”Ÿå‘½å—ï¼Ÿã€</p>
<p><img src="/images/athena.jpg" alt="ç„¡è‰¯è€é—†é›…å…¸å¨œ"></p>
<p>é‚£éº¼å›åˆ°å•é¡Œé»ï¼šç¾è¡Œçš„ç³»çµ±æ²’æœ‰æ¸¬è©¦æ€éº¼è¾¦ï¼Ÿ</p>
<p>å°å·¥ç¨‹å¸«ä¾†èªªï¼Œé›…å…¸å¨œçš„è©±å°±è®Šæˆäº†ï¼šã€Œä½ ä¸æ˜¯é‚„æœ‰ç·šä¸ŠåŠŸèƒ½å—ï¼Ÿã€</p>
<p>æ˜¯å‘€ï¼ç•¶ç³»çµ±æ˜¯é»‘ç®±ä½œæ¥­å»æ­£å¸¸é‹ä½œçš„æ™‚å€™ï¼Œæˆ‘å€‘æ˜¯å¾é é¢ (ä»‹é¢) ä¸Šä¾†ç¢ºèªçš„ã€‚æ›å¥è©±èªªï¼Œæ—¢ç„¶æˆ‘å€‘æ“ä½œçš„æ–¹å¼æ˜¯å°çš„ï¼Œè€Œä¸”ç•«é¢æ‰€å¾—åˆ°çµæœä¹Ÿæ˜¯æˆ‘å€‘æ‰€é æœŸçš„ï¼Œé‚£éº¼å°å¤–éƒ¨ä¾†èªªï¼Œé€™å€‹å·²çŸ¥åŠŸèƒ½å°±æ‡‰è©²æ˜¯æ­£ç¢ºçš„ã€‚æ‰€ä»¥æˆ‘å€‘å¯ä»¥å…ˆã€Œå°æ‰€æœ‰æ­£ç¢ºåŸ·è¡Œçš„åŠŸèƒ½å»ºç«‹æ¸¬è©¦ã€ï¼åªè¦åœ¨ä¿®æ”¹ç¨‹å¼ç¢¼å¾Œï¼Œå†è·‘ç›¸åŒçš„æ¸¬è©¦è€Œæ²’æœ‰ç™¼ç”ŸéŒ¯èª¤ï¼Œå°±èƒ½è­‰æ˜æˆ‘å€‘çš„ä¿®æ”¹æ²’æœ‰å½±éŸ¿åˆ°èˆŠæœ‰ç¨‹å¼ç¢¼ã€‚é€™å¯¦åœ¨æ˜¯å¤ªé…·äº†ï¼</p>
<p>å°±ç¶²ç«™ä¾†èªªï¼Œé€™æ¨£çš„å¤–éƒ¨æ¸¬è©¦æ–¹å¼å°±ç¨±ç‚º Web Testing ã€‚è€Œå¦‚æœæ‰€æœ‰çš„æ¸¬è©¦æ˜¯ä»¥è‡ªå‹•åŒ–è…³æœ¬çš„å½¢å¼å­˜åœ¨ï¼Œè®“æˆ‘å€‘æ¯æ¬¡ä¿®æ”¹å®Œç¨‹å¼ç¢¼å¾Œï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä¸€æ¬¡å…¨éƒ¨åŸ·è¡Œçš„è©±å°±å¤ªå¥½äº†ã€‚æœ€é‡è¦çš„ï¼Œå°±æ˜¯è¦æœ‰å·¥å…·èƒ½å¹«æˆ‘å€‘ç”¢ç”Ÿé€™æ¨£çš„è…³æœ¬ï¼è€Œé€™ç¨®ç¥ä¸€èˆ¬çš„å·¥å…·ï¼Œå°±é Selenium è«å±¬äº†ã€‚</p>
<h3 id="selenium">Selenium</h3>
<p>Selenium æ˜¯ä¸€å€‹è®“ç€è¦½å™¨è‡ªå‹•åŒ–åŸ·è¡Œä½¿ç”¨è€…æ“ä½œæµç¨‹çš„å·¥å…·ï¼Œé€šå¸¸ç”¨ä¾†ç•¶åšæ¸¬è©¦çš„ç”¨é€”ã€‚å®ƒä¸»è¦åŸç†æ˜¯åˆ©ç”¨ Selenium IDE å°‡ä½¿ç”¨è€…æ“ä½œçš„éç¨‹éŒ„è£½ä¸‹ä¾†ï¼Œä¸¦é€é Selenium IDE æˆ– Selenium WebDriver åŸ·è¡Œè©²è…³æœ¬ï¼Œè®“ç€è¦½å™¨è‡ªå‹•é‡ç¾ä½¿ç”¨è€…æ“ä½œéç¨‹ã€‚è€Œå®ƒé™¤äº†è®“ä½¿ç”¨è€…æ“ä½œçš„æµç¨‹è‡ªå‹•åŒ–ä¹‹å¤–ï¼Œæœ€å²å®³çš„åœ°æ–¹æ˜¯èƒ½å¤ æŠŠéŒ„è£½ä¸‹ä¾†çš„è…³æœ¬è½‰æ›æˆä¸åŒçš„ç¨‹å¼èªè¨€æ ¼å¼ï¼Œèå…¥åˆ°å„èªè¨€çš„è‡ªå‹•æ¸¬è©¦æ¡†æ¶è£¡ã€‚</p>
<p>ç°¡å–®ä»‹ç´¹ Selenium å¹¾å€‹è¦è§’ï¼š</p>
<ol>
<li>Selenium IDE ï¼š Firefox çš„ Add-on ï¼Œç”¨ä¾†éŒ„è£½ä½¿ç”¨è€…åœ¨æ“ä½œé é¢æ™‚æ‰€æœ‰çš„å‹•ä½œèˆ‡è¼¸å…¥ï¼Œä¸¦ä¸”é©—è­‰è¼¸å‡ºçµæœæ˜¯å¦ç¬¦åˆé æœŸã€‚è€Œå®ƒçš„é‡æ’­åŠŸèƒ½é™¤äº†è®“é–‹ç™¼è€…å¿«é€Ÿé©—è­‰åŠŸèƒ½å¤–ï¼Œç”¨ä¾†è£½ä½œèªªæ˜æ–‡ä»¶è£¡çš„æ“ä½œç¯„æœ¬ä¹Ÿç›¸ç•¶é©åˆã€‚</li>
<li>Selenium WebDriver ï¼šå‘Šè¨´ä½¿ç”¨è€…çš„ IDE (ä¾‹å¦‚ Visual Studio) æˆ– Selenium Server å¦‚ä½•å•Ÿå‹•ä¸åŒç€è¦½å™¨çš„ä¸­ä»‹å±¤ã€‚å¸¸ç”¨çš„ WebDriver åŒ…å«äº† IE ã€ Firefox ã€ Chrome ã€ PhantomJS ç­‰ã€‚ (åŸå Selenium Remote Control)</li>
<li>Selenium Server (é¸å‚™) ï¼šç”¨ Java å¯«çš„ Daemon æœå‹™ï¼›å¦‚æœä½ çš„é–‹ç™¼ç’°å¢ƒå’Œæ¸¬è©¦ç”¨çš„ç€è¦½å™¨ä¸åœ¨åŒä¸€å°æ©Ÿå™¨ä¸Šï¼Œæˆ–æ˜¯æŸäº›ç„¡æ³•ç›´æ¥å•Ÿå‹•ç€è¦½å™¨çš„ç‹€æ³ä¸‹ï¼Œä½ å¯èƒ½æœƒéœ€è¦é€é Selenium Server ä¾†å”åŠ© WebDriver å•Ÿå‹•æ¸¬è©¦ç”¨çš„ç€è¦½å™¨ã€‚ (åŸå Selenium RC Server)</li>
</ol>
<p>è¨»ï¼šç”±æ–¼èª²ç¨‹æ˜¯ä½¿ç”¨ Visual Studio ä¾†åšæœ¬æ©Ÿé–‹ç™¼èˆ‡æ¸¬è©¦ï¼Œæ‰€ä»¥åªè¦ç”¨ Nuget å®‰è£ Selenium WebDriver å¥—ä»¶å³å¯ï¼Œä¸éœ€è¦ Selenium Server ã€‚</p>
<p>æ•´å€‹ Selenium çš„ä½¿ç”¨æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>åœ¨ Firefox ä¸Šå®‰è£ <a href="http://release.seleniumhq.org/selenium-ide/2.9.0/selenium-ide-2.9.0.xpi">Selenium IDE</a> ã€‚</li>
<li>è¦–é–‹ç™¼ç’°å¢ƒæ±ºå®šæ˜¯å¦è¦å•Ÿå‹• Selenium Server ï¼Œæˆ–ä½¿ç”¨æ•´åˆå¼çš„ Selenium WebDriver ã€‚å¦‚æœæ˜¯ PHP çš„è©±ï¼Œä¸è«–æ˜¯ä¸æ˜¯åœ¨æœ¬æ©ŸåŸ·è¡Œï¼Œéƒ½ä¸€å®šè¦å•Ÿå‹• Selenium Server ã€‚</li>
<li>å•Ÿå‹• Web æœå‹™ï¼Œè®“ Firefox é€£ä¸Šæ¸¬è©¦ç¶²ç«™ã€‚</li>
<li>é‡å°æ‰€æœ‰åŠŸèƒ½éŒ„è£½æ¸¬è©¦è…³æœ¬ (åŒ…å«æ“ä½œæµç¨‹èˆ‡çµæœé©—è­‰) ã€‚</li>
<li>é‡è·‘æ‰€æœ‰è…³æœ¬ï¼Œç¢ºèªæ²’æœ‰æ“ä½œä¸Šçš„å•é¡Œã€‚</li>
<li>åˆ©ç”¨ Selenium çš„ Formatter å¤–æ›ï¼Œå°‡ Selenium IDE è…³æœ¬è½‰æ›æˆå°æ‡‰çš„ç¨‹å¼èªè¨€è‡ªå‹•åŒ–æ¸¬è©¦æ¡†æ¶çš„ç¨‹å¼ç¢¼ã€‚</li>
<li>è®“è‡ªå‹•åŒ–æ¸¬è©¦æ¡†æ¶é€é Selenium WebDriver ä¾†å®Œæ•´åŸ·è¡Œæ‰€æœ‰çš„ Selenium æ¸¬è©¦è…³æœ¬ï¼Œä¸¦ç¢ºèªå„ç€è¦½å™¨æœ‰è¢«æ­£å¸¸é–‹å•Ÿã€‚</li>
<li>æ¥ä¸‹ä¾†å°±å¯ä»¥ç¹¼çºŒå¾ŒçºŒç¨‹å¼çš„æ–°å¢åŠŸèƒ½æˆ–é‡æ§‹äº†ã€‚</li>
</ol>
<p>è€Œ Selenium WebDriver è©³ç´°çš„ä½¿ç”¨æ–¹å¼åœ¨ä¸åŒçš„èªè¨€æœ‰ä¸åŒçš„ä½œæ³•ï¼Œè«‹åˆ†åˆ¥åƒè€ƒæˆ‘å…©ä½å¥½å‹çš„ä»‹ç´¹ï¼š</p>
<ul>
<li>Vistual Studio èµ°é€™é‚Šï¼š <a href="http://goo.gl/uIFwD">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD]Integration Testing &amp; Web UI Testing by Joey Chen</a> (ä½œè€…åå­—å¾ˆç†Ÿå°ä¸å°ï¼Ÿ)</li>
<li>PHP èµ°é€™é‚Šï¼š<a href="https://www.youtube.com/watch?v=CtsH1n5-Xcc&amp;hd=1">PHP ä¹Ÿæœ‰Day #13 - å¦‚ä½•ä½¿ç”¨ Selenium æå®šå‰ç«¯æ¸¬è©¦ by Ricky Su</a></li>
</ul>
<p>è¨»ï¼šä¹‹å‰æˆ‘ä¹Ÿå¯«é <a href="http://jaceju.net/2010/07/12/1293/">Web UI æ¸¬è©¦çš„å¥½å¹«æ‰‹ - Selenium</a> ï¼Œé›–ç„¶å…§å®¹æœ‰é»èˆŠï¼Œä½†åŸç†æ²’å·®å¤ªå¤šã€‚</p>
<h3 id="å¸¸è¦‹çš„å•é¡Œ">å¸¸è¦‹çš„å•é¡Œ</h3>
<p>åƒ Web Testing é€™ç¨®ç”±å¤–éƒ¨å»ºç«‹æ¸¬è©¦çš„æ–¹æ³•ï¼Œé›–ç„¶åœ¨é‡åˆ°å¤§å¤šæ•¸æ²’æœ‰æ’°å¯«æ¸¬è©¦çš„ legacy ç³»çµ±æ™‚éå¸¸æœ‰ç”¨ï¼Œä½†ä¹Ÿä¸èƒ½èªªæ¯«ç„¡ç¼ºé»ã€‚ç•¶ç³»çµ±å°ç’°å¢ƒä¾è³´åº¦ç›¸ç•¶é«˜æ™‚ï¼Œæƒ³é‡å»ºä¸€å€‹ä¾›æ¸¬è©¦ç”¨çš„ç³»çµ±æœƒè®Šå¾—éå¸¸å›°é›£ï¼Œè€Œé€™é€šå¸¸ä¹Ÿæ˜¯å¿…é ˆå…ˆå…‹æœçš„å•é¡Œä¹‹ä¸€ã€‚</p>
<p>ç„¶å¾Œè¦æ¨¡ç¨å¤§ï¼ŒåŠŸèƒ½é»è¼ƒå¤šçš„ç¶²ç«™å°±æœƒé¢è‡¨ç¬¬äºŒå€‹å•é¡Œï¼šã€Œèª°ä¾†éŒ„æ“ä½œæµç¨‹ï¼Ÿã€ç­”æ¡ˆå¾ˆç°¡å–®ï¼šç•¶ç„¶ä¸æ˜¯å·¥ç¨‹å¸«ã€‚é€šå¸¸ legacy ç³»çµ±ä¸€å®šæœƒæœ‰ç­è§£å®ƒæ˜¯å¦‚ä½•ä½¿ç”¨çš„äººï¼Œé€™æ™‚å€™å¿…é ˆå€Ÿé‡è€é—†çš„å½±éŸ¿åŠ›ï¼Œæƒ³è¾¦æ³•è®“é€™äº›äººèƒ½å¤ å”åŠ©åˆ—å‡ºç³»çµ±æ‰€æœ‰çš„åŠŸèƒ½æµç¨‹ã€‚</p>
<p>ç”±æ–¼ Selenium IDE éå¸¸æ˜“ç”¨ï¼Œå¯ä»¥å…ˆèŠ±é»æ™‚é–“æ•™æœƒé€™äº›äººå­¸ç¿’æ€éº¼éŒ„è£½æ“ä½œæµç¨‹ã€‚æ¥ä¸‹ä¾†è«‹ä»–å€‘åœ¨é‚Šåˆ—åŠŸèƒ½æ™‚ï¼Œé †æ‰‹å°‡æµç¨‹éŒ„è£½èµ·ä¾†ï¼›é€™æ¨£ä¸€ä¾†ç•¶åŠŸèƒ½åˆ—å®Œçš„åŒæ™‚ï¼Œå°±æœ‰å®Œæ•´çš„æ¸¬è©¦å¯ä»¥ä½¿ç”¨ï¼Œé‚„é †ä¾¿å¸¶æœ‰æ“ä½œç¤ºç¯„å‘¢ã€‚</p>
<p>å¦å¤–è‹¥æ˜¯éŒ¯èª¤çš„æ“ä½œæœƒè®“ç¨‹å¼å‡ºç¾éé æœŸçš„çµæœçš„è©±ï¼Œå°±æ‡‰è©²æ­¸é¡åœ¨åŸæœ¬å°±æœ‰çš„ bug ã€‚ä½†é€™ä¹Ÿè¡¨ç¤ºæˆ‘å€‘çŸ¥é“æœ‰é€™å€‹æ“ä½œæµç¨‹æ‡‰è©²è¦è¢«é¿å…ï¼Œå› æ­¤ä¹Ÿè¦ç‰¹åˆ¥ç‚ºå®ƒå»ºç«‹ä¸€çµ„æ¸¬è©¦ï¼›ä¸€ä¾†å¯ä»¥åœ¨ä¿®æ”¹ç¨‹å¼å¾Œé€éé€™çµ„æ¸¬è©¦ç¢ºèªç¨‹å¼çš„ä¿®æ”¹æ˜¯æ­£ç¢ºçš„ï¼ŒäºŒä¾†ä¹Ÿç¢ºä¿æœªä¾†ä¸æœƒå†è®“é€™å€‹éŒ¯èª¤ç™¼ç”Ÿã€‚å°±åƒã€ŒåŒæ¨£çš„æ‹›å¼ä¸èƒ½å°è–é¬¥å£«ä½¿ç”¨ç¬¬äºŒæ¬¡ã€ï¼ŒåŒæ¨£çš„ bug ä¹Ÿä¸è©²åœ¨ç³»çµ±ä¸Šç™¼ç”Ÿç¬¬äºŒæ¬¡ã€‚</p>
<h3 id="fluentautomation-å¾æ„›é–‹å§‹">FluentAutomation å¾æ„›é–‹å§‹</h3>
<p>Seleinum WebDriver ç¨‹å¼ç¢¼å¥½é›£çœ‹æ‡‚æ€éº¼è¾¦ï¼Ÿå¦‚æœæœªä¾†æˆ‘åŠ æ–°åŠŸèƒ½è€Œæ²’è¾¦æ³•éŒ„è£½è…³æœ¬æ™‚ï¼Œè¦ç…§è‘—é€™æ¨£å¯«æ¸¬è©¦å—ï¼Ÿç•¶ç„¶ä¸ï¼æˆ‘å€‘éœ€è¦è®“æ¸¬è©¦è…³æœ¬è®Šå¾—æŠ½è±¡åŒ–ä¸€äº›ï¼Œçœ‹èµ·ä¾†å°±åƒæ˜¯ç”¨äººè©±åœ¨æè¿°è¦æ ¼ä¸€æ¨£ã€‚</p>
<p>åˆæ˜¯å€Ÿé‡å¥½ç”¨å·¥å…·çš„æ™‚åˆ»ï¼Œåœ¨å¾®è»Ÿé«”ç³»ä¸Šæœ‰å€‹å¥½ç”¨çš„ <a href="http://fluent.stirno.com/">FluentAutomation</a> ç¬¬ä¸‰æ–¹å¥—ä»¶ï¼Œå°±æ˜¯èƒ½å°‡ Selenium è…³æœ¬èªæ³•åŒ…è£èµ·ä¾†çš„èªç¾©åŒ–æ¡†æ¶ã€‚</p>
<p>ä¾‹å¦‚æˆ‘å€‘æœ‰é€™æ¨£çš„è¦æ ¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="c1">// ç™»å…¥æˆåŠŸ
</span><span class="c1"></span>    <span class="c1">// æˆ‘æ‰“é–‹ Login çš„ç¶²é 
</span><span class="c1"></span>    <span class="c1">// åœ¨ id è£¡é¢è¼¸å…¥ user
</span><span class="c1"></span>    <span class="c1">// åœ¨ password è£¡é¢è¼¸å…¥ pass
</span><span class="c1"></span>    <span class="c1">// æŒ‰ä¸‹ç™»å…¥
</span><span class="c1"></span>    <span class="c1">// æœŸæœ›æ‡‰è©²å°åˆ°é¦–é 
</span></code></pre></div><p>ç”¨ FluentAutomation å¯«å‡ºä¾†çš„è©±ï¼Œå°±æœƒæ˜¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-csharp" data-lang="csharp"><span class="k">private</span> <span class="kt">string</span> <span class="n">baseUrl</span> <span class="p">=</span> <span class="s">@&#34;http://localhost:29021/&#34;</span><span class="p">;</span>
<span class="na">
</span><span class="na">[TestMethod]</span>
<span class="k">public</span> <span class="k">void</span> <span class="n">TestLoginSuccess</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Open</span><span class="p">(</span><span class="n">baseUrl</span> <span class="p">+</span> <span class="s">&#34;login&#34;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">Enter</span><span class="p">(</span><span class="s">&#34;user&#34;</span><span class="p">).</span><span class="n">In</span><span class="p">(</span><span class="s">&#34;#id&#34;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">Enter</span><span class="p">(</span><span class="s">&#34;pass&#34;</span><span class="p">).</span><span class="n">In</span><span class="p">(</span><span class="s">&#34;#password&#34;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">Click</span><span class="p">(</span><span class="s">&#34;input[type=\&#34;submit\&#34;]&#34;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">Assert</span><span class="p">.</span><span class="n">Url</span><span class="p">(</span><span class="n">baseUrl</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>å› ç‚ºæ¸¬è©¦çš„ä¸»è§’æ˜¯ã€Œæˆ‘ã€ï¼Œæ‰€ä»¥ä¸€åˆ‡å¾ <code>I</code> é–‹å§‹ï¼›è€Œæ¸¬è©¦çš„å°è±¡æ˜¯ã€Œç¶²é ã€ï¼Œæ‰€ä»¥æˆ‘å€‘æœƒæœ‰ <code>Open</code> (é–‹å•Ÿç¶²å€) / <code>Enter</code> (è¼¸å…¥) / <code>Click</code> (é»æ“Š) ç­‰æ“ä½œæ–¹å¼ï¼›æœ€å¾Œå†ä½¿ç”¨ <code>Assert</code> ä¾†é©—è­‰ç•«é¢è¼¸å‡ºæ˜¯å¦å¦‚æˆ‘å€‘æ‰€é æœŸã€‚æ•´æ®µç¨‹å¼ç¢¼æ˜¯ä¸æ˜¯çœ‹èµ·ä¾†æ›´èªæ„åŒ–å‘¢ï¼Ÿ</p>
<p>é™¤äº†èªæ³•æ›´ç‚ºæŠ½è±¡ä¹‹å¤–ï¼Œ FluentAutomation åŸ·è¡Œçš„çµæœå…¶å¯¦å’Œ Selenium WebDriver æ˜¯ä¸€æ¨£çš„ã€‚ FluentAutomation èƒ½è®“é–‹ç™¼è€…èå…¥æ¸¬è©¦çš„æƒ…å¢ƒä¸­ï¼Œå¾ä½¿ç”¨è€…è¡Œç‚ºçš„è§’åº¦å‡ºç™¼å»çœ‹å¾…ç³»çµ±åŠŸèƒ½ã€‚ä¸€åˆ‡å°±åƒç”¨äººè©±åœ¨èªªæ˜åŠŸèƒ½ï¼Œçœ‹èµ·ä¾†å°±æ˜¯é€™éº¼è‡ªç„¶ã€‚</p>
<p>è¨»ï¼š FluentAutomation ä¹Ÿ<a href="http://fluent.stirno.com/docs/#multi-browser">æ”¯æ´å¤šç¨®ä¸åŒç€è¦½å™¨</a>åŒæ™‚æ¸¬è©¦ï¼Œç›¸é—œçš„èªªæ˜è«‹åƒè€ƒ<a href="http://fluent.stirno.com/docs/">å®˜æ–¹æ–‡ä»¶</a>ã€‚</p>
<p>è¨»ï¼š PHP ä¹Ÿæœ‰é¡ä¼¼çš„æ¡†æ¶ï¼Œæ˜¯åŒ…å«åœ¨ <a href="http://codeception.com/">Codeception</a> çš„ <a href="http://codeception.com/docs/modules/WebDriver">WebDriver</a> æ¨¡çµ„ä¸­ã€‚</p>
<h3 id="page-objects-pattern">Page Objects Pattern</h3>
<p>èª²ç¨‹ä¸­ä»‹ç´¹å¦ä¸€å€‹æˆ‘è¦ºå¾—å¾ˆæ£’çš„è§€å¿µæ˜¯ï¼Œé›–ç„¶åŠŸèƒ½æ˜¯ä¸€æ¨£çš„ï¼Œä½†å¦‚æœé é¢çµæ§‹èª¿æ•´äº†æ€éº¼è¾¦ï¼Ÿé€™æ™‚å€™å°±è¦ç”¨åˆ°ç‰©ä»¶å°å‘æœ€é‡è¦çš„è§€å¿µï¼šå°è£è®ŠåŒ–ã€‚</p>
<p>Page Objects Patterns æŠŠé é¢ç•¶æˆæ˜¯ä¸€å€‹ç‰©ä»¶ï¼Œåªè®“å®ƒéœ²å‡ºå¿…è¦çš„è¡Œç‚ºï¼Œè®“æˆ‘å€‘çš„ä¸»è¦æµç¨‹åªæè¿°å¦‚ä½•è·Ÿé€™å€‹é é¢äº’å‹•ï¼Œè€Œä¸åœ¨ä¹å®ƒé é¢ä¸Šçš„ç´°ç¯€ã€‚é€™æ¨£ä¸€ä¾†ä¸ç®¡é é¢çµæ§‹æ€éº¼è®ŠåŒ–ï¼Œåªè¦ä¸»è¦åŠŸèƒ½ä¸è®Šï¼Œæˆ‘å€‘éƒ½åªéœ€è¦ä¿®æ”¹é€™å€‹ Page Object å°±å¥½ã€‚</p>
<p>Page Objects åœ¨ FluentAutomation çš„å¯¦ä½œç¯„ä¾‹å¯ä»¥åƒè€ƒå®˜æ–¹èªªæ˜çš„ <a href="http://fluent.stirno.com/docs/#pageobjects">PageObjects</a> ä¸€ç¯€ã€‚</p>
<p>åŒæ¨£åœ°åœ¨ PHP çš„ Codeception ä¹Ÿæ”¯æ´ Page Objects Patterns ï¼Œè«‹åƒè€ƒ <a href="http://codeception.com/docs/07-AdvancedUsage#PageObjects">PageObjects</a> ä¸€ç¯€ã€‚</p>
<h2 id="refactoring">Refactoring</h2>
<p>å‡è¨­æˆ‘å€‘å·²ç¶“æœ‰äº† Web Testing ä¾†ç¢ºä¿æˆ‘å€‘çš„åŠŸèƒ½éƒ½ç¶“éäº†å¤–éƒ¨æ¸¬è©¦ï¼Œé‚£éº¼æˆ‘å€‘å°±æœ‰æ©Ÿæœƒå°å®ƒé€²è¡Œé‡æ§‹äº†ã€‚</p>
<p>èª²ç¨‹ä¸­çš„ç¯„ä¾‹å¯ä»¥èªªæ˜¯é€™å…©é€±èª²ç¨‹çš„ç²¾è¯å‘€ï¼Œå¾ä¸€å€‹å¾ˆé›£æ’¼å‹•çš„ç¨‹å¼ç¢¼ï¼Œä¸€æ­¥ä¸€æ­¥é‡æ§‹æˆåŒ…å«äº† Web Testing å’Œå–®å…ƒæ¸¬è©¦çš„å¯ç¶­è­·å¯æ“´å……æ¶æ§‹ã€‚</p>
<p>é€™è£¡å¾ˆé›£æŠŠå®ƒç”¨ä¸‰è¨€å…©è¨€å®Œæ•´æè¿°å‡ºä¾†ï¼Œæ•æˆ‘å·æ‡¶ä¸€ä¸‹ï¼Œé€™è£¡è«‹ç›´æ¥åƒè€ƒè¬›å¸«ä»¥å‰å¯«çš„ 30 å¤©å¿«é€Ÿä¸Šæ‰‹ TDD ä¹‹é‡æ§‹ç³»åˆ—æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://goo.gl/59rTl">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD][Day 9]Refactoring legacy code ç°¡ä»‹</a></li>
<li><a href="http://goo.gl/4zdts">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD][Day 10]Refactoring èµ·æ‰‹å¼ - å»ºç«‹æ¸¬è©¦</a></li>
<li><a href="http://goo.gl/LWUDp">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD][Day 11]Refactoring - è®“ç¨‹å¼ç¢¼èªªè©±</a></li>
<li><a href="http://goo.gl/U3nvF">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD][Day 12]Refactoring - è·è²¬åˆ†é›¢</a></li>
<li><a href="http://goo.gl/zRgyy">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD][Day 13]Refactoring - å‘Šè¨´æˆ‘ï¼Œä½ è¦ä»€éº¼</a></li>
<li><a href="http://goo.gl/A7EnM">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD][Day 14]Refactoring - é©—è²¨</a></li>
<li><a href="http://goo.gl/xMt7p">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD][Day 15]Refactoring - é£Ÿç¥æ­¸ä½</a></li>
<li><a href="http://goo.gl/gcylXL">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD][Day 16]Refactoring - ä»‹é¢å°å‘</a></li>
<li><a href="http://goo.gl/2THME">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD][Day 17]Refactoring - Strategy Pattern</a></li>
<li><a href="http://goo.gl/vyHtI">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD][Day 18]Refactoring - Factory Pattern</a></li>
<li><a href="http://goo.gl/yzsQc">[30å¤©å¿«é€Ÿä¸Šæ‰‹TDD][Day 19]Refactoring - The End is the Beginning</a></li>
</ul>
<p>ç°¡å–®èªªæ˜ä¸€ä¸‹æ•´å¥—é‡æ§‹æµç¨‹çš„é‡é»ï¼š</p>
<ol>
<li>ç”¨ Selenium éŒ„ä¸‹ä½ çš„ Web æ¸¬è©¦ï¼Œè¶Šå®Œæ•´è¶Šå¥½ï¼Œè€Œä¸”è®“å®ƒå¯ä»¥éš¨æ™‚åŸ·è¡Œã€‚</li>
<li>ç†è§£ä½ è¦é‡æ§‹çš„ legacy ç¨‹å¼ç¢¼æ„åœ–ï¼ŒæŠŠè¨»è§£è£œä¸Šå»ã€‚ä¸ç”¨ç®¡ç´°ç¯€ï¼Œåªè¦çŸ¥é“æŸæ®µç¨‹å¼æ‰“ç®—åšä»€éº¼å°±å¥½ã€‚</li>
<li>é‡æ§‹ï¼šæƒ³è¾¦æ³•æŠŠé‚è¼¯å’Œ UI åˆ†é›¢é–‹ä¾†ï¼Œé€™å€‹å¯èƒ½æœƒå› ç‚ºèªè¨€æˆ–æ¡†æ¶çš„ä¸åŒè€Œæœ‰ä¸åŒçš„åšæ³•ã€‚</li>
<li>é‡æ§‹ï¼šæ‡‰ç”¨å¸¸ç”¨çš„ Extract Method æŠ€å·§ä¾†å°‡ç¨‹å¼ç¢¼æ‹†åˆ†å‡ºæ˜“æ‡‚çš„æ–¹æ³•ã€‚</li>
<li>é‡æ§‹ï¼šä¾ç…§è·è²¬åˆ†é›¢çš„åŸå‰‡ï¼ŒæŠŠå‰›å‰›åˆ†é›¢å‡ºä¾†çš„æ–¹æ³•å¼•åˆ°æ–°çš„é¡åˆ¥ä¸­ã€‚</li>
<li>ç¨ç«‹å‡ºé¡åˆ¥å¾Œï¼Œå°±å¯ä»¥æŠŠå–®å…ƒæ¸¬è©¦è£œä¸Šå»äº†ã€‚æ¥è‘—æ‰€æœ‰æ¸¬è©¦éƒ½è·‘è·‘çœ‹å§ã€‚</li>
<li>é‡æ§‹ï¼šç‚ºå„ç›¸ä¼¼çš„é¡åˆ¥æŠ½å‡ºä»‹é¢ (Interface) ï¼Œè®“ä¸»ç¨‹å¼å»ä¾è³´ä»‹é¢ï¼Œè€Œä¸è¦ä¾è³´å‰›å‰›çš„é¡åˆ¥ã€‚</li>
<li>é‡æ§‹ï¼šåœ¨æŠ½å‡ºä»‹é¢å¾Œï¼Œåˆ©ç”¨ Factory Method å°‡ç”Ÿæˆç‰©ä»¶ (<code>new</code>) çš„è·è²¬ç¨ç«‹å‡ºå»ã€‚</li>
</ol>
<p>è¦ç‰¹åˆ¥è¨˜ä½ï¼š</p>
<ul>
<li>æ¯ä¸€æ­¥é‡æ§‹å¾Œéƒ½è¦æ¸¬è©¦ï¼Œè€Œä¸”åªè¦æ¸¬è©¦æ˜¯ç¶ ç‡ˆï¼Œéƒ½æ˜¯æ‡‰è©²æ˜¯èƒ½å¤ ä¸Šç·šçš„ç‹€æ…‹ã€‚</li>
<li>é€šéæ¸¬è©¦å¾Œï¼Œå°±æŠŠç¨‹å¼ç¢¼ commit åˆ° VCS è£¡ï¼Œåˆ¥å·æ‡¶ã€‚</li>
<li>é‡æ§‹åœ¨æ¬ç§»ç¨‹å¼ç¢¼æ™‚ï¼Œåªä¿®æ”¹ context ï¼Œè€Œä¸è¦ä¿®æ”¹æµç¨‹çµæ§‹ã€‚</li>
<li>ä¿®æ”¹æµç¨‹çµæ§‹ (ä¾‹å¦‚ <code>if</code> æ›æˆ <code>switch</code> ) è¦è‡ªæˆä¸€å€‹é‡æ§‹ã€‚</li>
</ul>
<h3 id="é¿å…å¢åŠ ä¸­ä»‹å±¤çš„ç¨ç«‹æ¸¬è©¦">é¿å…å¢åŠ ä¸­ä»‹å±¤çš„ç¨ç«‹æ¸¬è©¦</h3>
<p>é€™æ®µæ˜¯è¬›å¸«çš„å£“ç®±å¯¶ï¼Œæ“šèªªæ˜¯é€™æ¬¡èª²ç¨‹æ‰åŠ å…¥çš„ï¼Œæœ‰è½æœ‰è³ºåˆ°ã€‚</p>
<p>é€™é‚Šæˆ‘æ‰“ç®—ç”¨ä¸€å¥è©±ä¾†å¸¶éï¼šæ‡¶çˆ¸çˆ¸æœ‰å€‹ç›¸ä¾è€¦åˆçš„é¡åˆ¥ï¼ŒæŠŠå®ƒæŠ½å‡ºä¾†æ”¾åˆ°å¯è¦†å¯«çš„æ–¹æ³•ä¸­å›å‚³ï¼›ç”¨å€‹ç¬¨å…’å­ä¾†ç¹¼æ‰¿æ‡¶çˆ¸çˆ¸ï¼Œæ¥è‘—ç¬¨å…’å­ç”¨ DI ä¾†æ³¨å…¥ç›¸ä¾ç‰©ä»¶çš„ stub object ï¼›æœ€å¾Œæ”¹æ¸¬è©¦ç¬¨å…’å­ï¼ŒçµæŸã€‚</p>
<p>å¦‚æœçœ‹å¾—æ‡‚ä¸Šé¢é€™å¥ï¼Œæˆ‘æƒ³å°±èƒ½å¾—åˆ°è¬›å¸«é€™æ®µèª²ç¨‹çš„ç²¾é«“äº†ã€‚è‡³æ–¼é€™å€‹æŠ€å·§å¤šæœ‰ç”¨ï¼Ÿå¦‚æœç™¼ç¾é¡åˆ¥ä¸­ç›¸ä¾è€¦åˆåº¦å¾ˆé«˜ï¼Œå»åˆä¸ç¢ºå®šé€™äº›é¡åˆ¥è¢«å“ªäº›ç¨‹å¼ç”¨åˆ°ï¼Œæ›´æ“”å¿ƒä¿®æ”¹æ–¹æ³•ç°½åå°±æœƒå½±éŸ¿æ•´å€‹ç³»çµ±æ™‚ï¼Œä½ å°±æœƒçŸ¥é“é€™å€‹æŠ€å·§çš„å¨åŠ›äº†ã€‚</p>
<h2 id="å¿ƒå¾—">å¿ƒå¾—</h2>
<p>æˆ‘å¿…é ˆè€å¯¦èªªï¼Œä¸è«–æ˜¯è£œæ¸¬è©¦æˆ–æ˜¯é‡æ§‹ï¼ŒæŠ€è¡“ä¸Šçµ•å°ä¸æ˜¯ä»€éº¼å¤§å•é¡Œï¼›åƒé€™æ¬¡çš„èª²ç¨‹æ‰€ä»‹ç´¹çš„æŠ€å·§ï¼Œéƒ½æ²’æœ‰ä»€éº¼éå¸¸å›°é›£çš„éƒ¨ä»½ã€‚é‚£éº¼ç‚ºä»€éº¼å¾ˆå¤šäººä¸åšå‘¢ï¼Ÿæˆ‘æƒ³æ˜¯å› ç‚ºå¤§å®¶éƒ½æ‹¿ã€Œæ–°åŠŸèƒ½éƒ½åšä¸å®Œäº†ï¼Œå“ªä¾†æ™‚é–“åšé‡æ§‹ï¼Ÿã€åšç‚ºè—‰å£äº†ã€‚ä½†å›åˆ°æœ€æ–‡ç« æœ€é–‹é ­çš„æƒ…å¢ƒï¼Œå…¶å¯¦çœŸçš„èŠ±ä½ æ™‚é–“çš„ï¼Œåè€Œä¸æ˜¯é€™äº›æ¸¬è©¦æˆ–é‡æ§‹ï¼Œè€Œæ˜¯ä½ è·ŸåŒäº‹å› ç‚ºç³»çµ±å‡ºå•é¡Œçš„çˆ­åŸ·ã€‚</p>
<p>å¦‚æœè€é—†æœ‰å¿ƒè§£æ±ºèˆŠæœ‰ç³»çµ±çš„å•é¡Œï¼Œå°±æƒ³è¾¦æ³•èªªæœä»–åŠ ä¸Šæ¸¬è©¦ä¸¦é‡æ§‹å§ã€‚</p>
<p>æƒ³ç­è§£æ›´å¤šçš„è©±ï¼Œè«‹å ±åã€Œ<a href="http://skilltree.my/events/ebg">è‡ªå‹•æ¸¬è©¦èˆ‡ TDD å¯¦å‹™é–‹ç™¼</a> ã€ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>è‡ªå‹•æ¸¬è©¦èˆ‡ TDD å¯¦å‹™é–‹ç™¼ - ä¸Šèª²å¿ƒå¾— (ä¸Š)</title>
			<link>https://jaceju.net/skilltree-tdd/</link>
			<pubDate>Sun, 17 May 2015 10:07:11 +0800</pubDate>
			
			<guid>https://jaceju.net/skilltree-tdd/</guid>
			<description>æ¸¬è©¦ä¸€ç›´ä»¥ä¾†æ˜¯å¾ˆå¤šé–‹ç™¼è€…å¿ƒä¸­çš„ç—›ï¼Œç•¶è¢«è€é—†å•åˆ°ï¼šã€Œä½ çš„ç¨‹å¼ç¢¼æ˜¯å¦éƒ½æ¸¬è©¦éäº†ï¼Ÿã€ä½ æ˜¯å¦èƒ½æ‘¸è‘—è‡ªå·±çš„è‰¯å¿ƒï¼Œä¸¦ä¸”æ‹¿å‡ºè­‰æ“šä¾†èªªè‡ªå·±çœŸçš„åšéæ¸¬è©¦è®“æ‰€æœ‰</description>
			<content type="html"><![CDATA[<p>æ¸¬è©¦ä¸€ç›´ä»¥ä¾†æ˜¯å¾ˆå¤šé–‹ç™¼è€…å¿ƒä¸­çš„ç—›ï¼Œç•¶è¢«è€é—†å•åˆ°ï¼šã€Œä½ çš„ç¨‹å¼ç¢¼æ˜¯å¦éƒ½æ¸¬è©¦éäº†ï¼Ÿã€ä½ æ˜¯å¦èƒ½æ‘¸è‘—è‡ªå·±çš„è‰¯å¿ƒï¼Œä¸¦ä¸”æ‹¿å‡ºè­‰æ“šä¾†èªªè‡ªå·±çœŸçš„åšéæ¸¬è©¦è®“æ‰€æœ‰åŠŸèƒ½éƒ½ç¬¦åˆéœ€æ±‚äº†ï¼Ÿæˆ‘ç›¸ä¿¡çµ•å¤§å¤šæ•¸çš„é–‹ç™¼è€…é€™æ™‚ä¸€å®šéƒ½æ˜¯é¢æœ‰é›£è‰²ï¼Œå› ç‚ºå…¶å¯¦ä½ ä¸ä½†é¨™äº†è€é—†ï¼Œé‚„é¨™äº†ä½ è‡ªå·±ã€‚</p>
<p>å¾æˆ‘è‡ªå·±é–‹å§‹ç ”ç©¶æ¸¬è©¦å¾Œï¼Œå…¶å¯¦ä¸€ç›´è¦ºå¾—è‡ªå·±é‚„æ˜¯æ²’æœ‰çœŸæ­£æŠŠæ¸¬è©¦ç•¶æˆæ˜¯é–‹ç™¼çš„ä¸€éƒ¨ä»½ï¼Œæ›´åˆ¥èªªåŠé–“å¾ˆå¤šç¨‹å¼æ›¸ç±å’Œæ•™å­¸èª²ç¨‹èƒ½æŠŠé€™å…©è€…çœŸçœŸå¯¦å¯¦åœ°èåˆåœ¨ä¸€èµ·ï¼Œå‚³æˆçµ¦å»£å¤§çš„é–‹ç™¼äººå“¡ã€‚</p>
<p>é€™æ¬¡æ­£å¥½æœ‰æ©Ÿæœƒå»è½ Joey (91 å“¥) åœ¨ <a href="http://skilltree.my/">SkillTree</a> é–‹çš„ <a href="http://skilltree.my/events/ebg">TDD èª²ç¨‹</a>ï¼Œæˆ‘å¿ƒæƒ³é€™å¯¦åœ¨æ˜¯å¤ªæ£’äº†ï¼ Joey æ˜¯æ¥­ç•Œåœ¨ TDD é ˜åŸŸç›¸ç•¶æœ‰ç ”ç©¶ï¼Œè€Œä¸”ä¹Ÿå·²ç¶“åœ¨å¯¦å‹™ä¸Šç¶“éåƒéŒ˜ç™¾éŠçš„é«˜æ‰‹ï¼Œå¦‚æœèƒ½è¦ªçœ¼è¦‹åˆ°ä»–æ˜¯å¦‚ä½•æŠŠæ¸¬è©¦èå…¥é–‹ç™¼ä¸­çš„è©±ï¼Œä¸€å®šèƒ½å¤§å¤§æå‡è‡ªå·±çš„ç¶“é©—å€¼ï¼</p>
<p>ä¸éèª²ç¨‹ä¸­ç²¾é‡‡çš„éƒ¨ä»½å¤ªå¤šäº†ï¼Œæ•æˆ‘ç„¡æ³•ä¸€ä¸€ä»‹ç´¹ï¼›è€Œä¸”æˆ‘ä¹Ÿä¸è¦ºå¾—æˆ‘èƒ½åœ¨é€™ç¯‡å¿ƒå¾—ä¸­ï¼Œè¡¨é”å‡ºè¬›å¸«åœ¨å¯¦å‹™é¢çš„æ·±åšåŠŸåŠ›ã€‚ä»¥ä¸‹å°±è®“æˆ‘ä¾†ç‚ºå¤§å®¶ä»‹ç´¹é€™å€‹èª²ç¨‹ç‚ºä»€éº¼å€¼å¾—ä½ å»è½çš„å¿ƒå¾—ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="çµ•å°æœ‰æ–™çš„èª²ç¨‹å…§å®¹">çµ•å°æœ‰æ–™çš„èª²ç¨‹å…§å®¹</h2>
<p>æˆ‘å€‹äººå¾ˆå–œæ­¡é€™å€‹èª²ç¨‹ä¸€é–‹å§‹å°±æŠŠæ•´å€‹å­¸ç¿’åœ°åœ–å±•é–‹ä¾†ï¼Œè®“å­¸å“¡çŸ¥é“æ¥ä¸‹ä¾†å¹¾é€±è£¡æœƒç”±æ·ºå…¥æ·±åœ°å­¸åˆ°å“ªäº›æŠ€å·§ï¼Œä¾‹å¦‚æœ¬é€± (ç¬¬ä¸€é€±) æ˜¯å–®å…ƒæ¸¬è©¦çš„åŸºç¤ã€‚é›–ç„¶èªªæ˜¯åŸºç¤ï¼Œä½†å»æ˜¯æœ€é—œéµçš„ä¸€ç’°ï¼å› ç‚ºè¬›å¸«æœƒå°‡æ‰€æœ‰è‡³ä»Šä½ å°æ¸¬è©¦çš„éŒ¯èª¤èªçŸ¥é‡æ–°æ´—æ‰ï¼Œæ³¨å…¥æœ€æ­£ç¢ºçš„è§€å¿µï¼</p>
<p>è€Œæ¥ä¸‹ä¾†è¬›å¸«å°±èˆ‰å‡ºäº†å¹¾å€‹è¡€æ·‹æ·‹çš„çœŸå¯¦æ¡ˆä¾‹ï¼Œå‘Šè¨´ä½ ç‚ºä»€éº¼æ¸¬è©¦æ˜¯é‡è¦çš„ã€‚æ¸¬è©¦ä¸æ˜¯ç”¨ä¾†æ‡‰ä»˜æµç¨‹çš„å·¥å…·ï¼Œè€Œæ˜¯ç´¥ç´¥å¯¦å¯¦è®“ä½ å°è‡ªå·±çš„ç¨‹å¼ç¢¼èƒ½æ›´æœ‰ä¿¡å¿ƒçš„é­”æ³•ã€‚ä½ ä¸è¦‹å¾—èƒ½åœ¨ä¸€é–‹å§‹å°±é«”æœƒæ¸¬è©¦çš„é‡è¦æ€§ï¼Œä½†ä½ ä¸€å®šæœƒåœ¨å‡ºå¤§åŒ…æ™‚æ‡Šæ‚”ï¼šå¦‚æœç•¶æ™‚æœ‰æ¸¬è©¦å°±å¥½äº† (æ›¾ç¶“å¾…é EC ç”¢æ¥­çš„æˆ‘æ„ŸåŒèº«å—) ã€‚</p>
<p>è¬›å¸«ä¹Ÿä¸‰ä¸äº”æ™‚æœƒè®“å­¸å“¡ç”¨å›ç­”å•é¡Œçš„æ–¹å¼ï¼Œè®“å­¸å“¡é‡æ–°å¯©è¦–å°å‰›å‰›æ‰€æ•™æˆçš„å…§å®¹æ˜¯å¦æœ‰çœŸçš„ç­è§£ï¼Œè¬›å¸«ä¹Ÿæœƒé©æ™‚åœ°å†è£œå……ã€‚è¬›å¸«ä¹Ÿæœƒé‡å°åŒå­¸çš„ç™¼å•ï¼Œä¾†åˆ†äº«è‡ªå·±åœ¨å¯¦å‹™ä¸Šé‡åˆ°çš„å•é¡Œã€‚</p>
<h2 id="ä¸€å®šèƒ½æ‡‚çš„æ•™å­¸æ–¹å¼">ä¸€å®šèƒ½æ‡‚çš„æ•™å­¸æ–¹å¼</h2>
<p>æœ‰è¶£çš„æ˜¯ï¼Œé€™æ¬¡èª²ç¨‹è¬›å¸«æ˜¯ç”¨ C# æ•™å­¸ï¼Œä½†åœ¨ PHP ä¸­æ‰“æ»¾çš„æˆ‘å»å°ç¯„ä¾‹æ²’æœ‰çµ²æ¯«çš„ç–é›¢æ„Ÿã€‚å› ç‚ºè¬›å¸«èˆ‰çš„ä¾‹å­ç›¸ç•¶ç”Ÿæ´»åŒ–ï¼Œè€Œä¸”å¯«å‡ºä¾†çš„ç¨‹å¼ç¢¼éå¸¸å¹³æ˜“è¿‘äººï¼Œåªè¦æœ‰å¯«éç¨‹å¼çš„äººä¸€å®šéƒ½èƒ½çœ‹æ‡‚ã€‚</p>
<p>èª²ç¨‹ä¸­åŒ…å«äº†è®“å­¸å“¡å‹•æ‰‹çš„å¯¦æˆ°ç·´ç¿’ï¼Œæ¯å€‹ç¯„ä¾‹éƒ½æ˜¯å¾å¯¦å‹™ä¸­æ·¬éŠå‡ºä¾†çš„ï¼Œåƒæ˜¯å¦‚ä½•æ¸¬è©¦äº‚æ•¸ï¼Ÿå¦‚ä½•æ¸¬è©¦åªæœƒåœ¨ç‰¹å®šæ—¥æœŸå•Ÿç”¨çš„åŠŸèƒ½ç­‰ç­‰ï¼›è€Œä¸”ç¯„ä¾‹ç¶“éç¸å¯†çš„å®‰æ’ï¼Œèƒ½å¾ªåºæ¼¸é€²åœ°è®“å­¸å“¡ç­è§£å¦‚ä½•åœ¨æ¸¬è©¦ä¸­å¥—ç”¨èª²ç¨‹ä¸­è¬›æˆçš„åŸå‰‡ã€‚ä½ æœƒå¾ˆé©šè¨åŸä¾†é€™äº›æˆ‘å€‘ä»¥ç‚ºé›£æ¸¬è©¦çš„å•é¡Œï¼Œå…¶å¯¦åœ¨æ¸¬è©¦ä¸­è§£æ±ºçš„æ–¹å¼ç«Ÿç„¶æ˜¯é€™éº¼ç°¡å–®ã€‚</p>
<p>ç•¶ç„¶å°ä¸æœƒå¯« C# çš„æˆ‘ä¾†èªªï¼ŒåŸæœ¬ä»¥ç‚ºæ²’è¾¦æ³•ç”¨ IDE å¯¦éš›æ¼”ç·´æœƒæ˜¯ä»¶æ†¾äº‹ï¼›ä½†é€™äº›å¯¦ä¾‹è¨­è¨ˆä¹‹ç²¾å·§ï¼Œå»èƒ½å¤ è®“æˆ‘ç”¨ PHP ä¾†é‡æ–°ä»£å…¥ï¼›æ‰€è¬‚ä¸€æ³•é€šè¬æ³•é€šï¼Œæ¸¬è©¦çš„è§€å¿µæœ¬ä¾†å°±ä¸é™ç¨‹å¼èªè¨€ï¼Œé€™æ¨£è®“äººèˆˆå¥®çš„å¯¦æˆ°è¨“ç·´ï¼Œæœƒè®“äººæœ‰æ‰‹åœä¸ä¸‹ä¾†çš„æ„Ÿè¦ºã€‚</p>
<h2 id="æ•™ä½ æ€éº¼å¿«é€Ÿå»ºç«‹æ¸¬è©¦åˆèƒ½å¯«å‡ºå¥½æ¸¬è©¦">æ•™ä½ æ€éº¼å¿«é€Ÿå»ºç«‹æ¸¬è©¦åˆèƒ½å¯«å‡ºå¥½æ¸¬è©¦</h2>
<p>æˆ‘å€‘éƒ½çŸ¥é“é–‹ç™¼æ‡‰è©²é‡å°éœ€æ±‚ï¼Œç„¶è€Œæ¸¬è©¦ä¹Ÿæ˜¯ã€‚ä½†æˆ‘å€‘å»å®¹æ˜“æƒ³å¾—å¤ªå¤šï¼Œå°è‡´æˆ‘å€‘åšäº†å¤ªå¤šç„¡è¬‚çš„å·¥ä½œã€‚åœ¨èª²ç¨‹ä¸­ï¼Œè¬›å¸«æœƒå‘Šè¨´ä½ å¦‚ä½•è®“æ¸¬è©¦å»é…åˆéœ€æ±‚ï¼Œè€Œä¸æ˜¯ç‚ºäº†æ¸¬è©¦è€Œæ¸¬è©¦ã€‚æ­é…æ¸¬è©¦çš„åŸå‰‡ï¼Œæˆ‘å€‘å°±ä¸æœƒå†èªç‚ºæ¸¬è©¦æ˜¯å¤šå‡ºä¾†çš„å·¥ï¼Œè€Œæ‡‰è©²æ˜¯é–‹ç™¼çš„ä¸€éƒ¨ä»½ã€‚</p>
<p>ä¾‹å¦‚é—œæ³¨é»åˆ†é›¢ã€ FIRST ã€ 3A é€™é¡çš„æ¸¬è©¦åŸå‰‡ï¼Œéƒ½æ˜¯å¯«æ¸¬è©¦æ™‚æ‰€æ‡‰è©²éµå®ˆçš„ï¼Œä½†å¾ˆå°‘äººçŸ¥é“è¦æ€éº¼å»æ‡‰ç”¨ã€‚ç„¶è€Œé€éé€™å€‹èª²ç¨‹çš„ç¯„ä¾‹æ•™å­¸ï¼Œä½ æœƒç™¼ç¾é€™éº¼å¤šåè©å’ŒåŸå‰‡ï¼Œç«Ÿèƒ½å¾ä¸­å¾—åˆ°é©—è­‰ï¼å› ç‚ºå®ƒå€‘å…¶å¯¦éƒ½æ˜¯å¾å¯¦å‹™æ‰€æ¼”åŒ–å‡ºä¾†çš„ï¼Œåªæ˜¯æˆ‘å€‘ä¸€ç›´ä»¥æ•™æ¢å¼çš„æ–¹æ³•ä¾†å­¸ç¿’å®ƒå€‘ï¼›ç•¶çœŸæ­£çœ‹åˆ°é€™äº›åŸå‰‡æ˜¯é€™éº¼è¼•é¬†åœ°è¢«è¬›å¸«é€éå¯¦ä¾‹å±•ç¾å‡ºä¾†æ™‚ï¼Œé‚£ç¨®éœ‡æ†¾æ˜¯æ–‡å­—é›£ä»¥æè¿°çš„ã€‚</p>
<p>ç•¶ç„¶æˆ‘å€‘åœ¨å¯¦éš›æ’°å¯«æ¸¬è©¦ç¢¼æ™‚ï¼Œé‚„æ˜¯å¾ˆå®¹æ˜“è¦ºå¾—å®ƒæ˜¯ä»¶éº»ç…©äº‹ï¼Œé€™æ™‚å€™æ¸¬è©¦å·¥å…·å°±éå¸¸é‡è¦äº†ã€‚ä¸€å€‹å¥½çš„æ¸¬è©¦æ¡†æ¶æœƒå½±éŸ¿ä½ æ’°å¯«æ¸¬è©¦çš„æ„é¡˜ï¼Œå¦‚æœé€™å·¥å…·æ²’è¾¦æ³•å¾ˆå®¹æ˜“åˆå¾ˆç°¡æ½”åœ°å¯«å‡ºç¬¦åˆæ„åœ–çš„æ¸¬è©¦ï¼Œé‚£éº¼ä¹Ÿå°±ä¸èƒ½æ€ªå…¶ä»–åŒäº‹è³ªç–‘å¯«æ¸¬è©¦æ˜¯ä¸æ˜¯æœ‰å¹«åŠ©äº†ã€‚</p>
<p>è€Œè™Ÿç¨±åœ°è¡¨æœ€å¼· IDE ä¹‹ä¸€çš„ Visual Studio åœ¨é€™æ–¹é¢ç•¶ç„¶ä¸æœƒè½æ–¼äººå¾Œï¼Œç°¡å–®å¹¾å€‹æŒ‡ä»¤å’Œæ“ä½œï¼Œæ¸¬è©¦éª¨æ¶å°±ç«‹åˆ»å‡ºç¾ã€‚å†æ­é…ç¬¬ä¸‰æ–¹çš„æ¸¬è©¦å·¥å…·ï¼Œè¼•è¼•é¬†é¬†åœ°å°±åœ¨é€™äº›éª¨æ¶åŠ è¡€æ·»è‚‰ï¼Œè½‰çœ¼é–“æ¸¬è©¦å°±å®Œæˆäº†ã€‚å¯«æ¸¬è©¦é€™ä»¶äº‹å¾æ­¤èå…¥æ•´å¥—é–‹ç™¼æµç¨‹è£¡ï¼Œæ€éº¼å¯èƒ½è®“äººä¸èˆˆå¥®å‘¢ï¼Ÿ</p>
<h2 id="å¯¦å‹™ä¸Šé¢è‡¨çš„å•é¡Œ">å¯¦å‹™ä¸Šé¢è‡¨çš„å•é¡Œ</h2>
<p>Demo (SkillTree ä¸»è¾¦äºº) åœ¨èª²é¤˜æ™‚é–“èŠåˆ°ï¼šã€Œå³ä¾¿å¯«æ¸¬è©¦è®Šå¾—å®¹æ˜“ï¼Œè€Œæˆ‘å€‘ä¹Ÿé–‹å§‹æŠŠå®ƒè®Šæˆè‡ªå·±çš„ç¿’æ…£ï¼Œä½†ä½ é‚„æ˜¯ä¸€å®šæœƒç¢°åˆ°åŒäº‹æœ‰é€™æ¨£çš„è³ªç–‘ï¼šã€é€™ç¨‹å¼ç¢¼å°±æ˜¯æ­£ç¢ºçš„å‘€ï¼ç‚ºä»€éº¼é‚„éœ€è¦æ¸¬è©¦ï¼Ÿã€ã€æˆ‘æƒ³ä¸€å®šæœ‰æƒ³åœ¨åœ˜éšŠè£¡å°å…¥æ¸¬è©¦çš„æœ‹å‹å¸¸æœƒé‡åˆ°é€™ç¨®ç‹€æ³ï¼Œåœ¨é€™å€‹èª²ç¨‹ä¸­ä¹Ÿå¯ä»¥è®“ä½ å­¸åˆ°ç”¨ä»€éº¼æ–¹æ³•å¯ä»¥è™•ç†é€™æ¨£çš„è³ªç–‘ã€‚</p>
<p>åœ¨å°å…¥æ¸¬è©¦æ™‚æ™‚ï¼Œæœ€é‡è¦çš„å°±æ˜¯è®“åŒäº‹å°æ¸¬è©¦æœ‰ä¿¡å¿ƒï¼›ç•¶å¯«æ¸¬è©¦è®Šå¾—å¾ˆå®¹æ˜“æ™‚ï¼Œä½ æ‰€è¦åšçš„ï¼Œå°±æ˜¯æ€éº¼è®“åŒäº‹ä¹Ÿèƒ½é«”æœƒå¯«æ¸¬è©¦èƒ½ç‚ºä»–å¸¶ä¾†ä»€éº¼æ•ˆç›Šã€‚é€™æ–¹é¢è¬›å¸«ä¹Ÿæœƒæå‡ºä»–çš„å¯¦å‹™ç¶“é©—ä¾›æˆ‘å€‘åƒè€ƒï¼Œè€Œä¸”ä¸è«–æ˜¯æŠ€å·§ä¸Šå’Œäººæ€§ä¸Šï¼Œéƒ½æ˜¯ç›¸ç•¶å€¼å¾—åƒè€ƒçš„å»ºè­°ã€‚</p>
<p>æœ€å¾Œé‚„æœ‰ä¸€å€‹å¯èƒ½æœƒé¢è‡¨åˆ°çš„ï¼Œå°±æ˜¯æ¸¬è©¦å°ç¨‹å¼ç¢¼çš„æ¶µè“‹ç‡ã€‚è¬›å¸«çš„å›ç­”å…¶å¯¦è®“æˆ‘éå¸¸é©šè¨ (å®¹æˆ‘è³£å€‹é—œå­) ï¼Œé€™å…¶å¯¦è®“æˆ‘å°ã€Œæ¸¬è©¦å°åœ˜éšŠçš„å½±éŸ¿åŠ›ã€é€™ä»¶äº‹å¤§å¤§åœ°æ”¹è§€ã€‚é›–ç„¶æˆ‘è‡ªå·±ä¹Ÿåœ¨æŸå€‹éƒ¨ä»½æ‡‰ç”¨ä¸Šäº†é¡ä¼¼çš„è§€å¿µï¼Œä½†æˆ‘ä»¥ç‚ºé€™åªæ˜¯å½±éŸ¿äº†æˆ‘è‡ªå·±ï¼Œæ²’æƒ³åˆ°é€™ç¢ºå¯¦æ˜¯ä¸€ç¨®å°äººæ€§çš„å¯¦å‹™ä½œæ³•ï¼Œä¸ç¦è®“æˆ‘å°å®ƒæ›´æœ‰ä¿¡å¿ƒï¼›æˆ‘ç›¸ä¿¡é€éé€™äº›å°å°çš„æ”¹è®Šï¼Œå°±æœ‰æ©Ÿæœƒè®“æ•´å€‹åœ˜éšŠè®Šå¾—æ›´æœ‰å‹‡æ°£å»é¢å°æ¸¬è©¦é€™ä»¶äº‹æƒ…ã€‚</p>
<h2 id="å°çµ">å°çµ</h2>
<p>ä¸Šå®Œç¬¬ä¸€é€±çš„èª²ç¨‹ï¼Œæˆ‘è…¦æµ·è£¡ä¸€ç›´è¿´éŸ¿è‘—ï¼šã€ä½ å¿…é ˆå°ä½ çš„æ¸¬è©¦æœ‰ä¿¡å¿ƒï¼Œæ¸¬è©¦æ‰èƒ½è®“ä½ å°ä½ çš„ç¨‹å¼æœ‰ä¿¡å¿ƒã€‚ã€</p>
<p>æ¸¬è©¦æ‡‰è©²è¦åšä»€éº¼ï¼Ÿæ€éº¼å¯«æœ‰æ•ˆçš„æ¸¬è©¦ï¼Ÿæ€éº¼å¿«é€Ÿåœ°å¯«æ¸¬è©¦ï¼Ÿæ€éº¼è®“åŒäº‹ä¸€èµ·ä¾†å¯«æ¸¬è©¦ï¼ŸåŸæœ¬ä»¥ç‚ºè‡ªå·±å·²ç¶“å¯ä»¥å›ç­”é€™äº›å•é¡Œï¼Œå»åœ¨é€™å€‹èª²ç¨‹ä¸­è®“æˆ‘çš„è§€å¿µæ•´å€‹å¤§æ´—ç‰Œï¼Œä¹Ÿé–‹å§‹è®“æˆ‘å¿ƒä¸­å·²ç¶“æ¶ˆé€å¾ˆä¹…çš„ç†±è¡€åˆæ¼¸æ¼¸æ²¸é¨°èµ·ä¾†ã€‚</p>
<p>å†æ¬¡æ„Ÿè¬è¬›å¸« Joey å’Œ SkillTree çš„ Demo èˆ‰è¾¦é€™éº¼å¯¦ç”¨ä¸”ç²¾é‡‡çš„èª²ç¨‹ï¼Œæˆ‘è¶Šä¾†è¶ŠæœŸå¾…æ¥ä¸‹ä¾†å¹¾é€±çš„å…§å®¹äº†ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>ç†è§£ Dependency Injection å¯¦ä½œåŸç†</title>
			<link>https://jaceju.net/php-di-container/</link>
			<pubDate>Sun, 27 Jul 2014 17:45:50 +0800</pubDate>
			
			<guid>https://jaceju.net/php-di-container/</guid>
			<description>ç¾ä»£è¼ƒæ–°çš„ Web Framework éƒ½å¼·èª¿è‡ªå·±æœ‰ Dependency Injection (ä»¥ä¸‹ç°¡ç¨± DI ) çš„ç‰¹è‰²ï¼Œåªæ˜¯å¾ˆå¤šäººå°å®ƒçš„é‹ä½œåŸç†é‚„æ˜¯ä¸€çŸ¥åŠè§£ã€‚ æ‰€ä»¥æ¥ä¸‹ä¾†æˆ‘å°‡ç”¨ä¸€å€‹ç°¡å–®çš„ç¯„ä¾‹ï¼Œä¾†ç‚ºå„ä½ä»‹ç´¹åœ¨ PHP ä¸­</description>
			<content type="html"><![CDATA[<p>ç¾ä»£è¼ƒæ–°çš„ Web Framework éƒ½å¼·èª¿è‡ªå·±æœ‰ Dependency Injection (ä»¥ä¸‹ç°¡ç¨± DI ) çš„ç‰¹è‰²ï¼Œåªæ˜¯å¾ˆå¤šäººå°å®ƒçš„é‹ä½œåŸç†é‚„æ˜¯ä¸€çŸ¥åŠè§£ã€‚</p>
<p>æ‰€ä»¥æ¥ä¸‹ä¾†æˆ‘å°‡ç”¨ä¸€å€‹ç°¡å–®çš„ç¯„ä¾‹ï¼Œä¾†ç‚ºå„ä½ä»‹ç´¹åœ¨ PHP ä¸­å¦‚ä½•å¯¦ç¾ç°¡æ˜“çš„ DI ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="åŸºæœ¬ç¯„ä¾‹">åŸºæœ¬ç¯„ä¾‹</h2>
<p>é€™æ˜¯ä¸€å€‹æ‡‰ç”¨ç¨‹å¼çš„ç¯„ä¾‹ï¼Œå®ƒåªåŒ…å«äº†ç™»å…¥è™•ç†ç¨‹åºã€‚åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œ <code>App</code> é¡åˆ¥çš„å»ºæ§‹å¼åƒè€ƒäº†æ–°çš„ <code>Auth</code> èˆ‡ <code>Session</code> çš„ç‰©ä»¶å¯¦é«”ï¼Œä¸¦åœ¨ <code>App::login()</code> ä¸­ä½¿ç”¨ã€‚</p>
<p>è¨»ï¼šè«‹ç‰¹åˆ¥æ³¨æ„ï¼Œç‚ºäº†å‘ˆç¾é‡é»ï¼Œæˆ‘å¿½ç•¥æ‰å¾ˆå¤šç¨‹å¼ç¢¼ï¼ŒåŒæ™‚ä¹Ÿæ²’æœ‰é€²è¡Œè‰¯å¥½çš„æ¶æ§‹è¨­è¨ˆï¼›æ‰€ä»¥è«‹ä¸è¦æŠŠé€™å€‹ç¯„ä¾‹ç”¨åœ¨ä½ çš„ç¨‹å¼ä¸­ï¼Œæˆ–æ˜¯å°ç‚ºä»€éº¼æˆ‘æ²’æœ‰é€²è¡ŒéŒ¯èª¤è™•ç†ï¼Œä»¥åŠç‚ºä»€éº¼è¦æ¡ç”¨å¥‡æ€ªçš„è¨­è¨ˆæå‡ºè³ªç–‘ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class App
{
    protected $auth = null;
    protected $session = null;

    public function __construct($dsn, $username, $password)
    {
        $this-&gt;auth = new Auth($dsn, $username, $password);
        $this-&gt;session = new Session();
    }

    public function login($username, $password)
    {
        if ($this-&gt;auth-&gt;check($username, $password)) {
            $this-&gt;session-&gt;set(&#39;username&#39;, $username);
            return true;
        }
        return false;
    }
}
</code></pre></div><p>è€Œ <code>Auth</code> é¡åˆ¥æ˜¯å¾è³‡æ–™åº«é©—è­‰ä½¿ç”¨è€…èº«ä»½ï¼Œé€™è£¡æˆ‘åƒ…ç”¨ç°¡å–®çš„æè¿°ä¾†å‘ˆç¾æ•ˆæœã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Auth
{
    public function __construct($dsn, $user, $pass)
    {
        echo &#34;Connecting to &#39;$dsn&#39; with &#39;$user&#39;/&#39;$pass&#39;...\n&#34;;
    }

    public function check($username, $password)
    {
        echo &#34;Checking username, password from database...\n&#34;;
        return true;
    }
}
</code></pre></div><p><code>Session</code> é¡åˆ¥ä¹Ÿæ˜¯æ¦‚å¿µæ€§çš„å¯¦ä½œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Session
{
    public function set($name, $value)
    {
        echo &#34;Set session variable &#39;$name&#39; to &#39;$value&#39;.&#34;;
    }
}
</code></pre></div><p>æœ€å¾Œæˆ‘å€‘è®“ç¨‹å¼å‹•èµ·ä¾†ï¼Œ client ç¨‹å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$app = new App(&#39;mysql://localhost&#39;, &#39;username&#39;, &#39;password&#39;);
$username = &#39;jaceju&#39;;
if ($app-&gt;login($username, &#39;password&#39;)) {
    echo &#34;$username just signed in.\n&#34;;
}
</code></pre></div><p>è¨»ï¼šé€™è£¡çš„ client ç¨‹å¼æŒ‡çš„æ˜¯å¯¦éš›æ“ä½œé€™äº›ç‰©ä»¶å¯¦é«”çš„ç¨‹å¼ã€‚</p>
<p>å„ä½å¯ä»¥å…ˆè©¦è‘—æƒ³æƒ³é€™å€‹ç¨‹å¼åœ¨å¯æ“´å……æ€§ä¸Šæœ‰ä»€éº¼å•é¡Œï¼Ÿä¾‹å¦‚æˆ‘æƒ³æŠŠèº«ä»½èªè­‰æ–¹å¼æ›æˆç¬¬ä¸‰æ–¹æœå‹™çš„æ©Ÿåˆ¶ï¼Œæˆ–æ˜¯æ”¹ç”¨å…¶ä»–åª’ä»‹ä¾†å­˜æ”¾ session å…§å®¹ç­‰ã€‚</p>
<p>é‚„æœ‰å¦‚æœæƒ³åœ¨æ²’æœ‰è³‡æ–™åº«é€£ç·šã€æˆ–æ˜¯æ²’æœ‰ HTTP session çš„ç’°å¢ƒä¸‹å° <code>App::login()</code> æ–¹æ³•çš„é‚è¼¯é€²è¡Œéš”é›¢æ¸¬è©¦ï¼Œå„ä½æœƒæ€éº¼åšå‘¢ï¼Ÿ</p>
<h2 id="è§£é™¤ä¾è³´é—œä¿‚">è§£é™¤ä¾è³´é—œä¿‚</h2>
<p>ä¸Šé¢çš„ç¯„ä¾‹å› ç‚º <code>App</code> é¡åˆ¥å·²ç¶“ä¾è³´äº† <code>Auth</code> é¡åˆ¥å’Œ <code>Session</code> é¡åˆ¥ï¼Œè€Œé€™å…©å€‹é¡åˆ¥éƒ½æœ‰å¯¦ä½œè·Ÿç³»çµ±ç’°å¢ƒæœ‰é—œçš„ç¨‹å¼é‚è¼¯ï¼Œé€™éº¼ä¸€ä¾†å°±æœƒè®“ <code>App</code> é¡åˆ¥é›£ä»¥é€²è¡Œåº•å±¤æ©Ÿåˆ¶çš„åˆ‡æ›æˆ–æ˜¯éš”é›¢æ¸¬è©¦ã€‚æ‰€ä»¥æ¥ä¸‹ä¾†æˆ‘å€‘è¦åšçš„ï¼Œå°±æ˜¯æŠŠå®ƒå€‘çš„ä¾è³´é—œä¿‚è§£é™¤ã€‚</p>
<p>ä¿®æ”¹å¾Œçš„ <code>App</code> é¡åˆ¥å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class App
{
    protected $auth = null;
    protected $session = null;

    public function __construct(Auth $auth, Session $session)
    {
        $this-&gt;auth = $auth;
        $this-&gt;session = $session;
    }
}

$auth = new Auth(&#39;mysql://localhost&#39;, &#39;username&#39;, &#39;password&#39;);
$session = new Session();
$app = new App($auth, $session);
</code></pre></div><p>é¦–å…ˆæˆ‘å€‘åœ¨ <code>App</code> é¡åˆ¥çš„å»ºæ§‹å¼ <code>__construct</code> åŸæœ¬çš„è³‡æ–™åº«è¨­å®šåƒæ•¸ç§»é™¤ï¼Œä¸¦å°‡åŸä¾†ç›´æ¥ä»¥ <code>new</code> é—œéµå­—æ‰€ç”¢ç”Ÿçš„ç‰©ä»¶å¯¦é«”ï¼Œæ”¹ç”¨æ–¹æ³•åƒæ•¸çš„æ–¹å¼ä¾†æ³¨å…¥ã€‚è€Œä½¿ç”¨ <code>new</code> é—œéµå­—ç”¢ç”Ÿç‰©ä»¶å¯¦é«”çš„ç¨‹å¼ç¢¼ï¼Œå°±ç§»åˆ° <code>App</code> é¡åˆ¥å¤–ã€‚</p>
<p>é€™ç¨®ã€Œå°‡ä¾è³´çš„é¡åˆ¥æ”¹ç”¨æ–¹æ³•åƒæ•¸ä¾†æ³¨å…¥ã€çš„ä½œæ³•ï¼Œå°±æ˜¯æˆ‘å€‘èªªçš„ã€Œä¾è³´æ³¨å…¥ (Dependency Injection) ã€ã€‚</p>
<p>å¸¸è¦‹ä¾è³´æ³¨å…¥çš„æ–¹å¼æœ‰å…©ç¨®ï¼š Constructor Injection åŠ Setter Injection ã€‚å®ƒå€‘çš„å¯¦ä½œå½¢å¼ä¸¦æ²’æœ‰ä»€éº¼ä¸åŒï¼Œå·®åˆ¥åªåœ¨æ–¼æ˜¯ä¸æ˜¯é¡åˆ¥å»ºæ§‹å¼è€Œå·²ã€‚</p>
<p>ä¸é Constructor Injection å¿…é ˆåœ¨å»ºç«‹ç‰©ä»¶å¯¦é«”æ™‚å°±é€²è¡Œæ³¨å…¥ï¼Œè€Œ Setter Injection å‰‡æ˜¯å¯ä»¥åœ¨ç‰©ä»¶å¯¦é«”å»ºç«‹å¾Œæ‰é€é setter å‡½å¼ä¾†é€²è¡Œæ³¨å…¥ã€‚è€Œé€™è£¡ç‚ºäº†æ–¹ä¾¿è§£èªªï¼Œæˆ‘æ¡ç”¨çš„æ˜¯ Constructor Injection ã€‚</p>
<h2 id="ä¾è³´æŠ½è±¡ä»‹é¢">ä¾è³´æŠ½è±¡ä»‹é¢</h2>
<p>å¥½äº†ï¼Œç¾åœ¨çš„å•é¡Œæ˜¯ <code>Auth</code> é¡åˆ¥çš„å¯¦ä½œé‚„æ˜¯ä¾è³´åœ¨è³‡æ–™åº«ä¸Šï¼Œæ‰€ä»¥æˆ‘å€‘ä¹Ÿè¦è®“ <code>Auth</code> é¡åˆ¥è·Ÿè³‡æ–™åº«ä¹‹é–“è§£é™¤ä¾è³´é—œä¿‚ï¼Œè®“å®ƒæˆç‚ºä¸€å€‹æŠ½è±¡ä»‹é¢ã€‚</p>
<p>é€™è£¡çš„æŠ½è±¡ä»‹é¢æ˜¯æŒ‡è§€å¿µä¸Šçš„æ„ç¾©ï¼Œè€Œéèªè¨€å±¤ç´šä¸Šçš„æŠ½è±¡é¡åˆ¥ (Abstract Class) æˆ–ä»‹é¢ (Interface) ã€‚è‡³æ–¼åœ¨å¯¦ä½œä¸Šè©²ç”¨æŠ½è±¡é¡åˆ¥é‚„æ˜¯ä»‹é¢ï¼Œåœ¨é€™å€‹ç¯„ä¾‹è£¡ä¸¦æ²’æœ‰å·®åˆ¥ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œåˆ¤æ–·ï¼›é€™è£¡æˆ‘ç”¨ä»‹é¢ (Interface) ï¼Œå› ç‚ºæˆ‘åƒ…éœ€è¦ <code>Auth::check()</code> é€™å€‹ä»‹é¢æ–¹æ³•çš„å®šç¾©è€Œå·²ã€‚</p>
<p>é€™ä¸€æ­¥é¦–å…ˆæˆ‘æŠŠåŸä¾†çš„ <code>Auth</code> é¡åˆ¥é‡æ–°å‘½åç‚º <code>DbAuth</code> é¡åˆ¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class DbAuth
{
    public function __construct($dsn, $user, $pass)
    {
        echo &#34;Connecting to &#39;$dsn&#39; with &#39;$user&#39;/&#39;$pass&#39;...\n&#34;;
    }

    public function check($username, $password)
    {
        echo &#34;Checking username, password from database...\n&#34;;
        return true;
    }
}
</code></pre></div><p>æ¥è‘—å»ºç«‹ä¸€å€‹ <code>Auth</code> ä»‹é¢ï¼Œå®ƒåŒ…å«äº† <code>Auth::check()</code> æ–¹æ³•çš„å®šç¾©ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">interface Auth
{
    public function check($username, $password);
}
</code></pre></div><p>ç„¶å¾Œè®“ <code>DbAuth</code> é¡åˆ¥å¯¦ä½œ <code>Auth</code> ä»‹é¢ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class DbAuth implements Auth
{
    // ...
}
</code></pre></div><p>æœ€å¾ŒæŠŠåŸä¾†åˆå§‹åŒ– <code>Auth</code> é¡åˆ¥çš„ç‰©ä»¶å¯¦é«”çš„ç¨‹å¼ç¢¼ï¼Œæ”¹ç‚ºåˆå§‹åŒ– <code>DbAuth</code> çš„ç‰©ä»¶å¯¦é«”ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$auth = new DbAuth(&#39;mysql://localhost&#39;, &#39;username&#39;, &#39;password&#39;);
$session = new Session();
$app = new App($auth, $session);
</code></pre></div><p>é€é <code>Auth</code> ä»‹é¢çš„å¹«åŠ©ï¼Œæˆ‘å€‘å·²ç¶“è®“ <code>App</code> é¡åˆ¥èˆ‡å¯¦éš›çš„è³‡æ–™åº«æ“ä½œé¡åˆ¥åˆ†é›¢é–‹ä¾†äº†ã€‚ç¾åœ¨åªè¦æ˜¯å¯¦ä½œ <code>Auth</code> ä»‹é¢çš„é¡åˆ¥ï¼Œéƒ½å¯ä»¥è¢« <code>App</code> é¡åˆ¥æ‰€æ¥å—ï¼Œä¾‹å¦‚æˆ‘å€‘å¯èƒ½æœƒæ”¹ç”¨ HTTP èªè­‰ä¾†å–ä»£è³‡æ–™åº«èªè­‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class HttpAuth implements Auth
{
    public function check($username, $password)
    {
        echo &#34;Checking username, password from HTTP Authentication...\n&#34;;
        return true;
    }
}

$auth = new HttpAuth();
$session = new Session();
$app = new App($auth, $session);
</code></pre></div><p>ç•¶ç„¶å…¶ä»–é¡å‹çš„èªè­‰æ–¹å¼ä¹Ÿå¯ä»¥é€éå»ºç«‹æ–°çš„é¡åˆ¥ä¾†ä½¿ç”¨ï¼Œè€Œä¸æœƒå½±éŸ¿åˆ° <code>App</code> é¡åˆ¥çš„å…§éƒ¨å¯¦ä½œã€‚</p>
<h2 id="di-å®¹å™¨">DI å®¹å™¨</h2>
<p>ç¾åœ¨åˆæœ‰å€‹å•é¡Œï¼Œ client ç¨‹å¼é‚„æ˜¯ä¾è³´æ–¼ <code>DbAuth</code> é¡åˆ¥æˆ–æ˜¯ <code>HttpAuth</code> é¡åˆ¥ï¼›é€šå¸¸é€™ç¨®ç‹€æ³åœ¨éœ€è¦ç·¨è­¯å‹çš„èªè¨€ (ä¾‹å¦‚ Java ) ä¸­ï¼Œç¨‹å¼ä¸€æ—¦ç·¨è­¯å®Œæˆä½ˆç½²å‡ºå»å¾Œï¼Œå°±å¾ˆé›£å†é€²è¡Œä¿®æ”¹ã€‚</p>
<p>å¦‚æœæˆ‘å€‘å¯ä»¥æ”¹ç”¨è¨­å®šçš„æ–¹å¼ä¾†å‘Šè¨´ç¨‹å¼ï¼Œåœ¨ä¸åŒçš„ç‹€æ³ä¸‹å°æ‡‰ä¸åŒçš„é¡åˆ¥ï¼Œç„¶å¾Œè®“ç¨‹å¼è‡ªè¡Œåˆ¤æ–·ç’°å¢ƒä¾†ç”¢ç”Ÿéœ€è¦çš„ç‰©ä»¶å¯¦é«”ï¼Œé€™æ¨£å°±å¯ä»¥è§£é–‹ client ç¨‹å¼å°å¯¦ä½œé¡åˆ¥çš„ä¾è³´é—œä¿‚ã€‚</p>
<p>é€™è£¡è¦å¼•å…¥ä¸€å€‹æŠ€è¡“ï¼Œç¨±ç‚º DI å®¹å™¨ (Dependency Injection Container) ã€‚ DI å®¹å™¨ä¸»è¦çš„ä½œç”¨åœ¨æ–¼å¹«æˆ‘å€‘è§£æ±ºç”¢ç”Ÿç‰©ä»¶å¯¦é«”æ™‚ï¼Œæ‡‰è©²åƒè€ƒå“ªä¸€å€‹é¡åˆ¥ã€‚æˆ‘å€‘å…ˆä¾†çœ‹çœ‹ç”¨æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">Container::register(&#39;Auth&#39;, &#39;DbAuth&#39;, [&#39;mysql://localhost&#39;, &#39;username&#39;, &#39;password&#39;]);

$auth = Container::get(&#39;Auth&#39;);
$session = new Session();
$app = new App($auth, $session);
</code></pre></div><p>é¦–å…ˆæˆ‘å€‘åœ¨ DI å®¹å™¨ä¸­å…ˆä»¥ <code>Container::register()</code> æ–¹æ³•ä¾†è¨»å†Š <code>Auth</code> é€™å€‹åˆ¥åå¯¦éš›ä¸Šè¦å°æ‡‰å“ªå€‹é¡åˆ¥ï¼Œä»¥åŠå»ºç«‹ç‰©ä»¶å¯¦é«”æ™‚æœƒç”¨åˆ°çš„åˆå§‹åŒ–åƒæ•¸ã€‚è¦æ³¨æ„ï¼Œé€™è£¡çš„åˆ¥åä¸¦ä¸æ˜¯æŒ‡çœŸæ­£çš„é¡åˆ¥æˆ–ä»‹é¢ï¼Œä½†æˆ‘å€‘å¯ä»¥ç”¨ç›¸åŒçš„åç¨±ä»¥é¿å…èªçŸ¥ä¸Šçš„å•é¡Œã€‚</p>
<p>ç„¶å¾Œæˆ‘å€‘ç”¨ <code>Container::get()</code> æ–¹æ³•å–å¾—åˆ¥åæ‰€å°æ‡‰é¡åˆ¥çš„ç‰©ä»¶å¯¦é«”ï¼Œä¸Šé¢ä¾‹å­è£¡çš„ <code>$auth</code> å°±æ˜¯ <code>DbAuth</code> é¡åˆ¥çš„ç‰©ä»¶å¯¦é«”ã€‚</p>
<p>é€™éº¼ä¸€ä¾†ï¼Œæˆ‘å€‘å°±å¯ä»¥æŠŠè¨»å†Šçš„ç¨‹å¼ç¢¼ç§»å‡º client ç¨‹å¼ä¹‹å¤–ï¼Œä¸¦å°‡è¨»å†Šåƒæ•¸æ”¹ç”¨è¨­å®šæª”å¼•å…¥ï¼Œé †åˆ©è§£é–‹ client ç¨‹å¼å°å¯¦ä½œé¡åˆ¥çš„ä¾è³´ã€‚</p>
<h2 id="di-å®¹å™¨åŸç†">DI å®¹å™¨åŸç†</h2>
<p>é‚£éº¼ DI å®¹å™¨çš„åŸç†æ˜¯æ€éº¼é‹ä½œçš„å‘¢ï¼Ÿé¦–å…ˆåœ¨ <code>Container::register()</code> æ–¹æ³•è¨»å†Šçš„éƒ¨ä»½ï¼Œå®ƒå…¶å¯¦åªæ˜¯æŠŠåƒæ•¸è¨˜åˆ° <code>$map</code> é€™å€‹é¡åˆ¥éœæ…‹å±¬æ€§è£¡ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Container
{
    protected static $map = [];

    public static function register($name, $class, $args = null)
    {
        static::$map[$name] = [$class, $args];
    }

    // ...
}
</code></pre></div><p>é‡é»åœ¨ <code>Container::get()</code> æ–¹æ³•ï¼Œå®ƒé€é <code>$name</code> åˆ¥åï¼ŒæŠŠ <code>$map</code> å±¬æ€§ä¸­å°æ‡‰çš„é¡åˆ¥åç¨±å’Œåˆå§‹åŒ–åƒæ•¸å–å‡ºï¼›æ¥è‘—åˆ¤æ–·é¡åˆ¥æ˜¯ä¸æ˜¯å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨çš„è©±å°±å»ºç«‹å°æ‡‰çš„ç‰©ä»¶å¯¦é«”ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Container
{
    // ...

    public static function get($name)
    {
        list($class, $args) = isset(static::$map[$name]) ?
                              static::$map[$name] :
                              [$name, null];

        if (class_exists($class, true)) {
            $reflectionClass = new ReflectionClass($class);
            return !empty($args) ?
                   $reflectionClass-&gt;newInstanceArgs($args) :
                   new $class();
        }

        return null;
    }
}
</code></pre></div><p>æ¯”è¼ƒç‰¹åˆ¥çš„æ˜¯ï¼Œå¦‚æœåˆå§‹åŒ–åƒæ•¸ä¸æ˜¯ç©ºå€¼ (<code>null</code>) æ™‚ï¼Œå‰‡å¿…é ˆé€é <code>ReflectionClass::newInstanceArgs()</code> æ–¹æ³•ä¾†å»ºç«‹ç‰©ä»¶å¯¦é«”ã€‚ <code>ReflectionClass</code> é¡åˆ¥å¯ä»¥æ˜ å°„å‡ºæŒ‡å®šé¡åˆ¥çš„å…§éƒ¨çµæ§‹ï¼Œä¸¦æä¾›æ–¹æ³•ä¾†æ“ä½œé€™å€‹çµæ§‹ï¼› Reflection æ˜¯ç¾ä»£èªè¨€å¸¸è¦‹çš„æ©Ÿåˆ¶ï¼Œ PHP åœ¨é€™æ–¹é¢ä¹Ÿæä¾›äº†å®Œæ•´çš„ API ä¾›é–‹ç™¼è€…ä½¿ç”¨ï¼Œè«‹åƒè€ƒï¼š <a href="http://php.net/manual/en/book.reflection.php">PHP: Reflection</a> ã€‚</p>
<p><code>Container::get()</code> æ–¹æ³•ä¹Ÿå¯ä»¥åœ¨æ²’æœ‰è¨»å†Šçš„ç‹€æ³ä¸‹ï¼Œç›´æ¥æŠŠåˆ¥åç•¶æˆé¡åˆ¥åç¨±ï¼Œç„¶å¾Œå”åŠ©æˆ‘å€‘åˆå§‹åŒ–å°æ‡‰çš„ç‰©ä»¶å¯¦é«”ï¼›ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$session = Container::get(&#39;Session&#39;);
</code></pre></div><h2 id="æ‰‹å‹•æ³¨å…¥">æ‰‹å‹•æ³¨å…¥</h2>
<p>ç¾åœ¨æˆ‘å€‘çš„ client ç¨‹å¼å·²ç¶“ä¿®æ”¹æˆä»¥ä¸‹çš„æ¨£å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$auth = Container::get(&#39;Auth&#39;);
$session = Container::get(&#39;Session&#39;);
$app = new App($auth, $session);
</code></pre></div><p>ä¸éç•¶åˆå§‹åŒ–åƒæ•¸è¼ƒå¤šçš„ç‹€æ³ä¸‹ï¼Œé‡è¤‡å¯«å¥½å¹¾æ¬¡ <code>Container::get()</code> çœ‹èµ·ä¾†ä¹Ÿæ˜¯æŒºå›‰å—¦çš„ã€‚</p>
<p>æ¥ä¸‹ä¾†æˆ‘å€‘å¯¦ä½œä¸€å€‹ <code>Container::inject()</code> æ–¹æ³•ï¼Œæä¾›é–‹ç™¼è€…å¯ä»¥ä¸€æ¬¡æ³¨å…¥æ‰€æœ‰ä¾è³´ç‰©ä»¶å¯¦é«”ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$app = Container::inject(&#39;Auth&#39;, &#39;Session&#39;, function ($auth, $session) {
    return new App($auth, $session);
});
</code></pre></div><p>é€™è£¡æˆ‘å€‘è®“ <code>Container::inject()</code> æ¥å—ä¸å®šå€‹æ•¸çš„åƒæ•¸ï¼Œé™¤äº†æœ€å¾Œä¸€å€‹åƒæ•¸å¿…é ˆæ˜¯ callback å‹æ…‹å¤–ï¼Œå…¶ä»–éƒ½æ˜¯è¦å‚³éçµ¦ <code>Container::get()</code> çš„åƒæ•¸ã€‚ <code>Container::inject()</code> çš„å¯¦ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Container
{
    // ...

    public static function inject()
    {
        $args = func_get_args();
        $callback = array_pop($args);
        $injectArgs = [];

        foreach ($args as $name) {
            $injectArgs[] = Container::get($name);
        }

        return call_user_func_array($callback, $injectArgs);
    }
</code></pre></div><p>åœ¨åƒæ•¸å€‹æ•¸ä¸å®šçš„ç‹€æ³ä¸‹ï¼Œå¯ä»¥ç”¨ <code>func_get_args()</code> å‡½å¼ä¾†å–å¾—æ‰€æœ‰åƒæ•¸ï¼›è€Œ <code>array_pop()</code> å¯ä»¥å–å‡ºæœ€å¾Œä¸€å€‹åƒæ•¸å€¼åšç‚º callback ã€‚å‰©ä¸‹çš„åƒæ•¸å°±é€é <code>Container::get()</code> ä¾†å–å¾—ç‰©ä»¶å¯¦é«”ï¼Œæœ€å¾Œå†é€é <code>call_user_func_array()</code> å‡½å¼å°‡è™•ç†å¥½çš„åƒæ•¸å‚³éçµ¦ callback åŸ·è¡Œã€‚</p>
<h2 id="è‡ªå‹•è§£æ±ºæ‰€æœ‰ä¾è³´æ³¨å…¥">è‡ªå‹•è§£æ±ºæ‰€æœ‰ä¾è³´æ³¨å…¥</h2>
<p>åœ¨æˆ‘å€‘çš„ç¯„ä¾‹è£¡ï¼Œ <code>Container</code> é¡åˆ¥å¦‚æœå¯ä»¥æä¾›ä¸€å€‹æ–¹æ³•ï¼Œè‡ªå‹•ç‚ºæˆ‘å€‘è§£æ±ºæ‰€æœ‰ <code>App</code> é¡åˆ¥ä¾è³´å•é¡Œï¼Œé‚£éº¼ç¨‹å¼å°±å¯ä»¥æ›´ä¹¾æ·¨äº›ã€‚</p>
<p>è¦åšåˆ°é€™é»ï¼Œæˆ‘å€‘å°±å¿…é ˆçŸ¥é“è¦æ³¨å…¥çš„æ–¹æ³•æ‰€éœ€è¦åƒæ•¸çš„é¡å‹ï¼›è€Œåœ¨ PHP ä¸­çš„ <a href="http://php.net/manual/en/language.oop5.typehinting.php">Type Hinting</a> ï¼Œå°±å¯ä»¥å‘Šè¨´æˆ‘å€‘åƒæ•¸æ‰€å°æ‡‰çš„è®Šæ•¸é¡å‹æˆ–é¡åˆ¥ã€‚</p>
<p>å›åˆ° <code>App::__construct()</code> å»ºæ§‹å­ä¸Šï¼Œæˆ‘å€‘çœ‹åˆ° <code>$auth</code> èˆ‡ <code>$session</code> å…©å€‹åƒæ•¸çš„ type hint åˆ†åˆ¥å°æ‡‰åˆ° <code>Auth</code> èˆ‡ <code>Session</code> é€™å…©å€‹é¡åˆ¥ï¼Œå‰›å¥½å°±å¯ä»¥ç”¨ä¾†ç•¶åšæˆ‘å€‘åšè‡ªå‹•ä¾è³´æ³¨å…¥çš„æ¢ä»¶ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class App
{
    public function __construct(Auth $auth, Session $session)
    {
    }
}
</code></pre></div><p>æ¥è‘—æˆ‘å€‘ç‚º <code>Container</code> é¡åˆ¥æä¾›ä¸€å€‹ <code>resolve()</code> æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ¥å—ä¸€å€‹é¡åˆ¥åç¨±ç”¨ä¾†å»ºç«‹ç‰©ä»¶å¯¦é«”ï¼Œè€Œä¸éœ€è¦å†ä½¿ç”¨ <code>new</code> é—œéµå­—ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$app = Container::resolve(&#39;App&#39;);
</code></pre></div><p>æˆ‘å€‘å¸Œæœ› <code>Container::resolve()</code> æ–¹æ³•æœƒè‡ªå‹•ç”¢ç”Ÿåƒæ•¸æ‰€å°æ‡‰çš„ç‰©ä»¶ï¼Œè§£æ±ºé€™å€‹é¡åˆ¥å»ºæ§‹å­æ‰€éœ€è¦çš„ä¾è³´é—œä¿‚ã€‚å®ƒçš„å¯¦ä½œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Container
{
    // ...

    public static function resolve($name)
    {
        if (!class_exists($name, true)) {
            return null;
        }

        $reflectionClass = new ReflectionClass($name);
        $reflectionConstructor = $reflectionClass-&gt;getConstructor();
        $reflectionParams = $reflectionConstructor-&gt;getParameters();

        $args = [];
        foreach ($reflectionParams as $param) {
            $class = $param-&gt;getClass()-&gt;getName();
            $args[] = static::get($class);
        }

        return !empty($args) ?
               $reflectionClass-&gt;newInstanceArgs($args) :
               new $class();
    }
}
</code></pre></div><p><code>Container::resolve()</code> æ–¹æ³•èˆ‡ <code>Container::get()</code> æ–¹æ³•çš„åŸç†é¡ä¼¼ï¼Œä½†è¼ƒç‰¹åˆ¥çš„æ˜¯å®ƒä½¿ç”¨äº† <code>ReflectionClass::getConstructor()</code> æ–¹æ³•ä¾†å–å¾—é¡åˆ¥å»ºæ§‹å­çš„ <code>ReflectionMethod</code> å¯¦é«”ï¼›æ¥è‘—å†ç”¨ <code>ReflectionMethod::getParameters()</code> å–å‡ºåƒæ•¸çš„ <code>ReflectionParameter</code> ç‰©ä»¶é›†åˆ (é™£åˆ—) ã€‚</p>
<p>è€Œå¾Œæˆ‘å€‘å°±å¯ä»¥åœ¨è¿´åœˆä¸­ä¸€ä¸€é€é <code>ReflectionParameter::getClass()</code> æ–¹æ³•èˆ‡ <code>ReflectionClass::getName()</code> æ–¹æ³•ä¾†å–å¾— type hint æ‰€æŒ‡å‘çš„é¡åˆ¥æˆ–ä»‹é¢åç¨±ã€‚ç•¶æœ‰äº†åƒæ•¸æ‰€å°æ‡‰çš„é¡åˆ¥æˆ–ä»‹é¢åç¨±å¾Œï¼Œå°±å¯ä»¥ç”¨ <code>Container::get()</code> æ–¹æ³•ä¾†å–å¾—åƒæ•¸çš„ç‰©ä»¶å¯¦é«”ã€‚</p>
<p>æœ€å¾ŒæŠŠé€™äº›ç‰©ä»¶å¸¶å›å»ºæ§‹å­çš„åƒæ•¸è£¡ï¼Œä¸¦åˆå§‹åŒ–æˆ‘å€‘æ‰€éœ€è¦çš„ç‰©ä»¶å¯¦é«”ï¼Œå°±å®Œæˆäº† <code>App</code> é¡åˆ¥çš„è‡ªå‹•ä¾è³´æ³¨å…¥ã€‚</p>
<h2 id="æ·±å…¥æ€è€ƒ">æ·±å…¥æ€è€ƒ</h2>
<p>å†å¼·èª¿ä¸€æ¬¡ï¼Œé€™è£¡çš„ç¯„ä¾‹åªæ˜¯ç‚ºäº†ä»‹ç´¹ DI å®¹å™¨çš„åŸç†ï¼Œä¸¦ä¸èƒ½çœŸæ­£ç”¨åœ¨å¯¦å‹™ä¸Šã€‚å› ç‚ºä¸€å€‹å®Œæ•´çš„ DI å®¹å™¨é‚„è¦è€ƒæ…®ä»¥ä¸‹çš„å•é¡Œï¼š</p>
<ul>
<li>é¡åˆ¥ä¸å­˜åœ¨æ™‚çš„è™•ç†ã€‚</li>
<li>èˆ‡å…¶ä»–éé¡åˆ¥çš„åƒæ•¸æ•´åˆã€‚</li>
<li>å¦‚ä½•å»ºç«‹è¨­å®šæª”æ©Ÿåˆ¶ä»¥ä¾¿åˆ‡æ›ä¾è³´é—œä¿‚ã€‚</li>
<li>éè¿´åœ°è‡ªå‹•æ³¨å…¥ç‰©ä»¶å¯¦é«”ã€‚</li>
<li>å–å¾— Singleton ç‰©ä»¶å¯¦é«”ã€‚</li>
<li>å¯ä»¥é€éåŸå§‹ç¢¼ä¸Šçš„ DocBlock è¨»è§£ä¾†è¨»æ˜ä¾è³´é—œä¿‚ã€‚</li>
</ul>
<p>ç›®å‰å·²ç¶“æœ‰å¾ˆå¤š DI Framework å¹«æˆ‘å€‘è™•ç†å¥½é€™äº›äº‹æƒ…äº†ï¼Œå»ºè­°å¤§å®¶å¦‚æœçœŸçš„éœ€è¦åœ¨å°ˆæ¡ˆä¸­ä½¿ç”¨ DI æ™‚ï¼Œæ‡‰è©²æ¡ç”¨é€™äº› Framework ã€‚</p>
<h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>å¦‚æœå°ˆæ¡ˆä¸¦ä¸æœƒæœ‰å¤ªå¤šè®ŠåŒ–æ€§ï¼Œé‚£éº¼ä¾è³´æ³¨å…¥å°æˆ‘å€‘ä¾†èªªå°±ä¸æ˜¯é‚£éº¼é‡è¦ã€‚ä½†æ˜¯å¦‚æœå¸Œæœ›ç¨‹å¼å°ç‰¹å®šé¡åˆ¥çš„ä¾è³´æ€§é™ä½ï¼Œåªé‡å°æŠ½è±¡ä»‹é¢å¯¦ä½œï¼Œé‚£éº¼ä¾è³´æ³¨å…¥å°±æœ‰å…¶å¿…è¦æ€§ã€‚</p>
<p>åœ¨ PHP ä¸Šçš„ DI å®¹å™¨çš„åŸºæœ¬å¯¦ä½œåŸç†ä¹Ÿä¸è¤‡é›œï¼Œé€é Reflection æ©Ÿåˆ¶å°±å¯ä»¥çœ‹åˆ°é¡åˆ¥å…§éƒ¨çš„çµæ§‹ï¼Œè®“æˆ‘å€‘å°å®ƒçš„å»ºæ§‹å­æ³¨å…¥æˆ‘å€‘æƒ³è¦çš„åƒæ•¸å€¼ã€‚</p>
<p>DI å®¹å™¨è¦è€ƒé‡çš„éƒ¨ä»½ä¹Ÿä¸å°‘ï¼Œä½†é€™äº›åŠŸèƒ½éƒ½å·²ç¶“æœ‰ Framework å¯¦ä½œï¼Œæˆ‘å€‘æ‡‰è©²åœ¨å°ˆæ¡ˆä¸­ä½¿ç”¨å®ƒå€‘è€Œå„˜å¯èƒ½ä¸è¦è‡ªè¡Œé–‹ç™¼ã€‚</p>
<p>å¸Œæœ›é€éä»¥ä¸Šçš„ä»‹ç´¹ï¼Œå¯ä»¥è®“å¤§å®¶å° Framework çš„ä¾è³´æ³¨å…¥æ©Ÿåˆ¶æœ‰åŸºæœ¬çš„èªçŸ¥ã€‚</p>
<p>è¨»ï¼šä¸Šè¿°ç¨‹å¼ç¢¼éƒ½å¯ä»¥åœ¨ <a href="https://github.com/jaceju/php-di-container-examples">php-di-container-examples
</a> æ‰¾åˆ°ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>æ•´ç†ä¸€äº›å¸¸è¦‹çš„ PHP éŒ¯èª¤</title>
			<link>https://jaceju.net/summary-of-common-php-mistakes/</link>
			<pubDate>Mon, 21 Jul 2014 10:51:03 +0800</pubDate>
			
			<guid>https://jaceju.net/summary-of-common-php-mistakes/</guid>
			<description>æœ€è¿‘æœ‰æ•¸ç¯‡æ–‡ç« ä»‹ç´¹äº† PHP é–‹ç™¼è€…å¸¸è¦‹çš„éŒ¯èª¤ï¼Œæˆ‘é †æ‰‹æ•´ç†å¦‚ä¸‹ï¼š 10 Common PHP Coding Errors åœ¨ foreach è¿´åœˆä¸­ä½¿ç”¨äº†è¿­ä»£é …ç›®çš„åƒè€ƒã€‚ èª¤ç”¨äº† isset ã€‚ ææ··äº†å›å‚³å€¼æ˜¯å‚³åƒè€ƒé‚„æ˜¯å‚³å€¼ã€‚ åœ¨</description>
			<content type="html"><![CDATA[<p>æœ€è¿‘æœ‰æ•¸ç¯‡æ–‡ç« ä»‹ç´¹äº† PHP é–‹ç™¼è€…å¸¸è¦‹çš„éŒ¯èª¤ï¼Œæˆ‘é †æ‰‹æ•´ç†å¦‚ä¸‹ï¼š</p>
<!-- raw HTML omitted -->
<p><a href="http://www.toptal.com/php/10-most-common-mistakes-php-programmers-make">10 Common PHP Coding Errors</a></p>
<ol>
<li>åœ¨ foreach è¿´åœˆä¸­ä½¿ç”¨äº†è¿­ä»£é …ç›®çš„åƒè€ƒã€‚</li>
<li>èª¤ç”¨äº† isset ã€‚</li>
<li>ææ··äº†å›å‚³å€¼æ˜¯å‚³åƒè€ƒé‚„æ˜¯å‚³å€¼ã€‚</li>
<li>åœ¨è¿´åœˆä¸­åŸ·è¡Œä¸å¿…è¦çš„ SQL Query ã€‚</li>
<li>ä¸€æ¬¡å–å¾—å¤ªå¤šçµæœï¼Œé€ æˆä¸å¿…è¦çš„è¨˜æ†¶é«”æµªè²»ã€‚</li>
<li>å¿½ç•¥äº† Unicode / UTF-8 å•é¡Œã€‚</li>
<li>ç¸½æ˜¯å‡è¨­ $_POST æœƒåŒ…å« POST è³‡æ–™ã€‚</li>
<li>æ²’æœ‰æ³¨æ„ PHP ä¸æ”¯æ´ char å­—å…ƒå‹æ…‹ã€‚</li>
<li>å°ç·¨ç¢¼æ¨™æº–çš„å¿½ç•¥ï¼Œå°¤å…¶æ˜¯ PSR æ¨™æº– (ç•¶ç„¶æœ‰äº›ä¾æ“šä¸è¦‹å¾—å¥½ï¼Œä½†ä¹Ÿæ˜¯å¤§å®¶è¨è«–å‡ºä¾†çš„æ¨™æº–) ã€‚</li>
<li>èª¤ç”¨äº† empty å‡½å¼ã€‚</li>
</ol>
<p><a href="http://afilina.com/common-php-mistakes/">Common PHP Mistakes</a></p>
<ol>
<li>å¿˜äº†ä½¿ç”¨å¿«å–æ©Ÿåˆ¶ä¾†æ¸›å°‘å¤§é‡ requests å°ç³»çµ±çš„è¡æ“Šã€‚</li>
<li>æ²’æœ‰é¿é–‹ SQL Injection ã€‚</li>
<li>é–‹ç™¼æ™‚é—œæ‰äº†éŒ¯èª¤å›å ±ã€‚</li>
<li>è¡¨å–® POST å¾Œé‚„åœç•™åœ¨åŒä¸€é ã€‚</li>
<li>æ²’æœ‰å–„ç”¨å·²ç¶“å­˜åœ¨çš„å·¥å…·ï¼Œè€Œé‡é€ è¼ªå­ã€‚</li>
<li>é—œæ‰äº† timeout æ©Ÿåˆ¶ï¼Œè®“ script æ²’æœ‰åœæ­¢çš„ä¾æ“šã€‚</li>
<li>å¿½ç•¥äº†ç¶²ç«™å¯ç”¨æ€§ã€‚</li>
</ol>
<p><a href="http://www.sitepoint.com/7-mistakes-commonly-made-php-developers/">7 More Mistakes Commonly Made by PHP Developers</a></p>
<ol>
<li>ä½¿ç”¨éæ™‚çš„ mysql extention ã€‚</li>
<li>æ²’æœ‰ä½¿ç”¨ PDO çš„åƒæ•¸æ©Ÿåˆ¶ä¾†é¿å… SQL Injection ã€‚</li>
<li>æ²’æœ‰é‡å¯«ç¶²å€ï¼Œè®“å®ƒç¬¦åˆç¾ä»Šçš„ç¶²å€å®ˆå‰‡ã€‚</li>
<li>æŠ‘åˆ¶éŒ¯èª¤è¨Šæ¯çš„ç™¼ç”Ÿã€‚</li>
<li>åœ¨æ¢ä»¶åˆ¤æ–·å¼ä¸­è³¦å€¼ã€‚</li>
<li>æ›éœ²å¤ªå¤šæœ‰é—œç³»çµ±æ‰€ä½¿ç”¨çš„ Framework è³‡è¨Šã€‚</li>
<li>æ²’æœ‰ç§»é™¤æ‰é–‹ç™¼æ™‚çš„è¨­å®šæª”ã€‚</li>
</ol>
]]></content>
		</item>
		
		<item>
			<title>CSS3 å‹•ç•«åŸºç¤</title>
			<link>https://jaceju.net/css3-animation-notes/</link>
			<pubDate>Tue, 03 Jun 2014 10:28:36 +0800</pubDate>
			
			<guid>https://jaceju.net/css3-animation-notes/</guid>
			<description>è¨»ï¼šæœ¬æ–‡ç‚ºä½œè€…ç™¼è¡¨æ–¼ OpenFoundry ä¹‹ CSS3 å‹•ç•«åŸºç¤ä¸€æ–‡çš„å‚™ä»½ã€‚ åœ¨ JSConf.Asia 2013 ï¼Œ Lea Verou ä»‹ç´¹äº† CSS in the 4th dimension (å½±ç‰‡) ï¼Œå¼•ç™¼äº†æ•´å€‹ Web ç•Œå° CSS å‹•ç•«çš„æœŸç›¼ï¼›åœ¨ CSSå‹•ç•«ç°¡ä»‹ä¸€æ–‡ä¹Ÿå·²ç¶“</description>
			<content type="html"><![CDATA[<p>è¨»ï¼šæœ¬æ–‡ç‚ºä½œè€…ç™¼è¡¨æ–¼ OpenFoundry ä¹‹ <a href="http://www.openfoundry.org/en/tech-column/9233-css3-animation">CSS3 å‹•ç•«åŸºç¤</a>ä¸€æ–‡çš„å‚™ä»½ã€‚</p>
<!-- raw HTML omitted -->
<p>åœ¨ JSConf.Asia 2013 ï¼Œ Lea Verou ä»‹ç´¹äº† <a href="http://lea.verou.me/css-4d/#intro">CSS in the 4th dimension</a>  (<a href="https://www.youtube.com/watch?v=NTJUFQmHbvc">å½±ç‰‡</a>) ï¼Œå¼•ç™¼äº†æ•´å€‹ Web ç•Œå° CSS å‹•ç•«çš„æœŸç›¼ï¼›åœ¨ <a href="http://www.ruanyifeng.com/blog/2014/02/css_transition_and_animation.html">CSSå‹•ç•«ç°¡ä»‹</a>ä¸€æ–‡ä¹Ÿå·²ç¶“æŠŠé‡é»æ•´ç†å¥½äº†ã€‚</p>
<p>ä»¥ä¸‹æˆ‘å€‘å°‡æœƒä»‹ç´¹ä¸»è¦å…©å€‹ CSS3 åœ¨å‹•ç•«çš„å±¬æ€§ï¼š Transition èˆ‡ Animation ï¼Œä¸¦é…åˆå¯¦ä¾‹ä¾†ç·´ç¿’é€™äº›æŠ€è¡“ï¼Œå¾Œé¢æˆ‘ä¹Ÿæœƒä»‹ç´¹ä¸€äº›ä¸éŒ¯çš„ç›¸é—œé–‹ç™¼å·¥å…·ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="transition">Transition</h2>
<p>åœ¨ä»¥å¾€ HTML å…ƒç´ åœ¨å…©ç¨®å¤–è§€ä¹‹é–“çš„è®Šæ›ï¼Œåªèƒ½å¾ä¸€ç¨®å¤–è§€ç›´æ¥è·³åˆ°å¦ä¸€ç¨®å¤–è§€ï¼Œç€è¦½è€…ä¸¦æ²’æœ‰è¾¦æ³•æ„Ÿå—åˆ°é€™å…©ç¨®å¤–è§€ä¸­é–“å¹³æ»‘çš„è½‰æ›ï¼Œé€ æˆäº†è¦–è¦ºä¸Šçš„ä¸é©ã€‚</p>
<!-- raw HTML omitted -->
<h3 id="åŸºæœ¬çš„-transition">åŸºæœ¬çš„ transition</h3>
<p>è€Œ CSS ç‚ºäº†è£œè¶³é€™æ–¹é¢çš„è¦–è¦ºè½‰æ›ç‰¹æ•ˆï¼Œç‰¹åˆ¥åŠ å…¥ <code>transition</code> å±¬æ€§ã€‚ ä¸€å€‹ç°¡æ˜“çš„å‹•ç•«æ•ˆæœå°±æ˜¯åœ¨æƒ³è¦è®ŠåŒ–çš„ç‹€æ…‹ä¸Šï¼ŒåŠ å…¥ä¸€å€‹ <code>transition</code> å±¬æ€§ï¼Œè€Œå…¶å€¼ç‚ºè®ŠåŒ–éœ€æ­·æ™‚çš„ç§’æ•¸ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">div</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
    <span class="err">...</span>
    <span class="k">transition</span><span class="p">:</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>é€™éº¼ä¸€ä¾†ï¼Œ <code>transition</code> å°±æœƒè‡ªå‹•å¹«æˆ‘å€‘è£œè¶³ä¸­é–“çš„éå ´å‹•ç•«ã€‚ä¾‹å¦‚æˆ‘å€‘å¸Œæœ›ä¸Šé¢çš„ä¾‹å­èƒ½å¹³é †åœ°è½‰æ›ï¼Œæ­·æ™‚ä¸€ç§’ï¼š</p>
<!-- raw HTML omitted -->
<p>æˆ‘å€‘ä¹Ÿå¯ä»¥è®“é«˜åº¦ä»¥å¤–çš„å±¬æ€§æœ‰å‹•ç•«æ•ˆæœï¼Œä¾‹å¦‚é¡è‰²ï¼š</p>
<!-- raw HTML omitted -->
<h3 id="transition-å±¬æ€§è©³è§£"><code>transition</code> å±¬æ€§è©³è§£</h3>
<p><code>transition</code> å±¬æ€§å…¶å¯¦è·Ÿ <code>font</code> æˆ– <code>background</code> å±¬æ€§ä¸€æ¨£æ˜¯ç°¡å¯«å±¬æ€§ï¼Œå®ƒæ˜¯ä»¥ä¸‹å››å€‹å±¬æ€§çš„ç¸½å’Œï¼š</p>
<ul>
<li><code>transition-property</code>: è¦åšè®Šæ›çš„ CSS å±¬æ€§</li>
<li><code>transition-duration</code>: è®Šæ›éœ€è¦çš„æ™‚é–“ï¼Œå–®ä½ç‚º <code>s</code> æˆ– <code>ms</code></li>
<li><code>transition-delay</code>: å»¶é²å¤šä¹…å¾Œé–‹å§‹è®Šæ›ï¼Œå–®ä½ç‚º <code>s</code> æˆ– <code>ms</code></li>
<li><code>transition-timing-function</code>: ç¨±ç‚º Timing Funciton ï¼Œç”¨åç¨±ä¾†å®šç¾©è®Šæ›æ™‚çš„åŠ é€Ÿåº¦ã€‚</li>
</ul>
<p>é€™äº›å±¬æ€§å¯ä»¥åˆ†é–‹å¯«ï¼Œä¹Ÿå¯ä»¥å°‡å®ƒå€‘çš„å€¼åŒæ™‚å¯«åœ¨ <code>transition</code> å±¬æ€§è£¡ï¼›å”¯ä¸€è¦æ³¨æ„çš„æ˜¯ <code>transition-duration</code> èˆ‡ <code>transition-delay</code> çš„å€¼å¯«åœ¨ä¸€èµ·æ™‚æœ‰å‰è¿°çš„é †åºé—œä¿‚ã€‚å‰é¢ä¾‹å­ä¸­çš„ <code>transition: 1s</code> ï¼Œå…¶ <code>1s</code> å³ç‚º <code>transition-duration</code> çš„å€¼ã€‚</p>
<h3 id="transition-property-å¯ä½¿ç”¨-transition-çš„å±¬æ€§"><code>transition-property</code> å¯ä½¿ç”¨ transition çš„å±¬æ€§</h3>
<p>ä¸æ˜¯æ‰€æœ‰ CSS å±¬æ€§éƒ½å¯ä»¥ä½¿ç”¨ <code>transition</code> ï¼Œå¯ä»¥åƒè€ƒé€™ç¯‡ <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties">CSS animated properties</a> å¾—çŸ¥æœ‰å“ªäº›å±¬æ€§å¯ä»¥ä½¿ç”¨ <code>transition</code> ã€‚</p>
<p><code>transition</code> é è¨­æ˜¯å°æ‰€æœ‰å¯å¥—ç”¨çš„å±¬æ€§åšè½‰å ´æ•ˆæœï¼Œä¹Ÿå°±æ˜¯é—œéµå­— <code>all</code> ï¼›ä½†å…¶å¯¦ä¹Ÿå¯ä»¥åªé‡å°æŸå€‹å±¬æ€§åš <code>transition</code> è®ŠåŒ–ï¼Œå…¶ä»–å±¬æ€§å‰‡ç¶­æŒåŸä¾†çš„ç›´æ¥è®ŠåŒ–ã€‚</p>
<!-- raw HTML omitted -->
<h3 id="é‡å°ä¸åŒå±¬æ€§åŒæ™‚åš-transition">é‡å°ä¸åŒå±¬æ€§åŒæ™‚åš transition</h3>
<p>å¦‚æœå¸Œæœ›å°å…©å€‹ä»¥ä¸Šçš„å±¬æ€§åš <code>transition</code> ï¼Œå¯æ˜¯åˆä¸å¸Œæœ›å½±éŸ¿å…¶ä»–å±¬æ€§æ™‚ï¼Œå¯ä»¥ç”¨é€—è™Ÿ <code>,</code> å°‡è¦åš transition çš„å±¬æ€§åˆ†éš”é–‹ä¾†ã€‚</p>
<!-- raw HTML omitted -->
<h3 id="transition-delay-å»¶é²è®Šæ›"><code>transition-delay</code> å»¶é²è®Šæ›</h3>
<p>æœ‰æ™‚å€™æˆ‘å€‘éœ€è¦å…ˆè®Šæ›ä¸€å€‹å±¬æ€§ï¼Œå†è®Šæ›å¦ä¸€å€‹å±¬æ€§ï¼Œé€™æ™‚å€™å°±éœ€è¦å°å¾Œè€…åŠ å…¥ä¸€å€‹å»¶é²æ™‚é–“ï¼›å®ƒéœ€è¦åŠ åœ¨åŸå…ˆæˆ‘å€‘å®šç¾©å¥½çš„æ­·æ™‚æ™‚é–“ä¹‹å¾Œã€‚</p>
<!-- raw HTML omitted -->
<h3 id="transition-timing-function-timing-funciton"><code>transition-timing-function</code> Timing Funciton</h3>
<p>Timing Funciton åŒ…å«æ•¸ç¨®æ¨¡å¼ï¼Œä¸‹åœ–å¯ä»¥çœ‹å‡ºå®ƒå€‘çš„åŠ é€Ÿåº¦æ›²ç·šã€‚</p>
<p><img src="http://letrainde13h37.fr/wp-content/uploads/2012/09/trTimingFn.png" alt=""></p>
<ul>
<li><code>linear</code>: åŒ€é€Ÿ</li>
<li><code>ease</code>: æ€¥åŠ é€Ÿå¾Œæ¸›é€Ÿ (é è¨­å€¼)</li>
<li><code>ease-in</code>: åŠ é€Ÿ</li>
<li><code>ease-out</code>: å‡é€Ÿ</li>
<li><code>ease-in-out</code>: è¼ƒå¹³ç·©çš„ <code>ease</code></li>
<li><code>cubic-bezier</code>: è‡ªå®šç¾©é€Ÿåº¦æ¨¡å¼</li>
</ul>
<h3 id="cubic-bezier-å‡½å¼">cubic-bezier å‡½å¼</h3>
<p>åˆ©ç”¨è²èŒ²æ›²ç·šå‡½å¼ä¾†å®šç¾©åŠ é€Ÿæ›²ç·šï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç·šä¸Šå·¥å…· <!-- raw HTML omitted -->cubic-bezier()<!-- raw HTML omitted --> ä¾†æ‰¾å‡ºéœ€è¦çš„æ•¸å€¼ã€‚</p>
<h3 id="é›™å‘çš„-transition">é›™å‘çš„ transition</h3>
<p>Transition çš„æ•ˆæœåªæœƒä½œç”¨åœ¨æœ‰åŠ å…¥ <code>transition</code> å±¬æ€§çš„é‚£å€‹ç‹€æ…‹ï¼Œä¸€æ—¦è¦å›å¾©è‡³åŸä¾†çš„ç‹€æ…‹æ™‚ï¼Œå°±æœƒå¤±å» Transition çš„å¹³é †æ•ˆæœäº†ã€‚é€™æ™‚æˆ‘å€‘éœ€è¦å°åŸå…ˆçš„ç‹€æ…‹ï¼Œä¹ŸåŠ å…¥ <code>transition</code> ã€‚</p>
<!-- raw HTML omitted -->
<h3 id="transition-çš„é™åˆ¶">Transition çš„é™åˆ¶</h3>
<p><code>transition</code> çš„é–‹å§‹å’ŒçµæŸéƒ½å¿…é ˆæ˜¯å…·é«”æ•¸å€¼ï¼›ä¾‹å¦‚ä»¥ä¸‹çš„ CSS å±¬æ€§å€¼ä¹‹é–“æ˜¯ç„¡æ³•è¢«è¨ˆç®—çš„ï¼Œå°±ç„¡æ³•ä½¿ç”¨ <code>transition</code> ï¼š</p>
<ul>
<li><code>height: auto</code> (ä¸ç¢ºå®šçš„å€¼) è‡³ <code>height: 100px</code> (å…·é«”æ•¸å€¼)</li>
<li><code>display: none</code> è‡³ <code>display: block</code></li>
<li><code>background: url(foo.jpg)</code> è‡³ <code>background: url(bar.jpg)</code></li>
</ul>
<!-- raw HTML omitted -->
<p>å¦å¤– <code>transition</code> éœ€è¦äº‹ä»¶ä¾†è§¸ç™¼å®ƒçš„å‹•ä½œï¼Œæ‰€ä»¥æ²’è¾¦æ³•åœ¨ä¸€é€²é é¢è‡ªå‹•ç”¢ç”Ÿæ•ˆæœã€‚æ‰€ä»¥å¦‚æœä¸é€é JavaScript äº‹ä»¶è™•ç†çš„è©±ï¼Œå°±åªèƒ½é…åˆèˆ‡äº‹ä»¶æœ‰é—œçš„ Pseudo Classes (å½é¡åˆ¥ï¼Œå³ <code>:hover</code> ã€ <code>:focus</code> ç­‰) ä¾†å‘ˆç¾æ•ˆæœäº†ã€‚</p>
<!-- raw HTML omitted -->
<h3 id="æ­é…-jquery">æ­é… jQuery</h3>
<p>å¦‚æœæ­é… jQuery ç­‰å¯ä»¥æ“ä½œ DOM å…ƒç´ çš„ library ï¼Œæˆ‘å€‘å°±å¯ä»¥åšæ›´è¤‡é›œçš„æ“ä½œã€‚</p>
<!-- raw HTML omitted -->
<h3 id="ç€è¦½å™¨æ”¯æ´">ç€è¦½å™¨æ”¯æ´</h3>
<p>ç›®å‰åŒ…å« IE 10+ çš„ä¸»æµç€è¦½å™¨éƒ½å·²ç¶“æ”¯æ´ <code>transition</code> ï¼Œå¯åƒè€ƒ <a href="http://caniuse.com/#search=transition">Can I use</a> ã€‚</p>
<h2 id="animation">Animation</h2>
<p>é›–ç„¶ <code>transition</code> å±¬æ€§ç°¡å–®æ˜“ç”¨ï¼Œä½†ä¹Ÿæœ‰ä¸Šè¿°çš„ä¾·é™ã€‚å› æ­¤å°±æœ‰äº† <code>animation</code> é€™å€‹å±¬æ€§ä¾†å½Œè£œå…¶ä¸è¶³ã€‚</p>
<h3 id="åŸºæœ¬çš„-animation">åŸºæœ¬çš„ Animation</h3>
<p>æœ€åŸºæœ¬çš„ <code>animation</code> è¦æŒ‡å®šå‹•ç•«æŒçºŒçš„æ™‚é–“ï¼Œé‚„æœ‰å‹•ç•«çš„åç¨±ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">div</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
  <span class="k">animation</span><span class="p">:</span> <span class="mi">1</span><span class="kt">s</span> <span class="n">fat</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>è€Œå‹•ç•«çš„å®šç¾©å‰‡æ˜¯ç”¨ <code>@keyframes</code> é€™å€‹å±¬æ€§ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">@</span><span class="k">keyframes</span> <span class="nt">fat</span> <span class="p">{</span>
  <span class="nt">0</span><span class="o">%</span> <span class="p">{</span> <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>
  <span class="nt">50</span><span class="o">%</span> <span class="p">{</span> <span class="k">width</span><span class="p">:</span> <span class="mi">150</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>
  <span class="nt">100</span><span class="o">%</span> <span class="p">{</span> <span class="k">width</span><span class="p">:</span> <span class="mi">200</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>åœ¨ <code>@keyframes</code> ä¸­å¯ä»¥å®šç¾©å¤šå€‹ç‹€æ…‹ï¼Œç¯„åœå¯å¾ <code>0%</code> è‡³ <code>100%</code> ã€‚å¦å¤– <code>0%</code> å¯å¯«æˆ <code>from</code> ï¼Œ <code>100%</code> å¯å¯«æˆ <code>to</code> ï¼Œå…¶ä»–ç‹€æ…‹é‚„æ˜¯ä½¿ç”¨æ•¸å­—ç™¾åˆ†æ¯”ã€‚</p>
<!-- raw HTML omitted -->
<h3 id="animation-å±¬æ€§è©³è§£"><code>animation</code> å±¬æ€§è©³è§£</h3>
<p><code>animation</code> å±¬æ€§å’Œ <code>transition</code> å±¬æ€§ä¸€æ¨£ï¼Œéƒ½æ˜¯ç°¡å¯«å±¬æ€§ã€‚å®ƒä»£è¡¨ä»¥ä¸‹å±¬æ€§çš„ç¸½å’Œï¼š</p>
<ul>
<li><code>animation-name</code>: å‹•ç•«åç¨±</li>
<li><code>animation-duration</code>: æ’­æ”¾ä¸€æ¬¡å‹•ç•«éœ€è¦çš„æ™‚é–“ï¼Œå–®ä½ç‚º <code>s</code> æˆ– <code>ms</code></li>
<li><code>animation-timing-function</code>: å‹•ç•«çš„åŠ é€Ÿåº¦æ›²ç·š</li>
<li><code>animation-delay</code>: å»¶é²å¤šä¹…å¾Œå•Ÿå§‹å‹•ç•«</li>
<li><code>animation-iteration-count</code>: å‹•ç•«æ’­æ”¾æ¬¡æ•¸ï¼Œå¯ç”¨ <code>infinite</code></li>
<li><code>animation-direction</code>: å‹•ç•«æ’­æ”¾æ–¹å‘</li>
<li><code>animation-fill-mode</code>: æŒ‡å®šå‹•ç•«æ’­æ”¾å‰å¾Œçš„ç‹€æ…‹</li>
<li><code>animation-play-state</code>: æŒ‡å®šå‹•ç•«æ’­æ”¾æˆ–æš«åœ</li>
</ul>
<p>å…¶ä¸­ <code>animation-duration</code> ã€ <code>animation-timing-function</code> ã€ <code>animation-delay</code> å¯åƒè€ƒä¸Šé¢ <code>transition</code> ç›¸ä¼¼å±¬æ€§çš„ä»‹ç´¹ã€‚</p>
<h3 id="animation-iteration-count-æ’­æ”¾æ¬¡æ•¸"><code>animation-iteration-count</code> æ’­æ”¾æ¬¡æ•¸</h3>
<p>é è¨­ <code>animation</code> å’Œ <code>transition</code> ä¸€æ¨£åªæœƒå‹•ä½œä¸€æ¬¡ï¼Œä½†æˆ‘å€‘å¯ä»¥åŠ å…¥æ•¸å­—ä¾†æŒ‡å®šå‹•ç•«æ•ˆæœæ’­æ”¾çš„æ¬¡æ•¸ã€‚</p>
<!-- raw HTML omitted -->
<p>æˆ–æ˜¯ä»¥ <code>infinite</code> é€™å€‹é—œéµå­—ä¾†ç„¡é™æ¬¡æ’­æ”¾ã€‚</p>
<!-- raw HTML omitted -->
<h3 id="animation-direction-æ’­æ”¾æ–¹å‘"><code>animation-direction</code> æ’­æ”¾æ–¹å‘</h3>
<p>æ‰€è¬‚çš„æ’­æ”¾æ–¹å‘æ˜¯æŒ‡å¾å‹•ç•«æ•ˆæœ 0% åˆ° 100% çš„æ–¹å‘ï¼ŒåŒæ™‚ä¹Ÿæ˜¯é è¨­çš„ <code>normal</code> å€¼ã€‚å¯ä¾›è¨­å®šçš„å€¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>normal</code> ï¼šæ¯æ¬¡æ’­æ”¾éƒ½æ˜¯å¾ 0% è‡³ 100%</li>
<li><code>reverse</code> ï¼šæ¯æ¬¡æ’­æ”¾éƒ½æ˜¯å¾ 100% è‡³ 0%</li>
<li><code>alternate</code> ï¼šæ’­æ”¾å…©æ¬¡ä»¥ä¸Šçš„è©±ï¼Œæœƒå¾ 0% è‡³ 100% ï¼Œå†å¾ 100% å›åˆ° 0% ï¼Œä»¥æ­¤é¡æ¨</li>
<li><code>alternate-reverse</code> ï¼šè·Ÿ <code>alternate</code> ç›¸åï¼Œæœƒå…ˆå¾ 100% é–‹å§‹æ’­æ”¾</li>
</ul>
<p><code>animation-direction: reverse</code> ï¼š</p>
<!-- raw HTML omitted -->
<p><code>animation-direction: alternate</code> ï¼š</p>
<!-- raw HTML omitted -->
<p><code>animation-direction: alternate-reverse</code> ï¼š</p>
<!-- raw HTML omitted -->
<h3 id="animation-fill-mode-å‹•ç•«æ’­æ”¾å‰å¾Œçš„ç‹€æ…‹"><code>animation-fill-mode</code> å‹•ç•«æ’­æ”¾å‰å¾Œçš„ç‹€æ…‹</h3>
<p>å¦‚æœæƒ³è¦æ§åˆ¶å‹•ç•«æ’­æ”¾å®Œå¾Œçš„æœ€çµ‚ç‹€æ…‹ï¼Œå¯ä»¥ç”¨ <code>animation-fill-mode</code> å±¬æ€§ï¼Œå®ƒå¯è¨­å®šçš„å€¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>none</code> ï¼šå›åˆ°æœªæ’­æ”¾å‹•ç•«æ•ˆæœå‰çš„ç‹€æ…‹</li>
<li><code>forwards</code> ï¼šåœåœ¨å‹•ç•«çš„æœ€å¾Œä¸€å€‹ç‹€æ…‹ä¸Š</li>
<li><code>backwards</code> ï¼šåœåœ¨å‹•ç•«çš„ç¬¬ä¸€å€‹ç‹€æ…‹ä¸Š (å¯¦æ¸¬ä¸å‡ºä¾†)</li>
<li><code>both</code> ï¼šè¦– <code>animation-direction</code> ä¾†æ±ºå®šåœåœ¨å“ªä¸€å€‹ç‹€æ…‹ä¸Šã€‚</li>
</ul>
<!-- raw HTML omitted -->
<p>è¨»ï¼š <code>backwards</code> é€™å€‹å€¼æˆ‘åœ¨ Chrome å’Œ Firefox éƒ½è©¦ä¸å‡ºä¾†ã€‚</p>
<h3 id="animation-play-state-æŒ‡å®šå‹•ç•«æ’­æ”¾æˆ–æš«åœ"><code>animation-play-state</code> æŒ‡å®šå‹•ç•«æ’­æ”¾æˆ–æš«åœ</h3>
<p><code>animation-play-state</code> æœ‰å…©å€‹å±¬æ€§å€¼ï¼š <code>running</code> åŠ <code>paused</code> ï¼Œå…¶ä¸­ <code>running</code> æ˜¯é è¨­å€¼ã€‚</p>
<p>é€™å€‹å±¬æ€§å¿…é ˆç¨ç«‹å®šç¾©ï¼Œç„¡æ³•è¢«æ”¾åœ¨ <code>animation</code> å±¬æ€§è£¡ã€‚</p>
<!-- raw HTML omitted -->
<h3 id="ç€è¦½å™¨æ”¯æ´-1">ç€è¦½å™¨æ”¯æ´</h3>
<p><code>animation</code> å±¬æ€§ç›®å‰åœ¨ IE 10+ ä»¥ä¸Šä¸»æµç€è¦½å™¨éƒ½å¯ä»¥åŸ·è¡Œï¼Œä½†æ¡ç”¨ Webkit å¼•æ“çš„ç€è¦½å™¨å¿…é ˆåŠ ä¸Š <code>-webkit-</code> å‰ç¶´å­—ä¸²ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">div</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
  <span class="kp">-webkit-</span><span class="k">animation</span><span class="p">:</span> <span class="mi">1</span><span class="kt">s</span> <span class="n">name</span><span class="p">;</span>
  <span class="k">animation</span><span class="p">:</span> <span class="mi">1</span><span class="kt">s</span> <span class="n">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">-webkit-keyframes</span> <span class="nt">name</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">keyframes</span> <span class="nt">name</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>
</code></pre></div><h2 id="å¯¦ä¾‹">å¯¦ä¾‹</h2>
<p>æ¥ä¸‹ä¾†æˆ‘å€‘ç”¨ Animation æ­é… Transform ä¾†åšç°¡å–®çš„æ—‹è½‰å‹•ç•«ã€‚ Transform æ˜¯ç”¨ä¾†è®“ HTML å…ƒç´ è®Šå½¢çš„å±¬æ€§ï¼Œé›–ç„¶è·Ÿå‹•ç•«æ²’æœ‰ç›´æ¥çš„é—œä¿‚ï¼Œä½†å®ƒæ˜¯å¯ä»¥å¥—ç”¨å‹•ç•«æ•ˆæœçš„ã€‚é€™é‚Šæˆ‘ä¸æ‰“ç®—è©³ç´°ä»‹ç´¹å®ƒï¼Œåªæœƒç”¨åˆ°æ—‹è½‰çš„æ•ˆæœã€‚</p>
<p>å®ƒçš„èªæ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">div</span> <span class="p">{</span>
    <span class="k">transform</span><span class="p">:</span> <span class="nb">rotate</span><span class="p">(</span><span class="err">Î¸</span><span class="p">);</span>
    <span class="k">transform-origin</span><span class="p">:</span> <span class="n">x</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p><code>rotate(Î¸)</code> æ˜¯æŒ‡è®“æŒ‡å®šå…ƒç´ ä»¥åƒè€ƒé»ç‚ºä¸­å¿ƒè»¸ 2D æ—‹è½‰ Î¸ åº¦ï¼Œ <code>transform-origin</code> æœƒå°‡ <code>(x, y)</code> è¨­ç‚ºåƒè€ƒé»ã€‚ç•¶æˆ‘å€‘æŠŠ <code>transform: rotate(Î¸)</code> æ”¾åˆ° <code>@keyframes</code> ä¸­æ™‚ï¼Œ <code>animation</code> å°±æœƒæ”¹è®Š <code>Î¸</code> å€¼ä¾†åšå‡ºå‹•ç•«æ•ˆæœã€‚</p>
<p>ä»¥ä¸‹æ¨¡æ“¬ç°¡å–®çš„å¤ªé™½ã€åœ°çƒã€æœˆäº®çš„é€±æœŸè®ŠåŒ–ã€‚</p>
<!-- raw HTML omitted -->
<p>æ›´é…·çš„ç¯„ä¾‹åƒè€ƒï¼š</p>
<ul>
<li><a href="http://www.creativebloq.com/css3/animation-with-css3-712437">20 stunning examples of CSS3 animation</a></li>
<li><a href="http://neography.com/experiment/circles/solarsystem/">Our Solar System</a></li>
<li><a href="http://designscrazed.com/css3-animation-examples/">30 Best Creative CSS3 Animation Examples</a></li>
<li><a href="http://goo.gl/SHWmEx">Codepen.io CSS Animation</a></li>
</ul>
<h2 id="é–‹ç™¼å·¥å…·">é–‹ç™¼å·¥å…·</h2>
<h3 id="css-30-maker">CSS 3.0 Maker</h3>
<p><a href="http://www.css3maker.com">CSS 3.0 Marker</a> å¯ä»¥è®“æˆ‘å€‘èª¿æ•´ CSS3 ç›¸é—œå±¬æ€§çš„åƒæ•¸ï¼Œä¸¦é è¦½æ•ˆæœã€‚ç¢ºèªå¾Œå°±å¯ä»¥ç”¢ç”Ÿå°æ‡‰çš„ CSS ç¢¼ï¼Œå¥—ç”¨åˆ°å°ˆæ¡ˆä¸Šã€‚</p>
<h3 id="animatecss">Animate.css</h3>
<p><a href="http://daneden.github.io/animate.css/">Animate.css</a> é€™å€‹ CSS framework æä¾›å¾ˆå¤šçµ„å·²ç¶“å®šç¾©å¥½å‹•ç•«æ•ˆæœçš„ CSS class ï¼Œè®“æˆ‘å€‘å¯ä»¥ç›´æ¥å¥—åœ¨ HTML å…ƒç´ ä¸Šï¼Œæˆ–æ˜¯æ­é… jQuery ä¾†æ“ä½œ class ä¾†ç”¢ç”Ÿå‹•ç•«æ•ˆæœã€‚</p>
<!-- raw HTML omitted -->
<h3 id="animate-mixin-for-compasssass">Animate Mixin for Compass/SASS</h3>
<p><a href="http://thecssguru.freeiz.com/animate/">Animate Mixin for Compass/SASS</a> æä¾›äº†ä¸€çµ„å¾ˆæ£’çš„ CSS3 Animation mixins ï¼Œè®“æˆ‘å€‘å¯ä»¥ç›´æ¥å¥—ç”¨ã€‚å®ƒå…¶å¯¦å°±æ˜¯å¾ Animation.css ç§»æ¤éä¾†çš„ã€‚</p>
<h3 id="anijs">AniJS</h3>
<p><a href="http://anijs.github.io/">AniJS</a> æ˜¯ä¸€å€‹å®£å‘Šå¼çš„ CSS å‹•ç•« library ï¼Œå®ƒè®“æˆ‘å€‘å¯ä»¥åœ¨ HTML å…ƒç´ ä¸­åŠ å…¥ä¸€å€‹ <code>data-anijs</code> å±¬æ€§ï¼Œä¸¦ç”¨æ•˜è¿°å¼ä¾†å®šç¾©å‹•ä½œäº‹ä»¶ã€å‹•ç•«æ•ˆæœã€ä»¥åŠè¦ä½œç”¨åœ¨å“ªå€‹å…ƒç´ ä¸Šã€‚è¦ç‰¹åˆ¥æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¹Ÿå¿…é ˆæ­é… Animation.css ä½¿ç”¨ã€‚</p>
<!-- raw HTML omitted -->
]]></content>
		</item>
		
		<item>
			<title>20 å€‹å¯¦ç”¨çš„å‰ç«¯é–‹ç™¼åƒè€ƒè³‡è¨Šæ•´ç†</title>
			<link>https://jaceju.net/20-docs-guides-front-end-developers/</link>
			<pubDate>Fri, 25 Apr 2014 14:55:29 +0800</pubDate>
			
			<guid>https://jaceju.net/20-docs-guides-front-end-developers/</guid>
			<description>åŸæ–‡é€£çµï¼š 20 Useful Docs and Guides for Front-End Developers çœ‹åˆ°ä¸Šé¢çš„æ–‡ç« æ”¶é›†äº†è¨±å¤šå‰ç«¯é–‹ç™¼åƒè€ƒè³‡è¨Šï¼Œè¦ºå¾—éå¸¸å¯¦ç”¨ï¼Œæ•…å°‡é‡é»æ•´ç†å¦‚ä¸‹ï¼š CSS Vocabulary å¯ä»¥ç­è§£ CSS ä¸­çš„åè©å¯¦éš›å°æ‡‰çš„éƒ¨ä»½ã€‚ Liquidapsive</description>
			<content type="html"><![CDATA[<p>åŸæ–‡é€£çµï¼š <a href="http://www.sitepoint.com/20-docs-guides-front-end-developers/">20 Useful Docs and Guides for Front-End Developers</a></p>
<p>çœ‹åˆ°ä¸Šé¢çš„æ–‡ç« æ”¶é›†äº†è¨±å¤šå‰ç«¯é–‹ç™¼åƒè€ƒè³‡è¨Šï¼Œè¦ºå¾—éå¸¸å¯¦ç”¨ï¼Œæ•…å°‡é‡é»æ•´ç†å¦‚ä¸‹ï¼š</p>
<!-- raw HTML omitted -->
<ol>
<li><a href="http://pumpula.net/p/apps/css-vocabulary/">CSS Vocabulary</a>
å¯ä»¥ç­è§£ CSS ä¸­çš„åè©å¯¦éš›å°æ‡‰çš„éƒ¨ä»½ã€‚</li>
<li><a href="http://liquidapsive.com/">Liquidapsive</a>
ä»‹ç´¹ Responsive / Adaptive / Liquid / Static å››ç¨®æ’ç‰ˆæ–¹å¼åŠå…¶å·®ç•°ï¼Œç¶²ç«™æœ¬èº«å³ç‚ºå¯¦ä¾‹ã€‚</li>
<li><a href="http://superherojs.com/">Superhero.js</a>
é€™å€‹ç¶²ç«™æ”¶é›†éå¸¸å¤šæœ‰é—œ JavaScript çš„æ–‡ä»¶ã€ç°¡å ±æˆ–å½±ç‰‡ï¼</li>
<li><a href="http://howtocoffeescript.com/">HowToCoffeeScript.com</a>
æŠŠè¨±å¤šå¸¸ç”¨çš„ CoffeeScript æŠ€å·§æ•´ç†æˆé€ŸæŸ¥è¡¨ã€‚</li>
<li><a href="http://www.w3.org/html/landscape/">The HTML Landscape</a>
ä»‹ç´¹ WHATWG / W3Câ€™s HTML5.0 / W3Câ€™s HTML5.1 ä¸‰ç¨® HTML è¦æ ¼çš„å·®ç•°ã€‚</li>
<li><a href="http://rawgithub.com/w3c/elements-of-html/master/index.html">The Elements of HTML</a>
æŠŠ 2.0 ~ 5.1 å„å€‹ç‰ˆæœ¬çš„ HTML å…ƒç´ æ•´ç†å‡ºä¾†äº†ï¼Œéå¸¸è©³ç›¡ï¼</li>
<li><a href="http://dorey.github.io/JavaScript-Equality-Table/">JavaScript Equality Table</a>
ç”¨äºŒç¶­è¡¨çš„å½¢å¼ä¾†å‘ˆç¾ JavaScript çš„ == / === / if æ˜¯å¦‚ä½•æ¯”å°å€¼ã€‚</li>
<li><a href="http://a11yproject.com/checklist.html">Web Accessibility Checklist</a>
åˆ—å‡ºå°ˆæ¡ˆå¦‚æœè¦é”æˆç„¡éšœç¤™æ‰€éœ€è¦æ³¨æ„çš„é …ç›®ã€‚</li>
<li><a href="http://www.staticapps.org/">Static Web Apps â€” A Field Guide</a>
åˆ—å‡ºäº†å¸¸è¦‹çš„ Web Apps é–‹ç™¼æ³¨æ„äº‹é …æˆ–è§£æ±ºæ–¹æ¡ˆã€‚</li>
<li><a href="http://qntm.org/files/re/re.html">Learn regular expressions in about 55 minutes</a>
åˆ—å‡ºæ­£è¦è¡¨é”å¼å­¸ç¿’çš„é‡é»ï¼Œä¸¦è¼”ä»¥ç¯„ä¾‹ä¾›åƒè€ƒã€‚</li>
<li><a href="http://ref.openweb.io/CSS/">Open Web CSS Reference</a>
é€™å€‹ç¶²ç«™æ•´ç†äº† CSS å±¬æ€§èˆ‡å…¶é€²éšç‰¹è‰²çš„ W3C é€£çµã€‚</li>
<li><a href="http://cssvalues.com/">CSS Values</a>
è¼¸å…¥ CSS å±¬æ€§å¾Œï¼Œå¯ä»¥çœ‹åˆ°å®ƒçš„å±¬æ€§å€¼åƒè€ƒã€ç€è¦½å™¨ç›¸å®¹æ€§åŠç›¸é—œé€£çµã€‚</li>
<li><a href="https://github.com/lukehoban/es6features">ES6features</a>
æ•´ç†äº† ECMAScript 6 çš„ç‰¹è‰²ã€‚</li>
<li><a href="https://github.com/mozilla/servo/wiki/Relevant-spec-links">Relevant Spec Links</a>
åˆ—å‡ºè¨±å¤šæœ‰é—œå‰ç«¯æŠ€è¡“çš„è¦æ ¼é€£çµã€‚</li>
<li><a href="http://overapi.com/">OverAPI.com</a>
å¹¾ä¹æŠŠæ‰€æœ‰æœ‰é—œç¶²ç«™é–‹ç™¼çš„èªè¨€æˆ–å·¥å…·æ‰€ä½¿ç”¨çš„ API éƒ½æ•´ç†æˆé€ŸæŸ¥è¡¨äº†ã€‚</li>
<li><a href="http://jstherightway.org/">JavaScript: The Right Way</a>
æ•´ç†äº†æ‰€æœ‰æœ‰é—œ JavaScript çš„é–‹ç™¼ç›¸é—œè³‡è¨Šã€‚</li>
<li><a href="http://html5index.org/">The HTML5 JavaScript API Index</a>
æ•´ç†äº† HTML5 åœ¨ JavaScript çš„æ‰€æœ‰ API ã€‚</li>
<li><a href="http://zealdocs.org/">Zeal</a>
é¡ä¼¼ Mac ä¸Šçš„ Dash åƒè€ƒæ–‡ä»¶æ•´åˆè»Ÿé«”ï¼Œæ˜¯çµ¦ Linux / Windows ä½¿ç”¨è€…ã€‚</li>
<li><a href="http://www.sketchingwithcss.com/samplechapter/cheatsheet.html">The Ultimate Flexbox Cheat Sheet</a>
æ•´ç†æœ‰é—œ CSS FlexBox çš„æ•™å­¸ã€‚</li>
<li><a href="http://jscode.org/">jsCode</a>
å¯ä»¥è‡ªè¨‚ä¸¦ç”¢ç”Ÿ JavaScript Coding Guideline çš„æœå‹™ã€‚</li>
</ol>
]]></content>
		</item>
		
		<item>
			<title>ScrollSpy ç°¡ä»‹</title>
			<link>https://jaceju.net/about-scrollspy/</link>
			<pubDate>Fri, 21 Feb 2014 11:16:00 +0800</pubDate>
			
			<guid>https://jaceju.net/about-scrollspy/</guid>
			<description>åœ¨ Single Page Design ä¸­ï¼Œæˆ‘å€‘å¸¸æœƒæŠŠè½è½é•·çš„é é¢åˆ†æˆå¹¾å€‹å€å¡Šï¼Œç„¶å¾Œåœ¨ä¸Šæ–¹æˆ–å´é‚Šé¸å–®ä¸­ä»¥é€™äº›å€å¡Šçš„æ¨™é¡Œä¾†åšç‚ºé¸å–®é …ç›®ã€‚ è€Œç•¶æˆ‘å€‘é»é¸é¸å–®é …ç›®æ™‚ï¼Œé é¢æœƒè‡ªå‹•è·³åˆ°</description>
			<content type="html"><![CDATA[<p>åœ¨ Single Page Design ä¸­ï¼Œæˆ‘å€‘å¸¸æœƒæŠŠè½è½é•·çš„é é¢åˆ†æˆå¹¾å€‹å€å¡Šï¼Œç„¶å¾Œåœ¨ä¸Šæ–¹æˆ–å´é‚Šé¸å–®ä¸­ä»¥é€™äº›å€å¡Šçš„æ¨™é¡Œä¾†åšç‚ºé¸å–®é …ç›®ã€‚</p>
<!-- raw HTML omitted -->
<p>è€Œç•¶æˆ‘å€‘é»é¸é¸å–®é …ç›®æ™‚ï¼Œé é¢æœƒè‡ªå‹•è·³åˆ° (æˆ–æ²å‹•åˆ°) è©²å€å¡Šï¼Œè€Œé¸å–®é …ç›®æœƒåç™½ã€‚åéä¾†å¦‚æœæˆ‘å€‘æ²å‹•åˆ°è©²å€å¡Šæ™‚ (å³è©²å€å¡Šä½”äº†è¢å¹•ä¸€å®šæ¯”ä¾‹çš„å¤§å°ï¼Œæˆ–æ˜¯æ¨™é ­åˆ°é”æŸä¸€ç‰¹å®šä½ç½®) ï¼Œå°æ‡‰è©²å€å¡Šçš„é¸å–®é …ç›®ä¹Ÿæœƒè‡ªå‹•åç™½ã€‚</p>
<p>é€™å€‹æ•ˆæœå°±ç¨±ç‚ºã€Œ ScrollSpy ã€ã€‚</p>
<p>ä»¥ä¸‹é€£çµåˆ†äº«äº†è¨±å¤šå·²ç¶“æ¡ç”¨ ScrollSpy ç‰¹æ•ˆçš„ç¶²ç«™ï¼Œå¤§å®¶ä¸å¦¨åƒè€ƒçœ‹çœ‹ï¼š</p>
<p><a href="http://www.hongkiat.com/blog/scrollspy-navigation-websites/">http://www.hongkiat.com/blog/scrollspy-navigation-websites/</a></p>
<p>ç›®å‰æœ‰å¾ˆå¤šå¥—ä»¶å¯ä»¥åšåˆ° ScrollSpy çš„æ•ˆæœäº†ï¼Œä¾‹å¦‚ Bootstrap 3 å°±åŒ…å«äº†é€™å€‹å¥—ä»¶ï¼š</p>
<p><a href="http://getbootstrap.com/javascript/#scrollspy">http://getbootstrap.com/javascript/#scrollspy</a></p>
<p>å¦å¤–ä¹Ÿæœ‰ç¨ç«‹çš„ jQuery Plugin ï¼š</p>
<ul>
<li><a href="https://github.com/thesmart/jquery-scrollspy">https://github.com/thesmart/jquery-scrollspy</a></li>
<li><a href="https://github.com/sxalexander/jquery-scrollspy">https://github.com/sxalexander/jquery-scrollspy</a></li>
<li><a href="http://www.dynamicdrive.com/dynamicindex1/ddscrollspymenu.htm">http://www.dynamicdrive.com/dynamicindex1/ddscrollspymenu.htm</a></li>
</ul>
<p>å¦‚æœä½ ä¸æƒ³ç”¨ jQuery æˆ–æ˜¯æƒ³ç­è§£ ScrollSpy çš„åŸç†ï¼Œä»¥ä¸‹ä¾¿æ˜¯ä¸€å€‹ä½¿ç”¨ç´” JavaScript æ‰€å¯«çš„ ScrollSpy é¡åˆ¥ï¼š</p>
<p><a href="https://gist.github.com/pascaldevink/2380129">https://gist.github.com/pascaldevink/2380129</a></p>
]]></content>
		</item>
		
		<item>
			<title>é–‹ç™¼ Laravel å¥—ä»¶æ™‚çš„å–®å…ƒæ¸¬è©¦</title>
			<link>https://jaceju.net/unittest-in-laravel-package-development/</link>
			<pubDate>Thu, 12 Dec 2013 22:51:00 +0800</pubDate>
			
			<guid>https://jaceju.net/unittest-in-laravel-package-development/</guid>
			<description>åœ¨å®˜æ–¹æ‰‹ä¸Šçš„æœ‰é—œé–‹ç™¼ Laravel 4 å¥—ä»¶çš„ç« ç¯€ï¼Œå…§å®¹å…¶å¯¦å¯«å¾—æ»¿è©³ç›¡äº†ã€‚åªæ˜¯å®ƒç¼ºå°‘äº†æœ‰é—œå–®å…ƒæ¸¬è©¦çš„èªªæ˜ï¼Œä»¥ä¸‹æˆ‘å°‡ä»‹ç´¹ä¸€äº›è‡ªå·±çš„åšæ³•å’Œç¶“é©—ã€‚ å‰ç½®ä½œæ¥­ æˆ‘å€‘å¯ä»¥</description>
			<content type="html"><![CDATA[<p>åœ¨å®˜æ–¹æ‰‹ä¸Šçš„<a href="http://laravel.com/docs/packages">æœ‰é—œé–‹ç™¼ Laravel 4 å¥—ä»¶çš„ç« ç¯€</a>ï¼Œå…§å®¹å…¶å¯¦å¯«å¾—æ»¿è©³ç›¡äº†ã€‚åªæ˜¯å®ƒç¼ºå°‘äº†æœ‰é—œå–®å…ƒæ¸¬è©¦çš„èªªæ˜ï¼Œä»¥ä¸‹æˆ‘å°‡ä»‹ç´¹ä¸€äº›è‡ªå·±çš„åšæ³•å’Œç¶“é©—ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å‰ç½®ä½œæ¥­">å‰ç½®ä½œæ¥­</h2>
<p>æˆ‘å€‘å¯ä»¥ç”¨ä»¥ä¸‹æŒ‡ä»¤ä¾†å»ºç«‹ä¸€å€‹æ–°çš„ Laravel å¥—ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">php artisan workbench --resource vendor/name
</code></pre></div><p>ç„¶å¾Œåœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹çš„ <code>workbench/vendor/name</code> è·¯å¾‘ä¸‹æ‰¾åˆ°æˆ‘å€‘çš„å°ˆæ¡ˆåŸå§‹æª”ã€‚</p>
<p>è¨»ï¼š <code>vendor</code> å¯ä»¥æ˜¯å…¬å¸åç¨±æˆ–é–‹ç™¼è€…çš„åå­—ï¼Œè€Œ <code>name</code> å‰‡æ˜¯å¥—ä»¶åç¨±ã€‚é€™è£¡é›–ç„¶ç›´æ¥ä»¥é€™å€‹åç¨±ç•¶ç¯„ä¾‹ï¼Œä½†å¯¦å‹™ä¸Šè«‹ä¸è¦é€™éº¼è¨­å®šã€‚</p>
<p>æˆ‘å€‘æœƒçœ‹åˆ°ç›®éŒ„çµæ§‹å¦‚ä¸‹ï¼š</p>
<pre><code>.
â”œâ”€â”€ composer.json
â”œâ”€â”€ phpunit.xml
â”œâ”€â”€ public
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ Vendor
â”‚Â Â  â”‚Â Â  â””â”€â”€ Name
â”‚Â Â  â”‚Â Â      â””â”€â”€ NameServiceProvider.php
â”‚Â Â  â”œâ”€â”€ config
â”‚Â Â  â”œâ”€â”€ controllers
â”‚Â Â  â”œâ”€â”€ lang
â”‚Â Â  â”œâ”€â”€ migrations
â”‚Â Â  â””â”€â”€ views
â””â”€â”€ tests
</code></pre><p>æ¥ä¸‹ä¾†ä¸ç‰¹åˆ¥èªªæ˜çš„è©±ï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯åœ¨ä¸Šè¿°çš„è·¯å¾‘è£¡ã€‚</p>
<h2 id="composer-è¨­å®š">Composer è¨­å®š</h2>
<p>æˆ‘å€‘å‡è¨­å¥—ä»¶æœƒç”¨åˆ°è³‡æ–™åº«ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥æ˜¯æŠŠ <code>illuminate/database</code> é€™å€‹å¥—ä»¶åŠ é€² <code>composer.json</code> çš„ <code>require</code> å€æ®µè¨­å®šå…§ï¼š</p>
<pre><code>&quot;require&quot;: {
    ...
    &quot;illuminate/database&quot;: &quot;4.0.x&quot;
}
</code></pre><p>æ¥è‘—æ˜¯ PHPUnit ï¼Œè¦å°‡å®ƒå¯«åœ¨ <code>require-dev</code> å€æ®µè¨­å®šä¸­ï¼š</p>
<pre><code>&quot;require-dev&quot;: {
    ...
    &quot;phpunit/phpunit&quot;: &quot;&gt;=3.7.0&quot;
}
</code></pre><p>ç„¶å¾ŒåŸ·è¡Œ <code>composer update --prefer-dist</code> ï¼Œä»¥å®‰è£è³‡æ–™åº«å¥—ä»¶ã€‚</p>
<h2 id="model-é¡åˆ¥åŸºæœ¬çµæ§‹">Model é¡åˆ¥åŸºæœ¬çµæ§‹</h2>
<p>é€™é‚Šå‡è¨­æˆ‘å€‘çš„ model åç¨±ç‚º <code>Ranger</code> ï¼Œå®ƒåªæœ‰ <code>id</code> å’Œ <code>name</code> å…©å€‹å±¬æ€§ã€‚è«‹åœ¨ <code>src/Vendor/Name</code> é€™å€‹è·¯å¾‘ä¸‹å»ºç«‹ä¸€å€‹ <code>Ranger.php</code> ï¼Œç„¶å¾Œè¼¸å…¥ä»¥ä¸‹å…§å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">namespace Vendor\Name;

use Illuminate\Database\Eloquent\Model as Eloquent;
use Illuminate\Database\Schema\Blueprint as Table;

class Ranger extends Eloquent
{
    public static $tableName = &#39;rangers&#39;; // è‡ªè¡ŒåŠ å…¥çš„å±¬æ€§

    protected $guarded = array(); // è¦–éœ€æ±‚æ›´æ”¹

    /**
     * @return callable
     */
    public static function getBlueprint() // è‡ªè¡ŒåŠ å…¥çš„æ–¹æ³•
    {
        return function (Table $table) {
            $table-&gt;increments(&#39;id&#39;);
            $table-&gt;string(&#39;name&#39;, 100);
        };
    }
}
</code></pre></div><p>Laravel çš„ Model é è¨­æœƒè‡ªè¡Œæ‰¾å‡ºé¡åˆ¥åç¨±èˆ‡è³‡æ–™è¡¨åç¨±çš„å°æ‡‰ï¼Œç„¶å¾Œå°‡å®ƒè¨­å®šåœ¨ <code>$table</code> é€™å€‹å±¬æ€§ä¸­ï¼›ä¸éç‚ºäº†ç¨å¾Œåœ¨åš migration å’Œå–®å…ƒæ¸¬è©¦æ™‚çš„éœ€æ±‚ï¼Œæˆ‘è‡ªè¡ŒåŠ äº†ä¸€å€‹ static è®Šæ•¸ï¼š <code>$tableName</code> ã€‚</p>
<p>å¦ä¸€å€‹ static æ–¹æ³• <code>getBlueprint</code> æ˜¯å›å‚³ä¸€å€‹ <code>callback</code> çµ¦ Schema Builder ä½¿ç”¨ï¼Œåœ¨å¾Œé¢æˆ‘å€‘æœƒåœ¨è£½ä½œ migration èˆ‡å–®å…ƒæ¸¬è©¦æ™‚æœƒç”¨åˆ°ã€‚</p>
<h2 id="å–®å…ƒæ¸¬è©¦">å–®å…ƒæ¸¬è©¦</h2>
<p>åŸºæœ¬ä¸Šå–®å…ƒæ¸¬è©¦çš„è¨­å®šæª”ï¼Œ Laravel å·²ç¶“å¹«æˆ‘å€‘ç”¢ç”Ÿå¥½äº†ã€‚æˆ‘å€‘åªéœ€è¦å»ºç«‹ model å°æ‡‰çš„æ¸¬è©¦å³å¯ã€‚</p>
<p>åœ¨ <code>tests</code> ç›®éŒ„ä¸‹å†å»ºç«‹ä¸€å€‹å­è³‡æ–™å¤¾ <code>NameTest</code> ï¼Œå…¶ä¸­ <code>Name</code> å°±æ˜¯å°æ‡‰åˆ°æˆ‘å€‘çš„å¥—ä»¶åç¨±ã€‚</p>
<p>ç„¶å¾Œåœ¨ <code>composer.json</code> çš„ <code>psr-0</code> å€æ®µä¸­åŠ å…¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="s2">&#34;psr-0&#34;</span><span class="err">:</span> <span class="p">{</span>
    <span class="err">...</span>
    <span class="nt">&#34;Vendor\\NameTest&#34;</span><span class="p">:</span> <span class="s2">&#34;tests/&#34;</span>
<span class="p">}</span>
</code></pre></div><p>é€™æœƒè®“ composer çš„è‡ªå‹•è¼‰å…¥æ‰¾åˆ°æˆ‘å€‘çš„æ¸¬è©¦é¡åˆ¥ã€‚</p>
<p>æ¥è‘—åœ¨ <code>NameTest</code> è³‡æ–™å¤¾ä¸­å†å»ºç«‹ä¸€å€‹ PHP æª”æ¡ˆ <code>RangerTest.php</code> ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">namespace Vendor\NameTest;

use Vendor\Name\Ranger;
use Illuminate\Database\Capsule\Manager as DB;

class RangerTest extends \PHPUnit_Framework_TestCase
{

}
</code></pre></div><p>é€™é‚Šæ¯”è¼ƒé—œéµçš„éƒ¨ä»½çš„æ˜¯æŠŠ <code>Illuminate\Database\Capsule\Manager</code> è¼‰å…¥å¾Œï¼Œå–åˆ¥åç‚º <code>DB</code> æ–¹ä¾¿å¾ŒçºŒæ“ä½œã€‚</p>
<p>å¦å¤–å› ç‚ºå¥—ä»¶ä¸¦æ²’è¾¦æ³•ä½¿ç”¨åˆ° Laravel åœ¨ application ä¸­çš„ Facade æ©Ÿåˆ¶ï¼Œæ‰€ä»¥ç›´æ¥ç”¨ <code>\PHPUnit_Framework_TestCase</code> é¡åˆ¥ï¼Œè€Œä¸æ˜¯ Laravel å…§å»ºçš„ <code>TestCase</code> é¡åˆ¥ã€‚</p>
<h2 id="è³‡æ–™åº«èˆ‡è³‡æ–™è¡¨è¨­å®š">è³‡æ–™åº«èˆ‡è³‡æ–™è¡¨è¨­å®š</h2>
<p>åœ¨æ¸¬è©¦ä¸­ï¼Œé€šå¸¸è¼ƒç‚ºéº»ç…©çš„æ˜¯æ¸¬è©¦ Model èˆ‡è³‡æ–™åº«ä¹‹é–“çš„æºé€šã€‚å…¶å¯¦æˆ‘å€‘å¯ä»¥ç›´æ¥æä¾›ä¸€å€‹æ¸¬è©¦ç”¨çš„è³‡æ–™åº«è®“æ¸¬è©¦ä½¿ç”¨ã€‚</p>
<p>æ¸¬è©¦ç”¨çš„è³‡æ–™åº«å¯ä»¥æ˜¯ Laravel æ‰€æ”¯æ´çš„ä»»ä¸€é¡å‹é—œé€£å¼è³‡æ–™åº«ï¼Œé€™è£¡æˆ‘å€‘é¸ç”¨ sqlite ã€‚</p>
<p>æ¥è‘—åœ¨ <code>RangerTest</code> é¡åˆ¥ä¸­åŠ å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">...

    protected static $db = null;

    public static function setUpBeforeClass()
    {
        static::connectTestDb();
        static::initTables();
    }

    protected static function connectTestDb()
    {
        static::$db = new DB();
        static::$db-&gt;addConnection(array(
            &#39;driver&#39;    =&gt; &#39;sqlite&#39;,
            &#39;database&#39;  =&gt; &#39;:memory:&#39;,
            &#39;prefix&#39;    =&gt; &#39;&#39;,
        ));
        static::$db-&gt;setAsGlobal();
        static::$db-&gt;bootEloquent();
    }

    protected static function initTables()
    {
        $conn = static::$db-&gt;getConnection();
        $builder = $conn-&gt;getSchemaBuilder();

        $builder-&gt;dropIfExists(Ranger::$tableName);
        $builder-&gt;create(Ranger::$tableName, Ranger::getBlueprint());
    }

</code></pre></div><p>åœ¨ PHPUnit ä¸­æä¾›äº† <code>setUpBeforeClass</code> é€™å€‹æ–¹æ³•ï¼Œä¸»è¦æ˜¯åœ¨æ‰€æœ‰æ¸¬è©¦é–‹å§‹å‰è¦å…ˆåšçš„å‹•ä½œï¼›æˆ‘å€‘åˆ©ç”¨å®ƒä¾†åˆå§‹åŒ–è³‡æ–™åº«é€£ç·šåŠç”¢ç”Ÿæˆ‘å€‘éœ€è¦è³‡æ–™è¡¨ã€‚</p>
<p>è¨»ï¼š <code>setUp</code> æ˜¯åœ¨æ¯å€‹ test case å•Ÿå‹•å‰åšã€‚</p>
<p><code>connectTestDb</code> æ–¹æ³•æ˜¯å°è³‡æ–™åº«é€£ç·šï¼Œè®“æ¥ä¸‹ä¾†çš„ Model å¯ä»¥ç›´æ¥æ“ä½œï¼Œè€Œä¸éœ€è¦è™•ç†é€£ç·šå•é¡Œã€‚é€™è£¡æˆ‘å€‘å¯ä»¥ç›´æ¥ä½¿ç”¨ sqlite é…åˆ <code>:memory:</code> ä¾†ä½¿ç”¨è¨˜æ†¶é«”ç•¶åšæ¸¬è©¦è³‡æ–™åº«ï¼Œæˆ–æ˜¯åœ¨ MySQL æˆ–å…¶ä»–èˆ‡æ­£å¼æ©Ÿç›¸åŒè¦æ ¼çš„è³‡æ–™åº«ä¼ºæœå™¨ä¸Šå»ºç«‹æ¸¬è©¦ç”¨çš„è³‡æ–™åº«ã€‚</p>
<p><code>initTables</code> ç”¨ä¾†å»ºç«‹è³‡æ–™è¡¨ï¼Œç”±æ–¼æˆ‘å€‘åœ¨ model çš„ <code>getBlueprint</code> ä¸­æœƒå›å‚³ Schema çš„è³‡è¨Šï¼Œæ‰€ä»¥å°±ç›´æ¥åˆ©ç”¨å®ƒä¾†å»ºè³‡æ–™è¡¨ã€‚</p>
<h2 id="é–‹å§‹æ¸¬è©¦">é–‹å§‹æ¸¬è©¦</h2>
<p>ç¾åœ¨æˆ‘å€‘å¯ä»¥æ’°å¯«æ¸¬è©¦æ¡ˆä¾‹äº†ï¼Œèˆ‰ä¾‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">...

    public function testFind()
    {
        DB::table(&#39;rangers&#39;)-&gt;insert(array(
            &#39;name&#39; =&gt; &#39;Jace Ju&#39;,
        ));
        $ranger = Ranger::find(1);
        $this-&gt;assertEquals(&#39;Jace Ju&#39;, $ranger-&gt;name);
    }
</code></pre></div><p>æ¥è‘—é–‹å•Ÿçµ‚ç«¯æ©Ÿï¼Œåˆ‡æ›åˆ° <code>workbench/vendor/name</code> ç›®éŒ„ä¸‹ï¼ŒåŸ·è¡Œï¼š</p>
<pre><code>phpunit
</code></pre>
<p>å°±å¯ä»¥çœ‹åˆ°æ¸¬è©¦çµæœäº†ã€‚</p>
<h2 id="å¤šå€‹æ¸¬è©¦é¡åˆ¥å…±ç”¨åŒä¸€è³‡æ–™é€£ç·š">å¤šå€‹æ¸¬è©¦é¡åˆ¥å…±ç”¨åŒä¸€è³‡æ–™é€£ç·š</h2>
<p>ç›®å‰æˆ‘å€‘æ˜¯åœ¨ <code>RangerTest</code> é¡åˆ¥ä¸­é€£çµè³‡æ–™åº«ï¼Œä½†é€šå¸¸æˆ‘å€‘æœƒæœ‰å¾ˆå¤š Model éœ€è¦è¢«æ¸¬è©¦ï¼Œæ‰€ä»¥éœ€è¦å…±ç”¨ä¸Šè¿°çš„è³‡æ–™åº«é€£çµçš„éƒ¨ä»½ã€‚</p>
<p>å…ˆå»ºç«‹ä¸€å€‹ <code>TestCase</code> é¡åˆ¥ï¼Œå®ƒèˆ‡ <code>RangerTest</code> æ”¾åœ¨åŒä¸€å€‹ç›®éŒ„ä¸‹ã€‚</p>
<p>å†å°‡å…ˆå‰çš„è³‡æ–™åº«é€£çµçš„éƒ¨ä»½è¤‡è£½åˆ°æ–°çš„ <code>TestCase</code> é¡åˆ¥è£¡ï¼Œæˆæœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">namespace Vendor\NameTest;

use Illuminate\Database\Capsule\Manager as DB;

class TestCase extends \PHPUnit_Framework_TestCase
{
    protected static $db = null;

    public static function setUpBeforeClass()
    {
        static::connectTestDb();
        static::initTables();
    }

    protected static function connectTestDb()
    {
        // ... åŒä¸Š
    }

    protected static function initTables()
    {
        // ... åŒä¸Š
    }
}
</code></pre></div><p>åœ¨ <code>initTables</code> æ–¹æ³•ä¸­ï¼Œå¯ä»¥åˆå§‹åŒ–æ‰€æœ‰æœƒç”¨åˆ°çš„è³‡æ–™è¡¨ã€‚</p>
<p>ç„¶å¾Œå›åˆ° <code>RangerTest</code> é¡åˆ¥ï¼Œå°‡é€£çµè³‡æ–™åº«çš„éƒ¨ä»½ç§»é™¤ï¼Œä¸¦æ”¹ç‚ºç¹¼æ‰¿ <code>TestCase</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">namespace Vendor\NameTest;

use Illuminate\Database\Capsule\Manager as DB;

class RangerTest extends TestCase
{
    // ...
}
</code></pre></div><p>é€™æ™‚å€™å¦‚æœåŸ·è¡Œ <code>phpunit</code> çš„è©±ï¼Œæœƒç™¼ç¾æ‰¾ä¸åˆ° <code>TestCase</code> é€™å€‹é¡åˆ¥ã€‚</p>
<p>è§£æ±ºæ–¹æ³•æ˜¯åœ¨ <code>composer.json</code> è£¡é¢å‘Šè¨´ composer è¦å»å“ªè£¡æ‰¾é€™å€‹é¡åˆ¥æª”æ¡ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json">    <span class="s2">&#34;classmap&#34;</span><span class="err">:</span> <span class="p">[</span>
        <span class="s2">&#34;tests/NameTest/TestCase.php&#34;</span>
    <span class="p">]</span><span class="err">,</span>
</code></pre></div><p>é€™éº¼ä¸€ä¾†ï¼Œ Model èˆ‡è³‡æ–™åº«çš„æ¸¬è©¦å°±å®¹æ˜“è¨±å¤šäº†ã€‚</p>
<h2 id="migration">Migration</h2>
<p>é›–ç„¶æˆ‘å€‘å¯ä»¥æ¸¬è©¦ model äº†ï¼Œä½†å¯¦éš›ä½œæ¥­é‚„æ˜¯éœ€è¦æŠŠè³‡æ–™è¡¨å»ºç«‹åœ¨æ­£å¼è³‡æ–™åº«ä¸Šã€‚é€™è£¡å°±è¦é€é Laravel çš„ migration æ©Ÿåˆ¶ã€‚</p>
<p>é€™è£¡å°±ç°¡å–®èªªæ˜ä¸€ä¸‹å‰›å‰›åœ¨ <code>Ranger</code> é¡åˆ¥å»ºç«‹çš„ callback å¦‚ä½•ä½¿ç”¨ï¼š</p>
<p>é¦–å…ˆè¦ç‚º workbench ä¸­ package å»ºç«‹ migrations è³‡æ–™å¤¾ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mkdir workbench/vendor/name/src/migrations
</code></pre></div><p>ç„¶å¾Œæˆ‘å€‘è¦ç‚º package å»ºç«‹ä¸€å€‹ migration ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">php artisan migrate:make create_rangers_table --bench<span class="o">=</span>vendor/name
</code></pre></div><p>é€™æœƒå»ºç«‹ <code>workbench/vendor/name/src/migrations/xxxx_xx_xx_xxxxxx_create_rangers_table.php</code> é€™å€‹æª”æ¡ˆ (xx æœƒè¦–å»ºç«‹æ™‚é–“è€Œæœ‰æ‰€ä¸åŒ) ï¼Œå…¶é¡åˆ¥åç¨±ç‚º <code>CreateRangersTable</code> ã€‚</p>
<p>åœ¨ <code>CreateRangersTable</code> ä¸­ï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥åˆ©ç”¨å…ˆå‰åœ¨ <code>Ranger</code> é¡åˆ¥ä¸­å®šç¾©çš„ <code>$tableName</code> èˆ‡ <code>getBlueprint</code> ä¾†å®Œæˆ migration çš„ <code>up</code> åŠ <code>down</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">use Illuminate\Database\Migrations\Migration;
use Vendor\Name\Ranger;

class CreateRangersTable extends Migration
{
    public function up()
    {
        Schema::create(Ranger::$tableName, Ranger::getBlueprint());
    }

    public function down()
    {
        Schema::drop(Ranger::$tableName);
    }
}
</code></pre></div><p>é€™éº¼ä¸€ä¾†å°±ä¸éœ€è¦é‡è¤‡å®šç¾© schema çš„ç¨‹å¼ç¢¼äº†ã€‚</p>
<h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>æœ€å¾Œæ­¸ç´å¹¾å€‹é‡é»ï¼š</p>
<ol>
<li>
<p>å°‡ Schema Builder éœ€è¦çš„ callback æ”¾åœ¨ Model ä¸­ï¼Œè®“æ¸¬è©¦èˆ‡ migration å¯ä»¥å…±ç”¨åŒä¸€å€‹ schema ã€‚</p>
</li>
<li>
<p>åˆ©ç”¨ sqlite çš„ <code>:memory:</code> ä¾†åšç‚ºæ¸¬è©¦è³‡æ–™åº«æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚</p>
</li>
<li>
<p>å°‡è³‡æ–™åº«é€£çµçš„ç¨‹å¼ç¢¼ç§»åˆ°å…±ç”¨é¡åˆ¥ä¸­ã€‚</p>
</li>
<li>
<p>åˆ©ç”¨åœ¨ model å®šç¾©çš„ <code>$tableName</code> èˆ‡ <code>getBlueprint</code> ä¾†å®Œæˆ table migration ã€‚</p>
</li>
</ol>
<p>æ­¡è¿æŒ‡æ­£æˆ–æä¾›æ›´å¥½çš„å»ºè­°ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>ç¶²ç«™æ¶æ§‹èˆ‡éƒ¨ç½²ç­–ç•¥ç­†è¨˜</title>
			<link>https://jaceju.net/website-deploy-note/</link>
			<pubDate>Sat, 23 Mar 2013 03:26:00 +0800</pubDate>
			
			<guid>https://jaceju.net/website-deploy-note/</guid>
			<description>é€™é™£å­ç‚ºäº†å…¬å¸çš„ç¶²ç«™æå¾—è‡ªå·±ç„¦é ­çˆ›é¡ï¼Œå…¶å¯¦è‡ªå·±å¾ˆæ¸…æ¥šåœ¨ç³»çµ±é€™å€‹æ–¹é¢çš„æ¶‰çµä¸¦ä¸æ·±ï¼Œä½†æ—¢ç„¶æ¥äº†é€™å€‹ä»»å‹™å°±å¾—æƒ³è¾¦æ³•åšå¥½ã€‚ ä¸éä¹Ÿå› ç‚ºä¸å¤ ç†Ÿæ‚‰ï¼Œè®“ç³»çµ±</description>
			<content type="html"><![CDATA[<p>é€™é™£å­ç‚ºäº†å…¬å¸çš„ç¶²ç«™æå¾—è‡ªå·±ç„¦é ­çˆ›é¡ï¼Œå…¶å¯¦è‡ªå·±å¾ˆæ¸…æ¥šåœ¨ç³»çµ±é€™å€‹æ–¹é¢çš„æ¶‰çµä¸¦ä¸æ·±ï¼Œä½†æ—¢ç„¶æ¥äº†é€™å€‹ä»»å‹™å°±å¾—æƒ³è¾¦æ³•åšå¥½ã€‚</p>
<p>ä¸éä¹Ÿå› ç‚ºä¸å¤ ç†Ÿæ‚‰ï¼Œè®“ç³»çµ±å‡ºäº†å¾ˆå¤šå•é¡Œã€‚å› æ­¤å…¬å¸å°±è«‹äº†æˆ‘çš„å¥½å‹ John å’Œä»–çš„å¸«çˆ¶ä¾†çµ¦æˆ‘å€‘ä¸€äº›ç³»çµ±å±¤é¢çš„å»ºè­°ã€‚é€™ä»½ç­†è¨˜æ˜¯ä¸»è¦æ˜¯è¨˜éŒ„æˆ‘å¾ä»–å€‘å£ä¸­æ‰€å¾—åˆ°çš„å¿ƒå¾—ï¼Œç•¶ç„¶è©³ç´°çš„è³‡è¨Šé‚„æ˜¯éœ€è¦èŠ±æ™‚é–“å»ç ”ç©¶èˆ‡å¯¦ä½œã€‚è€Œè£¡é¢æœ‰ä¸€äº›åè©æ˜¯æˆ‘æ²’æœ‰è½éçš„ï¼Œæ‰€ä»¥å¯èƒ½è¨˜éŒ¯ã€‚</p>
<p>ä»¥ä¸‹å°±æ˜¯æˆ‘å€‹äººè¦ºå¾—æ¯”è¼ƒé—œéµçš„éƒ¨ä»½ï¼š</p>
<!-- raw HTML omitted -->
<h2 id="virtual-machine">Virtual Machine</h2>
<p>æ©Ÿå™¨ä¸€ä¾†æ™‚ï¼Œåˆ¥æ€¥è‘—åœ¨ä¸Šé¢å»ºç«‹ç›¸é—œçš„ Web æœå‹™æˆ–è³‡æ–™åº«ç³»çµ±ã€‚</p>
<p>å…¶å¯¦ä¸€å°å¯¦é«”ä¸»æ©Ÿä¸Šé¢å¯ä»¥è·‘å¤šå€‹è™›æ“¬æ©Ÿå™¨ (Virtual Machine, VM)  åªè¦è¦–æ©Ÿå™¨ç­‰ç´šåˆ‡å‡ºé©ç•¶çš„ VM æ•¸é‡ï¼Œé€™æ¨£æˆ‘å€‘å°±èƒ½æœ‰æ•ˆå»ºç«‹å‡ºä¸€å€‹å¤šç¯€é»çš„ç³»çµ±ã€‚</p>
<p>å¦å¤– VM ä¹Ÿéå¸¸å®¹æ˜“ç®¡ç†ï¼Œåƒæ˜¯å®‰è£å¥½ç¬¬ä¸€å€‹åŸºæœ¬çš„ VM ç³»çµ±å¾Œå°±éš¨æ™‚å¯ä»¥è¤‡è£½å‡ºæ–°çš„ VM ï¼Œæˆ–æ˜¯åœ¨æŸå€‹ VM çˆ›æ‰æ™‚åˆªé™¤å®ƒï¼›é€™æ¨£çš„æ–¹å¼å°±å¯ä»¥å¤§å¤§æ¸›å°‘éƒ¨ç½²æ©Ÿå™¨æ‰€èŠ±è²»çš„å¿ƒåŠ›ã€‚</p>
<p>å‰›é–‹å§‹å¯ä»¥å…ˆä½¿ç”¨ VMware vSphere çš„å…è²»ç‰ˆæœ¬ï¼Œå®ƒæœ‰ Windows ç‰ˆæœ¬çš„ç®¡ç† UI ä»‹é¢ã€‚</p>
<ul>
<li><a href="http://www.tenlong.com.tw/items/986868921X?item_id=437567">VMware vSphere 5 ä¼æ¥­å»ºç½®æ•™æˆ°æ‰‹æ‰</a></li>
</ul>
<h2 id="å°‡-log-ç´€éŒ„ç¨ç«‹å­˜æ”¾">å°‡ Log ç´€éŒ„ç¨ç«‹å­˜æ”¾</h2>
<p>Log æª”çš„è™•ç†ä¹Ÿæ˜¯ä¸€å€‹å¾ˆå¤§çš„å­¸å•ï¼Œæ¯”è¼ƒå¥½çš„æ–¹æ³•æ˜¯å»ºç«‹ä¸€å° syslogd ä¼ºæœå™¨ï¼Œç„¶å¾ŒæŠŠ log éƒ½å¾€é€™é‚Šä¸Ÿã€‚é€™å°ä¼ºæœå™¨ç­‰ç´šä¸éœ€è¦å¤ªå¥½ï¼Œä½†ç£ç¢Ÿç©ºé–“ä¸€å®šè¦å¤ å¤§ã€‚</p>
<p>ç”¨ syslogd çš„ä¸€å€‹å¥½è™•æ˜¯ï¼Œå®ƒæ˜¯å°„å¾Œä¸ç†çš„ï¼Œæˆ‘å€‘çš„æœå‹™åªè¦å‘å®ƒä¸Ÿ Log å³å¯ï¼Œå°±ç®—å®ƒæ›äº†ä¹Ÿä¸æœƒå½±éŸ¿æˆ‘å€‘çš„æ‰€æœ‰æœå‹™ã€‚</p>
<p>å¦å¤–å¯ä»¥å¯«ä¸€å€‹ Watch Dog ä¾†åˆ†æ Log ä¸­çš„æƒ¡æ„é€£çµï¼Œç•¶å‡ºç¾é—œéµå­—çš„ Pattern æ™‚ï¼Œå°±è¨˜éŒ„ä¸‹é€™å€‹ IP ï¼Œå†åˆ©ç”¨ script å°‡é€™å€‹ IP ç™¼é€åˆ°å„ç¯€é»ä¸Šï¼Œå°‡å®ƒæ“‹ä¸‹ï¼</p>
<ul>
<li><a href="http://www.oreillynet.com/pub/a/sysadmin/2006/10/12/httpd-syslog.html">Sending Apache httpd Logs to Syslog</a></li>
<li><a href="http://www.weithenn.org/cgi-bin/wiki.pl?Syslog-%E6%9E%B6%E8%A8%AD_Log_%E4%BC%BA%E6%9C%8D%E5%99%A8">Syslog-æ¶è¨­ Log ä¼ºæœå™¨</a></li>
</ul>
<h2 id="é«˜ä½µç™¼è¦æ±‚">é«˜ä½µç™¼è¦æ±‚</h2>
<p>éœæ…‹å…§å®¹ç¶²ç«™ä¸€å®šè¦ä½¿ç”¨ Reverse Proxy ï¼Œå®ƒå¯ä»¥æé«˜ç¶²ç«™çš„ååé‡ã€‚è€Œç¶²ç«™æ˜¯å‹•æ…‹å…§å®¹çš„è©±ï¼Œå°±ä¸€å®šè¦æƒ³è¾¦æ³•è®“å®ƒåˆ†æ•£åˆ°å„ç¯€é»ä¸Šã€‚</p>
<p>è€Œä¸€èˆ¬å¤§æµé‡ç¶²ç«™é€šå¸¸ä¸æœƒæœ‰é˜²ç«ç‰†ï¼Œè€Œæ˜¯ç”¨æ©Ÿæµ·ä¾†æ‡‰ä»˜ã€‚å› ç‚ºé˜²ç«ç‰†åœ¨å¤§æµé‡çš„ç‹€æ³ä¸‹ï¼Œåè€Œå®¹æ˜“æ›é»ã€‚</p>
<h2 id="ç³»çµ±æ“´å±•">ç³»çµ±æ“´å±•</h2>
<p>æœå‹™èˆ‡è³‡æ–™åº«ä¸€å®šè¦è€ƒæ…®åˆ°æ©«å‘æ“´å……ï¼Œåœ¨ä»»ä½•æ™‚å€™éƒ½å¯ä»¥å°‡ä¸€å°æ©Ÿå™¨åŠ å…¥æˆ–ç§»é™¤ï¼Œè€Œä¸å½±éŸ¿åˆ°æ•´é«”é‹ä½œã€‚</p>
<p>ä»¥å‰çš„æ¶æ§‹æ˜¯ä¸€å° Master å°å¤šå° Slave ï¼Œè€Œ Master æ›æ‰å¾Œå°±ç”±æ‰€æœ‰çš„ Slave æ¨èˆ‰å‡ºæ–°çš„ Master ï¼Œä½†é€™æ¨£ä¸€ä¾†å°±ä¸çŸ¥é“èª°æ˜¯ Master äº†ã€‚</p>
<p>æ”¹è‰¯çš„åšæ³•æ˜¯ç’°ç‹€çµæ§‹ï¼Œè®“æ¯ä¸€å°æ©Ÿå™¨éƒ½æ˜¯ä¸‹ä¸€å°æ©Ÿå™¨çš„ Master ï¼ŒåŒæ™‚ä¹Ÿæ˜¯ä¸Šä¸€å°æ©Ÿå™¨çš„ Slave ã€‚é€™æ¨£å¦‚æœå…¶ä¸­ä¸€å°æ›é»ï¼Œç³»çµ±å°±æœƒä¸»å‹•å†å°‡é€™å€‹ç’°é‡æ–°é€£çµã€‚</p>
<h2 id="å…©å±¤å¼çš„ç¨‹å¼éƒ¨ç½²">å…©å±¤å¼çš„ç¨‹å¼éƒ¨ç½²</h2>
<p>ç¨‹å¼çš„éƒ¨ç½²éœ€è¦è‡ªå‹•åŒ–ï¼Œè€Œå…©å±¤å¼éƒ¨ç½²æ˜¯æ¯”è¼ƒç°¡å–®çš„æ–¹å¼ï¼Œä¸€å±¤ç‚º testing ï¼Œä¸€å±¤ç‚º release ã€‚</p>
<p>æ–¹æ³•æ˜¯åœ¨ç‰ˆæœ¬æ§åˆ¶ç³»çµ±è£¡é¢å°‡ç¨‹å¼åˆ†æˆ testing åŠ release å…©å€‹åˆ†æ”¯ï¼Œ testing åˆ†æ”¯æ˜¯ç›®å‰æœ€æ–°çš„ç¨‹å¼ç¢¼ï¼Œè€Œ release åˆ†æ”¯å‰‡æ˜¯æœ€ç©©å®šçš„ç¨‹å¼ç¢¼ã€‚</p>
<p>åœ¨ testing ç’°å¢ƒè£¡çš„ç¨‹å¼ç¢¼å¿…é ˆéƒ½æ˜¯å¯ä»¥åŸ·è¡Œç„¡èª¤çš„ï¼Œä¸å¯ä»¥æœ‰æœªå®Œæˆçš„åŠŸèƒ½ã€‚ç•¶ testing ç’°å¢ƒåšå®Œå£“åŠ›æ¸¬è©¦å¾Œï¼Œç®¡ç†è€…å°±å¯ä»¥ç¨‹å¼ç¢¼æ”¾åˆ° release åˆ†æ”¯ä¸­ã€‚è€Œæ‰€æœ‰çš„ production éƒ½æœƒä¸»å‹•æŸ¥çœ‹ release åˆ†æ”¯ï¼Œç•¶æœ‰æ–°ç‰ˆæœ¬æ™‚å°±æœƒè‡ªå‹•æ›´æ–°ã€‚</p>
<p>ä¸éå…©å±¤å¼éƒ¨ç½²é‚„æ˜¯æœ‰é¢¨éšªåœ¨ï¼Œæ‰€ä»¥é€šå¸¸é‚„æœƒæœ‰ release candidate ç‰ˆæœ¬çš„åˆ†æ”¯ã€‚æœ‰äº›å¤§å…¬å¸ç”šè‡³åšåˆ°äº† 16 å±¤ï¼Œä¹Ÿå°±æ˜¯èªªæ‰€æœ‰çš„åŠŸèƒ½éƒ½å¿…é ˆç¶“é 16 é“æª¢é©—æ‰èƒ½ä¸Šç·šã€‚</p>
<h2 id="å£“åŠ›æ¸¬è©¦">å£“åŠ›æ¸¬è©¦</h2>
<p>åˆ©ç”¨ Switch çš„ port mirroring åŠŸèƒ½ï¼Œå°‡ç·šä¸Šæµé‡è¤‡è£½åˆ°æº–å‚™è¦ä¸Šç·šçš„æ©Ÿå™¨ï¼Œçœ‹å®ƒæ˜¯å¦èƒ½æ’ä½ã€‚é€šå¸¸é€™æ¨£çš„å£“åŠ›æ¸¬è©¦è¦è·‘ä¸‰å¤©è‡³ä¸€é€±ï¼Œç¢ºä¿ç³»çµ±çš„ç©©å®šæ€§ã€‚</p>
<p>ç”šè‡³ä¹Ÿå¯ä»¥å†è®“å¤šå€‹ port åš mirroring ï¼Œåˆ©ç”¨å…©å€ä»¥ä¸Šçš„æµé‡ä¾†æ¸¬è©¦ã€‚é€™æ¨£çš„ç›®çš„ä¸»è¦æ˜¯æ‰¾å‡ºè©²æ©Ÿå™¨çš„æ¥µé™ï¼Œä¹ŸåŒæ™‚ç­è§£éœ€è¦å¤šå°‘æ©Ÿå™¨æ‰èƒ½æ’ä½é ä¼°çš„æµé‡ã€‚</p>
<h2 id="ä¸å½±éŸ¿é‹ä½œçš„ç³»çµ±æ›´æ–°">ä¸å½±éŸ¿é‹ä½œçš„ç³»çµ±æ›´æ–°</h2>
<p>ç³»çµ±åœ¨æ›´æ–°ç¨‹å¼å‰ï¼Œæœƒå…ˆæŠŠè‡ªå·±å¾ Load Balance è£¡ç§»ä¸‹ä¾†ï¼Œç­‰ç¢ºå®šæ²’å•é¡Œå¾Œè‡ªå‹•ä¸Šç·šã€‚</p>
<p>åœ¨è³‡æ–™åº«ç³»çµ±æ–¹é¢ï¼Œæœ‰äº› Plugin å¯ä»¥åšåˆ°ç•¶ Slave æ©Ÿå™¨åŠ å…¥æœå‹™ï¼Œèˆ‡ Master åšåŒæ­¥è³‡æ–™çš„æ™‚å€™ï¼Œå…ˆå°‡è‡ªå·±éš±è—èµ·ä¾†ï¼Œç­‰åˆ°åŒæ­¥å®Œæˆå¾Œï¼Œå†è®“æœå‹™å•Ÿå‹•ä¸¦ä¸Šç·šã€‚</p>
<h2 id="å¿ƒå¾—">å¿ƒå¾—</h2>
<p>æ“š John çš„å¸«çˆ¶èªªï¼Œä»–å€‘å·²ç¶“åšåˆ°å°‡é€™äº›è¡Œç‚ºå®Œå…¨è‡ªå‹•åŒ–ï¼Œä¸¦ä¸”åªè¦åœ¨ Dashboard ä¸Šå°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰æœå‹™çš„ç‹€æ…‹ï¼›ç”šè‡³å¾Œä¾†é‚„ä»¥ç´…ç¶ ç‡ˆé…åˆè²éŸ³ä¾†åšè­¦ç¤ºï¼Œè½å®Œå¾Œæˆ‘ä¸‹å·´éƒ½æ‰äº†ã€‚</p>
<p>äº‹å¯¦ä¸Šåœ¨äººåŠ›æœ‰é™ï¼Œå»è¦ç®¡ç†å¹¾åå°æ©Ÿå™¨çš„ç‹€æ³ä¸‹ï¼Œé€™æ¨£çš„åšæ³•æ‰æ˜¯èº«ç‚ºä¸€å€‹æŠ€è¡“äººå“¡æ‡‰è©²å»åšçš„ã€‚</p>
<p>å†æ¬¡æ„Ÿè¬ John å’Œä»–å¸«çˆ¶ï¼Œè®“æˆ‘å­¸åˆ°ä¸å°‘æœ‰é—œç³»çµ±ç®¡ç†æ–¹é¢çš„çŸ¥è­˜ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>ç¶²ç«™æŠ€è¡“ç™¼å±•å²</title>
			<link>https://jaceju.net/webdev-history/</link>
			<pubDate>Wed, 21 Nov 2012 09:26:00 +0800</pubDate>
			
			<guid>https://jaceju.net/webdev-history/</guid>
			<description>å‰è¨€ é€™ç¯‡ä¸»è¦æ˜¯å° Web æŠ€è¡“çš„ç™¼å±•å²åšä¸€å€‹æ¦‚ç•¥çš„ä»‹ç´¹ï¼Œè®“å¤§å®¶å°ç›®å‰ Web æŠ€è¡“çš„æ¼”è®Šèƒ½æœ‰åˆæ­¥çš„èªçŸ¥ã€‚ ä¸éè£½ä½œç¶²ç«™çš„æŠ€è¡“å¾ˆå¤šï¼Œé€™è£¡æˆ‘åƒ…é‡å°ç€è¦½å™¨ã€ HTML ã€ CSS åŠ</description>
			<content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>é€™ç¯‡ä¸»è¦æ˜¯å° Web æŠ€è¡“çš„ç™¼å±•å²åšä¸€å€‹æ¦‚ç•¥çš„ä»‹ç´¹ï¼Œè®“å¤§å®¶å°ç›®å‰ Web æŠ€è¡“çš„æ¼”è®Šèƒ½æœ‰åˆæ­¥çš„èªçŸ¥ã€‚</p>
<p>ä¸éè£½ä½œç¶²ç«™çš„æŠ€è¡“å¾ˆå¤šï¼Œé€™è£¡æˆ‘åƒ…é‡å°ç€è¦½å™¨ã€ HTML ã€ CSS åŠ JavaScript åšç²—ç•¥çš„æ¼”é€²èªªæ˜ï¼Œç´°ç¯€éƒ¨ä»½å°±è«‹å¤§å®¶åƒè€ƒç¶­åŸºç™¾ç§‘æˆ–å…¶ä»–æ›´æ·±å…¥çš„è³‡è¨Šã€‚</p>
<p>å¦å¤–æ–‡ç« å…§å®¹æˆ–å¤šæˆ–å°‘æœƒå¸¶æœ‰æˆ‘å€‹äººçš„ä¸»è§€æ„è¦‹ï¼Œè€Œæˆ‘ä¹Ÿå„˜å¯èƒ½é€éç¶²è·¯ä¸Šçš„è³‡è¨Šä½œæŸ¥è­‰ï¼Œä½†ä¸€å®šæœƒæœ‰éŒ¯èª¤åŠä¸è¶³ä¹‹è™•ï¼Œé‚„æœ›å¤§å®¶èƒ½å¤ æŒ‡æ­£æˆ–è£œè¶³ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="1991">1991</h2>
<p>HTML æœ€æ—©æ˜¯ç”±ç¶²éš›ç¶²è·¯ (World Wide Web) ä¹‹çˆ¶ <a href="http://en.wikipedia.org/wiki/Tim_Berners-Lee">Tim Berners-Lee</a> æ‰€ç™¼æ˜ï¼Œè€Œåœ¨ 1991 å¹´æˆç‚ºå…¬é–‹çš„æ–‡ä»¶è¦ç¯„ã€‚è€Œè©²è¦ç¯„ä¸¦ä¸æ˜¯ HTML 1.0 ï¼Œè€Œæ˜¯ç¨±ç‚º HTML Tags ï¼›ç•¶æ™‚çš„ HTML ä¸»è¦æ˜¯ç”¨ä¾†è¡¨é”è³‡æ–™ï¼Œæ”¯æ´çš„æ¨™ç±¤ä¹Ÿä¸å¤šã€‚</p>
<h2 id="1994">1994</h2>
<p>HTML å¯¦éš›ä¸Šæˆç‚ºè¦ç¯„æ˜¯å¾ 1994 å¹´ç”± IETF åˆ¶å®šçš„ HTML 2.0 é–‹å§‹ã€‚é€™æ™‚å€™ MOSAIC æ˜¯å¸‚å ´ä¸Šä¸»è¦çš„ç€è¦½å™¨ã€‚å¦å¤–é€™æ™‚ CSS æ¦‚å¿µè¢«æå‡ºï¼Œé›–ç„¶åœ¨é€™ä¹‹å‰ä¹Ÿå·²ç¶“æœ‰äººæå‡ºæ¨£å¼çš„æ§‹æƒ³ï¼Œä¸éé‚„æ˜¯ç”± CSS çš„å±¤ç–Šæ¦‚å¿µå‡ºç·šäº†ã€‚</p>
<h2 id="1995">1995</h2>
<p>é™¤äº† MOSAIC ï¼Œ1995 å¹´æœ‰ä¸‰å€‹ç€è¦½å™¨ä¹Ÿå•å¸‚äº†ï¼š Opera ã€ Netscape å’Œå¾®è»Ÿçš„ IE ã€‚è€Œ Netscape ç‚ºäº†èƒ½è®“ç¶²é å¯ä»¥è·Ÿä½¿ç”¨è€…äº’å‹•ï¼Œå› æ­¤æ‰¾äº† <a href="http://en.wikipedia.org/wiki/Brendan_Eich">Brendan Eich</a> è¨­è¨ˆä¸€å€‹è…³æœ¬èªè¨€ï¼Œç•¶æ™‚ç¨±ç‚º LiveScript ã€‚å¾Œä¾† Netscape åœ¨èˆ‡ Sun åˆä½œä¹‹å¾Œï¼Œä¾¿å°‡å®ƒæ”¹åç‚º JavaScript ã€‚</p>
<p>JavaScript æœ€åˆæ˜¯å—åˆ° Java å•Ÿç™¼è€Œé–‹å§‹è¨­è¨ˆçš„ï¼Œç›®çš„ä¹‹ä¸€å°±æ˜¯ã€Œçœ‹ä¸Šå»åƒ Java ã€ï¼Œä½†å®ƒå¯¦éš›ä¸Šè·Ÿ Java ä¸€é»é—œä¿‚ä¹Ÿæ²’æœ‰ã€‚è€Œä¸”æ—©æœŸçš„ JavaScript ä¸¦ä¸æ˜¯å¾ˆå®Œæ•´çš„ç¨‹å¼èªè¨€ï¼Œåªæ˜¯ç”¨ä¾†çµ¦ç¶²é é–‹ç™¼è€…ä½œä¸€äº›å‹•æ…‹é¸å–®ã€åœ–ç‰‡ç‰¹æ•ˆçš„ç¶²é å°ç¨‹å¼ã€‚</p>
<h2 id="1996">1996</h2>
<p>ç”±æ–¼ JavaScript ä½œç‚ºç¶²é çš„å®¢æˆ¶ç«¯è…³æœ¬èªè¨€éå¸¸æˆåŠŸï¼Œå¾®è»Ÿæ¨å‡ºäº† IE 3.0 ï¼Œä¸Šé¢æ­è¼‰äº†è·Ÿ JavaScript ç›¸å®¹çš„ JScript ã€‚</p>
<p>è€Œå¾Œ Netscape å°‡ JavaScript æäº¤çµ¦ ECMA (æ­æ´²è¨ˆç®—æ©Ÿè£½é€ å•†å”æœƒ) é€²è¡Œæ¨™æº–åŒ–ï¼Œå› è€Œå»ºç«‹äº† ECMA-262 æ¨™æº–ï¼Œä¹Ÿå°±æ˜¯ ECMAScript ã€‚</p>
<p>åœ¨é€™ä¹‹å‰ç”± W3C å¬é–‹äº†ä¸€æ¬¡ CSS è¨è«–æœƒï¼Œç”±åŸæå‡ºè€… <a href="http://en.wikipedia.org/wiki/H%C3%A5kon_Wium_Lie">HÃ¥kon Wium Lie</a> ç•¶åšä¸»è¦æŠ€è¡“è² è²¬äººï¼Œæ–¼æ˜¯ CSS 1.0 è¦æ ¼å‡ºç‰ˆï¼›è€Œ IE 3.0 ä¹Ÿæ˜¯ç¬¬ä¸€å€‹æ­£å¼æ”¯æ´ CSS çš„ç€è¦½å™¨ã€‚</p>
<h2 id="1997">1997</h2>
<p>éš¨è‘— Windows 95 çš„æ¨å‡ºï¼Œå¾®è»Ÿä¹Ÿå°‡ Internet Explorer 4.0 æ•´åˆé€²å»ï¼Œè®“ä½œæ¥­ç³»çµ±è·Ÿç€è¦½å™¨æ ¸å¿ƒç¶åœ¨ä¸€èµ·ï¼Œä¹Ÿé€ æˆæ—¥å¾Œçš„ç€è¦½å™¨å¤§æˆ°ã€‚</p>
<p>é€™æ™‚ HTML 4.0 è¢«åˆ—ç‚ºæ¨è–¦è¦ç¯„ï¼Œ ECMAScript ä¹Ÿæ¨å‡ºæ­£å¼çš„ 1.0 ç‰ˆã€‚</p>
<h2 id="1998">1998</h2>
<p>CSS 2.0 åœ¨ 1998 å¹´æ­£å¼æ¨å‡ºï¼Œä¸¦ä¸”éš¨è‘— HTML 4.0 æ”¯é…äº†ç¶²ç«™è¨­è¨ˆé€™å€‹é ˜åŸŸã€‚è€Œé€™æ™‚ XML ä¹Ÿæ­£å¼æˆç‚º W3C æ¨è–¦æ¨™æº–ï¼Œç‚ºå¾Œä¾†çš„ XHTML é–‹å§‹é‹ªè·¯ã€‚</p>
<p>æœ‰é‘‘æ–¼é€™æ™‚å„å®¶ç€è¦½å™¨å¯¦ä½œ HTML åŠ CSS æœ‰æ‰€å·®ç•°ï¼Œå› æ­¤ Web æ¨™æº–è¨ˆåŠƒ (The Web Standards Project) å‰µç«‹äº†ã€‚ç›®çš„æ˜¯å¸Œæœ›è®“ç¶²é åœ¨ç€è¦½å™¨ä¸Šçš„å‘ˆç¾èƒ½å¤ æœ‰ä¸€è‡´æ€§ã€‚åªè¦ç…§æ¨™æº–å¯«çš„ç¶²é ï¼Œå¯ä»¥åœ¨å„å®¶ç€è¦½å™¨ä¸Šå‘ˆç¾å‡ºä¸€è‡´çš„æ•ˆæœã€‚</p>
<p>AJAX çš„å‰èº«æŠ€è¡“ XMLHTTP ä¹Ÿéš¨è‘—å¾®è»Ÿçš„ Outlook Web Access å‡ºç¾ã€‚</p>
<h2 id="1999">1999</h2>
<p>åˆ°äº† 1999 å¹´ï¼Œ .COM æ³¡æ²«ç™¼å±•åˆ°äº†æ¥µè‡´ï¼Œä¹Ÿæ˜¯ç€è¦½å™¨å¤§æˆ°æœ€ç«ç†±çš„æ™‚å€™ï¼Œ IE 5.0 èˆ‡ Windows 98 ç¬¬äºŒç‰ˆçš„çµåˆé–‹å§‹ç“œåˆ†äº† Netscape çš„å¸‚å ´ã€‚</p>
<p>é€™æ™‚ HTML 4.01 æ¨è–¦ç‰ˆæœ¬ä¹Ÿæ¨å‡ºäº†ï¼Œè·Ÿ HTML 3.2 åŠ HTML 4.0 ç›¸åŒï¼Œå®ƒå€‘éƒ½æ˜¯é‡å°å·²ç¶“ä¸Šå¸‚çš„è¦æ ¼æ‰€åšçš„è¿½æº¯ç‰ˆæœ¬ã€‚</p>
<p>æ¥ä¸‹ä¾† W3C ä¸æ‰“ç®—å†ç¶­è­· HTML ï¼Œè€Œæ˜¯æŠŠé‡å¿ƒè½‰ç§»åˆ° XHTML ä¸Šã€‚</p>
<h2 id="2000">2000</h2>
<p>2000 å¹´æ™‚ï¼Œæˆ‘å€‘å¹³å®‰æ¸¡éåƒç¦§å¤œã€‚é€™æ™‚ä»¥ IE 5.5 ç‚ºå±•ç¤ºå¹³å°çš„ DHTML å‹•æ…‹ç¶²é æŠ€è¡“è¢«å¤§é‡ä½¿ç”¨åœ¨ç¶²ç«™ä¸Šã€‚</p>
<p>ä¹Ÿåœ¨é€™ä¸€å¹´ XHTML 1.0 æ¨å‡ºäº†ï¼Œå®ƒçš„èªæ³•è¦æ±‚å¾ˆåš´æ ¼ï¼Œå¦‚æœç€è¦§å™¨ç”¨é€™å€‹è¦ç¯„ä¾†çœ‹ç¶²é çš„è©±ï¼Œæœƒä½¿å¾—ç¾åœ¨å¾ˆå¤šç¶²ç«™æœƒç„¡æ³•é‹ä½œã€‚</p>
<h2 id="2001">2001</h2>
<p>æ¥ä¸‹ä¾† .COM æ³¡æ²«ä¸€å€‹æ¥ä¸€å€‹çš„ç ´äº†ï¼Œä½† Microsoft.com é è‘— Windows æ´»äº†ä¸‹ä¾†ã€‚</p>
<p>ç€è¦½å™¨å¤§æˆ°ä¹Ÿç”± Windows å…§å»ºçš„ IE 6.0 ç²å‹ï¼Œå ªç¨±ç¶²ç«™æŠ€è¡“å²æœ€å…‰æ˜çš„æ™‚æœŸï¼Œå› ç‚ºæˆ‘å€‘åªéœ€è¦å°ˆæ³¨ä¸€å€‹ç€è¦½å™¨ã€‚</p>
<p>XHTML æ­£å¼çš„è¦ç¯„åˆ° 1.1 ï¼Œä¸éé™åˆ¶ä¹Ÿæ›´ç‚ºåš´æ ¼ï¼Œé€£ mime-type éƒ½å¿…é ˆæ˜¯ application/xhtml+xml ã€‚</p>
<p>ä¹Ÿåœ¨é€™ä¸€å¹´ï¼Œç”± JavaScript å¤§å¸« <a href="http://en.wikipedia.org/wiki/Douglas_Crockford">Douglas Crockford</a> æå‡ºäº†ç”¨ JSON æ ¼å¼ä¾†è¡¨é”è³‡æ–™å…§å®¹ã€‚</p>
<h2 id="2002">2002</h2>
<p>2002 å¹´ï¼Œé€™æ™‚å€™çš„ W3C æ‰“ç®—æ¨å‡ºæ›´åš´æ ¼çš„ XHTML 2.0 ã€‚</p>
<p>è€Œä¸” Web æ¨™æº–æ„è­˜é–‹å§‹æŠ¬é ­ï¼Œå¾ˆå¤šç¶²ç«™æŠ€è¡“çš„å…ˆé©…é–‹å§‹æ¨è¡Œç¬¦åˆ Web æ¨™æº–çš„ç¶²ç«™æŠ€è¡“ã€‚</p>
<p>ä¸éç‚ºäº†ç…§é¡§é«˜å¸‚ä½”ç‡çš„ IE 5.5 åŠ IE 6.0 ï¼Œä½¿å¾—è¨±å¤š CSS Hack æŠ€è¡“ä¸æ–·åœ°è¢«ç ”ç©¶å‡ºä¾†ã€‚</p>
<h2 id="2003">2003</h2>
<p>é€™æ™‚å€™ IE 6.0 å·²ç¶“ç¨éœ¸å¸‚å ´ï¼Œå¹¾ä¹æ²’æœ‰å°æ‰‹å¯ä»¥ç›¸æ¯”ã€‚åœ¨è´å¾—ç€è¦½å™¨å¤§æˆ°çš„å¾®è»Ÿï¼Œé–‹å§‹è¼•å¿½ç¶²ç«™å¹³å°é€™å€‹é ˜åŸŸï¼Œä»–å€‘æŠŠé‡å¿ƒæ”¾åœ¨äº† .NET ï¼Œä»–å€‘èªç‚ºé€™å€‹æ˜¯æ¬¡ä¸–ä»£çš„æŠ€è¡“ã€‚</p>
<p>ä¸éé€™æ™‚å€™å…¶ä»–ç€è¦½å™¨å» å•†é–‹å§‹æº–å‚™åæ”»äº†ï¼Œä»–å€‘çš„æ­¦å™¨å°±æ˜¯ Web æ¨™æº–ã€‚å…¶ä¸­èˆ‡ Netscape åŒæ™‚æœŸèª•ç”Ÿçš„ Opera å¯ä»¥èªªæ˜¯ Web æ¨™æº–çš„æ¨æ‰‹ã€‚ä»¥ Webkit ç‚ºæ ¸å¿ƒçš„ Safari ä¹Ÿæ­£å¼æ¨å‡º 1.0 ç‰ˆã€‚</p>
<h2 id="2004">2004</h2>
<p>Mozilla å› ç‚ºé‡æ–°æ”¹å¯« Netscape ä¸¦é–‹æ”¾äº†åŸå§‹ç¢¼ï¼Œé€²è€Œåœ¨ 2004 å¹´æ¨å‡ºäº† Firefox 1.0 ã€‚å°æ–¼æ“æŠ± Web æ¨™æº–çš„é–‹ç™¼è€…ä¾†èªªæ˜¯å€‹å¥½æ¶ˆæ¯ï¼Œé€™ä½¿å¾— Firefox çš„å¸‚ä½”ç‡åœ¨ä¸€æ¨å‡ºå°±å‡ºä¹é æ–™åœ°é«˜ã€‚</p>
<p>é€™ä¸€å¹´ CSS 2.1 è‰æ¡ˆæ¨å‡ºï¼Œä¸»è¦æ˜¯ä¿®æ­£ CSS 2.0 çš„éŒ¯èª¤ï¼Œä¸¦ä¸”å»é™¤æ‰ä¸€äº›ç€è¦½å™¨æ²’æœ‰å¯¦ä½œçš„åŠŸèƒ½ã€‚</p>
<p>é€™æ™‚ <a href="http://en.wikipedia.org/wiki/Tim_O%27Reilly">Tim O&rsquo;Reilly</a> æå‡ºäº†æˆ‘å€‘æ‰€ç†ŸçŸ¥çš„ Web 2.0 ï¼›å› ç‚º Web 2.0 æœƒç”¨åˆ°å¤§é‡çš„ä½¿ç”¨è€…äº’å‹•ï¼Œå› æ­¤é€™æ™‚ JavaScript åˆé–‹å§‹è¢«é‡è¦–äº†ã€‚</p>
<p>ä½†é€™æ™‚å€™çš„ HTML åŠ CSS å¯¦ä½œå¯¦åœ¨æ˜¯å¤ªé›œäº‚ï¼ŒåˆåŠ ä¸Š W3C æ‰“ç®—ç”¨ XHTML æ•´æ²»çš„æ‰‹æ®µå¤ªéæ¿€é€²ï¼Œå› æ­¤ä¸‰å®¶ç€è¦½å™¨å» å•† Apple ã€ Mozilla ã€ Opera å°±è·³å‡ºä¾†æˆç«‹äº† WHATWG é€™å€‹çµ„ç¹”ã€‚ WHATWG çš„ç›®çš„æ˜¯æŠŠç¾æœ‰çš„ HTML å¯¦ä½œåšä¸€å€‹å®Œæ•´çš„è¦ç¯„ï¼Œä¸¦ä¸”èˆ‡ç•¶ä»£æµè¡Œçš„æŠ€è¡“åšçµåˆã€‚ä¸ä¹…ï¼Œä»–å€‘å°±æ¨å‡ºäº† Web Application 1.0 ã€‚</p>
<h2 id="2005">2005</h2>
<p>ç”±æ–¼ IE æ¨¹å¤§æ‹›é¢¨ï¼Œè¨±å¤šæœ¨é¦¬åŠè •èŸ²éƒ½é€é IE çš„æ¼æ´å…¥ä¾µï¼Œå› æ­¤è¨±å¤šç€è¦½å™¨ç”¨æˆ¶è½‰è€ŒæŠ•å‘äº† Firefox çš„æ‡·æŠ±ã€‚</p>
<p>AJAX é€™å€‹æŠ€è¡“è¢« <a href="http://en.wikipedia.org/wiki/Jesse_James_Garrett">Jesse James Garrett</a> æ­£å¼å‘½åï¼Œéš¨å¾Œä¹Ÿè¢«ç´å…¥ Web 2.0 é—œéµæŠ€è¡“ä¸­ï¼Œå¾æ­¤ç¶²ç«™æŠ€è¡“æ­£å¼é‚é€² AJAX æ™‚ä»£ã€‚</p>
<h2 id="2006">2006</h2>
<p>é™¤äº† IE 6.0 ä¹‹å¤–ï¼Œå…¶ä»–ç€è¦½å™¨å› ç‚ºèµ·è·‘å¾ˆä¹…äº†ï¼Œæ‰€ä»¥å¹¾ä¹éƒ½å¯ä»¥åœ¨å¾ˆå°çš„å·¥ä½œé‡ä¸‹å°±å¯ä»¥ç¬¦åˆ Web æ¨™æº–ã€‚ä½†å› ç‚º IE 6.0 çš„æ ¸å¿ƒä¸€ç›´éƒ½æ²’æœ‰é€²æ­¥ï¼Œçµæœè¢«ç¶²ç«™é–‹ç™¼è€…ç½µåˆ°è‡­é ­ã€‚å¾®è»Ÿä¹Ÿç™¼ç¾ Firefox é€æ¼¸åƒæ‰ç€è¦½å™¨å¸‚å ´ï¼Œæ‰€ä»¥æ¨å‡ºäº† IE 7.0 ã€‚ä½†åŸºæœ¬ä¸Š IE 7.0 ä¹Ÿåªæ˜¯ IE 6.0 çš„åŠŸèƒ½åŠ å¼·ç‰ˆï¼Œè·Ÿ Web æ¨™æº–è½å·®é‚„æ˜¯å¾ˆå¤§ã€‚</p>
<p>è‡³æ–¼ W3C çš„ XHTML 2.0 æ ¹æœ¬æ²’æœ‰ç€è¦½å™¨å» å•†é¡˜æ„å¯¦ä½œï¼Œæ‰€ä»¥å®£å‘Šå¤±æ•—ã€‚</p>
<p>CSS 3 çš„éƒ¨ä»½è¦æ ¼å·²ç¶“è¢«æŸäº›ç€è¦½å™¨å¯¦ä½œäº†ï¼Œè€Œ IE ä»ç„¶ä¸ç›´æ¥æ”¯æ´ï¼Œåªèƒ½ç”¨è‡ªå®¶çš„æŠ€è¡“ä¾†æ¨¡æ“¬ã€‚</p>
<h2 id="2007">2007</h2>
<p>å› ç‚º XHTML 2.0 çš„å¤±æ•—ï¼Œ W3C åªå¥½å›é ­æ¥å— WHATWG æ‰€åˆ¶å®šçš„è¦æ ¼ï¼Œä¸¦æ”¹ç¨±ç‚º HTML 5 ã€‚</p>
<p>HTML 5 æ™‚ä»£æ­£å¼ä¾†è‡¨ã€‚é€™ä¹Ÿå‘Šè¨´æˆ‘å€‘ï¼šåªæœ‰è¢«å¸‚å ´æ‰€æ¥å—çš„æ‰æ˜¯è´å®¶ã€‚</p>
<h2 id="2008">2008</h2>
<p>ä»¥æœå°‹å¼•æ“èµ·å®¶çš„ Google ä¹Ÿåˆ©ç”¨ Webkit æ ¸å¿ƒæ¨å‡ºäº† Chrome ç€è¦½å™¨ã€‚</p>
<p>é€™åœ¨ç•¶æ™‚é€ æˆäº†ä¸å°‘è©±é¡Œï¼Œå¾ˆå¤šç¶²ç«™é–‹ç™¼è€…éƒ½éå¸¸æœŸå¾… Google èƒ½ç‚ºç¶²ç«™æŠ€è¡“å¸¶ä¾†ä¸€äº›æ–°æ°£è±¡ã€‚</p>
<h2 id="2009">2009</h2>
<p>è¨±å¤šå ±å‘Šéƒ½æŒ‡å‡ºï¼Œ Chrome å’Œ Firefox é–‹å§‹åˆ†é£Ÿ IE çš„å¸‚å ´ï¼Œç›´åˆ°é€™æ™‚å¾®è»Ÿæ‰é©šè¦ºç¶²ç«™å¹³å°çš„æ™‚ä»£ä¾†è‡¨äº†ã€‚é€™æ™‚å¾®è»Ÿä¹Ÿé‡å° HTML 5 æ¨å‡º IE 8.0 ï¼Œä½†æ”¯æ´ç¨‹åº¦ä¾èˆŠéå¸¸è½å¾Œï¼Œä¸éå› ç‚º Windows 7 çš„é—œä¿‚ï¼Œä½¿å¾—å®ƒé‚„æ˜¯ä½”æœ‰ä¸€å¸­ä¹‹åœ°ã€‚</p>
<p>ç•¶ç„¶ä¹Ÿä¸æ˜¯åªæœ‰ IE åœ¨é€²æ­¥ï¼Œå…¶ä»–ç€è¦½å™¨ä¹ŸæŒçºŒè‘—ä»–å€‘è‡ªå·±çš„è…³æ­¥ï¼›åœ¨ Web æ¨™æº–ä¸Šï¼Œ Opera ä¸€ç›´æ˜¯å…ˆé©…ï¼Œå¹¾ä¹å¾ˆå¤š HTML 5 çš„ç‰¹æ€§éƒ½æ˜¯å®ƒå…ˆå¯¦ä½œå‡ºä¾†ã€‚ Firefox å‰‡æ˜¯å°‡é‡å¿ƒæ”¾åœ¨å¤–æ›å¥—ä»¶ä¸Šé¢ï¼Œå° HTML 5 çš„æ”¯æ´æ¡å–ä¿å®ˆçš„æ…‹åº¦ã€‚è€Œ Safari ä¹Ÿå› ç‚ºä½¿ç”¨èˆ‡ Chrome ç›¸åŒæ ¸å¿ƒçš„ Webkit ï¼Œæ‰€ä»¥æ­£åœ¨è¿é ­è¶•ä¸Šã€‚</p>
<p>å€’æ˜¯ Chrome ç€è¦½å™¨å› ç‚ºå…¶é–‹ç™¼ç‰ˆæœ¬ä¸€ç›´æ›´æ–°çš„é—œä¿‚ï¼Œæ‰€ä»¥æ­£å¼ç‰ˆæœ¬çš„ç‰ˆè™Ÿæ¨é€²é€Ÿåº¦éå¸¸å¿«ï¼Œè®“å…¶ä»–ç€è¦½å™¨å» å•†åš‡äº†ä¸€å¤§è·³ã€‚</p>
<h2 id="2011">2011</h2>
<p>é‡å° HTML5 æ™‚ä»£çš„åˆ°ä¾†ï¼Œå¾®è»Ÿçµ‚æ–¼è¶•ä¸Šäº†ï¼Œ IE 9.0 å¯ä»¥èªªæ˜¯å®Œå…¨é‡æ–°å‡ºç™¼çš„ä½œå“ã€‚</p>
<blockquote>
<p>ç€è¦½å™¨å¤§æˆ°åˆå†æ¬¡é–‹æ‰“äº†ï¼Œä¸éæˆ°å ´ä¸å†æ˜¯åœ¨ç€è¦½å™¨ä¸Šï¼Œè€Œæ˜¯æ‡‰ç”¨å¹³å°ã€‚åƒæ˜¯ Chrome OS ã€ Firefox OS ã€ Windows 8 ç­‰ç­‰ï¼Œå„å®¶å» å•†éƒ½æƒ³é€éå…¬é–‹æˆ–ç§æœ‰çš„ HTML5 API å»å­˜å–è£ç½®åŸç”Ÿçš„åŠŸèƒ½ï¼Œè¡¨é¢ä¸Šçœ‹èµ·ä¾†æ˜¯å…±åŒæ¨é€² HTML5 è¦ç¯„ï¼Œå¯¦éš›ä¸Šå»æ˜¯ä½ ä¾†æˆ‘å¾€ï¼Œæš—æ½®æ´¶æ¹§ã€‚ (æœ¬æ®µæ–‡å­—æ„Ÿè¬ <a href="http://www.plurk.com/kurotanshi">Kuro</a> è£œå……)</p>
</blockquote>
<p>è€Œ CSS 2.1 ä¹Ÿçµ‚æ–¼å®šæ¡ˆäº†ï¼Œä½†é€™åªæ˜¯ W3C å°å®ƒä¸»å°åœ°ä½çš„ä¸€é»æ™æ‰ã€‚é€™æ™‚ CSS 3 æ—©å°±å·²ç¶“è¢«å„å¤§ç€è¦½å™¨æ‰€æ”¯æ´ã€‚å¾é€™è£¡å¯ä»¥çœ‹å‡ºï¼Œ W3C çš„è§’è‰²å…¶å¯¦æ›´åƒæ­·å²çš„ç´€éŒ„è€…ï¼Œè€ŒéæŠ€è¡“çš„åˆ¶è¨‚è€…ã€‚</p>
<h2 id="2012">2012</h2>
<p>å‰é™£å­ WHATWG çš„é ­é ­åˆå‡ºä¾†èªªè©±ï¼Œä»–å€‘è¦ºå¾— W3C æ˜¯è¦ç©©å®šçš„è¦æ ¼ï¼Œè€Œä»–å€‘å‰‡æ˜¯éš¨è‘—æ™‚ä»£è€Œæ¼”é€²ã€‚å› æ­¤ WHATWG çš„ HTML 5 æ”¹åç‚º HTML Living Standard ã€‚</p>
<p>æ‰€ä»¥æ¥ä¸‹ä¾†å¹¾å¹´å¯ä»¥èªªæ˜¯ HTML 5 ã€ CSS 3 èˆ‡ JavaScript çš„å¤©ä¸‹äº†ã€‚</p>
<p>ä¸é<a href="https://speakerdeck.com/stopsatgreen/the-css-of-tomorrow-revised">æ–°çš„ CSS æ§‹æƒ³</a>å·²ç¶“æ‚„æ‚„åœ°å‡ºç¾äº†ï¼Œ Web é–‹ç™¼æŠ€è¡“ä¹ŸæŒçºŒåœ¨æ¼”é€²ä¸­ã€‚</p>
<p>To be continuedâ€¦</p>
<h2 id="åƒè€ƒ">åƒè€ƒ</h2>
<ul>
<li><a href="http://www.w3.org/MarkUp/draft-ietf-iiir-html-01.txt">Hypertext Markup Language</a></li>
<li><a href="http://en.wikipedia.org/wiki/HTML">HTML (ç¶­åŸºç™¾ç§‘)</a></li>
<li><a href="http://en.wikipedia.org/wiki/CSS">CSS (ç¶­åŸºç™¾ç§‘)</a></li>
<li><a href="http://en.wikipedia.org/wiki/ECMAScript">ECMAScript (ç¶­åŸºç™¾ç§‘)</a></li>
<li><a href="http://en.wikipedia.org/wiki/JavaScript">JavaScript (ç¶­åŸºç™¾ç§‘)</a></li>
<li><a href="http://zh.wikipedia.org/wiki/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%A7%E6%88%98">ç€è¦½å™¨å¤§æˆ° (ç¶­åŸºç™¾ç§‘)</a></li>
<li><a href="http://www.evolutionoftheweb.com/?hl=zh-tw">ç¶²è·¯æ¼”é€²</a></li>
<li><a href="http://www.w3.org/">W3C</a></li>
<li><a href="http://www.webstandards.org/">The Web Standards Project</a></li>
<li><a href="http://www.whatwg.org/">WHATWG</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>ç”¨ Imagick å»ºç«‹ CSS Sprites</title>
			<link>https://jaceju.net/create-css-sprites-with-imagick/</link>
			<pubDate>Mon, 11 Jun 2012 12:01:00 +0800</pubDate>
			
			<guid>https://jaceju.net/create-css-sprites-with-imagick/</guid>
			<description>é€™æ˜¯å·¥ä½œç­†è¨˜ï¼Œä»‹ç´¹å¦‚ä½•ç”¨ Imagick è£½ä½œå‡º CSS Sprites ã€‚ å·¥å…· é€™å€‹åŠŸèƒ½éœ€è¦åœ¨ç³»çµ±ä¸Šå®‰è£ä»¥ä¸‹å·¥å…·ï¼š ImageMagick ImageMagick æ˜¯ä¸€å€‹åœ–å½¢è™•ç†å¥—ä»¶ï¼Œè«‹åƒè€ƒä½œç³»çµ±ç‰ˆæœ¬å®‰è£ï¼›ä»¥ Ubuntu ç‚ºä¾‹ï¼Œå®‰è£æ–¹æ³•</description>
			<content type="html"><![CDATA[<p>é€™æ˜¯å·¥ä½œç­†è¨˜ï¼Œä»‹ç´¹å¦‚ä½•ç”¨ Imagick è£½ä½œå‡º CSS Sprites ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å·¥å…·">å·¥å…·</h2>
<p>é€™å€‹åŠŸèƒ½éœ€è¦åœ¨ç³»çµ±ä¸Šå®‰è£ä»¥ä¸‹å·¥å…·ï¼š</p>
<h3 id="imagemagick">ImageMagick</h3>
<p>ImageMagick æ˜¯ä¸€å€‹åœ–å½¢è™•ç†å¥—ä»¶ï¼Œè«‹åƒè€ƒä½œç³»çµ±ç‰ˆæœ¬å®‰è£ï¼›ä»¥ Ubuntu ç‚ºä¾‹ï¼Œå®‰è£æ–¹æ³•ç‚ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-install imagemagick libmagickwand-dev libmagickcore-dev
</code></pre></div><h3 id="imagick">imagick</h3>
<p>imagick è®“ PHP å¯ä»¥é€é ImageMagick ä¾†è™•ç†åœ–ç‰‡ã€‚</p>
<p>å¦‚æœ Ubuntut ä¸Šçš„ PHP ç‰ˆæœ¬ç‚º 5.3 çš„è©±ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æŒ‡ä»¤å®‰è£ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get install php5-imagick
</code></pre></div><p>ä¸éå¦‚æœå®‰è£çš„æ˜¯ PHP 5.4 çš„è©±ï¼Œé‚£éº¼å°±æ²’è¾¦æ³•ç›´æ¥ç”¨ <code>apt-get</code> æŒ‡ä»¤ä¾†å®‰è£ï¼Œæˆ‘å€‘è¦å¾ PECL çš„å®˜æ–¹ç¶²ç«™ä¸‹è¼‰æœ€æ–°çš„ imagick ä¾†å®‰è£ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">wget http://pecl.php.net/get/imagick-3.1.0RC2.tgz
tar xzvf imagick-3.1.0RC2.tgz
<span class="nb">cd</span> imagick-3.1.0RC2/
phpize
./configure
make
sudo make install
</code></pre></div><p>ç„¶å¾Œåœ¨ <code>/etc/php5/mods-available</code> ä¸­æ–°å¢ä¸€å€‹ <code>imagick.ini</code> æª”ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">extension</span><span class="o">=</span><span class="s">imagick.so</span>
</code></pre></div><p>å†ç”¨ä»¥ä¸‹æŒ‡ä»¤è®“ PHP æŠŠæŠŠä¸Šé¢çš„è¨­å®šæª”é€£çµé€²ä¾†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> /etc/php5/conf.d
sudo ln -s ../mods-available/imagick.ini 30-imagick.ini
</code></pre></div><p>è¨»ï¼šå„å®¶ä½œæ¥­ç³»çµ±è¨­å®š php.ini çš„æ–¹å¼ä¸ä¸€å®šç›¸åŒã€‚</p>
<p>æœ€å¾Œè¨˜å¾—é‡æ–°å•Ÿå‹• Apache ä¾†é‡æ–°è¼‰å…¥ PHP è¨­å®šã€‚</p>
<p>ç¾åœ¨æˆ‘å€‘å¯ä»¥åœ¨ PHP ç¨‹å¼ä¸­ä½¿ç”¨ imagick é€™å€‹å¥—ä»¶äº†ï¼Œä¾†çœ‹çœ‹æˆ‘å€‘æ€éº¼è£½ä½œ CSS sprites ã€‚</p>
<h2 id="é–‹å§‹å‹•å·¥">é–‹å§‹å‹•å·¥</h2>
<p>CSS Sprites çš„åŸºæœ¬åŸç†å¦‚ä¸‹ï¼š</p>
<ol>
<li>å°‡è¨±å¤šå°åœ– (é€šå¸¸æ˜¯åŒå¯¬æˆ–åŒé•·) æ’åˆ—åœ¨ä¸€èµ·ï¼Œåˆä½µç‚ºä¸€å¤§å¼µã€‚</li>
<li>ç„¶å¾Œé€é CSS çš„ <code>background-image</code> å±¬æ€§å°‡å®ƒç•¶æˆæ˜¯å…ƒç´ çš„èƒŒæ™¯ã€‚</li>
<li>æœ€å¾Œå†ç”¨ <code>background-position</code> ã€ <code>width</code> èˆ‡ <code>height</code> å±¬æ€§èª¿æ•´å°åœ–è¦é¡¯ç¤ºçš„ä½ç½®åŠå¤§å°ã€‚</li>
</ol>
<p>é€™è£¡è¦ä»‹ç´¹çš„æ˜¯åŒå°ºå¯¸çš„åœ–ç‰‡åˆä½µæˆ CSS Sprites çš„æŠ€å·§ï¼Œé¦–å…ˆæˆ‘å€‘æº–å‚™ä»¥ä¸‹çš„åœ–ç‰‡ï¼š</p>
<ul>
<li><img src="/resources/css_sprites_imagick/clock.png" alt="Clock">: <code>img/clock.png</code></li>
<li><img src="/resources/css_sprites_imagick/disc.png" alt="Disc">: <code>img/disc.png</code></li>
<li><img src="/resources/css_sprites_imagick/mail.png" alt="Mail">: <code>img/mail.png</code></li>
<li><img src="/resources/css_sprites_imagick/gear.png" alt="Gear">: <code>img/gear.png</code></li>
<li><img src="/resources/css_sprites_imagick/terminal.png" alt="Terminal">: <code>img/terminal.png</code></li>
</ul>
<p>å®ƒå€‘çš„å¯¬é«˜éƒ½æ˜¯ 32px ã€‚</p>
<p>é€™è£¡æˆ‘ç”¨ PNG æª”ç¤ºç¯„ï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥ç”¨ JPEG æª”æˆ– GIF æª”ï¼›ä¸éå¦‚æœæ˜¯å‹•ç•« GIF æª”çš„è©±ï¼Œç¨‹å¼ä¸Šè¦ç‰¹åˆ¥è™•ç†ï¼Œé€™é»ç¨å¾Œå†æã€‚</p>
<h3 id="ç”¢ç”Ÿ-css-sprites">ç”¢ç”Ÿ CSS Sprites</h3>
<p>è¦ç”¨ Imagick ä¾†ç”¢ç”Ÿ CSS Sprites çš„è©±ï¼Œé¦–å…ˆåˆ©ç”¨ <code>glob</code> å‡½å¼æœé›†å…¨éƒ¨çš„å°åœ–è³‡è¨Šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$imagePaths = glob(__DIR__ . &#39;/img/*&#39;);
</code></pre></div><p><code>glob</code> å‡½å¼æœƒå¹«æˆ‘å€‘å–å¾— <code>img</code> è³‡æ–™å¤¾ä¸‹æ‰€æœ‰æª”æ¡ˆçš„å®Œæ•´è·¯å¾‘ï¼Œä¸¦ä»¥é™£åˆ—å›å‚³ã€‚</p>
<p>ç„¶å¾Œæˆ‘å€‘å°±å¯ä»¥æŠŠå®ƒä¸Ÿçµ¦ Imagick è™•ç†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$image = new Imagick();

// ä¸€å¼µä¸€å¼µçš„æŠŠåœ–ç–Šåˆ°ç©ºç™½åœ–ä¸Š
foreach ($imagePaths as $imagePath) {
    $sprite = new Imagick($imagePath);
    $image-&gt;addImage($sprite);
}

// ç”¨é™„åŠ åœ¨åœ–ç‰‡ä¹‹å¾Œçš„æ–¹å¼ï¼Œè£½ä½œå‡ºå‚ç›´çš„ sprites åœ–ç‰‡
$image-&gt;resetIterator();
$combined = $image-&gt;appendImages(true);

// è¼¸å‡ºæ ¼å¼ç‚º PNG
$combined-&gt;setImageFormat(&#39;png&#39;);

// å°‡æœ€å¾Œçš„åœ–ç‰‡å…§å®¹å¯«å…¥æª”æ¡ˆ
$combined-&gt;writeImage(__DIR__ . &#39;/img/sprites.png&#39;);
</code></pre></div><p>é€™æ¨£ä¸€ä¾†ï¼Œå°±æœƒå¾—åˆ° <code>img/sprites.png</code> é€™å€‹åœ–æª”ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>
<p><img src="/resources/css_sprites_imagick/sprites.png" alt="sprites"></p>
<h3 id="ç”¢ç”Ÿ-css-æª”æ¡ˆ">ç”¢ç”Ÿ CSS æª”æ¡ˆ</h3>
<p>ç¾åœ¨æˆ‘å€‘è¦è®“ç”¢ç”Ÿ CSS æª”æ¡ˆï¼Œç¬¬ä¸€æ­¥æŠŠå°åœ–çš„åœ–æª”è·¯å¾‘ï¼Œè½‰æ›æˆ CSS çš„ class åç¨±ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// ç”¨åœ–æª”åç¨±åšç‚º CSS çš„ class åç¨±
$classNames = array();
foreach ($imagePaths as $imagePath) {
    $fileInfo = pathinfo($imagePath);
    $classNames[] = &#39;.icon-&#39; . $fileInfo[&#39;filename&#39;];
}
</code></pre></div><p>é€™è£¡æˆ‘åŠ ä¸Šäº† <code>icon-</code> é€™å€‹å‰ç½®å­—ä¸²ï¼Œç›®çš„æ˜¯ç‚ºäº†ä¸è®“ç”¢ç”Ÿå‡ºä¾†çš„ class è·Ÿç¾å­˜çš„å…¶ä»– class è¡çªã€‚ä¾‹å¦‚ <code>mail.png</code> ç”¢ç”Ÿå‡ºä¾†çš„ class åç¨±ç‚º <code>icon-mail</code> ã€‚</p>
<p>æœ‰äº† class åç¨±å¾Œï¼Œå°±å¯ä»¥è¨­å®šå®ƒå€‘çš„èƒŒæ™¯åœ–äº†ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// æŠŠå…¨éƒ¨çš„ class è¨­ç‚ºç›¸åŒçš„ä¸é‡è¦†èƒŒæ™¯åœ–ã€‚
$css = implode(&#39;, &#39;, $classNames);
$css .= &#34; {\nbackground: url(&#39;../img/sprites.png&#39;) no-repeat; \n}\n&#34;;
</code></pre></div><p>ç„¶å¾Œé‡å°æ¯å€‹ class åç¨±ï¼ŒåŠ å…¥å°æ‡‰çš„èƒŒæ™¯ä½ç½®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// å¯«å…¥æ¯å€‹ sprite çš„èƒŒæ™¯ä½ç½®å®šç¾©
$y = 0;
foreach ($classNames as $className) {
    $css .= $className;
    $css .= &#34; {\nbackground-position: 0 -{$y}px\n}\n&#34;;
    $y += 32;
}
</code></pre></div><p>æœ€å¾ŒæŠŠå¾—åˆ°çš„ CSS å…§å®¹ï¼Œå¯«å…¥ <code>css/sprites.css</code> è£¡å°±å¯ä»¥äº†ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// å°‡æœ€å¾Œçš„ CSS å…§å®¹å¯«å…¥æª”æ¡ˆ
$cssPath = __DIR__ . &#39;/css/sprites.css&#39;;
file_put_contents($cssPath, $css);
</code></pre></div><p>ç”¢ç”Ÿå‡ºä¾†çš„ CSS æª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">.</span><span class="nc">icon-clock</span><span class="o">,</span><span class="p">.</span><span class="nc">icon-disc</span><span class="o">,</span><span class="p">.</span><span class="nc">icon-gear</span><span class="o">,</span><span class="p">.</span><span class="nc">icon-mail</span><span class="o">,</span><span class="p">.</span><span class="nc">icon-terminal</span> <span class="p">{</span>
<span class="k">background</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../img/sprites.png&#39;</span><span class="p">)</span> <span class="kc">no-repeat</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">icon-clock</span> <span class="p">{</span>
<span class="k">background-position</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">-0</span><span class="kt">px</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">icon-disc</span> <span class="p">{</span>
<span class="k">background-position</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">-32</span><span class="kt">px</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">icon-gear</span> <span class="p">{</span>
<span class="k">background-position</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">-64</span><span class="kt">px</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">icon-mail</span> <span class="p">{</span>
<span class="k">background-position</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">-96</span><span class="kt">px</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">icon-terminal</span> <span class="p">{</span>
<span class="k">background-position</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">-128</span><span class="kt">px</span>
<span class="p">}</span>
</code></pre></div><p>è¨»ï¼šæ›è¡Œå­—å…ƒå…¶å¯¦æ˜¯å¯ä»¥ä¸éœ€è¦çš„ï¼Œé€™è£¡åªæ˜¯ç‚ºäº†æ–¹ä¾¿æª¢æŸ¥ CSS çš„æ­£ç¢ºæ€§è€Œå·²ã€‚</p>
<h3 id="ç”¨æ³•ç¯„ä¾‹">ç”¨æ³•ç¯„ä¾‹</h3>
<p>ç°¡å–®çš„ç”¨æ³•å¦‚ä¸‹ï¼Œé¦–å…ˆæ˜¯ HTML ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;zh-TW&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>CSS sprites<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;css/screen.css&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;stylesheet&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;css/sprites.css&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;stylesheet&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;icon-clock&#34;</span><span class="p">&gt;</span>Clock<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;icon-disc&#34;</span><span class="p">&gt;</span>Disc<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;icon-mail&#34;</span><span class="p">&gt;</span>Mail<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;icon-gear&#34;</span><span class="p">&gt;</span>Gear<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;icon-terminal&#34;</span><span class="p">&gt;</span>Terminal<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><p>å…¶ä¸­ <code>screen.css</code> å…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="p">{</span>
<span class="k">list-style</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
<span class="k">float</span><span class="p">:</span> <span class="kc">left</span><span class="p">;</span>
<span class="k">margin</span><span class="p">:</span> <span class="mi">3</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">a</span> <span class="p">{</span>
<span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span>
<span class="k">width</span><span class="p">:</span> <span class="mi">32</span><span class="kt">px</span><span class="p">;</span>
<span class="k">height</span><span class="p">:</span> <span class="mi">32</span><span class="kt">px</span><span class="p">;</span>
<span class="c">/* hide text */</span>
<span class="k">text-indent</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="k">white-space</span><span class="p">:</span> <span class="kc">nowrap</span><span class="p">;</span>
<span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>é€™è£¡æˆ‘å€‘å¸Œæœ› <code>ul</code> ä¸­çš„é€£çµå¯ä»¥è®Šæˆæ©«å‘æ’ä¾‹çš„åœ–ç¤ºï¼Œæ‰€ä»¥å…ˆè®“ <code>li</code> å…ƒç´ èª¿æ•´æˆå‘å·¦æµ®å‹•ï¼Œå†æŠŠé€£çµè¨­å®šç‚ºå¯ä»¥è¨­å®šå¯¬é«˜çš„å€å¡Šå…ƒç´ ã€‚é€™æ¨£ä¸€ä¾†ï¼Œæˆ‘å€‘åªè¦å†èª¿æ•´èƒŒæ™¯åœ–å°±å¯ä»¥äº†ã€‚</p>
<p>è¨»ï¼šé€™è£¡æœ‰ç”¨åˆ°ä»¥èƒŒæ™¯åœ–å–ä»£æ–‡å­—çš„æŠ€å·§ï¼Œè«‹åƒè€ƒï¼š <a href="http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/">Replacing the -9999px hack</a> ä¸€æ–‡ã€‚</p>
<p>å› ç‚º <code>sprites.css</code> æ˜¯ç”¨ç¨‹å¼ç”¢ç”Ÿçš„ï¼Œæ‰€ä»¥æˆ‘å€‘æŠŠå®ƒç¨ç«‹å‡ºä¾†ã€‚</p>
<p>æœ€å¾Œçš„çµæœå¦‚ä¸‹ï¼š</p>
<p><img src="/resources/css_sprites_imagick/result.png" alt="Result"></p>
<h2 id="ä¸€äº›ç¶“é©—">ä¸€äº›ç¶“é©—</h2>
<p>å¯¦éš›æ‡‰ç”¨é€™å€‹æŠ€è¡“æ™‚ï¼Œæˆ‘æœ‰å¹¾å€‹ç¶“é©—åˆ†äº«çµ¦å¤§å®¶ï¼š</p>
<h3 id="æ¸…é™¤èˆŠåœ–">æ¸…é™¤èˆŠåœ–</h3>
<p>å‰é¢çš„ç¨‹å¼ç¢¼è£¡ï¼Œæˆ‘æŠŠæœ€å¾Œç”¢ç”Ÿå‡ºä¾†çš„ sprites åœ–æª”è·ŸåŸä¾†çš„å°åœ–æ”¾åœ¨ä¸€èµ·ï¼›ä½†å¦‚æœé€™æ™‚è¦é‡æ–°ç”¢ç”Ÿ sprites çš„è©±ï¼Œå°±æœƒæŠŠä¸Šæ¬¡ç”¢ç”Ÿçš„ sprites åœ–æª”ä¹Ÿä¸€ä½µåˆä½µé€²ä¾†ã€‚</p>
<p>ç‚ºäº†è§£æ±ºé€™å€‹éŒ¯èª¤ï¼Œæˆ‘å€‘å¿…é ˆå…ˆæŠŠèˆŠçš„ sprites åœ–æª”åˆªé™¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">@unlink(__DIR__ . &#39;/img/sprites.png&#39;);
$imagePaths = glob(__DIR__ . &#39;/img/*&#39;);
</code></pre></div><p>ç•¶ç„¶å¦‚æœä¸æ˜¯åœ¨åŒä¸€å€‹ç›®éŒ„ä¸‹çš„è©±ï¼Œé€™å€‹å‹•ä½œå°±å¯ä»¥ä¸ç”¨äº†ã€‚</p>
<h3 id="åˆ©ç”¨å¾Œå°ç®¡ç†-sprites">åˆ©ç”¨å¾Œå°ç®¡ç† sprites</h3>
<p>å‰é¢çš„ç¯„ä¾‹è£¡ï¼Œæˆ‘æ˜¯ç”¨ <code>glob</code> é€™å€‹å‡½å¼ä¾†å–å¾—å°åœ–è³‡è¨Šï¼Œä½†æœ‰æ™‚å€™æˆ‘å€‘å¸Œæœ›æŸäº›æš«æ™‚ç”¨ä¸åˆ°çš„åœ–ç‰‡å¯ä»¥ä¸è¦å‡ºç¾åœ¨ sprites æ™‚è©²æ€éº¼è¾¦å‘¢ï¼Ÿé€™æ™‚å€™æˆ‘æœƒåˆ©ç”¨å¾Œå°ä¾†ç®¡ç†å®ƒå€‘ã€‚</p>
<p>ä¸€èˆ¬ä¾†èªªï¼Œæˆ‘æœƒåœ¨å¾Œå°ä¸Šå‚³æ–°åœ–å¾Œï¼Œå°‡ç›¸é—œè³‡è¨Šå¯«å…¥è³‡æ–™åº«ä¸­ï¼›ç„¶å¾Œå°±å¯ä»¥é€éç¨‹å¼ç¯©é¸æ‰æš«æ™‚ä¸‹æ¶çš„å°åœ–ï¼Œæœ€å¾Œå†é€éä¸Šé¢çš„ç¨‹å¼ä¾†ç”¢ç”Ÿ sprites ã€‚</p>
<h3 id="gif-å‹•ç•«">GIF å‹•ç•«</h3>
<p>Imagick ä¹Ÿæ”¯æ´ GIF å‹•ç•«çš„è™•ç†ï¼Œä¸éå¦‚æœæŠŠ GIF å‹•ç•«åˆä½µåˆ° sprites æ™‚ï¼Œå®ƒæœƒæŠŠæ¯å¼µå‹•ç•«å½±æ ¼ (frame) éƒ½ç•¶æˆæ˜¯ä¸€å¼µå°åœ–ã€‚</p>
<p>é‚„å¥½ GIF å‹•ç•«è¢« Imagick è¼‰å…¥æ™‚ï¼Œæœƒè¢«ç•¶æˆæ˜¯ä¸€å€‹åœ–ç‰‡é›†åˆç‰©ä»¶ï¼Œæ‰€ä»¥å‡å¦‚æˆ‘å€‘åªéœ€è¦ç¬¬ä¸€å€‹å½±æ ¼ä¾†ç•¶åš sprite çš„è©±ï¼Œå¯ä»¥é€™éº¼åšï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">foreach ($imagePaths as $imagePath) {
    $im = new Imagick($imagePath);
    foreach ($im as $frame) {
        $tm = $frame-&gt;getImage();
        $image-&gt;addImage($tm);
        break;
    }
}
</code></pre></div><p>è¨»ï¼šæœƒé€™éº¼å¯«æ˜¯å› ç‚º Imagick æ²’æœ‰å¯¦ä½œ ArraryAccess ä»‹é¢ï¼Œæ‰€ä»¥æ²’è¾¦æ³•åƒé™£åˆ—ä¸€æ¨£ä½¿ç”¨ã€‚</p>
<p>å¸Œæœ›é€™äº›ç¶“é©—å¯ä»¥å¹«åŠ©åˆ°å¤§å®¶ã€‚</p>
<h2 id="å¿ƒå¾—">å¿ƒå¾—</h2>
<p>Imagick çœŸçš„æ˜¯ä¸€å€‹å¾ˆæ£’çš„ PHP å¥—ä»¶ï¼Œå®ƒå°‡ ImageMagick çš„åŠŸèƒ½åŒ…è£å¾—éå¸¸å¥½ç”¨ã€‚é€™æ¬¡å‰›å¥½è—‰è‘—è£½ä½œ CSS Sprites çš„åŠŸèƒ½ï¼Œé«”æœƒåˆ°é€™å€‹å¥—ä»¶çš„å¼·å¤§ã€‚</p>
<p>ç•¶ç„¶é€™è£¡æˆ‘ç”¨åˆ°çš„åªæ˜¯ ImageMagick èˆ‡ Imagick çš„å°éƒ¨ä»½åŠŸèƒ½è€Œå·²ï¼Œå¾€å¾Œå¦‚æœæœ‰æ©Ÿæœƒå†å¯¦ä½œåˆ°å…¶ä»–åŠŸèƒ½æ™‚ï¼Œæˆ‘ä¹Ÿæœƒå†åˆ†äº«çµ¦å¤§å®¶ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>é ˜æ‚Ÿ - ç¨‹åºå“¡ç‰ˆ</title>
			<link>https://jaceju.net/realize/</link>
			<pubDate>Tue, 07 Feb 2012 21:16:00 +0800</pubDate>
			
			<guid>https://jaceju.net/realize/</guid>
			<description>æ™‚ç¨‹ä¸€ç›´æ˜¯å°ˆæ¡ˆå¾ˆé›£æŒæ¡çš„æ±è¥¿ï¼Œå°¤å…¶æ˜¯ä¸Šé ­è¨‚ä¸‹ä¸€å€‹å°·å°¬çš„æ­»ç·šæ™‚ã€‚ç„¶å¾Œè‡ªå·±æ˜çŸ¥é“ä¸å¯ç‚ºï¼Œä½†ç‚ºäº†é¢å­å°±åªèƒ½å‹‰å¼·ç­”æ‡‰ä¸‹ä¾†ã€‚ æ‰€ä»¥æ–°ç¶²ç«™åœ¨é‚„æ²’å®Œå…¨æ¸¬è©¦å¾Œ</description>
			<content type="html"><![CDATA[<p>æ™‚ç¨‹ä¸€ç›´æ˜¯å°ˆæ¡ˆå¾ˆé›£æŒæ¡çš„æ±è¥¿ï¼Œå°¤å…¶æ˜¯ä¸Šé ­è¨‚ä¸‹ä¸€å€‹å°·å°¬çš„æ­»ç·šæ™‚ã€‚ç„¶å¾Œè‡ªå·±æ˜çŸ¥é“ä¸å¯ç‚ºï¼Œä½†ç‚ºäº†é¢å­å°±åªèƒ½å‹‰å¼·ç­”æ‡‰ä¸‹ä¾†ã€‚</p>
<p>æ‰€ä»¥æ–°ç¶²ç«™åœ¨é‚„æ²’å®Œå…¨æ¸¬è©¦å¾Œå°±ä¸Šç·šäº†ï¼Œåªå¥½é‚Šçœ‹è¦æ ¼é‚Šä¿® Bug ã€‚</p>
<p>é€™æ™‚è…¦æµ·è£¡çªç„¶æµ®ç¾å‡ºä¸€é¦–æ­Œçš„æ—‹å¾‹ï¼Œå¿ƒæœ‰ä¸ƒä¸ƒç…™çš„æˆ‘ï¼Œå°±æ”¹å‡ºäº†ä»¥ä¸‹çš„æ­Œè©ï¼š</p>
<!-- raw HTML omitted -->
<h2 id="é ˜æ‚Ÿ---ç¨‹åºå“¡ç‰ˆ">é ˜æ‚Ÿ - ç¨‹åºå“¡ç‰ˆ</h2>
<p>æˆ‘ä»¥ç‚ºæœ‰å¯«æ¸¬è©¦ï¼Œä½†æ˜¯æˆ‘æ²’æœ‰ï¼›</p>
<p>æˆ‘åªæ˜¯å¾å¾æœ›è‘—é‚£äº›éŒ¯èª¤ï¼Œç„¶å¾Œåƒå­©å­ä¸€æ¨£ç„¡åŠ©ã€‚</p>
<p>é€™ä½•å˜—ä¸æ˜¯ä¸€ç¨®é ˜æ‚Ÿï¼Œè®“æˆ‘æŠŠè¦æ ¼çœ‹æ¸…æ¥šï¼›</p>
<p>é›–ç„¶é‚£åŠ ç­çš„ç—›è‹¦ï¼Œå°‡æ—¥æ—¥å¤œå¤œåœ¨æˆ‘éˆé­‚æœ€æ·±è™•ã€‚</p>
<!-- raw HTML omitted -->
<p>æˆ‘ä»¥ç‚ºæˆ‘æœƒåº¦å§‘ï¼Œä½†æ˜¯æˆ‘æ²’æœ‰ï¼›</p>
<p>ç•¶æˆ‘çœ‹åˆ°æˆ‘è¦ªæ‰‹å¯«çš„ç¨‹å¼ï¼Œçµ¦æˆ‘é‚£å¤§ç´…è‰²çš„éŒ¯èª¤ã€‚</p>
<p>é€™ä½•å˜—ä¸æ˜¯ä¸€ç¨®é ˜æ‚Ÿï¼Œè®“ä½ æŠŠç¨‹å¼çœ‹æ¸…æ¥šï¼›</p>
<p>æ¸¬è©¦æ˜¯å¥¢ä¾ˆçš„å¹¸ç¦ï¼Œå¯æƒœ PM å¾ä¾†ä¸åœ¨ä¹ã€‚</p>
<!-- raw HTML omitted -->
<p>å•Šï¼ä¸€æ®µç¨‹å¼å°±æ­¤åˆªé™¤&hellip;</p>
<p>å•Šï¼ä¸€å°æ™‚çœ¼çœ‹è¦è’è•ªã€‚</p>
<p>æˆ‘çš„ç¨‹å¼è‹¥æ˜¯éŒ¯èª¤ï¼Œé¡˜ user æ²’æœ‰ç™½ç™½å—è‹¦ï¼›</p>
<p>æ›¾ç¶“ç„¡æ—¥ç„¡å¤œå¿™ç¢Œï¼Œå°±åªæœ‰ã€Œè¾›è‹¦ã€ã€‚</p>
<!-- raw HTML omitted -->
<p>å•Šï¼å¤šéº¼ç—›çš„é ˜æ‚Ÿï¼Œé€™è¦æ ¼ä¸æ˜¯å…¨éƒ¨ï¼›</p>
<p>åªæ˜¯æˆ‘å›é¦–é–‹æœƒæ™‚çš„æ¯ä¸€æ­¥ï¼Œéƒ½èµ°çš„å¥½å­¤ç¨ã€‚</p>
<!-- raw HTML omitted -->
<p>å•Šï¼å¤šéº¼ç—›çš„é ˜æ‚Ÿï¼Œé€™æ™‚ç¨‹å·²ç¶“å»¶èª¤ï¼›</p>
<p>åªé¡˜æˆ‘æ™é–‹ç¥¨çš„æ·é–ï¼Œ PM æŸç¸›ï¼Œå…¨åŠ›è¿½é€ï¼Œåˆ¥å†ç‚º bug å—è‹¦ã€‚</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->Muzicons.com<!-- raw HTML omitted --></p>
]]></content>
		</item>
		
		<item>
			<title>è®€æ›¸æœƒå ±å‘Š - æ·±å…¥æ·ºå‡º MVC</title>
			<link>https://jaceju.net/head-first-mvc/</link>
			<pubDate>Mon, 08 Aug 2011 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/head-first-mvc/</guid>
			<description>MVC ä¸€ç›´ä»¥ä¾†æ˜¯åˆå­¸è€…å¾ˆé›£è·¨éçš„ä¸€å€‹è§€å¿µéšœç¤™ï¼Œå› æ­¤å‰é™£å­ï¼Œæˆ‘ä¾¿åœ¨ PHP è®€æ›¸æœƒä¸­åˆ†äº«äº†é€™å€‹ä¸»é¡Œï¼šæ·±å…¥æ·ºå‡º MVC ã€‚ é€™æ¬¡çš„å…§å®¹ä¸»è¦ä»‹ç´¹äº† MVC èˆ‡ MVP çš„è§€å¿µï¼Œä»¥åŠç°¡æ˜“</description>
			<content type="html"><![CDATA[<p>MVC ä¸€ç›´ä»¥ä¾†æ˜¯åˆå­¸è€…å¾ˆé›£è·¨éçš„ä¸€å€‹è§€å¿µéšœç¤™ï¼Œå› æ­¤å‰é™£å­ï¼Œæˆ‘ä¾¿åœ¨ PHP è®€æ›¸æœƒä¸­åˆ†äº«äº†é€™å€‹ä¸»é¡Œï¼šæ·±å…¥æ·ºå‡º MVC ã€‚</p>
<p>é€™æ¬¡çš„å…§å®¹ä¸»è¦ä»‹ç´¹äº† MVC èˆ‡ MVP çš„è§€å¿µï¼Œä»¥åŠç°¡æ˜“çš„ PHP åŠ JavaScript å¯¦ä½œï¼Œå¸Œæœ›èƒ½è®“å¤§å®¶å° MVC æœ‰é€²ä¸€æ­¥çš„èªè­˜ã€‚</p>
<!-- raw HTML omitted -->
<p>æŠ•å½±ç‰‡å¦‚ä¸‹ï¼š</p>
<!-- raw HTML omitted -->
<p>éŒ„å½±å…§å®¹å¦‚ä¸‹ï¼š</p>
<!-- raw HTML omitted -->
<p>åœ¨ JavaScript MVP çš„ç°¡æ˜“å¯¦ä½œç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä¹Ÿåšäº†å…©å€‹ç¯„ä¾‹ï¼š  <a href="http://jsfiddle.net/RbFSc/2/">Supervising Controller ç‰ˆæœ¬</a> / <a href="http://jsfiddle.net/FMruf/1/">Passive View ç‰ˆæœ¬</a>ã€‚</p>
<p>å…¶ä»–ç¯„ä¾‹ç¨‹å¼å¯ä»¥åˆ° <a href="https://github.com/jaceju/head_first_mvc_sample">GitHub</a> ä¸‹è¼‰ã€‚</p>
<p>æœ€å¾Œï¼Œå¦‚æœå¤§å®¶æœ‰ç™¼ç¾æˆ‘çš„è§€å¿µæœ‰èª¤çš„è©±ï¼Œé‚„è«‹ä¸åæŒ‡æ­£ã€‚</p>
<p>è¬è¬å¤§å®¶ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>å­¸ç¿’è¨­è¨ˆæ¨¡å¼çš„å¿ƒå¾—</title>
			<link>https://jaceju.net/learning-patterns/</link>
			<pubDate>Mon, 25 Jul 2011 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/learning-patterns/</guid>
			<description>å¾å¹¾å¹´å‰é–‹å§‹æ¥è§¸è¨­è¨ˆæ¨¡å¼ä¹‹å¾Œï¼Œä¸€ç›´è¦ºå¾—è¨­è¨ˆæ¨¡å¼çœŸçš„æ˜¯å¤ªé…·äº†ï¼è€Œé€™å…¶é–“çœ‹äº†ä¸€äº›è¨­è¨ˆæ¨¡å¼çš„æ›¸ç±èˆ‡æ–‡ç« ï¼Œä¹Ÿå¯¦ä½œäº†ä¸€äº›æ¨¡å¼ï¼Œæ·±æ·±è¦ºå¾—å¤§å¸«å€‘çš„æ•™å°æ˜¯å°</description>
			<content type="html"><![CDATA[<p>å¾å¹¾å¹´å‰é–‹å§‹æ¥è§¸è¨­è¨ˆæ¨¡å¼ä¹‹å¾Œï¼Œä¸€ç›´è¦ºå¾—è¨­è¨ˆæ¨¡å¼çœŸçš„æ˜¯å¤ªé…·äº†ï¼è€Œé€™å…¶é–“çœ‹äº†ä¸€äº›è¨­è¨ˆæ¨¡å¼çš„æ›¸ç±èˆ‡æ–‡ç« ï¼Œä¹Ÿå¯¦ä½œäº†ä¸€äº›æ¨¡å¼ï¼Œæ·±æ·±è¦ºå¾—å¤§å¸«å€‘çš„æ•™å°æ˜¯å°çš„ã€‚</p>
<p>ä½†è¦åˆ°é”å¤§å¸«æ‰€é«”æ‚Ÿçš„å¢ƒç•Œï¼Œä»¥æˆ‘ç›®å‰çš„ç¨‹åº¦ä¾†èªªé‚„å·®å¾—å¾ˆé ï¼›æ‰€ä»¥å°±æˆ‘å€‹äººæ‰€å­¸çš„éç¨‹ï¼Œæˆ‘ç°¡å–®æ•´ç†å‡ºä¸€å¥è©±ï¼Œé‚£å°±æ˜¯ï¼š</p>
<p><!-- raw HTML omitted -->æ‰¾å‡ºæ¨¡å¼ï¼Œç†Ÿæ‚‰æ¨¡å¼ï¼Œæ¨¡ä»¿æ¨¡å¼ï¼Œå¿˜æ‰æ¨¡å¼ï¼Œè€Œå¾Œé ˜æ‚Ÿæ¨¡å¼ã€‚<!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<h2 id="æ‰¾å‡ºæ¨¡å¼">æ‰¾å‡ºæ¨¡å¼</h2>
<p>ç•¶çœ‹å®Œæ›¸ä¸­çš„å…§å®¹å¾Œï¼Œæˆ‘æ›¾è¿«ä¸åŠå¾…åœ°æƒ³å»è©¦è©¦çœ‹æ¨¡å¼æ€éº¼ç”¨ã€‚ä¸éå¾Œä¾†æˆ‘ç™¼ç¾ï¼Œæˆ‘æ ¹æœ¬ä¸çŸ¥é“å¾ä½•ç”¨èµ·ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘æ›äº†å€‹æ–¹å¼ã€‚æˆ‘è©¦è‘—åœ¨ä¸€äº›çŸ¥åçš„ Open Source å°ˆæ¡ˆä¸­ï¼Œçœ‹çœ‹é«˜æ‰‹å€‘æ˜¯å¦‚ä½•è§£æ±ºå•é¡Œçš„ï¼›ç„¶å¾Œå†å¾é€™äº›è§£æ±ºæ–¹æ¡ˆä¸­ï¼Œå»åˆ†æå‡ºæ¨¡å¼çš„è¹¤å½±ã€‚</p>
<p>ç•¶ç„¶é€™äº›è§£æ³•ä¸è¦‹å¾—ç™¾åˆ†ä¹‹ç™¾ç¬¦åˆæ›¸ä¸Šçš„æ¨¡å¼ç¯„ä¾‹ï¼Œå› æ­¤æˆ‘ä¹Ÿæ›¾ç¶“èª¤åˆ¤éä¸€äº›æ¨¡å¼ã€‚ä½†æˆ‘æœƒå†å›é ­çœ‹çœ‹æ›¸ä¸­å°æ¨¡å¼æ‰€æè¿°çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå»æ‰¾å‡ºé€™äº›è§£æ³•èƒŒå¾Œæ‰€éš±è—çš„çœŸæ­£æ¨¡å¼ã€‚</p>
<h2 id="ç†Ÿæ‚‰æ¨¡å¼">ç†Ÿæ‚‰æ¨¡å¼</h2>
<p>æ¥ä¸‹ä¾†æˆ‘ä¸æ–·åœ°å»ç”¨æˆ‘ç†Ÿæ‚‰çš„å·¥å…· (ä¹Ÿå°±æ˜¯ PHP ) å»ç·´ç¿’æ¨¡å¼çš„åŸºæœ¬æ¶æ§‹ï¼Œè©¦åœ–å»æ‰¾å‡ºè©²å·¥å…·åœ¨æ¨¡å¼ä¸Šçš„æœ€ä½³å¯¦ä½œæ–¹æ³•ã€‚</p>
<p>ç•¶ç„¶é€™äº›ç·´ç¿’çš„æˆæœä¸¦ä¸èƒ½çœŸæ­£æ´¾ä¸Šç”¨å ´ï¼Œè€Œä¸”ä¹Ÿä¸è¦‹å¾—æ˜¯æœ€ä½³æ–¹æ³•ï¼›ä¸éé€™æ¨£çš„ç·´ç¿’æ–¹å¼ç‚ºæˆ‘æ—¥å¾Œåœ¨å¯¦æˆ°æ™‚ï¼Œæä¾›äº†ä¸å°çš„å¹«åŠ©ã€‚</p>
<h2 id="æ¨¡ä»¿æ¨¡å¼">æ¨¡ä»¿æ¨¡å¼</h2>
<p>å¾Œä¾†åœ¨å¯¦æˆ°æ™‚ï¼Œæˆ‘é–‹å§‹æ¨¡ä»¿åˆ¥äººåœ¨æ¨¡å¼ä¸Šçš„ç¶“é©—ï¼›ä¹Ÿå‰›å¥½æœ‰äº›å°ˆæ¡ˆè¼ƒç‚ºè¤‡é›œï¼Œæˆ‘ä¾¿è©¦è‘—ç”¨æ¨¡ä»¿åˆ°çš„ä½œæ³•ä¾†ä¸€ä¸€è§£æ±ºé€™äº›é›£é¡Œã€‚</p>
<p>é€™ç¨®æ–¹å¼æ‰€å¾—åˆ°çš„è§£æ³•ï¼Œè®“æˆ‘è¦ºå¾—ç•°å¸¸çš„æ¼‚äº®ï¼›ä½†ä¹Ÿå°±å¾é€™æ™‚é–‹å§‹ï¼Œæˆ‘æ¼¸æ¼¸é™·å…¥æ¨¡å¼è¿·æ€ï¼Œé–‹å§‹èªç‚ºçµ•å¤§éƒ¨ä»½çš„å•é¡Œéƒ½å¯ä»¥ç”¨æ¨¡å¼è§£æ±ºã€‚</p>
<h2 id="å¿˜æ‰æ¨¡å¼">å¿˜æ‰æ¨¡å¼</h2>
<p>ä»¥å‰çœ‹æ›¸æ™‚ï¼Œä¸€ç›´ç„¡æ³•ç†è§£å¤§å¸«ç‚ºä»€éº¼è¦èªªä¸è¦å°‡æ¨¡å¼ç¡¬å¥—åœ¨è¨­è¨ˆä¸Šï¼›ç›´åˆ°æœ‰æ¬¡ç¶­è­·æŸå€‹ä½¿ç”¨æ¨¡å¼è§£æ±ºçš„å°ˆæ¡ˆåŠŸèƒ½æ™‚ï¼Œç™¼ç¾å®ƒè®“æˆ‘é›£ä»¥ç†è§£ï¼Œæˆ‘æ‰çŸ¥é“è‡ªå·±å°æ¨¡å¼æœ‰èµ°ç«å…¥é­”çš„è·¡è±¡ã€‚</p>
<p>æˆ‘é‡æ–°å†æŠŠæ›¸ä¸Šçš„å…§å®¹ç¿»éä¸€æ¬¡ï¼Œå¤§å¸«çš„ç•¶é ­æ£’å–åŠæ™‚åœ°æ•²é†’äº†æˆ‘ï¼Œæœ‰æ™‚ç°¡å–®çš„è§£æ³•å°±å¯ä»¥å¹«åŠ©ä½ å®Œæˆç›®æ¨™ã€‚æ¨¡å¼åªæœ‰åœ¨ä½ çœŸæ­£éœ€è¦æ™‚ï¼Œæ‰æœƒæµ®ç¾åœ¨ä½ å¿ƒä¸­ï¼Œä¸¦é€éé‡æ§‹å»æ‰¾åˆ°å®ƒå€‘ï¼›ç”¨ä¸åˆ°æ™‚ï¼Œå°±æš«æ™‚å¿˜äº†å®ƒå§ã€‚</p>
<h2 id="é ˜æ‚Ÿæ¨¡å¼">é ˜æ‚Ÿæ¨¡å¼</h2>
<p>åš´æ ¼ä¾†èªªï¼Œæ¨¡å¼çš„é ˜æ‚Ÿï¼Œä¸€ç›´æ˜¯æˆ‘é‚„æœªåˆ°é”çš„å¢ƒç•Œã€‚</p>
<p>è¦èƒ½çœ‹å‡ºç¨‹å¼ç”¨äº†å“ªäº›æ¨¡å¼ï¼Œè¦èƒ½è¼•é¬†åœ°ç”¨æ¨¡å¼èˆ‡ä¼™ä¼´æºé€šï¼Œè¦èƒ½ç¢ºå®šè‡ªå·±éœ€ä¸éœ€è¦æ¨¡å¼ï¼Œè¦èƒ½éš¨å¿ƒæ‰€æ¬²åœ°ä½¿ç”¨æ¨¡å¼ï¼›æˆ‘èªç‚ºè¦åšåˆ°é€™äº›è¦æ±‚ï¼Œæ‰ç®—æ˜¯æˆ‘å€‹äººå°æ¨¡å¼æœ‰äº†çœŸæ­£çš„é ˜æ‚Ÿã€‚</p>
<p>å¸Œæœ›ï¼Œæœƒæœ‰é€™éº¼ä¸€å¤©ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>å¯¦æˆ° PHP é‡æ§‹èˆ‡æ¨¡å¼</title>
			<link>https://jaceju.net/php-refactor-to-pattern-in-action/</link>
			<pubDate>Thu, 05 May 2011 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/php-refactor-to-pattern-in-action/</guid>
			<description>é‡æ§‹å°ä¸€èˆ¬é–‹ç™¼è€…ä¾†èªªï¼Œå¯¦åœ¨æ˜¯ä¸€ä»¶åƒåŠ›ä¸è¨å¥½çš„äº‹æƒ…ï¼Œæ›´åˆ¥èªªæƒ³è¦æŠŠç¨‹å¼ä»¥æ¨¡å¼ä¾†é‡æ§‹äº†ã€‚ åœ¨é€™æ¬¡çš„è®€æ›¸æœƒå ±å‘Šè£¡ï¼Œæˆ‘é¦–æ¬¡æŒ‘æˆ°é€™æ¨£çš„é¡Œç›®ï¼Œç‚ºå¤§å®¶ä»‹ç´¹å¦‚ä½•</description>
			<content type="html"><![CDATA[<p>é‡æ§‹å°ä¸€èˆ¬é–‹ç™¼è€…ä¾†èªªï¼Œå¯¦åœ¨æ˜¯ä¸€ä»¶åƒåŠ›ä¸è¨å¥½çš„äº‹æƒ…ï¼Œæ›´åˆ¥èªªæƒ³è¦æŠŠç¨‹å¼ä»¥æ¨¡å¼ä¾†é‡æ§‹äº†ã€‚</p>
<p>åœ¨é€™æ¬¡çš„è®€æ›¸æœƒå ±å‘Šè£¡ï¼Œæˆ‘é¦–æ¬¡æŒ‘æˆ°é€™æ¨£çš„é¡Œç›®ï¼Œç‚ºå¤§å®¶ä»‹ç´¹å¦‚ä½•å°‡æ¨¡å¼çœŸæ­£åœ°æ‡‰ç”¨åˆ°é‡æ§‹è£¡ï¼Œä¹Ÿä»¥å¯¦éš›çš„ä¾‹å­ä¾†å±•ç¾é‡æ§‹èˆ‡æ¨¡å¼çš„å¨åŠ›ã€‚</p>
<p>ç•¶ç„¶ä»¥æˆ‘å€‹äººçš„èƒ½åŠ›ï¼Œé‚„æ˜¯æœ‰å¾ˆå¤šä¸ç›¡ç†æƒ³ä¹‹è™•ï¼›ä½†é‚„æ˜¯å¸Œæœ›é€éé€™æ¨£çš„ä»‹ç´¹ï¼Œè®“å¤§å®¶å°é‡æ§‹èˆ‡æ¨¡å¼æœ‰ä¸ä¸€æ¨£çš„çœ‹æ³•ã€‚</p>
<p>å› ç‚ºåœ¨è®€æ›¸æœƒæ˜¯ç”¨ Live Demo ä¾†å‘ˆç¾é‡æ§‹çš„æµç¨‹ï¼Œæ‰€ä»¥å¯èƒ½åœ¨çœ‹æŠ•å½±ç‰‡å’Œç¯„ä¾‹æ™‚ï¼Œæœƒç„¡æ³•æ„Ÿå—åˆ°é‡æ§‹èˆ‡æ¨¡å¼çš„é­…åŠ›ï¼Œé€™é»è¦è«‹å¤§å®¶å¤šå¤šåŒ…æ¶µã€‚</p>
<p>ä»¥ä¸‹å°±æ˜¯æœ¬æ¬¡å ±å‘Šçš„æŠ•å½±ç‰‡åŠç¯„ä¾‹ï¼š</p>
<!-- raw HTML omitted -->
<h2 id="æŠ•å½±ç‰‡èˆ‡ç¯„ä¾‹">æŠ•å½±ç‰‡èˆ‡ç¯„ä¾‹</h2>
<!-- raw HTML omitted -->
<p><a href="https://github.com/jaceju/PHP-Refactoring-And-Patterns">ç¯„ä¾‹ç¨‹å¼</a></p>
<p>è¬è¬å¤§å®¶ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>[PHP] ç°¡æ˜“çš„ç‰©ä»¶å‚³éæ–¹æ³•</title>
			<link>https://jaceju.net/passing-php-object/</link>
			<pubDate>Thu, 03 Feb 2011 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/passing-php-object/</guid>
			<description>åœ¨ PHP ä¸­ï¼Œå‚³éç‰©ä»¶æ˜¯å¾ˆå®¹æ˜“çš„äº‹ï¼›æˆ‘å€‘åªéœ€è¦å°‡ç‰©ä»¶çš„ç‹€æ…‹å°è£èµ·ä¾†å¾Œï¼Œä»¥å­—ä¸²çš„æ–¹å¼å‚³éçµ¦å¦ä¸€ç«¯çš„ç¨‹å¼é‚„åŸåŸ·è¡Œå³å¯ã€‚ç‰©ä»¶çš„å‚³éç”¨é€”å¾ˆå¤šï¼Œä¾‹å¦‚æˆ‘å€‘åœ¨ Gearman</description>
			<content type="html"><![CDATA[<p>åœ¨ PHP ä¸­ï¼Œå‚³éç‰©ä»¶æ˜¯å¾ˆå®¹æ˜“çš„äº‹ï¼›æˆ‘å€‘åªéœ€è¦å°‡ç‰©ä»¶çš„ç‹€æ…‹å°è£èµ·ä¾†å¾Œï¼Œä»¥å­—ä¸²çš„æ–¹å¼å‚³éçµ¦å¦ä¸€ç«¯çš„ç¨‹å¼é‚„åŸåŸ·è¡Œå³å¯ã€‚ç‰©ä»¶çš„å‚³éç”¨é€”å¾ˆå¤šï¼Œä¾‹å¦‚æˆ‘å€‘åœ¨ Gearman ä¸­ï¼Œå°±å¯ä»¥åœ¨ client æŠŠç‰©ä»¶ç•¶åšæ˜¯ job data å‚³éçµ¦ Server ã€‚</p>
<p>è¨»ï¼š Gearman çš„ä»‹ç´¹å¯ä»¥åƒè€ƒæ‹™ä½œï¼š<a href="http://www.jaceju.net/blog/archives/1211">Gearman å¿ƒå¾—</a>ã€‚</p>
<p>ä»¥ä¸‹æˆ‘å€‘ä¾†çœ‹çœ‹ç¯„ä¾‹ã€‚</p>
<!-- raw HTML omitted -->
<p>å‡è¨­æˆ‘å€‘æœ‰å€‹ <code>Event</code> é¡åˆ¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Event</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$_name</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_name</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$name</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>ç„¶å¾Œåœ¨ <code>client.php</code> ä¸­æˆ‘å€‘å»ºç«‹äº†ä¸€å€‹ <code>Event</code> ç‰©ä»¶ <code>$event</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="s1">&#39;Event.php&#39;</span><span class="p">;</span>
<span class="nv">$event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Event</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">);</span>
<span class="nx">file_put_contents</span><span class="p">(</span><span class="s1">&#39;event.txt&#39;</span><span class="p">,</span> <span class="nx">serialize</span><span class="p">(</span><span class="nv">$event</span><span class="p">));</span>
</code></pre></div><p>åœ¨é€™é‚Šæˆ‘å€‘æŠŠ <code>$event</code> å¯¦é«”ç”¨ <code>serialize</code> é€™å€‹æ–¹æ³•åºåˆ—åŒ–ï¼Œé€™æ¨£å°±èƒ½æŠŠ <code>$event</code> å¯¦é«”çš„ç‹€æ…‹å°è£èµ·ä¾†äº†ã€‚</p>
<p>æœ€å¾Œæˆ‘å€‘åœ¨ <code>server.php</code> ä¸­é‚„åŸå®ƒï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="s1">&#39;Event.php&#39;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">file_exists</span><span class="p">(</span><span class="s1">&#39;event.txt&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">exit</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$event</span> <span class="o">=</span> <span class="nx">unserialize</span><span class="p">(</span><span class="nx">file_get_contents</span><span class="p">(</span><span class="s1">&#39;event.txt&#39;</span><span class="p">));</span>
<span class="k">echo</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
</code></pre></div><p>è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘å€‘å¿…é ˆæŠŠ <code>Event</code> é¡åˆ¥çš„å®£å‘Šä¹ŸåŒ…å«é€²ä¾†ï¼Œé€™æ¨£ <code>unserialize</code> æ‰èƒ½æ­£ç¢ºé‚„åŸç‰©ä»¶ã€‚è€Œé‚„åŸå¾Œçš„ <code>$event</code> å¯¦é«”ï¼Œå°±è·Ÿæˆ‘å€‘åœ¨ <code>client.php</code> å»ºç«‹çš„ <code>$event</code> å¯¦é«”çš„ç‹€æ…‹æ˜¯ä¸€æ¨¡ä¸€æ¨£çš„äº†ã€‚</p>
<p>ç•¶ç„¶å¦‚æœç‰©ä»¶è£¡æœ‰äº›ç‹€æ…‹æ˜¯æˆ‘å€‘æ‰€ä¸æƒ³å‚³éå‡ºå»æ™‚ï¼Œé€™æ™‚å€™å¯ä»¥åœ¨é¡åˆ¥è£¡å®šç¾© <code>__sleep</code> é€™å€‹é­”è¡“æ–¹æ³•ä¾†å›å‚³æˆ‘å€‘æƒ³è¦ä¿ç•™çš„å±¬æ€§ï¼Œè€Œ <code>__wakeup</code> æ–¹æ³•å‰‡å¯ä»¥å”åŠ©æˆ‘å€‘åœ¨ <code>unserialize</code> å¾Œï¼ŒåŸ·è¡Œä¸€äº›åˆå§‹åŒ–çš„æ–¹æ³•ï¼›è©³ç´°çš„èªªæ˜å¯ä»¥åƒè€ƒå®˜æ–¹æ‰‹å†Šè£¡ <a href="http://www.php.net/manual/en/language.oop5.magic.php">Magic Method</a> ä¸€ç¯€ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>é‡æ§‹å¯¦ä¾‹ä»‹ç´¹ â€“ åˆ†æç¯‡</title>
			<link>https://jaceju.net/refactoring-1/</link>
			<pubDate>Thu, 06 Jan 2011 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/refactoring-1/</guid>
			<description>é‡æ§‹æ˜¯ä»€éº¼ï¼Ÿé€™å•é¡Œå…¶å¯¦çœŸçš„å¾ˆé›£å›ç­”ã€‚ æˆ‘å€‹äººè¦ºå¾—é‡æ§‹æ˜¯ä¸€ç¨®è®“ç¨‹å¼ä¿æŒæ´»åŠ›çš„ä¸€ç¨®æ–¹æ³•ï¼Œè®“å®ƒèƒ½éš¨è‘—æ™‚é–“è€Œä¸æ–·åœ°é€²åŒ–ã€‚å¦‚æœæˆ‘å€‘ä¸€ç›´æ”¾ä»»è‡ªå·±ä¸å°ç¨‹å¼ç¢¼</description>
			<content type="html"><![CDATA[<p>é‡æ§‹æ˜¯ä»€éº¼ï¼Ÿé€™å•é¡Œå…¶å¯¦çœŸçš„å¾ˆé›£å›ç­”ã€‚</p>
<p>æˆ‘å€‹äººè¦ºå¾—é‡æ§‹æ˜¯ä¸€ç¨®è®“ç¨‹å¼ä¿æŒæ´»åŠ›çš„ä¸€ç¨®æ–¹æ³•ï¼Œè®“å®ƒèƒ½éš¨è‘—æ™‚é–“è€Œä¸æ–·åœ°é€²åŒ–ã€‚å¦‚æœæˆ‘å€‘ä¸€ç›´æ”¾ä»»è‡ªå·±ä¸å°ç¨‹å¼ç¢¼åšé©ç•¶çš„æ•´ç†ï¼Œè€Œæ˜¯é è‘—ä¸æ±‚ç”šè§£çš„ä¿®ä¿®è£œè£œä¾†ç¶­ç¹«å®ƒçš„ç”Ÿå‘½ï¼Œå¾ˆå¿«åœ°ç¨‹å¼ç¢¼å°±æœƒè®Šå¾—æ®˜ç ´ä¸å ªã€è‡ƒè…«è‚¥å¤§è€Œé›£ä»¥ç¶­è­·ã€‚</p>
<p>è€Œä¸”æœ‰çš„æ™‚å€™ï¼Œæˆ‘å€‘ä¹Ÿæƒ³è®“ç¨‹å¼ç¢¼èƒ½éš¨è‘—æˆ‘å€‘è§€å¿µçš„å¢é•·ï¼Œä»¥é©æ‡‰æœªä¾†çš„è®ŠåŒ–ï¼›ä»Šå¤©æˆ‘å€‘æœƒè¦ºå¾—é€™æ¨£çš„å¯«æ³•å¾ˆè®šï¼Œä½†æ˜å¤©å¯èƒ½åˆæœƒå­¸åˆ°æ›´å¥½çš„å¯«æ³•ï¼Œé‡æ§‹å°±èƒ½çµ¦æˆ‘å€‘æ”¹è®Šç¨‹å¼ç¢¼çš„æ©Ÿæœƒã€‚</p>
<p>ä½†æ˜¯é€™äº›éƒ½æ˜¯å¾ˆç± çµ±çš„è§£é‡‹ï¼Œæœ‰æ²’æœ‰ä»€éº¼æ–¹æ³•å¯ä»¥è®“æˆ‘å€‘æ›´ç­è§£é‡æ§‹å‘¢ï¼Ÿæˆ‘æƒ³ï¼Œåªæœ‰ç”¨å¯¦éš›çš„ä¾‹å­ä¾†èªªæ˜æ˜¯æœ€ç›´æ¥çš„å§ã€‚ä½†æ˜¯å¤ªç²¾ç°¡çš„ç¯„ä¾‹å¯èƒ½è¡¨é”ä¸äº†é‡æ§‹çš„æ„åœ–ï¼Œè€Œéæ–¼è¤‡é›œçš„ç¯„ä¾‹åˆæœƒè®“é‡æ§‹çš„ç„¦é»æ¨¡ç³Šï¼Œè¦æ‰¾åˆ°ä¸€å€‹é©åˆçš„ä¾‹å­å¯èƒ½æ¯”é‡æ§‹æœ¬èº«é‚„å›°é›£ã€‚</p>
<p>å¾Œä¾†æŸæ¬¡çš„æ”¹ç‰ˆæ©Ÿæœƒä¸‹ï¼Œæˆ‘åˆ†æäº†ä¼™ä¼´ä¹‹å‰æ‰€è£½ä½œçš„åŠŸèƒ½ä¸¦åšäº†ä¸€æ¬¡é‡æ§‹ï¼Œç™¼ç¾é€™å€‹åŠŸèƒ½çš„è¦æ¨¡ä¸ç®—å¤ªå¤§ï¼Œè€Œä¸”ä¹Ÿå¾ˆå®¹æ˜“å±•ç¾å‡ºé‡æ§‹å¾Œçš„å„ªé»ï¼›å› æ­¤ï¼Œæˆ‘ä¾¿å°‡é€™å€‹åŠŸèƒ½ç¨å¾®åšäº†ç°¡åŒ–ä»¥æ–¹ä¾¿èªªæ˜ï¼Œå¸Œæœ›èƒ½è®“å¤§å®¶ç­è§£é‡æ§‹ç©¶ç«Ÿæ˜¯åœ¨åšäº›ä»€éº¼ã€‚</p>
<p>ä¸éé€™å€‹ç¯„ä¾‹é›–ç„¶ä¸å¤§ï¼Œä½†ä¹Ÿé‚„æ˜¯éœ€è¦ä¸€ç•ªåŠŸå¤«ä¾†è§£èªªï¼›å› æ­¤æˆ‘å°‡æœƒæŠŠå®ƒåˆ†æˆå…©å€‹éƒ¨ä»½ä¾†èªªæ˜ï¼Œç¬¬ä¸€ç¯‡æ˜¯åˆ†æï¼Œç¬¬äºŒç¯‡å‰‡æ˜¯å¯¦æˆ°ã€‚</p>
<p>æ¥ä¸‹ä¾†å°±ä¸€èµ·ä¾†çœ‹çœ‹é€™å€‹ä¾‹å­å§ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="éœ€æ±‚èªªæ˜">éœ€æ±‚èªªæ˜</h2>
<p>é€™æ˜¯ä¸€å€‹è£ä¿®å•å·çš„éœ€æ±‚ï¼ŒåŸºæœ¬ä¸Šæ˜¯åœ¨æ”¶é›†å®¢æˆ¶æƒ³è¦å¹«æˆ¿å­è£ä¿®çš„è³‡è¨Šï¼Œè¦æ³¨æ„çš„é‡é»å¦‚ä¸‹ï¼š</p>
<ul>
<li>è£ä¿®é¡å‹æ˜¯æŒ‡å¸¸è¦‹çš„æˆ¿å±‹è£ä¿®é‡é»ï¼Œä¾‹å¦‚å»šæˆ¿ã€æµ´å®¤æˆ–åœ°æ¿ç­‰ã€‚</li>
<li>è£ä¿®é¡å‹åŒ…å«äº†å®¢æˆ¶åŸºæœ¬è³‡è¨Šä»¥åŠè£ä¿®å…§å®¹ã€‚</li>
<li>ä¸€å€‹è£ä¿®å•å·åªæœƒå°æ‡‰ä¸€ç¨®è£ä¿®é¡å‹ï¼ŒåŒæ™‚ä¹Ÿåªè¨˜éŒ„ä¸€ä½å®¢æˆ¶ã€‚</li>
<li>è£ä¿®å…§å®¹å‰‡åŒ…å«è£ä¿®é¡å‹è£¡æœƒéœ€è¦è£ä¿®çš„é …ç›®ï¼Œåƒæ˜¯å»šæˆ¿æœƒéœ€è¦æ›è£ç“¦æ–¯çˆã€ä¸Šä¸‹æ«ƒç­‰ã€‚</li>
<li>éš¨è‘—è£ä¿®é¡å‹çš„ä¸åŒï¼Œè£ä¿®å…§å®¹ä¹Ÿæœƒä¸åŒã€‚</li>
<li>æœªä¾†æœƒé™¸çºŒæ–°å¢è£ä¿®é¡å‹ï¼Œå› æ­¤è£ä¿®çš„å…§å®¹ä¹Ÿæœƒæœ‰æ‰€è®Šå‹•ã€‚</li>
</ul>
<p>ä»¥ä¸‹æ˜¯é€™å€‹éœ€æ±‚æ‰€æä¾›çš„æ¨£æ¿ï¼Œè¡¨å–®é ï¼š</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>å®Œæˆé ï¼š</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>åœ¨ä¼™ä¼´çš„åŠªåŠ›ä¸‹ï¼Œç¾åœ¨é€™å€‹åŠŸèƒ½å·²ç¶“é”åˆ°å®¢æˆ¶çš„éœ€æ±‚ä¸¦ä¸Šç·šä¸€æ®µæ™‚é–“äº†ï¼Œç¶­è­·ä¹Ÿéƒ½æ˜¯äº¤ç”±ä¼™ä¼´è‡ªå·±ä¾†é€²è¡Œï¼›ä½†åœ¨æŸæ¬¡ç³»çµ±æ”¹ç‰ˆæ™‚ï¼Œç‚ºäº†èƒ½å°ç³»çµ±åšå‡ºæ•´é«”æ”¹ç‰ˆè¨ˆåŠƒï¼Œæ‰€ä»¥æˆ‘å¾—ç­è§£é€™å€‹åŠŸèƒ½ç´°éƒ¨çš„ç‹€æ³ã€‚</p>
<p>ä»¥ä¸‹å°±è®“æˆ‘å€‘ä¸€èµ·ä¾†å¾é€™å€‹å®Œæˆå¾Œçš„ç‰ˆæœ¬é–‹å§‹çœ‹èµ·å§ã€‚</p>
<p>è¨»ï¼šä½ å¯ä»¥åœ¨æˆ‘çš„ GitHub ä¸Šæ‰¾åˆ°<a href="https://github.com/jaceju/refactoring_sample">å®Œæ•´çš„ç¨‹å¼ç¢¼</a>ã€‚</p>
<h2 id="ç¨‹å¼è§£èªª">ç¨‹å¼è§£èªª</h2>
<p>åœ¨é‡æ§‹ä¹‹å‰ï¼Œä¸€å®šè¦å…ˆç­è§£æˆ‘å€‘å³å°‡è¦é‡æ§‹çš„ç¨‹å¼ç¢¼ã€‚å¦‚æœå®Œå…¨ä¸æ›‰å¾—å®ƒæ˜¯åšä»€éº¼çš„ï¼Œé‚£éº¼é‡æ§‹å°±æœƒå­˜åœ¨è‘—ä¸€å®šçš„é¢¨éšªã€‚</p>
<p>ç”±æ–¼æˆ‘å€‘æ˜¯æ¡ç”¨ Zend Framework ä¾†å»ºç½®é€™å€‹å°ˆæ¡ˆï¼Œå› æ­¤ç¨‹å¼å°‡åˆ†æˆ Controller ã€ View åŠ Model ä¸‰å€‹éƒ¨ä»½ã€‚ä»¥ä¸‹æˆ‘å€‘å…ˆå°å®ƒå€‘çš„ä½œç”¨ä¸€ä¸€èªªæ˜ï¼Œç„¶å¾Œå†åˆ†æå®ƒå€‘ç‚ºä½•éœ€è¦é‡æ§‹ã€‚</p>
<h3 id="controller">Controller</h3>
<p>Controller çš„éƒ¨ä»½ä¸»è¦åªæœ‰ IndexController é€™å€‹é¡åˆ¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/controllers/IndexController.php]
class IndexController extends Zend_Controller_Action
{
    // ...
}

</code></pre></div><p>å®ƒåŒ…å«äº† index ã€ step2 åŠ step3 ä¸‰å€‹ action ï¼Œä¹Ÿæ˜¯æœ¬åŠŸèƒ½ä¸»è¦çš„æµç¨‹ã€‚</p>
<p>indexAction() æ–¹æ³•åªæ˜¯å–®ç´”åœ°é¡¯ç¤ºé€£çµç”¨çš„ template è€Œå·²ï¼Œæ²’æœ‰å¯¦ä½œä»»ä½•ç¨‹å¼ç¢¼ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    public function indexAction()
    {
    }
</code></pre></div><p>step2Action() æ–¹æ³•è² è²¬è¡¨å–®çš„é¡¯ç¤ºèˆ‡è™•ç†è¡¨å–®å›å‚³çš„è³‡æ–™ã€‚é€™è£¡æˆ‘å€‘æœƒå…ˆæ¥æ”¶ decoration åƒæ•¸ï¼Œä»¥æ±ºå®šè¦å¾Œé¢çš„ç¨‹å¼è¦è™•ç†çš„è£ä¿®é¡å‹ã€‚</p>
<p>æ¥è‘—å†é€é Request ç‰©ä»¶çš„ isPost() æ–¹æ³•ï¼Œä¾†åˆ¤æ–·æ˜¯å¦æ˜¯ PostBack ã€‚å¦‚æœæ˜¯ PostBack çš„è©±å°±å…ˆæª¢æŸ¥è¡¨å–®è³‡æ–™ï¼Œæ­£ç¢ºå°±å¯«å…¥è³‡æ–™è¡¨ï¼Œåä¹‹å‰‡é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ã€‚</p>
<p>è¨»ï¼šé€™è£¡ç‚ºäº†æ¸›å°‘ç¯‡å¹…ï¼Œæ•…çœç•¥æ‰äº†æ‰¾ä¸åˆ°è£ä¿®é¡å‹çš„éŒ¯èª¤åˆ¤æ–·ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    public function step2Action()
    {
        $decorationName = strtolower($this-&gt;getRequest()-&gt;getParam(&#39;decoration&#39;));
        $error = false;
        $messenger = $this-&gt;_helper-&gt;flashMessenger;
        /* @var $messenger Zend_Controller_Action_Helper_FlashMessenger */
        if ($this-&gt;getRequest()-&gt;isPost()) {
            $filter = new Zend_Filter_StripTags();
            $callback = array($filter, &#39;filter&#39;);
            $formData = array_map($callback, $this-&gt;getRequest()-&gt;getPost());
            $formData = array_map(&#39;trim&#39;, $formData);
            // æª¢æŸ¥è¡¨å–®å¿…å¡«å€¼
            $checkFunctionName = &#39;_check&#39; . ucwords(strtolower($decorationName)) . &#39;FormData&#39;;
            $this-&gt;$checkFunctionName($formData, $error, $messenger);
            if (!$error) {
                $decorationTable = $this-&gt;_createDecorationTable($decorationName);
                $decorationRow = $decorationTable-&gt;createRow($formData);
                $decorationRow-&gt;save();
                $this-&gt;_helper-&gt;redirector-&gt;gotoSimple(&#39;step3&#39;, null, null, array(
                    &#39;decoration&#39; =&gt; $decorationName,
                    &#39;id&#39; =&gt; $decorationRow-&gt;id,
                ));
            } else {
                $params = array(
                    &#39;decoration&#39; =&gt; $decorationName,
                );
                $this-&gt;_helper-&gt;redirector-&gt;gotoSimple(&#39;step2&#39;, null, null, $params);
            }
        }
        $this-&gt;view-&gt;decorationName = $decorationName;
        $this-&gt;view-&gt;decorationDisplayName =
                $this-&gt;_decorationDisplayNameList[strtolower($decorationName)];
        $this-&gt;view-&gt;messages = $messenger-&gt;getMessages();
    }
</code></pre></div><p>è€Œä¸”å› ç‚ºæˆ‘å€‘å·²ç¶“çŸ¥é“è£ä¿®é¡å‹æœƒéš¨è‘—æ™‚é–“è€Œå¢å¤šï¼Œå› æ­¤ä¼™ä¼´åœ¨æ’°å¯«ç¨‹å¼æ™‚ï¼Œå·²ç¶“è€ƒæ…®å…©å€‹å¯èƒ½æœƒè®ŠåŒ–çš„éƒ¨ä»½ã€‚</p>
<p>ç¬¬ä¸€å€‹æ˜¯åœ¨æª¢æŸ¥è¡¨å–®å…§å®¹çš„éƒ¨ä»½ï¼›åœ¨ step2Action() æ–¹æ³•æ¥æ”¶äº†è¡¨å–®è³‡æ–™å¾Œï¼Œæˆ‘å€‘é€éåƒæ•¸å–å¾—çš„è£ä¿®é¡å‹åç¨±ä¾†æ±ºå®šè¦å‘¼å«å“ªå€‹æª¢æŸ¥æ–¹æ³•ã€‚ä½†å› ç‚ºç›®å‰æˆ‘å€‘åªæœ‰ kitchen é€™å€‹è£ä¿®é¡å‹ï¼Œæ‰€ä»¥åœ¨ IndexController é¡åˆ¥ä¸­åªæœ‰ _checkKitchenFormData() é€™å€‹æ–¹æ³•ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    public function step2Action()
    {
       // ...
            $checkFunctionName = &#39;_check&#39; . ucwords(strtolower($decorationName)) . &#39;FormData&#39;;
            $this-&gt;$checkFunctionName($formData, $error, $messenger);
       // ...
    }
    protected function _checkKitchenFormData($formData, <span class="ni">&amp;amp;</span>$error, Zend_Controller_Action_Helper_FlashMessenger <span class="ni">&amp;amp;</span>$messenger)
    {
        if (0 === strlen($formData[&#39;name&#39;])) {
            $error = true;
            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥å§“å&#39;);
        }
        if (0 === strlen($formData[&#39;phone&#39;])) {
            $error = true;
            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥é›»è©±&#39;);
        }
        if (0 === strlen($formData[&#39;address&#39;])) {
            $error = true;
            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥åœ°å€&#39;);
        }
        if (!array_key_exists(&#39;kitchenQuestion01&#39;, $formData)
                <span class="ni">&amp;amp;&amp;amp;</span> !array_key_exists(&#39;kitchenQuestion02&#39;, $formData)) {
            $error = true;
            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡è£ä¿®å…§å®¹&#39;);
        }
        if (!array_key_exists(&#39;kitchenQuestion03&#39;, $formData)
                <span class="ni">&amp;amp;&amp;amp;</span> !array_key_exists(&#39;kitchenQuestion04&#39;, $formData)) {
            $error = true;
            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡è¨­å‚™æ˜¯å¦ä¿ç•™&#39;);
        }
        if (!array_key_exists(&#39;kitchenQuestion05&#39;, $formData)) {
            $error = true;
            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡ç¾æœ‰å»šå…·&#39;);
        }
    }

</code></pre></div><p>å¦ä¸€å€‹æ˜¯å»ºç«‹è³‡æ–™è¡¨çš„éƒ¨ä»½ï¼Œé€™è£¡æ˜¯é€é _createDecorationTable() é€™å€‹æ–¹æ³•ä¾†å‹•æ…‹æ±ºå®šè¦ä½¿ç”¨å“ªå€‹è³‡æ–™è¡¨ï¼Œä¹Ÿå°±æ˜¯ä¸€èˆ¬å¸¸è¦‹çš„å·¥å» æ–¹æ³•ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    protected function _createDecorationTable($decorationName)
    {
        $tableName = &#39;Application_Model_DbTable_Decoration&#39; . ucfirst($decorationName) . &#39;s&#39;;
        return new $tableName();
    }
    public function step2Action()
    {
        // ...
        $decorationTable = $this-&gt;_createDecorationTable($decorationName);
        // ...
    }

</code></pre></div><p>step3Action() æ–¹æ³•å‰‡æ˜¯ç”¨ä¾†é¡¯ç¤ºå®Œæˆå¾Œçš„é é¢ã€‚é€™è£¡é¦–å…ˆæœƒå–å¾— step2Action() æ–¹æ³•æ–°å¢çš„è‡ªå‹•ç·¨è™Ÿï¼Œç„¶å¾Œæ‰å¾è³‡æ–™è¡¨è£¡å–å¾—å°æ‡‰çš„å•å·è³‡æ–™ä¾†é¡¯ç¤ºã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    public function step3Action()
    {
        $decorationName = strtolower($this-&gt;getRequest()-&gt;getParam(&#39;decoration&#39;));
        $decorationId = (int) $this-&gt;getRequest()-&gt;getParam(&#39;id&#39;);
        $decorationTable = $this-&gt;_createDecorationTable($decorationName);
        $decorationRow = $decorationTable-&gt;find($decorationId)-&gt;current();
        if (!$decorationRow) {
            $this-&gt;_redirect(&#39;/&#39;);
        }
        $this-&gt;view-&gt;decorationName = $decorationName;
        $this-&gt;view-&gt;decorationDisplayName =
                $this-&gt;_decorationDisplayNameList[strtolower($decorationName)];
        $this-&gt;view-&gt;decorationRow = $decorationRow;
        $this-&gt;view-&gt;decorationMap = $this-&gt;_exportMapData($decorationName);
        $this-&gt;view-&gt;actionController = $this;
    }

</code></pre></div><p>èˆ‡ step2Action() æ–¹æ³•ç›¸åŒï¼Œåœ¨ step3Action() æ–¹æ³•ä¹Ÿå‘¼å«äº† _createDecorationTable() æ–¹æ³•ä¾†å‹•æ…‹å–å¾—å°æ‡‰çš„è³‡æ–™è¡¨ï¼Œæ¥è‘—å†é€é id åƒæ•¸å–å¾—åœ¨ step2Action() æ–¹æ³•æ–°å¢çš„è³‡æ–™åˆ—ã€‚</p>
<p>å› ç‚ºå­˜åœ¨è³‡æ–™è¡¨è£¡çš„è³‡æ–™ä¸¦ä¸åŒ…å«ä¸­æ–‡è¨Šæ¯ï¼Œå› æ­¤æˆ‘å€‘éœ€è¦å°‡å®ƒåšè½‰æ›ã€‚é€™å€‹å‹•ä½œåŸæœ¬æ˜¯å¯ä»¥åœ¨æ¨£ç‰ˆè£¡åšçš„ï¼Œä½†ç‚ºäº†ä¸åœ¨æ¨£ç‰ˆè£¡æœ‰å¤ªå¤šçš„åˆ¤æ–·å¼ï¼Œå› æ­¤æ¡ç”¨äº†åç¨±å°ç…§è¡¨çš„æ–¹æ³•ã€‚</p>
<p>_exportMapData() æ–¹æ³•æœƒå¾ application/controllers/DecorationMap è³‡æ–™å¤¾ä¸‹è¼‰å…¥å°æ‡‰çš„åç¨±å°ç…§è¡¨ (å³ kitchen.php) ï¼Œç„¶å¾Œå°‡å®ƒ assign åˆ° view çš„ decorationMap è®Šæ•¸ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    protected function _exportMapData($decorationName)
    {
        $includeFile = __DIR__ . &#39;/DecorationMap/&#39; . $decorationName . &#39;.php&#39;;
        if (!file_exists($includeFile)) {
            $this-&gt;_redirect(&#39;/&#39;);
        } else {
            $decorationMap = include($includeFile);
            return $decorationMap;
        }
    }

</code></pre></div><p>åç¨±å°ç…§è¡¨å…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/controllers/DecorationMap/kitchen.php]
return array(
    &#39;kitchenQuestion01&#39; =&gt; array(
        &#39;y&#39; =&gt; &#39;åŠæ«ƒ&#39;,
        &#39;n&#39; =&gt; &#39;&#39;,
    ),
    &#39;kitchenQuestion02&#39; =&gt; array(
        &#39;y&#39; =&gt; &#39;ä¸‹æ«ƒ&#39;,
        &#39;n&#39; =&gt; &#39;&#39;,
    ),
    &#39;kitchenQuestion03&#39; =&gt; array(
        &#39;y&#39; =&gt; &#39;ç“¦æ–¯çˆ&#39;,
        &#39;n&#39; =&gt; &#39;&#39;,
    ),
    &#39;kitchenQuestion04&#39; =&gt; array(
        &#39;y&#39; =&gt; &#39;æ’æ²¹ç…™æ©Ÿ&#39;,
        &#39;n&#39; =&gt; &#39;&#39;,
    ),
    &#39;kitchenQuestion05&#39; =&gt; array(
        &#39;1&#39; =&gt; &#39;ç„¡&#39;,
        &#39;2&#39; =&gt; &#39;æ³¥ä½œ&#39;,
        &#39;3&#39; =&gt; &#39;çµ„åˆå¼&#39;,
        &#39;4&#39; =&gt; &#39;æ­åŒ–&#39;,
        &#39;5&#39; =&gt; &#39;ä¸é½é‹¼&#39;,
    ),
);

</code></pre></div><p>å¦å¤– IndexController é¡åˆ¥è£¡ä¹Ÿå®šç¾©äº†ä¸€å€‹ $_decorationDisplayNameList å±¬æ€§ï¼Œå®ƒçš„ç›®çš„æ˜¯å­˜æ”¾ decoration åƒæ•¸æ‰€å°æ‡‰çš„ä¸­æ–‡åç¨±ã€‚å› æ­¤åœ¨ step2Action() æ–¹æ³•åŠ step3Action() æ–¹æ³•ä¸­éƒ½æœƒå…ˆæ‰¾å‡ºè£ä¿®é¡å‹æ‰€å°æ‡‰çš„ä¸­æ–‡åç¨±ï¼Œå† assign åˆ° view çš„ decorationDisplayName è®Šæ•¸ä¸­ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/controllers/IndexController.php]
    protected $_decorationDisplayNameList = array(
        &#39;kitchen&#39; =&gt; &#39;å»šæˆ¿&#39;,
    );
    // ...
    public function step2Action()   {
        // ...
        $this-&gt;view-&gt;decorationDisplayName =
                $this-&gt;_decorationDisplayNameList[strtolower($decorationName)];
        // ...
    }

</code></pre></div><p>æ¥ä¸‹ä¾†å°±æ˜¯ View çš„éƒ¨ä»½ã€‚</p>
<h3 id="view">View</h3>
<p>View çš„éƒ¨ä»½é™¤äº†ä¸‰å€‹å°æ‡‰ action çš„ template scripts å¤–ï¼Œé‚„æœ‰è£ä¿®é¡å‹æ‰€å°æ‡‰çš„è£ä¿®å…§å®¹è¡¨å–®åŠå®Œæˆé ã€‚</p>
<p>index.phtml ç‚ºå°æ‡‰ indexAction() æ–¹æ³•çš„æ¨£ç‰ˆï¼Œé¡¯ç¤ºè¡¨å–®çš„é€£çµã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/views/scripts/index/index.phtml]
<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>æˆ¿å±‹è£ä¿®<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;</span><span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;step2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;decoration&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;kitchen&#39;</span><span class="p">,</span>
<span class="p">));</span> <span class="cp">?&gt;</span><span class="s">&#34;</span><span class="p">&gt;</span>å»šæˆ¿<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

</code></pre></div><p>step2.phtml ç‚ºå°æ‡‰ step2Action() æ–¹æ³•çš„æ¨£ç‰ˆï¼Œç”¨ä¾†é¡¯ç¤ºè¡¨å–®ï¼›å› ç‚ºæˆ‘å€‘å·²ç¶“é çŸ¥æ¯å€‹è£ä¿®å…§å®¹çš„é¸é …æ˜¯ä¸ä¸€æ¨£çš„ï¼Œå› æ­¤å°‡æœƒè®ŠåŒ–çš„å­è¡¨å–®éƒ¨ä»½ç¨ç«‹æˆå­æ¨£ç‰ˆã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/views/scripts/index/step2.phtml]
<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationDisplayName</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">legend</span><span class="p">&gt;</span>é€£çµ¡è³‡è¨Š<span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;name&#34;</span><span class="p">&gt;</span>å§“å<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;name&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;name&#34;</span> <span class="p">/&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;phone&#34;</span><span class="p">&gt;</span>é›»è©±<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;phone&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;phone&#34;</span> <span class="p">/&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;address&#34;</span><span class="p">&gt;</span>ä½å€<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;address&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;address&#34;</span> <span class="p">/&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">legend</span><span class="p">&gt;</span>è£ä¿®é¸é …<span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">partial</span><span class="p">(</span><span class="s1">&#39;index/&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationName</span> <span class="o">.</span> <span class="s1">&#39;/form.phtml&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span>
    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span><span class="p">&gt;</span>å®Œæˆé€å‡º<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

</code></pre></div><p>æ¯å€‹æœƒè®ŠåŒ–çš„å­è¡¨å–®éƒ½æ”¾åœ¨åŒåçš„è£ä¿®é¡å‹è³‡æ–™è¡¨ä¸‹ï¼Œä¾‹å¦‚å»šæˆ¿çš„éƒ¨ä»½å°±æ˜¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/views/scripts/index/kitchen/form.phtml]
<span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>è£ä¿®å…§å®¹<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;kitchenQuestion01&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;y&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>åŠæ«ƒ<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;kitchenQuestion02&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;y&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>ä¸‹æ«ƒ<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>è¨­å‚™æ˜¯å¦ä¿ç•™<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;kitchenQuestion03&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;y&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>ç“¦æ–¯çˆ<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;kitchenQuestion04&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;y&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>æ’æ²¹ç…™æ©Ÿ<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>ç¾æœ‰å»šå…·<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;kitchenQuestion05&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;1&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>ç„¡ï¼ˆéœ€æ–°è£½ï¼‰<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;kitchenQuestion05&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;2&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>æ³¥ä½œ<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;kitchenQuestion05&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;3&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>çµ„åˆå¼ï¼ˆåˆ†ä»¶å»šå…·ï¼‰<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;kitchenQuestion05&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;4&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>æ­åŒ–ï¼ˆæœ¨è³ªæ¡¶èº«ï¼‰<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;kitchenQuestion05&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;5&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>ä¸é½é‹¼æ¡¶èº«<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>

</code></pre></div><p>å¦å¤– step2.phtml ä¹Ÿæœƒåœ¨è¡¨å–®è³‡æ–™é©—è­‰éŒ¯èª¤æ™‚ï¼Œå°‡å°æ‡‰çš„éŒ¯èª¤è¨Šæ¯é¡¯ç¤ºå‡ºä¾†ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/views/scripts/index/kitchen/form.phtml]
    <span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">messages</span><span class="p">))</span> <span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">messages</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

</code></pre></div><p>step3.phtml ç‚ºå°æ‡‰ step3Action() æ–¹æ³•çš„æ¨£ç‰ˆï¼Œç”¨ä¾†é¡¯ç¤ºå®Œæˆé ï¼›é€™è£¡ä¹Ÿå’Œ step2Action() æ–¹æ³•ä¸€æ¨£ç”¨å­æ¨£ç‰ˆä¾†é¡¯ç¤ºä¸åŒçš„è£ä¿®é¡å‹çµæœã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/views/scripts/index/step3.phtml]
<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationDisplayName</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>é€£çµ¡è³‡è¨Š<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>å§“åï¼š <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>é›»è©±ï¼š <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="o">-&gt;</span><span class="na">phone</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>ä½å€ï¼š <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="o">-&gt;</span><span class="na">address</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>è£ä¿®é¸é …<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">partial</span><span class="p">(</span><span class="s1">&#39;index/&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationName</span> <span class="o">.</span> <span class="s1">&#39;/ok.phtml&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$this</span><span class="p">);</span> <span class="cp">?&gt;</span>

</code></pre></div><p>å­æ¨£ç‰ˆå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/views/scripts/index/kitchen/ok.phtml]
<span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>è£ä¿®å…§å®¹ï¼š<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">actionController</span><span class="o">-&gt;</span><span class="na">buildOptionString</span><span class="p">(</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationMap</span><span class="p">[</span><span class="s1">&#39;kitchenQuestion01&#39;</span><span class="p">],</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="p">[</span><span class="s1">&#39;kitchenQuestion01&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">actionController</span><span class="o">-&gt;</span><span class="na">buildOptionString</span><span class="p">(</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationMap</span><span class="p">[</span><span class="s1">&#39;kitchenQuestion02&#39;</span><span class="p">],</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="p">[</span><span class="s1">&#39;kitchenQuestion02&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>è¨­å‚™æ˜¯å¦ä¿ç•™ï¼š<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">actionController</span><span class="o">-&gt;</span><span class="na">buildOptionString</span><span class="p">(</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationMap</span><span class="p">[</span><span class="s1">&#39;kitchenQuestion03&#39;</span><span class="p">],</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="p">[</span><span class="s1">&#39;kitchenQuestion03&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">actionController</span><span class="o">-&gt;</span><span class="na">buildOptionString</span><span class="p">(</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationMap</span><span class="p">[</span><span class="s1">&#39;kitchenQuestion04&#39;</span><span class="p">],</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="p">[</span><span class="s1">&#39;kitchenQuestion04&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>ç¾æœ‰å»šå…·ï¼š<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">actionController</span><span class="o">-&gt;</span><span class="na">buildOptionString</span><span class="p">(</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationMap</span><span class="p">[</span><span class="s1">&#39;kitchenQuestion05&#39;</span><span class="p">],</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="p">[</span><span class="s1">&#39;kitchenQuestion05&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>

</code></pre></div><p>æ¯”è¼ƒç‰¹åˆ¥çš„æ˜¯åœ¨ ok.html é€™å€‹å­æ¨£ç‰ˆè£¡ï¼Œæˆ‘å€‘ç”¨åˆ°äº†å®šç¾©åœ¨ IndexController é¡åˆ¥è£¡çš„ buildOptionString() æ–¹æ³•ï¼Œä»¥å–å¾—è³‡æ–™åˆ—æ¬„ä½å€¼å°æ‡‰åˆ° decorationMap çš„ä¸­æ–‡åç¨±ã€‚</p>
<h3 id="model">Model</h3>
<p>Model çš„éƒ¨ä»½æ¯”è¼ƒç°¡å–®ï¼Œç›®å‰åªæœ‰ä¸€å€‹ Zend_Db_Table é¡åˆ¥ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/models/DbTable/DecorationKitchens.php]
class Application_Model_DbTable_DecorationKitchens extends Zend_Db_Table_Abstract
{
    protected $_name = &#39;decoration_kitchens&#39;;
}

</code></pre></div><p>è€Œå°æ‡‰çš„ database schema å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SET</span> <span class="n">SQL_MODE</span><span class="o">=</span><span class="s2">&#34;NO_AUTO_VALUE_ON_ZERO&#34;</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="o">`</span><span class="n">refactoring</span><span class="o">`</span> <span class="k">DEFAULT</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">COLLATE</span> <span class="n">utf8_general_ci</span><span class="p">;</span>
<span class="n">USE</span> <span class="o">`</span><span class="n">refactoring</span><span class="o">`</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="o">`</span><span class="n">decoration_kitchens</span><span class="o">`</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="o">`</span><span class="n">decoration_kitchens</span><span class="o">`</span> <span class="p">(</span>
  <span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="n">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">auto_increment</span><span class="p">,</span>
  <span class="o">`</span><span class="n">name</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">phone</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">cellphone</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">address</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">kitchenQuestion01</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">kitchenQuestion02</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">kitchenQuestion03</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">kitchenQuestion04</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">kitchenQuestion05</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;5&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span>  <span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">MyISAM</span>  <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8</span> <span class="n">ROW_FORMAT</span><span class="o">=</span><span class="k">DYNAMIC</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">&#39;å»šæˆ¿å•å·&#39;</span><span class="p">;</span>

</code></pre></div><p>ä»¥ä¸Šå°±æ˜¯ç¬¬ä¸€ç‰ˆç¨‹å¼æ‰€éœ€è¦çš„æ‰€æœ‰æª”æ¡ˆå’Œå®ƒå€‘çš„é‹ä½œåŸç†ã€‚</p>
<h3 id="åŠ å…¥æ–°è£ä¿®é¡å‹">åŠ å…¥æ–°è£ä¿®é¡å‹</h3>
<p>ç­è§£äº†ç¨‹å¼ç¢¼ä¹‹å¾Œï¼Œæ¥è‘—æˆ‘å€‘ä¾†çœ‹å¦‚ä½•åŠ å…¥ä¸€å€‹æ–°çš„è£ä¿®é¡å‹ï¼›å‡è¨­æ–°çš„è£ä¿®é¡å‹æ˜¯ã€Œæµ´å®¤ã€ (Bathroom) ï¼Œä¹Ÿå·²ç¶“æœ‰äº†å°æ‡‰çš„ database schema åŠæ¨£ç‰ˆã€‚</p>
<p>æˆ‘å€‘éœ€è¦æ›´å‹•ä»¥ä¸‹å¹¾å€‹éƒ¨ä»½ï¼š</p>
<p>è¨»ï¼šä»¥ä¸‹å°‡æœƒä»¥ä¸€èˆ¬ patch æª”çš„æ–¹å¼ä¾†è¡¨ç¤ºæ›´å‹•å¾Œçš„å·®ç•°ï¼Œå³åœ¨ç¨‹å¼ç¢¼çš„è¡Œé ­åŠ ä¸ŠåŠ è™Ÿ (+) æˆ–æ¸›è™Ÿ (-) ä¾†åˆ†åˆ¥è¡¨ç¤ºæ–°å¢ç¨‹å¼ç¢¼æˆ–åˆªæ¸›ç¨‹å¼ç¢¼ï¼›è€Œè¡Œé ­æ²’æœ‰ç‰¹åˆ¥æ¨™ç¤ºçš„è©±ï¼Œå°±è¡¨ç¤ºæ²’æœ‰æ›´å‹•ï¼›è‡³æ–¼ç§»é™¤æª”æ¡ˆã€è³‡æ–™å¤¾ã€é¡åˆ¥å±¬æ€§æˆ–æ•´å€‹é¡åˆ¥æ–¹æ³•çš„éƒ¨ä»½ï¼Œå°±ä¸æœƒå†ç‰¹åˆ¥ç”¨ç¨‹å¼ç¢¼æ¨™æ˜ï¼Œä»¥ç¯€çœç¯‡å¹…ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šæ–°å¢ Bathroom çš„ DbTable é¡åˆ¥ä¸¦åŒ¯å…¥ schema åˆ°è³‡æ–™åº«ä¸­ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">[/refactoring_sample/application/models/DbTable/DecorationBathrooms.php]
<span class="gi">+class Application_Model_DbTable_DecorationBathrooms extends Zend_Db_Table_Abstract
</span><span class="gi">+{
</span><span class="gi">+    protected $_name = &#39;decoration_bathrooms&#39;;
</span><span class="gi">+}
</span><span class="gi"></span>
</code></pre></div><p>è³‡æ–™è¡¨çš„ schema å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">DROP</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="o">`</span><span class="n">decoration_bathrooms</span><span class="o">`</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="o">`</span><span class="n">decoration_bathrooms</span><span class="o">`</span> <span class="p">(</span>
  <span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="n">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">auto_increment</span><span class="p">,</span>
  <span class="o">`</span><span class="n">name</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">phone</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">address</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">bathroomQuestion01</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">bathroomQuestion02</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">bathroomQuestion03</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;5&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">bathroomQuestion04</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">bathroomQuestion05</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span>  <span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">MyISAM</span>  <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8</span> <span class="n">ROW_FORMAT</span><span class="o">=</span><span class="k">DYNAMIC</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">&#39;è¡›æµ´å•å·&#39;</span><span class="p">;</span>

</code></pre></div><p>ç¬¬äºŒæ­¥ï¼šåœ¨ IndexController é¡åˆ¥çš„ $_decorationDisplayNameList è®Šæ•¸ä¸­åŠ å…¥æ–°çš„ä¸­æ–‡åç¨±å°æ‡‰ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">     protected $_decorationDisplayNameList = array(
         &#39;kitchen&#39; =&gt; &#39;å»šæˆ¿&#39;,
<span class="gi">+        &#39;bathroom&#39; =&gt; &#39;æµ´å®¤&#39;,
</span><span class="gi"></span>     );
</code></pre></div><p>ç¬¬ä¸‰æ­¥ï¼šåœ¨ IndexController é¡åˆ¥ä¸­æ–°å¢ _checkBathroomFormData() æ–¹æ³•ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"><span class="gi">+    protected function _checkBathroomFormData($formData, &amp;amp;$error, Zend_Controller_Action_Helper_FlashMessenger &amp;amp;$messenger)
</span><span class="gi">+    {
</span><span class="gi">+        if (0 === strlen($formData[&#39;name&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥å§“å&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (0 === strlen($formData[&#39;phone&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥é›»è©±&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (0 === strlen($formData[&#39;address&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥åœ°å€&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (!array_key_exists(&#39;bathroomQuestion01&#39;, $formData)) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡åªæ•¸&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (!array_key_exists(&#39;bathroomQuestion02&#39;, $formData)) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡é¦¬æ¡¶&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (!array_key_exists(&#39;bathroomQuestion03&#39;, $formData)) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡é¢ç›†&#39;);
</span><span class="gi">+        }
</span><span class="gi">+    }
</span><span class="gi"></span>
</code></pre></div><p>ç¬¬å››æ­¥ï¼šåœ¨ application/controllers/DecorationMap ç›®éŒ„ä¸‹åŠ å…¥åç¨±å°ç…§æª”ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/controllers/DecorationMap/bathroom.php]
<span class="cp">&lt;?php</span>
<span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;bathroomQuestion01&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;1&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;1 åªä»¥ä¸‹&#39;</span><span class="p">,</span>
        <span class="s1">&#39;2&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;1 ~ 1.3 åª&#39;</span><span class="p">,</span>
        <span class="s1">&#39;3&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;1.3 ~ 1.5 åª&#39;</span><span class="p">,</span>
        <span class="s1">&#39;4&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;1.5 åªä»¥ä¸Š&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="s1">&#39;bathroomQuestion02&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;1&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;æ–°è£½ - ä¸€èˆ¬é¦¬æ¡¶&#39;</span><span class="p">,</span>
        <span class="s1">&#39;2&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;æ–°è£½ - å…æ²»é¦¬æ¡¶&#39;</span><span class="p">,</span>
        <span class="s1">&#39;3&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ä¸éœ€æ›´æ›&#39;</span><span class="p">,</span>
        <span class="s1">&#39;4&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;æœªæ±ºå®š&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="s1">&#39;bathroomQuestion03&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;1&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;æ–°è£½ - é•·æŸ±&#39;</span><span class="p">,</span>
        <span class="s1">&#39;2&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;æ–°è£½  -çŸ­æŸ±&#39;</span><span class="p">,</span>
        <span class="s1">&#39;3&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;æ–°è£½ - å–®å­”&#39;</span><span class="p">,</span>
        <span class="s1">&#39;4&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ä¸éœ€æ›´æ›&#39;</span><span class="p">,</span>
        <span class="s1">&#39;5&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;æœªæ±ºå®š&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">);</span>

</code></pre></div><p>ç¬¬äº”æ­¥ï¼šåŠ å…¥ Bathroom çš„å­è¡¨å–®æ¨£ç‰ˆåŠå®Œæˆé æ¨£ç‰ˆã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/views/scripts/index/bathroom/form.phtml]
<span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>åªæ•¸<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion01&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;1&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>1 åªä»¥ä¸‹<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion01&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;2&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>1 ~ 1.3 åª<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion01&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;3&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>1.3 ~ 1.5 åª<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion01&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;4&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>1.5 åªä»¥ä¸Š<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>é¦¬æ¡¶<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion02&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;1&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>æ–°è£½ - ä¸€èˆ¬é¦¬æ¡¶<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion02&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;2&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>æ–°è£½ - å…æ²»é¦¬æ¡¶<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion02&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;3&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>ä¸éœ€æ›´æ›<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion02&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;4&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>æœªæ±ºå®š<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>é¢ç›†<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion03&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;1&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>æ–°è£½ - é•·æŸ±<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion03&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;2&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>æ–°è£½  -çŸ­æŸ±<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion03&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;3&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>æ–°è£½ - å–®å­”<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion03&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;4&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>ä¸éœ€æ›´æ›<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;bathroomQuestion03&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;5&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>æœªæ±ºå®š<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/views/scripts/index/bathroom/ok.phtml]
<span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>åªæ•¸<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">actionController</span><span class="o">-&gt;</span><span class="na">buildOptionString</span><span class="p">(</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationMap</span><span class="p">[</span><span class="s1">&#39;bathroomQuestion01&#39;</span><span class="p">],</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="p">[</span><span class="s1">&#39;bathroomQuestion01&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>é¦¬æ¡¶<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">actionController</span><span class="o">-&gt;</span><span class="na">buildOptionString</span><span class="p">(</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationMap</span><span class="p">[</span><span class="s1">&#39;bathroomQuestion02&#39;</span><span class="p">],</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="p">[</span><span class="s1">&#39;bathroomQuestion02&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>é¢ç›†<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">actionController</span><span class="o">-&gt;</span><span class="na">buildOptionString</span><span class="p">(</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationMap</span><span class="p">[</span><span class="s1">&#39;bathroomQuestion03&#39;</span><span class="p">],</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="p">[</span><span class="s1">&#39;bathroomQuestion03&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>

</code></pre></div><p>ç¬¬å…­æ­¥ï¼šæœ€å¾Œåœ¨ index.phtml åŠ å…¥ Bathroom çš„æ–°é€£çµã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/views/scripts/index/index.phtml]
 <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>æˆ¿å±‹è£ä¿®<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
     <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;</span><span class="cp">&lt;?php</span>
 <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
     <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
     <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;step2&#39;</span><span class="p">,</span>
     <span class="s1">&#39;decoration&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;kitchen&#39;</span><span class="p">,</span>
 <span class="p">));</span> <span class="cp">?&gt;</span><span class="s">&#34;</span><span class="p">&gt;</span>å»šæˆ¿<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
+    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;</span><span class="cp">&lt;?php</span>
<span class="o">+</span><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
<span class="o">+</span>    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
<span class="o">+</span>    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;step2&#39;</span><span class="p">,</span>
<span class="o">+</span>    <span class="s1">&#39;decoration&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bathroom&#39;</span><span class="p">,</span>
<span class="o">+</span><span class="p">));</span> <span class="cp">?&gt;</span><span class="s">&#34;</span><span class="p">&gt;</span>æµ´å®¤<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
 <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

</code></pre></div><p>æ¥è‘—æˆ‘å€‘ä¾†åˆ†æé€™æ¨£çš„ç¨‹å¼å¯«æ³•æœ‰ä»€éº¼ç¼ºé»ã€‚</p>
<h2 id="ç¨‹å¼åˆ†æ">ç¨‹å¼åˆ†æ</h2>
<p>å¾ä¸Šé¢æ–°å¢ä¸€å€‹è£ä¿®é¡å‹çš„éç¨‹ä¾†çœ‹ï¼Œé™¤äº†æ–°å¢å¿…è¦çš„ DbTable é¡åˆ¥å’Œæ¨£ç‰ˆå¤–ï¼Œå¤§éƒ¨ä»½çš„ä¿®æ”¹éƒ½é›†ä¸­åœ¨ IndexController é¡åˆ¥ä¸Šï¼›å¯ä»¥æƒ³è¦‹æœªä¾†åœ¨ä¸æ–·å¢åŠ è£ä¿®é¡å‹å¾Œï¼Œ IndexContrller é¡åˆ¥æœƒè¶Šä¾†è¶Šé¾å¤§ã€‚</p>
<p>ç‰©ä»¶å°å‘é–‹ç™¼ä¸­ï¼Œæœ‰å€‹å¾ˆé‡è¦çš„åŸå‰‡å°±æ˜¯ SRP (Single Responsibility Principle) ï¼Œä½†é¡¯ç„¶ IndexController é¡åˆ¥å·²ç¶“é•åäº†é€™å€‹åŸå‰‡ã€‚åŸå› å°±æ˜¯æˆ‘å€‘æŠŠæ‰€æœ‰çš„é‚è¼¯éƒ½é›†ä¸­åœ¨ IndexController é¡åˆ¥çš„èº«ä¸Šï¼Œä½¿å¾—å®ƒæ‰€èƒŒè² çš„å·¥ä½œè¶…éå®ƒåŸå…ˆæ“”ä»»çš„è§’è‰²ã€‚</p>
<p>æ‰€ä»¥é€™è£¡å¯ä»¥æ”¹é€²çš„åœ°æ–¹åœ¨æ–¼ï¼Œè®“ IndexController é¡åˆ¥é™¤äº†æµç¨‹çš„èª¿æ•´å¤–ï¼Œå„˜å¯èƒ½ä¸è¦å› ç‚ºæ–°å¢è£ä¿®é¡å‹è€Œæœ‰æ‰€æ›´å‹•ã€‚</p>
<p>å¦å¤– View æ‡‰è©²æ˜¯ç›´æ¥è¼¸å‡º Model çš„è³‡æ–™ï¼Œæˆ–æ˜¯é€é View Helper æˆ–æ¨£ç‰ˆèªæ³•ä¾†è™•ç†è³‡æ–™çš„å‘ˆç¾ï¼›ä½†æ˜¯åœ¨ step3Action() æ–¹æ³•ä¸­ï¼Œå»å› ç‚º View éœ€è¦è½‰æ›è³‡æ–™åˆ—æ¬„ä½å€¼çš„åç¨±ï¼Œè€Œå‘¼å«äº† IndexController é¡åˆ¥çš„ buildOptionString() æ–¹æ³•ï¼›é€™ä½¿å¾— View å±¤ä¸é©ç•¶åœ°ä¾è³´äº† Controller å±¤ï¼Œé€ æˆç¨‹å¼ç¢¼ç¶­è­·ä¸Šçš„å›°é›£ã€‚</p>
<p>è€Œä¸”åç¨±å°æ‡‰è¡¨ä¹Ÿå¿…é ˆé€é IndexController é¡åˆ¥ä¾†è¼‰å…¥ï¼Œé€™ä½¿å¾—æˆ‘å€‘åœ¨å…¶ä»– Controller ä¸­å¿…é ˆé‡è¤‡è²¼ä¸Šè¼‰å…¥æª”æ¡ˆçš„ç¨‹å¼ç¢¼ï¼Œé€™ä¹Ÿæ˜¯ä¸€å€‹å¯ä»¥æ”¹é€²çš„åœ°æ–¹ã€‚</p>
<p>ä¸‹ä¸€ç¯‡ï¼Œæˆ‘å€‘å°±ä¾†é‡å°é€™äº›å•é¡Œä¸€ä¸€é‡æ§‹å§ï¼</p>
<p>ç¹¼çºŒé–±è®€ï¼š<a href="http://jaceju.net/2011/01/06/1501/">é‡æ§‹å¯¦ä¾‹ä»‹ç´¹ - å¯¦æˆ°ç¯‡</a></p>
]]></content>
		</item>
		
		<item>
			<title>é‡æ§‹å¯¦ä¾‹ä»‹ç´¹ â€“ å¯¦æˆ°ç¯‡</title>
			<link>https://jaceju.net/refactoring-2/</link>
			<pubDate>Thu, 06 Jan 2011 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/refactoring-2/</guid>
			<description>æ¥çºŒå‰ç¯‡ï¼šé‡æ§‹å¯¦ä¾‹ä»‹ç´¹ - åˆ†æç¯‡ åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘å€‘åˆ†æäº†è©²åŠŸèƒ½çš„æ¯æ®µç¨‹å¼ç¢¼ï¼Œä¹Ÿç­è§£æœ‰å“ªäº›åœ°æ–¹éœ€è¦æ”¹é€²ï¼Œæ¥è‘—æˆ‘å€‘å°±ä¾†é€²å…¥å¯¦æˆ°çš„éšæ®µã€‚ åœ¨å¯¦æˆ°çš„éšæ®µï¼Œ</description>
			<content type="html"><![CDATA[<p>æ¥çºŒå‰ç¯‡ï¼š<a href="http://jaceju.net/2011/01/06/1495/">é‡æ§‹å¯¦ä¾‹ä»‹ç´¹ - åˆ†æç¯‡</a></p>
<p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘å€‘åˆ†æäº†è©²åŠŸèƒ½çš„æ¯æ®µç¨‹å¼ç¢¼ï¼Œä¹Ÿç­è§£æœ‰å“ªäº›åœ°æ–¹éœ€è¦æ”¹é€²ï¼Œæ¥è‘—æˆ‘å€‘å°±ä¾†é€²å…¥å¯¦æˆ°çš„éšæ®µã€‚</p>
<p>åœ¨å¯¦æˆ°çš„éšæ®µï¼Œæˆ‘å€‘è¦åšå…©ä»¶äº‹ï¼šå»ºç«‹è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œé‡æ§‹ç¨‹å¼ç¢¼ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="é¸æ“‡è‡ªå‹•åŒ–æ¸¬è©¦å·¥å…·">é¸æ“‡è‡ªå‹•åŒ–æ¸¬è©¦å·¥å…·</h2>
<p>å› ç‚ºé‡æ§‹æ˜¯ã€Œåœ¨ä¸æ”¹è®Šç¨‹å¼ç¢¼å¤–åœ¨è¡Œç‚ºçš„å‰æä¸‹ï¼Œå°ç¨‹å¼ç¢¼åšå‡ºä¿®æ­£ï¼Œä»¥æ”¹é€²ç¨‹å¼çš„å…§éƒ¨çµæ§‹ã€ (é‡æ§‹ - ä¾¯æ·ï¼ç†Šç¯€) ï¼Œæ‰€ä»¥åœ¨é‡æ§‹ä¹‹å‰æˆ‘å€‘å¿…é ˆå…ˆæœ‰ä¸€å€‹ä¿¡å¿ƒä¾æ“šï¼Œç¢ºä¿æˆ‘å€‘çš„ä¿®æ”¹ä¸æœƒå½±éŸ¿åŸä¾†çš„åŠŸèƒ½ï¼Œè€Œé€™å€‹æ–¹æ³•å°±æ˜¯è‡ªå‹•åŒ–æ¸¬è©¦ã€‚</p>
<p>ä¸€èˆ¬èˆŠç¨‹å¼çš„æ¶æ§‹å¾ˆå°‘èƒ½ç”¨å–®å…ƒæ¸¬è©¦çš„æ¦‚å¿µåšåˆ°è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œæ‰€ä»¥æ¯æ¬¡æ¸¬è©¦æ™‚éƒ½è¦äººå·¥æ‰“é–‹ç€è¦½å™¨ç”¨çœ¼ç›ä¸€å€‹é …ç›®ä¸€å€‹é …ç›®å»é©—è­‰ï¼Œé€™ç¨®æ¸¬è©¦çš„æ–¹å¼éå¸¸ä»°è³´ç•«é¢è¼¸å‡ºçš„çµæœã€‚è€Œåœ¨æˆ‘å€‘é€™å€‹ä¾‹å­è£¡ï¼Œå› ç‚º IndexController é¡åˆ¥è² æ“”äº†å¤ªå¤šå·¥ä½œï¼Œå› æ­¤ä¹Ÿé›£ä»¥ç›´æ¥ä½¿ç”¨ä¸€èˆ¬çš„å–®å…ƒæ¸¬è©¦ï¼Œåªèƒ½ä¾é ç•«é¢è¼¸å‡ºä¾†é©—è­‰ç¨‹å¼çš„æ­£ç¢ºæ€§ã€‚ä¸éæœ‰å…©ç¨®æ¸¬è©¦æŠ€è¡“çš„å‡ºç¾ï¼Œä½¿å¾—é€éç•«é¢è¼¸å‡ºä¾†é©—è­‰çš„æ–¹å¼ä¹Ÿèƒ½å¤ è‡ªå‹•åŒ–ï¼Œé‚£å°±æ˜¯ Zend_Test èˆ‡ Selenium ã€‚</p>
<p>å®ƒå€‘çš„åŸç†éƒ½æ˜¯é€éè§£æè¼¸å‡ºçš„ HTML ä¾†åšæ¸¬è©¦ï¼Œä¸åŒçš„æ˜¯ Zend_Test æœƒç›´æ¥åœ¨ä¼ºæœç«¯æˆªå– Response ç‰©ä»¶çš„å…§å®¹ï¼Œè€Œ Selenium å‰‡æ˜¯é€éç€è¦½å™¨ä¾†è§£æã€‚ Zend_Test çš„å„ªå‹¢åœ¨æ–¼å®ƒå¯ä»¥ç›´æ¥é©—è­‰æ‡‰ç”¨ç¨‹å¼çš„å…§éƒ¨æµç¨‹åŠä¼ºæœç«¯ç‰©ä»¶ç‹€æ…‹ (ä¾‹å¦‚ Session å…§å®¹) ï¼Œé©åˆç³»çµ±è¼ƒç‚ºè¤‡é›œçš„é–‹ç™¼ç’°å¢ƒï¼›è€Œ Selenium çš„å„ªå‹¢å‰‡åœ¨æ–¼å®ƒå¯ä»¥æ¸¬è©¦é é¢ä¸Šçš„äº’å‹•åŠŸèƒ½ï¼Œä¾‹å¦‚é€é JavaScript ç”¢ç”Ÿçš„ UI ç­‰ã€‚</p>
<p>å¦å¤– Zend_Test éœ€è¦æ‰‹å‹•å»æ’°å¯«æ¸¬è©¦æ¡ˆä¾‹ï¼Œè€Œä¸”ä¹Ÿåªèƒ½ç”¨åœ¨ä»¥ Zend Framework ç‚ºåŸºç¤çš„æ‡‰ç”¨ç¨‹å¼ä¸Šï¼›è€Œ Selenium å‰‡æä¾›è¦–è¦ºåŒ–çš„ Selenium IDE ä¾†å»ºç«‹æ¸¬è©¦æ¡ˆä¾‹ï¼Œä¹Ÿèƒ½é€é Selenium RC ä¾†å»ºç«‹è‡ªå‹•åŒ–æ¸¬è©¦ç’°å¢ƒï¼Œè€Œä¸”å¯é©ç”¨åœ¨å„ç¨®ä¸åŒçš„ Web é–‹ç™¼ç’°å¢ƒä¸Šã€‚</p>
<p>ç¶œåˆä¸Šé¢çš„å„ç¨®å„ªç¼ºé»ï¼Œå› æ­¤åœ¨é€™æ¬¡é‡æ§‹çš„éç¨‹ä¸­ï¼Œæˆ‘å€‘å°±é¸æ“‡  Selenium  åšç‚ºè‡ªå‹•æ¸¬è©¦çš„å·¥å…·ã€‚</p>
<h2 id="å»ºç«‹è‡ªå‹•åŒ–æ¸¬è©¦">å»ºç«‹è‡ªå‹•åŒ–æ¸¬è©¦</h2>
<p>å› ç‚ºæˆ‘å€‘å·²ç¶“æœ‰äº†å·²ç¶“ä¸Šç·šçš„ç¨‹å¼ï¼ŒåŸ·è¡Œçš„åŠŸèƒ½ä¹Ÿæ˜¯ç¶“éå®¢æˆ¶ç¢ºèªçš„ï¼Œæ‰€ä»¥ä¾¿å¯ç›´æ¥ä½¿ç”¨ Selenium ä¾†éŒ„è£½æ­£å¸¸çš„æµç¨‹ã€‚é€™é‚Šå°±ä¸å†è©³ç´°æè¿°éŒ„è£½çš„éç¨‹ï¼Œè«‹å¤§å®¶è‡ªè¡Œåƒè€ƒä»¥ä¸‹çš„åœ–ç¤ºã€‚</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>é€™è£¡çš„æ¸¬è©¦æ¡ˆä¾‹ä¸»è¦åˆ†æˆå…©å€‹éƒ¨ä»½ï¼šæˆåŠŸå¯«å…¥åŠé©—è­‰å¤±æ•—ã€‚ç•¶ç„¶å¦‚æœç‚ºäº†ç¢ºä¿æ¸¬è©¦çš„æ­£ç¢ºæ€§ï¼Œä¹Ÿæ˜¯å¯ä»¥å†æ·»å¢æ›´è¤‡é›œçš„æ¸¬è©¦çµ„åˆã€‚ä½†å› ç‚ºé€™æ˜¯å€‹ç¯„ä¾‹ï¼Œæ‰€ä»¥å°±ä»¥ç°¡å–®æ˜“æ‡‚ç‚ºå„ªå…ˆè€ƒé‡ã€‚</p>
<p>å®ŒæˆéŒ„è£½å¾Œï¼Œå°±å¯ä»¥å°‡å®ƒå­˜æˆä»¥ä¸‹ HTML æª”æ¡ˆï¼š</p>
<ul>
<li>/refactoring_sample/tests/selenium/UISuite.html</li>
<li>/refactoring_sample/tests/selenium/KitchenTest.html</li>
<li>/refactoring_sample/tests/selenium/BathroomTest.html</li>
</ul>
<p>è¨»ï¼šç‚ºçœç•¥ç¯‡å¹…ï¼Œé€™è£¡è«‹åƒè€ƒç½®æ–¼ GitHub çš„<a href="http://goo.gl/nIgWG">åŸå§‹ç¨‹å¼ç¢¼</a>ã€‚</p>
<p>å¦‚æœæ­é… Selenium RC çš„è©±ï¼Œé‚„å¯ä»¥éŒ„è£½æˆ PHPUnit çš„ TestCase æª”ï¼›ä¸éç”±æ–¼æˆ‘å€‘ä¸¦ä¸éœ€è¦åšåˆ°å…¨è‡ªå‹•åŒ–çš„æ¸¬è©¦ï¼Œå› æ­¤ä½¿ç”¨ Selenium IDE è¼‰å…¥å‰é¢éŒ„è£½çš„ HTML æª”åšæ¸¬è©¦å³å¯ã€‚</p>
<p>æ¥ä¸‹ä¾†åœ¨é‡æ§‹çš„éç¨‹ä¸­ï¼Œè«‹é–‹å•Ÿ Selenium IDE ä¸¦è¼‰å…¥å‰›å‰›çš„ HTML æ¸¬è©¦æ¡ˆä¾‹æª”ã€‚ç¨å¾Œé‡æ§‹çš„æ­¥é©Ÿä¸­ï¼Œè‹¥æœ‰æåˆ°æ¸¬è©¦çš„è©±ï¼Œå°±ä»£è¡¨è¦æŒ‰ä¸‹ Selenium IDE çš„åŸ·è¡ŒæŒ‰éµ (åœ–ç¤ºç‚ºç¶ è‰²ä¸‰è§’å½¢) ã€‚</p>
<p>æœ‰äº†æ¸¬è©¦çš„ä¾æ“šå¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥é€²è¡Œæ¥ä¸‹ä¾†çš„é‡æ§‹äº†ã€‚</p>
<h2 id="é‡æ§‹å¯¦æˆ°">é‡æ§‹å¯¦æˆ°</h2>
<p>äº‹å¯¦ä¸Šé‡æ§‹ä¸¦æ²’æœ‰ä¸€å®šè¦å¾å“ªå€‹åœ°æ–¹é–‹å§‹åšèµ·ï¼Œä¸€èˆ¬ä¾†èªªè¦çœ‹åˆ†æçš„çµæœã€‚è€Œåœ¨å‰é¢æåˆ° IndexController é¡åˆ¥è² æ“”äº†å¤ªå¤šè²¬ä»»ï¼Œæ‰€ä»¥æˆ‘å€‘ç¬¬ä¸€æ­¥å¯ä»¥å…ˆè®“å®ƒå¾é€™äº›è²¬ä»»ä¸­è§£è„«ã€‚</p>
<p>è¨»ï¼šåŒä¸Šä¸€ç¯‡ï¼Œä»¥ä¸‹å°‡æœƒä»¥ä¸€èˆ¬ patch æª”çš„æ–¹å¼ä¾†è¡¨ç¤ºæ›´å‹•å¾Œçš„å·®ç•°ï¼Œä»¥ç¯€çœç¯‡å¹…ã€‚</p>
<h3 id="1-ç§»å‹•åç¨±å°ç…§è¡¨">1. ç§»å‹•åç¨±å°ç…§è¡¨</h3>
<p>é¦–å…ˆæˆ‘å€‘è¦æŠŠåŸä¾†é€é IndexController::_exportMapData() æ–¹æ³•æ‰€è¼‰å…¥çš„åç¨±å°ç…§è¡¨ç§»å‹•ä½ç½®ï¼Œå› ç‚ºæˆ‘å€‘å¸Œæœ›è¦èƒ½å¤ æ¸›å°‘æ–°å¢è£ä¿®é¡å‹æ™‚ï¼Œæ‰€è¦å»ºç«‹çš„æª”æ¡ˆæ•¸é‡ã€‚å› æ­¤æˆ‘æŠŠåŸä¾†çš„åç¨±å°ç…§è¡¨æš«æ™‚å…ˆæ”¾åˆ°å°æ‡‰çš„ DbTable é¡åˆ¥ä¸­ï¼Œä½œæ³•å¦‚ä¸‹ï¼š</p>
<p>a. åœ¨ Application_Model_DbTable_DecorationKitchens é¡åˆ¥ä¸­åŠ å…¥ $_displayMap å±¬æ€§åŠ getDisplayMap() æ–¹æ³•ã€‚ $_displayMap å±¬æ€§å€¼å³ç‚º application/controllers/DecorationMap/kitchen.php çš„é™£åˆ—å€¼ï¼› getDisplayMap() æ–¹æ³•å‰‡å›å‚³ $_displayMap å±¬æ€§ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class Application_Model_DbTable_DecorationKitchens extends Zend_Db_Table_Abstract
 {
     protected $_name = &#39;decoration_kitchens&#39;;

<span class="gi">+    protected $_displayMap = array(
</span><span class="gi">+        &#39;kitchenQuestion01&#39; =&gt; array(
</span><span class="gi">+            &#39;y&#39; =&gt; &#39;åŠæ«ƒ&#39;,
</span><span class="gi">+            &#39;n&#39; =&gt; &#39;&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;kitchenQuestion02&#39; =&gt; array(
</span><span class="gi">+            &#39;y&#39; =&gt; &#39;ä¸‹æ«ƒ&#39;,
</span><span class="gi">+            &#39;n&#39; =&gt; &#39;&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;kitchenQuestion03&#39; =&gt; array(
</span><span class="gi">+            &#39;y&#39; =&gt; &#39;ç“¦æ–¯çˆ&#39;,
</span><span class="gi">+            &#39;n&#39; =&gt; &#39;&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;kitchenQuestion04&#39; =&gt; array(
</span><span class="gi">+            &#39;y&#39; =&gt; &#39;æ’æ²¹ç…™æ©Ÿ&#39;,
</span><span class="gi">+            &#39;n&#39; =&gt; &#39;&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;kitchenQuestion05&#39; =&gt; array(
</span><span class="gi">+            &#39;1&#39; =&gt; &#39;ç„¡&#39;,
</span><span class="gi">+            &#39;2&#39; =&gt; &#39;æ³¥ä½œ&#39;,
</span><span class="gi">+            &#39;3&#39; =&gt; &#39;çµ„åˆå¼&#39;,
</span><span class="gi">+            &#39;4&#39; =&gt; &#39;æ­åŒ–&#39;,
</span><span class="gi">+            &#39;5&#39; =&gt; &#39;ä¸é½é‹¼&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+    );
</span><span class="gi">+
</span><span class="gi">+    public function getDisplayMap()
</span><span class="gi">+    {
</span><span class="gi">+        return $this-&gt;_displayMap;
</span><span class="gi">+    }
</span><span class="gi"></span> }
</code></pre></div><p>b. å†å° Application_Model_DbTable_DecorationBathrooms é€™å€‹é¡åˆ¥åšä¸€æ¬¡é¡ä¼¼çš„ä¿®æ”¹ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class Application_Model_DbTable_DecorationBathrooms extends Zend_Db_Table_Abstract
 {
     protected $_name = &#39;decoration_bathrooms&#39;;
<span class="gi">+    protected $_displayMap = array(
</span><span class="gi">+        &#39;bathroomQuestion01&#39; =&gt; array(
</span><span class="gi">+            &#39;1&#39; =&gt; &#39;1 åªä»¥ä¸‹&#39;,
</span><span class="gi">+            &#39;2&#39; =&gt; &#39;1 ~ 1.3 åª&#39;,
</span><span class="gi">+            &#39;3&#39; =&gt; &#39;1.3 ~ 1.5 åª&#39;,
</span><span class="gi">+            &#39;4&#39; =&gt; &#39;1.5 åªä»¥ä¸Š&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;bathroomQuestion02&#39; =&gt; array(
</span><span class="gi">+            &#39;1&#39; =&gt; &#39;æ–°è£½ - ä¸€èˆ¬é¦¬æ¡¶&#39;,
</span><span class="gi">+            &#39;2&#39; =&gt; &#39;æ–°è£½ - å…æ²»é¦¬æ¡¶&#39;,
</span><span class="gi">+            &#39;3&#39; =&gt; &#39;ä¸éœ€æ›´æ›&#39;,
</span><span class="gi">+            &#39;4&#39; =&gt; &#39;æœªæ±ºå®š&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;bathroomQuestion03&#39; =&gt; array(
</span><span class="gi">+            &#39;1&#39; =&gt; &#39;æ–°è£½ - é•·æŸ±&#39;,
</span><span class="gi">+            &#39;2&#39; =&gt; &#39;æ–°è£½  -çŸ­æŸ±&#39;,
</span><span class="gi">+            &#39;3&#39; =&gt; &#39;æ–°è£½ - å–®å­”&#39;,
</span><span class="gi">+            &#39;4&#39; =&gt; &#39;ä¸éœ€æ›´æ›&#39;,
</span><span class="gi">+            &#39;5&#39; =&gt; &#39;æœªæ±ºå®š&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+    );
</span><span class="gi">+
</span><span class="gi">+    public function getDisplayMap()
</span><span class="gi">+    {
</span><span class="gi">+        return $this-&gt;_displayMap;
</span><span class="gi">+    }
</span><span class="gi"></span> }
</code></pre></div><p>c. ä¿®æ”¹ IndexController é¡åˆ¥çš„ step3Action() æ–¹æ³•ï¼Œå°‡åŸæœ¬é€é IndexController é¡åˆ¥çš„ _exportMapData() æ–¹æ³•å–å€¼çš„éƒ¨ä»½ï¼Œæ”¹ç”¨ DbTable é¡åˆ¥çš„ getDisplayMap() æ–¹æ³•ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"><span class="gd">-        $this-&gt;view-&gt;decorationMap = $this-&gt;_exportMapData($decorationName);
</span><span class="gd"></span><span class="gi">+        $this-&gt;view-&gt;decorationMap = $decorationTable-&gt;getDisplayMap();
</span></code></pre></div><p>è¨»ï¼šé€™è£¡çš„ã€Œ DbTable é¡åˆ¥ã€å°±æ˜¯æŒ‡ Application_Model_DbTable_DecorationKitchens åŠ Application_Model_DbTable_DecorationBathrooms é€™å…©å€‹é¡åˆ¥ï¼Œå¾ŒçºŒä¹‹èªªæ˜äº¦åŒã€‚</p>
<p>é€™è£¡æœ‰å€‹å¾ˆé‡è¦çš„é‡æ§‹ï¼Œå°±æ˜¯æ–¹æ³•åç¨±çš„ä¿®æ­£ã€‚åŸæœ¬çš„ _exportMapData ä¸¦ç„¡æ³•æ­£ç¢ºè¡¨é”ç¨‹å¼çš„æ„åœ–ï¼Œæ‰€ä»¥åœ¨é‡æ§‹æ™‚æˆ‘å€‘æœ€å¥½èƒ½å°‡å®ƒä¿®æ”¹æˆç¬¦åˆç¨‹å¼æ„åœ–çš„åç¨±ã€‚</p>
<p>d. åˆ‡æ›åˆ° Selenium IDE çš„ç•«é¢ï¼Œæ¸¬è©¦ã€‚æ²’æ„å¤–çš„è©±ï¼Œæ‡‰è©²å°±èƒ½çœ‹åˆ° Selenium IDE å‡ºç¾ç¶ è‰²å…‰æ£’äº†ã€‚</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>e. ç¢ºå®šæ²’å•é¡Œå¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥ç§»é™¤ IndexContrller çš„ _exportMapData() æ–¹æ³•å’Œ application/controllers/DecorationMap æ•´å€‹ç›®éŒ„ï¼Œå†åŸ·è¡Œä¸€æ¬¡æ¸¬è©¦ã€‚</p>
<p>ç¬¬ä¸€æ­¥å°±æ˜¯é€™éº¼ç°¡å–®ï¼Œå› ç‚ºé‡æ§‹æœ¬èº«å°±æ˜¯ç¶­æŒå°æ­¥å‰é€²ï¼›æˆ‘å€‘ä¸éœ€è¦ä¸€æ¬¡åšå¤ªå¤šï¼Œé¿å…å‡ºéŒ¯æ™‚é›£ä»¥æ‰¾åˆ°å•é¡Œæ‰€åœ¨ã€‚</p>
<h3 id="2-æ”¹ç”¨-row-é¡åˆ¥ä¾†è§£æ±ºåç¨±å°æ‡‰è¡¨çš„å•é¡Œ">2. æ”¹ç”¨ Row é¡åˆ¥ä¾†è§£æ±ºåç¨±å°æ‡‰è¡¨çš„å•é¡Œ</h3>
<p>å‰é¢æˆ‘å€‘æŠŠåç¨±å°æ‡‰è¡¨æ”¾åœ¨ DbTable é¡åˆ¥è£¡ï¼Œå…¶å¯¦é‚„æ˜¯ä¸å¤ªå¥½ï¼›å› ç‚ºæˆ‘å€‘é‚„æ˜¯å¾—é€é IndexController é¡åˆ¥çš„ buildOptionString() æ–¹æ³•ï¼Œè®“å¾ DbTable è£¡å–å¾—çš„åç¨±å°æ‡‰è¡¨èƒ½è½‰æ› Row ç‰©ä»¶çš„æ¬„ä½å€¼ã€‚</p>
<p>æ‰€ä»¥åœ¨é€™å€‹æ­¥é©Ÿä¸­ï¼Œæˆ‘å€‘å°±è¦è®“ Row ç‰©ä»¶è‡ªå·±èƒ½è¼¸å‡ºæ¬„ä½å€¼æ‰€å°æ‡‰çš„ä¸­æ–‡åç¨±ï¼Œä½œæ³•å¦‚ä¸‹ï¼š</p>
<p>a. åœ¨ application/models/DbTable ä¸‹åŠ å…¥ Application_Model_DbTable_DecorationKitchen åŠ Application_Model_DbTable_DecorationBathroom çš„ Row é¡åˆ¥ï¼Œå®ƒå€‘åˆ†åˆ¥ç¹¼æ‰¿è‡ª Zend_Db_Table_Row_Abstract é¡åˆ¥ã€‚</p>
<p>è¨»ï¼šä¹‹å¾Œçš„èªªæ˜è£¡ï¼Œæåˆ°ã€Œ Row é¡åˆ¥ã€çš„è©±ï¼Œå°±ä»£è¡¨ Application_Model_DbTable_DecorationKitchen åŠ Application_Model_DbTable_DecorationBathroom å…©å€‹é¡åˆ¥ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"><span class="gi">+class Application_Model_DbTable_DecorationKitchen extends Zend_Db_Table_Row_Abstract
</span><span class="gi">+{
</span><span class="gi">+}
</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"><span class="gi">+class Application_Model_DbTable_DecorationBathroom extends Zend_Db_Table_Row_Abstract
</span><span class="gi">+{
</span><span class="gi">+}
</span></code></pre></div><p>b. åœ¨åŸä¾† DbTable é¡åˆ¥ä¸­ï¼ŒåŠ å…¥ $_rowClass å±¬æ€§ï¼Œå…¶å€¼ç‚ºå°æ‡‰çš„ Row é¡åˆ¥åç¨±ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class Application_Model_DbTable_DecorationKitchens extends Zend_Db_Table_Abstract
 {
     protected $_name = &#39;decoration_kitchens&#39;;
<span class="gi">+    protected $_rowClass = &#39;Application_Model_DbTable_DecorationKitchen&#39;;
</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class Application_Model_DbTable_DecorationBathrooms extends Zend_Db_Table_Abstract
 {
     protected $_name = &#39;decoration_kitchens&#39;;
<span class="gi">+    protected $_rowClass = &#39;Application_Model_DbTable_DecorationBathroom&#39;;
</span></code></pre></div><p>c. å°‡åŸä¾†åœ¨ DbTable é¡åˆ¥ä¸Šçš„ $_displayMap å±¬æ€§å’Œ getDisplayMap() æ–¹æ³•è¤‡è£½åˆ°å°æ‡‰çš„ Row é¡åˆ¥ä¸Šã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class Application_Model_DbTable_DecorationKitchen extends Zend_Db_Table_Row_Abstract
 {
<span class="gi">+    protected $_displayMap = array(
</span><span class="gi">+        &#39;kitchenQuestion01&#39; =&gt; array(
</span><span class="gi">+            &#39;y&#39; =&gt; &#39;åŠæ«ƒ&#39;,
</span><span class="gi">+            &#39;n&#39; =&gt; &#39;&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;kitchenQuestion02&#39; =&gt; array(
</span><span class="gi">+            &#39;y&#39; =&gt; &#39;ä¸‹æ«ƒ&#39;,
</span><span class="gi">+            &#39;n&#39; =&gt; &#39;&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;kitchenQuestion03&#39; =&gt; array(
</span><span class="gi">+            &#39;y&#39; =&gt; &#39;ç“¦æ–¯çˆ&#39;,
</span><span class="gi">+            &#39;n&#39; =&gt; &#39;&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;kitchenQuestion04&#39; =&gt; array(
</span><span class="gi">+            &#39;y&#39; =&gt; &#39;æ’æ²¹ç…™æ©Ÿ&#39;,
</span><span class="gi">+            &#39;n&#39; =&gt; &#39;&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;kitchenQuestion05&#39; =&gt; array(
</span><span class="gi">+            &#39;1&#39; =&gt; &#39;ç„¡&#39;,
</span><span class="gi">+            &#39;2&#39; =&gt; &#39;æ³¥ä½œ&#39;,
</span><span class="gi">+            &#39;3&#39; =&gt; &#39;çµ„åˆå¼&#39;,
</span><span class="gi">+            &#39;4&#39; =&gt; &#39;æ­åŒ–&#39;,
</span><span class="gi">+            &#39;5&#39; =&gt; &#39;ä¸é½é‹¼&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+    );
</span><span class="gi">+
</span><span class="gi">+    public function getDisplayMap()
</span><span class="gi">+    {
</span><span class="gi">+        return $this-&gt;_displayMap;
</span><span class="gi">+    }
</span><span class="gi"></span> }
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class Application_Model_DbTable_DecorationBathroom extends Zend_Db_Table_Row_Abstract
 {
<span class="gi">+    protected $_displayMap = array(
</span><span class="gi">+        &#39;bathroomQuestion01&#39; =&gt; array(
</span><span class="gi">+            &#39;1&#39; =&gt; &#39;1 åªä»¥ä¸‹&#39;,
</span><span class="gi">+            &#39;2&#39; =&gt; &#39;1 ~ 1.3 åª&#39;,
</span><span class="gi">+            &#39;3&#39; =&gt; &#39;1.3 ~ 1.5 åª&#39;,
</span><span class="gi">+            &#39;4&#39; =&gt; &#39;1.5 åªä»¥ä¸Š&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;bathroomQuestion02&#39; =&gt; array(
</span><span class="gi">+            &#39;1&#39; =&gt; &#39;æ–°è£½ - ä¸€èˆ¬é¦¬æ¡¶&#39;,
</span><span class="gi">+            &#39;2&#39; =&gt; &#39;æ–°è£½ - å…æ²»é¦¬æ¡¶&#39;,
</span><span class="gi">+            &#39;3&#39; =&gt; &#39;ä¸éœ€æ›´æ›&#39;,
</span><span class="gi">+            &#39;4&#39; =&gt; &#39;æœªæ±ºå®š&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+        &#39;bathroomQuestion03&#39; =&gt; array(
</span><span class="gi">+            &#39;1&#39; =&gt; &#39;æ–°è£½ - é•·æŸ±&#39;,
</span><span class="gi">+            &#39;2&#39; =&gt; &#39;æ–°è£½  -çŸ­æŸ±&#39;,
</span><span class="gi">+            &#39;3&#39; =&gt; &#39;æ–°è£½ - å–®å­”&#39;,
</span><span class="gi">+            &#39;4&#39; =&gt; &#39;ä¸éœ€æ›´æ›&#39;,
</span><span class="gi">+            &#39;5&#39; =&gt; &#39;æœªæ±ºå®š&#39;,
</span><span class="gi">+        ),
</span><span class="gi">+    );
</span><span class="gi">+
</span><span class="gi">+    public function getDisplayMap()
</span><span class="gi">+    {
</span><span class="gi">+        return $this-&gt;_displayMap;
</span><span class="gi">+    }
</span><span class="gi"></span> }
</code></pre></div><p>e. å°‡åŸä¾†å‘¼å« DbTable é¡åˆ¥çš„ getDisplayMap() æ–¹æ³•çš„éƒ¨ä»½ï¼Œæ”¹ç‚ºå‘¼å« Row é¡åˆ¥çš„ getDisplayMap() æ–¹æ³•ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"><span class="gd">-        $this-&gt;view-&gt;decorationMap = $decorationTable-&gt;getDisplayMap();
</span><span class="gd"></span><span class="gi">+        $this-&gt;view-&gt;decorationMap = $decorationRow-&gt;getDisplayMap();
</span></code></pre></div><p>f. æ¸¬è©¦é€šéå¾Œï¼Œå°‡åŸä¾†åœ¨ DbTable é¡åˆ¥ä¸Šçš„ $_displayMap å±¬æ€§å’Œ getDisplayMap() æ–¹æ³•åˆªé™¤ã€‚</p>
<p>åˆ°é€™è£¡ï¼Œç›¸ä¿¡å¤§å®¶æœƒè¦ºå¾—å¾ˆç–‘æƒ‘ï¼Œç‚ºä»€éº¼ä¸ä¸€é–‹å§‹å°±æŠŠ $_displayMap å±¬æ€§å’Œ getDisplayMap() æ–¹æ³•ç§»åˆ° Row é¡åˆ¥ä¸Šå‘¢ï¼Ÿ</p>
<p>å› ç‚ºåœ¨ä¸€é–‹å§‹å°‹æ‰¾éœ€è¦è™•ç†çš„å•é¡Œçš„æ–¹å‘ï¼Œæœƒå½±éŸ¿æˆ‘å€‘å¾ŒçºŒé‡æ§‹çš„éç¨‹ï¼›è€Œä¸”æˆ‘ä¸¦ä¸ç¢ºå®šä¸€é–‹å§‹å°±æŠŠ $_displayMap å±¬æ€§å’Œ getDisplayMap() æ–¹æ³•æ”¾åœ¨ Row é¡åˆ¥ä¸Šæ˜¯ä¸æ˜¯ä¸€å€‹å¥½ä½œæ³•ï¼Œæ‰€ä»¥æˆ‘é¸æ“‡äº†å½±éŸ¿è¼ƒå°‘çš„æ–¹å¼ã€‚ä¿æŒå°æ­¥å‰é€²æ˜¯é‡æ§‹æœ€é‡è¦çš„é—œéµä¹‹ä¸€ï¼Œé€™æ¨£ä¸€ä¾†å³ä½¿ç™¼ç¾æ–¹å‘éŒ¯èª¤ï¼Œä¹Ÿå¯ä»¥è®“å¾©åŸçš„ä»£åƒ¹æ¸›åˆ°æœ€ä½ã€‚</p>
<p>g. å°‡ IndexController é¡åˆ¥çš„ buildOptionString() è¤‡è£½åˆ° Application_Model_DbTable_DecorationKitchen é¡åˆ¥è£¡ï¼Œä¸¦æ”¹åç‚º display() æ–¹æ³•ã€‚æ¥è‘—ä¿®æ”¹ display() æ–¹æ³•çš„ç¨‹å¼ç¢¼ï¼Œè®“å®ƒç›´æ¥ä½¿ç”¨å…§éƒ¨çš„ $_displayMap å±¬æ€§ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class Application_Model_DbTable_DecorationKitchen extends Zend_Db_Table_Row_Abstract
 {
<span class="gi">+    public function display($name)
</span><span class="gi">+    {
</span><span class="gi">+        return isset($this-&gt;_displayMap[$name]($this-&gt;$name))
</span><span class="gi">+             ? $this-&gt;_displayMap[$name]($this-&gt;$name)
</span><span class="gi">+             : null;
</span><span class="gi">+    }
</span></code></pre></div><p>h. æ¥è‘—å°‡æ¨£ç‰ˆä¸­å‘¼å« IndexController::buildOptionString() æ–¹æ³•çš„éƒ¨ä»½æ”¹ç‚ºå‘¼å« Row ç‰©ä»¶çš„ display() æ–¹æ³•ï¼›å¯ä»¥å…ˆæ”¹ä¸€å€‹ï¼Œæ¸¬è©¦ç„¡èª¤å¾Œå†å…¨éƒ¨æ”¹æ‰ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"><span class="gd">-            &lt;?php echo $this-&gt;actionController-&gt;buildOptionString(
</span><span class="gd">-                    $this-&gt;decorationMap[&#39;kitchenQuestion01&#39;],
</span><span class="gd">-                    $this-&gt;decorationRow[&#39;kitchenQuestion01&#39;]); ?&gt;
</span><span class="gd"></span><span class="gi">+            &lt;?php echo $this-&gt;decorationRow-&gt;display(&#39;kitchenQuestion01&#39;); ?&gt;
</span></code></pre></div><p>i. Application_Model_DbTable_DecorationBathroom é¡åˆ¥åšåŒæ¨£çš„è™•ç†ï¼Œæ¸¬è©¦ã€‚</p>
<p>j. æœ€å¾Œå°‡ IndexController::step3Action() æ–¹æ³•ä¸­ï¼Œç§»é™¤ view å° decorationMap å’Œ actionController å…©å€‹è®Šæ•¸çš„å¼•ç”¨ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">     public function step3Action()
     {
         // ...
<span class="gd">-        $this-&gt;view-&gt;decorationMap = $decorationRow-&gt;getDisplayMap();
</span><span class="gd">-        $this-&gt;view-&gt;actionController = $this;
</span><span class="gd"></span>     }
</code></pre></div><p>k. æœ€å¾Œåˆªæ‰æ•´å€‹ IndexController::buildOptionString() æ–¹æ³•ã€‚</p>
<p>ç•¶ç„¶ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥è®“ application/views/scripts/index/kitchen/form.phtml æ”¹ç”¨æ–°çš„ display() æ–¹æ³•ä¾†é¡¯ç¤ºé¸é …ï¼Œé€™å°±çœ‹ç¶­è­·ä¸Šçš„éœ€æ±‚å€¼ä¸å€¼å¾—æˆ‘å€‘é€™éº¼åšäº†ã€‚</p>
<h3 id="3-è™•ç†è£ä¿®é¡å‹åç¨±">3. è™•ç†è£ä¿®é¡å‹åç¨±</h3>
<p>ç¾åœ¨æˆ‘å€‘å·²ç¶“è®“ IndexController é¡åˆ¥æ¸›è¼•ä¸å°‘è²¬ä»»ï¼Œä½†æ˜¯é‚„æœ‰ä¸€å€‹åœ°æ–¹æœƒå½±éŸ¿åˆ°æ¯æ¬¡æˆ‘å€‘æ–°å¢è£ä¿®é¡å‹ï¼Œé‚£å°±æ˜¯ IndexController é¡åˆ¥çš„ $_decorationDisplayNameList å±¬æ€§ã€‚æˆ‘å€‘å¸Œæœ›è®“å®ƒæ˜¯å®šç¾©åœ¨ DbTable é¡åˆ¥æˆ–æ˜¯ Row é¡åˆ¥è£¡ï¼Œé€™æ¨£å°±ä¸ç”¨æ¯æ¬¡éƒ½è¦ä¿®æ”¹ IndexController é¡åˆ¥ã€‚</p>
<p>é‚£éº¼æ–°çš„å±¬æ€§ä½ç½®æ‡‰è©²æ”¾åœ¨ DbTable é¡åˆ¥è£¡å¥½ï¼Œé‚„æ˜¯æ”¾åœ¨ Row é¡åˆ¥è£¡å¥½å‘¢ï¼Ÿå…¶å¯¦å…©å€‹éƒ½æ˜¯å¯è¡Œçš„é¸æ“‡ï¼Œä½†åŸå‰‡ä¸Šæˆ‘å€‘å¸Œæœ›å„˜å¯èƒ½è®“ç›¸åŒçš„é‚è¼¯æ”¾åœ¨åŒä¸€å€‹åœ°æ–¹ï¼Œå› æ­¤é€™é‚Šæˆ‘é¸æ“‡äº† Row é¡åˆ¥ã€‚å®Œæ•´çš„ä½œæ³•å¦‚ä¸‹ï¼š</p>
<p>a. å…ˆå°‡ step2Action å‘¼å« _createDecorationTable() çš„ç¨‹å¼ç¢¼ç§»åˆ° action çš„é–‹é ­è™•ï¼Œä¸¦åœ¨ä¸‹ä¸€è¡ŒåŠ ä¸Š $decorationTable-&gt;createRow() ï¼›è€ŒåŸæœ¬å‘¼å« DbTable ç‰©ä»¶çš„ createRow() æ–¹æ³•çš„éƒ¨ä»½å‰‡æ”¹ç‚ºå‘¼å« Row ç‰©ä»¶çš„ setFromArray() æ–¹æ³•ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class IndexController é¡åˆ¥extends Zend_Controller_Action
 {
     public function step2Action()
     {
         $decorationName = strtolower($this-&gt;getRequest()-&gt;getParam(&#39;decoration&#39;));
<span class="gi">+        $decorationTable = $this-&gt;_createDecorationTable($decorationName);
</span><span class="gi">+        $decorationRow = $decorationTable-&gt;createRow();
</span><span class="gi"></span><span class="gd">-                $decorationTable = $this-&gt;_createDecorationTable($decorationName);
</span><span class="gd">-                $decorationRow = $decorationTable-&gt;createRow($formData);
</span><span class="gd"></span><span class="gi">+                $decorationRow-&gt;setFromArray($formData);
</span></code></pre></div><p>b. åœ¨ Row é¡åˆ¥ä¸­åŠ å…¥ $_displayName å±¬æ€§åŠ getDisplayName() æ–¹æ³•ï¼Œå…¶ä¸­ $_displayName å±¬æ€§çš„å€¼å³ç‚ºè£ä¿®é¡å‹çš„ä¸­æ–‡åç¨±ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class Application_Model_DbTable_DecorationKitchen extends Zend_Db_Table_Row_Abstract
 {
<span class="gi">+    protected $_displayName = &#39;å»šæˆ¿&#39;;
</span><span class="gi">+
</span><span class="gi">+    public function getDisplayName()
</span><span class="gi">+    {
</span><span class="gi">+        return $this-&gt;_displayName;
</span><span class="gi">+    }
</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class Application_Model_DbTable_DecorationBathroom extends Zend_Db_Table_Row_Abstract
 {
<span class="gi">+    protected $_displayName = &#39;æµ´å®¤&#39;;
</span><span class="gi">+
</span><span class="gi">+    public function getDisplayName()
</span><span class="gi">+    {
</span><span class="gi">+        return $this-&gt;_displayName;
</span><span class="gi">+    }
</span></code></pre></div><p>c. åœ¨ step2Action() æ–¹æ³•çš„ view ä¸­åŠ å…¥å° $decorationRow çš„å¼•ç”¨ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class IndexController é¡åˆ¥extends Zend_Controller_Action
 {
     public function step2Action()
     {
         $this-&gt;view-&gt;decorationName = $decorationName;
         $this-&gt;view-&gt;decorationDisplayName =
                 $this-&gt;_decorationDisplayNameList[strtolower($decorationName)];
<span class="gi">+        $this-&gt;view-&gt;decorationRow = $decorationRow;
</span></code></pre></div><p>d. åœ¨ step2.phtml åŠ step3.phtml å…©å€‹æ¨£ç‰ˆä¸­ï¼Œå°‡é¡¯ç¤ºæ¨£ç‰ˆè®Šæ•¸ decorationDisplayName çš„éƒ¨ä»½ï¼Œæ”¹ç‚ºé¡¯ç¤º Row ç‰©ä»¶çš„ getDisplayName() æ–¹æ³•ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"><span class="gd">-&lt;h1&gt;&lt;?php echo $this-&gt;escape($this-&gt;decorationDisplayName); ?&gt;&lt;/h1&gt;
</span><span class="gd"></span><span class="gi">+&lt;h1&gt;&lt;?php echo $this-&gt;escape($this-&gt;decorationRow-&gt;getDisplayName()); ?&gt;&lt;/h1&gt;
</span></code></pre></div><p>e. æ‹¿æ‰ IndexController é¡åˆ¥çš„ step2Action() èˆ‡ step3Action() æ–¹æ³•ä¸­ï¼ŒæŒ‡å®šçµ¦ view çš„ $_decorationDisplayNameList è®Šæ•¸æ‰€åœ¨ç›¸é—œç¨‹å¼ç¢¼ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">     public function step2Action()
     {
<span class="gd">-        $this-&gt;view-&gt;decorationDisplayName =
</span><span class="gd">-                $this-&gt;_decorationDisplayNameList[strtolower($decorationName)];
</span><span class="gd"></span>     public function step3Action()
     {
<span class="gd">-        $this-&gt;view-&gt;decorationDisplayName =
</span><span class="gd">-                $this-&gt;_decorationDisplayNameList[strtolower($decorationName)];
</span></code></pre></div><p>f. æœ€å¾Œç§»é™¤ IndexController é¡åˆ¥è£¡çš„ $_decorationDisplayNameList å±¬æ€§ã€‚</p>
<p>é€™æ¨£ä¸€ä¾†ï¼Œåœ¨ IndexController é¡åˆ¥å°±ä¸éœ€è¦é¡å¤–è™•ç†ä¸­æ–‡åç¨±é¡¯ç¤ºçš„å•é¡Œäº†ã€‚</p>
<h3 id="4-è™•ç†é‡è¤‡çš„ç¨‹å¼ç¢¼">4. è™•ç†é‡è¤‡çš„ç¨‹å¼ç¢¼</h3>
<p>é‡è¤‡çš„ç¨‹å¼ç¢¼æ˜¯æœ€ç³Ÿç³•çš„ä¸€ç¨®å£å‘³é“ï¼Œä½†æˆ‘å€‘å»åœ¨ä¸Šé¢çš„é‡æ§‹éç¨‹ä¸­ï¼Œè®“å…©å€‹ Row é¡åˆ¥éƒ½é‡è¤‡äº†åŒæ¨£çš„ç¨‹å¼ç¢¼ï¼›æ‰€ä»¥ç¾åœ¨æˆ‘å€‘è¦é€éç¹¼æ‰¿ä¾†æ¶ˆé™¤æ‰é€™äº›é‡è¤‡çš„ç¨‹å¼ç¢¼ï¼Œä½œæ³•å¦‚ä¸‹ï¼š</p>
<p>a. å»ºç«‹æŠ½è±¡çš„ Application_Model_DbTable_DecorationRow é¡åˆ¥ï¼Œå°‡åœ¨å¦å¤–å…©å€‹ Row é¡åˆ¥é‡è¤‡çš„ getDisplayName() ã€ getDisplayMap() åŠ display() ç­‰ä¸‰å€‹æ–¹æ³•è¤‡è£½éä¾†ï¼Œä¸¦åŠ å…¥å¿…è¦çš„ protected å±¬æ€§ï¼š $_displayName åŠ $_displayMap ã€‚</p>
<p>è¨»ï¼šå¾Œé¢çš„èªªæ˜ä¸­ï¼Œæœƒä»¥ã€ŒæŠ½è±¡ Row é¡åˆ¥ã€ä¾†ä»£æ›¿ Application_Model_DbTable_DecorationRow çš„å®Œæ•´åç¨±ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[/refactoring_sample/application/models/DbTable/DecorationRow.php]
abstract class Application_Model_DbTable_DecorationRow extends Zend_Db_Table_Row_Abstract
{
    protected $_displayName = null;
    public function getDisplayName()
    {
        return $this-&gt;_displayName;
    }
    protected $_displayMap = array();
    public function getDisplayMap()
    {
        return $this-&gt;_displayMap;
    }
    public function display($name)
    {
        return isset($this-&gt;_displayMap[$name]($this-&gt;$name))
             ? $this-&gt;_displayMap[$name]($this-&gt;$name)
             : null;
    }
}

</code></pre></div><p>b. èˆŠçš„ Row é¡åˆ¥æ”¹ç‚ºç¹¼æ‰¿æŠ½è±¡ Row é¡åˆ¥ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"><span class="gd">-class Application_Model_DbTable_DecorationKitchen extends Zend_Db_Table_Row_Abstract
</span><span class="gd"></span><span class="gi">+class Application_Model_DbTable_DecorationKitchen extends Application_Model_DbTable_DecorationRow
</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"><span class="gd">-class Application_Model_DbTable_DecorationKitchen extends Zend_Db_Table_Row_Abstract
</span><span class="gd"></span><span class="gi">+class Application_Model_DbTable_DecorationKitchen extends Application_Model_DbTable_DecorationRow
</span></code></pre></div><p>c. æœ€å¾Œç§»é™¤ Row é¡åˆ¥çš„ getDisplayName() ã€ getDisplayMap() åŠ display() ä¸‰å€‹æ–¹æ³•ï¼Œæ¸¬è©¦ã€‚</p>
<p>ç¾åœ¨æˆ‘å€‘çš„ Row é¡åˆ¥å°±åªéœ€è¦å®šç¾©å¥½è£ä¿®é¡å‹ä¸­æ–‡åç¨±ä»¥åŠæ¬„ä½å€¼åç¨±å°æ‡‰è¡¨å°±å¯ä»¥äº†ã€‚</p>
<h3 id="5-è™•ç†è¡¨å–®é©—è­‰å‡½å¼">5. è™•ç†è¡¨å–®é©—è­‰å‡½å¼</h3>
<p>æœ€å¾Œæˆ‘å€‘ä¾†è™•ç†æœƒè®“ IndexController é¡åˆ¥è®Šæˆå¾—éå¸¸å†—é•·çš„è¡¨å–®é©—è­‰å‡½å¼ã€‚ç•¶ç„¶æ™‚é–“å…è¨±çš„è©±ï¼Œé€™é‚Šå¯ä»¥ç”¨ Zend_Form æ”¹å¯«ï¼›ä½†é€™æ¨£æœƒåé›¢æœ¬æ–‡çš„ä¸»è»¸ï¼Œå› æ­¤æˆ‘å€‘é‚„æ˜¯ä»¥é‡æ§‹ç‚ºå„ªå…ˆã€‚</p>
<p>é€™å€‹æ­¥é©Ÿä¸»è¦çš„ç›®æ¨™æ˜¯å°‡å„å€‹è£ä¿®é¡å‹è¡¨å–®é©—è­‰å‡½å¼æ”¾åœ¨å°æ‡‰çš„ Row é¡åˆ¥è£¡ï¼Œé€™æ¨£æˆ‘å€‘å°±å¯ä»¥ç›´æ¥è®“ Row é¡åˆ¥é©—è­‰è¡¨å–®è³‡æ–™ï¼Œè€Œä¸éœ€è¦åœ¨ IndexController é¡åˆ¥è£¡å®šç¾©é©—è­‰å‡½å¼ã€‚ä½œæ³•å¦‚ä¸‹ï¼š</p>
<p>a. å°‡ IndexController é¡åˆ¥çš„ _checkKitchenFormData() æ–¹æ³•è¤‡è£½åˆ° Application_Model_DbTable_DecorationKitchen é¡åˆ¥ï¼Œä¸¦æ”¹æˆåç‚º checkData() çš„å…¬é–‹æ–¹æ³•ï¼›ç„¶å¾Œå° IndexController é¡åˆ¥çš„ _checkBathroomFormData() ä¹ŸåšåŒæ¨£çš„è™•ç†ã€‚ç¾åœ¨å…©å€‹ Row é¡åˆ¥åˆ†åˆ¥éƒ½æœ‰ checkData() å‡½å¼ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class Application_Model_DbTable_DecorationKitchen extends Application_Model_DbTable_DecorationRow
 {
<span class="gi">+    public function checkData($formData, $error, $messenger)
</span><span class="gi">+    {
</span><span class="gi">+        $error = false;
</span><span class="gi">+        if (0 === strlen($formData[&#39;name&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥å§“å&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (0 === strlen($formData[&#39;phone&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥é›»è©±&#39;;
</span><span class="gi">+        }
</span><span class="gi">+        if (0 === strlen($formData[&#39;address&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥åœ°å€&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (!array_key_exists(&#39;kitchenQuestion01&#39;, $formData)
</span><span class="gi">+                &amp;amp;&amp;amp; !array_key_exists(&#39;kitchenQuestion02&#39;, $formData)) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡è£ä¿®å…§å®¹&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (!array_key_exists(&#39;kitchenQuestion03&#39;, $formData)
</span><span class="gi">+                &amp;amp;&amp;amp; !array_key_exists(&#39;kitchenQuestion04&#39;, $formData)) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡è¨­å‚™æ˜¯å¦ä¿ç•™&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (!array_key_exists(&#39;kitchenQuestion05&#39;, $formData)) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡ç¾æœ‰å»šå…·&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        return $error;
</span><span class="gi">+    }
</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class Application_Model_DbTable_DecorationBathroom extends Application_Model_DbTable_DecorationRow
 {
<span class="gi">+    public function checkData($formData, $error, $messenger)
</span><span class="gi">+    {
</span><span class="gi">+        $error = false;
</span><span class="gi">+        if (0 === strlen($formData[&#39;name&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥å§“å&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (0 === strlen($formData[&#39;phone&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥é›»è©±&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (0 === strlen($formData[&#39;address&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥åœ°å€&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (!array_key_exists(&#39;bathroomQuestion01&#39;, $formData)) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡åªæ•¸&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (!array_key_exists(&#39;bathroomQuestion02&#39;, $formData)) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡é¦¬æ¡¶&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        if (!array_key_exists(&#39;bathroomQuestion03&#39;, $formData)) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $messenger-&gt;addMessage(&#39;è«‹é¸æ“‡é¢ç›†&#39;);
</span><span class="gi">+        }
</span><span class="gi">+        return $error;
</span><span class="gi">+    }
</span></code></pre></div><p>b. å°‡ IndexController é¡åˆ¥çš„ step2Action() æ–¹æ³•ä¸­ï¼Œä»¥ $checkFunctionName() å‘¼å«é©—è­‰å‡½å¼çš„æ–¹å¼ï¼Œæ”¹ç‚ºå‘¼å« Row ç‰©ä»¶çš„ checkData() æ–¹æ³•ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> class IndexController é¡åˆ¥extends Zend_Controller_Action
 {
     public function step2Action()
     {
<span class="gd">-            $this-&gt;$checkFunctionName($formData, $error, $messenger);
</span><span class="gd"></span><span class="gi">+            $decorationRow-&gt;checkData($formData, $error, $messenger);
</span></code></pre></div><p>c. ç§»é™¤ step2Action() æ–¹æ³•è£¡çš„ $checkFunctionName è®Šæ•¸ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">     public function step2Action()
     {
<span class="gd">-            $checkFunctionName = &#39;_check&#39; . ucwords(strtolower($decorationName)) . &#39;FormData&#39;;
</span></code></pre></div><p>d. æœ€å¾Œç§»é™¤ IndexController é¡åˆ¥è£¡çš„ _checkKitchenFormData() åŠ _checkBathroomFormData() å…©å€‹æ–¹æ³•ï¼Œ</p>
<p>ç¾åœ¨æˆ‘å€‘çµ‚æ–¼è®“ IndexController é¡åˆ¥è„«é›¢é‚£äº›ä¸è®“å±¬æ–¼å®ƒçš„ç¹é›œè²¬ä»»äº†ã€‚</p>
<p>è¨»ï¼šäº‹å¯¦ä¸Šé‚„æœ‰ _createDecorationTable() æ–¹æ³•ä¹Ÿä¸æ‡‰è©²æ”¾åœ¨ IndexController é¡åˆ¥è£¡ï¼Œé€™é‚Šå°±ç•™çµ¦å¤§å®¶æ€è€ƒçœ‹çœ‹éœ€ä¸éœ€è¦å†åšé€²ä¸€æ­¥çš„é‡æ§‹ã€‚</p>
<h3 id="6-è§£æ±º-row-é¡åˆ¥èˆ‡-indexcontroller-é¡åˆ¥é¡åˆ¥çš„è€¦åˆ">6. è§£æ±º Row é¡åˆ¥èˆ‡ IndexController é¡åˆ¥é¡åˆ¥çš„è€¦åˆ</h3>
<p>é‡æ§‹äº† IndexController é¡åˆ¥çš„éƒ¨ä»½å¾Œï¼Œæœ€å¾Œæˆ‘å€‘ä¾†è™•ç† Row é¡åˆ¥ã€‚åœ¨ Row é¡åˆ¥çš„ checkData() æ–¹æ³•ä¸­ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ°å®ƒé™¤äº†å¿…é ˆçš„ $formData åƒæ•¸å¤–ï¼Œé‚„å¾—å–å¾— IndexController é¡åˆ¥çš„ $error åŠ $messenger å…©å€‹åƒæ•¸çš„å¼•ç”¨ï¼›å°¤å…¶ $messenger è®Šæ•¸çš„å‹æ…‹åˆæ˜¯ Zend_Controller_Action_Helper_FlashMessenger é¡åˆ¥ï¼Œä½¿å¾— Row é¡åˆ¥å¿…é ˆä¾è³´ Controller å±¤ï¼Œå¤§å¤§é™ä½äº† Row é¡åˆ¥çš„å¯é‡ç”¨æ€§ã€‚</p>
<p>å› æ­¤æˆ‘å€‘è¦è®“ Row é¡åˆ¥è‡ªè¡Œæè™•ç†æ‰é©—è­‰éŒ¯èª¤çš„éƒ¨ä»½ï¼Œåéä¾†è®“ IndexController é¡åˆ¥ä¾è³´ Row é¡åˆ¥ï¼›æ›å¥è©±èªªï¼Œå°±æ˜¯è¦æ‹¿æ‰ checkData() çš„ $error åŠ $messenger å…©å€‹åƒæ•¸ï¼Œä½œæ³•å¦‚ä¸‹ï¼š</p>
<p>a. åˆ†åˆ¥æŠŠå…©å€‹ Row é¡åˆ¥çš„ checkData() æ–¹æ³•è£¡çš„ $error è®Šæˆå€åŸŸè®Šæ•¸ï¼Œä¸¦å°‡å…¶å›å‚³çµ¦å‘¼å«è€…ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"><span class="gd">-    public function checkData($formData, $error, $messenger)
</span><span class="gd"></span><span class="gi">+    public function checkData($formData, $messenger)
</span><span class="gi"></span>     {
<span class="gi">+        $error = false;
</span><span class="gi"></span>         // ...
<span class="gi">+        return $error;
</span><span class="gi"></span>     }
</code></pre></div><p>b. ç„¶å¾Œåœ¨ IndexController é¡åˆ¥çš„ step2Action() æ–¹æ³•ä¸­æ¥æ”¶ Row é¡åˆ¥çš„ checkData() æ–¹æ³•æ‰€å›å‚³çš„ $error ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">     public function step2Action()
     {
<span class="gd">-            $decorationRow-&gt;checkData($formData, $error, $messenger);
</span><span class="gd"></span><span class="gi">+            $error = $decorationRow-&gt;checkData($formData, $messenger);
</span></code></pre></div><p>c. æ¥è‘—åœ¨æŠ½è±¡ Row é¡åˆ¥ä¸­å»ºç«‹ä¸€å€‹ $_messages é™£åˆ—å±¬æ€§åŠ getMessages() æ–¹æ³•ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> abstract class Application_Model_DbTable_DecorationRow extends Zend_Db_Table_Row_Abstract
 {
<span class="gi">+    protected $_messages = array();
</span><span class="gi">+
</span><span class="gi">+    public function getMessages()
</span><span class="gi">+    {
</span><span class="gi">+        return $this-&gt;_messages;
</span><span class="gi">+    }
</span></code></pre></div><p>d. ç„¶å¾ŒæŠŠ Row é¡åˆ¥çš„ checkData() æ–¹æ³•ä¸­åŸæœ¬ç”¨ $messenger-&gt;addMessage() çš„éƒ¨ä»½ï¼Œæ”¹ç”¨æ–°çš„ $_messages å±¬æ€§ä¾†æŒ‡å®šã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">     public function checkData($formData, $messenger)
     {
         if (0 === strlen($formData[&#39;name&#39;])) {
             $error = true;
<span class="gd">-            $messenger-&gt;addMessage(&#39;è«‹è¼¸å…¥å§“å&#39;);
</span><span class="gd"></span><span class="gi">+            $this-&gt;_messages[] = &#39;è«‹è¼¸å…¥å§“å&#39;;
</span><span class="gi"></span>         }
         // ä»¥ä¸‹ä¾æ­¤é¡æ¨
</code></pre></div><p>e. åœ¨ IndexController é¡åˆ¥çš„ step2Action() æ–¹æ³•ä¸­è™•ç†é©—è­‰å¤±æ•—çš„å€æ®µä¸­ï¼Œåœ¨å°å› step2Action() å‰ï¼Œé€éæŠ½è±¡ Row é¡åˆ¥çš„ getMessages() æ–¹æ³•ï¼Œä»¥å–å¾—éŒ¯èª¤è¨Šæ¯ä¸¦ä¸€ä¸€åŠ å…¥ $messenger ä¸­ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">     public function step2Action()
     {
         // ...
             if (!$error) {
                 // ...
             } else {
                 // ...
<span class="gi">+                $messages = $decorationRow-&gt;getMessages();
</span><span class="gi">+                foreach ($messages as $message) {
</span><span class="gi">+                    $messenger-&gt;addMessage($message);
</span><span class="gi">+                }
</span><span class="gi"></span>                 $this-&gt;_helper-&gt;redirector-&gt;gotoSimple(&#39;step2&#39;, null, null, $params);
             }
</code></pre></div><p>f. æœ€å¾Œç§»é™¤ checkData() çš„ $messenger åƒæ•¸åŠ step2Action() å‚³å…¥ $messenger è®Šæ•¸çš„éƒ¨ä»½ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"><span class="gd">-    public function checkData($formData, $messenger)
</span><span class="gd"></span><span class="gi">+    public function checkData($formData)
</span><span class="gi"></span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">     public function step2Action()
     {
         // ...
<span class="gd">-            $error = $decorationRow-&gt;checkData($formData, $messenger);
</span><span class="gd"></span><span class="gi">+            $error = $decorationRow-&gt;checkData($formData);
</span></code></pre></div><p>ç¾åœ¨ Row é¡åˆ¥å°±è·Ÿ IndexController é¡åˆ¥è§£è€¦äº†ã€‚</p>
<p>è¨»ï¼šé€™é‚Šè«‹å¤§å®¶æ€è€ƒä¸€ä¸‹ï¼Œç‚ºä»€éº¼æˆ‘åœ¨è™•ç† $error çš„éƒ¨ä»½æ™‚ï¼Œä¸€é–‹å§‹å°±æ‹¿æ‰ checkData() æ–¹æ³•çš„ $error åƒæ•¸ï¼›ä½†æ˜¯è™•ç† $messenger æ™‚ï¼Œå»æ²’æœ‰ä¸€é–‹å§‹å°±æ‹¿æ‰ $messenger åƒæ•¸å‘¢ï¼Ÿ</p>
<h3 id="7-è™•ç†-checkdata-æ–¹æ³•é‡è¤‡çš„éƒ¨ä»½">7. è™•ç† checkData() æ–¹æ³•é‡è¤‡çš„éƒ¨ä»½</h3>
<p>å†å›é ­çœ‹çœ‹ Row é¡åˆ¥çš„ checkData() æ–¹æ³•ï¼Œæˆ‘å€‘å¯ä»¥ç™¼ç¾è£¡é¢é‚„æ˜¯æœ‰é‡è¤‡çš„ç¨‹å¼ç¢¼ï¼Œä¹Ÿå°±æ˜¯æª¢æŸ¥å§“åã€é›»è©±èˆ‡åœ°å€çš„éƒ¨ä»½ã€‚é€™ä¸‰å€‹æ¬„ä½çš„æª¢æŸ¥åœ¨æœªä¾†æ–°å¢è£ä¿®é¡å‹æ™‚ä¹Ÿä¸æœƒè®Šå‹•ï¼Œå› æ­¤æˆ‘å€‘å¯ä»¥å°‡å®ƒå€‘æŠ½å‡ºä¾†è®Šæˆå…±ç”¨çš„ç¨‹å¼ç¢¼ï¼Œä½œæ³•å¦‚ä¸‹ï¼š</p>
<p>a. åœ¨æŠ½è±¡ Row é¡åˆ¥ä¸­å»ºç«‹ä¸€å€‹ _checkCommonData() æ–¹æ³•ï¼Œä¸¦å°‡ Row é¡åˆ¥çš„ checkData() æ–¹æ³•è£¡æª¢æŸ¥å§“åã€é›»è©±ã€åœ°å€çš„éƒ¨ä»½è¤‡è£½å‡ºä¾†ï¼Œæ”¾åˆ°æ–°çš„ _checkCommonData() æ–¹æ³•ä¸­ï¼Œä¸€æ¨£è¦åŠ å…¥ $error å€åŸŸè®Šæ•¸ä¸¦å›å‚³ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> abstract class Application_Model_DbTable_DecorationRow extends Zend_Db_Table_Row_Abstract
 {
     // ...
<span class="gi">+
</span><span class="gi">+    protected function _checkCommonData($formData)
</span><span class="gi">+    {
</span><span class="gi">+        $error = false;
</span><span class="gi">+        if (0 === strlen($formData[&#39;name&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $this-&gt;_messages[] = &#39;è«‹è¼¸å…¥å§“å&#39;;
</span><span class="gi">+        }
</span><span class="gi">+        if (0 === strlen($formData[&#39;phone&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $this-&gt;_messages[] = &#39;è«‹è¼¸å…¥é›»è©±&#39;;
</span><span class="gi">+        }
</span><span class="gi">+        if (0 === strlen($formData[&#39;address&#39;])) {
</span><span class="gi">+            $error = true;
</span><span class="gi">+            $this-&gt;_messages[] = &#39;è«‹è¼¸å…¥åœ°å€&#39;;
</span><span class="gi">+        }
</span><span class="gi">+        return $error;
</span><span class="gi">+    }
</span></code></pre></div><p>b. æ”¹å¯«å„ Row é¡åˆ¥çš„ checkData() æ–¹æ³•ï¼Œç§»é™¤åŸä¾†çš„å…±ç”¨é©—è­‰ç¨‹å¼ç¢¼ï¼Œä¸¦æ”¹ç‚ºå‘¼å« _checkCommonData() æ–¹æ³•ï¼Œæ¸¬è©¦ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">     public function checkData($formData)
     {
         $error = false;
<span class="gd">-        if (0 === strlen($formData[&#39;name&#39;])) {
</span><span class="gd">-            $error = true;
</span><span class="gd">-            $this-&gt;_messages[] = &#39;è«‹è¼¸å…¥å§“å&#39;;
</span><span class="gd">-        }
</span><span class="gd">-        if (0 === strlen($formData[&#39;phone&#39;])) {
</span><span class="gd">-            $error = true;
</span><span class="gd">-            $this-&gt;_messages[] = &#39;è«‹è¼¸å…¥é›»è©±&#39;;
</span><span class="gd">-        }
</span><span class="gd">-        if (0 === strlen($formData[&#39;address&#39;])) {
</span><span class="gd">-            $error = true;
</span><span class="gd">-            $this-&gt;_messages[] = &#39;è«‹è¼¸å…¥åœ°å€&#39;;
</span><span class="gd">-        }
</span><span class="gd"></span><span class="gi">+        $error = $error || $this-&gt;_checkCommonData($formData);
</span><span class="gi"></span>
</code></pre></div><p>æ¸¬è©¦ç„¡èª¤å¾Œï¼Œæˆ‘å€‘å°±å®Œæˆäº†æ•´å€‹é‡æ§‹äº†ï¼Œè¬å¤©è¬åœ°ã€‚</p>
<h2 id="å†æ¬¡åŠ å…¥æ–°çš„è£ä¿®é¡å‹">å†æ¬¡åŠ å…¥æ–°çš„è£ä¿®é¡å‹</h2>
<p>èŠ±äº†é€™äº›åŠŸå¤«åšé‡æ§‹å¾Œï¼Œæœ€é‡è¦çš„æ˜¯å®ƒå¥½ä¸å¥½ç¶­è­·ï¼Œå®¹ä¸å®¹æ˜“å› æ‡‰æœªä¾†çš„è®ŠåŒ–ï¼›å› æ­¤æ¥ä¸‹ä¾†æˆ‘å€‘å°±è¦åŠ å…¥ä¸€å€‹æ–°çš„è£ä¿®é¡å‹ï¼Œä¾†çœ‹çœ‹é‡æ§‹å¾Œçš„ç¨‹å¼ç¢¼æ˜¯ä¸æ˜¯ç¬¦åˆæˆ‘å€‘çš„æœŸå¾…ã€‚</p>
<p>å‡è¨­æ–°çš„è£ä¿®é¡å‹æ˜¯ã€Œåœ°æ¿ã€ (Flooring) ï¼Œå®¢æˆ¶ä¹Ÿæä¾›äº†å°æ‡‰çš„ database schema åŠæ¨£ç‰ˆã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šåŠ å…¥ Flooring çš„ DbTable é¡åˆ¥ä¸¦åŒ¯å…¥ schema åˆ°è³‡æ–™åº«ä¸­ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="err">&lt;</span>/path_to_project/application/models/DbTable/DecorationFloorings.php&gt;
class Application_Model_DbTable_DecorationFloorings extends Zend_Db_Table_Abstract
{
    protected $_name = &#39;decoration_floorings&#39;;
    protected $_rowClass = &#39;Application_Model_DbTable_DecorationFlooring&#39;;
}

</code></pre></div><p>è³‡æ–™è¡¨çš„ schema å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">DROP</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="o">`</span><span class="n">decoration_floorings</span><span class="o">`</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="o">`</span><span class="n">decoration_floorings</span><span class="o">`</span> <span class="p">(</span>
  <span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="n">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">auto_increment</span><span class="p">,</span>
  <span class="o">`</span><span class="n">name</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">phone</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">address</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">flooringQuestion01</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">flooringQuestion02</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">flooringQuestion03</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">flooringQuestion04</span><span class="o">`</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;5&#39;</span><span class="p">)</span> <span class="k">default</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span>  <span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">MyISAM</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8</span> <span class="n">ROW_FORMAT</span><span class="o">=</span><span class="k">DYNAMIC</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">&#39;åœ°æ¿å•å·&#39;</span><span class="p">;</span>

</code></pre></div><p>ç¬¬äºŒæ­¥ï¼šåŠ å…¥ Flooring çš„ Row é¡åˆ¥ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="err">&lt;</span>/path_to_project/application/models/DbTable/DecorationFlooring.php&gt;
class Application_Model_DbTable_DecorationFlooring extends Application_Model_DbTable_DecorationRow
{
    protected $_displayName = &#39;åœ°æ¿&#39;;
    protected $_displayMap = array(a
        &#39;flooringQuestion01&#39; =&gt; array(
            &#39;y&#39; =&gt; &#39;åœ°æ¿æ–½ä½œ&#39;,
            &#39;n&#39; =&gt; &#39;&#39;,
        ),
        &#39;flooringQuestion02&#39; =&gt; array(
            &#39;y&#39; =&gt; &#39;æ¨“æ¢¯&#39;,
            &#39;n&#39; =&gt; &#39;&#39;,
        ),
        &#39;flooringQuestion03&#39; =&gt; array(
            &#39;1&#39; =&gt; &#39;å·²æœ‰é‹ªè¨­æœ¨åœ°æ¿&#39;,
            &#39;2&#39; =&gt; &#39;ç£ç£š&#39;,
            &#39;3&#39; =&gt; &#39;å¡‘è† åœ°ç£š&#39;,
        ),
        &#39;flooringQuestion04&#39; =&gt; array(
            &#39;1&#39; =&gt; &#39;é€å¤©ä½å®…&#39;,
            &#39;2&#39; =&gt; &#39;ä¸€èˆ¬å…¬å¯“&#39;,
            &#39;3&#39; =&gt; &#39;é›»æ¢¯å¤§æ¨“&#39;,
            &#39;4&#39; =&gt; &#39;å…¬å¸è¡Œè™Ÿ&#39;,
            &#39;5&#39; =&gt; &#39;å…¶ä»–&#39;,
        ),
    );
    public function checkData($formData)
    {
        $error = false;
        $error = $error || $this-&gt;_checkCommonData($formData);
        if (!array_key_exists(&#39;flooringQuestion01&#39;, $formData)
                <span class="ni">&amp;amp;&amp;amp;</span> !array_key_exists(&#39;flooringQuestion02&#39;, $formData)) {
            $error = true;
            $this-&gt;_messages[] = &#39;è«‹é¸æ“‡è£ä¿®å…§å®¹&#39;;
        }
        if (!array_key_exists(&#39;flooringQuestion03&#39;, $formData)) {
            $error = true;
            $this-&gt;_messages[] = &#39;è«‹é¸æ“‡æ–½å·¥ç’°å¢ƒæƒ…æ³&#39;;
        }
        if (!array_key_exists(&#39;flooringQuestion04&#39;, $formData)) {
            $error = true;
            $this-&gt;_messages[] = &#39;è«‹é¸æ“‡ä½å®¶ç’°å¢ƒ&#39;;
        }
        return $error;
    }
}

</code></pre></div><p>ç¬¬ä¸‰æ­¥ï¼šåŠ å…¥ Flooring çš„å­è¡¨å–®æ¨£ç‰ˆåŠå®Œæˆé æ¨£ç‰ˆã€‚</p>
<p>è¡¨å–®æ¨£ç‰ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="err">&lt;</span>/path_to_project/application/views/scripts/index/bathroom/form.phtml&gt;
<span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>è£ä¿®å…§å®¹<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;flooringQuestion01&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;y&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>åœ°æ¿æ–½ä½œ<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;flooringQuestion02&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;y&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>æ¨“æ¢¯<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>æ–½å·¥ç’°å¢ƒæƒ…æ³<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;flooringQuestion03&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;1&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>å·²æœ‰é‹ªè¨­æœ¨åœ°æ¿<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;flooringQuestion03&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;2&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>ç£ç£š<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;flooringQuestion03&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;3&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>å¡‘è† åœ°ç£š<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>ä½å®¶ç’°å¢ƒ<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;flooringQuestion04&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;1&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>é€å¤©ä½å®…<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;flooringQuestion04&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;2&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>ä¸€èˆ¬å…¬å¯“<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;flooringQuestion04&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;3&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>é›»æ¢¯å¤§æ¨“<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;flooringQuestion04&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;4&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>å…¬å¸è¡Œè™Ÿ<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;flooringQuestion04&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;5&#34;</span> <span class="p">/&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>å…¶ä»–<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>

</code></pre></div><p>å®Œæˆé æ¨£ç‰ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="err">&lt;</span>/path_to_project/application/views/scripts/index/bathroom/ok.phtml&gt;
<span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>è£ä¿®å…§å®¹<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">(</span><span class="s1">&#39;flooringQuestion01&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">(</span><span class="s1">&#39;flooringQuestion02&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>æ–½å·¥ç’°å¢ƒæƒ…æ³<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">(</span><span class="s1">&#39;flooringQuestion03&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>ä½å®¶ç’°å¢ƒ<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">decorationRow</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">(</span><span class="s1">&#39;flooringQuestion04&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>

</code></pre></div><p>ç¬¬å››æ­¥ï¼šæœ€å¾Œåœ¨ index.phtml åŠ å…¥ Flooring çš„æ–°é€£çµã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">     &lt;li&gt;&lt;a href=&#34;&lt;?php
 echo $this-&gt;url(array(
     &#39;controller&#39; =&gt; &#39;index&#39;,
     &#39;action&#39; =&gt; &#39;step2&#39;,
     &#39;decoration&#39; =&gt; &#39;bathroom&#39;,
 )); ?&gt;&#34;&gt;æµ´å®¤&lt;/a&gt;&lt;/li&gt;
<span class="gi">+    &lt;li&gt;&lt;a href=&#34;&lt;?php
</span><span class="gi">+echo $this-&gt;url(array(
</span><span class="gi">+        &#39;controller&#39; =&gt; &#39;index&#39;,
</span><span class="gi">+        &#39;action&#39; =&gt; &#39;step2&#39;,
</span><span class="gi">+        &#39;decoration&#39; =&gt; &#39;flooring&#39;,
</span><span class="gi">+)); ?&gt;&#34;&gt;åœ°æ¿&lt;/a&gt;&lt;/li&gt;
</span><span class="gi"></span> &lt;/ul&gt;

</code></pre></div><p>é™¤äº†å› ç‚ºè¦åŠ å…¥é€£çµè€Œå¿…é ˆä¿®æ”¹ index.html å¤–ï¼Œæˆ‘å€‘å¹¾ä¹éƒ½æ˜¯æ–°å¢æª”æ¡ˆï¼Œè€Œæ²’æœ‰ä¿®æ”¹åˆ°åŸä¾†çš„ç¨‹å¼ç¢¼ã€‚å°æ–¼å¾ŒçºŒç¶­è­·çš„äººå“¡ä¾†èªªï¼Œå°±å¯ä»¥ä¸å¿ƒæ“”å¿ƒä¿®æ”¹åˆ°èˆŠç¨‹å¼ç¢¼è€Œå‡ºç¾ä¸å¯é æœŸçš„éŒ¯èª¤äº†ï¼Œæ˜¯ä¸æ˜¯æ¯”åŸä¾†çš„æ–¹æ³•å¥½å¤šäº†å‘¢ï¼Ÿ</p>
<h2 id="çµèª">çµèª</h2>
<p>ç•¶ç„¶é€™æ¨£çš„é‡æ§‹ä¸¦ä¸æ˜¯æœ€å®Œç¾çš„ï¼Œä¹Ÿå¯èƒ½è·Ÿå¤§å®¶å¿ƒä¸­æ‰€æƒ³çš„ä½œæ³•æœ‰æ‰€å·®ç•°ï¼Œä¸éé€™å·²ç¶“é”æˆæˆ‘å€‘é‡æ§‹çš„ç›®çš„ï¼›å› ç‚ºé€éé€™æ¨£çš„é‡æ§‹ï¼Œæˆ‘å€‘ç­è§£äº†æ•´å€‹ç³»çµ±ï¼Œä¹Ÿå°‡åŸä¾†æ•£äº‚å„åœ°çš„è³‡æ–™å­˜å–é‚è¼¯çµ±æ•´åœ¨ä¸€èµ·ï¼Œä½¿å¾—ç¨‹å¼ç¢¼æ›´å®¹æ˜“æ–°å¢åŠŸèƒ½èˆ‡ç¶­è­·ã€‚</p>
<p>ç„¶è€Œé‡æ§‹æœ€å¤§çš„å•é¡Œä¸¦ä¸æ˜¯ä¸çŸ¥é“æ€éº¼é‡æ§‹ï¼Œè€Œæ˜¯ä¸çŸ¥é“è©²ä»€éº¼æ™‚å€™é‡æ§‹ï¼Œé‚„æœ‰ä»€éº¼æ™‚å€™è©²åœæ­¢é‡æ§‹ã€‚è€å¯¦èªªè©²ä»€éº¼æ™‚å€™é‡æ§‹ï¼Œæˆ‘æ²’è¾¦æ³•çµ¦å¤§å®¶ä»€éº¼å¥½ç­”æ¡ˆï¼›å€‹äººèªç‚ºæ¯”è¼ƒå¥½çš„æ–¹å¼å°±æ˜¯å¯«å¥½ä¸€å€‹åŠŸèƒ½æ™‚ï¼Œç•™é»æ™‚é–“çµ¦é‡æ§‹ï¼›æˆ–æ˜¯åœ¨æ–°å¢åŠç¶­è­·åŠŸèƒ½æ™‚ï¼Œé€²è¡Œå°è¦æ¨¡çš„é‡æ§‹ã€‚ç„¶å¾Œè¦‹å¥½å°±æ”¶ï¼Œè¦ºå¾—å·²ç¶“é”åˆ°é‡æ§‹ç›®çš„å¾Œï¼Œå°±æŠŠæ™‚é–“é‚„çµ¦æ–°çš„å°ˆæ¡ˆæˆ–éœ€æ±‚ã€‚</p>
<p>æ¯æ¬¡çš„é‡æ§‹æ‡‰è©²åªé‡å°ä¸€å€‹ç›®æ¨™å»å®Œæˆï¼Œé¿å…éç¨‹ç„¡ç›®çš„åœ°ç™¼æ•£ï¼›å¦‚æœåœ¨é‡æ§‹çš„éç¨‹ä¸­ï¼Œç™¼ç¾ä»»ä½•å…¶ä»–éƒ¨ä»½ä¹Ÿéœ€è¦é‡æ§‹çš„è©±ï¼Œå¯ä»¥å…ˆè¨˜ä¸‹ä¾†åˆ—å…¥ä¸‹æ¬¡çš„é‡æ§‹è£¡ã€‚è€Œåœ¨é‡æ§‹ä¸€å°æ­¥ä¸¦æ¸¬è©¦ç„¡èª¤ä¹‹å¾Œï¼Œå°±å¯ä»¥å°‡å®ƒæ”¾åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±è£¡ï¼Œé€™æ¨£å°±ä¸ç”¨æ“”å¿ƒèµ°å¾—å¤ªé ï¼Œçµæœå‡ºå•é¡Œå¾Œç„¡æ³•å¾©åŸã€‚</p>
<p>é‡æ§‹èªªé›£ä¸é›£ï¼Œèªªå®¹æ˜“ä¹Ÿä¸æ˜¯é‚£éº¼ç°¡å–®ï¼›å¸Œæœ›å¾é€™å€‹ç¯„ä¾‹ä¸­ï¼Œå¤§å®¶å¯ä»¥å°é‡æ§‹æœ‰é€²ä¸€æ­¥çš„ç­è§£ã€‚</p>
<p>è¬è¬æ”¶çœ‹ï¼Œä¸‹æ¬¡å†æœƒã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>è³¼ç‰©è»Šç¨‹å¼æ¶æ§‹ç°¡ä»‹</title>
			<link>https://jaceju.net/the-design-of-shopping-cart/</link>
			<pubDate>Thu, 23 Dec 2010 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/the-design-of-shopping-cart/</guid>
			<description>è‡ªå¾å­¸ç¿’é–‹ç™¼ Web ç¨‹å¼ä»¥ä¾†ï¼Œæˆ‘çš„å·¥ä½œå°±é›¢ä¸é–‹è³¼ç‰©è»Šäº†ã€‚å¾æ¨¡ä»¿å…¶ä»–ç¶²ç«™çš„è³¼ç‰©æ©Ÿåˆ¶é–‹å§‹ï¼Œåˆ°æ¥è§¸äº†ç‰©ä»¶å°å‘å¾Œçš„æ‰€å¯«çš„è³¼ç‰©è»Šæ¶æ§‹ï¼Œæ¯ä¸€æ¬¡çš„ç¶“é©—éƒ½è®“æˆ‘æˆé•·</description>
			<content type="html"><![CDATA[<p>è‡ªå¾å­¸ç¿’é–‹ç™¼ Web ç¨‹å¼ä»¥ä¾†ï¼Œæˆ‘çš„å·¥ä½œå°±é›¢ä¸é–‹è³¼ç‰©è»Šäº†ã€‚å¾æ¨¡ä»¿å…¶ä»–ç¶²ç«™çš„è³¼ç‰©æ©Ÿåˆ¶é–‹å§‹ï¼Œåˆ°æ¥è§¸äº†ç‰©ä»¶å°å‘å¾Œçš„æ‰€å¯«çš„è³¼ç‰©è»Šæ¶æ§‹ï¼Œæ¯ä¸€æ¬¡çš„ç¶“é©—éƒ½è®“æˆ‘æˆé•·ä¸å°‘ã€‚</p>
<p>ä¸éæ¯æ¬¡æ‰€å¯«å‡ºä¾†çš„è³¼ç‰©è»Šç³»çµ±ï¼Œä¸è«–æ˜¯åœ¨æ–°å¢åŠŸèƒ½æˆ–æ˜¯ä¿®æ”¹ä¸Šéƒ½è®“æˆ‘è¦ºå¾—éå¸¸éº»ç…©ï¼›åªè¦å®¢æˆ¶æœ‰äº›ç¨å¾®è¤‡é›œä¸€é»çš„éœ€æ±‚ï¼Œå¸¸è®“æˆ‘æ”¹ç¨‹å¼æ”¹åˆ°æƒ³ç¿»æ¡Œã€‚</p>
<p>å¾Œä¾†æ¥è§¸è¨­è¨ˆæ¨¡å¼ã€ MVC åŠ UnitTest ä¹‹å¾Œï¼Œä¸€å€‹æ–°çš„è³¼ç‰©è»Šæ¶æ§‹æ¼¸æ¼¸åœ¨æˆ‘è…¦æµ·è£¡æˆå½¢ã€‚ä¸€ä¾†æˆ‘ä¸æƒ³å†è®“å•†å“åŠ å…¥è³¼ç‰©è»Šã€æ›´æ”¹å•†å“æ•¸é‡ã€ä¿ƒéŠ·æ´»å‹•æˆ–æ˜¯çµå¸³ç­‰æ©Ÿåˆ¶æ•£è½åœ¨å„å€‹ PHP ç¨‹å¼ä¸­ï¼Œä½†æˆ‘ä¹Ÿä¸æƒ³è®“å®ƒå€‘å®Œå…¨é›†ä¸­åœ¨ä¸€å€‹é¡åˆ¥è£¡ï¼Œé‚£éº¼é©ç•¶çš„æ¶æ§‹åˆ†é›¢å°±é¡¯å¾—éå¸¸é‡è¦ã€‚</p>
<p>æ–¼æ˜¯ä¹ï¼Œé›†åˆäº†å¤šå¹´çš„ç¶“é©—ï¼Œæˆ‘åœ¨æŸå€‹å°ˆæ¡ˆè£¡è©¦åšäº†ä¸€å€‹æ–°çš„è³¼ç‰©è»Šæ¶æ§‹ï¼›è€Œç¶“éä¸€æ®µæ™‚é–“çš„ç·šä¸Šæ¸¬è©¦å¾Œï¼Œäº‹å¯¦è­‰æ˜å®ƒéå¸¸å®¹æ˜“å¢åŠ åŠŸèƒ½åŠä¿®æ”¹åŠŸèƒ½ï¼Œä¹Ÿæ›´å®¹æ˜“è®“æˆ‘å€‘é‡æ¸…æ•´å€‹è³¼ç‰©æµç¨‹ã€‚è€Œä¸”å¦‚æœåœ¨è‰¯å¥½çš„è¨­è¨ˆå®‰æ’ä¸‹ï¼Œå®ƒä¹Ÿèƒ½åšåˆ°æ¨¡çµ„åŒ–çš„åŠŸèƒ½æŠ½æ›ã€‚æˆ‘å¿ƒä¸­ä¸ç”±å¾—å¶å–Šï¼šã€Œå°±æ˜¯å®ƒäº†ï¼ã€</p>
<p>ç•¶ç„¶ï¼Œé€™å€‹æ©Ÿåˆ¶ä¸¦ä¸æ˜¯æœ€å¥½çš„ï¼Œä¹Ÿå¯èƒ½ç„¡æ³•å› æ‡‰æ‰€æœ‰ç¶²ç«™çš„éœ€æ±‚ï¼›ä½†æ˜¯é€™è‡³å°‘æ˜¯æˆ‘è‡ªå·±åœ¨é›»å­å•†å‹™æŠ€è¡“é€™å€‹é ˜åŸŸçš„ç¶“é©—ï¼Œä»¥åŠç¶“éå¤šæ¬¡æŒ«æ•—å¾Œæ‰€å¾—åˆ°çš„æˆæœã€‚å› æ­¤åœ¨ä»¥ä¸‹çš„æŠ•å½±ç‰‡è£¡ï¼Œæˆ‘å°‡å–®ç´”åœ°å°±é€™å€‹è³¼ç‰©è»Šæ©Ÿåˆ¶ä¾†åšä¸€äº›æ¢è¨ï¼Œå¸Œæœ›èƒ½ç‚ºå¤§å®¶åœ¨æ¶æ§‹çš„è¨­è¨ˆä¸Šï¼Œå¸¶ä¾†ä¸€äº›ä¸åŒçš„æƒ³æ³•ã€‚</p>
<p>å¦å¤–è¦æé†’å¤§å®¶ï¼Œé€™è£¡æ‰€æåˆ°çš„è³¼ç‰©è»Šæ¶æ§‹ï¼Œä¸¦æ²’æœ‰æ¶‰åŠæ‰€è¬‚çš„å¾Œå°å•†å“ä¸Šç¨¿æˆ–æ˜¯å‰å°å•†å“é™³åˆ—ç­‰æ©Ÿåˆ¶ï¼›æ›å¥è©±èªªï¼Œå®ƒä¸æ˜¯ä¸€èˆ¬æˆ‘å€‘æ‰€å®šç¾©çš„è³¼ç‰©è»Šæ¨¡çµ„ï¼Œè«‹å¤§å®¶è¦å…ˆç­è§£é€™ä¸€é»ã€‚</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
]]></content>
		</item>
		
		<item>
			<title>å°ç£çš„è»Ÿé«”å·¥ç¨‹å¸«</title>
			<link>https://jaceju.net/software-engineer-in-taiwan/</link>
			<pubDate>Tue, 22 Jun 2010 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/software-engineer-in-taiwan/</guid>
			<description>æˆ‘å¸¸å¸¸å•è‡ªå·±ï¼Œå°ç£çš„æ¥­ç•Œç”Ÿæ…‹çœŸçš„é©åˆé–‹ç™¼è»Ÿé«”å—ï¼Ÿå¦‚æœä¸é©åˆï¼Œé‚£éº¼è»Ÿé«”å·¥ç¨‹å¸«å€‘åˆ°åº•æ˜¯ç‚ºäº†ä»€éº¼è€Œé¸æ“‡é€™å€‹å·¥ä½œå‘¢ï¼Ÿ å¾ç¶²è·¯ä¸Šæˆ–æ˜¯å‰è¼©å£ä¸­æ‰€å¾—åˆ°çš„å¤§éƒ¨</description>
			<content type="html"><![CDATA[<p>æˆ‘å¸¸å¸¸å•è‡ªå·±ï¼Œå°ç£çš„æ¥­ç•Œç”Ÿæ…‹çœŸçš„é©åˆé–‹ç™¼è»Ÿé«”å—ï¼Ÿå¦‚æœä¸é©åˆï¼Œé‚£éº¼è»Ÿé«”å·¥ç¨‹å¸«å€‘åˆ°åº•æ˜¯ç‚ºäº†ä»€éº¼è€Œé¸æ“‡é€™å€‹å·¥ä½œå‘¢ï¼Ÿ</p>
<p>å¾ç¶²è·¯ä¸Šæˆ–æ˜¯å‰è¼©å£ä¸­æ‰€å¾—åˆ°çš„å¤§éƒ¨ä»½è³‡è¨Šè£¡ï¼Œä¸é›£çœ‹å‡ºå¤§å¤šæ•¸çš„è»Ÿé«”å·¥ç¨‹å¸«å°æ–¼è‡ªå·±çš„è·æ¥­ç”Ÿæ¶¯ä¸¦æ²’æœ‰éæ–¼é«˜æ·±çš„æœŸè¨±ï¼›å› ç‚ºå¯«ç¨‹å¼åªä¸éæ˜¯è³ºéŒ¢çš„æ‰‹æ®µä¹‹ä¸€ï¼Œå¯ä»¥çš„è©±é‚„æ˜¯è²·è²·è‚¡ç¥¨çœ‹èƒ½ä¸èƒ½è³ºå¾—æ¯”è¼ƒé£½ã€‚</p>
<p>ä»¥ä¸‹ï¼Œå°±æˆ‘æ‰€çœ‹åˆ°çš„ä¾‹å­ï¼Œä¾†å˜´ç‚®ä¸€ä¸‹å¤§éƒ¨ä»½å°ç£è»Ÿé«”å·¥ç¨‹å¸«çš„å¿ƒè²å§ã€‚å¦‚æœ‰é›·åŒï¼Œç´”å±¬å·§åˆã€‚</p>
<!-- raw HTML omitted -->
<h2 id="äºŒåæ­²ä¹‹å‰">äºŒåæ­²ä¹‹å‰</h2>
<p>ã€Œç¨‹å¼æ˜¯ä»€éº¼ï¼Ÿã€</p>
<p>å¤§éƒ¨ä»½çš„è»Ÿé«”å·¥ç¨‹å¸«å…¶å¯¦éƒ½ä¸æ˜¯æœ¬ç§‘ç³»å‡ºèº«ï¼Œæ‰€ä»¥å¤§å¤šéƒ½ä¸æ¸…æ¥šè»Ÿé«”é–‹ç™¼æ˜¯å€‹ä»€éº¼æ¨£çš„å·¥ä½œã€‚è€Œç‚ºäº†è¦æ‰¾ä¸€ä»½å¤ æ°´æº–çš„å·¥ä½œï¼Œè¨±å¤šéš±æ²’è‡ªå·±åŸæœ¬æ‰èƒ½çš„æœ‹å‹å°±åˆ°è‘—åçš„è£œç¿’ç­å»ï¼Œæƒ³è¾¦æ³•è®“è‡ªå·±æˆç‚ºä¸€ä½å±¥æ­·ä»½é‡çœ‹èµ·ä¾†å¤ å·¨å¤§çš„å·¥åŒ ã€‚ä¸éä¸€æ—¦è¸å…¥è»Ÿé«”é–‹ç™¼é€™å€‹é ˜åŸŸä¹‹å¾Œï¼Œä»–å€‘æ‰é–‹å§‹æ˜ç™½ï¼Œåœ¨å°ç£ï¼Œé€™çœŸçš„æ˜¯ä¸€æ¢æ¼«é•·è€Œè‰±è¾›çš„ä¸æ­¸è·¯ã€‚</p>
<h2 id="äºŒåæ­²çš„æ™‚å€™">äºŒåæ­²çš„æ™‚å€™</h2>
<p>ã€Œæˆ‘è¦å­¸ç¿’é«˜æ·±çš„æŠ€è¡“ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥åƒè‹¦è€å‹&hellip;ã€</p>
<p>å¤šæ•¸æœ‰è‡ªè¦ºçš„æœ‹å‹åœ¨å‰›é€²å…¥è·å ´æ™‚ï¼Œå°±ç™¼ç¾è‡ªå·±æœ¬èº«çš„ä¸è¶³ï¼›ä¹Ÿå› æ­¤ä»–å€‘é–‹å§‹å‡ºæ²’æ–¼å„å¤§è«–å£‡æˆ– BBS ï¼Œè«‹æ•™å‰è¼©å€‘ä¸€äº›æŠ€è¡“ä¸Šçš„å•é¡Œã€‚æœ‰äº›äººä¸‹ç­å¾Œï¼Œé‚„ç‰¹åœ°è·‘åˆ°æ›¸å±€è²·ä¸€å †åƒè€ƒæ›¸ç±å †æ»¿è‡ªå·±çš„åºŠé ­ï¼ŒæœŸå¾…è‡ªå·±æœ‰å¤©è®Šæˆä¸€æ¢æŠ€è¡“ä¹‹é¾ã€‚è–ªæ°´å¤ªå°‘ï¼Ÿé€™å¾ä¾†ä¸æ˜¯ä»–å€‘æ‰€åœ¨ä¹çš„ã€‚</p>
<h2 id="äºŒåäº”æ­²çš„æ™‚å€™">äºŒåäº”æ­²çš„æ™‚å€™</h2>
<p>ã€Œå·¥ä½œæœ‰é»å¤šï¼Œå¥½ï¼Œæˆ‘åŠ ç­æ‹¼äº†~ã€</p>
<p>ç•¶è‡ªæˆ‘çš„èƒ½åŠ›æ¼¸æ¼¸åŠ å¼·ä¹‹å¾Œï¼Œä¸Šé ­äº¤è¾¦çš„äº‹é …ä¹Ÿè¶Šä¾†è¶Šå¤šäº†ã€‚ä¸éå°é€™äº›å·²ç¶“å­¸åˆ°æœ‰ç”¨æŠ€å·§çš„è»Ÿé«”å·¥ç¨‹å¸«ä¾†èªªï¼Œä¸éå°±æ˜¯å°èœä¸€ç¢Ÿï¼ŒåŠ å€‹ç­å°±ä»€éº¼éƒ½è§£æ±ºå•¦ï¼æ²’ä»€éº¼äº†ä¸èµ·ã€‚ä¸éä¸æ›‰å¾—ç‚ºä»€éº¼ï¼Œä»–å€‘æ¯å¤©åŠ ç­å®Œå›å®¶å¾Œï¼Œç‰¹åˆ¥æ„›è²·äº›è±¬è‚æ¹¯ä¾†ç•¶å®µå¤œåƒã€‚</p>
<h2 id="ä¸‰åæ­²çš„æ™‚å€™">ä¸‰åæ­²çš„æ™‚å€™</h2>
<p>ã€Œä½ çˆ¸çš„ï¼Œé‚£å€‹ä¸»ç®¡çœŸæ©Ÿè»Š&hellip;æ˜å¤©æˆ‘è¦è·Ÿè€å©†å»ç©äº†ï¼Œç«Ÿç„¶é‚„ä¾†å€‹é¬¼éœ€æ±‚&hellip;ã€</p>
<p>å¤§éƒ¨ä»½çš„è»Ÿé«”å·¥ç¨‹å¸«åœ¨è®Šæˆè·å ´è€é³¥ä¹‹å¾Œï¼Œå°æ–¼ä»»ä½•å®¢æˆ¶ä¸Ÿéä¾†çš„éœ€æ±‚éƒ½èƒ½ä¸€çœ¼çœ‹ç©¿å®ƒå€‘æ˜¯ä¸æ˜¯çœŸçš„éœ€è¦åŸ·è¡Œï¼›åªä¸éé€šå¸¸æ±ºå®šè¦ä¸è¦åŸ·è¡Œçš„äººä¸æœƒæ˜¯è»Ÿé«”å·¥ç¨‹å¸«ï¼Œå¯èƒ½æ˜¯ç©ºé™ä¸‹ä¾†ï¼Œç„¶å¾Œä¸å°å¿ƒå°±ç•¶ä¸Šä¸»ç®¡ï¼Œé‚£å€‹è‘£äº‹é•·çš„å…’å­ã€‚</p>
<h2 id="ä¸‰åäº”æ­²çš„æ™‚å€™">ä¸‰åäº”æ­²çš„æ™‚å€™</h2>
<p>ã€Œè€å¤©çˆº&hellip;ä»€éº¼å·¥ä½œéƒ½å¥½&hellip;çµ¦æˆ‘éŒ¢å§&hellip;ã€</p>
<p>äººç”Ÿçµ‚æ–¼çˆ†ç™¼äº†å±æ©Ÿï¼Œå¤§éƒ¨ä»½æ²’æœ‰è€ƒæ…®è‡ªå·±æœªä¾†è·å ´ç”Ÿæ¶¯çš„è»Ÿé«”å·¥ç¨‹å¸«ï¼Œåœ¨å¯å–ä»£æ€§éé«˜çš„æƒ…æ³ä¸‹ï¼Œè¢«æ¯å€‹æœˆè–ªè³‡åªéœ€è¦å…©è¬äºŒçš„æ–°äººçµ¦ Override äº†&hellip;.ç‚ºäº†çˆ­å–æ›´å¤šçš„å·¥ä½œæ©Ÿæœƒï¼Œä»–å€‘åˆå›åˆ°äº†è£œç¿’ç­ï¼Œç„¶å¾Œæ•´å¤©åœ¨é‚£è£¡ã€Œå–”å–”~ å–”å–”~ ã€çš„æ‹¼å‘½å­¸ç¿’&hellip;</p>
<h2 id="å››åæ­²çš„æ™‚å€™">å››åæ­²çš„æ™‚å€™</h2>
<p>ã€Œ&hellip;ã€</p>
<p>å°ç£çš„è»Ÿé«”å·¥ç¨‹å¸«å“ªä¾†å››åæ­²å¯æ´»å‘€ï¼ï¼Ÿ</p>
<h2 id="å¿ƒå¾—">å¿ƒå¾—</h2>
<p>å¥åº·èª å¯è²´ï¼Œç”Ÿå‘½åƒ¹æ›´é«˜ï¼›è‹¥ç‚ºé‡‘éŒ¢æ•…ï¼Œå…©è€…çš†å¯æ‹‹ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>å°‡æ¸¬è©¦èå…¥é–‹ç™¼ï¼Œè®“ç¨‹å¼æ“æœ‰å“è³ª</title>
			<link>https://jaceju.net/my-first-tdd/</link>
			<pubDate>Sat, 12 Jun 2010 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/my-first-tdd/</guid>
			<description>å¾ˆå¤šæ›¸ä¸Šå’Œç¶²è·¯çš„æ–‡ç« éƒ½æåˆ°äº†å¾ˆ TDD çš„åšæ³•ï¼Œä¸éè€å¯¦èªªæˆ‘ä¸¦æ²’æœ‰å¯¦éš›åƒèˆ‡é€™äº›å¤§å¸«çš„ TDD éç¨‹ï¼Œå…¶å¯¦å¾ˆé›£æŠŠä»–å€‘çš„æ–¹æ³•ç™¾åˆ†ä¹‹åˆ†åœ°æ‡‰ç”¨åˆ°è‡ªå·±çš„å°ˆæ¡ˆè£¡ã€‚ å› æ­¤ï¼Œ</description>
			<content type="html"><![CDATA[<p>å¾ˆå¤šæ›¸ä¸Šå’Œç¶²è·¯çš„æ–‡ç« éƒ½æåˆ°äº†å¾ˆ TDD çš„åšæ³•ï¼Œä¸éè€å¯¦èªªæˆ‘ä¸¦æ²’æœ‰å¯¦éš›åƒèˆ‡é€™äº›å¤§å¸«çš„ TDD éç¨‹ï¼Œå…¶å¯¦å¾ˆé›£æŠŠä»–å€‘çš„æ–¹æ³•ç™¾åˆ†ä¹‹åˆ†åœ°æ‡‰ç”¨åˆ°è‡ªå·±çš„å°ˆæ¡ˆè£¡ã€‚</p>
<p>å› æ­¤ï¼Œå‡¡äº‹é‚„æ˜¯è¦è‡ªå·±å‹•æ‰‹åšéæ‰æœƒæ˜ç™½ï¼Œæ‰€ä»¥æˆ‘å°±è¶è‘—åœ¨é–‹ç™¼æ–°çš„ Library æ™‚ï¼ŒçœŸæ­£åœ°å»è½å¯¦æ¸¬è©¦èˆ‡é‡æ§‹ã€‚</p>
<p>ä»¥ä¸‹å°±æ˜¯æˆ‘å¤§è‡´çš„å¿ƒå¾—ï¼Œä¾›å¤§å®¶åƒè€ƒã€‚</p>
<!-- raw HTML omitted -->
<h2 id="æˆ‘çš„æ¸¬è©¦é©…å‹•é–‹ç™¼æµç¨‹">æˆ‘çš„æ¸¬è©¦é©…å‹•é–‹ç™¼æµç¨‹</h2>
<h3 id="ç¬¬ä¸€æ­¥æº–å‚™å¥½å·¥å…·">ç¬¬ä¸€æ­¥ï¼šæº–å‚™å¥½å·¥å…·</h3>
<p><a href="http://www.jaceju.net/blog/archives/1152">ä¹‹å‰æéçš„ NetBeans æ‰€æä¾›çš„ PHPUnit æ•´åˆ</a>ï¼Œå°±æ˜¯å€‹å¾ˆä¸éŒ¯çš„è‡ªå‹•åŒ–æ¸¬è©¦å·¥å…·ã€‚</p>
<p>åœ¨å¯«é¡åˆ¥æ™‚ï¼ŒæŒ‰ä¸‹ Ctrl + F6 å°±æœƒè‡ªå‹•åŸ·è¡Œé€™å€‹é¡åˆ¥çš„æ¸¬è©¦ (ç•¶ç„¶å‰ææ˜¯è¦å·²ç¶“å…ˆå»ºç«‹å¥½æ¸¬è©¦é¡åˆ¥) ï¼›è€Œå¦‚æœæ˜¯åœ¨æ’°å¯«æ¸¬è©¦é¡åˆ¥æ™‚ï¼Œå¯ä»¥æŒ‰ä¸‹ Shift + F6 ï¼Œé€™æ¨£ NetBeans å°±æœƒè‡ªå‹•åŸ·è¡Œæ¸¬è©¦é¡åˆ¥äº†ã€‚é€™å…©å€‹å¿«é€Ÿéµå¦‚æœè¨˜ä½çš„è©±ï¼Œæœƒæœ‰åŠ©æ–¼æˆ‘å€‘åŠ å¿«åšæ¸¬è©¦çš„å‹•ä½œã€‚</p>
<h3 id="ç¬¬äºŒæ­¥è‰åœ–éšæ®µ">ç¬¬äºŒæ­¥ï¼šè‰åœ–éšæ®µ</h3>
<p>å’Œè¨­è¨ˆéšæ®µçš„ UML åœ–ä¸ä¸€æ¨£ï¼Œé€™å€‹éšæ®µç®—æ˜¯æ’°å¯«ç¨‹å¼ç¢¼äº†ï¼Œæ‰€ä»¥è¦å…ˆæƒ³å¥½ä½ çš„ç¨‹å¼è¦æ€éº¼å‹•ï¼Œç„¶å¾Œç”¨ç•«å€‹ç°¡å–®çš„æµç¨‹åœ–å°‡å®ƒè¨˜ä¸‹ä¾†ã€‚ç„¶å¾Œåœ¨åœ–å¡Šä¸Šæ¨™æ˜ä½ æœƒç”¨åˆ°ä»€éº¼è³‡æ–™ï¼Œè¶Šè©³ç´°è¶Šå¥½ã€‚</p>
<p>è€Œæµç¨‹åœ–ä¸ä¸€å®šè¦æ˜¯åœ–ï¼Œä¹Ÿå¯ä»¥æ˜¯æ­¥é©Ÿçš„è¡¨åˆ—ï¼Œç¸½ä¹‹èƒ½è¡¨ç¾å‡ºç¨‹å¼çš„æ„åœ–å³å¯ã€‚è‡³æ–¼ç•«åœ¨å“ªè£¡éƒ½å¯ä»¥ï¼Œåƒæˆ‘å°±ç¿’æ…£ä½¿ç”¨æœ€å–®ç´”çš„ç´™å’Œç­†ã€‚è€Œè‰åœ–ä¹Ÿä¸éœ€è¦ç•«å¾—å¤šå¥½çœ‹ï¼Œé™¤éä½ æƒ³å‘æ­£å¦¹å±•ç¤ºä½ çš„ç¹ªåœ–å¤©ä»½ã€‚</p>
<h3 id="ç¬¬ä¸‰æ­¥æ’°å¯«æ¸¬è©¦">ç¬¬ä¸‰æ­¥ï¼šæ’°å¯«æ¸¬è©¦</h3>
<p>åœ¨è‰åœ–ç•«å¥½å¾Œï¼Œå°±å¯ä»¥ç”¨æ¸¬è©¦å»å‘ˆç¾å®ƒã€‚æ¸¬è©¦çš„å¯«æ³•å…ˆä¸ç”¨å¯«å¾—å¤ªå¥½ï¼ŒæŠŠæ¦‚å¿µå‘ˆç¾å‡ºä¾†å°±å¯ä»¥äº†ã€‚é€™å€‹å‹•ä½œä¸»è¦çš„ç›®çš„æ˜¯è®“æˆ‘å€‘å°è¦æ¸¬è©¦çš„é¡åˆ¥æœ‰å€‹å¤§è‡´çš„è¼ªå»“ï¼Œè®“å¯«å‡ºä¾†çš„ç¨‹å¼ç¢¼ä¸è‡´æ–¼ç™¼æ•£åˆ°æˆ‘å€‘ç„¡æ³•æŒæ§çš„åœ°æ­¥ã€‚</p>
<h3 id="ç¬¬å››æ­¥æ’°å¯«ç¨‹å¼">ç¬¬å››æ­¥ï¼šæ’°å¯«ç¨‹å¼</h3>
<p>å¯«å¥½ç¬¬ä¸€å€‹æ¸¬è©¦å¾Œï¼Œå°±å¯ä»¥é–‹å§‹å¯«ç¨‹å¼å»ç¬¦åˆæ¸¬è©¦äº†ã€‚åœ¨é€™å€‹éç¨‹ä¸­ï¼Œæœ€å¥½èƒ½æ‰¾å€‹äººä¸€èµ·è¨è«–ï¼Œä¹Ÿå°±æ˜¯æ‰€è¬‚çš„ Pair Programming ã€‚æ‰¾æ­£å¦¹ä¸€èµ· Pair Programming æ˜¯æœƒå¢åŠ èˆˆå¥®åº¦ï¼Œä½†ä¸æœƒè®“ä½ çš„ç¨‹å¼å¯«å¾—æ›´å¥½ã€‚</p>
<p>å¦å¤–ï¼Œç¨‹å¼ç¢¼ä»¥å¿«é€Ÿç”¢å‡ºç‚ºä¸»ï¼Œé™¤äº†éµå®ˆ Coding Style å¤–ï¼Œé‚è¼¯ä¸Šä¸¦ä¸ç”¨å¯«å¾—å¤šæ¼‚äº®ï¼›å› ç‚ºå¦‚æœæœ‰æ­£å¦¹åœ¨æ—é‚Šä¸€èµ·å¯«ç¨‹å¼æ™‚ï¼Œä½ çš„è…¦è¢‹ä¸€å®šä¸æœƒç™¾åˆ†ä¹‹ç™¾é‹è½‰ï¼Œæ‰€ä»¥ç­‰ç­‰å†é‡æ§‹å°±å¥½ã€‚</p>
<h3 id="ç¬¬äº”æ­¥åœä¸‹æ€è€ƒ">ç¬¬äº”æ­¥ï¼šåœä¸‹æ€è€ƒ</h3>
<p>ç•¶ç¨‹å¼ç¢¼åœ¨å¯ä»¥ç¬¦åˆæ¸¬è©¦å¾Œï¼Œå°±åœä¸‹ä¾†æƒ³æƒ³é€™æ¨£çš„è¨­è¨ˆæ˜¯ä¸æ˜¯ç¬¦åˆåŸå…ˆçš„æƒ³æ³•ã€‚</p>
<p>ä¸ç¬¦åˆçš„è©±ï¼Œå°±å†é‡ä¾†ï¼Œå› ç‚ºæˆ‘å€‘åªå‰é€²äº†ä¸€å°æ­¥ï¼Œæ‰€ä»¥ä¸å¿…æ“”å¿ƒèŠ±å¤ªå¤šæ™‚é–“ï¼Œç•¢ç«Ÿæ‰¾å‡ºä¸è‰¯çš„è¨­è¨ˆä¹Ÿæ˜¯ä¸€ç¨®é€²å±•ã€‚ç¬¦åˆçš„è©±ï¼Œå°±å†å¾€ä¸‹èµ°ï¼›ä¹Ÿå°±æ˜¯æ’°å¯«ä¸‹ä¸€å€‹æ¸¬è©¦ï¼Œç„¶å¾Œå†æ’°å¯«ç¨‹å¼ç¬¦åˆå®ƒã€‚</p>
<h3 id="ç¬¬å…­æ­¥é‡æ§‹">ç¬¬å…­æ­¥ï¼šé‡æ§‹</h3>
<p>å®Œæˆä¸€å°éšæ®µå¾Œï¼Œå°±é¦¬ä¸Šå›é ­é‡æ§‹æˆ‘å€‘çš„ç¨‹å¼ç¢¼ï¼Œé€™æ™‚æœ‰æ¸¬è©¦ç•¶é å±±ï¼Œå°±ä¸ç”¨æ€•å‡ºå•é¡Œã€‚</p>
<p>è€Œç•¶ç¨‹å¼ç¢¼é‡æ§‹å®Œå¾Œï¼Œçœ‹å°±å†å›é ­çœ‹çœ‹æ¸¬è©¦ç¢¼ï¼Œå¦‚æœæœ‰éœ€è¦çš„è©±å°±é‡æ§‹å®ƒï¼›å› ç‚ºæ¸¬è©¦æœ¬èº«ä¹Ÿæ˜¯ç¨‹å¼ï¼Œä¸€å®šä¹Ÿæœƒæœ‰å£å‘³é“ã€‚ä¾‹å¦‚æˆ‘å€‘å¯ä»¥ç”¨ PHPUnit çš„ @dataProvider æ©Ÿåˆ¶ï¼Œå»é‡æ§‹è¦é©—è­‰ä¸åŒè³‡æ–™é›†ä½†æµç¨‹å»é‡è¤‡çš„æ¸¬è©¦ï¼›æˆ–æ˜¯ç”¨ Template Method å»é‡æ§‹å¤§éƒ¨ä»½æµç¨‹ç›¸åŒï¼Œåªæœ‰å°‘éƒ¨ä»½æµç¨‹æœ‰å·®ç•°çš„æ¸¬è©¦ã€‚</p>
<p>è€Œé‡æ§‹æ¸¬è©¦ç¢¼çš„æ™‚å€™ï¼Œæˆ‘å€‘çš„ç¨‹å¼ç¢¼å°±å¯ä»¥åšç‚ºæ¸¬è©¦çš„æ¸¬è©¦ï¼Œç”¨ä¾†é©—è­‰é‡æ§‹å¾Œçš„æ¸¬è©¦ã€‚</p>
<p>å®Œæˆé€™å€‹æ­¥é©Ÿå¾Œï¼Œå°±å¯ä»¥ç¹¼çºŒé€²è¡Œä¸‹ä¸€å€‹å°éšæ®µäº†ã€‚</p>
<h2 id="å¿ƒå¾—">å¿ƒå¾—</h2>
<p>çœŸæ­£å°‡ TDD è½å¯¦åˆ°å¹³å¸¸çš„é–‹ç™¼å¾Œï¼Œæˆ‘ç™¼ç¾é€™æ¨£çš„æ–¹å¼æœƒå¹«åŠ©æˆ‘çš„æ€è€ƒæ¸…æ™°ï¼Œè€ƒè©¦éƒ½ä¸€ç™¾åˆ† (å› ç‚ºæˆ‘æ²’æ­£å¦¹åœ¨æ—é‚Šä¸€èµ· Pair Programming &hellip;) ã€‚è€Œä¸”å¦ä¸€å€‹å¥½è™•å°±æ˜¯ä¸è«–æ˜¯ä¸€é–‹å§‹çš„æ’°å¯«æˆ–æ˜¯äº‹å¾Œçš„é‡æ§‹ï¼Œæˆ‘éƒ½å¯ä»¥ç²¾ç°¡æˆ‘çš„ç¨‹å¼ç¢¼ã€‚</p>
<p>ä¸éæˆ‘ä¸¦ç„¡æ³•ä¿è­‰ TDD ä¸€å®šé©åˆä½ ï¼Œå› ç‚ºæ¯å€‹äººçš„é–‹ç™¼ç¿’æ…£ä¸ä¸€å®šç›¸åŒï¼Œä¸éé‚„æ˜¯æ¨è–¦å¤§å®¶è©¦è©¦å§ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>Gearman å¿ƒå¾—</title>
			<link>https://jaceju.net/gearman/</link>
			<pubDate>Mon, 07 Jun 2010 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/gearman/</guid>
			<description>å‰å¹¾å¤©ï¼Œ Glenn èˆ‡ Mark åˆ†äº«äº† Gearman çš„è§€å¿µèˆ‡å¯¦ä½œï¼Œä»¥ä¸‹å°±æ˜¯æˆ‘ç°¡å–®çš„ç­†è¨˜èˆ‡å¿ƒå¾—ã€‚ å•é¡Œ ä»¥å¾€æˆ‘åœ¨é–‹ç™¼æœƒå“¡è¨»å†ŠåŠŸèƒ½æ™‚ï¼Œé€šçŸ¥ä¿¡ç¸½æ˜¯å³æ™‚å¯„å‡ºï¼›é›–ç„¶å¯„ä¿¡é€™å€‹å‹•ä½œä¸æœƒèŠ±å¤ª</description>
			<content type="html"><![CDATA[<p>å‰å¹¾å¤©ï¼Œ Glenn èˆ‡ Mark åˆ†äº«äº† Gearman çš„è§€å¿µèˆ‡å¯¦ä½œï¼Œä»¥ä¸‹å°±æ˜¯æˆ‘ç°¡å–®çš„ç­†è¨˜èˆ‡å¿ƒå¾—ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å•é¡Œ">å•é¡Œ</h2>
<p>ä»¥å¾€æˆ‘åœ¨é–‹ç™¼æœƒå“¡è¨»å†ŠåŠŸèƒ½æ™‚ï¼Œé€šçŸ¥ä¿¡ç¸½æ˜¯å³æ™‚å¯„å‡ºï¼›é›–ç„¶å¯„ä¿¡é€™å€‹å‹•ä½œä¸æœƒèŠ±å¤ªå¤šæ™‚é–“ï¼Œä½†é‡åˆ°ç¶²è·¯å¡è»Šæˆ–æ˜¯éƒµä»¶ä¼ºæœå™¨åæ‡‰è¼ƒæ…¢æ™‚ï¼Œé‚£éº¼æœƒå“¡å°±æœ‰å¯èƒ½è¦ç­‰å¥½ä¸€é™£å­æ‰èƒ½é€²åˆ°ä¸‹ä¸€å€‹ç¶²é ã€‚</p>
<p>é‚£éº¼æˆ‘å€‘è¦æ€éº¼è§£æ±ºé€™ç¨®å•é¡Œå‘¢ï¼Ÿ</p>
<p>å¦‚æœå¤§å®¶æœ‰ç”¨é SlideShare æˆ–æ˜¯ YouTube çš„è©±ï¼Œé€™äº›ç¶²è·¯æœå‹™åœ¨æˆ‘å€‘ä¸Šå‚³æª”æ¡ˆå¾Œï¼Œå°±æœƒé–‹å§‹åšè½‰æ›çš„å‹•ä½œï¼Œä½†å»åˆä¸å¿…è®“æˆ‘å€‘åœ¨é‚£è£¡å‚»å‚»çš„ç­‰ï¼›é‚£éº¼åŒæ¨£çš„é“ç†ï¼Œå¦‚æœæˆ‘å€‘èƒ½æŠŠå¯„ä¿¡é€™å€‹è¨Šæ¯ä¸Ÿåˆ°ä¸€å€‹è² è² ç™¼ä¿¡çš„æ©Ÿå™¨å»ï¼Œç„¶å¾Œå°±ç¹¼çºŒè™•ç†æˆ‘å€‘çš„å·¥ä½œï¼Œè€Œä¸å¿…ç­‰å€™å®ƒçš„é€šçŸ¥ï¼Œé€™æ¨£ä¸å°±è§£æ±ºæˆ‘å€‘çš„å•é¡Œäº†å—ï¼Ÿ</p>
<p>é€™å€‹æŠ€å·§å°±ç¨±ç‚ºã€Œ Message Queue ã€ã€‚</p>
<h2 id="message-queue-åŸç†">Message Queue åŸç†</h2>
<p>æƒ³åƒä¸€ä¸‹æˆ‘å€‘äººç¾åœ¨æ­£åœ¨éŠ€è¡Œï¼Œç¾åœ¨æ«ƒå°çª—å£çš„è¾¦äº‹äººå“¡éƒ½åœ¨å¿™ç¢Œï¼Œè€Œé–€å£çš„æœå‹™äººå“¡æœƒè¦ªåˆ‡åœ°çµ¦æˆ‘å€‘ç¥¨å¡ï¼Œè®“æˆ‘å€‘åœ¨ä¸€æ—ç¨ç­‰ï¼›é€™æ™‚æˆ‘å€‘å¯ä»¥å…ˆçœ‹çœ‹å ±ç´™ï¼Œæˆ–æ˜¯æ‰“é›»è©±å…ˆåˆ°å…¬å¸äº¤ä»£ä¸€äº›äº‹æƒ…ï¼Œç­‰å¾…æœ‰ç©ºçš„çª—å£å‘¼å«æˆ‘å€‘å°±å¯ä»¥äº†ã€‚</p>
<p>ç”¨ç¨‹å¼çš„è§’åº¦ä¾†èªªï¼Œç•¶æˆ‘å€‘ç™¼å‡ºè«‹æ±‚ä¹‹å¾Œä¸¦ä¸ä¸€å®šé¦¬ä¸Šå°±è¦è™•ç†ï¼Œè€Œæ˜¯å…ˆé€²å…¥ä½‡åˆ—ç­‰å€™ï¼Œé€™æ™‚æˆ‘å€‘å°±å¯ä»¥å…ˆè¡Œå¾€ä¸‹åŸ·è¡Œå…¶ä»–æ­¥é©Ÿï¼›ç•¶å¯ä»¥è™•ç†è©²éœ€æ±‚çš„è³‡æºæœ‰ç©ºé–’æ™‚ï¼Œå°±æœƒå¹«æˆ‘å€‘åšè™•ç†ã€‚é€™ç¨®æ¨¡å¼å°±æ˜¯ Message Queue çš„åŸºæœ¬æ¦‚å¿µã€‚</p>
<p>æ‰€ä»¥åœ¨ Message Queue ä¸­å°±æœ‰ä»¥ä¸‹é€™ä¸‰å€‹è§’è‰²ï¼š</p>
<ul>
<li>
<p>Client ï¼šå°±æ˜¯éœ€è¦æœå‹™çš„å®¢æˆ¶ï¼›ä¹Ÿå°±æ˜¯ç™¼é€éœ€æ±‚çš„ç¨‹å¼ã€‚</p>
</li>
<li>
<p>Job Server ï¼šå°±æ˜¯æ•´é–“éŠ€è¡Œï¼Œæ›´åš´æ ¼çš„ä¾†èªªï¼Œå®ƒæŒ‡çš„æ˜¯ã€Œç­è§£å®¢æˆ¶éœ€è¦ä½•ç¨®æœå‹™ï¼Œä¸¦æŸ¥çœ‹å“ªå€‹çª—å£å¯ä»¥è™•ç†é€™é …éœ€æ±‚ã€çš„æ©Ÿåˆ¶ã€‚ä¸€èˆ¬ä¾†èªªï¼Œåœ¨ç³»çµ±è£¡å®ƒé€šå¸¸æœƒæ˜¯å€‹ Daemon ã€‚</p>
</li>
<li>
<p>Worker ï¼šè² è²¬è™•ç†å®¢æˆ¶éœ€æ±‚çš„æ«ƒå°äººå“¡ï¼›ä¹Ÿå°±æ˜¯å¯¦éš›è™•ç†éœ€æ±‚çš„ç¨‹å¼ã€‚</p>
</li>
</ul>
<p>æˆ‘å€‘ç°¡å–®ç”¨ä¸‹åœ–ä¾†èªªæ˜ï¼š</p>
<p><a href="/resources/gearman/message_queue.png"><img src="/resources/gearman/message_queue.png" alt="Message Queue æ¦‚å¿µåœ–"></a></p>
<p>é¦–å…ˆï¼ŒåŸ·è¡Œ Message Queue æœå‹™çš„ Job Server å¯ä»¥æ˜¯å¤šå°ä¼ºæœå™¨çµ„æˆï¼Œä¹Ÿå°±æ˜¯åˆ†æ•£å¼æ¶æ§‹ã€‚ç„¶å¾Œæˆ‘å€‘æœƒåœ¨ Job Server ä¸Šè¨»å†Šä¸¦åŸ·è¡Œ Worker ç¨‹å¼ï¼Œé€™äº› Worker ç¨‹å¼æœƒä¸€ç›´å¾ªç’°åœ°ç­‰å€™ï¼Œç›´åˆ° Job Server å‘¼å«å®ƒåŸ·è¡Œå·¥ä½œã€‚</p>
<p>åœ¨ Client ç™¼é€å‡ºéœ€æ±‚ä¹‹å¾Œï¼Œæœƒå°‡è¦éœ€è¦çš„è³‡æ–™åŠå‹•ä½œè¨˜éŒ„åœ¨ Job Server ä¸Šï¼Œé€™æ™‚ Job Server æœƒæŸ¥çœ‹æ˜¯å¦æœ‰ç©ºé–’ä¸¦ä¸”ç¬¦åˆéœ€æ±‚çš„ Worker ï¼›ä¾‹å¦‚ Client ç¨‹å¼å‘Šè¨´ Job Server è¦å¯„ä¿¡ï¼Œé‚£éº¼ Job Server å°±æœƒæŸ¥çœ‹è² è²¬å¯„ä¿¡çš„ Worker ç›®å‰æ˜¯å¦æœ‰ç©ºã€‚ç•¶ Worker æœ‰ç©ºæ™‚ï¼Œé‚£éº¼ Job Server å°±æœƒå¾ä½‡åˆ—ä¸­æŠŠ Client çš„éœ€æ±‚è½‰ç§»çµ¦ Worker é–‹å§‹åŸ·è¡Œã€‚</p>
<p>åœ¨ Worker çµæŸå·¥ä½œå¾Œï¼Œä¹Ÿæœƒç™¼é€é€šçŸ¥çµ¦ Job Server ï¼Œé€™æ™‚ Job Server å°±æœƒè¦–ç‹€æ³æŠŠçµæœå›å‚³çµ¦ Client ã€‚ä¹Ÿå°±æ˜¯é€™æ¨£çš„æ©Ÿåˆ¶ï¼Œè®“ Client ä¸å¿…å†ç­‰å€™éœ€æ±‚çš„åŸ·è¡Œçµæœï¼Œè€Œå¯ä»¥ç›´æ¥å†å¾€ä¸‹åŸ·è¡Œå…¶ä»–å‹•ä½œã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸€èˆ¬ Client å’Œ Job Server çš„ä¸»æ©Ÿæœƒæ˜¯åˆ†é–‹çš„ï¼›é€™æ¨£çš„æ¶æ§‹ï¼Œæ‰ä¸æœƒé€ æˆåŸ·è¡Œ Client ç¨‹å¼ä¸»æ©Ÿçš„è² æ“”ã€‚ä¸éç¨å¾Œçš„ç¤ºç¯„è£¡ï¼Œæˆ‘å€‘æœƒåœ¨åŒä¸€å°ä¸»æ©Ÿä¸Šå¯¦ä½œ Client å’Œ Worker ã€‚</p>
<h2 id="gearman-ç°¡ä»‹">Gearman ç°¡ä»‹</h2>
<p>å¯¦ä½œ Message Queue å¥—ä»¶æœ‰å¾ˆå¤šï¼Œ Gearman ä¹Ÿæ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚å®ƒçš„è©³ç´°æ­·å²èˆ‡ä»‹ç´¹è«‹åƒè€ƒ<a href="http://gearman.org/index.php?id=manual">å®˜æ–¹èªªæ˜</a>ï¼Œä»¥ä¸‹æˆ‘å€‘ç°¡å–®ä»‹ç´¹å®ƒçš„æ‡‰ç”¨æ–¹å¼ï¼š</p>
<p>ä¸‹åœ–å–è‡ªå®˜æ–¹æ‰‹å†Šï¼Œä¸»è¦æ˜¯èªªæ˜ Gearman çš„é‹ä½œæ©Ÿåˆ¶ï¼š</p>
<p><a href="http://gearman.org/img/stack.png"><img src="http://gearman.org/img/stack.png" alt="Gearman æµç¨‹åœ–"></a></p>
<p>è—è‰²éƒ¨ä»½æ˜¯ç”±æˆ‘å€‘é–‹ç™¼çš„ç¨‹å¼ç¢¼ï¼Œè€Œé»ƒè‰²éƒ¨ä»½æ˜¯ç”± Gearman æˆ–ç¬¬ä¸‰æ–¹ API æä¾›çš„ã€‚ä¹Ÿå› ç‚ºåªè¦ç¬¦åˆ API è¦ç¯„å°±å¯ä»¥è·Ÿ Gearman æºé€šï¼Œæ‰€ä»¥ Client å’Œ Worker ä¸¦ä¸éœ€è¦ç”¨åŒæ¨£çš„èªè¨€ä¾†å¯¦ä½œ API ï¼›ä¾‹å¦‚æˆ‘å€‘å¯ä»¥åœ¨ Client ç«¯ä½¿ç”¨ PHP é–‹ç™¼ç¨‹å¼ï¼Œåœ¨ Worker ç«¯ä½¿ç”¨ C æˆ– Perl ä¾†é–‹ç™¼ï¼Œå› ç‚ºå®ƒå€‘æœ‰æä¾› Gearman çš„ API ä¾†ä¾›æˆ‘å€‘å‘¼å«ã€‚</p>
<p>è¨»ï¼šåœ¨å®˜æ–¹ç¶²ç«™çš„<a href="http://gearman.org/download/">ä¸‹è¼‰é </a>ä¸­ï¼Œå¯ä»¥çœ‹åˆ°åˆ†åˆ¥ä»¥å„ç¨®èªè¨€å¯¦ä½œçš„ Gearman API Library ã€‚</p>
<p>å¦å¤– Gearman ä¹Ÿæä¾›äº† Persistent Queues çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯ç•¶ Worker åœ¨ç„¡æ³•æä¾›æœå‹™æ™‚ï¼Œ Job Server æœƒå°‡ Queue ä¿ç•™ Persistent Storage ä¸­ï¼Œä»¥ä¾¿åœ¨ Worker æ¢å¾©é‹ä½œæ™‚èƒ½å†æ¬¡é‹è¡Œã€‚</p>
<h2 id="å®‰è£-gearman-job-server">å®‰è£ Gearman Job Server</h2>
<p>Gearman åœ¨å®˜æ–¹ç¶²ç«™ä¸Šå·²ç¶“æä¾›äº†å„ç¨®å¥—ä»¶ç‰ˆæœ¬çš„<a href="http://gearman.org/getting-started/">å®‰è£èªªæ˜</a>ï¼Œä¸éç›®å‰ä¸è«–æ˜¯ Server ç«¯æˆ– Client API ç«¯ï¼Œéƒ½ä¸æä¾› Windows ç‰ˆæœ¬ï¼Œå› æ­¤ä»¥ä¸‹çš„å®‰è£èˆ‡ç¯„ä¾‹æˆ‘éƒ½å°‡ä»¥ Ubuntu 10.04 ç‚ºä¸»ã€‚</p>
<blockquote>
<p>è¨»ï¼šé€™è£¡æˆ‘ä¹Ÿå‡è¨­å¤§å®¶å·²ç¶“å®‰è£å¥½äº† PHP ã€‚</p>
</blockquote>
<p>å…ˆåˆ©ç”¨ä»¥ä¸‹çš„æŒ‡ä»¤ä¾†å®‰è£ gearman åŠç›¸é—œå¥—ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get install gearman-job-server
</code></pre></div><p>å®Œæˆå¾Œï¼Œ Gearman Job Server å°±æœƒåœ¨æˆ‘å€‘çš„ç³»çµ±ä¸­å•Ÿå‹•äº†ã€‚</p>
<h2 id="è¨­å®š-persistent-queue">è¨­å®š Persistent Queue</h2>
<p>æ¥è‘—æˆ‘å€‘è¦åœ¨ MySQL ä¸­å…ˆå»ºç«‹ä¸€å€‹ gearman è³‡æ–™åº«ï¼Œé€™æ¨£ç¨å¾Œå•Ÿå‹• Gearman Job Server æ™‚ï¼Œæ‰èƒ½å»ºç«‹æ‰€éœ€è¦çš„è³‡æ–™è¡¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">echo</span> <span class="s1">&#39;CREATE DATABASE gearman&#39;</span> &gt; /tmp/temp.sql <span class="p">;</span> mysql -u root -p &lt; /tmp/temp.sql <span class="p">;</span> rm -f /tmp/temp.sql
</code></pre></div><p>è€Œç‚ºäº†è®“ Gearman Job Server èƒ½å¤ ä¸²æ¥ MySQL ï¼Œæˆ‘å€‘è¦åœ¨ Service Script ä¸­è¨­å®šç›¸é—œåƒæ•¸ã€‚ç·¨è¼¯ <code>/etc/init/gearman-job-server.conf</code> é€™å€‹æª”æ¡ˆï¼š</p>
<p>å°‡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">exec</span> start-stop-daemon --start --chuid gearman --exec /usr/sbin/gearmand -- --log-file<span class="o">=</span>/var/log/gearman-job-server/gearman.log
</code></pre></div><p>ç½®æ›ç‚ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">script
    . /etc/default/gearman-job-server
    <span class="nb">exec</span> start-stop-daemon --start --chuid gearman --exec /usr/sbin/gearmand -- <span class="nv">$PARAMS</span> --log-file<span class="o">=</span>/var/log/gearman-job-server/gearman.log
end script
</code></pre></div><blockquote>
<p>è¨»ï¼šé€™é‚Šæ˜¯å€‹ bug ï¼Œå¯ä»¥åƒè€ƒ <a href="http://jeremykendall.net/2014/09/04/ubuntu-14-dot-04-gearman-config-bug/">Ubuntu 14.04 Gearman Config Bug</a> ä¸€æ–‡ã€‚</p>
</blockquote>
<p>ç„¶å¾Œå†ç·¨è¼¯ <code>/etc/default/gearman-job-server</code> ï¼Œå°‡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">PARAMS</span><span class="o">=</span><span class="s2">&#34;--listen=localhost&#34;</span>
</code></pre></div><p>ç½®æ›æˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">PARAMS</span><span class="o">=</span><span class="s2">&#34;-q mysql --mysql-host 127.0.0.1 \
</span><span class="s2">                 --mysql-user root \
</span><span class="s2">                 --mysql-password secret \
</span><span class="s2">                 --mysql-db gearman \
</span><span class="s2">                 --mysql-table gearman_queue&#34;</span>
</code></pre></div><p>å…¶ä¸­ <code>--mysql-host</code> å¯æ›æˆå„ä½æ…£ç”¨çš„ MySQL ä¼ºæœå™¨ IP ï¼Œè€Œ <code>--mysql-user</code> ã€ <code>--mysql-password</code> å‰‡æ˜¯è¦æœ‰ <code>CREATE TABLE</code> çš„æ¬Šé™ã€‚</p>
<p>æœ€å¾Œé‡æ–°å•Ÿå‹• Gearman Job Server ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo service gearman-job-server restart
</code></pre></div><p>æˆ‘å€‘å¯ä»¥ç”¨ ps æŒ‡ä»¤ä¾†æŸ¥çœ‹å•Ÿå‹•æ˜¯å¦æˆåŠŸï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">ps aux <span class="p">|</span> grep gearman
</code></pre></div><p>å‡ºç¾ä»¥ä¸‹çµæœçš„è©±ï¼Œå°±è¡¨ç¤ºæˆ‘å€‘æˆåŠŸå®‰è£ä¸¦è¨­å®šå¥½ Gearman Job Server äº†ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">gearman   <span class="m">7158</span>  0.0  0.3 <span class="m">483732</span>  <span class="m">7384</span> ?        Ssl  16:01   0:00 /usr/sbin/gearmand -q mysql --mysql-host 127.0.0.1 --mysql-user root --mysql-password secret --mysql-db gearman --mysql-table gearman_queue --log-file<span class="o">=</span>/var/log/gearman-job-server/gearman.log
</code></pre></div><h2 id="å®‰è£-php-gearman-api-extension">å®‰è£ PHP Gearman API Extension</h2>
<p>å› ç‚ºå¾Œé¢çš„ç¯„ä¾‹æ˜¯ä½¿ç”¨ PHP åšç¤ºç¯„ï¼Œæ‰€ä»¥æˆ‘å€‘å®‰è£ Gearman Extension ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get install php5-gearman
</code></pre></div><h2 id="ç°¡æ˜“å¯¦ä½œ">ç°¡æ˜“å¯¦ä½œ</h2>
<p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘å¯ä»¥è©¦è‘—ç”¨ PHP API ä¾†é€£æ¥ Job Server ã€‚å‰é¢å®‰è£å¥½ PECL çš„ Gearman Extension å¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥åœ¨ PHP ç¨‹å¼è£¡å»ºç«‹æ“ä½œ Gearman API çš„ç‰©ä»¶äº†ã€‚</p>
<p>ä»¥ä¸‹æˆ‘ç”¨ç°¡å–®çš„æ–¹å¼ä¾†æ¨¡æ“¬ Client å’Œ Worker çš„é‹ä½œï¼Œæ‰€ä»¥é€™è£¡ Client å’Œ Worker æœƒåœ¨åŒä¸€éƒ¨ä¸»æ©Ÿä¸Šï¼Œä½†å¯¦éš›é‹ä½œæ™‚æ˜¯ä¸éœ€è¦çš„ï¼Œè«‹å¤§å®¶æ³¨æ„ã€‚</p>
<h3 id="client-ç«¯ç¨‹å¼">Client ç«¯ç¨‹å¼</h3>
<p>å…ˆçœ‹çœ‹ client.php ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GearmanClient</span><span class="p">();</span>
<span class="nv">$client</span><span class="o">-&gt;</span><span class="na">addServer</span><span class="p">();</span> <span class="c1">// é è¨­ç‚º localhost
</span><span class="c1"></span><span class="nv">$emailData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;web&#39;</span><span class="p">,</span>
    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;member@example.com&#39;</span><span class="p">,</span>
<span class="p">);</span>
<span class="nv">$imageData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;image&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/var/www/pub/image/test.png&#39;</span><span class="p">,</span>
<span class="p">);</span>
<span class="nv">$client</span><span class="o">-&gt;</span><span class="na">doBackground</span><span class="p">(</span><span class="s1">&#39;sendEmail&#39;</span><span class="p">,</span> <span class="nx">serialize</span><span class="p">(</span><span class="nv">$emailData</span><span class="p">));</span>
<span class="k">echo</span> <span class="s2">&#34;Email sending is done.</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="nv">$client</span><span class="o">-&gt;</span><span class="na">doBackground</span><span class="p">(</span><span class="s1">&#39;resizeImage&#39;</span><span class="p">,</span> <span class="nx">serialize</span><span class="p">(</span><span class="nv">$imageData</span><span class="p">));</span>
<span class="k">echo</span> <span class="s2">&#34;Image resizing is done.</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</code></pre></div><p>é¦–å…ˆï¼Œ PHP Gearman Extension æä¾›äº†ä¸€å€‹åç‚º <a href="http://www.php.net/manual/en/class.gearmanclient.php">GearmanClient</a> çš„é¡åˆ¥ï¼Œå®ƒå¯ä»¥è®“ç¨‹å¼å®‰æ’å·¥ä½œçµ¦ Job Server ã€‚</p>
<p>è€Œ <a href="http://www.php.net/manual/en/gearmanclient.addserver.php">addServer</a> æ–¹æ³•è¡¨ç¤ºè¦é€šçŸ¥çš„æ˜¯å“ªäº› Job Server ï¼Œä¹Ÿå°±æ˜¯èªªå¦‚æœæœ‰å¤šå° Job Server çš„è©±ï¼Œå°±å¯ä»¥é€é addServer æ–°å¢ã€‚</p>
<p>ç„¶å¾Œæˆ‘å€‘å°‡è¦å‘¼å«å“ªå€‹ Worker ä»¥åŠè©² Worker æ‰€éœ€è¦çš„è³‡æ–™ï¼Œåˆ©ç”¨ GearmanClient çš„ <a href="http://www.php.net/manual/en/gearmanclient.dobackground.php">doBackground</a> æ–¹æ³•å‚³é€éå»ã€‚ doBackground æ–¹æ³•é¡§åæ€ç¾©å°±æ˜¯åœ¨èƒŒæ™¯åŸ·è¡Œï¼Œ Client åœ¨ä¸Ÿå‡ºéœ€æ±‚å¾Œå°±å¯ä»¥ç¹¼çºŒè™•ç†å…¶ä»–çš„ç¨‹å¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘å€‘å¸¸èªªçš„ã€Œå°„å¾Œä¸ç†ã€ã€‚</p>
<p>doBackground æ–¹æ³•çš„ç¬¬ä¸€å€‹åƒæ•¸æ˜¯å‘Šè¨´ Job Server è¦åŸ·è¡Œå“ªå€‹åŠŸèƒ½ï¼Œè€Œé€™å€‹åŠŸèƒ½å‰‡æ˜¯ç”± Worker æä¾›çš„ï¼›è¦æ³¨æ„æ˜¯ï¼Œé€™å€‹åƒæ•¸åªæ˜¯è­˜åˆ¥ç”¨çš„ï¼Œä¸¦ä¸æ˜¯çœŸæ­£çš„å‡½å¼åç¨±ã€‚è€Œç¬¬äºŒå€‹åƒæ•¸æ˜¯è¦å‚³çµ¦ Worker çš„è³‡æ–™ï¼Œå®ƒå¿…é ˆæ˜¯å€‹å­—ä¸²ï¼›å› æ­¤å¦‚æœè¦å‚³é€çš„æ˜¯é™£åˆ—çš„è©±ï¼Œæˆ‘å€‘å°±è¦ç”¨ PHP çš„ serialize å‡½å¼ä¾†å°é€™äº›è³‡æ–™åšåºåˆ—åŒ–ã€‚</p>
<h3 id="worker-ç«¯ç¨‹å¼">Worker ç«¯ç¨‹å¼</h3>
<p>æ¥ä¸‹ä¾†æˆ‘å€‘è¦è£½ä½œ Worker ï¼Œä»¥ä¸‹å°±æ˜¯ worker.php ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$id</span> <span class="o">=</span> <span class="nx">microtime</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
<span class="nv">$worker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GearmanWorker</span><span class="p">();</span>
<span class="nv">$worker</span><span class="o">-&gt;</span><span class="na">addServer</span><span class="p">();</span> <span class="c1">// é è¨­ç‚º localhost
</span><span class="c1"></span><span class="nv">$worker</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">&#39;sendEmail&#39;</span><span class="p">,</span> <span class="s1">&#39;doSendEmail&#39;</span><span class="p">);</span>
<span class="nv">$worker</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">&#39;resizeImage&#39;</span><span class="p">,</span> <span class="s1">&#39;doResizeImage&#39;</span><span class="p">);</span>
<span class="k">while</span> <span class="p">(</span><span class="nv">$worker</span><span class="o">-&gt;</span><span class="na">work</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$worker</span><span class="o">-&gt;</span><span class="na">returnCode</span><span class="p">()</span> <span class="o">!=</span> <span class="nx">GEARMAN_SUCCESS</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// ç„¡é™è¿´åœˆï¼Œä¸¦è®“ CPU ä¼‘æ¯ä¸€ä¸‹
</span><span class="c1"></span><span class="p">}</span>
<span class="k">function</span> <span class="nf">doSendEmail</span><span class="p">(</span><span class="nv">$job</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">global</span> <span class="nv">$id</span><span class="p">;</span>
    <span class="nv">$data</span> <span class="o">=</span> <span class="nx">unserialize</span><span class="p">(</span><span class="nv">$job</span><span class="o">-&gt;</span><span class="na">workload</span><span class="p">());</span>
    <span class="nx">print_r</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
    <span class="nx">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// æ¨¡æ“¬è™•ç†æ™‚é–“
</span><span class="c1"></span>    <span class="k">echo</span> <span class="s2">&#34;</span><span class="si">$id</span><span class="s2">: Email sending is done really.</span><span class="se">\n\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">doResizeImage</span><span class="p">(</span><span class="nv">$job</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">global</span> <span class="nv">$id</span><span class="p">;</span>
    <span class="nv">$data</span> <span class="o">=</span> <span class="nx">unserialize</span><span class="p">(</span><span class="nv">$job</span><span class="o">-&gt;</span><span class="na">workload</span><span class="p">());</span>
    <span class="nx">print_r</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
    <span class="nx">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// æ¨¡æ“¬è™•ç†æ™‚é–“
</span><span class="c1"></span>    <span class="k">echo</span> <span class="s2">&#34;</span><span class="si">$id</span><span class="s2">: Image resizing is really done.</span><span class="se">\n\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>PHP çš„ Gearman Extension ä¹Ÿæä¾›äº†ä¸€å€‹ GearmanWorker é¡åˆ¥ï¼Œè®“æˆ‘å€‘å¯ä»¥å¯¦ä½œ Worker ã€‚è€Œ GearmanWorker é¡åˆ¥ä¹Ÿæä¾›äº† <a href="http://www.php.net/manual/en/gearmanworker.addserver.php">addServer</a> æ–¹æ³•ï¼Œè®“æ‰€ç”Ÿæˆçš„ Worker ç‰©ä»¶å¯ä»¥è¨»å†Šåˆ° Job Server ä¸­ã€‚</p>
<p>å¦å¤– GearmanWorker é¡åˆ¥ä¹Ÿæä¾›äº† <a href="http://www.php.net/manual/en/gearmanworker.addfunction.php">addFuncton</a> æ–¹æ³•ï¼Œå‘Šè¨´ Job Server è‡ªå·±å¯ä»¥è™•ç†å“ªäº›å·¥ä½œã€‚ addFunction çš„ç¬¬ä¸€å€‹åƒæ•¸å°±æ˜¯å°æ‡‰åˆ° GearmanClient::doBackground æ–¹æ³•çš„ç¬¬ä¸€å€‹åƒæ•¸ï¼Œä¹Ÿå°±æ˜¯åŠŸèƒ½åç¨±ï¼›é€™ä½¿å¾— Client å’Œ Worker èƒ½é€éé€™å€‹åç¨±ä¾†äº’ç›¸æºé€šã€‚è€Œç¬¬äºŒå€‹åƒæ•¸å‰‡æ˜¯ä¸€å€‹ <a href="http://www.php.net/manual/en/language.pseudo-types.php#language.types.callback">callback</a> å‡½å¼ï¼Œå®ƒæœƒæŒ‡å‘çœŸæ­£æ‡‰è©²è¦è™•ç†è©²å·¥ä½œçš„å‡½å¼æˆ–é¡åˆ¥æ–¹æ³•ç­‰ã€‚</p>
<p>æœ€å¾Œå› ç‚º Worker å› ç‚ºè¦éš¨æ™‚æº–å‚™æœå‹™ï¼Œæ˜¯ä¸èƒ½è¢«ä¸­æ–·çš„ï¼Œå› æ­¤æˆ‘å€‘é€éä¸€å€‹ç„¡é™è¿´åœˆä¾†è®“å®ƒå¸¸é§åœ¨ Job Server ä¸­ã€‚</p>
<h3 id="æ¸¬è©¦">æ¸¬è©¦</h3>
<p>æº–å‚™å¥½ Client å’Œ Worker çš„ç¨‹å¼å¾Œï¼Œå°±å¯ä»¥æ¸¬è©¦çœ‹çœ‹äº†ã€‚é¦–å…ˆæˆ‘å€‘å¿…é ˆå¾—å…ˆåŸ·è¡Œ worker.php ï¼Œè®“å®ƒé–‹å§‹æœå‹™ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">php worker.php
</code></pre></div><p>é€™æ™‚æˆ‘å€‘æœƒçœ‹åˆ° worker.php åœé§åœ¨è¢å¹•ä¸Šç­‰å¾…æœå‹™ã€‚</p>
<p>æ¥è‘—æˆ‘å€‘é–‹å•Ÿå¦ä¸€å€‹ console è¦–çª—ä¾†åŸ·è¡Œ client.php ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">php client.php
</code></pre></div><p>æœƒç«‹åˆ»å‡ºç¾ä»¥ä¸‹çµæœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Email sending is <span class="k">done</span>.
Image Resizing is <span class="k">done</span>.
</code></pre></div><p>è€Œåˆ‡æ›åˆ°åŸ·è¡Œ worker.php çš„ console æ™‚ï¼Œå°±æœƒçœ‹åˆ°ä»¥ä¸‹åŸ·è¡Œçµæœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Array
<span class="o">(</span>
    <span class="o">[</span>who_send<span class="o">]</span> <span class="o">=</span>&gt; web
    <span class="o">[</span>get_email<span class="o">]</span> <span class="o">=</span>&gt; member@example.com
<span class="o">)</span>
Email sending is really <span class="k">done</span>.
Array
<span class="o">(</span>
    <span class="o">[</span>image<span class="o">]</span> <span class="o">=</span>&gt; /var/www/pub/image/test.png
<span class="o">)</span>
Image resizing is really <span class="k">done</span>.
</code></pre></div><p>é€™è¡¨ç¤º Worker æ­£å¸¸åœ°è™•ç† Client çš„éœ€æ±‚äº†ã€‚</p>
<p>ç¾åœ¨è©¦è‘—æŠŠ worker.php åœæ‰ (Ctrl+C) ï¼Œç„¶å¾Œå†åŸ·è¡Œ client.php ï¼Œå¤§å®¶æ‡‰è©²æœƒç™¼ç¾ client.php é‚„æ˜¯æ­£å¸¸åœ°å®Œæˆå®ƒçš„å·¥ä½œï¼›é€™æ˜¯å› ç‚º Job Server å¹«æˆ‘å€‘æŠŠéœ€æ±‚å…ˆæ”¾åœ¨ Queue è£¡ï¼Œç­‰å¾… Worker å•Ÿå‹•å¾Œå†è™•ç†ã€‚</p>
<p>é€™æ™‚å¯ä»¥æŸ¥çœ‹ MySQL çš„ gearman è³‡æ–™åº«ï¼Œåœ¨ gearman_queue è³‡æ–™è¡¨ä¸­æ‡‰è©²å°±æœƒçœ‹åˆ°ä»¥ä¸‹çµæœï¼š</p>
<p><a href="/resources/gearman/queue_table.png"><img src="/resources/gearman/queue_table.png" alt="Queue è³‡æ–™è¡¨"></a></p>
<p>é€™è¡¨ç¤º Job Server æˆåŠŸåœ°å°‡ Queue ä¿ç•™åœ¨ MySQL è³‡æ–™è¡¨ä¸­ã€‚</p>
<p>æ¥è‘—å†åŸ·è¡Œ worker.php ï¼Œé€™æ™‚ Job Server æœƒå¾—çŸ¥ Worker å¾©æ´»ï¼Œè¶•ç·Šå°‡ Queue è£¡é¢å±¬æ–¼è©² Worker æ‡‰è©²åŸ·è¡Œçš„å·¥ä½œå†ç™¼é€å‡ºå»ä»¥å®Œæˆä½œæ¥­ï¼›è€Œ Worker å®Œæˆä½œæ¥­å¾Œï¼Œ Job Server å°±æœƒæŠŠ Queue æ¸…ç©ºäº†ã€‚</p>
<p>æ˜¯ä¸æ˜¯å¾ˆæœ‰è¶£å‘¢ï¼Ÿ</p>
<h2 id="å¿ƒå¾—">å¿ƒå¾—</h2>
<p>Message Queue é€™å€‹æ¶æ§‹çš„æ‡‰ç”¨å¯ä»¥èªªç›¸ç•¶å»£æ³›ï¼Œå°¤å…¶åœ¨å¤§æµé‡çš„ç¶²ç«™ä¸Šï¼Œæˆ‘å€‘èƒ½é€éå®ƒä¾†ä¾†æœ‰æ•ˆé‹ç”¨åˆ†æ•£å¼çš„ç³»çµ±æ¶æ§‹ï¼Œä»¥è™•ç†æ›´å¤šä½¿ç”¨è€…çš„éœ€æ±‚ã€‚</p>
<p>è€Œç›®å‰ Gearman å¯èªªæ˜¯åœ¨ PHP ä¸Šä¸€å€‹å¾ˆæ£’çš„ Message Queue æ”¯æ´å¥—ä»¶ï¼Œè€Œä¸” API ä¹Ÿç›¸ç•¶å®Œå–„ï¼›å› æ­¤å¦‚æœèƒ½å–„ç”¨ Gearman çš„è©±ï¼Œé‚£éº¼æˆ‘å€‘åœ¨ PHP ç¶²ç«™çš„æ¶æ§‹ä¸Šå°±å¯ä»¥æœ‰æ›´å¤§çš„å»¶å±•æ€§ï¼Œä¹Ÿèƒ½æœ‰æ›´å¤šçš„å¯èƒ½æ€§ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>é—œæ–¼å­¸ç¿’æŠ€è¡“é€™ä»¶äº‹</title>
			<link>https://jaceju.net/about-learning/</link>
			<pubDate>Mon, 24 May 2010 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/about-learning/</guid>
			<description>å°ˆæ¥­æŠ€è¡“å¾ä¾†å°±ä¸æ˜¯äººå¤©ç”Ÿå°±æœƒçš„ï¼Œæ‰€ä»¥æˆ‘å€‘æ‰éœ€è¦å»å­¸ç¿’å®ƒã€‚å¯æ˜¯æœ‰è¨±å¤šäººåœ¨å­¸ç¿’æ–°æŠ€è¡“æ™‚ï¼Œå¸¸å¸¸åªæ˜¯æŠŠæ›¸ç€è¦½éä¸€éï¼Œç„¶å¾ŒçœŸæ­£è¦ä¸‹æ‰‹æ™‚å»ä¸çŸ¥æ‰€æªã€‚å…¶å¯¦</description>
			<content type="html"><![CDATA[<p>å°ˆæ¥­æŠ€è¡“å¾ä¾†å°±ä¸æ˜¯äººå¤©ç”Ÿå°±æœƒçš„ï¼Œæ‰€ä»¥æˆ‘å€‘æ‰éœ€è¦å»å­¸ç¿’å®ƒã€‚å¯æ˜¯æœ‰è¨±å¤šäººåœ¨å­¸ç¿’æ–°æŠ€è¡“æ™‚ï¼Œå¸¸å¸¸åªæ˜¯æŠŠæ›¸ç€è¦½éä¸€éï¼Œç„¶å¾ŒçœŸæ­£è¦ä¸‹æ‰‹æ™‚å»ä¸çŸ¥æ‰€æªã€‚å…¶å¯¦åœ¨å­¸ç¿’æŠ€è¡“çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œåªä¸éä¸¦æ²’æœ‰å“ªå€‹æ–¹æ³•ç‰¹åˆ¥å¥½ï¼Œå°±çœ‹é€™å€‹æ–¹æ³•é©ä¸é©åˆæˆ‘å€‘è€Œå·²ã€‚</p>
<p>ç„¶è€Œé©åˆæ¯å€‹äººå­¸ç¿’çš„æ–¹å¼ä¸ä¸€å®šç›¸åŒï¼Œä»¥ä¸‹å°±æ˜¯æˆ‘å€‹äººä»¥å¾€çš„å­¸ç¿’ç¶“é©—ï¼Œä¾›å¤§å®¶åƒè€ƒçœ‹çœ‹ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="ç­è§£">ç­è§£</h2>
<p>æˆ‘åœ¨å­¸ä¸€å€‹æŠ€è¡“ä¹‹å‰ï¼Œéƒ½æœƒå…ˆå»ç­è§£å®ƒçš„èƒŒæ™¯è§€å¿µï¼Œä¸¦çŸ¥é“ç‚ºä»€éº¼è¦éœ€è¦å­¸å®ƒã€‚</p>
<p>å¾ˆå¤šæŠ€è¡“éƒ½æœ‰å®ƒçš„ä¾†æºèƒŒæ™¯ï¼Œç•¶æˆ‘èŠ±å¿ƒæ€å»ç­è§£ç™¼æ˜é€™é …æŠ€è¡“çš„äººçš„æƒ³æ³•ï¼Œä¸¦ä¸”ä¹Ÿæ˜ç™½é€™å€‹æŠ€è¡“è¦è§£æ±ºä»€éº¼æ¨£çš„å•é¡Œä¹‹å¾Œï¼Œå°±æœƒæ¯”è¼ƒå®¹æ˜“æ¥å—é€™å€‹æŠ€è¡“ï¼Œé€²è€Œå¿«é€Ÿé€²å…¥å­¸ç¿’å®ƒçš„å¤§é–€ã€‚</p>
<p>å¯æ˜¯åƒè¬ä¸è¦åœ¨åªæ‡‚äº†é€™æŠ€è¡“ä¸€å°éƒ¨ä»½çš„ä¾†ç”±ä¹‹å¾Œå°±é–‹å§‹è‡ªæ»¿äº†èµ·ä¾†ï¼Œä¸¦ç”¨è‡ªå·±ç‹¹éš˜çš„è§€é»ä¾†è©•æ–·é€™å€‹æŠ€è¡“ã€‚å› ç‚ºä»»ä½•æŠ€è¡“çš„èª•ç”Ÿéƒ½æœ‰å®ƒçš„æ™‚ç©ºèƒŒæ™¯ï¼Œå³ä¾¿å®ƒä¸é©åˆæˆ‘å€‘ç¾åœ¨çš„ç’°å¢ƒï¼›æˆ‘å€‘è©²åšçš„æ˜¯æ€è€ƒé€™é …æŠ€è¡“çš„å„ªç¼ºé»ï¼Œè®“è‡ªå·±èƒ½æ›´å–„æ–¼æ‡‰ç”¨å®ƒï¼Œæˆ–æ˜¯åœ¨æœªä¾†ä¸å†çŠ¯ä¸‹åŒæ¨£çš„éŒ¯èª¤ã€‚</p>
<h2 id="è¨˜æ†¶">è¨˜æ†¶</h2>
<p>æŠŠæƒ³å­¸çš„æŠ€è¡“ï¼Œç”¨å¿ƒæ™ºåœ–ç•«å‡ºä¾†ï¼›å­¸éçš„å°±ç”¨åœ–ç¤ºæ¨™èµ·ä¾†ï¼Œè®“è‡ªå·±çŸ¥é“å­¸éäº†å“ªäº›ã€‚</p>
<p>é€šå¸¸æˆ‘çš„è¨˜æ†¶æ˜¯ä¸å¯é çš„ï¼Œå¸¸å¸¸å­¸éçš„æ±è¥¿ä¹Ÿå¾ˆå¿«å°±å¿˜äº†ï¼Œé€™æ™‚ç°¡å–®çš„ç­†è¨˜ä»¥åŠéƒ¨è½æ ¼å°±æ˜¯å¹«åŠ©æˆ‘è¨˜æ†¶çš„æœ€å¤§åˆ©å™¨äº†ã€‚ä¸éé€™æ¨£è¨˜ä¸‹çš„æ±è¥¿å¸¸å¸¸æ˜¯é›œäº‚çš„ï¼Œæ‰€ä»¥æœ€å¥½å†ç”¨è¼ƒç‚ºæ˜“æ–¼æ•´ç†çš„ç³»çµ± (ä¾‹å¦‚ Wiki ) ï¼Œä¾†å°‡é€™äº›æŠ€è¡“å¿ƒå¾—æ­¸ç´èˆ‡å¸æ”¶ã€‚</p>
<h2 id="æ‡‰ç”¨">æ‡‰ç”¨</h2>
<p>æŠ€è¡“ä¸ç”¨æ‡‚åˆ°å…«ã€ä¹æˆï¼Œé‡é»æ˜¯åšä¸­å­¸ã€å­¸ä¸­åšã€‚</p>
<p>å…¶å¯¦æˆ‘å¾ˆå°‘å»å°‡ä¸€å€‹æŠ€è¡“ç ”ç©¶åˆ°é€å¾¹ï¼Œä¸€ä¾†æˆ‘æ²’æœ‰é‚£å€‹æ™‚é–“ï¼ŒäºŒä¾†æ²’æœ‰å¯¦ä½œçš„è¼”åŠ©ï¼Œæˆ‘å¾ˆé›£å»æ›´æ·±å…¥é€™å€‹æŠ€è¡“çš„æ ¸å¿ƒã€‚å› æ­¤æˆ‘å¸¸æ˜¯å­¸åˆ°ä¸€å€‹éšæ®µï¼Œä¸¦ä¸”è¬¹è²¬åœ°è©•ä¼°ä¹‹å¾Œï¼Œå°±æœƒå¯¦éš›åœ°å°‡å®ƒæ‡‰ç”¨åœ¨æŸäº›å°ˆæ¡ˆä¸Šã€‚è€Œå¾é€™äº›å°ˆæ¡ˆå¯¦éš›ä¸Šé‡åˆ°çš„å•é¡Œä¸­ï¼Œæˆ‘å°±å¯ä»¥ç­è§£é€™é …æŠ€è¡“çš„å„ªç¼ºé»ï¼Œä¹Ÿèƒ½é©…å‹•æˆ‘ç ”ç©¶æœ‰é—œè©²æŠ€è¡“æ›´æ·±ä¸€å±¤çš„çŸ¥è­˜ã€‚</p>
<h2 id="æœŸæœ›">æœŸæœ›</h2>
<p>è¦åŠƒçŸ­æœŸçš„å­¸ç¿’ç›®æ¨™ï¼Œæƒ³åƒè‡ªå·±åœ¨ç›®æ¨™å®Œæˆå¾Œæœƒè®Šæˆä»€éº¼æ¨£çš„ä¸€å€‹äººã€‚</p>
<p>åœ¨æˆ‘å‰›é–‹å§‹å­¸ç¿’ç‰©ä»¶å°å‘çš„æ™‚å€™ï¼Œæˆ‘å…¶å¯¦å¾ˆç›²ç›®ã€‚ä½†æ˜¯ç¶“éè‡ªå·±è¨­å®šç›®æ¨™ä¸¦ä¸”ä¸æ–·å»ç·´ç¿’å¾Œï¼Œæˆ‘æ…¢æ…¢ç™¼ç¾é›–ç„¶æˆ‘ä¸¦ç„¡æ³•åƒé«˜æ‰‹é‚£èˆ¬å°ç‰©ä»¶å°å‘é‹ç”¨è‡ªå¦‚ï¼Œä½†å»ä¹Ÿå·²ç¶“èƒ½çœ‹æ‡‚ä»–å€‘å¯«å‡ºä¾†çš„ç¨‹å¼ã€‚æˆ‘å¾ˆé«˜èˆˆæˆ‘æœ‰é€™æ¨£çš„æˆæœï¼Œé€™ä¿ƒä½¿æˆ‘æœè‘—ç‰©ä»¶å°å‘é–‹ç™¼çš„æ–¹å‘å‰é€²ã€‚</p>
<p>ä¸€ç›´åˆ°ç¾åœ¨ï¼Œé›–ç„¶æˆ‘åœ¨ç‰©ä»¶å°å‘çš„è§€å¿µä¸Šé‚„è«‡ä¸ä¸Šæ˜¯éå¸¸æˆç†Ÿï¼Œä½†æœ‰äº›æ¦‚å¿µå·²ç¶“æ¼¸æ¼¸èæœƒè²«é€šï¼›è‡³å°‘ï¼Œæˆ‘å·²ä¸å†æ˜¯ç‰©ä»¶å°å‘è‹¦æ‰‹ï¼</p>
<h2 id="åˆ†äº«">åˆ†äº«</h2>
<p>å•å•é¡Œè¦å…ˆåšåŠŸèª²ï¼Œå¾—åˆ°è§£ç­”å¾Œä¹Ÿè¦æ‡‚å¾—åé¥‹ã€‚</p>
<p>å¾ˆå¤šæœ‹å‹å­¸ç¿’æŠ€è¡“æ™‚ï¼Œä¸€é‡åˆ°å•é¡Œå°±å•ï¼Œä½†æ˜¯ä»–å€‘å»å¸¸å¸¸ç¢°äº†å¥½å¤§çš„é‡˜å­ã€‚é€šå¸¸å¾ˆå¤§çš„åŸå› æ˜¯ä»–å€‘ä¸¦æ²’æœ‰è‡ªå·±å…ˆå»æ€è€ƒéé€™å€‹å•é¡Œï¼Œä¹Ÿæ²’æœ‰åœ¨é€™å€‹é ˜åŸŸå…ˆå»æ‰“å¥½å¿…è¦çš„åŸºç¤ã€‚äººå¿…è‡ªåŠ©è€Œå¾ŒäººåŠ©ä¹‹ï¼Œç•¶æˆ‘å€‘æ²’èŠ±å¿ƒæ€å»è§£æ±ºå•é¡Œæ™‚ï¼Œæ€éº¼èƒ½æœŸå¾…åˆ¥äººèŠ±æ™‚é–“å¹«æˆ‘å€‘è§£æ±ºå‘¢ï¼Ÿ</p>
<p>è€Œä»¥å‰å¸¸å¸¸åœ¨æŠ€è¡“è«–å£‡è£¡æ‰“æ··çš„æˆ‘ï¼Œå¤§éƒ¨ä»½çš„æ™‚å€™æ˜¯è©¦è‘—å»è§£æ±ºåˆ¥äººçš„å•é¡Œï¼Œè€Œä¸æ˜¯å»å•å•é¡Œã€‚åœ¨è©¦è‘—è§£æ±ºé€™äº›å•é¡Œçš„éç¨‹ä¸­ï¼Œæˆ‘ç²å¾—äº†å¾ˆå¤šä»¥å‰è‡ªå·±å¿½ç•¥çš„è§€å¿µï¼›è€Œä¸”ç•¶æˆ‘åˆ†äº«æˆ‘çš„æ–¹æ³•å¾Œï¼Œä¹Ÿæœƒæœ‰é«˜æ‰‹é¡˜æ„è·Ÿæˆ‘è¨è«–æˆ‘çš„æ–¹æ³•çš„å„ªç¼ºé»ï¼Œé‚£ç¨®æˆé•·æ˜¯è¨€èªé›£ä»¥å½¢å®¹çš„ï¼</p>
<h2 id="æ†å¿ƒ">æ†å¿ƒ</h2>
<p>ä¸‹æ±ºå¿ƒå»åšå¾ˆé›£ï¼Œä½†æŒä¹‹ä»¥æ†æ›´é›£ã€‚</p>
<p>å­¸ç¿’æŠ€è¡“å…¶å¯¦æ˜¯ä¸€æ¢å¾ˆæ¼«é•·çš„è·¯ï¼Œå¾ˆå¤šäººéƒ½æ˜¯ç‚ºäº†å·¥ä½œè€Œä¸å¾—ä¸å»å­¸ï¼›è€Œæœ‰äº›äººä¸€é–‹å§‹æ˜¯éå¸¸æœ‰èˆˆè¶£ï¼Œä½†åˆ°å¾Œé¢å°±ç™¼ç¾è‡ªå·±å…¶å¯¦æ ¹æœ¬åªæ˜¯ä¸‰åˆ†é˜ç†±åº¦è€Œå·²ã€‚è€Œæˆ‘å€‹äººå°æ–¼æœ‰äº›æŠ€è¡“ï¼Œå…¶å¯¦ä¹Ÿå¸¸æŠ±æœ‰åŒæ¨£çš„è§€å¿µï¼›æ‰€ä»¥æœ‰æ™‚é–“çš„è©±ï¼Œæˆ‘å¸¸æœƒå›é ­å»é‡çœ‹ä¸€äº›è§€å¿µå’ŒåŸºç¤çš„éƒ¨ä»½ã€‚ç•¢ç«Ÿä»¥å¾€æˆ‘çš„æ ¹ç´®å¾—ä¸å¤ æ·±ï¼Œå¦‚æœåªæ˜¯ä¸€å‘³åœ°å¾€ä¸Šæˆé•·ï¼Œåˆ°æ™‚å€™åªæ˜¯è®“è‡ªå·±å€’å¾—æ›´å¿«è€Œå·²ã€‚</p>
<p>è¨˜ä½ï¼Œè®“è‡ªå·±æ°¸é ä¿æŒåœ¨å­¸ç¿’çš„å¿ƒæ…‹ä¸Šï¼Œå› ç‚ºæˆ‘å€‘ä¸æ˜¯å¤©æ‰ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>é—œæ–¼æ¸¬è©¦é€™ä»¶äº‹</title>
			<link>https://jaceju.net/about-testing/</link>
			<pubDate>Fri, 14 May 2010 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/about-testing/</guid>
			<description>ç‚ºä»€éº¼è¦æ¸¬è©¦ï¼Ÿ å› ç‚ºæˆ‘å€‘æ²’è¾¦æ³•ä¿è­‰ç¨‹å¼ç¢¼æ˜¯è¬ç„¡ä¸€å¤±çš„ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘å€‘éƒ½æœƒéœ€è¦é©—è­‰æˆ‘å€‘çš„ç¨‹å¼ï¼Œè€Œæ¸¬è©¦å°±æ˜¯å…¶ä¸­ä¸€ç¨®æ–¹æ³•ã€‚å¾ˆå¤šå·¥ç¨‹å¸«éƒ½åœ¨å¯«å®Œç¨‹å¼ä¹‹å¾Œï¼Œ</description>
			<content type="html"><![CDATA[<h2 id="ç‚ºä»€éº¼è¦æ¸¬è©¦">ç‚ºä»€éº¼è¦æ¸¬è©¦ï¼Ÿ</h2>
<p>å› ç‚ºæˆ‘å€‘æ²’è¾¦æ³•ä¿è­‰ç¨‹å¼ç¢¼æ˜¯è¬ç„¡ä¸€å¤±çš„ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘å€‘éƒ½æœƒéœ€è¦é©—è­‰æˆ‘å€‘çš„ç¨‹å¼ï¼Œè€Œæ¸¬è©¦å°±æ˜¯å…¶ä¸­ä¸€ç¨®æ–¹æ³•ã€‚å¾ˆå¤šå·¥ç¨‹å¸«éƒ½åœ¨å¯«å®Œç¨‹å¼ä¹‹å¾Œï¼Œè‡ªå·±æ‰‹å‹•å»åšæ¸¬è©¦ï¼›å¦‚æœåŸ·è¡Œçµæœæ˜¯æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•å‡ºç¾å¾Œï¼Œé‚£éº¼ä»–å€‘é€šå¸¸å°±èªç‚ºç¨‹å¼æ²’éŒ¯äº†ã€‚</p>
<p>å¯æ˜¯ï¼Œå…¶å¯¦é€™æ¨£çš„ç¨‹å¼ç¢¼é€šå¸¸å°±æœƒèº²é€²å¾ˆå¤šå¾ˆå¤šçš„ Bug ã€‚æ‰€ä»¥æˆ‘å€‘è¦<!-- raw HTML omitted -->è®“ç¨‹å¼ç¢¼è‡ªå·±å‘Šè¨´æˆ‘å€‘å®ƒæ²’å•é¡Œï¼Œè€Œä¸æ˜¯æˆ‘å€‘è‡ªå·±å»æƒ³åƒå®ƒæ²’å•é¡Œ<!-- raw HTML omitted -->ã€‚</p>
<!-- raw HTML omitted -->
<p>ç•¶ç„¶æ¸¬è©¦ä¸¦ä¸æ˜¯è¬éˆä¸¹ï¼Œå®ƒåªæ˜¯å»é©—è­‰æˆ‘å€‘æ‰€è€ƒæ…®åˆ°çš„ç‹€æ³ï¼›ä½†å¦‚æœæŠ±æŒè‘—ã€Œæ—¢ç„¶æˆ‘éƒ½æœ‰è€ƒæ…®åˆ°ï¼Œè€Œä¸”ä¹Ÿå¯«åœ¨ç¨‹å¼ç¢¼è£¡ï¼Œé‚£é€™æ¨£å°±ä¸ç”¨æ¸¬è©¦äº†å‘€ï¼ã€çš„æ…‹åº¦ï¼Œé‚£å…¶å¯¦ä¹Ÿæ˜¯ç½é›£çš„æ ¹æºã€‚<!-- raw HTML omitted -->å› ç‚ºå¦‚æœæˆ‘å€‘æ²’æœ‰å¯«æ¸¬è©¦ä¾†é©—è­‰ç¨‹å¼ç¢¼çš„è©±ï¼Œé‚£æˆ‘å€‘çš„é˜²ç¯„æªæ–½æ ¹æœ¬å°±ä¸å€¼å¾—ä¿¡è³´ï¼<!-- raw HTML omitted --></p>
<p>æ‰€ä»¥ä¸æ˜¯æ‰‹å‹•æ¸¬è©¦éæ²’å•é¡Œï¼Œä¸‹æ¬¡å°±ä¸æœƒå†ç™¼ç”Ÿäº†ï¼›è€Œæ˜¯è¦æ‹¿å‡ºä¿è­‰ä¾†æ‰å€¼å¾—ç›¸ä¿¡ï¼Œè€Œæ¸¬è©¦å°±æ˜¯æˆ‘å€‘çš„ä¿è­‰ã€‚</p>
<h2 id="å¦‚ä½•ç¢ºä¿ç³»çµ±ç…§è‘—è¦æ ¼å¯¦ä½œ">å¦‚ä½•ç¢ºä¿ç³»çµ±ç…§è‘—è¦æ ¼å¯¦ä½œï¼Ÿ</h2>
<p>ç¬¦åˆå®¢æˆ¶æ‰€è¦æ±‚çš„è¦æ ¼ï¼Œå°±æ˜¯æˆ‘å€‘å¯¦ä½œç³»çµ±çš„æœ€çµ‚ç›®æ¨™ã€‚æœ‰äº›è¦æ ¼æ˜¯æµç¨‹çš„æ§åˆ¶ï¼Œæœ‰äº›è¦æ ¼æ˜¯è³‡æ–™çš„è™•ç†ï¼›ä½†é€™äº›å¦‚æœæ²’æœ‰ä¸€å¥—å¥½çš„æª¢é©—æ©Ÿåˆ¶ä¾†å”åŠ©æˆ‘å€‘ç¢ºèªé€™äº›è¦æ ¼çš„è©±ï¼Œæˆ‘å€‘å°±æ²’è¾¦æ³•æœ‰ç™¾åˆ†ä¹‹ç™¾çš„ä¿¡å¿ƒå‘Šè¨´å®¢æˆ¶èªªï¼Œæˆ‘å€‘çš„ç¨‹å¼å®Œæˆäº†ä½ å€‘çš„éœ€æ±‚ã€‚</p>
<p>è‡ªå‹•åŒ–æ¸¬è©¦å°±æ˜¯ä¸€å€‹æ–¹ä¾¿çš„æª¢é©—æ©Ÿåˆ¶ï¼Œè€Œæ¸¬è©¦æ¡ˆä¾‹å°±æ˜¯å®¢æˆ¶çš„è¦æ ¼ã€‚ç•¶æˆ‘å€‘çš„ç¨‹å¼é€šéæ¸¬è©¦å¾Œï¼Œæˆ‘å€‘ä¹Ÿå°±å¯ä»¥æ”¾å¿ƒæŠŠé€™äº›ç¨‹å¼ç¢¼ç”¨åœ¨å¯¦éš›çš„é–‹ç™¼ä¸­ï¼›å¦‚æœé€™æ™‚é‚„ç™¼ç¾åŸ·è¡Œçš„çµæœæœ‰å•é¡Œçš„è©±ï¼Œé€šå¸¸å°±å°±å¯ä»¥åˆ¤æ–·æ˜¯å¯¦éš›é–‹ç™¼çš„ç¨‹å¼ç¢¼ä¸­å‡ºç¾äº†éŒ¯èª¤ã€‚</p>
<p>ç•¶ç„¶æœ‰äº›å·¥ç¨‹å¸«æœƒèªç‚ºï¼šç‚ºä»€éº¼æˆ‘è¦æŠŠåŒæ¨£çš„ç¨‹å¼ç¢¼åœ¨æ¸¬è©¦æ¡ˆä¾‹å’Œå¯¦ä½œé‹ä½œçš„ç³»çµ±ä¸­å„å¯«ä¸€éï¼Ÿå…¶å¯¦é€™æ˜¯éŒ¯èª¤çš„è§€å¿µã€‚</p>
<p>æ¸¬è©¦æ¡ˆä¾‹åˆ†æˆå…©ç¨®ï¼šä¸€ç¨®æ˜¯åœ¨ç¨‹å¼æ­£å¸¸é‹ä½œä¸‹çš„æ¡ˆä¾‹ï¼Œå®ƒå€‘èƒ½æ˜ç¢ºå‘Šè¨´æˆ‘å€‘ç¨‹å¼çš„ä½¿ç”¨æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ¶è¦æ±‚çš„è¦æ ¼ï¼›ä¸€ç¨®æ˜¯è¨­æƒ³åˆ°å¯èƒ½æœƒè®“ç¨‹å¼å‡ºç¾å•é¡Œçš„æ¡ˆä¾‹ï¼Œå®ƒå€‘è€ƒé©—è‘—èº«ç‚ºå·¥ç¨‹å¸«æ‡‰è©²å»è¨­æƒ³åˆ°çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ã€‚</p>
<p>ç•¶å®¢æˆ¶æ–°å¢æˆ–ä¿®æ”¹äº†è¦æ ¼æ™‚ï¼Œé‚£éº¼æˆ‘å€‘çš„æ¸¬è©¦æ¡ˆä¾‹å°±è¦è·Ÿè‘—èª¿æ•´ã€‚<!-- raw HTML omitted -->è€Œæ²’æœ‰èª¿æ•´çš„éƒ¨ä»½ï¼Œæˆ‘å€‘å°±èƒ½é€éç¾æœ‰çš„æ¸¬è©¦æ¡ˆä¾‹ä¾†ç¢ºä¿èˆŠæœ‰ç¨‹å¼æŒ‰ç…§èˆŠçš„è¦æ ¼åŸ·è¡Œï¼Œç¢ºä¿æˆ‘å€‘çš„ç¨‹å¼æ²’æœ‰å› ç‚ºæ–°å¢æˆ–ä¿®æ”¹çš„åŠŸèƒ½è€Œå‡ºç¾é æ–™ä¹‹å¤–çš„éŒ¯èª¤ã€‚<!-- raw HTML omitted --></p>
<h2 id="æ€éº¼å¯«å‡ºå¥½æ¸¬è©¦">æ€éº¼å¯«å‡ºå¥½æ¸¬è©¦ï¼Ÿ</h2>
<p>å¥½çš„æ¸¬è©¦æ¡ˆä¾‹ä¾è³´è‘—å·¥ç¨‹å¸«çš„ç¶“é©—ï¼Œç¶“é©—è¶Šè±å¯Œçš„å·¥ç¨‹å¸«ï¼Œå°±èƒ½é æƒ³åˆ°å„ç¨®å¯èƒ½ç™¼ç”Ÿçš„ç‹€æ³ï¼Œä¸¦å¯«å‡ºå› æ‡‰çš„æ¸¬è©¦æ¡ˆä¾‹ã€‚ä¸éæœ‰ç¶“é©—çš„å·¥ç¨‹å¸«ç•¢ç«Ÿæ˜¯å°‘æ•¸ï¼Œæ‰€ä»¥å¤§å¤šæ•¸æ™‚å€™æˆ‘å€‘é‚„æ˜¯è¦æŒ‰æ­¥å°±ç­ï¼Œå¾æˆ‘å€‘èƒ½åšå¾—åˆ°çš„éƒ¨ä»½åšèµ·ã€‚</p>
<p>ä¸€é–‹å§‹æˆ‘å€‘å¯ä»¥å…ˆå°æ­£å¸¸çš„æµç¨‹ç·¨å¯«æ¸¬è©¦ï¼›è€Œåœ¨ç¨‹å¼é€šéæ­£å¸¸æ¸¬è©¦ä¹‹å¾Œï¼Œæˆ‘å€‘å†é‡å°æœ‰å¯èƒ½é€ æˆæˆ‘å€‘ç¨‹å¼èª¤å‹•ä½œçš„ç‹€æ³å»åŠ å…¥ç•°å¸¸çš„æ¸¬è©¦ã€‚æœ‰æ™‚å€™ Bug å¯èƒ½æ˜¯å› ç‚ºæ“ä½œæµç¨‹éŒ¯èª¤è€Œç”¢ç”Ÿï¼Œé‚£éº¼å°±è¦åœ¨æµç¨‹ä¸­çš„æ¯å€‹é—œå¡åšå¥½ç¨‹åºçš„æŠŠé—œã€‚</p>
<p>ä¾‹å¦‚æŸäº›é—œå¡è¦æœ‰é˜²å‘†æ©Ÿåˆ¶ï¼ŒæŸäº›é—œå¡ä¸èƒ½é‡è¦†åŸ·è¡Œï¼Œæˆ‘å€‘å°±å¿…é ˆå»é˜²æ­¢ç­‰ç­‰ã€‚æ¸¬è©¦ä¹‹æ‰€ä»¥è¦å¼·èª¿è‡ªå‹•åŒ–ï¼Œå°±æ˜¯è®“æˆ‘å€‘ä¸ç”¨æŠŠæ™‚é–“èŠ±åœ¨æ‰‹å‹•å»æ¨¡æ“¬ä½¿ç”¨è€…æ“ä½œçš„éç¨‹ï¼›è€Œä¸”æˆ‘å€‘å¯ä»¥é€éå°èª¿æ¸¬è©¦æ¡ˆä¾‹è£¡çš„æ¯å€‹è§¸ç™¼æ¢ä»¶çš„åŸ·è¡Œé †åºä¾†ç”¢ç”Ÿä¸åŒçš„æ¸¬è©¦æ–¹å¼ï¼Œä»¥æ‰¾å‡ºå¯èƒ½æ½›è—çš„æµç¨‹å•é¡Œã€‚</p>
<p>æœ‰æ™‚å€™æˆ‘å€‘çš„ç³»çµ±å¯èƒ½æœƒæœ‰å¤šå€‹ä½¿ç”¨è€…åŒæ™‚åœ¨æ“ä½œï¼Œå¦‚ä½•è®“ç¨ç«‹æ€§çš„è³‡æ–™ä¸äº’ç›¸å¹²æ“¾ï¼Œæˆ–æ˜¯é¿å…è³‡æ–™æ›´æ–°çš„å…ˆå¾Œé †åºå•é¡Œ (ä¾‹å¦‚å•†å“åº«å­˜) ï¼Œé€™éƒ½æ˜¯å¥½çš„æ¸¬è©¦æ‡‰è©²æ³¨æ„çš„é‡é»ã€‚</p>
<p>é‡è¦çš„æ˜¯ï¼Œæ¯å€‹æ¸¬è©¦æ¡ˆä¾‹æ˜¯è¦æœ‰æ„ç¾©çš„ï¼Œæˆ‘å€‘åœ¨æ’°å¯«æ¸¬è©¦ä¹‹å‰å°±è¦å…ˆåˆ†æå®ƒå€‘çš„å‰å› å¾Œæœï¼Œæ‰èƒ½æ“¬å®šå‡ºæ­£ç¢ºçš„æ¸¬è©¦æ–¹å‘ã€‚å¦‚æœè¦ºå¾—è‡ªå·±å¯«çš„æµç¨‹æ¸¬è©¦å¯èƒ½æœ‰ç›²é»æ™‚ï¼Œé‚£éº¼ä¹Ÿå¯ä»¥è«‹ä¼™ä¼´å¹«æˆ‘å€‘ä¸€èµ·æ€è€ƒå¯èƒ½çš„ç‹€æ³ã€‚</p>
<h2 id="æ¸¬è©¦å¤ªèŠ±æ™‚é–“">æ¸¬è©¦å¤ªèŠ±æ™‚é–“ï¼Ÿ</h2>
<p>åœ¨å¾ˆå¤š Web ç³»çµ±é–‹ç™¼çš„éç¨‹ä¸­ï¼Œå…¶å¯¦å¾ˆå°‘æœ‰äººæœƒå»è€ƒæ…®æ¸¬è©¦é€™ä»¶äº‹æƒ…ï¼›ä¸»è¦æ˜¯å› ç‚º Web ç³»çµ±ä¸­å¤§éƒ¨ä»½åªæ˜¯ç°¡å–®çš„ CRUD è€Œå·²ï¼ŒåŠ ä¸Šæ™‚ç¨‹çš„å£“åŠ›ï¼Œå°±æœƒè®“å¾ˆå¤šé–‹ç™¼äººå“¡æ”¾æ£„æ’°å¯«è‡ªå‹•åŒ–æ¸¬è©¦ã€‚</p>
<p>ä¸éåœ¨ä¸€å€‹è¼ƒå…·è¦æ¨¡çš„ç³»çµ±çš„è¦åŠƒèˆ‡è¨­è¨ˆéç¨‹ä¸­ï¼Œå°±æ‡‰è©²å°‡è‡ªå‹•åŒ–æ¸¬è©¦è€ƒæ…®é€²ä¾†ï¼›è€Œä¸”<!-- raw HTML omitted -->å³ä¾¿æœ‰æ™‚ç¨‹å£“åŠ›ï¼Œä¹Ÿæ‡‰è©²å°æ ¸å¿ƒåŠŸèƒ½æ’°å¯«æ¸¬è©¦æ¡ˆä¾‹ã€‚<!-- raw HTML omitted -->å°¤å…¶ç•¶æ ¸å¿ƒåŠŸèƒ½ç‰½æ‰¯åˆ°æœ‰é—œé‡‘æµç­‰ä¸å®¹æœ‰éŒ¯çš„éƒ¨ä»½æ™‚ï¼Œæ›´æ˜¯æ‡‰è©²ç”¨æ¸¬è©¦ä¾†åš´æ ¼æŠŠé—œã€‚</p>
<p>æ›´å¥½çš„æ–¹å¼æ˜¯å°‡æ’°å¯«æ¸¬è©¦çš„æ™‚é–“åœ¨ä¸€é–‹å§‹å°±æ”¾åˆ°æ™‚ç¨‹è¦åŠƒè£¡ï¼Œå…¶ä»–çš„å°±è®“å°ˆæ¡ˆç¶“ç†å»å‚·è…¦ç­‹ï¼Œå³ä¾¿æ˜¯åœ¨ç¶­è­·éšæ®µæ™‚ä¹Ÿæ˜¯å¦‚æ­¤ã€‚<!-- raw HTML omitted -->å› ç‚ºå¦‚æœå¤šèŠ±åŠå€‹å°æ™‚å¯«è‡ªå‹•åŒ–æ¸¬è©¦çš„è©±ï¼Œé‚£éº¼æœªä¾†æ‰¾ Bug çš„æ™‚é–“å°±è‡³å°‘å¯ä»¥æ¸›æ‰åŠå¤©ã€‚<!-- raw HTML omitted --></p>
<h2 id="æ—¢æœ‰çš„ç¨‹å¼è©²å¦‚ä½•æ¸¬è©¦">æ—¢æœ‰çš„ç¨‹å¼è©²å¦‚ä½•æ¸¬è©¦ï¼Ÿ</h2>
<p>å¦‚æœå¤§éƒ¨ä»½å·²ç¶“åœ¨é‹ä½œçš„ç¨‹å¼æ²’æœ‰å°æ‡‰çš„è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œè€Œåœ¨å®ƒå€‘ç™¼ç”Ÿå•é¡Œå°±è¦èŠ±å¾ˆå¤šæ™‚é–“ä¾†é™¤éŒ¯æ™‚ï¼Œå°±æ‡‰è©²è€ƒæ…®å®‰æ’æ™‚é–“é€²è¡Œé‡æ§‹èˆ‡æ’°å¯«æ¸¬è©¦ã€‚</p>
<p>é¦–å…ˆåœ¨ç¬¬ä¸€æ¬¡é‡æ§‹æ™‚ï¼Œå¯ä»¥å…ˆè€ƒæ…®æŠŠæ ¸å¿ƒé‚è¼¯ç¨ç«‹å‡ºä¾†ï¼›å¦‚æœé€™å€‹å‹•ä½œåœ¨åŸ·è¡Œä¸Šç›¸ç•¶å›°é›£çš„è©±ï¼Œé‚£éº¼å°±å…ˆå°‡è³‡æ–™æˆ–ç¶²è·¯å­˜å–çš„éƒ¨ä»½ç¨ç«‹å‡ºä¾†ã€‚é€™äº›å¤–åœ¨å› ç´ æˆ‘å€‘å¯ä»¥é€é Dependency Injection çš„æ–¹å¼ä¾†é‡æ§‹ï¼Œç„¶å¾Œåœ¨è‡ªå‹•åŒ–æ¸¬è©¦æ™‚ç”¨ Stub ç‰©ä»¶ä¾†ä»£æ›¿å®ƒå€‘ã€‚</p>
<p>ç•¶ç¨‹å¼é‡æ§‹è‡³ç„¡é—œå¤–åœ¨è®Šå› ï¼Œä¸”æ‰‹å‹•æ¸¬è©¦é€šéå¾Œï¼Œå°±å¯ä»¥é–‹å§‹è€ƒæ…®æ’°å¯«è‡ªå‹•åŒ–æ¸¬è©¦ï¼›é€™æ™‚é‚„æ˜¯è¦æŒ‰ç…§ã€Œå…ˆæ¸¬æ­£å¸¸æµç¨‹ï¼Œå†æ¸¬ç•°å¸¸æµç¨‹ã€çš„æ­¥é©Ÿä¾†é€²è¡Œã€‚è€Œå…¶ä¸­æ¸¬è©¦ç”¨çš„å‡è³‡æ–™å¯ä»¥å¾ç¾æœ‰çš„è³‡æ–™ä¸­ç”¢ç”Ÿï¼Œé€™äº›è³‡æ–™å› ç‚ºå·²ç¶“é€šéå®¢æˆ¶çš„é©—è­‰ï¼Œæ›´èƒ½ç¢ºä¿æ¸¬è©¦çš„å¯é æ€§ã€‚</p>
<p>å¦å¤–æœ‰äº›æ—¢æœ‰çš„éŒ¯èª¤æ˜¯å¿…é ˆåœ¨é•·æ™‚é–“æ‰èƒ½ç™¼ç¾ï¼Œé€™æ™‚å€™æˆ‘å€‘å¯èƒ½å°±è¦ç”¨æ¨æ¸¬çš„æ–¹å¼ä¾†æ’°å¯«æ¸¬è©¦æ¡ˆä¾‹ã€‚é€™æ¨£ä¸€ä¾†æœ‰å…©å€‹å¥½è™•ï¼Œå…¶ä¸€æ˜¯æˆ‘å€‘å°±å¯ä»¥è®“æ¸¬è©¦è‡ªå‹•åŒ–å»ä»£æ›¿æ‰‹å‹•æ¸¬è©¦çš„éƒ¨ä»½ï¼Œå…¶äºŒæ˜¯å¦‚æœæœªä¾†é‚„æ˜¯ç™¼ç”ŸåŒæ¨£å•é¡Œæ™‚ï¼Œæˆ‘å€‘ä¹Ÿèƒ½é€éé€™äº›æ¸¬è©¦ä¾†æ’é™¤æ‰å…ˆå‰æ¨æ¸¬å‡ºä¾†çš„å› ç´ ã€‚</p>
<h2 id="çµè«–">çµè«–</h2>
<p>å…¶å¯¦æˆ‘å€‘ä¹Ÿå¾ˆé›£ç™¾åˆ†ä¹‹ç™¾åœ°ä¿è­‰é€šéæ¸¬è©¦çš„ç¨‹å¼ç¢¼ä¸€å®šå®Œå…¨æ²’å•é¡Œï¼Œä½†å¾ˆé‡è¦çš„ä¸€é»å°±æ˜¯æˆ‘å€‘è‡³å°‘èƒ½<!-- raw HTML omitted -->ä¿è­‰<!-- raw HTML omitted -->é€šéæ¸¬è©¦çš„éƒ¨ä»½æ˜¯æœƒæŒ‰ç…§æˆ‘å€‘çš„æƒ³æ³•ä¾†åŸ·è¡Œã€‚</p>
<p>ä¸€å€‹å¥½çš„ç³»çµ±åœ¨äº¤åˆ°å®¢æˆ¶æ‰‹ä¸Šæ™‚ï¼Œå°±æ‡‰è©²è¦æœ‰ä¸€å®šçš„å“è³ªï¼›è€Œå“è³ªçš„ä¿è­‰ä¾†è‡ªæˆ‘å€‘çš„ä¿¡å¿ƒã€‚è‡³æ–¼æˆ‘å€‘çš„ä¿¡å¿ƒä¸¦ä¸æ˜¯å»ºæ§‹åœ¨æƒ³åƒä¹‹ä¸Šï¼Œè€Œæ˜¯æ‡‰è©²ç”¨å¯¦éš›çš„æ¸¬è©¦æ•¸æ“šä¾†åšç‚ºå®ƒçš„åŸºç¤ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>å¦‚ä½•åœ¨ PHP ä¸­å¹³é †åœ°è™•ç† Error åŠ Exception ï¼Ÿ</title>
			<link>https://jaceju.net/handle-php-error-and-exception/</link>
			<pubDate>Fri, 23 Apr 2010 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/handle-php-error-and-exception/</guid>
			<description>åœ¨é–‹ç™¼ PHP çš„æ™‚å€™ï¼Œæœ€éº»ç…©çš„äº‹æƒ…ä¹‹ä¸€å°±æ˜¯è™•ç†éŒ¯èª¤ã€‚ä¸€å€‹å¥½çš„ç¨‹å¼é™¤äº†è¦å°‡éŒ¯èª¤è¨Šæ¯å‘ˆç¾çµ¦ä½¿ç”¨è€…çŸ¥é“ä¹‹å¤–ï¼Œä¹Ÿè¦è®“è©²çµæŸçš„éƒ¨ä»½æ­£å¸¸çµæŸæ‰è¡Œã€‚ è€Œåœ¨ PHP5 ä¹‹å¾Œï¼Œ</description>
			<content type="html"><![CDATA[<p>åœ¨é–‹ç™¼ PHP çš„æ™‚å€™ï¼Œæœ€éº»ç…©çš„äº‹æƒ…ä¹‹ä¸€å°±æ˜¯è™•ç†éŒ¯èª¤ã€‚ä¸€å€‹å¥½çš„ç¨‹å¼é™¤äº†è¦å°‡éŒ¯èª¤è¨Šæ¯å‘ˆç¾çµ¦ä½¿ç”¨è€…çŸ¥é“ä¹‹å¤–ï¼Œä¹Ÿè¦è®“è©²çµæŸçš„éƒ¨ä»½æ­£å¸¸çµæŸæ‰è¡Œã€‚</p>
<p>è€Œåœ¨ PHP5 ä¹‹å¾Œï¼Œé™¤äº†ä»¥å¾€çš„ Error Handling ä¹‹å¤–ï¼Œé‚„å¤šäº† Exception Handling ï¼Œä½¿å¾—ç¨‹å¼è®Šå¾—æ›´é›£å»è™•ç†éŒ¯èª¤ï¼›æ‰€ä»¥å¤§å¤šæ•¸çš„é–‹ç™¼è€…åªèƒ½é›™æ‰‹ä¸€æ”¤ï¼Œè®“é€™äº›éŒ¯èª¤è¨Šæ¯å¤§å‰Œå‰Œåœ°å‡ºç¾åœ¨ä½¿ç”¨è€…é¢å‰ã€‚</p>
<p>æœ‰æ²’æœ‰ä»€éº¼å¥½æ–¹æ³•å¯ä»¥è®“æˆ‘å€‘å¥½å¥½æ§åˆ¶ Error å’Œ Exception å‘¢ï¼Ÿ</p>
<!-- raw HTML omitted -->
<h2 id="å‚³çµ±çš„åšæ³•">å‚³çµ±çš„åšæ³•</h2>
<p>åœ¨å¾ˆå¤šæ›¸ç±å’Œç¶²è·¯ç¯„ä¾‹è£¡ï¼Œç•¶ç¨‹å¼å‡ºéŒ¯æ™‚å°±æ˜¯è®“ç¨‹åºç›´æ¥æ­»æ‰ï¼Œæœ€å¸¸è¦‹çš„å°±æ˜¯è³‡æ–™åº«é€£ç·šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$link = mysql_connect(&#39;localhost&#39;, &#39;mysql_user&#39;, &#39;mysql_password&#39;);

if (!$link) {
    die(&#39;Could not connect: &#39; . mysql_error());
}

echo &#39;Connected successfully&#39;;
mysql_close($link);
</code></pre></div><p>æˆ–æ˜¯åœ¨é€å‡ºå°å‘ header å¾Œï¼Œå°±ç›´æ¥ exit ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">header(&#34;Location: http://www.example.com/&#34;); /* Redirect browser */
/* Make sure that code below does not get executed when we redirect. */
exit;
</code></pre></div><p>é€™äº›éƒ½ä¸æ˜¯å¥½åšæ³•ï¼Œå› ç‚ºæœ‰äº›æµé‡è¼ƒå¤§çš„ç¶²ç«™è£¡å¯èƒ½æœ‰å¤šå€‹è³‡æ–™åº«é€£ç·šï¼Œæˆ–æ˜¯æª”æ¡ˆçš„ handler ä»åœ¨é–‹å•Ÿä¸­ï¼›å¦‚æœç›´æ¥è®“ç¨‹åºæ­»äº¡æˆ–é›¢é–‹çš„è©±ï¼Œå°±æ²’è¾¦æ³•å°‡é€™äº›å·²ç¶“é–‹å•Ÿçš„è³‡æºçµ¦æ­£å¸¸é—œé–‰æ‰ï¼Œé€²è€Œé€ æˆç³»çµ±çš„ä¸ç©©å®šã€‚</p>
<h2 id="exception-çš„è™•ç†">Exception çš„è™•ç†</h2>
<p>PHP5 ä¸­ï¼Œæœ‰å€‹ <a href="http://www.php.net/manual/en/function.set-exception-handler.php"><code>set_exception_handler</code></a> é€™å€‹å‡½å¼ï¼Œå®ƒå¯ä»¥å¹«æˆ‘å€‘è™•ç† Exception ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function exception_handler($exception)
{
    echo &#34;Uncaught exception: &#34; , $exception-&gt;getMessage(), &#34;\n&#34;;
}

set_exception_handler(&#39;exception_handler&#39;);
throw new Exception(&#39;Uncaught Exception&#39;);
echo &#34;Not Executed\n&#34;;
</code></pre></div><p>ä¸éæˆ‘å€‹äººèªç‚ºç”¨ <a href="http://www.php.net/manual/en/language.exceptions.php"><code>try...catch</code></a> æœƒè®“æˆ‘å€‘åœ¨ç¨‹å¼æµç¨‹ä¸Šçš„å½ˆæ€§æ›´å¤§ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function inverse($x)
{
    if (!$x) {
        throw new Exception(&#39;Division by zero.&#39;);
    }
    else return 1/$x;
}

try {
    echo inverse(5) . &#34;\n&#34;;
    echo inverse(0) . &#34;\n&#34;;
} catch (Exception $e) {
    echo &#39;Caught exception: &#39;,  $e-&gt;getMessage(), &#34;\n&#34;;
}

// Continue execution
echo &#39;Hello World&#39;;
</code></pre></div><p>è€Œåœ¨æˆ‘ç ”ç©¶é Zend Framework çš„åšæ³•å¾Œï¼Œç™¼ç¾å®ƒåœ¨è™•ç† Exception ä¸Šæ›´åŠ è°æ˜ã€‚ Zend Framework åœ¨ Controller ä¸­å¼•å…¥ä¸€å€‹ Response ç‰©ä»¶ï¼Œæ‰€æœ‰å°ç€è¦½å™¨çš„è¼¸å‡ºéƒ½è¦ç¶“éå®ƒ (ä¾‹å¦‚ Header ã€ Content Body ç­‰ç­‰) ï¼›è€Œé€™å€‹ Reponse ç‰©ä»¶ä¹ŸåŒæ™‚æ§ç®¡è‘— Exception æ˜¯å¦è¦è¢«è¼¸å‡ºåˆ°ç€è¦½å™¨ç«¯ï¼Œè®“ç¨‹å¼é–‹ç™¼è€…èƒ½æœ‰æ›´å¤§çš„ç©ºé–“è™•ç† Exception ã€‚</p>
<p>ä»¥ä¸‹æˆ‘ç°¡å–®æŠŠ Zend Framework åœ¨ Response ç‰©ä»¶ä¸­è™•ç† Exception çš„æ¦‚å¿µæ•´ç†æˆä¸€å€‹è‡ªè£½çš„ <code>Response</code> é¡åˆ¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Response
{
    private $_exceptions = array();

    private $_renderExceptions = false;

    public function setException(Exception $e)
    {
        $this-&gt;_exceptions[] = $e;
    }

    public function getExceptions()
    {
        return $this-&gt;_exceptions;
    }

    public function isException()
    {
        return !empty($this-&gt;_exceptions);
    }

    public function renderExceptions($flag = null)
    {
        if (null !== $flag) {
            $this-&gt;_renderExceptions = $flag ? true : false;
        }
        return $this-&gt;_renderExceptions;
    }

    public function sendResponse()
    {
        echo &#34;Header sending...\n&#34;;
        $exception = &#39;&#39;;
        if ($this-&gt;isException() <span class="ni">&amp;amp;&amp;amp;</span> $this-&gt;renderExceptions()) {
            foreach ($this-&gt;getExceptions() as $e) {
                $exception .= $e-&gt;getMessage() . &#34;\n&#34;;
            }
            echo $exception;
        }
        echo &#34;Body sending...\n&#34;;
    }
}
</code></pre></div><p>ä¸»è¦çš„æ¦‚å¿µå¾ˆç°¡å–®ï¼Œå°±æ˜¯ Response ç‰©ä»¶å…ˆæŠŠ Exception å…ˆæ”¶é›†èµ·ä¾†ï¼Œç„¶å¾Œå†è¦–ç‹€æ³å¦‚ä½•è™•ç†ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$response = new Response();
$response-&gt;renderExceptions(true); // è®“ Exception å‘ˆç¾å‡ºä¾†

try {
    // é€™è£¡è™•ç†æˆ‘å€‘çœŸæ­£è¦åŸ·è¡Œçš„å‹•ä½œ
    throw new Exception(&#39;TEST&#39;); // ä¸Ÿå‡ºä¸€å€‹æ¸¬è©¦ç”¨çš„ä¾‹å¤–
} catch (Exception $e) {
    $response-&gt;setException($e); // æ”¶é›†ä¾‹å¤–
}

if ($response-&gt;isException()) {
    // å¯ä»¥åœ¨é€™è£¡è¨˜éŒ„ Exception
}

$response-&gt;sendResponse(); // é¡¯ç¤ºæ‰€æœ‰çµæœ (åŒ…å« Header, Exception, Body ç­‰)
</code></pre></div><p>é€éäº† Response ç‰©ä»¶ä¾†ç®¡ç† Exception ï¼Œå°±å¯ä»¥ä¸å¿…å› ç‚º Exception è€Œä¸­æ–·æˆ‘å€‘çš„ç¨‹å¼ç¢¼ã€‚</p>
<h2 id="php-error-çš„è™•ç†">PHP Error çš„è™•ç†</h2>
<p>é›–ç„¶ Exception å¯ä»¥ç”¨ <code>try...catch</code> æ§åˆ¶ç¨‹å¼æµç¨‹ï¼Œä½† PHP Error å»ä¸è¡Œã€‚</p>
<p>å› ç‚ºä¸€èˆ¬è™•ç† PHP Error çš„æ–¹æ³•æ˜¯é€é <a href="http://www.php.net/manual/en/function.set-error-handler.php">set_error_handler</a>ï¼Œè€Œç•¶åŸ·è¡Œå®Œè‡ªè¨‚çš„ Error Handler å¾Œï¼Œæˆ‘å€‘å»åªèƒ½é¸æ“‡ç¹¼çºŒåŸ·è¡Œä¸‹ä¸€è¡Œç¨‹å¼ç¢¼æˆ–å°‡ç¨‹å¼ä¸­æ–·é›¢é–‹ï¼Œä¸ç„¶å°±æ˜¯è¦åˆ©ç”¨å…¨åŸŸè®Šæ•¸ä¾†è¨­å®šéŒ¯èª¤æ——æ¨™ä»¥é”åˆ°æ§åˆ¶çš„ç›®çš„ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$error = false;

function exceptionErrorHandler($errno, $errstr, $errfile, $errline)
{
    global $error;
    $error = true;
    echo $errstr, &#34;\n&#34;;
    return true;
}

set_error_handler(&#34;exceptionErrorHandler&#34;);
strpos();

if (!$error) {
    echo &#34;Do normal process here.\n&#34;;
}
echo &#34;end.\n&#34;;
</code></pre></div><p>ä¸é PHP5 ä¹Ÿå¹«æˆ‘å€‘æƒ³å¥½äº†ï¼Œæˆ‘å€‘å¯ä»¥åœ¨ Error Handler è£¡ä¸Ÿå‡º <a href="http://www.php.net/manual/en/class.errorexception.php">ErrorException</a> ï¼Œå°±å¯ä»¥é…åˆå‰é¢æåˆ°çš„ Response ç‰©ä»¶åšåˆ°æ›´å¹³é †çš„ Exception è™•ç†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function exceptionErrorHandler($errno, $errstr, $errfile, $errline )
{
    throw new ErrorException($errstr, 0, $errno, $errfile, $errline);
}

set_error_handler(&#34;exceptionErrorHandler&#34;);
$response = new Response();
$response-&gt;renderExceptions(true); // è®“ Exception å‘ˆç¾å‡ºä¾†

try {
    // é€™è£¡è™•ç†æˆ‘å€‘çœŸæ­£è¦åŸ·è¡Œçš„å‹•ä½œ
    trigger_error(&#39;TEST&#39;, E_USER_ERROR); // æ”¹ç”¨ trigger_error ä¾†ä¸Ÿå‡ºæ¸¬è©¦ç”¨éŒ¯èª¤
} catch (Exception $e) {
    $response-&gt;setException($e); // æ”¶é›†ä¾‹å¤–
}

if ($response-&gt;isException()) {
    // å¯ä»¥åœ¨é€™è£¡è¨˜éŒ„ Exception
}
$response-&gt;sendResponse(); // é¡¯ç¤ºæ‰€æœ‰çµæœ (åŒ…å« Header, Exception, Body ç­‰)
</code></pre></div><p>é€™é‚Šæœ€æ£’çš„æ˜¯ Error Handler ä¸Ÿå‡º <code>ErrorException</code> å¾Œï¼Œ <code>try...catch</code> å°±æœƒç™¼ç”Ÿä½œç”¨ï¼Œè€Œä¸å†åƒ <code>set_error_handler</code> é€™æ¨£åˆè¿”å›ä¸­æ–·çš„åœ°æ–¹ç¹¼çºŒåŸ·è¡Œï¼Œä¸€åˆ‡å°±åƒè¡Œé›²æµæ°´èˆ¬é‚£éº¼è‡ªç„¶ã€‚</p>
<h2 id="çµè«–">çµè«–</h2>
<p>ä¸€å€‹é‹ä½œè‰¯å¥½çš„ç³»çµ±å¿…é ˆè¦å°éŒ¯èª¤çš„ç™¼ç”Ÿæœ‰æœ€å¤§çš„æŒæ§æ¬Šï¼Œè€Œä¸æ˜¯æ”¾ä»»å®ƒè®“ç³»çµ±å¢œæ¯€åœ¨äº”é‡Œéœ§ä¹‹ä¸­ã€‚</p>
<p>é›–ç„¶å‰é¢æåˆ°çš„è™•ç†æ–¹å¼ä¹Ÿè¨±ä¸æ˜¯æœ€ä½³çš„ï¼Œä½†å¸Œæœ›é€éé€™æ¨£çš„ä»‹ç´¹ï¼Œè®“å¤§å®¶èƒ½å¤ æ€è€ƒè‡ªå·±çš„ç¨‹å¼æ‡‰è©²å¦‚ä½•å»è™•ç†éŒ¯èª¤é€™ä»¶äº‹ã€‚</p>
<p>å°±å¯«åˆ°é€™è£¡å§ï¼Œæ”¶å·¥~</p>
]]></content>
		</item>
		
		<item>
			<title>ç‚ºä»€éº¼å°ç£çš„å·¥ç¨‹å¸« / è¨­è¨ˆå¸«å¸¸å¸¸åŠ ç­ï¼Ÿ</title>
			<link>https://jaceju.net/why-engineer-or-designer-are-always-work-overtime-in-taiwan/</link>
			<pubDate>Thu, 01 Apr 2010 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/why-engineer-or-designer-are-always-work-overtime-in-taiwan/</guid>
			<description>åŠ ç­ã€åŠ ç­ï¼Œåœ¨å°ç£çš„å·¥ç¨‹å¸«æˆ–è¨­è¨ˆå¸«çš„ç”Ÿæ´»è£¡ï¼Œå®ƒå·²ç¶“æ˜¯å€‹ç¿’ä»¥ç‚ºå¸¸çš„äº‹æƒ…äº†ã€‚ä½†æ˜¯ç‚ºä»€éº¼è¦åŠ ç­å‘¢ï¼Ÿ åœ¨æœ¬äººä¸ç®—é•·çš„è·æ¥­ç”Ÿæ¶¯ä¸­ï¼Œæˆ‘æ‰¾å‡ºäº†å¹¾å€‹å¸¸åŠ ç­çš„åŸ</description>
			<content type="html"><![CDATA[<p>åŠ ç­ã€åŠ ç­ï¼Œåœ¨å°ç£çš„å·¥ç¨‹å¸«æˆ–è¨­è¨ˆå¸«çš„ç”Ÿæ´»è£¡ï¼Œå®ƒå·²ç¶“æ˜¯å€‹ç¿’ä»¥ç‚ºå¸¸çš„äº‹æƒ…äº†ã€‚ä½†æ˜¯ç‚ºä»€éº¼è¦åŠ ç­å‘¢ï¼Ÿ</p>
<p>åœ¨æœ¬äººä¸ç®—é•·çš„è·æ¥­ç”Ÿæ¶¯ä¸­ï¼Œæˆ‘æ‰¾å‡ºäº†å¹¾å€‹å¸¸åŠ ç­çš„åŸå› &hellip;å¦‚æœ‰é›·åŒï¼Œç´”å±¬æ•…æ„&hellip;</p>
<!-- raw HTML omitted -->
<h2 id="å‰äººç¨®æ¨¹å¾Œäººç æ¨¹">å‰äººç¨®æ¨¹ï¼Œå¾Œäºº&hellip;ç æ¨¹</h2>
<p>å‰›æ¥ä¸‹ä¸€å€‹ç”±å‰äººç•™ä¸‹çš„æ¡ˆå­ï¼Œä½ ç™¼ç¾ç¨‹å¼è£¡æ²’æœ‰è¨»è§£ï¼Œæ–‡ä»¶ä¹Ÿåªæœ‰ä¼åŠƒé‚£é‚Šå¯¥å¯¥å¹¾å¼µè‰åœ–ï¼›ä½ åªèƒ½å†æ‰¾ä¼åŠƒé–‹ä¸€æ¬¡æœƒï¼Œç­è§£é€™å€‹æ¡ˆå­åˆ°åº•æ˜¯å•¥é¬¼ã€‚</p>
<p>é–‹å®Œæœƒå›åˆ°åº§ä½ä¸Šå¾Œï¼Œä½ åªèƒ½æŠŠå‰äººå¯«çš„ç¨‹å¼ä¸Ÿåˆ°äº†åƒåœ¾ç­’è£¡ï¼Œè‡ªå·±å¦èµ·çˆç¶ã€‚</p>
<h2 id="ä¸å¯èƒ½çš„ä»»å‹™æ°¸é æ˜¯å®¢æˆ¶å¿ƒä¸­çš„æœ€æ„›">ã€Œä¸å¯èƒ½çš„ä»»å‹™ã€æ°¸é æ˜¯å®¢æˆ¶å¿ƒä¸­çš„æœ€æ„›</h2>
<p>å®¢æˆ¶èŠ±äº†åŠå¤©é–‹æœƒä¾†ç•«ä»–çš„é¤…ï¼Œè€Œç•¶ä½ å¿ƒä¸­ç›¤ç®—è‘—é€™äº›åŠŸèƒ½å¤§æ¦‚è¦èŠ±å…©å¤©æ‰èƒ½å®Œæˆæ™‚ï¼Œä»–æœƒå‘Šè¨´ä½ é€™äº›åŠŸèƒ½<!-- raw HTML omitted -->æ˜å¤©<!-- raw HTML omitted -->å°±è¦ã€‚</p>
<p>å¾ˆä¸å·§åœ°ï¼Œä½ çš„ä¸»ç®¡ä¹Ÿå¸¸æœƒå¹¹é€™ç¨®äº‹ã€‚</p>
<h2 id="æˆåŠŸç”·äººçš„èƒŒå¾Œç¸½æ˜¯æœ‰å€‹ç¾éº—çš„å¥³äºº">æˆåŠŸç”·äººçš„èƒŒå¾Œç¸½æ˜¯æœ‰å€‹ç¾éº—çš„å¥³äºº</h2>
<p>è€é—†ç¸½æ˜¯åœ¨ä½ å¿™å¾—ä¸å¯é–‹æ”¯æ™‚ï¼Œå¸¶è‘—ä»–é‚£äº”æ­²çš„å°æœ‹å‹ä¾†å…¬å¸ã€‚</p>
<p>ç‚ºäº†é€™å€‹æœˆçš„çé‡‘ï¼Œä½ ä¸å¾—ä¸ç•¶èµ·å…è²»çš„ä¿å§†ã€‚ç•¶ä½ å•èµ·å°æœ‹å‹ç‚ºä»€éº¼ä»Šå¤©æ”¾å­¸æ²’æœ‰ç›´æ¥å›å®¶ï¼Ÿä»–å‘Šè¨´ä½ ï¼š</p>
<p>ã€Œåª½åª½é€™æ˜ŸæœŸè¦å»ä¸Šèˆè¹ˆèª²ã€‚ã€</p>
<h2 id="æœ‰éŒ¢èƒ½ä½¿æ¨ç£¨çš„äººè®Šé¬¼">æœ‰éŒ¢èƒ½ä½¿æ¨ç£¨çš„äººè®Šé¬¼</h2>
<p>ç•¶ä½ å¥½ä¸å®¹æ˜“åœ¨æœŸé™å‰è¶•å®Œæ¡ˆå­å¾Œï¼Œæ‰“ç®—è«‹å‡å¥½å¥½ä¼‘é¤Šå€‹å…©å¤©ã€‚</p>
<p>é€™æ™‚ä½ æ¡Œä¸Šçš„åˆ†æ©Ÿç¸½æ˜¯æœƒé©æ™‚çš„éŸ¿èµ·ï¼Œç„¶å¾Œä½ çš„æ¥­å‹™å°±æœƒå‘Šè¨´ä½ ï¼šã€Œä¸å¥½æ„æ€ï¼Œå®¢æˆ¶è‡¨æ™‚æ”¹è®Šä¸»æ„ï¼Œèªªæ•´å€‹ç¶²ç«™çš„é¢¨æ ¼è¦åšèª¿æ•´ã€‚ã€</p>
<p>é€™æ˜¯å› ç‚ºå®¢æˆ¶çš„å¤§è‚¡æ±æ˜¨å¤©é–‹å®Œæœƒï¼Œä»–å€‘è¦ºå¾—éŸ“åœ‹é¢¨çš„ç¶²ç«™æ¯”è¼ƒå¥½çœ‹ã€‚</p>
<h2 id="ä¸€è«¾å€¼åƒé‡‘åªæ˜¯ä»Šå¤©æ˜¯æ„šäººç¯€">ä¸€è«¾å€¼åƒé‡‘ï¼Œåªæ˜¯ä»Šå¤©æ˜¯æ„šäººç¯€</h2>
<p>ä½ çš„ä¸»ç®¡å‘Šè¨´ä½ ï¼Œå¦‚æœé€™æ¬¡é€™å€‹é ä¼°å…©å€‹æœˆçš„æ¡ˆå­å¯ä»¥åœ¨ä¸€å€‹æœˆä¹‹å…§æå®šçš„è©±ï¼Œä¸Šé¢æœƒç™¼çµ¦å¤§å®¶ä¸€ç­†å¾ˆè±æ¸¥çš„çé‡‘ã€‚</p>
<p>åªæ˜¯åœ¨ä½ çˆ†è‚è¶•å®Œæ¡ˆå­ä¹‹å¾Œï¼Œå»è½åˆ°å› ç‚ºå®¢æˆ¶é ç®—çš„é—œä¿‚è€Œå–æ¶ˆé€™å€‹æ¡ˆå­ï¼Œæ‰€ä»¥ä¹Ÿæ²’æœ‰çé‡‘äº†ã€‚</p>
<p>è€Œä½ çš„ä¸»ç®¡ä»Šå¤© (4/1) ç­”æ‡‰ä½ ï¼Œåœ¨ä¸‹æ¬¡æ¡ˆå­è£¡çµ¦ä½ é›™å€çš„çé‡‘ã€‚</p>
<h2 id="ç®¡ç†åªæ˜¯å€‹åè©ä¸æœƒæ˜¯å‹•è©æ›´ä¸æœƒæ˜¯é€²è¡Œå¼">ç®¡ç†åªæ˜¯å€‹åè©ï¼Œä¸æœƒæ˜¯å‹•è©ï¼Œæ›´ä¸æœƒæ˜¯é€²è¡Œå¼</h2>
<p>ä¸‰å¤©å‰ï¼Œè€é—†åœ¨ç¶²è·¯ä¸Šçœ‹åˆ°ä¸€ç¯‡æœ‰é—œç®¡ç†çš„æ–‡ç« ï¼Œæ‰€ä»¥ç™¼ä¿¡è¦å¤§å®¶æ¯å¤©ä¸‹ç­å‰èŠ±ä¸€å€‹å°æ™‚è¨˜éŒ„ä»Šæ—¥å·¥ä½œäº‹é …ï¼Œä¸¦å›å ±çµ¦ä¸»ç®¡ã€‚</p>
<p>æ˜¨å¤©ä½ ç¶“éè€é—†è¾¦å…¬å®¤æ™‚ï¼Œé¤˜å…‰ç„åˆ°ä½ çš„å·¥ä½œå ±è¡¨è¢«æ”¾åœ¨é–€å£é‚£å€‹ç´™é¡å›æ”¶ç®±è£¡ã€‚</p>
<p>è€Œä»–ä»Šå¤©å·²ç¶“å¾¹åº•å¿˜è¨˜é€™ä»¶äº‹ï¼Œç›®å‰äººåœ¨æ—¥æœ¬æ¸¡å‡äº†ã€‚</p>
<h2 id="äººäººå¿ƒä¸­éƒ½æœ‰ä¸é¡˜é¢å°çš„çœŸç›¸">äººäººå¿ƒä¸­éƒ½æœ‰ä¸é¡˜é¢å°çš„çœŸç›¸</h2>
<p>ä½ åœ¨é›»è…¦é–‹æ©Ÿå¾Œï¼Œå¿…é ˆèŠ±ä¸€å€‹å°æ™‚åœ¨å™—æµªæˆ– MSN ä¸Šï¼Œè·Ÿå™—å‹æˆ–åŒäº‹è¨è«–éº¥æ‰£åˆè¢«æ’é£›å¤šé ï¼Œæ‰æœ‰å¿ƒæƒ…å·¥ä½œã€‚</p>
<p>åˆé¤æ™‚ï¼Œä½ çœ‹åˆ°äº†é›»è¦–ä¸Šæ°æ°è¢«æ©˜çˆ†ï¼Œæ‰€ä»¥åˆåœ¨ä¸‹åˆä¸Šç­å‰é–‹å¿ƒåœ°è·Ÿå™—å‹æˆ–åŒäº‹èŠäº†èµ·ä¾†ï¼Œæƒ³æ’éé£¯å¾Œé‚£æ„›ççš„ä¸€å°æ™‚&hellip;</p>
<p>æ‰€ä»¥åŠ ç­ä¹Ÿæ˜¯å‰›å¥½è€Œå·²ã€‚</p>
<h2 id="é‚„æœ‰æ›´å¤šåŸå› å—">é‚„æœ‰æ›´å¤šåŸå› å—ï¼Ÿ</h2>
<p>æ­¡è¿æ’¥æ‰“è¢å¹•ä¸‹æ–¹çš„é›»è©±è™Ÿç¢¼å ±åšå“‡å“‰&hellip;</p>
]]></content>
		</item>
		
		<item>
			<title>PHPUnit å¯¦å‹™å…¥é–€ç°¡ä»‹</title>
			<link>https://jaceju.net/head-first-phpunit/</link>
			<pubDate>Tue, 16 Mar 2010 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/head-first-phpunit/</guid>
			<description>è¨»ï¼šæœ¬æ–‡æ‰€æåŠçš„è§€å¿µèˆ‡æŠ€å·§å·²ç¶“ä¸é©ç”¨åœ¨ç›®å‰çš„ PHPUnit ï¼Œé€™è£¡åªæ˜¯ç‚ºäº†è¨˜éŒ„è‡ªå·±å­¸ç¿’éçš„å¿ƒå¾—ã€‚ é€™å¹¾å¤©åœ¨å¯«æŠ˜åƒ¹åˆ¸æ”¤æåˆ°å•†å“çš„æ•¸å­¸æ¼”ç®—æ³•é‚è¼¯ï¼Œæå¾—æˆ‘ä¸ƒè‘·å…«ç´ </description>
			<content type="html"><![CDATA[<p>è¨»ï¼šæœ¬æ–‡æ‰€æåŠçš„è§€å¿µèˆ‡æŠ€å·§å·²ç¶“ä¸é©ç”¨åœ¨ç›®å‰çš„ PHPUnit ï¼Œé€™è£¡åªæ˜¯ç‚ºäº†è¨˜éŒ„è‡ªå·±å­¸ç¿’éçš„å¿ƒå¾—ã€‚</p>
<p>é€™å¹¾å¤©åœ¨å¯«æŠ˜åƒ¹åˆ¸æ”¤æåˆ°å•†å“çš„æ•¸å­¸æ¼”ç®—æ³•é‚è¼¯ï¼Œæå¾—æˆ‘ä¸ƒè‘·å…«ç´ çš„&hellip;é‚„å¥½å…ˆå‰åœ¨è£½ä½œè³¼ç‰©è»Šæ™‚ï¼Œå·²ç¶“æŠŠå–®å…ƒæ¸¬è©¦æ”¾åˆ°æ¶æ§‹è£¡ï¼Œå› æ­¤å¾Œé¢å°±åªè¦å°ˆå¿ƒæ‡‰ä»˜æ¼”ç®—æ³•é‚è¼¯å°±å¥½äº†ã€‚</p>
<p>é›–ç„¶é€™æ¨£çš„è¦åŠƒè½èµ·ä¾†ä¸éŒ¯ï¼Œä½†å–®å…ƒæ¸¬è©¦é€™ä»¶äº‹èªªåˆ°åº•æˆ‘çš„å¯¦å‹™ç¶“é©—é‚„æ˜¯å¤ªå°‘ï¼Œåœ¨é€™æ¬¡çš„å°ˆæ¡ˆé …ç›®è£¡ï¼Œæ‰è®“æˆ‘çœŸæ­£æœ‰äº†è¼ƒç‚ºæ·±å…¥çš„é«”æœƒã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å…ˆå°è¦æ¸¬è©¦çš„äº‹æƒ…æœ‰ä¸€å€‹æ¦‚è§€">å…ˆå°è¦æ¸¬è©¦çš„äº‹æƒ…æœ‰ä¸€å€‹æ¦‚è§€</h2>
<p>å…¶å¯¦æ¸¬è©¦ä¸€é–‹å§‹çœŸçš„å¾ˆé›£ä¸‹æ‰‹ï¼Œä¸»è¦æ˜¯å› ç‚ºæˆ‘å€‘ä¸çŸ¥é“æˆ‘å€‘è¦æ¸¬äº›ä»€éº¼æ±è¥¿ã€‚å› æ­¤ï¼Œæˆ‘å€‘éœ€è¦å°éœ€è¦æ¸¬è©¦çš„æ±è¥¿æœ‰å€‹æ¦‚è§€ã€‚</p>
<p>å°±ä»¥é€™æ¬¡çš„ä¾‹å­ä¾†èªªå§ï¼Œæˆ‘è¦æ¸¬è©¦çš„æ±è¥¿å°±æ˜¯ã€ŒæŠ˜åƒ¹åˆ¸æ”¤æçš„æ¼”ç®—æ³•é‚è¼¯ã€ï¼Œé‚£å®ƒè£¡é¢é‡è¦çš„æ±è¥¿æ˜¯ä»€éº¼ï¼Ÿ</p>
<p>åœ¨è·Ÿå®¢æˆ¶è¨è«–ï¼Œæˆ‘å€‘å¾—çŸ¥æŠ˜åƒ¹åˆ¸é¢é¡è¦åˆ†æ”¤åˆ°çš„å•†å“ä¸Šæ™‚æœ‰ä¸€å®šçš„è¦å‰‡ï¼›é€™æ™‚æˆ‘å€‘å°±è¦å…ˆåœ¨ç´™ä¸Šä½œæ¥­ï¼Œç”¨ç°¡å–®çš„ä¾‹å­è·Ÿå®¢æˆ¶ç¢ºèªæ¸…æ¥šè¦å‰‡ã€‚</p>
<p><a href="/resources/phpunit/draft.jpg"><img src="/resources/phpunit/draft.jpg" alt="è‰åœ–"></a></p>
<p>ç¢ºèªäº†æ–¹å‘ä¹‹å¾Œï¼Œå› ç‚ºæˆ‘ä¹‹å‰å·²ç¶“æ¸¬è©¦æ¶æ§‹æº–å‚™å¥½äº†ï¼Œæ‰€ä»¥æ¥ä¸‹ä¾†å°±åªè¦é‡å°è¦æ¸¬è©¦çš„éƒ¨ä»½æ’°å¯«ç¨‹å¼ç¢¼å³å¯ã€‚ä½†å¦‚æœä¸€é–‹å§‹é‚„æ²’æœ‰æº–å‚™å¥½æ¸¬è©¦æ¶æ§‹çš„è©±ï¼Œé€™è£¡çµ¦å¤§å®¶å¹¾å€‹å»ºç½®ç’°å¢ƒçš„ç°¡æ˜“æµç¨‹ï¼š</p>
<ul>
<li>
<p>åœ¨å°ˆæ¡ˆè£¡é–‹å€‹ <code>tests</code> è³‡æ–™å¤¾ï¼Œé€™è£¡å°±æ˜¯æ”¾ç½®æ¸¬è©¦æ¡ˆä¾‹çš„åœ°æ–¹ã€‚</p>
</li>
<li>
<p>æº–å‚™ä¸€å€‹ <code>init.php</code> ï¼Œç›®çš„æ˜¯ç”¨ä¾†è¨­ç½® <code>include_path</code> åŠ <code>autoload</code> æ©Ÿåˆ¶ã€‚</p>
</li>
<li>
<p>æŒ‰ç…§ PHPUnit å®˜æ–¹çš„å»ºè­°ï¼Œå»ºç«‹ä¸€å€‹ AllTests.php çš„ Test Suite ã€‚</p>
</li>
</ul>
<p>è¨»ï¼šé€™è£¡æˆ‘å°±ä¸åˆ—å‡ºç¨‹å¼ç¢¼äº†ï¼Œè®“å¤§å®¶è‡ªå·±è©¦è©¦çœ‹ã€‚</p>
<p>ç„¶å¾Œæ¯æ¬¡æ¸¬è©¦å°±ç”¨ä»¥ä¸‹æŒ‡ä»¤å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">&gt; phpunit AllTests.php
</code></pre></div><p>ä¹‹å¾Œæˆ‘æœƒä»¥ã€Œè·‘æ¸¬è©¦ã€ä¾†è¡¨ç¤ºåŸ·è¡Œé€™å€‹æŒ‡ä»¤ã€‚</p>
<h2 id="æç¹ªç¨‹å¼çš„è¼ªå»“">æç¹ªç¨‹å¼çš„è¼ªå»“</h2>
<p>æ¥ä¸‹ä¾†æˆ‘å€‘å°±è¦æŠŠæ•´å€‹ç³»çµ±çš„æ¸¬è©¦æ¶æ§‹å®šç¾©å‡ºä¾†ï¼Œä¸éé€™æ™‚å€™å…¶å¯¦æˆ‘å€‘é‚„æ²’é–‹å§‹å¯«ç¨‹å¼ï¼Œåªæ˜¯æŠŠæµç¨‹å’Œç›¸é—œçš„æ–¹æ³•å…ˆå®šç¾©å‡ºä¾†ã€‚</p>
<p>é€™è£¡çš„æ–¹æ³•å¾ˆç°¡å–®ï¼Œå°±æ˜¯å…ˆé€éè¨»è§£å’Œæ–¹æ³•ä»‹é¢ä¾†æè¿°æ•´å€‹æµç¨‹ï¼Œè€Œä¸æ˜¯å…ˆå¯«ç´°éƒ¨çš„ç¨‹å¼ç¢¼ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Shop_Cart_Plugin_Coupon extends Shop_Cart_Plugin
{
    // ... ç•¥ ...
    // æ¼”ç®—æ³•è¨ˆç®—å¾Œçš„çµæœ
    protected $_sharedCouponData = array();
    // å–å¾—æ¼”ç®—æ³•è¨ˆç®—å¾Œçš„çµæœï¼Œä¹Ÿå¯ä¾›æ¸¬è©¦ä¾†é©—è­‰
    public functino getSharedCouponData()
    {
        return $this-&gt;_sharedCouponData;
    }
    // ä¸»è¦çš„åŸ·è¡Œæ–¹æ³•
    public function doCheckout()
    {
        $this-&gt;_getCouponData(); // å–å¾—
        $this-&gt;_getProductData(); // å–å¾—å•†å“è³‡æ–™
        $this-&gt;_initData(); // åˆå§‹åŒ–è¦æ”¤æçš„è³‡æ–™
        $this-&gt;_shareCouponToProduct(); // é–‹å§‹æ”¤æ
    }
    // ... ç•¥ ...
}

</code></pre></div><p>ç•¶ç„¶é€™äº›éƒ½æ˜¯å¤§æ¦‚çš„è¼ªå»“ï¼Œå› ç‚ºå¯èƒ½åœ¨æˆ‘å€‘å¯«å¥½æ¸¬è©¦åŸ·è¡Œæ™‚ï¼Œæœƒå†é¡å¤–åŠ å…¥æ–°çš„æ–¹æ³•åŠä»‹é¢ã€‚</p>
<p>é‚„æœ‰ä¸€å€‹è¦å…ˆå®šç¾©å¥½çš„æ˜¯æ¸¬è©¦ç”¨çš„æ¯”å°æ•¸æ“šæ ¼å¼ï¼Œå®ƒå°æˆ‘å€‘ç¨å¾Œè¦æ¸¬è©¦çš„ç¨‹å¼å¯«æ³•æœƒæœ‰å½±éŸ¿ã€‚</p>
<h2 id="å¯«ç¬¬ä¸€å€‹æ¸¬è©¦">å¯«ç¬¬ä¸€å€‹æ¸¬è©¦</h2>
<p>åˆ°é€™è£¡ï¼Œæˆ‘å€‘å°±å¯ä»¥é–‹å§‹å¯«ç¬¬ä¸€å€‹æ¸¬è©¦ï¼Œè€Œæ¥ä¸‹ä¾†çš„ç¨‹å¼ç¢¼ï¼Œéƒ½æ˜¯å…ˆä»¥é€™å€‹æ¸¬è©¦å¯ä»¥æˆåŠŸç‚ºç›®çš„ã€‚è€Œé€™å€‹æ¸¬è©¦è¦æ€éº¼å¯«å‘¢ï¼Ÿå°±æ˜¯æŠŠä¸€é–‹å§‹æˆ‘å€‘åœ¨ç´™ä¸Šä½œæ¥­çš„æ•¸å­—æ‹¿é€²ä¾†å¥—ç”¨ã€‚</p>
<p>ç•¶ç„¶é€™è£¡æˆ‘çš„ <code>setUp</code> å’Œ <code>tearDown</code> ä¹Ÿå·²ç¶“åœ¨ä¹‹å‰æº–å‚™æ¸¬è©¦æ¶æ§‹æ™‚å¯«å¥½äº†ï¼Œå®ƒå€‘æœƒè®“æˆ‘å€‘æ¯æ¬¡çš„æ¸¬è©¦æ•¸æ“šéƒ½èƒ½å¤ ç¨ç«‹ã€‚æˆ‘å€‘é—œå¿ƒçš„å°±æ˜¯ç¬¬ä¸€å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Shop_Cart_Plugin_CouponTest</span> <span class="k">extends</span> <span class="nx">PHPUnit_Framework_TestCase</span>
<span class="p">{</span>
    <span class="c1">// ... ç•¥ ...
</span><span class="c1"></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">setUp</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ... ç•¥ ...
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">tearDown</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ... ç•¥ ...
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">testDoCheckout</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_plugin</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
           <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// C1, ProductCoupon for P1, $100
</span><span class="c1"></span>           <span class="mi">2</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// C2, ProductCoupon for P1, P2, $100
</span><span class="c1"></span>        <span class="p">));</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_cart</span><span class="o">-&gt;</span><span class="na">addItems</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;P1&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// $200
</span><span class="c1"></span>            <span class="s1">&#39;P2&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// $300
</span><span class="c1"></span>        <span class="p">))</span><span class="o">-&gt;</span><span class="na">refresh</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_cart</span><span class="o">-&gt;</span><span class="na">getTotal</span><span class="p">());</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_plugin</span><span class="o">-&gt;</span><span class="na">doCheckout</span><span class="p">();</span>

        <span class="nv">$resultDataList</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_plugin</span><span class="o">-&gt;</span><span class="na">getSelectedOrderCouponDataList</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="nv">$resultDataList</span><span class="p">[</span><span class="s1">&#39;P1-C1&#39;</span><span class="p">](</span><span class="s1">&#39;discountPrice&#39;</span><span class="p">));</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span>  <span class="nv">$resultDataList</span><span class="p">[</span><span class="s1">&#39;P1-C2&#39;</span><span class="p">](</span><span class="s1">&#39;discountPrice&#39;</span><span class="p">));</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="o">-</span><span class="mi">75</span><span class="p">,</span>  <span class="nv">$resultDataList</span><span class="p">[</span><span class="s1">&#39;P2-C2&#39;</span><span class="p">](</span><span class="s1">&#39;discountPrice&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>é€™è£¡å› ç‚ºæˆ‘å€‘åœ¨ä¸Šä¸€æ­¥å°±å®šç¾©å¥½æ¯”å°ç”¨çš„æ•¸æ“šï¼Œæ‰€ä»¥æ¸¬è©¦æ™‚å°±æ˜¯ç”¨é€™å€‹è¼¸å‡ºçš„æ•¸æ“šä¾†èˆ‡æˆ‘å€‘é æœŸçš„æ•¸å­—ç›¸æ¯”è¼ƒã€‚</p>
<p>æ¥ä¸‹ä¾†å°±å…ˆè·‘è·‘æ¸¬è©¦ï¼Œçœ‹çœ‹é€™å€‹ TestCase æœ‰æ²’æœ‰åŸ·è¡ŒéŒ¯èª¤çš„åœ°æ–¹ (ä¾‹å¦‚ç‰©ä»¶æ²’æœ‰æ­£ç¢ºåˆå§‹åŒ–æˆ–æ˜¯è®Šæ•¸åç¨±èª¤å¯«ç­‰ç­‰) ï¼›ç•¶ç„¶å¦‚æœæ²’æœ‰å‡ºç¾é æœŸå€¼æ˜¯æ­£å¸¸çš„ï¼Œå› ç‚ºæˆ‘å€‘æ ¹æœ¬é‚„æ²’æœ‰å¯«è¨ˆç®—å…¬å¼ã€‚</p>
<h2 id="ç¹¼çºŒå®Œæˆæ¼”ç®—æ³•">ç¹¼çºŒå®Œæˆæ¼”ç®—æ³•</h2>
<p>ç¾åœ¨å›åˆ° <code>Shop_Cart_Plugin_Coupon</code> ï¼Œæˆ‘å€‘å°±è¦æŠŠå‰›å‰›é‚£äº›åªæœ‰éª¨é ­çš„æ–¹æ³•é–‹å§‹æ·»è¡€æ·»è‚‰ï¼Œé€™è£¡å°±è«‹å¤§å®¶è‡ªè¡Œç™¼æ“‡ã€‚</p>
<p>æ¥è‘—åªè¦ä½ è¦ºå¾—ç¨‹å¼å·®ä¸å¤šäº†ï¼Œå°±å…ˆè·‘ä¸€ä¸‹æ¸¬è©¦ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯ç¬¦åˆæ¸¬è©¦çš„é æœŸçµæœã€‚</p>
<p>ç•¶ä½ å®Œæˆç¬¬ä¸€å€‹æ¸¬è©¦æ™‚ï¼Œç¨‹å¼çš„å°±å·®ä¸å¤šå®Œæˆç™¾åˆ†ä¹‹äº”åå•¦ï¼Œåˆ°é€™è£¡åˆ¥å¿˜äº†å…ˆæŠŠç¨‹å¼ commit åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±è£¡ã€‚</p>
<h2 id="åŠ å…¥æ–°æ¸¬è©¦ä¸¦ä¿®æ”¹ç¨‹å¼">åŠ å…¥æ–°æ¸¬è©¦ä¸¦ä¿®æ”¹ç¨‹å¼</h2>
<p>å®Œæˆç¬¬ä¸€å€‹æ¸¬è©¦æ™‚ï¼Œç•¶ç„¶ä¸æ˜¯æ²’äº‹äº†ï¼Œæˆ‘å€‘è¦é‡å°ä¸åŒçš„ç‹€æ³å†åŠ å…¥å…¶ä»–çš„æ¸¬è©¦æ•¸æ“šã€‚</p>
<p>é€™è£¡æˆ‘å€‘å°±å¯ä»¥é–‹å§‹è€ƒæ…®æŠŠç¬¬ä¸€å€‹æ¸¬è©¦ä»¥ PHPUnit æä¾›çš„ Data Provider æ”¹å¯«ï¼Œè®“æˆ‘å€‘ä¸å¿…é‡è¤‡éå¤šçš„ç¨‹å¼ç¢¼ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Shop_Cart_Plugin_CouponTest</span> <span class="k">extends</span> <span class="nx">PHPUnit_Framework_TestCase</span>
<span class="p">{</span>
    <span class="c1">// ... ç•¥ ...
</span><span class="c1"></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">setUp</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ... ç•¥ ...
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">tearDown</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ... ç•¥ ...
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @dataProvider provider
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testDoCheckout</span><span class="p">(</span><span class="nv">$selectedCouponIdList</span><span class="p">,</span> <span class="nv">$productSkuNumberList</span><span class="p">,</span> <span class="nv">$total</span><span class="p">,</span> <span class="nv">$discountDataList</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_plugin</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="nv">$selectedCouponIdList</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_cart</span><span class="o">-&gt;</span><span class="na">addItems</span><span class="p">(</span><span class="nv">$productSkuNumberList</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">refresh</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="nv">$total</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_cart</span><span class="o">-&gt;</span><span class="na">getTotal</span><span class="p">());</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_plugin</span><span class="o">-&gt;</span><span class="na">doCheckout</span><span class="p">();</span>
        <span class="nv">$resultDataList</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_plugin</span><span class="o">-&gt;</span><span class="na">getSharedCouponData</span><span class="p">();</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$discountDataList</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
        	<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$resultDataList</span><span class="p">[</span><span class="nv">$key</span><span class="p">](</span><span class="s1">&#39;discountPrice&#39;</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">provider</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">array</span><span class="p">(</span> <span class="c1">// ç¬¬ä¸€å€‹æ¸¬è©¦
</span><span class="c1"></span>            <span class="k">array</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// C1, ProductCoupon for P1, $100
</span><span class="c1"></span>                <span class="mi">2</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// C2, ProductCoupon for P1, P2, $100
</span><span class="c1"></span>            <span class="p">),</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;P1&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// $200
</span><span class="c1"></span>                <span class="s1">&#39;P2&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// $300
</span><span class="c1"></span>            <span class="p">),</span> <span class="mi">300</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;P1-C1&#39;</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">100</span><span class="p">,</span>
                <span class="s1">&#39;P1-C2&#39;</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">25</span><span class="p">,</span>
                <span class="s1">&#39;P2-C2&#39;</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">75</span><span class="p">,</span>
            <span class="p">)),</span>
            <span class="k">array</span><span class="p">(</span> <span class="c1">// ç¬¬äºŒå€‹æ¸¬è©¦
</span><span class="c1"></span>                <span class="c1">// ... ç•¥ ...
</span><span class="c1"></span>            <span class="p">),</span>
            <span class="c1">// ... ç•¥ ...
</span><span class="c1"></span>        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div><p>è€ŒåŠ å…¥æ–°æ¸¬è©¦ä¹‹å¾Œï¼Œå°±å¯ä»¥è·‘è·‘æ¸¬è©¦ï¼Œçœ‹çœ‹æˆ‘å€‘å‰›å¯«å¥½çš„æ¼”ç®—æ³•æ˜¯å¦æ­£ç¢ºå‹•ä½œï¼Ÿé€šå¸¸é€™æ™‚å€™æ‰çœŸæ­£æ˜¯è€ƒé©—çš„é–‹å§‹ã€‚å› ç‚ºé€™æ™‚å€™å‰é¢å¯«å¥½çš„ç¨‹å¼ç¢¼å¯èƒ½åªå°ç¬¬ä¸€å€‹æ¸¬è©¦æ­£å¸¸ï¼Œæ¥ä¸‹ä¾†çš„æ¸¬è©¦ä¹Ÿè¨±å°±æœƒå‡ºéŒ¯äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘å€‘å°±æœƒéœ€è¦ä¿®æ”¹æˆ–é‡æ§‹ç¨‹å¼ç¢¼ï¼Œè®“å¾Œé¢çš„æ¸¬è©¦ä¹Ÿèƒ½æ­£å¸¸åŸ·è¡Œã€‚ç•¶ç„¶æ”¹éçš„ç¨‹å¼ä¹Ÿè¦è®“ç¬¬ä¸€å€‹æ¸¬è©¦æ­£å¸¸é‹ä½œï¼Œæ‰æ˜¯æ­£ç¢ºçš„ä¿®æ”¹ã€‚</p>
<p>ç•¶ç„¶æ¼”ç®—æ³•å¯«å¥½å¾Œï¼Œå°±è¦çœŸæ­£ä¸Šåˆ° Web ç•«é¢å»æ¸¬è©¦ã€‚è‡³æ­¤ï¼Œä½ æœƒç™¼ç¾ä½ èŠ±åœ¨å¯«æ¸¬è©¦ä¸Šçš„å¿ƒåŠ›éƒ½æœ‰äº†å›å ±ï¼Œå› ç‚ºé€šå¸¸å¦‚æœä½ å·²ç¶“å®šç¾©å¥½ä»‹é¢ï¼Œè€Œé€™æ¬¡çš„ä¿®æ”¹åªæ˜¯æ”¹å¯«ä¸€å€‹å°é¡åˆ¥çš„è©±ï¼Œé‚£éº¼å°±æœƒç™¼ç¾ç¨‹å¼æœƒéå¸¸é †åˆ©åœ°é‹ä½œäº†ã€‚</p>
<h2 id="å¿ƒå¾—">å¿ƒå¾—</h2>
<p>æ¯æ¬¡å¯«è³¼ç‰©è»Šæ™‚ï¼Œæœ€éº»ç…©çš„å°±æ˜¯æ¸¬è©¦æ™‚è¦é–‹å•Ÿè³¼ç‰©è»Šç¶²é ï¼ŒæŠŠä¸€å€‹ä¸€å€‹çš„å•†å“åŠ é€²ä¾†ï¼Œå†åŠ å…¥ä¸åŒçš„æŠ˜åƒ¹åˆ¸æ¢ä»¶ã€‚è€Œæœ‰å–®å…ƒæ¸¬è©¦ä¹‹å¾Œï¼Œæˆ‘å°±å¯ä»¥çœå»ä¸€å¤§å †é–‹å•Ÿç¶²é ï¼Œé»é¸é€£çµçš„åŠŸå¤«ï¼Œå°ˆå¿ƒåœ°æ’°å¯«è¨ˆç®—é‚è¼¯ï¼Œåªèƒ½èªªå–®å…ƒæ¸¬è©¦çœŸçš„å€‹è¶…ç´šä¾¿åˆ©çš„å·¥å…·å‘€ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>[Web] å¸¸è¦‹è¨­è¨ˆæ¨¡å¼ä»‹ç´¹</title>
			<link>https://jaceju.net/familiar-patterns/</link>
			<pubDate>Mon, 01 Feb 2010 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/familiar-patterns/</guid>
			<description>è¨­è¨ˆæ¨¡å¼ (Design Patterns) ä¸€ç›´ä»¥ä¾†éƒ½æ˜¯å„ªç§€çš„ç¨‹å¼é–‹ç™¼è€…æ‰€å¿…é ˆç­è§£çš„è§€å¿µä¹‹ä¸€ï¼Œä½†ä¸è«–æ›¸è£¡æˆ–æ˜¯ç¶²è·¯ä¸Šæ‰€æ‰¾åˆ°çš„è¨­è¨ˆæ¨¡å¼æ•™å­¸ï¼Œå¾ˆå°‘ç‚ºå¤§å®¶ä»”ç´°ä»‹ç´¹å¦‚ä½•æŠŠè¨­è¨ˆæ¨¡å¼å¥—ç”¨</description>
			<content type="html"><![CDATA[<p>è¨­è¨ˆæ¨¡å¼ (Design Patterns) ä¸€ç›´ä»¥ä¾†éƒ½æ˜¯å„ªç§€çš„ç¨‹å¼é–‹ç™¼è€…æ‰€å¿…é ˆç­è§£çš„è§€å¿µä¹‹ä¸€ï¼Œä½†ä¸è«–æ›¸è£¡æˆ–æ˜¯ç¶²è·¯ä¸Šæ‰€æ‰¾åˆ°çš„è¨­è¨ˆæ¨¡å¼æ•™å­¸ï¼Œå¾ˆå°‘ç‚ºå¤§å®¶ä»”ç´°ä»‹ç´¹å¦‚ä½•æŠŠè¨­è¨ˆæ¨¡å¼å¥—ç”¨åœ¨ Web é–‹ç™¼ä¸Šã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘æœ€è¿‘è©¦è‘—æŠŠ Web é–‹ç™¼å¸¸ç”¨åˆ°çš„è¨­è¨ˆæ¨¡å¼æ•´ç†å‡ºä¾†åˆ†äº«çµ¦å¤§å®¶ï¼Œæ²’æƒ³åˆ°çœŸçš„æ˜¯æŒºç´¯äººçš„ä¸€ä»¶äº‹ã€‚</p>
<p>ä¸ç®¡å¦‚ä½•ï¼Œé€™å€‹æŠ•å½±ç‰‡ä»‹ç´¹å°±ç®—æ˜¯å€‹è©¦é‡‘çŸ³å§ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤ å¾ä¸­ç²å¾—ä¸€äº›æ±è¥¿ï¼Œä¸¦ä¸”ä¹Ÿèƒ½çµ¦æˆ‘ä¸€é»æ„è¦‹ã€‚</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>è¨» 1 ï¼šçœ‹ä¸åˆ°æŠ•å½±ç‰‡çš„è©±ï¼Œè«‹é‡æ–°æ•´ç†ã€‚
è¨» 2 ï¼šæ²’æœ‰ Part 2 äº†ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>[äº”åˆ†é˜æ•™å®¤] é‡æ§‹å¤šåƒæ•¸å‡½å¼</title>
			<link>https://jaceju.net/refactor-multiple-arguments-function/</link>
			<pubDate>Wed, 16 Dec 2009 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/refactor-multiple-arguments-function/</guid>
			<description>æˆ‘å€‘åœ¨æ’°å¯« PHP å‡½å¼ (æˆ–é¡åˆ¥çš„æ–¹æ³•) æ™‚ï¼Œå¤šå°‘éƒ½æœƒå¸¶å…¥ä¸€äº›åƒæ•¸ï¼Œä¾‹å¦‚ï¼š function myfunc($arg1, $arg2, ...) {} ä¸€èˆ¬å¸¸è¦‹çš„å‡½å¼ï¼Œå®ƒå€‘çš„åƒæ•¸æ•¸é‡å¤§å¤šåªæœƒå…©ä¸‰å€‹ï¼Œä½†å¦‚æœæœ‰åƒæ•¸çš„æ•¸é‡å¾ˆ</description>
			<content type="html"><![CDATA[<p>æˆ‘å€‘åœ¨æ’°å¯« PHP å‡½å¼ (æˆ–é¡åˆ¥çš„æ–¹æ³•) æ™‚ï¼Œå¤šå°‘éƒ½æœƒå¸¶å…¥ä¸€äº›åƒæ•¸ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function myfunc($arg1, $arg2, ...) {}
</code></pre></div><p>ä¸€èˆ¬å¸¸è¦‹çš„å‡½å¼ï¼Œå®ƒå€‘çš„åƒæ•¸æ•¸é‡å¤§å¤šåªæœƒå…©ä¸‰å€‹ï¼Œä½†å¦‚æœæœ‰åƒæ•¸çš„æ•¸é‡å¾ˆå¤šæ™‚è©²æ€éº¼è¾¦ï¼Ÿ</p>
<!-- raw HTML omitted -->
<h2 id="å¤šåƒæ•¸çš„å›°æ“¾">å¤šåƒæ•¸çš„å›°æ“¾</h2>
<p>ç•¶ä¸€å€‹ PHP å‡½å¼çš„åƒæ•¸å¤šæ–¼ä¸‰å€‹ä»¥ä¸Šæ™‚ï¼Œå…¶å¯¦å°±æœƒæµ®ç¾ä¸€äº›è®“ç¨‹å¼é–‹ç™¼äººå“¡å›°æ“¾çš„å•é¡Œã€‚</p>
<h3 id="é †åºä¸æ˜“è¨˜æ†¶">é †åºä¸æ˜“è¨˜æ†¶</h3>
<p>ç•¶å‡½å¼åç¨±èªæ„ä¸æ˜æ™‚ï¼ŒåŠ ä¸Šå¦‚æœæ²’æœ‰ IDE çš„å”åŠ©ï¼Œä½ æœƒå¾ˆé›£ç­è§£åƒæ•¸çš„å…ˆå¾Œé †åºã€‚</p>
<p>åƒæˆ‘è‡ªå·±å°±å¾ˆå¸¸æéŒ¯ <code>iconv</code> çš„åƒæ•¸é †åºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">iconv($in_charset, $out_charset, $str)
</code></pre></div><p>æ¯æ¬¡ä½¿ç”¨æ™‚ï¼Œæˆ‘éƒ½è¦å›å»çœ‹çœ‹å®˜æ–¹æ‰‹å†Šï¼Œæ‰æœƒè¨˜å¾—ç¬¬ä¸€å€‹åƒæ•¸æ˜¯è¼¸å…¥ç·¨ç¢¼è€Œä¸æ˜¯è¦è½‰æ›çš„å­—ä¸²ã€‚</p>
<h3 id="é è¨­å€¼">é è¨­å€¼</h3>
<p>é‚„æœ‰ä¸€å€‹ç‹€æ³æ˜¯åƒæ•¸å¦‚æœæœ‰é è¨­å€¼æ™‚ï¼Œä¸€å®šæ˜¯å°‡å®ƒæ”¾åœ¨æœ€å³é‚Šçš„åƒæ•¸ã€‚ä¾‹å¦‚ <code>htmlspecialchars</code> é€™å€‹å‡½å¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">htmlspecialchars($string[, $quote_style = ENT_COMPAT[, $charset = &#39;ISO-8859-1&#39;[, $double_encode = true]]])
</code></pre></div><p>å¦‚æœä»Šå¤©æˆ‘å€‘åªæƒ³è¦è¼‰å…¥ç¬¬ä¸€å€‹åƒæ•¸ (è¦è½‰æ›çš„å­—ä¸²) å’Œç¬¬ä¸‰å€‹åƒæ•¸ (ç·¨ç¢¼) ï¼Œé€™æ˜¯åšä¸åˆ°çš„ï¼›æˆ‘å€‘ä¸å¾—ä¸æŠŠç¬¬äºŒå€‹åƒæ•¸ (å¼•è™Ÿå‹æ…‹) ä¹Ÿä¸€ä½µä»£å…¥ï¼Œå³ä¾¿æˆ‘å€‘ä¸æƒ³æ›´æ”¹å®ƒçš„é è¨­å€¼ã€‚</p>
<h2 id="è§£æ±ºæ–¹å¼">è§£æ±ºæ–¹å¼</h2>
<p>æˆ‘å€‘å¯ä»¥ç”¨é—œè¯å¼é™£åˆ—ä¾†è§£æ±ºå‰è¿°çš„å•é¡Œï¼Œä¹Ÿå°±æ˜¯æŠŠå¤šå€‹åƒæ•¸è®Šæˆä¸€å€‹é™£åˆ—ã€‚</p>
<p>ä¾‹å¦‚ä»¥å‰é¢çš„ <code>iconv</code> ç‚ºä¾‹ï¼Œæˆ‘å€‘è‡ªå·±å®šç¾©äº†ä¸€å€‹å‡½å¼å°‡å®ƒåŒ…è£èµ·ä¾†ï¼Œç„¶å¾ŒæŠŠåŸä¾†çš„ä¸‰å€‹åƒæ•¸è®Šæˆä¸€å€‹åƒæ•¸é™£åˆ—ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// å®šç¾©
function my_iconv($options)
{
    return iconv($options[&#39;inputCharset&#39;], $options[&#39;outputCharset&#39;], $options[&#39;convertString&#39;]);
}

//ç”¨æ³•
echo my_iconv(array(
    &#39;convertString&#39; =&gt; &#39;test&#39;,
    &#39;inputCharset&#39; =&gt; &#39;BIG5&#39;,
    &#39;outputCharset&#39; =&gt; &#39;UTF-8&#39;,
));
</code></pre></div><p>é€™æ¨£ä¸€ä¾†ï¼Œä¸åƒ…æˆ‘å€‘ä¸ç”¨æ“”å¿ƒåƒæ•¸é †åºçš„å•é¡Œï¼Œé‚„å¯ä»¥å¾ˆå®¹æ˜“åœ°åˆ†è¾¨å‡ºæ¯å€‹åƒæ•¸å€¼æ‰€ä»£è¡¨çš„æ„ç¾©ã€‚</p>
<p>è¨»ï¼šé€™ç¨®ä½œæ³•åœ¨ä¸€äº› JavaScript Library è£¡ä¹Ÿå¸¸è¦‹åˆ°ï¼Œåƒæ˜¯ jQuery å¾ˆå¤šæ–¹æ³•éƒ½æ˜¯ä»¥ç‰©ä»¶ä¾†ç•¶åšåƒæ•¸çµ„ä»£å…¥ã€‚</p>
<h3 id="è€ƒæ…®é è¨­å€¼">è€ƒæ…®é è¨­å€¼</h3>
<p>é‚£éº¼å¦‚æœåƒæ•¸éœ€è¦é è¨­å€¼æ™‚è©²æ€éº¼åšå‘¢ï¼Ÿé€™æ™‚å€™æˆ‘å€‘å¯ä»¥åœ¨å‡½å¼è£¡é å…ˆæ”¾ç½®ä¸€å€‹å«æœ‰é è¨­å€¼çš„é™£åˆ—ï¼Œä¾†è·Ÿä½¿ç”¨è€…å‚³å…¥çš„é™£åˆ—åšåˆä½µçš„å‹•ä½œã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function my_htmlspecialchars($str, $options = array())
{
    $options = (array) $options;
    $options += array(
        &#39;quoteStyle&#39; =&gt; ENT_COMPAT,
        &#39;charset&#39; =&gt; &#39;ISO-8859-1&#39;,
        &#39;doubleEncode&#39; =&gt; true,
    );
    return htmlspecialchars(
        $str,
        $options[&#39;quoteStyle&#39;],
        $options[&#39;charset&#39;],
        $options[&#39;doubleEncode&#39;]
    );
}

echo my_htmlspecialchars(&#39;<span class="p">&lt;</span><span class="nt">test</span><span class="p">&gt;</span>æ¸¬è©¦<span class="p">&lt;/</span><span class="nt">test</span><span class="p">&gt;</span>&#39;, array(&#39;charset&#39; =&gt; &#39;UTF-8&#39;));
</code></pre></div><p>é€™è£¡æˆ‘ç”¨äº†ã€Œ <code>+</code> ã€é€™å€‹å¯ä»¥ç”¨ä¾†åˆä½µé™£åˆ—çš„æ“ä½œç¬¦ï¼Œå®ƒæœƒä»¥å·¦é‚Šé™£åˆ—è£¡çš„å€¼ç‚ºä¸»ï¼Œç„¶å¾Œå°‡å³é‚Šçš„å€¼åˆä½µé€²ä¾†ã€‚</p>
<p>é€™æ¨£ä¸€ä¾†ï¼Œå³é‚Šçš„é™£åˆ—è£¡æˆ‘å€‘å¯ä»¥æ”¾ç½®é è¨­çš„åƒæ•¸å€¼ï¼Œè€Œä¸å¿…æ“”å¿ƒä½¿ç”¨è€…æ²’æœ‰å¸¶å…¥ä¸­é–“å¿…è¦çš„åƒæ•¸ã€‚</p>
<p>è¨»ï¼šä½ ä¹Ÿè¨±æœƒç™¼ç¾æˆ‘æ²’æœ‰æŠŠ <code>$str</code> æ”¾åˆ° <code>$options</code> è£¡ï¼Œé€™æ˜¯å› ç‚ºå®ƒæœ¬èº«å°±æ˜¯å¿…è¦çš„åƒæ•¸ã€‚</p>
<h3 id="ç¼ºé»">ç¼ºé»</h3>
<p>ä½¿ç”¨é—œè¯å¼é™£åˆ—ç•¶åšåƒæ•¸å€¼ä¹Ÿä¸èƒ½èªªå®Œå…¨æ²’æœ‰ç¼ºé»ï¼Œå¯¦éš›æ‡‰ç”¨ä¸Šæˆ‘å°±ç™¼ç¾äº†ä»¥ä¸‹å¹¾å€‹å•é¡Œï¼š</p>
<ul>
<li>
<p>æ¯”åŸæœ¬çš„ç¨‹å¼å¯«æ³•å›‰å—¦äº†äº›ï¼Œä½ å¾—å¤šæ‰“å¥½å¤šå­—æ‰èƒ½é”åˆ°ç›¸åŒçš„ç›®çš„ã€‚</p>
</li>
<li>
<p>åƒæ•¸åç¨±ä¸æ˜“è¨˜æ†¶ï¼Œä¸”é è¨­å€¼è¦å¯«åœ¨è¨»è§£è£¡ï¼Œè€Œä¸æ˜¯å¯«åœ¨å®šç¾©è£¡ï¼›é€™æ¨£ä¸€ä¾†æœ‰äº› IDE å¦‚æœä¸é¡¯ç¤ºå‡½å¼è¨»è§£çš„è©±ï¼Œé‚„æ˜¯å¾—çœ‹æ‰‹å†Šæ‰èƒ½çŸ¥é“é€™äº›åƒæ•¸çš„åç¨±èˆ‡é è¨­å€¼ã€‚</p>
</li>
</ul>
<h2 id="çµè«–">çµè«–</h2>
<p>ç”¨é—œè¯å¼é™£åˆ—ä¾†å–ä»£å¤šåƒæ•¸é€™å€‹æ–¹æ³•ï¼Œæœ€å¤§çš„å¥½è™•å°±æ˜¯ç•¶å¾ŒçºŒç¶­è­·çš„é–‹ç™¼äººå“¡ï¼Œå¯ä»¥ä¸å¿…å†å›é ­æŸ¥çœ‹æ‰‹å†Šï¼Œä¸€çœ¼å°±èƒ½çŸ¥é“æ¯å€‹åƒæ•¸å€¼æ‰€ä»£è¡¨çš„æ„ç¾©ã€‚</p>
<p>ä¸éé€™å€‹æ–¹æ³•é‚„æ˜¯å¾—çœ‹ç‹€æ³ä½¿ç”¨ï¼Œå› ç‚ºå®ƒæ‰€å¸¶ä¾†çš„ç¼ºé»å¯èƒ½æœƒè®“å¾ˆå¤šé–‹ç™¼äººå“¡è¦ºå¾—å¾ˆä¸ä¾¿ã€‚æ‰€ä»¥åœ¨è¨­è¨ˆå‡½å¼æ™‚ï¼Œä¸€å®šè¦ä»”ç´°æ€è€ƒå¦‚ä½•å»å®šç¾©æ‰èƒ½è®“é–‹ç™¼è€…æ–¹ä¾¿ä½¿ç”¨é€™äº›å®ƒå€‘ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>[äº”åˆ†é˜æ•™å®¤] MySQL 4.1&#43; ç·¨ç¢¼å¿«é€Ÿå…¥é–€</title>
			<link>https://jaceju.net/mysql-character-set/</link>
			<pubDate>Sat, 12 Dec 2009 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/mysql-character-set/</guid>
			<description>å¾ˆä¹…ä»¥å‰ï¼Œæˆ‘å¯«éä¸€ç¯‡ã€ŒMySQL ä¸­æ–‡ç·¨ç¢¼å¾¹åº•ç ”ç©¶ã€ï¼Œç°¡å–®ä»‹ç´¹äº†å¦‚ä½•å°‡ MySQL 4.0 è½‰æ›åˆ° MySQL 4.1 æ™‚è¦æ³¨æ„çš„éƒ¨ä»½ã€‚ è¨»ï¼šå¤§å®¶å¯ä»¥æŠŠé€™ç¯‡ã€ŒMySQL ä¸­æ–‡ç·¨ç¢¼å¾¹åº•</description>
			<content type="html"><![CDATA[<p>å¾ˆä¹…ä»¥å‰ï¼Œæˆ‘å¯«éä¸€ç¯‡ã€Œ<a href="http://www.jaceju.net/blog/archives/116">MySQL ä¸­æ–‡ç·¨ç¢¼å¾¹åº•ç ”ç©¶</a>ã€ï¼Œç°¡å–®ä»‹ç´¹äº†å¦‚ä½•å°‡ MySQL 4.0 è½‰æ›åˆ° MySQL 4.1 æ™‚è¦æ³¨æ„çš„éƒ¨ä»½ã€‚</p>
<p>è¨»ï¼šå¤§å®¶å¯ä»¥æŠŠé€™ç¯‡ã€Œ<a href="http://www.jaceju.net/blog/archives/116">MySQL ä¸­æ–‡ç·¨ç¢¼å¾¹åº•ç ”ç©¶</a>ã€ç•¶åšæ˜¯æœ¬äººåœ¨æ‹™ä½œã€Œ<a href="http://www.flag.com.tw/book/5105.asp?bokno=F5471">PHP Smarty æ¨£ç‰ˆå¼•æ“</a>ã€ä¸­çš„è§€å¿µä¿®æ­£æ–‡ã€‚</p>
<p>ä¸éæˆ‘æƒ³é‚„æ˜¯æœƒæœ‰å¾ˆå¤šæœ‹å‹æœƒè¦ºå¾—è©²æ–‡å¯«çš„æ±è¥¿é‚„æ˜¯æœ‰é»é›œäº‚ï¼Œå°¤å…¶åœ¨ BIG5 å’Œ UTF-8 ä¹‹é–“çš„åˆ‡æ›ï¼Œå¯èƒ½è®“å¾ˆå¤šäººçœ‹å®Œé‚„æ˜¯ä¸€é ­éœ§æ°´ã€‚</p>
<p>æ‰€ä»¥ï¼Œå°±ç›®å‰æ™‚ä¸‹ç¶²è·¯æœå‹™éƒ½æ˜¯ç”¨ UTF-8 åšç‚ºæºé€šé–“çš„ç·¨ç¢¼é€™é»ä¾†çœ‹ï¼Œé€™è£¡æˆ‘å»ºè­°å¤§å®¶ä¹¾è„†å°±ä¸€å¾‹ç”¨ 4.1 ä»¥ä¸Šçš„ç‰ˆæœ¬å§ï¼çœå¾—åœ¨åˆ‡æ›é€™äº›ç·¨ç¢¼æ™‚æå¾—è‡ªå·±èº«å¿ƒä¿±ç–²ã€‚</p>
<p>æ¥ä¸‹ä¾†æˆ‘æœƒå¿«é€Ÿç‚ºå¤§å®¶ä»‹ç´¹ MySQL 4.1 ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œåœ¨ä½¿ç”¨ç·¨ç¢¼ä¸Šçš„ä¸€äº›è§€å¿µã€‚</p>
<!-- raw HTML omitted -->
<h2 id="mysql-41-ç·¨ç¢¼">MySQL 4.1+ ç·¨ç¢¼</h2>
<h3 id="ç·¨ç¢¼çš„å½±éŸ¿ç¯„åœ">ç·¨ç¢¼çš„å½±éŸ¿ç¯„åœ</h3>
<p>MySQL 4.1 ä»¥å¾Œçš„ç·¨ç¢¼å½±éŸ¿å±¤ç´šå¯ç´°åˆ†ç‚ºä¸‰å±¤ï¼šè³‡æ–™åº«ã€è³‡æ–™è¡¨ã€æ¬„ä½ã€‚</p>
<p><img src="/resources/mysql_charset/01.png" alt="ç·¨ç¢¼å½±éŸ¿ç¯„åœ"></p>
<p>ä¸€èˆ¬ä¾†èªªï¼Œæˆ‘å€‘åªè¦å°è³‡æ–™è¡¨è¨­å®šç·¨ç¢¼å³å¯ï¼Œå…¶ä¸‹æ‰€æ“æœ‰çš„è³‡æ–™è¡¨å’Œè³‡æ–™æ¬„ä½çš„ç·¨ç¢¼èˆ‡è³‡æ–™åº«è¨­å®šçš„ä¸€è‡´ã€‚ä½†å¦‚æœé‡å°è³‡æ–™åº«å’Œè³‡æ–™æ¬„ä½è¨­å®šä¸åŒçš„ç·¨ç¢¼ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªè¦æˆ‘å€‘åœ¨å‰µå»ºå®ƒå€‘æ™‚æŒ‡å®šå­—é›†å’Œæ ¡å°å³å¯ã€‚</p>
<h3 id="å­—é›†èˆ‡æ ¡å°">å­—é›†èˆ‡æ ¡å°</h3>
<p>MySQL 4.1 + ä¹‹å¾Œå°±å¼•å…¥äºŒéšå¼çš„ç·¨ç¢¼è¨­å®šï¼šå­—é›† (character set) åŠæ ¡å° (collation) ã€‚</p>
<p>å­—é›†ä¸€èˆ¬å°±æ˜¯æˆ‘å€‘èªªçš„ç·¨ç¢¼ï¼Œä¾‹å¦‚ UTF-8 æˆ– BIG5 ç­‰ï¼›æ ¡å°å‰‡æ˜¯å†é‡å°å­—é›†è£¡åˆ†å‡ºäºŒé€²åˆ¶ (bin) æˆ–å¤šç¨®èªè¨€ä¸¦ä¸åˆ†å¤§å°å¯« (xxx_ci) ç­‰ç‰¹æ€§ã€‚</p>
<p>æ‰€ä»¥ä¸€èˆ¬é¸å®Œå­—é›†å¾Œï¼Œæˆ‘å€‘å°±æœƒéœ€è¦å†é¸æ“‡æ ¡å°ã€‚å°ä¸€èˆ¬æ¬„ä½ä¾†èªªï¼Œæ ¡å°ä¸¦ä¸éœ€è¦å€åˆ†å¤§å°å¯« (xxx_ci) ï¼Œä½†æ˜¯å¦‚æœè¼ƒç‚ºé‡è¦çš„æ¬„ä½ (ä¾‹å¦‚å¯†ç¢¼) ï¼Œå°±è¦é¸æ“‡äºŒé€²åˆ¶ (bin) ã€‚</p>
<p>é‚£éº¼å“ªå€‹å­—é›†æ¯”è¼ƒå¥½å‘¢ï¼Ÿ</p>
<h2 id="å°±æ˜¯-utf-8">å°±æ˜¯ UTF-8</h2>
<p>UTF-8 æ˜¯ç›®å‰ç¶²ç«™é–‹ç™¼ç·¨ç¢¼çš„ä¸äºŒäººé¸ï¼Œå®ƒçš„å„ªé»é€™è£¡æˆ‘å°±ä¸å†å¤šåŠ é—¡è¿°äº†ã€‚å¦‚æœä»¥å‰å„ä½æ˜¯æ…£ç”¨ BIG5 æˆ–æ˜¯ Latin-1 ç­‰ç·¨ç¢¼çš„è©±ï¼Œåœ¨æ–°ç¶²ç«™å°±æ”¹ç”¨ UTF-8 å§ã€‚</p>
<p>è¨»ï¼šèˆŠç¶²ç«™çš„ç·¨ç¢¼éœ€ä¸éœ€è¦å‡ç´šï¼Ÿé€™é»å°±ç•™çµ¦å¤§å®¶è‡ªè¡Œåˆ¤æ–·å§ã€‚</p>
<p>å¾ˆå¤šæœ‹å‹åœ¨å¾ MySQL 4.0 è½‰æ›æˆ MySQL 4.1 ä»¥ä¸Šç‰ˆæœ¬æ™‚ï¼Œå¸¸æœƒæœ‰ PHP æŠŠå¾ MySQL å–å¾—çš„è³‡æ–™è¼¸å‡ºç‚ºå•è™Ÿï¼Œæˆ–æ˜¯æ–‡å­—é¡¯ç¤ºç‚ºäº‚ç¢¼çš„å›°æ“¾ã€‚å…¶å¯¦è¦è§£æ±ºé€™æ¨£çš„å•é¡Œå¾ˆç°¡å–®ï¼Œä»¥ä¸‹å¹¾å€‹å°åœ°æ–¹æ³¨æ„å³å¯ã€‚</p>
<p><img src="/resources/mysql_charset/02.png" alt="è¼¸å‡ºè‡³ç€è¦½å™¨çš„ç·¨ç¢¼æ“ä½œ"></p>
<ul>
<li>PHP åœ¨å¾ MySQL å­˜å–è³‡æ–™ä¹‹å‰ï¼Œåˆ©ç”¨ <code>SET NAMES UTF8</code> å‘Šè¨´ MySQL æ¥ä¸‹ä¾†çš„è³‡æ–™éƒ½è¦è½‰æ›ç‚º UTF8 ã€‚</li>
<li>PHP è¼¸å‡ºè³‡æ–™çµ¦ Browser æ™‚ï¼Œè¦åœ¨ Header æŒ‡å®šæ­£ç¢ºçš„ç·¨ç¢¼ã€‚</li>
<li>æœ‰æ™‚å€™ç€è¦½å™¨éœ€è¦ meta æ¨™ç±¤æŒ‡å®šç·¨ç¢¼ï¼Œæ‰€ä»¥åœ¨ <code>&lt;title&gt;</code> æ¨™ç±¤ä¹‹å‰æŠŠæ­£ç¢ºçš„ meta æ¨™ç±¤è¨­å®šå¥½ã€‚</li>
<li>ç•¶ç„¶åˆ¥å¿˜äº†ä½ çš„ HTML Template çš„ç·¨ç¢¼ä¹Ÿæ˜¯è¦ç”¨ UTF-8 ã€‚</li>
</ul>
<p>å°±æ˜¯é€™éº¼ç°¡å–®ï¼Œåˆ¥å†ç‚º MySQL çš„ç·¨ç¢¼å›°æ“¾äº†ï¼æ›´è©³ç›¡çš„ä»‹ç´¹å°±è«‹åƒè€ƒæœ¬äººçš„æ‹™ä½œï¼šã€Œ<a href="http://www.jaceju.net/blog/archives/116">MySQL ä¸­æ–‡ç·¨ç¢¼å¾¹åº•ç ”ç©¶</a>ã€å§ï¼</p>
]]></content>
		</item>
		
		<item>
			<title>[äº”åˆ†é˜æ•™å®¤] PHP æª”æ¡ˆå¼•å…¥è·¯å¾‘å•é¡Œ</title>
			<link>https://jaceju.net/php-include-path/</link>
			<pubDate>Sat, 12 Dec 2009 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/php-include-path/</guid>
			<description>ç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“ï¼Œ PHP æä¾›äº†å¹¾å€‹æ•˜è¿°å¥ä¾†å”åŠ©æˆ‘å€‘å¼•å…¥å¤–éƒ¨æª”æ¡ˆï¼š include include_once require require_once é‚£éº¼å®ƒå€‘æ˜¯æ€éº¼æ±ºå®šå¼•å…¥æª”æ¡ˆçš„è·¯å¾‘å‘¢ï¼Ÿ çµ•å°è·¯å¾‘ çµ•å°è·¯å¾‘å°±æ˜¯æŒ‡æª”æ¡ˆåœ¨ä½œæ¥­ç³»çµ±ä¸­</description>
			<content type="html"><![CDATA[<p>ç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“ï¼Œ PHP æä¾›äº†å¹¾å€‹æ•˜è¿°å¥ä¾†å”åŠ©æˆ‘å€‘å¼•å…¥å¤–éƒ¨æª”æ¡ˆï¼š</p>
<ul>
<li><a href="http://www.php.net/manual/en/function.include.php">include</a></li>
<li><a href="http://www.php.net/manual/en/function.include-once.php">include_once</a></li>
<li><a href="http://www.php.net/manual/en/function.require.php">require</a></li>
<li><a href="http://www.php.net/manual/en/function.require-once.php">require_once</a></li>
</ul>
<p>é‚£éº¼å®ƒå€‘æ˜¯æ€éº¼æ±ºå®šå¼•å…¥æª”æ¡ˆçš„è·¯å¾‘å‘¢ï¼Ÿ</p>
<!-- raw HTML omitted -->
<h2 id="çµ•å°è·¯å¾‘">çµ•å°è·¯å¾‘</h2>
<p>çµ•å°è·¯å¾‘å°±æ˜¯æŒ‡æª”æ¡ˆåœ¨ä½œæ¥­ç³»çµ±ä¸­æ‰€å­˜æ”¾çš„è·¯å¾‘ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>/var/lib/php/library/Zend/Loader.php (åœ¨ Unix like ç’°å¢ƒ)
D:\php\library\PEAR.php (åœ¨ Windows ç’°å¢ƒ)
</code></pre><p>æ‰€ä»¥æˆ‘å€‘å¯ä»¥åœ¨ include åŠ require è£¡ç›´æ¥å¼•å…¥é€™æ¨£çš„æª”æ¡ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">require_once &#39;/var/lib/php/library/Zend/Loader.php&#39;;
include &#39;D:\php\library\PEAR.php&#39;;
</code></pre></div><h2 id="ç›¸å°è·¯å¾‘">ç›¸å°è·¯å¾‘</h2>
<p>ç›¸å°è·¯å¾‘çœ‹èµ·ä¾†æ¯”è¼ƒéº»ç…©ä¸€é»ï¼Œé€™è£¡ä¹Ÿå¸¸å¸¸æ˜¯ PHP é–‹ç™¼è€…ä¸€é–‹å§‹å®¹æ˜“ææ··çš„åœ°æ–¹ã€‚</p>
<p>ä¸éåªè¦æŒæ¡ä½å¹¾å€‹é‡é»ï¼Œé‚£éº¼å¼•å…¥ç›¸å°è·¯å¾‘çš„æª”æ¡ˆå…¶å¯¦ä¹Ÿæ²’æœ‰æƒ³åƒä¸­é‚£éº¼å›°é›£ã€‚</p>
<h3 id="ç›¸å°æ–¼ç›®å‰æª”æ¡ˆæ‰€åœ¨è·¯å¾‘">ç›¸å°æ–¼ç›®å‰æª”æ¡ˆæ‰€åœ¨è·¯å¾‘</h3>
<p>åœ¨ PHP é è¨­çš„ç’°å¢ƒè¨­å®šä¸‹ï¼Œæˆ‘å€‘å¯ä»¥å¼•ç”¨ç›¸å°æ–¼ç›®å‰é€™æ”¯ç¨‹å¼çš„å…¶ä»–æª”æ¡ˆï¼Œä¾‹å¦‚æˆ‘å€‘æœ‰ä¸€æ”¯ç¨‹å¼ <code>D:\WEB\wwwroot\index.php</code> ï¼Œå…¶å…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">require &#39;library/Zend/Loader.php&#39;;
</code></pre></div><p>é‚£éº¼ require å¯¦éš›å¼•å…¥çš„æª”æ¡ˆå°±æœƒæ˜¯ <code>D:\WEB\wwwroot\library\Zend\Loader.php</code> ã€‚</p>
<p>ä¸éç‚ºäº†ç¢ºä¿ç¨‹å¼ä¸æœƒå› ç‚ºç’°å¢ƒçš„æ”¹è®Šè€Œç„¡æ³•æ­£ç¢ºå¼•å…¥æª”æ¡ˆ (ç¨å¾Œæœƒæåˆ°æ€éº¼æ”¹è®Š) ï¼Œæˆ‘å€‘é‚„å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼ä¾†ç¢ºä¿å¼•å…¥çš„æª”æ¡ˆç¢ºå¯¦æ˜¯ <code>D:\WEB\wwwroot\library\Zend\Loader.php</code> é€™æ”¯ç¨‹å¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">require dirname(__FILE__) . &#39;/library/Zend/Loader.php&#39;;
</code></pre></div><p>å¾ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘å€‘åˆ©ç”¨ <code>dirname(__FILE__)</code> ä¾†å–å¾—ç›®å‰æª”æ¡ˆçš„å¯¦éš›æ‰€åœ¨è³‡æ–™å¤¾çš„å®Œæ•´è·¯å¾‘ (ä¹Ÿå°±æ˜¯ <code>D:\WEB\wwwroot</code> ) ï¼Œç„¶å¾Œå†å¼•å…¥ç›¸å°æ–¼é€™å€‹æª”æ¡ˆçš„ <code>/library/Zend/Loader.php</code> ã€‚</p>
<h3 id="ç›¸å°æ–¼-include_path-æ‰€è¨­å®šçš„è·¯å¾‘">ç›¸å°æ–¼ include_path æ‰€è¨­å®šçš„è·¯å¾‘</h3>
<p>å‰é¢æˆ‘å€‘æåˆ° include å’Œ require é è¨­å¯ä»¥å¼•å…¥ç›¸å°æ–¼ç›®å‰æª”æ¡ˆè·¯å¾‘çš„ç¨‹å¼ï¼Œå…¶å¯¦é€™æ˜¯å®šç¾©åœ¨ <code>php.ini</code> è£¡çš„ <code>include_path</code> é€™å€‹è¨­å®šå€¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="c1">; UNIX: &#34;/path1:/path2&#34;</span>
<span class="c1">;include_path = &#34;.:/php/includes&#34;</span>
<span class="c1">;</span>
<span class="c1">; Windows: &#34;\path1;\path2&#34;</span>
<span class="na">include_path</span> <span class="o">=</span> <span class="s">&#34;.;c:\php\includes&#34;</span>
</code></pre></div><p>å¯ä»¥ç™¼ç¾ php.ini æœƒæŠŠã€Œ <code>.</code> ã€ (ä¹Ÿå°±æ˜¯ç•¶å‰ç›®éŒ„) åšç‚ºé è¨­çš„å¼•å…¥è·¯å¾‘ã€‚è€Œåœ¨ã€Œ <code>.</code> ã€é€™å€‹è·¯å¾‘å¾Œé¢ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥åŠ å…¥è‡ªè¨‚çš„å¼•å…¥ä½ç½®ï¼Œåƒæ˜¯ <code>&quot;c:\php\include&quot;</code> ç­‰ç­‰ã€‚</p>
<p>è¨»ï¼šç›®éŒ„å‰çš„åˆ†éš”ç¬¦è™Ÿï¼Œåœ¨ Unix å’Œ Windows æ˜¯ä¸åŒçš„ (åˆ†åˆ¥æ˜¯ã€Œ <code>:</code> (å†’è™Ÿ) ã€åŠã€Œ <code>;</code> (åˆ†è™Ÿ) ã€) ã€‚åœ¨ PHP ç¨‹å¼è£¡ï¼Œæˆ‘å€‘å¯ä»¥ç”¨ <code>PATH_SEPARATOR</code> é€™å€‹é å®šç¾©å¸¸æ•¸ä¾†è¡¨ç¤ºã€‚</p>
<p>å› æ­¤å¦‚æœåœ¨ç¨‹å¼è£¡ä¸æŒ‡å®šå‰é¢çš„è·¯å¾‘ä½ç½®æ™‚ï¼Œ PHP ç¨‹å¼å°±æœƒä¾ç…§ <code>include_path</code> æ‰€è¨­å®šçš„è·¯å¾‘ä¸€ä¸€å»å°‹æ‰¾ç¬¦åˆçš„æª”æ¡ˆ (æœ‰æ‰¾åˆ°å°±ä¸æœƒå†å¾€ä¸‹æ‰¾äº†) ã€‚</p>
<p>ä¾‹å¦‚æˆ‘å€‘çš„ include_path å…§å®¹ç‚ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">include_path</span> <span class="o">=</span> <span class="s">&#34;.;c:\php5\PEAR;c:\php5\library&#34;</span>
</code></pre></div><p>é‚£éº¼å¦‚æœæˆ‘å€‘åœ¨ <code>D:\WEB\wwwroot\index.php</code> å¼•å…¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">require &#39;Zend/Loader.php&#39;;
</code></pre></div><p>é‚£éº¼ PHP å°±æœƒä¾ç…§ä»¥ä¸‹é †åºå°‹æ‰¾ <code>Zend/Loader.php</code> ï¼š</p>
<ul>
<li><code>D:\WEB\wwwroot\Zend\Loader.php</code></li>
<li><code>c:\php5\PEAR\Zend\Loader.php</code></li>
<li><code>c:\php5\library\Zend\Loader.php</code></li>
</ul>
<h3 id="include_path-çš„é †åºå¾ˆé‡è¦">include_path çš„é †åºå¾ˆé‡è¦</h3>
<p>å¾ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ° PHP æœƒé‡å° <code>include_path</code> æ‰€è¨­å®šçš„é †åºå»å°‹æ‰¾æª”æ¡ˆï¼Œæ‰€ä»¥ <code>include_path</code> è¨­å®šçš„è·¯å¾‘æœƒæ±ºå®š PHP æ‰¾åˆ°è¦è¼‰å…¥æª”æ¡ˆçš„æ©Ÿæœƒã€‚</p>
<p>ä¸éé€™æ¨£ä¸€ä¾†ä¹Ÿæœƒæµ®ç¾ä¸€å€‹å•é¡Œï¼šå¦‚æœè¦è¼‰å…¥çš„æª”æ¡ˆè·¯å¾‘ä¸€ç›´éƒ½æ˜¯åœ¨ <code>include_path</code> çš„æœ€å¾Œä¸€é …æ™‚ï¼Œé‚£éº¼æœƒå› ç‚ºå°‹æ‰¾æ™‚é–“éä¹…ï¼Œå°è‡´ç¨‹å¼æ•ˆç‡è®Šå·®ã€‚</p>
<p>é€™ç¨®ç‹€æ³é€šå¸¸ç™¼ç”Ÿåœ¨è¦è¼‰å…¥å¾ˆå¤šé¡åˆ¥æª”æ¡ˆçš„æ™‚å€™ï¼Œå°¤å…¶æ˜¯ç›®å‰æ™‚ä¸‹æµè¡Œçš„ MVC æ¡†æ¶ã€‚</p>
<p>æ‰€ä»¥å¾ˆå¤šæ¡†æ¶éƒ½æœƒåœ¨ç¨‹å¼ä¸€é–‹å§‹åŸ·è¡Œæ™‚ï¼Œå»èª¿æ•´ <code>include_path</code> çš„å¼•å…¥è·¯å¾‘ï¼ŒæŠŠæ¡†æ¶å¸¸ç”¨çš„é¡åˆ¥åº«è·¯å¾‘æ”¾åœ¨ <code>include_path</code> çš„ç¬¬ä¸€å€‹ï¼›è€Œç‚ºäº†ä¸å½±éŸ¿å…¶ä»–ç¨‹å¼çš„åŸ·è¡Œï¼Œæœ€å¾Œé‚„æ˜¯æœƒæŠŠç•¶å‰ç›®éŒ„ (ä¹Ÿå°±æ˜¯ã€Œ . ã€) æ”¾åœ¨ <code>include_path</code> çš„æœ€å¾Œä¸€é …ã€‚</p>
<h2 id="çµè«–">çµè«–</h2>
<p>include åŠ require å¼•å…¥è·¯å¾‘ä¸€ç›´éƒ½æ˜¯é–‹ç™¼ PHP æ™‚å¾ˆé‡è¦çš„è§€å¿µï¼Œä¸éåªè¦æŒæ¡ä¸Šè¿°çš„é‡é»å¾Œï¼Œå…¶å¯¦å®ƒå€‘ä¹Ÿä¸æ˜¯é€™éº¼é›£ä»¥ç­è§£ã€‚</p>
<p>ç¸½ä¹‹ï¼Œå…©å€‹é‡é»ï¼šè¦ä¸å°±æ˜¯ç”¨çµ•å°è·¯å¾‘ (å–„ç”¨ <code>dirname</code> ) ï¼Œè¦ä¸å°±æ˜¯ç¢ºå®š <code>include_path</code> æ‰€è¨­å®šçš„è·¯å¾‘ã€‚ä½ å°±ä¸€å®šèƒ½æ‰¾åˆ°ä½ è¦å¼•å…¥çš„æª”æ¡ˆï¼</p>
<p>å°±æ˜¯é€™éº¼ç°¡å–®ï¼</p>
]]></content>
		</item>
		
		<item>
			<title>è«‡æ¡†æ¶</title>
			<link>https://jaceju.net/about-framework/</link>
			<pubDate>Tue, 17 Nov 2009 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/about-framework/</guid>
			<description>åœ¨ Web é–‹ç™¼ç•Œæ‰“æ»¾äº†å¹¾å¹´ï¼Œå…¶å¯¦å° Web Framework çš„ç†Ÿæ‚‰åº¦ä¸ç®—å¤ªæ·ºï¼Œä½†ä¹Ÿä¸èƒ½ç®—å¤ªæ·±ã€‚ åŸºæ–¼æˆ‘å€‹äººå°ç›®å‰æ¥­ç•Œä½¿ç”¨ Web Framework çš„è§€å¯Ÿï¼Œå¤§ç•¥å€åˆ†äº†ä»¥ä¸‹æ•¸ç¨®é¡å‹ã€‚ è¨»ï¼šåŸºæœ¬ä¸Šé€™æ˜¯</description>
			<content type="html"><![CDATA[<p>åœ¨ Web é–‹ç™¼ç•Œæ‰“æ»¾äº†å¹¾å¹´ï¼Œå…¶å¯¦å° Web Framework çš„ç†Ÿæ‚‰åº¦ä¸ç®—å¤ªæ·ºï¼Œä½†ä¹Ÿä¸èƒ½ç®—å¤ªæ·±ã€‚</p>
<p>åŸºæ–¼æˆ‘å€‹äººå°ç›®å‰æ¥­ç•Œä½¿ç”¨ Web Framework çš„è§€å¯Ÿï¼Œå¤§ç•¥å€åˆ†äº†ä»¥ä¸‹æ•¸ç¨®é¡å‹ã€‚</p>
<p>è¨»ï¼šåŸºæœ¬ä¸Šé€™æ˜¯ä¸€ç¯‡å˜´ç‚®æ–‡ï¼Œéƒ¨ä»½è«–é»æ˜¯å€‹äººæƒ³æ³•ï¼Œè‹¥æœ‰è¬¬èª¤é‚„æœ›æŒ‡æ­£ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="ä¸çŸ¥æ¡†ç‚ºä½•ç‰©">ä¸çŸ¥æ¡†ç‚ºä½•ç‰©</h2>
<p>Framework å°æœ‰äº›å·¥ç¨‹å¸«ä¾†èªªæ˜¯å¾ˆé™Œç”Ÿçš„ï¼Œä½†é€™ä¸è¡¨ç¤ºèªªä»–å€‘ä¸€å®šæ˜¯åˆå­¸è€…ï¼Œä»–å€‘å¯èƒ½æ˜¯å·²ç¶“åœ¨ Web é–‹ç™¼å¥½å¹¾å¹´ï¼Œåªæ˜¯å› ç‚º Web Framework é€™ç¨®æ¦‚å¿µæ˜¯é€™å¹¾å¹´æ‰è¼ƒç‚ºè“¬å‹ƒç™¼å±•ã€‚</p>
<p>ä¸éé€šå¸¸é€™é¡å·¥ç¨‹å¸«éƒ½æœ‰ä¸€ç¨®ç‰¹æ€§ï¼Œé‚£å°±æ˜¯å¢¨å®ˆæˆè¦ï¼›ä»–å€‘æœƒè‡ªå·±æœ‰è‡ªå·±çš„ä¸€å¥—é–‹ç™¼æ¨¡å¼ï¼Œä¹Ÿä¸æœƒç‰¹æ„å»å­¸ç¿’æ–°çš„æ¶æ§‹ï¼Œç°¡å–®èªª&hellip;ä»–å€‘èªç‚ºæ´»å¾—ä¸‹å»æœ€é‡è¦ã€‚</p>
<h2 id="åªè¦‹æ¡†å½¢ä¸å¾—æ¡†é«“">åªè¦‹æ¡†å½¢ï¼Œä¸å¾—æ¡†é«“</h2>
<p>å‰›é–‹å§‹ä½¿ç”¨ Framework çš„é–‹ç™¼è€…ï¼Œä»–å€‘å¤§å¤šæ˜¯é©šå¥‡æ–¼æ¡†æ¶æ‰€å¸¶ä¾†çš„ä¾¿åˆ©æ€§ï¼Œå› ç‚ºä»¥å¾€è¦èŠ±å¾ˆå¤šåŠŸå¤«çš„æ‰åšå¾—å‡ºä¾†çš„åŠŸèƒ½ï¼Œç”¨äº† Framework å…©ä¸‰ä¸‹å°±æå®šã€‚</p>
<p>ä½†å¤šæ•¸é€™æ¨£çš„é–‹ç™¼è€…åè€Œå¸¸è¢« Framework çµ¦ç¶ä½ï¼Œåªè¦ Framework æ²’æœ‰æä¾›çš„åŠŸèƒ½ï¼Œä»–å€‘å°±æœƒé–‹å§‹ä¸çŸ¥æ‰€æªï¼Œåƒæ˜¯å¤±å»æ–¹å‘æ„Ÿçš„èèŸ»ä¸€æ¨£åœ¨å„å¤§è«–è­ åˆ°è™•äº‚ç«„ã€‚</p>
<h2 id="æ¡†ä¸ç‚ºæ¡†éæ¡†ä¹Ÿ">æ¡†ä¸ç‚ºæ¡†ï¼Œéæ¡†ä¹Ÿ</h2>
<p>æœ‰ä¸€äº›å·²ç¶“å° Framework è™•æ–¼ç‹‚ç†±éšæ®µçš„é–‹ç™¼è€…ï¼Œä»–å€‘èªç‚º Framework å°±æ˜¯è¦æä¾›å¿«é€Ÿå»ºç«‹å°ˆæ¡ˆçš„å·¥å…·ã€è¦æœ‰å¼·å¤§çš„ ORM å¥—ä»¶ï¼Œæˆ–æ˜¯å…¶ä»–èƒ½è®“ä»–å€‘ç¬é–“æ“æœ‰è¶…é«˜ç”¢èƒ½çš„æ©Ÿåˆ¶ã€‚</p>
<p>æ‰€ä»¥åªè¦æœ‰ Framework æ¨å‡ºæ™‚ï¼Œæ²’æœ‰é€™äº›å¼·å¤§çš„å‚¢ç§ï¼Œé‚£éº¼å°±æœƒè¢«ä»–å€‘æ‰“å…¥ Library ä¹‹åˆ—ï¼Œä¸èƒ½æ­£åç‚º Framework ã€‚</p>
<h2 id="é€Ÿä¿¡é”è€…æ¡†ä¹Ÿ">é€Ÿã€ä¿¡ã€é”è€…ï¼Œæ¡†ä¹Ÿ</h2>
<p>æœ‰äº›é–‹ç™¼åœ˜éšŠçš„é ˜å°è€…ï¼Œå¸¸è‹¦æƒ±æ²’æœ‰ä¸€å€‹å¥½çš„æ–¹å‘èƒ½è®“å¤§å®¶éµè¡Œï¼Œ Framework çš„å‡ºç¾è®“ä»–é«˜èˆˆäº†å¥½ä¸€é™£å­ã€‚</p>
<p>åœ¨ç ”ç©¶äº†æ•¸å€‹æ™‚ä¸‹æµè¡Œçš„ Framework å¾Œï¼Œä»–ç™¼ç¾ Framework å®˜æ–¹çš„é‚£äº›ç‰¹è‰²å±•ç¤ºä¸éå°±æ˜¯å™±é ­è€Œå·²ï¼›è®“åœ˜éšŠèƒ½æ“æœ‰å¿«é€Ÿã€ç©©å®šã€ä¸¦å®Œæˆå®¢æˆ¶ç›®æ¨™ï¼Œæ‰æ˜¯ä¸€å€‹å¥½çš„ Framework çœŸæ­£æ‡‰è©²è¦åšåˆ°çš„ã€‚</p>
<h2 id="æ‰‹ä¸­æœ‰æ¡†å¿ƒä¸­ç„¡æ¡†">æ‰‹ä¸­æœ‰æ¡†ï¼Œå¿ƒä¸­ç„¡æ¡†</h2>
<p>æŸäº›é–‹ç™¼è€…èµ°åˆ°äº†é«˜æ‰‹çš„åœ°æ­¥ï¼Œ Framework åœ¨ä»–å€‘çš„æ‰‹ä¸Šï¼Œå°±æ˜¯ä¸€æŠŠç„¡å½¢çš„åŠï¼Œå¿µåˆ°å³åŠåˆ°ï¼›å³ä¾¿æ˜¯æ®˜åŠï¼Œä¹Ÿç„¡ææ–¼ä»–å€‘åˆ¶æ•µæ–¼æ©Ÿå…ˆã€‚</p>
<p>ä»–å€‘å° Framework å·²ç¶“ç­ç„¶æ–¼èƒ¸ã€‚ä»–å€‘ä¸æœƒå› ç‚º Framework è€Œä½¿å‰µæ„å—é™ï¼Œå³ä¾¿æœ‰äº›åŠŸèƒ½åœ¨ Framework ä¸­æ‰¾ä¸åˆ°ï¼Œä»–å€‘ä¹Ÿèƒ½å¤ ç”¨è‡ªå·±æ‰€å­¸ä¾†å½Œè£œ Framework çš„ä¸è¶³ã€‚</p>
<h2 id="ä¿¡æ‰‹æ»ä¾†éƒ½æ˜¯æ¡†">ä¿¡æ‰‹æ»ä¾†éƒ½æ˜¯æ¡†</h2>
<p>å‰µä½œå‡º Framework çš„äººï¼Œå¤šæ•¸éƒ½æ˜¯æœ‰è‘—éå¸¸è±å¯Œç¶“é©—çš„é–‹ç™¼è€…ï¼›ç‚ºäº†èƒ½å‚³æ‰¿é€™äº›ç¶“é©—ä¸¦å†åˆ©ç”¨ï¼Œæ‰€ä»¥ä»–å€‘é€éç¨‹å¼ç¢¼æŠŠå®ƒåŒ…è£èµ·ä¾†ã€‚</p>
<p>ä»–å€‘èƒ½æŠŠæˆ‘å€‘è¦èŠ±å¥½å¹¾å€‹æœˆç”šè‡³å¥½å¹¾å¹´æ‰èƒ½åƒé€çš„çŸ¥è­˜ï¼Œæ‰¾å‡ºå…¶å…±é€šçš„éƒ¨ä»½ä¸¦å°è£åœ¨æ¡†æ¶è£¡ï¼Œç„¶å¾Œå†çµ¦æˆ‘å€‘ä¸€å€‹æ—¢å®šçš„æ–¹å¼ï¼Œå‘Šè¨´æˆ‘å€‘æ€éº¼å»ä¿®æ”¹éœ€è¦è®Šå‹•çš„åœ°æ–¹ã€‚</p>
<p>ä»–å€‘æ‡‚å¾—ä¸€åˆ‡ï¼Œä¹Ÿæ‡‚å¾—æ€éº¼è®“æˆ‘å€‘ç”¨ç°¡å–®çš„æ–¹å¼å»ä½¿ç”¨é€™é€™ä¸€åˆ‡ã€‚</p>
<h2 id="ç„¡æ¡†å³æœ‰æ¡†å–„ç”¨ä¸€åˆ‡è€Œå·²">ç„¡æ¡†å³æœ‰æ¡†ï¼Œå–„ç”¨ä¸€åˆ‡è€Œå·²</h2>
<p>åƒ PHP æœ¬èº«å»£ç¾©ä¸Šè€Œè¨€å°±æ˜¯ä¸€å€‹ Framework ï¼Œå®ƒé»åˆäº†æ‰€æœ‰æˆ‘å€‘æ‰€éœ€è¦çš„å·¥å…·ï¼Œä½†çµ•å¤§å¤šæ•¸çš„é–‹ç™¼è€…ä¸æœƒèªç‚ºè‡ªå·±èº«è™•åœ¨ PHP é€™å€‹ Framework è£¡ã€‚</p>
<p>ä½†æ˜¯æˆ‘å€‘é‚„æ˜¯èƒ½é€é PHP è®“ Web å¤šé‡‡å¤šå§¿ï¼Œè®“æˆ‘å€‘çš„æƒ³åƒåŠ›ç„¡é™å»¶ä¼¸åœ¨ç„¡çª®ç„¡ç›¡åœ°ç¶²è·¯ä¸–ç•Œ&hellip;</p>
<p>åªè¦æˆ‘å€‘ç”¨å°äº†å·¥å…·ã€‚</p>
<h2 id="ä¸–ä¸Šæœ¬ç„¡æ¡†æœ¬è³ªç‚ºç‹">ä¸–ä¸Šæœ¬ç„¡æ¡†ï¼Œæœ¬è³ªç‚ºç‹</h2>
<p>åœ¨åƒ Google é€™ç¨®å¤§å…¬å¸è£¡çš„é–‹ç™¼è€…ï¼Œ Framework å°ä»–å€‘ä¾†èªªåè€Œæ˜¯ä¸€ç¨®ä¾·é™ï¼›ä»–å€‘çœ‹åˆ°çš„ä¸–ç•Œé æ¯”æˆ‘å€‘å»£å¾—å¤šï¼Œä»–å€‘è™•ç†çš„è³‡æ–™æ—©å·²è¶…éæˆ‘å€‘çš„æƒ³åƒã€‚</p>
<p>ä»–å€‘å‰µé€ çš„æ˜¯ Framework ä»¥å¤–çš„ä¸–ç•Œï¼Œå‡¡äººå‘€ï¼é‚£ä¾¿æ˜¯å»£å¤§çš„é›²ç«¯ï¼</p>
<p>å¹¸å¥½ï¼Œä»–å€‘é‚„æ˜¯çµ¦äº†æˆ‘å€‘ä¸€æ¶é£›æ©Ÿã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>[PHP] ç­è§£ static é—œéµå­—</title>
			<link>https://jaceju.net/php-static/</link>
			<pubDate>Wed, 19 Aug 2009 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/php-static/</guid>
			<description>å…ˆå‰åŒäº‹è©¢å•æœ‰é—œ PHP static é—œéµå­—çš„ç”¨æ³•ï¼Œé€™è£¡æˆ‘ç°¡å–®æ•´ç†ä¸€ä¸‹ã€‚ static ä¸»è¦ç”¨é€”åœ¨æ–¼å®šç¾©ä¸€å€‹è®Šæ•¸ç©ºé–“ï¼Œè®“å‡½å¼æˆ–é¡åˆ¥å¯ä»¥ä¿ç•™ä½è©²è®Šæ•¸çš„å€¼ï¼Œç›´åˆ°ä¸‹æ¬¡çš„å­˜å–ã€‚ ä»¥ä¸‹</description>
			<content type="html"><![CDATA[<p>å…ˆå‰åŒäº‹è©¢å•æœ‰é—œ PHP static é—œéµå­—çš„ç”¨æ³•ï¼Œé€™è£¡æˆ‘ç°¡å–®æ•´ç†ä¸€ä¸‹ã€‚</p>
<p>static ä¸»è¦ç”¨é€”åœ¨æ–¼å®šç¾©ä¸€å€‹è®Šæ•¸ç©ºé–“ï¼Œè®“å‡½å¼æˆ–é¡åˆ¥å¯ä»¥ä¿ç•™ä½è©²è®Šæ•¸çš„å€¼ï¼Œç›´åˆ°ä¸‹æ¬¡çš„å­˜å–ã€‚</p>
<p>ä»¥ä¸‹å°±å„åˆ¥ä¾†æ¢è¨ static åœ¨å‡½å¼èˆ‡é¡åˆ¥ä¸­çš„ç”¨æ³•ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å‡½å¼è£¡çš„-static-é—œéµå­—">å‡½å¼è£¡çš„ static é—œéµå­—</h2>
<p>å…ˆä¾†çœ‹çœ‹ä»¥ä¸‹çš„ä¾‹å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function getCount()
{
    static $count = 0;
    $count ++;
    return $count;
}

for ($i = 0; $i <span class="p">&lt;</span> <span class="nt">10</span><span class="err">;</span> <span class="err">$</span><span class="na">i</span> <span class="err">++)</span> <span class="err">{</span>
   <span class="na">echo</span> <span class="na">getCount</span><span class="err">(),</span> <span class="err">&#34;\</span><span class="na">n</span><span class="err">&#34;;</span>
<span class="err">}</span>
<span class="err">/*</span> <span class="na">output:</span>
<span class="na">1</span>
<span class="na">2</span>
<span class="na">3</span>
<span class="na">4</span>
<span class="na">5</span>
<span class="na">6</span>
<span class="na">7</span>
<span class="na">8</span>
<span class="na">9</span>
<span class="na">10</span>
<span class="err">*/</span>
</code></pre></div><p>é¦–å…ˆæˆ‘å€‘åœ¨ <code>getCount()</code> é€™å€‹æ–¹æ³•ä¸­å®šç¾©äº†ä¸€å€‹ static è®Šæ•¸ <code>$count</code> ï¼Œç„¶å¾Œæ¯æ¬¡å‘¼å« <code>getCount()</code> æ™‚ï¼Œå°±æœƒå° $count ä½œç´¯åŠ çš„å‹•ä½œã€‚</p>
<p>æ¥è‘—æˆ‘å€‘é€éè¿´åœˆåŸ·è¡Œåæ¬¡ <code>getCount()</code> æ–¹æ³•ï¼Œä¾¿å¯å¾—åˆ°äº† 1 ~ 10 çš„è¼¸å‡ºçµæœã€‚</p>
<p>é€™æ˜¯å› ç‚ºå°‡è®Šæ•¸å®£å‘Šç‚º static å¾Œï¼Œç¬¬ä¸€æ¬¡å‘¼å« <code>getCount()</code> é€™å€‹æ–¹æ³•æ™‚ï¼Œæœƒç‚º <code>$count</code> ä¿ç•™ä¸€å¡Šè¨˜æ†¶é«”ç©ºé–“ï¼›è€Œç•¶è„«é›¢äº† <code>getCount()</code> çš„è®Šæ•¸ä½œç”¨åŸŸå¾Œï¼Œé€™å€‹è¨˜æ†¶é«”ç©ºé–“ä¸¦ä¸æœƒè¢«æ¶ˆæ»…æ‰ï¼Œè€Œæœƒåœ¨ä¸‹ä¸€æ¬¡å‘¼å« <code>getCount()</code> æ–¹æ³•æ™‚ï¼Œå†æ¬¡è¢«é…ç½®é€²ä¾†ï¼Œä¸¦é‚„åŸå…ˆå‰çš„è®Šæ•¸å€¼ã€‚</p>
<p>å› æ­¤ï¼Œé™¤äº†ç¬¬ä¸€æ¬¡å‘¼å« getCount() æ–¹æ³•å¤–ï¼Œæ¥ä¸‹ä¾†çš„æ¯æ¬¡å‘¼å«éƒ½æœƒè®“ <code>$count</code> å€¼ç´¯åŠ ï¼Œè€Œå¾—åˆ° 1 ~ 10 çš„è¼¸å‡ºçµæœï¼›å¦‚æœæŠŠ <code>static</code> é—œéµå­—æ‹¿æ‰ï¼Œå°±æœƒè¼¸å‡ºåæ¬¡çš„ 1 ã€‚</p>
<h2 id="æ‡‰ç”¨åœ¨éè¿´ä¸Šçš„-static-é—œéµå­—">æ‡‰ç”¨åœ¨éè¿´ä¸Šçš„ static é—œéµå­—</h2>
<p>ç­è§£å‡½å¼ä¸­çš„ static é—œéµå­—ç”¨æ³•å¾Œï¼Œæˆ‘å€‘ä¾†çœ‹ä¸€å€‹æ‡‰ç”¨çš„ä¾‹å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function fibV1($n)
{
    if ($n <span class="err">&lt;</span>= 2) {
        return 1;
    } else {
        return fibV1($n - 2) + fibV1($n - 1);
    }
}
</code></pre></div><p>é€™æ˜¯ PHP ç‰ˆçš„ Fibonacci Sequence éè¿´å‡½å¼ï¼ŒåŸç†æˆ‘å°±ä¸å¤šèªªæ˜äº†ã€‚å…ˆä¾†çœ‹çœ‹å®ƒåœ¨åƒæ•¸ç‚º 20 æ™‚æ‰€éœ€è¦çš„åŸ·è¡Œæ™‚é–“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$start_time = (float) microtime(true);
echo fibV1(20), &#34;\n&#34;;
$end_time = (float) microtime(true);
echo &#34;Spent Time: &#34;, ($end_time - $start_time), &#34;(s)\n&#34;;
/* output:
6765
Spent Time: 0.26100397109985(s)
*/
</code></pre></div><p>é€™è£¡ä»£å…¥çš„æ•¸å­—è¶Šå¤§ï¼ŒåŸ·è¡Œæ™‚é–“æœƒè¶Šé•·ã€‚</p>
<p>ç¾åœ¨æˆ‘å€‘ç”¨ static é—œéµå­—ä¾†æ”¹å¯«ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function fibV2($n)
{
    static $result = array();
    if (!isset($result[$n])) {
        if ($n <span class="err">&lt;</span>= 2) {
            $result[$n] = 1;
        } else {
            $result[$n] = fibV2($n - 2) + fibV2($n - 1);
        }
    }
    return $result[$n];
}
</code></pre></div><p>ç„¶å¾Œå†ä¾†çœ‹åŸ·è¡Œçš„æ™‚é–“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$start_time = (float) microtime(true);
echo fibV2(20), &#34;\n&#34;;
$end_time = (float) microtime(true);
echo &#34;Spent Time: &#34;, ($end_time - $start_time), &#34;(s)\n&#34;;
/* output:
6765
Spent Time: 0.0009009838104248(s)
*/
</code></pre></div><p>é€Ÿåº¦ç«Ÿç„¶å·®äº†å¿«ä¸‰ç™¾å€ï¼ç‚ºä»€éº¼ï¼Ÿ</p>
<p>å…¶å¯¦æ˜¯å› ç‚ºé€™è£¡çš„ static é—œéµå­—æ‰®æ¼”äº† cache çš„è§’è‰² () ï¼Œè®“ç¨‹å¼ä¸ç”¨é‡æ–°è¨ˆç®—å·²ç¶“ç®—å¥½çš„çµæœã€‚è€Œä½¿ç”¨äº† static é—œéµå­—å¾Œï¼Œä¹Ÿä½¿å¾—åŸ·è¡Œæ™‚é–“ä¸æœƒå†éš¨è‘—ä»£å…¥æ•¸å­—è®Šå¤§è€Œè®Šé•·ã€‚</p>
<p>è¨»ï¼šä¸æ˜¯ä»»ä½•éè¿´å‡½å¼éƒ½å¯ä»¥ç”¨ static è®Šæ•¸ä¾†åš cache ï¼Œåœ¨ä½¿ç”¨ä¸Šè¦ç‰¹åˆ¥æ³¨æ„é€™ä¸€é»ã€‚</p>
<h2 id="é¡åˆ¥è£¡çš„-static-é—œéµå­—">é¡åˆ¥è£¡çš„ static é—œéµå­—</h2>
<p>åœ¨é¡åˆ¥è£¡çš„ <code>static</code> é—œéµå­—ï¼Œä¹Ÿæ‰®æ¼”äº†é¡ä¼¼çš„è§’è‰²ã€‚æˆ‘å€‘åˆ©ç”¨ <code>static</code> åœ¨é¡åˆ¥è£¡å®šç¾©çš„å±¬æ€§ï¼Œæœƒä½”ç”¨é¡åˆ¥çš„è¨˜æ†¶é«”ç©ºé–“ã€‚è€Œé€éåŒä¸€é¡åˆ¥æ‰€ç”Ÿæˆçš„ç‰©ä»¶ï¼Œæœƒå½¼æ­¤å…±äº«é€™å€‹ static å±¬æ€§ï¼›æ‰€ä»¥ä¸è«–æˆ‘å€‘ç”¢ç”Ÿå¤šå°‘åŒé¡åˆ¥çš„ç‰©ä»¶ï¼Œå®ƒå€‘éƒ½æœƒå­˜å–åˆ°åŒä¸€å€‹ static é¡åˆ¥å±¬æ€§ã€‚</p>
<p>ä¾†çœ‹çœ‹ä»¥ä¸‹çš„ä¾‹å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class DB
{
    private static $_instance = null;

    private static $_instanceCount = 0;

    private function __construct()
    {
        self::$_instanceCount ++;
    }

    public static function getInstance()
    {
        if (null === self::$_instance) {
            self::$_instance = new self();
        }
        return self::$_instance;
    }

    public function getInstanceCount()
    {
        return self::$_instanceCount;
    }
}
$db1 = DB::getInstance();
echo $db1-&gt;getInstanceCount(), &#34;\n&#34;; // 1
$db2 = DB::getInstance();
echo $db2-&gt;getInstanceCount(), &#34;\n&#34;; // 1
</code></pre></div><p>ç¯„ä¾‹å³ç‚ºç¶“å…¸çš„ Singleton æ¨¡å¼ï¼ŒåŸç†é€™è£¡å…ˆä¸å¤šåšèªªæ˜ã€‚</p>
<p>é€™è£¡æˆ‘å€‘å®šç¾©äº†å…©å€‹é¡åˆ¥ static å±¬æ€§ï¼Œåˆ†åˆ¥æ˜¯ <code>$_instance</code> åŠ <code>$_instanceCount</code> ï¼›è€Œé€é <code>static</code> å®šç¾©çš„é¡åˆ¥å±¬æ€§ï¼Œåœ¨é¡åˆ¥è£¡å­˜å–æ™‚è¦ç”¨ <code>self</code> é—œéµå­—åŠ ä¸Šé›™å†’è™Ÿ (<code>::</code>) ï¼Œä¾‹å¦‚ <code>self::$_instance</code> ã€‚</p>
<p>æ¥è‘—æˆ‘å€‘å¯ä»¥çœ‹åˆ°åœ¨ <code>getInstance()</code> æ–¹æ³•ä¸­ï¼Œå¦‚æœ <code>self::$_instance</code> æ˜¯ null çš„è©±ï¼Œè¡¨ç¤ºæ˜¯ç¬¬ä¸€æ¬¡å‘¼å«ï¼Œé‚£éº¼ç¨‹å¼å°±æœƒé€éç§æœ‰çš„å»ºæ§‹å¼ç”¢ç”Ÿä¸€å€‹ DB ç‰©ä»¶æŒ‡å®šçµ¦ <code>self::$_instance</code> è®Šæ•¸ï¼Œæœ€å¾Œå†å°‡å®ƒå›å‚³å‡ºå»ã€‚é€™æ™‚é›–ç„¶ getInstance() è£¡çš„è®Šæ•¸ä½œç”¨åŸŸå·²ç¶“çµæŸï¼Œä½† <code>self::$_instance</code> å»æœƒä¿ç•™ä¸‹ä¾†ã€‚</p>
<p>ä¸‹ä¸€æ¬¡ <code>getInstance()</code> å‘¼å«æ™‚ï¼Œå› ç‚º <code>self::$_instance</code> å·²ç¶“ä¸å†æ˜¯ <code>null</code> å€¼ï¼Œæ‰€ä»¥å°±æœƒç›´æ¥å°‡å…¶å…§å®¹å›å‚³çµ¦å‘¼å«çš„ç¨‹å¼äº†ã€‚</p>
<p>ä¹Ÿå› ç‚ºé€™å€‹åŸå› ï¼Œæ‰€ä»¥æ•´å€‹ç¨‹å¼åŸ·è¡Œä¸‹ä¾†ï¼Œ DB çš„ <code>__construct()</code> æ–¹æ³•ä¹Ÿåªè¢«åŸ·è¡Œéä¸€æ¬¡ï¼Œä½¿å¾— <code>self::$_instanceCount</code> ä¹Ÿåªç´¯åŠ ä¸€æ¬¡ï¼Œå…¶çµæœæ°¸é ç‚º 1 ã€‚</p>
<h2 id="çµè«–">çµè«–</h2>
<p>ä¸€èˆ¬ PHP é–‹ç™¼è€…å¾ˆå°‘æœƒå»ä½¿ç”¨ <code>static</code> é—œéµå­—ï¼Œå› ç‚ºå¹³å¸¸æœƒç”¨åˆ° <code>static</code> çš„å ´åˆå…¶å¯¦ä¹Ÿä¸å¤šã€‚é€™è£¡æˆ‘å†åšä¸€æ¬¡ <code>static</code> ä½¿ç”¨æ™‚æ©Ÿçš„é‡é»æ•´ç†ï¼š</p>
<ul>
<li>éœ€è¦è¨˜ä½ä¸Šä¸€æ¬¡å‡½å¼åŸ·è¡Œçš„çµæœã€‚</li>
<li>æŸäº›å¯ä»¥ä¿ç•™åŸ·è¡Œçµæœçš„éè¿´å‡½å¼ã€‚</li>
<li>ä¸å¸Œæœ›å› ç‚ºç‰©ä»¶å€‹é«”ä¸åŒï¼Œé€²è€Œè¢«å½±éŸ¿çš„é¡åˆ¥å±¬æ€§ã€‚</li>
<li>é¡åˆ¥çš„ Singleton æ¨¡å¼ã€‚</li>
</ul>
<p>å¸Œæœ›é€éä¸Šé¢çš„èªªæ˜ï¼Œèƒ½è®“å¤§å®¶å° static é—œéµå­—æœ‰é€²ä¸€æ­¥çš„ç­è§£ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>[å¥½æ›¸] å€¼å¾—ä¸€è®€çš„ç‰©ä»¶å°å‘é–‹ç™¼ç›¸é—œæ›¸ç±</title>
			<link>https://jaceju.net/good-books-about-oo/</link>
			<pubDate>Tue, 30 Jun 2009 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/good-books-about-oo/</guid>
			<description>å†æ¬¡ä»‹ç´¹ä¸€äº›æˆ‘å€‹äººèªç‚ºå¾ˆå„ªè³ªï¼Œå¯ä»¥å¹«åŠ©å¤§å®¶å­¸ç¿’å¾ˆå¤šç‰©ä»¶å°å‘é–‹ç™¼è§€å¿µçš„æ›¸ç±ã€‚ æ·±å…¥æ·ºå‡º Java ç¨‹å¼è¨­è¨ˆ è¦ç­è§£ä»€éº¼æ˜¯ç‰©ä»¶å°å‘ï¼Œå»ºè­°å¾é€™æœ¬æ›¸é–‹å§‹å•¦~ æ·±å…¥æ·º</description>
			<content type="html"><![CDATA[<p>å†æ¬¡ä»‹ç´¹ä¸€äº›æˆ‘å€‹äººèªç‚ºå¾ˆå„ªè³ªï¼Œå¯ä»¥å¹«åŠ©å¤§å®¶å­¸ç¿’å¾ˆå¤šç‰©ä»¶å°å‘é–‹ç™¼è§€å¿µçš„æ›¸ç±ã€‚</p>
<!-- raw HTML omitted -->
<ul>
<li><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867794605&amp;sid=28153">æ·±å…¥æ·ºå‡º Java ç¨‹å¼è¨­è¨ˆ</a>
è¦ç­è§£ä»€éº¼æ˜¯ç‰©ä»¶å°å‘ï¼Œå»ºè­°å¾é€™æœ¬æ›¸é–‹å§‹å•¦~</li>
<li><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867794524&amp;sid=32306">æ·±å…¥æ·ºå‡ºè¨­è¨ˆæ¨¡å¼</a>
è¨­è¨ˆæ¨¡å¼æ˜¯ä»€éº¼ï¼Ÿé€™æœ¬æ›¸çœ‹å®Œå¾ŒåŒ…ä½ ä¸€æ¸…äºŒæ¥šã€‚</li>
<li><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9572054023&amp;sid=8021">ç‰©ä»¶å°å‘è¨­è¨ˆæ¨¡å¼</a>
è¨­è¨ˆæ¨¡å¼çš„ç¶“å…¸åè‘—ï¼Œä¸éæˆ‘å»ºè­°å…ˆçœ‹çœ‹ã€Œæ·±å…¥æ·ºå‡ºè¨­è¨ˆæ¨¡å¼ã€å¾Œå†å›é ­çœ‹é€™æœ¬ã€‚å¦å¤–é‚„æœ‰<a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9572054112&amp;sid=10828">ç²¾è£æœ¬</a>ï¼Œæ”¶è—è€…å¿…å‚™ã€‚</li>
<li><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9575278356&amp;sid=26836">Design Patterns æ–¼ Java èªè¨€ä¸Šçš„å¯¦ç¿’æ‡‰ç”¨</a>
ç”¨è¨±å¤š Java å¯¦ä¾‹ä¾†ä»‹ç´¹è¨­è¨ˆæ¨¡å¼ï¼Œå¯ä»¥è£œè¶³å‰é¢å…©æœ¬è¨­è¨ˆæ¨¡å¼æ›¸ç±çš„å¯¦ä½œè§€å¿µã€‚</li>
<li><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9789866761799&amp;sid=49583">å¤§è©±è¨­è¨ˆæ¨¡å¼</a>
å°å²¸é«˜æ‰‹å¯«çš„ä¸€æœ¬å¥½æ›¸ï¼Œç”¨äº†ç›¸ç•¶æœ‰è¶£çš„ä¾‹å­ä¾†èªªæ˜è¨­è¨ˆæ¨¡å¼ã€‚</li>
<li><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867910311&amp;sid=12245">æ¥µè‡´è»Ÿé«”è£½ç¨‹</a>
XP å¤§å¸«è‘—ä½œï¼ŒåŒ…å«è¨±å¤šæœ‰è¶£çš„è»Ÿé«”é–‹ç™¼æ–¹æ³•ï¼Œå€¼å¾—ä¸€è®€ï¼</li>
<li><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9861541489&amp;sid=26120">æ•æ·è»Ÿé«”é–‹ç™¼ï¼šåŸå‰‡ã€æ¨£å¼åŠå¯¦å‹™</a>
æƒ³èµ°ç‰©ä»¶å°å‘è»Ÿé«”é–‹ç™¼å¿…è®€æ›¸ç±ï¼</li>
<li><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=0321146530&amp;sid=15226">Test-Driven Development: By Example</a>
Kent Beck å¤§å¸«å¯«çš„å¥½æ›¸ï¼Œç”¨ç¯„ä¾‹ä¸€æ­¥ä¸€æ­¥å¸¶é ˜ä½ é€²å…¥æ¸¬è©¦é©…å‹•é–‹ç™¼ (TDD) çš„ä¸–ç•Œã€‚</li>
<li><a href="http://goo.gl/RxLA">é‡æ§‹ - æ”¹å–„æ—¢æœ‰ç¨‹å¼çš„è¨­è¨ˆ</a>
ä»‹ç´¹è¨±å¤šç°¡å–®çš„é‡æ§‹æ‰‹æ³•ï¼Œå¯ä»¥å¹«åŠ©æˆ‘å€‘æŠŠç¨‹å¼é‡æ–°ä¿®æ”¹æˆè¼ƒæ˜“ç¶­è­·çš„æ¶æ§‹ï¼Œå¿…è®€ï¼</li>
<li><a href="http://goo.gl/01kR">é‡æ§‹ - å‘ç¯„å¼å‰é€²</a>
å¦‚æœä½ å°é‡æ§‹èˆ‡è¨­è¨ˆæ¨¡å¼å·²ç¶“æœ‰ä¸€å®šçš„èªçŸ¥ï¼Œå»ä¸çŸ¥é“æ€éº¼æŠŠå®ƒå€‘çµåˆèµ·ä¾†çš„è©±ï¼Œé€™æœ¬å¿…è®€ï¼</li>
<li><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867794702&amp;sid=29190">è»Ÿé«”é å…ˆæ¶æ§‹ä¹‹ç¾å­¸</a>
å’Œé‡æ§‹æœ‰ç•°æ›²åŒå·¥ä¹‹å¦™ï¼Œä¸»è¦æ˜¯åˆ©ç”¨ç¶“é©—æ³•å‰‡ä¾†é¿å…æ‰å¾ŒçºŒéå¤šçš„é‡æ§‹å‹•ä½œï¼Œå€¼å¾—åƒè€ƒã€‚</li>
<li><a href="http://www.oreilly.com.tw/product2_java.php?id=a210">æ·±å…¥æ·ºå‡ºç‰©ä»¶å°å‘åˆ†æèˆ‡è¨­è¨ˆ</a>
å¦‚æœè¦ºå¾—å¸‚é¢ä¸Šçš„ OO åˆ†ææ›¸ç±å¤ªéæ–¼è‰±æ·±çš„è©±ï¼Œé€™æœ¬å…¥é–€æ›¸çµ•å°å€¼å¾—ä¸€è®€ï¼</li>
<li><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=0321127420&amp;sid=14658">Patterns of Enterprise Application Architecture</a>
é€™æœ¬ä¹Ÿæ˜¯è¶…æ¨çš„æ›¸ï¼ Martin Fowler è€å¤§æŠŠè¨±å¤šä¼æ¥­å¸¸è¦‹çš„è¨­è¨ˆæ¨¡å¼æ•´ç†å‡ºä¾†ï¼Œä¹Ÿæ˜¯ç•¶ä¸‹è¨±å¤š Framework è¨­è¨ˆæ™‚åƒè€ƒçš„é‡è¦æŒ‡æ¨™ï¼</li>
</ul>
<p>ä¹Ÿæ­¡è¿å¤§å®¶æä¾›æ›´å¤šå¥½æ›¸~</p>
]]></content>
		</item>
		
		<item>
			<title>[Web] Cookie å°è§€å¿µ</title>
			<link>https://jaceju.net/about-cookie/</link>
			<pubDate>Thu, 16 Apr 2009 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/about-cookie/</guid>
			<description>å•é¡Œ å‰›å‰›è¢«å•äº†ä¸€å€‹ Cookie çš„è§€å¿µï¼Œé€™é‚Šç°¡å–®åˆ†äº«çµ¦å¤§å®¶ã€‚ å…ˆä¾†çœ‹ä»¥ä¸‹é€™å€‹ç¨‹å¼ï¼Œè«‹å•å®ƒç¬¬ä¸€æ¬¡åŸ·è¡Œæ™‚çµæœæ˜¯ä»€éº¼ï¼Ÿ setcookie(&amp;#39;test&amp;#39;, &amp;#39;abc&amp;#39;); var_dump($_COOKIE); å¦‚æœä½ å›ç­”çš„æ˜¯ç©ºé™£åˆ—çš„è©±ï¼Œé‚£å°±è¡¨ç¤ºä½ </description>
			<content type="html"><![CDATA[<h2 id="å•é¡Œ">å•é¡Œ</h2>
<p>å‰›å‰›è¢«å•äº†ä¸€å€‹ Cookie çš„è§€å¿µï¼Œé€™é‚Šç°¡å–®åˆ†äº«çµ¦å¤§å®¶ã€‚</p>
<p>å…ˆä¾†çœ‹ä»¥ä¸‹é€™å€‹ç¨‹å¼ï¼Œè«‹å•å®ƒç¬¬ä¸€æ¬¡åŸ·è¡Œæ™‚çµæœæ˜¯ä»€éº¼ï¼Ÿ</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">setcookie(&#39;test&#39;, &#39;abc&#39;);
var_dump($_COOKIE);
</code></pre></div><p>å¦‚æœä½ å›ç­”çš„æ˜¯ç©ºé™£åˆ—çš„è©±ï¼Œé‚£å°±è¡¨ç¤ºä½ ç­è§£ Cookie çš„ä½œç”¨äº†ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="èªªæ˜">èªªæ˜</h2>
<p>ç•¶æˆ‘å€‘åœ¨ä½¿ç”¨ <code>setcookie</code> é€™å€‹å‡½å¼æ™‚ï¼Œå…¶å¯¦æ˜¯åœ¨å‘Šè¨´ç€è¦½å™¨ï¼š <!-- raw HTML omitted -->Server è¦åœ¨å®ƒèº«ä¸Šè¨»å†Šä¸€å€‹ cookie è®Šæ•¸ï¼Œé€™å€‹è®Šæ•¸æœƒåœ¨ä¸‹æ¬¡ç€è¦½å™¨é€£åˆ°åŒä¸€å€‹ç¶²ç«™æ™‚ï¼Œè¢«é€åˆ° Server ä¸Šã€‚<!-- raw HTML omitted --></p>
<p>æ‰€ä»¥ç¬¬ä¸€æ¬¡æˆ‘å€‘å‚¾å° <code>$_COOKIE</code> é€™å€‹è¶…å…¨åŸŸé™£åˆ—æ™‚æ˜¯æŠ“ä¸åˆ°å€¼çš„ (æ³¨æ„é€™å€‹å‹•ä½œæ˜¯åœ¨ Server ç«¯) ï¼Œå› ç‚ºé€™æ™‚ç€è¦½å™¨æ‰å‰›èªè­˜ <code>setcookie</code> ä¸Ÿå‡ºä¾†çš„ test è®Šæ•¸ã€‚</p>
<p>ç•¶ç¬¬äºŒæ¬¡ç€è¦½åŒä¸€å€‹ç¶²ç«™æ™‚ï¼Œç€è¦½å™¨å°±æœƒæŠŠè¨˜åœ¨è‡ªå·±èº«ä¸Šçš„ cookie ä¸Ÿå› Server (å°±åƒ POST ä¸€æ¨£) ï¼Œé€™æ™‚ Server (PHP) æ‰æœƒçŸ¥é“ cookie çš„å…§å®¹ï¼Œå°‡å®ƒå¡åˆ° <code>$_COOKIE</code> é™£åˆ—è£¡ã€‚</p>
<p>é›–ç„¶é€™åªæ˜¯å€‹å°è§€å¿µï¼Œä½†å¸Œæœ›èƒ½å°å¤§å®¶åœ¨ä½¿ç”¨ Cookie æœ‰é€²ä¸€æ­¥çš„ç­è§£ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>[å¿ƒå¾—æ„Ÿæƒ³] å­¸ç¿’æŠ€è¡“çš„æ­¥é©Ÿ</title>
			<link>https://jaceju.net/the-steps-to-learn-technique/</link>
			<pubDate>Wed, 15 Apr 2009 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/the-steps-to-learn-technique/</guid>
			<description>åœ¨è³‡è¨Šç”¢æ¥­ä¸Šï¼ŒæŒçºŒä¸æ–·çš„é€²æ­¥ä¸€ç›´ä»¥ä¾†éƒ½æ˜¯ä¸è¢«æ·˜æ±°çš„ä¸äºŒæ³•å‰‡ã€‚ä¸éè¦å¦‚ä½•æœ‰æ•ˆå­¸ç¿’æ–°çš„æŠ€è¡“å‘¢ï¼Ÿå…¶å¯¦æ–¹æ³•éå¸¸å¤šï¼Œè€Œä¸”æ¯å€‹äººå­¸ç¿’çš„æ–¹å¼ä¹Ÿä¸ä¸€å®šéƒ½ç›¸åŒ</description>
			<content type="html"><![CDATA[<p>åœ¨è³‡è¨Šç”¢æ¥­ä¸Šï¼ŒæŒçºŒä¸æ–·çš„é€²æ­¥ä¸€ç›´ä»¥ä¾†éƒ½æ˜¯ä¸è¢«æ·˜æ±°çš„ä¸äºŒæ³•å‰‡ã€‚ä¸éè¦å¦‚ä½•æœ‰æ•ˆå­¸ç¿’æ–°çš„æŠ€è¡“å‘¢ï¼Ÿå…¶å¯¦æ–¹æ³•éå¸¸å¤šï¼Œè€Œä¸”æ¯å€‹äººå­¸ç¿’çš„æ–¹å¼ä¹Ÿä¸ä¸€å®šéƒ½ç›¸åŒã€‚</p>
<p>å‰äº›å¤©åœ¨<a href="http://www.plurk.com/p/nim7c">å™—æµªæåˆ°æˆ‘å­¸ç¿’æŠ€è¡“çš„å¹¾å€‹æ­¥é©Ÿ</a>ï¼Œæœ‰ç¶²å‹è©¢å•æˆ‘èƒ½ä¸èƒ½é€²ä¸€æ­¥è§£èªªï¼Ÿæ‰€ä»¥å°±è—‰è‘—é€™ç¯‡æ–‡ç« ï¼Œä¾†åˆ†äº«ä¸€ä¸‹æˆ‘çš„æ–¹æ³•å§ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å…­å¤§æ­¥é©Ÿ">å…­å¤§æ­¥é©Ÿ</h2>
<h3 id="æ¥è§¸">æ¥è§¸</h3>
<p>å¾ˆå¤šæŠ€è¡“éƒ½æ˜¯å·¥ä½œæœ‰ç”¨åˆ°æ‰æœƒæƒ³å»ç¢°å®ƒï¼Œé€™æ˜¯å¤§å¤šæ•¸äººå­¸ç¿’æŠ€è¡“çš„å‹•æ©Ÿï¼Œæˆ‘å…¶å¯¦ä¹Ÿä¸ä¾‹å¤–ã€‚ä¸éæˆ‘å€‹äººä¹Ÿç¿’æ…£åœ¨ç¶²è·¯ä¸Šæ±ç¿»è¥¿æ‰¾ï¼Œå»å—…æ¢ä¸€äº›æˆ‘æœ‰èˆˆè¶£çš„æ±è¥¿ï¼Œé€™ä¹Ÿæ˜¯ä¸€ç¨®æ¥è§¸æŠ€è¡“çš„æ–¹å¼ã€‚</p>
<p>åœ¨æ¥è§¸çš„é€™å€‹æ­¥é©Ÿä¸­ï¼Œå¾ˆé‡è¦çš„ä¸€é»å°±æ˜¯ï¼šè¦å°é€™å€‹æŠ€è¡“ç”¢ç”Ÿèˆˆè¶£ã€‚å¦‚æœæ²’æœ‰èˆˆè¶£ï¼Œé‚£éº¼åœ¨å¾Œé¢çš„æ­¥é©Ÿä¸­ï¼Œå¤šæ•¸äººéƒ½æœƒå¾ˆå¿«åœ°è¦ºå¾—é€™å€‹æŠ€è¡“å¾ˆå›°é›£ï¼Œç„¶å¾Œå°±æ”¾æ£„å­¸ç¿’å®ƒäº†ã€‚</p>
<h3 id="å¯¦ä½œ">å¯¦ä½œ</h3>
<p>åœ¨æ¥è§¸æŠ€è¡“å¾Œï¼Œæˆ‘å€‹äººç¿’æ…£æœƒç”¨å®ƒä¾†å¯¦ä½œä¸€äº›ç°¡å–®çš„å°ç¨‹å¼ã€‚é€™æ¨£åšçš„ç›®çš„æœ‰å¾ˆå¤šï¼Œä½†ä¸»è¦æœ‰å…©å€‹ï¼šä¸€ä¾†å¯ä»¥ç­è§£é€™å€‹æŠ€è¡“å¯¦éš›é‹ä½œçš„æ–¹å¼ï¼ŒäºŒä¾†å¯ä»¥æ˜ç™½é€™å€‹æŠ€è¡“çš„å„ªç¼ºé»åœ¨å“ªè£¡ã€‚</p>
<p>è€Œä¸”å¯¦ä½œæŠ€è¡“é‚„èƒ½å¢åŠ ä½ å°é€™å€‹æŠ€è¡“çš„ç†Ÿç¨”åº¦ï¼Œå¦‚æœå“ªä¸€å¤©å°ˆæ¡ˆçœŸçš„éœ€è¦ç”¨åˆ°å®ƒæ™‚ï¼Œä½ å°±èƒ½å¾ˆå¿«çŸ¥é“å®ƒè©²æ€éº¼ç”¨ã€‚</p>
<h3 id="ç­è§£">ç­è§£</h3>
<p>å¤§éƒ¨ä»½æ™‚å€™ï¼Œæˆ‘å€‘åªè¦æœƒã€Œç”¨ã€æŠ€è¡“å°±å¯ä»¥äº†ã€‚ä¸éèº«ç‚ºä¸€å€‹ IT äººï¼Œèº«ä¸Šå¸¶è‘—&hellip;ä¸å°&hellip;å»å¼„æ¸…æ¥šé€™å€‹æŠ€è¡“çš„åŸç†æ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<p>å°±åƒæˆ‘å€‘åœ¨ä½¿ç”¨ jQuery çš„ Plugin ä¸€æ¨£ï¼Œå¤šæ•¸çš„ Plugins éƒ½æœƒæä¾›æ–‡ä»¶æˆ–ç¯„ä¾‹ï¼Œç„¶å¾Œæˆ‘å€‘åªè¦é‡å°å®ƒçš„é¸é …åšä¿®æ”¹å³å¯ã€‚ç„¶è€Œé€™äº› Plugins å…¶å¯¦éƒ½æ˜¯æŠŠä¸€äº›æŠ€è¡“åŸç†åŒ…è£èµ·ä¾†ï¼Œæ–¹ä¾¿æˆ‘å€‘ä½¿ç”¨ã€‚å»ç­è§£é€™äº› Plugins èƒŒå¾Œçš„é‹ä½œåŸç†ï¼Œå¯ä»¥å¹«åŠ©æˆ‘å€‘æœªä¾†åœ¨ä¸æ–¹ä¾¿ä½¿ç”¨ Plugins æˆ–æ˜¯æƒ³è¦é€²ä¸€æ­¥æ”¹è‰¯å®ƒå€‘æ™‚ï¼Œèƒ½å¤ æ›´æ¸…æ¥šåœ°çŸ¥é“è‡ªå·±è©²æ€éº¼è™•ç†ã€‚</p>
<h3 id="æ‡‰ç”¨">æ‡‰ç”¨</h3>
<p>ä¸Šé¢æåˆ°å¯¦ä½œæ˜¯æŒ‡è‡ªå·±å…ˆå¯«ä¸€äº›å°ç¨‹å¼ä¾†ç†Ÿæ‚‰é€™å€‹æŠ€è¡“ï¼Œç•¶ç„¶å¦‚æœè¦ºå¾—é€™å€‹æŠ€è¡“èƒ½æ´¾ä¸Šç”¨å ´æ™‚ï¼Œå°±åˆ¥æ”¾æ£„é€™å€‹æ©Ÿæœƒå•¦ã€‚åœ¨æ‡‰ç”¨æŠ€è¡“ä¹‹å‰ï¼Œè¦è¨˜å¾—ä»”ç´°è©•ä¼°å®ƒå°å°ˆæ¡ˆçš„é©ç”¨ç¨‹åº¦ï¼Œæ‰€ä»¥é€™å°±å¾—ä¾è³´è‡ªå·±å°é€™å€‹æŠ€è¡“çš„æŒæ¡æœ‰å¤šå°‘ã€‚</p>
<p>å¦‚æœé€™å€‹æŠ€è¡“åå‘æ–¼è¦–è¦ºåŒ–æ‡‰ç”¨æ™‚ï¼Œé‚„è¦ç‰¹åˆ¥æ³¨æ„å®¢æˆ¶æ˜¯å¦å¾ˆè¦æ±‚é é¢ä¸Šçš„å‘ˆç¾ã€‚å¦‚æœé€™å€‹å®¢æˆ¶æƒ³è¦çš„ç•«é¢è·Ÿä½ æ‰€ç”¨çš„æŠ€è¡“çš„å‘ˆç¾æ•ˆæœä¸åˆæ™‚ï¼Œä¹Ÿåƒè¬åˆ¥æ°£é¤’ï¼›é€™æ™‚å¦‚æœä½ ç­è§£é€™å€‹æŠ€è¡“çš„åŸç†ï¼Œé‚£éº¼å°±å¯ä»¥èˆ‰ä¸€åä¸‰ï¼Œå°‡å®ƒå¥—ç”¨åœ¨å®¢æˆ¶æ‰€èªå¯çš„é é¢ä¸Šã€‚</p>
<h3 id="ç°¡åŒ–">ç°¡åŒ–</h3>
<p>å› ç‚ºæˆ‘å€‹äººè¨˜æ†¶åŠ›ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥ç•¶æˆ‘å°æŸé …æŠ€è¡“ç­è§£è‡³ä¸€å®šç¨‹åº¦æ™‚ï¼Œæˆ‘æœƒç¿’æ…£æŠŠå®ƒç°¡åŒ–ã€‚é€™æ¨£ä¸ä½†å¯ä»¥è®“æˆ‘åœ¨å›é¡§é€™å€‹æŠ€è¡“æ™‚ï¼Œèƒ½å¾ˆå¿«æŒæ¡å®ƒçš„ç²¾é«“ï¼›è€Œä¸”å¦‚æœè¦åˆ†äº«çµ¦å…¶ä»–äººæ™‚ï¼Œæ›´èƒ½è®“åˆ¥äººç­è§£é€™å€‹æŠ€è¡“çš„æœ¬è³ªæ˜¯ä»€éº¼ã€‚</p>
<p>ç•¶ç„¶ä¹Ÿä¸æ˜¯ä»€éº¼æŠ€è¡“æˆ‘éƒ½èƒ½ç°¡åŒ–ï¼Œå› ç‚ºé€™å¾—çœ‹æˆ‘å°é€™å€‹æŠ€è¡“çš„ç­è§£ç¨‹åº¦æœ‰å¤šæ·±ï¼Œä»¥åŠæˆ‘å°é€™å€‹æŠ€è¡“èƒ½ä¸èƒ½æ‰¾åˆ°ä¸€å€‹èƒ½é¡æ¯”çš„ä¾‹å­ã€‚æ‰€ä»¥é€™å€‹æ­¥é©Ÿæˆ‘ä¹Ÿä¸ä¸€å®šæœƒå»åšï¼Œæˆ‘åœ¨ä¹çš„æ˜¯æˆ‘æ˜¯ä¸æ˜¯çœŸçš„èƒ½é‹ç”¨é€™å€‹æŠ€è¡“è€Œå·²ã€‚</p>
<h3 id="åˆ†äº«">åˆ†äº«</h3>
<p>å¾ˆå¤šäººå­¸åˆ°æŠ€è¡“ä»¥å¾Œï¼Œå°±ç¿’æ…£æŠ±è‘—ä¸æ”¾ï¼Œæˆ‘å€‹äººå‰‡æ˜¯å–œæ­¡æŠŠå®ƒå€‘åˆ†äº«å‡ºä¾†ã€‚åˆ†äº«æŠ€è¡“æœ‰å¾ˆå¤§çš„å¥½è™•ï¼Œä¸€å‰‡å¯ä»¥è®“å…¶ä»–äººä¹Ÿå­¸åˆ°æ±è¥¿ï¼ŒäºŒå‰‡æˆ‘å¯ä»¥å¾åˆ¥äººåœ¨æ‡‰ç”¨é€™å€‹æŠ€è¡“éç¨‹ä¸­ï¼Œå¾—åˆ°ä»–å€‘å°æ–¼é€™å€‹æŠ€è¡“çš„åé¥‹ã€‚ç„¶å¾Œåœ¨ä»–å€‘çš„å›é¥‹è£¡ï¼Œæˆ‘å°±å¯ä»¥æ˜ç™½æˆ‘è‡ªå·±å°é€™å€‹æŠ€è¡“æ˜¯ä¸æ˜¯çœŸçš„ç­è§£äº†ï¼Œæ˜¯ä¸æ˜¯çœŸçš„èƒ½æ‡‰ç”¨è‡ªå¦‚ã€‚</p>
<p>è€Œåˆ†äº«çš„æ–¹æ³•å¾ˆå¤šï¼Œåƒæ˜¯æ’°å¯«éƒ¨è½æ ¼æ–‡ç« ã€åœ¨å…¬å¸èˆ‰è¾¦å…§éƒ¨æ•™è‚²è¨“ç·´ç­‰ç­‰ã€‚æœ€é‡è¦çš„æ˜¯ä¸è¦åæ–¼å»åˆ†äº«ï¼Œä¹Ÿä¸è¦å®³æ€•å»åˆ†äº«ã€‚åªæœ‰é€éäº¤æµåˆ†äº«ï¼Œä½ æ‰èƒ½ç²å¾—æ›´å¤šæ±è¥¿ã€‚</p>
<h2 id="æ„Ÿæƒ³">æ„Ÿæƒ³</h2>
<p>ä¸Šè¿°çš„é€™äº›æ­¥é©Ÿéƒ½åªæ˜¯è¼”åŠ©æˆ‘å€‘å­¸ç¿’æŠ€è¡“è€Œå·²ï¼Œèµ°åœ¨ IT é€™æ¢è·¯ä¸ŠçœŸæ­£éœ€è¦çš„æ˜¯æ†å¿ƒèˆ‡æ¯…åŠ›ï¼›é›–ç„¶è½èµ·ä¾†å¾ˆå…«è‚¡ï¼Œä½†å»æ˜¯ä¸çˆ­çš„äº‹å¯¦ã€‚</p>
<p>æˆ‘çš„å­¸ç¿’æ­¥é©Ÿä¸ä¸€å®šé©ç”¨æ–¼å…¶ä»–äººï¼Œä½†æˆ‘å¸Œæœ›é€™æ¨£çš„è§£èªªï¼Œå¯ä»¥è®“å„ä½åœ¨å­¸ç¿’çš„é“è·¯ä¸Šæœ‰åƒè€ƒçš„æ–¹å‘ã€‚åªæœ‰ä¸æ–·å‘å‰ï¼Œä½ æ‰èƒ½åœ¨é€™å€‹ç’°å¢ƒä¸­ç”Ÿå­˜ä¸‹å»ï¼</p>
]]></content>
		</item>
		
		<item>
			<title>[å¿ƒå¾—] æ€éº¼å¯«æŠ€è¡“æ–‡ä»¶</title>
			<link>https://jaceju.net/how-to-write-document/</link>
			<pubDate>Mon, 09 Mar 2009 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/how-to-write-document/</guid>
			<description>å…ˆèªªæ˜ï¼Œé€™ç¯‡æ–‡ç« åªæ˜¯ç‚ºäº†çµ¦ä¼™ä¼´çœ‹çš„ï¼Œå®ƒä¸æ˜¯ä¸€ç¯‡æ­£è¦çš„æ–‡ä»¶å¯«ä½œæŠ€å·§ï¼›å› ç‚ºæˆ‘ä¹Ÿæ²’å­¸éé¡ä¼¼çš„æ±è¥¿ï¼Œåªæ˜¯æŠŠè‡ªå·±çš„ç¶“é©—èˆ‡å¿ƒå¾—æ•´ç†å‡ºä¾†åˆ†äº«çµ¦å¤§å®¶ã€‚ æ“¬å®šå¤§</description>
			<content type="html"><![CDATA[<p>å…ˆèªªæ˜ï¼Œé€™ç¯‡æ–‡ç« åªæ˜¯ç‚ºäº†çµ¦ä¼™ä¼´çœ‹çš„ï¼Œå®ƒä¸æ˜¯ä¸€ç¯‡æ­£è¦çš„æ–‡ä»¶å¯«ä½œæŠ€å·§ï¼›å› ç‚ºæˆ‘ä¹Ÿæ²’å­¸éé¡ä¼¼çš„æ±è¥¿ï¼Œåªæ˜¯æŠŠè‡ªå·±çš„ç¶“é©—èˆ‡å¿ƒå¾—æ•´ç†å‡ºä¾†åˆ†äº«çµ¦å¤§å®¶ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="æ“¬å®šå¤§ç¶±">æ“¬å®šå¤§ç¶±</h2>
<p>åœ¨å¯«æ–‡ä»¶æˆ–æŠ•å½±ç‰‡ä¹‹å‰ï¼Œå…ˆæŠŠå¤§ç¶±æ“¬å®šå‡ºä¾†æ˜¯å¾ˆé‡è¦çš„ã€‚å¯«ä¸€ç¯‡æ–‡ç« å°±å¥½åƒé–‹è»Šä¸Šè·¯ï¼Œæœ‰èµ·é»ä¹Ÿæœ‰çµ‚é»ï¼›è€Œä¸”ä½ ä¸€å®šè¦å…ˆç¢ºèªå“ªè£¡æ˜¯å¯ä»¥èµ°çš„ï¼ŒæŠŠå¤§æ–¹å‘å…ˆæ‰¾å‡ºä¾†ã€‚å¤§ç¶±çš„ä¸»è¦ç›®çš„å°±æ˜¯è®“æˆ‘å€‘è‡ªå·±ç¢ºèªæ–‡ä»¶å¤§è‡´è¦æè¿°çš„æ±è¥¿ï¼Œä¸è‡´è®“æˆ‘å€‘æ•´å€‹èµ°åæ‰ã€‚</p>
<p>å¤§ç¶±è¦æ€éº¼å¯«å‘¢ï¼Ÿé¦–å…ˆå…ˆæŠŠå¤§æ¨™é¡Œå¯«ä¸‹ä¾†ï¼Œç¢ºå®šæ•´ç¯‡æ–‡ä»¶çš„æ–¹å‘ã€‚ç„¶å¾Œä½ å¯ä»¥ç¹¼çºŒåœ¨æ¯å€‹å¤§æ¨™é¡Œä¸‹å†è£œä¸Šå°æ¨™é¡Œï¼Œå°‡æ•´ç¯‡æ–‡ç« çš„è¼ªå»“æç¹ªæ¸…æ¥šã€‚</p>
<h2 id="æ¢åˆ—èªªæ˜">æ¢åˆ—èªªæ˜</h2>
<p>æ“¬å®šå¥½å¤§ç¶±å¾Œï¼Œæˆ‘å€‘å¯ä»¥é–‹å§‹å¯«æ–‡ç« äº†ã€‚ä¸éå¤§å¤šæ•¸äººéƒ½ä¸å®¹æ˜“ä¸€ä¸‹å­å¯«å‡ºæ´‹æ´‹ç‘ç‘ã€åœ–æ–‡ä¸¦èŒ‚çš„å…§å®¹ã€‚é€™æ™‚æˆ‘æœƒå»ºè­°å¤§å®¶æ¡ç”¨æ¢åˆ—å¼èªªæ˜æ³•ï¼Œå…ˆå°‡é‡é»æ¢åˆ—æˆéª¨æ¶ï¼Œå†æ…¢æ…¢ç‚ºå®ƒå€‘æ·»è¡€åŠ è‚‰ã€‚</p>
<p>æ¢åˆ—å¼èªªæ˜ä¸»è¦å¯ä»¥ç°¡çŸ­æ‰¼è¦å…ˆå°‡é‡é»è¨˜ä¸‹ä¾†ï¼Œå¯«æ–‡ç« çš„äººä¹Ÿä¸æœƒå› ç‚ºè¦æƒ³è½è½é•·çš„è©å¥è€Œå¿˜äº†å…¶ä»–éƒ¨ä»½çš„é‡é»ã€‚åˆ—å¥½é‡é»å¾Œï¼Œä½ å†ç”¨ä½ ç²¾ç¾çš„ä¿®è¾­èˆ‡æ›¼å¦™çš„è©å¥å»è£œå……å®ƒå€‘ï¼Œä½†åˆ‡è¨˜ä¸è¦è®“æ–‡å¥æµæ–¼æ¯ç‡¥èˆ‡ç¹ç‘£ã€‚</p>
<h2 id="æ­£ç¢ºåœ°å¼•ç”¨èˆ‡æ‘˜è¦">æ­£ç¢ºåœ°å¼•ç”¨èˆ‡æ‘˜è¦</h2>
<p>æŠ€è¡“æ–‡ä»¶å¾ˆé‡è¦çš„ä¸€é»å°±æ˜¯æ­£ç¢ºæ€§ï¼Œæ‰€ä»¥æœ‰æ™‚å€™ä½ å¯èƒ½æœƒéœ€è¦åœ¨ä½ çš„æ–‡ç« è£¡è£œå……æŸäº›æŠ€è¡“æ€§çš„è§€å¿µï¼›é€™æ™‚ä½ å¯ä»¥ç›´æ¥å¼•ç”¨åˆ¥äººå¯«éçš„æ–‡ç« ï¼ŒæŠŠé‡é»æ‘˜è¦åœ¨æ®µè½ä¹‹é–“ã€‚æœ€é‡è¦çš„æ˜¯è®“çœ‹çš„äººä¸ç”¨é»é¸é€£çµå°±èƒ½ç°¡å–®æŒæ¡ä½é€™å€‹è§€å¿µï¼Œéœ€è¦è©³ç´°ç­è§£æ™‚å†é»é¸é€£çµå³å¯ã€‚</p>
<h2 id="é©æ™‚åŠ ä¸Šåœ–ç‰‡æˆ–ç¯„ä¾‹">é©æ™‚åŠ ä¸Šåœ–ç‰‡æˆ–ç¯„ä¾‹</h2>
<p>æœ‰æ™‚å€™å¯«äº†ä¸€å †ä¸çŸ¥æ‰€äº‘çš„èªªæ˜é‚„è¬›ä¸æ¸…æ¥šæ™‚ï¼Œä½ å€’ä¸å¦‚ç”¨å¼µåœ–ä¾†è§£é‡‹ä½ çš„æƒ³æ³•ã€‚ä¸éæœ‰æ™‚åœ–ç‰‡ä¹Ÿä¸å®¹æ˜“è§£é‡‹æ¸…æ¥šï¼Œé€™æ™‚ä½ é‚„å¯ä»¥ç›´æ¥ç”¨ç¯„ä¾‹èªªæ˜ã€‚</p>
<p>ç•«åœ–æˆ–ç¯„ä¾‹ä¸»è¦çš„ç›®çš„æ˜¯è®“çœ‹çš„äººè‡ªå·±åœ¨è…¦æµ·è£¡ç”¢ç”Ÿèªªæ˜ï¼Œä½†ç°¡å–®çš„æ–‡å­—æ•˜è¿°é‚„æ˜¯å¿…è¦çš„ï¼Œå…å¾—ç•«è€…ç„¡å¿ƒï¼Œçœ‹è€…æœ‰æ„ã€‚</p>
<h2 id="å°‡å®ƒè®€å‡ºä¾†">å°‡å®ƒè®€å‡ºä¾†</h2>
<p>å¾ˆå¤šäººå¯«æ–‡ç« éƒ½æ˜¯å¯«å®Œå°±ç®—äº†ï¼Œè‡ªå·±æ ¹æœ¬æ²’æœ‰å›é ­å†å¤šçœ‹å¹¾æ¬¡ï¼›æ‰€ä»¥ç³Ÿç³•çš„æ’ç‰ˆï¼ŒéŒ¯èª¤çš„æ¨™é»ç¬¦è™Ÿï¼Œå®Œå…¨ä¸é€šé †çš„å¥å­ï¼Œå¸¸å¸¸æœƒå‡ºç¾åœ¨é€™äº›äººçš„æ–‡ä»¶è£¡é¢ã€‚</p>
<p>è¦è§£æ±ºé€™å€‹å•é¡Œï¼Œæˆ‘å»ºè­°ä½ è‡ªå·±è®€ä¸€æ¬¡ä½ è‡ªå·±çš„æ–‡ç« ï¼›æœ€å¥½èƒ½å¤§è²å”¸å‡ºä¾†ï¼Œç„¶å¾ŒæŠŠå®ƒéŒ„ä¸‹ä¾†æ’­çµ¦è‡ªå·±è½ï¼Œæ²’ç¡è‘—å°±ç®—æˆåŠŸä¸€åŠäº†ã€‚</p>
<h2 id="èªªæœè‡ªå·±">èªªæœè‡ªå·±</h2>
<p>æ²’æœ‰ä»€éº¼é …ç›®æ˜¯æ¯”èªªæœè‡ªå·±æ›´é‡è¦çš„äº†ï¼Œå¦‚æœä½ è‡ªå·±å¯«çš„æ±è¥¿éƒ½ç„¡æ³•èªªæœä½ è‡ªå·±ï¼Œé‚£åˆæ€éº¼èƒ½æœŸå¾…åˆ¥äººçœ‹å¾—æ‡‚å‘¢ï¼Ÿ</p>
<p>ä¸éèªªæœè‡ªå·±ä¸¦ä¸æ˜¯å‚¬çœ è‡ªå·±å°è‡ªå·±çš„æ–‡ä»¶æœ‰è«æ˜å¥‡å¦™çš„ä¿¡å¿ƒï¼Œæœ€å¥½èƒ½ç”¨å®Œå…¨å¿˜æ‰å…§å®¹çš„å¿ƒæƒ…å»é‡çœ‹ä¸€æ¬¡ï¼›å¦‚æœè¶Šè®€è¶Šè¦ºå¾—è‡ªå·±å°é€™ä»½æ–‡ä»¶çš„å…§å®¹æŒæ¡åº¦å¾ˆå¤ ï¼Œé‚£é€™æ¨£ä¸€ä¾†ä½ çš„å¯«ä½œèƒ½åŠ›å°±èƒ½æ›´å¾€å‰é‚å‘ä¸€å¤§æ­¥ã€‚</p>
<h2 id="ç”¨éƒ¨è½æ ¼ä¾†ç·´ç¿’">ç”¨éƒ¨è½æ ¼ä¾†ç·´ç¿’</h2>
<p>å¾ˆç¥å¥‡çš„æ˜¯ï¼Œæˆ‘åœ¨å¯«éƒ¨è½æ ¼æœƒæœ‰ä¸€ç¨®æˆ‘æ˜¯å¯«çµ¦åˆ¥äººçœ‹çš„æ„Ÿè¦º (å…¶å¯¦ä¸ä¸€å®šæœƒæœ‰) ï¼›æ‰€ä»¥æˆ‘è‡ªå·±åœ¨å¯«éƒ¨è½æ ¼æ–‡ç« æ™‚ï¼Œå°±æœƒå°è‡ªå·±å¯«çš„æ±è¥¿æœ‰ä¸€ç¨®è«æ˜å¥‡å¦™çš„è²¬ä»»æ„Ÿã€‚ç•¶ç„¶ä¸ä¸€å®šæ¯å€‹äººéƒ½æ˜¯é€™æ¨£ï¼Œä½†é€™çš„ç¢ºä¸å¤±ç‚ºä¸€ç¨®å¥½çš„è‡ªæˆ‘è¨“ç·´æ–¹å¼ã€‚å¦‚æœæœ‰äººæŒ‡æ­£ä½ å¯«éŒ¯äº†ä¹Ÿæ²’é—œä¿‚ï¼Œå› ç‚ºé€™å°±æ˜¯æˆ‘å€‘ç·´ç¿’çš„ç›®çš„ã€‚</p>
<p>ç¸½ä¹‹ï¼Œå¯«æŠ€è¡“æ–‡ä»¶å…¶å¯¦ä¸¦æ²’æœ‰æƒ³åƒä¸­é‚£éº¼å›°é›£ (ä½†æœƒè¦ºå¾—éº»ç…©æ˜¯å¾ˆæ­£å¸¸çš„) ï¼Œé‡è¦çš„æ˜¯ä½ æœ‰æ²’æœ‰é‡è¦–å®ƒï¼Œå¤šå¯«å¤šç·´ç¿’å§~</p>
]]></content>
		</item>
		
		<item>
			<title>[jQuery] è‡ªè£½ jQuery Plugin - Part 2</title>
			<link>https://jaceju.net/build-your-own-jquery-plugin-2/</link>
			<pubDate>Fri, 16 May 2008 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/build-your-own-jquery-plugin-2/</guid>
			<description>åœ¨ Part 1 æˆ‘å€‘çœ‹åˆ°å¦‚ä½•å»ºç«‹ä¸€å€‹ jQuery Plugin çš„é››å½¢ï¼Œä¹Ÿè®“å®ƒèƒ½å¤ åšä¸€äº›ç°¡å–®çš„å‹•ä½œäº†ã€‚åªæ˜¯é€™å€‹ Plugin ä¼¼ä¹æ²’ä»€éº¼å¤ªå¤§çš„ç”¨é€”ï¼Œæ‰€ä»¥æ¥ä¸‹ä¾†æˆ‘å€‘å°±ä¾†å¯«å€‹çœŸæ­£èƒ½ç”¨çš„æ±è¥¿ã€‚ ç°¡</description>
			<content type="html"><![CDATA[<p>åœ¨ <a href="http://www.jaceju.net/blog/archives/336">Part 1</a> æˆ‘å€‘çœ‹åˆ°å¦‚ä½•å»ºç«‹ä¸€å€‹ jQuery Plugin çš„é››å½¢ï¼Œä¹Ÿè®“å®ƒèƒ½å¤ åšä¸€äº›ç°¡å–®çš„å‹•ä½œäº†ã€‚åªæ˜¯é€™å€‹ Plugin ä¼¼ä¹æ²’ä»€éº¼å¤ªå¤§çš„ç”¨é€”ï¼Œæ‰€ä»¥æ¥ä¸‹ä¾†æˆ‘å€‘å°±ä¾†å¯«å€‹çœŸæ­£èƒ½ç”¨çš„æ±è¥¿ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="ç°¡å–®çš„é ç±¤åŠŸèƒ½">ç°¡å–®çš„é ç±¤åŠŸèƒ½</h2>
<p>è¦èˆ‰å€‹ç°¡å–®åˆå¯¦ç”¨çš„æ•™å­¸ç”¨ä¾‹å­ï¼Œä¸€ç›´éƒ½æ˜¯éå¸¸å›°é›£çš„äº‹æƒ…ã€‚ç¶“éå¤šæ¬¡çš„æ€è€ƒèˆ‡æŒ‘é¸ï¼Œæˆ‘æ±ºå®šç”¨é ç±¤åŠŸèƒ½ (Tab) ä¾†ç•¶åšæœ¬æ–‡ç·´ç¿’çš„é‡é»ã€‚</p>
<p>ç•¶ç„¶ jQuery å·²ç¶“æœ‰ä¸€äº› Tab ç›¸é—œçš„ Plugin äº†ï¼Œè€Œä¸”åŸºæ–¼ä¸é‡é€ è¼ªå­çš„ç†å¿µä¸‹ï¼Œæˆ‘å€‘ä¼¼ä¹ä¸æ‡‰è©²è‡ªå·±å‹•æ‰‹ï¼›ä¸éç«™åœ¨å­¸ç¿’çš„è§’åº¦ä¸‹ï¼Œå¦‚æœæˆ‘å€‘è‡ªå·±å¯¦ä½œä¸€å€‹ç°¡å–®çš„é ç±¤çš„è©±ï¼Œå°‡æœƒæœ‰åŠ©æ–¼ç­è§£ jQuery Plugin çš„è¨­è¨ˆéç¨‹ã€‚</p>
<p>ä»¥ä¸‹å…ˆä¾†ç­è§£æˆ‘å€‘éœ€è¦çš„åŠŸèƒ½ï¼Œå†ä¾†æƒ³æƒ³çœ‹æ€éº¼å¯¦ä½œå®ƒã€‚</p>
<p>é¦–å…ˆæˆ‘å€‘çš„é ç±¤å¤§æ¦‚æœƒé•·æˆé€™æ¨£å­ï¼š</p>
<p><img src="/resources/jquery_plugin_tutorial/mytab01.jpg" alt="é ç±¤åŸºæœ¬å½¢å¼"></p>
<p><img src="/resources/jquery_plugin_tutorial/mytab02.jpg" alt="é ç±¤åŸºæœ¬å½¢å¼"></p>
<p><img src="/resources/jquery_plugin_tutorial/mytab03.jpg" alt="é ç±¤åŸºæœ¬å½¢å¼"></p>
<p>åŸºæœ¬ä¸Šæˆ‘å€‘è¦çš„æ•ˆæœå°±æ˜¯åœ¨é»é¸ä¸Šé¢çš„ TAB1 ã€ TAB2 åŠ TAB3 æ™‚ï¼Œåº•ä¸‹çš„æ–‡å­—å€å¡Šæœƒè·Ÿè‘—åˆ‡æ›ï¼Œé€™å°±æ˜¯æœ€ç°¡å–®çš„é ç±¤åŠŸèƒ½äº†ã€‚</p>
<h2 id="é é¢çµæ§‹">é é¢çµæ§‹</h2>
<p>åœ¨ HTML çš„éƒ¨ä»½ä¹Ÿéå¸¸ç°¡å–®ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸€å€‹ UL æ¸…å–® (div.tabs ul) åŠ ä¸Šä¸‰å€‹ DIV å€å¡Š (div.tabBlock) ï¼Œæœ€å¾Œå†ç”¨ä¸€å€‹å¤§ DIV å€å¡Š (div#mytab) æŠŠå®ƒå€‘åŒ…èµ·ä¾†ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html PUBLIC &#34;-//W3C//DTD XHTML 1.0 Transitional//EN&#34; &#34;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&#34;&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/1999/xhtml&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Content-Type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;text/html; charset=utf-8&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>jQuery TEST<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;mytab.css&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;stylesheet&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/css&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;mytab&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tabs&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;active&#34;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#tab1&#34;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>TAB1<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#tab2&#34;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>TAB2<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#tab3&#34;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>TAB3<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;tab1&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tabBlock&#34;</span><span class="p">&gt;</span>
æœ‰æ™‚å€™å¯« jQuery æ™‚ï¼Œå¸¸æœƒç™¼ç¾ä¸€äº›ç°¡å–®çš„æ•ˆæœå¯ä»¥é‡è¤‡åˆ©ç”¨ã€‚åªæ˜¯æ¯æ¬¡ç”¨ Copy <span class="ni">&amp;amp;</span>amp; Paste å¤§æ³•ä¼¼ä¹ä¸æ˜¯ä»¶å¥½äº‹ï¼Œæœ‰æ²’æœ‰ä»€éº¼æ–¹æ³•å¯ä»¥è®“æˆ‘å€‘æŠŠé€™äº›æ•ˆæœç”¨åˆ°å…¶ä»–åœ°æ–¹å‘¢ï¼Ÿ
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;tab2&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tabBlock&#34;</span><span class="p">&gt;</span>
æ²’éŒ¯ï¼Œå°±æ˜¯ç”¨ jQuery çš„ Plugin æ©Ÿåˆ¶ã€‚ä¸é jQuery çš„ Plugin æ©Ÿåˆ¶å¥½åƒå¾ˆé›£æ‡‚ï¼Ÿå…¶å¯¦ä¸€é»ä¹Ÿä¸ã€‚ä»¥ä¸‹æˆ‘ç”¨æœ€ç°¡å–®çš„æ–¹å¼ä¾†ç‚ºå¤§å®¶è§£èªªå¦‚ä½•è‡ªè£½ä¸€å€‹ç°¡å–®çš„ Plugin ã€‚
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;tab3&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tabBlock&#34;</span><span class="p">&gt;</span>
ç•¶ç„¶åœ¨æ­¤ä¹‹å‰ï¼Œä½ å¾—å…ˆç­è§£ JavaScript çš„ class ã€ object ã€ variables scope é‚„æœ‰ anonymous function ç­‰åŸºç¤...
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;jquery/1.2.3.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;jquery/mytab.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span><span class="p">&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#mytab&#39;</span><span class="p">).</span><span class="nx">mytab</span><span class="p">();</span>
<span class="p">});</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>

</code></pre></div><p>ç•¶ç„¶åˆ¥å¿˜äº†æŠŠ JavaScript æª”æ¡ˆå¼•å…¥ï¼Œé€™è£¡æˆ‘å…ˆæŠŠ mytoolbox.js æ”¹ç‚º mytab.js ï¼Œå› ç‚ºæˆ‘å€‘è¦åšçš„æ˜¯é ç±¤ã€‚</p>
<p>è€Œé ç±¤æ¨£å¼çš„éƒ¨ä»½å‰‡ä»¥æ˜¯ CSS ä¾†å®Œæˆï¼Œè«‹æŠŠå®ƒå­˜æª”ä¸¦å‘½åç‚º mytab.css ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">div</span><span class="p">.</span><span class="nc">tabBlock</span> <span class="p">{</span>
<span class="k">clear</span><span class="p">:</span><span class="kc">both</span><span class="p">;</span>
<span class="k">margin-top</span><span class="p">:</span><span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
<span class="k">border</span><span class="p">:</span><span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#CCC</span><span class="p">;</span>
<span class="k">padding</span><span class="p">:</span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">.</span><span class="nc">tabs</span> <span class="p">{</span>
<span class="k">margin-bottom</span><span class="p">:</span><span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
<span class="k">overflow</span><span class="p">:</span><span class="kc">hidden</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">.</span><span class="nc">tabs</span> <span class="nt">ul</span> <span class="p">{</span>
<span class="k">margin</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span>
<span class="k">padding</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span>
<span class="k">list-style</span><span class="p">:</span><span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">.</span><span class="nc">tabs</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="p">{</span>
<span class="k">float</span><span class="p">:</span><span class="kc">left</span><span class="p">;</span>
<span class="k">height</span><span class="p">:</span><span class="mi">25</span><span class="kt">px</span><span class="p">;</span>
<span class="k">margin</span><span class="p">:</span><span class="mi">0</span> <span class="mi">3</span><span class="kt">px</span><span class="p">;</span>
<span class="k">line-height</span><span class="p">:</span><span class="mi">25</span><span class="kt">px</span><span class="p">;</span>
<span class="k">font-size</span><span class="p">:</span><span class="mi">9</span><span class="kt">pt</span><span class="p">;</span>
<span class="k">border</span><span class="p">:</span><span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#CCC</span><span class="p">;</span>
<span class="k">overflow</span><span class="p">:</span><span class="kc">hidden</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">.</span><span class="nc">tabs</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="nt">a</span> <span class="p">{</span>
<span class="k">display</span><span class="p">:</span><span class="kc">block</span><span class="p">;</span>
<span class="k">padding</span><span class="p">:</span><span class="mi">3</span><span class="kt">px</span><span class="p">;</span>
<span class="k">color</span><span class="p">:</span><span class="mh">#000</span><span class="p">;</span>
<span class="k">text-decoration</span><span class="p">:</span><span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">.</span><span class="nc">tabs</span> <span class="nt">ul</span> <span class="nt">li</span><span class="p">.</span><span class="nc">active</span> <span class="nt">a</span><span class="o">,</span>
<span class="nt">div</span><span class="p">.</span><span class="nc">tabs</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="nt">a</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
<span class="k">color</span><span class="p">:</span><span class="mh">#FFF</span><span class="p">;</span>
<span class="k">background</span><span class="p">:</span><span class="mh">#999</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div><p>é€™è£¡æˆ‘å€‘å°±ä¸æ·±ç©¶ CSS æ€éº¼åšçš„äº†ï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹è«‹è‡ªè¡Œåƒè€ƒç›¸é—œæ›¸ç±ã€‚</p>
<h2 id="æº–å‚™-plugin-æ¨£ç‰ˆ">æº–å‚™ Plugin æ¨£ç‰ˆ</h2>
<p>ç¾åœ¨æŠŠ Part 1 çš„ mytoolbox.js è¤‡è£½ç‚º mytab.js ï¼Œç„¶å¾Œç¨åšä¿®æ”¹ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="p">;(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">mytab</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">_defaultSettings</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="kd">var</span> <span class="nx">_settings</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">_defaultSettings</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// å¾é€™è£¡é–‹å§‹
</span><span class="c1"></span>        <span class="p">};</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_handler</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>

</code></pre></div><p>å¾ä¸Šé¢çš„ç¨‹å¼ä¸­å¯ä»¥çœ‹åˆ°æˆ‘æŠŠ _defaultSettings çš„å…§å®¹æ¸…æ‰äº†ï¼Œå› ç‚ºæˆ‘å€‘æš«æ™‚ç”¨ä¸åˆ°ç‰¹åˆ¥çš„è¨­å®šã€‚ç„¶å¾Œæˆ‘æŠŠçµ¦ each æ–¹æ³•ç”¨çš„ callback ç¨ç«‹ç‚º _handler å‡½å¼ï¼Œå› ç‚ºå¾Œé¢æˆ‘å€‘è¦åšçš„å‹•ä½œå¤§éƒ¨ä»½éƒ½æœƒåœ¨é€™è£¡ç™¼ç”Ÿã€‚</p>
<h2 id="å‘ˆç¾é ç±¤ä¸‹çš„å€å¡Š">å‘ˆç¾é ç±¤ä¸‹çš„å€å¡Š</h2>
<p>åœ¨å¥—ä¸Š CSS å¾Œï¼Œæˆ‘å€‘æœƒçœ‹åˆ°ä¸‰å€‹ div.tabBlock å€å¡ŠåŒæ™‚éƒ½é¡¯ç¤ºå‡ºä¾†äº†ï¼Œé€™æ¨£åšçš„ç›®çš„å…¶å¯¦æ˜¯ç‚ºäº†ç•¶ç€è¦½å™¨æ²’æœ‰é–‹ JavaScript æ™‚é‚„èƒ½å‘ˆç¾è³‡è¨Šã€‚è€Œåœ¨é–‹å•Ÿäº† JavaScript å¾Œï¼Œæˆ‘å¸Œæœ›åªå‘ˆç¾ç¬¬ä¸€å€‹ div.tabBlock å€å¡Šï¼Œé€™æ™‚æˆ‘å€‘å°±å¯ä»¥åˆ©ç”¨ jQuery ä¾†å®Œæˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabBlock&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">).</span><span class="nx">hide</span><span class="p">().</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
<span class="p">};</span>

</code></pre></div><p>åœ¨è§£é‡‹åŸç†ä¹‹å‰ï¼Œå…ˆå›é ­çœ‹ä¸€ä¸‹ HTML é é¢å‘¼å«  Plugin çš„åœ°æ–¹ï¼Œä½ æœƒç™¼ç¾æˆ‘æŠŠ Plugin å¥—ç”¨åœ¨ div#mytab é€™å€‹å…ƒç´ ä¸Šï¼Œæ‰€ä»¥åœ¨ _handler è£¡çš„ <code>this</code> å…¶å¯¦æ˜¯æŒ‡å‘ div#mytab ã€‚</p>
<p>ç­è§£ <code>this</code> ä»£è¡¨çš„æ„ç¾©å¾Œï¼Œæ¥è‘—å›åˆ° _handler ä¸­ï¼Œæˆ‘å€‘å°±å¯ä»¥çŸ¥é“ç¬¬ä¸€è¡Œçš„ $(&lsquo;div.tabBlock&rsquo;, this) å…¶å¯¦å°±æ˜¯æŒ‡æŠ“å– div#mytab åº•ä¸‹çš„ä¸‰å€‹ div.tabBlock å…ƒç´ ã€‚æ‰€ä»¥ç¬¬ä¸€è¡Œæˆ‘å€‘å…ˆæŠŠæ‰€æœ‰çš„ div.tabBlock éš±è—èµ·ä¾†ï¼Œç„¶å¾Œåˆ©ç”¨ .eq(0).show() æŠŠç¬¬ä¸€å€‹ div.tabBlock é¡¯ç¤ºå‡ºä¾†ã€‚</p>
<h2 id="è®“é ç±¤å‹•èµ·ä¾†">è®“é ç±¤å‹•èµ·ä¾†</h2>
<p>æ¥è‘—æˆ‘å€‘å…ˆè®“é ç±¤åœ¨é»é¸æ™‚èƒ½å¤ åˆ‡æ›å®ƒçš„åç™½ç‹€æ…‹ï¼Œè€Œåç™½çš„æ•ˆæœæˆ‘å€‘å·²ç¶“å®šç¾© CSS è£¡äº†ï¼Œä¹Ÿå°±æ˜¯è®“ LI çš„ class è®Šæˆ active å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabBlock&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">).</span><span class="nx">hide</span><span class="p">().</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li a&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li&#39;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">};</span>

</code></pre></div><p>é€™é‚Šçš„åŸç†ä¹Ÿå¾ˆç°¡å–®ï¼Œé¦–å…ˆå…ˆè®“æ‰€æœ‰ div.tabs li éƒ½ç§»é™¤åç™½æ•ˆæœï¼Œç„¶å¾Œå†å°æˆ‘å€‘æŒ‰çš„é€£çµçš„ä¸Šä¸€å±¤ LI å…ƒç´ å¥—ä¸Š active ã€‚æ³¨æ„é€™è£¡ä¹Ÿæœ‰å€‹ <code>this</code> ï¼Œå®ƒä»£è¡¨çš„æ˜¯ç›®å‰é»é¸çš„é ç±¤é€£çµã€‚</p>
<p>æœ€å¾Œæˆ‘å€‘è¦ <code>return false</code> ï¼Œä»¥é˜»æ­¢ click äº‹ä»¶è¢«å¾€ä¸Šå‚³éã€‚</p>
<p>ç¾åœ¨é»é¸çœ‹çœ‹é ç±¤é€£çµï¼Œæ˜¯ä¸æ˜¯èƒ½åç™½äº†å‘¢ï¼Ÿ</p>
<p>è¨»ï¼šæ»‘éé ç±¤æœƒå‘ˆç¾åç™½é€™å€‹æ•ˆæœä¹Ÿæ˜¯å®šç¾©åœ¨ CSS è£¡ï¼Œè©¦è‘—æ‰¾æ‰¾çœ‹å§ã€‚</p>
<h2 id="è¨˜ä½é€™å€‹">è¨˜ä½ã€Œé€™å€‹ã€</h2>
<p>åœ¨ç¹¼çºŒå®Œæˆæ•ˆæœå‰ï¼Œæœ‰å€‹å•é¡Œæˆ‘å¾—å…ˆèªªæ˜ä¸€ä¸‹ã€‚é›–ç„¶æˆ‘å€‘åœ¨æ¸¬è©¦é é¢ä¸Šåªä½ˆç½®äº†ä¸€å€‹ Tab å…ƒä»¶ï¼Œä¸éå¾ˆé›£ä¿è­‰é é¢ä¸Šä¸æœƒæœ‰å…¶ä»–åœ°æ–¹ä¹Ÿæœƒç”¨åˆ°é ç±¤æ•ˆæœï¼Œé€™æ™‚æˆ‘å€‘çš„ Plugin å¯èƒ½æœƒç”¢ç”Ÿå‰¯ä½œç”¨ã€‚</p>
<p>å•é¡Œå‡ºåœ¨ <code>$('div.tabs li').removeClass('active')</code> é€™è¡Œï¼Œå› ç‚ºæˆ‘å€‘ä¸èƒ½ç¢ºå®šé é¢å…¶ä»–åœ°æ–¹æ˜¯ä¸æ˜¯ä¹Ÿæœ‰æœ‰å…ƒç´ ç¬¦åˆ <code>$('div.tabs li')</code> ã€‚æ‰€ä»¥æˆ‘åœ¨é€™è£¡æ‡‰è©²è¦æ˜ç¢ºæŒ‡å®šé€™äº› LI å…ƒç´ æ‡‰è©²å±¬æ–¼é‚£å€‹å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯ <code>$('div.tabs li a', this)</code> çš„ <code>this</code> (å³ <code>div#mytab</code> ) ã€‚</p>
<p>ä¸éåœ¨ click æ–¹æ³•æŒ‡å®šçš„åŒ¿åå‡½å¼ä¸­ï¼Œ <code>this</code> åˆæŒ‡åˆ° a å…ƒç´ ï¼Œè€Œä¸æ˜¯æˆ‘å€‘è¦çš„ <code>div#mytab</code> ï¼›é‚£éº¼æœ‰ä»€éº¼æ–¹æ³•èƒ½åœ¨ click ä¸­æ‰¾åˆ° <code>div#mytab</code> å‘¢ï¼Ÿç¸½ä¸èƒ½æŠŠ <code>div#mytab</code> å¯«æ­»åœ¨ Selector ä¸­å§ï¼Ÿå…¶å¯¦æ–¹æ³•å¾ˆç°¡å–®ï¼Œå°±æ˜¯åœ¨ click å¤–å…ˆå®šç¾©ä¸€å€‹æ–°è®Šæ•¸æŒ‡å‘å¤–éƒ¨çš„ <code>this</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span> <span class="c1">// åŠ å…¥é€™è¡Œï¼Œä¸¦å°‡ä»¥ä¸‹è¡¨ç¤º div#mytab çš„ `this` æ”¹ç‚º container
</span><span class="c1"></span>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabBlock&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">).</span><span class="nx">hide</span><span class="p">().</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li a&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span> <span class="c1">// é€™å€‹ `this` ä¸ç”¨å‹•ï¼Œå®ƒè¡¨ç¤º a å…ƒç´ 
</span><span class="c1"></span>        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">};</span>

</code></pre></div><p>å› ç‚ºåœ¨ click çš„åŒ¿åå‡½å¼æœƒç¹¼æ‰¿å¤–éƒ¨çš„ä½œç”¨åŸŸï¼Œä½¿å¾— <code>container</code> çš„ scope å¾—ä»¥å­˜åœ¨æ–¼ click çš„ callback è£¡ï¼›å› æ­¤æˆ‘å€‘å°±èƒ½æ”¾å¿ƒçš„ä½¿ç”¨ <code>container</code> ä¾†è¡¨ç¤º <code>div#mytab</code> äº†ã€‚</p>
<p>è¨»ï¼šåœ¨ click è£¡çš„ callback åˆæœ‰å¦ä¸€å€‹åç¨±ï¼š closure ï¼Œå› ç‚ºå®ƒç”¨åˆ°äº†å¤–éƒ¨ function æ‰€å®šç¾©çš„è®Šæ•¸ã€‚</p>
<h2 id="åˆ‡æ›å°æ‡‰çš„å€å¡Š">åˆ‡æ›å°æ‡‰çš„å€å¡Š</h2>
<p>æ¥è‘—ç¹¼çºŒå®Œæˆæˆ‘å€‘è¦çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯åˆ‡æ›é ç±¤å°æ‡‰çš„å€å¡Šã€‚</p>
<p>é€™è£¡æˆ‘ç”¨äº†é€£çµéŒ¨é»çš„æŠ€å·§ï¼Œé€™å€‹æŠ€å·§æœ¬èº«æœ‰å€‹å„ªé»ï¼šå°±æ˜¯ç•¶ JavaScript è¢«ç¦ç”¨æ™‚ï¼ŒéŒ¨é»é‚„èƒ½æ­£å¸¸å‹•ä½œã€‚è€ŒéŒ¨é»çš„åç¨±å‰›å¥½å°±æ˜¯é ç±¤æ‰€å°æ‡‰çš„å…§å®¹å€å¡Š ID ï¼Œé€™å°±æ–¹ä¾¿æˆ‘å€‘æ‰¾åˆ°è¦é¡¯ç¤ºçš„å…§å®¹å€å¡Šã€‚</p>
<p>ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabBlock&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">).</span><span class="nx">hide</span><span class="p">().</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li a&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabBlock&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span> <span class="c1">// å…ˆå…¨éƒ¨è—èµ·ä¾†
</span><span class="c1"></span>        <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(#.+)$/</span><span class="p">))[</span><span class="mi">1</span><span class="p">];</span> <span class="c1">// åªæŠ“å°æ‡‰çš„ tabBlock id
</span><span class="c1"></span>        <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span> <span class="c1">// é¡¯ç¤ºå°æ‡‰çš„ tabBlock
</span><span class="c1"></span>        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">};</span>

</code></pre></div><p>åŸç†ä¸€æ¨£å¾ˆç°¡å–®ï¼Œç•¶æŒ‰ä¸‹é ç±¤é€£çµæ™‚ï¼Œå…ˆéš±è—æ‰€æœ‰å…§å®¹å€å¡Š (<code>div.tabBlock</code>) ï¼Œç„¶å¾Œå–å¾—é€£çµçš„ href ä½å€ä¸­çš„éŒ¨é»åç¨±ï¼Œä»¥é¡¯ç¤ºé ç±¤æ‰€å°æ‡‰çš„å…§å®¹å€å¡Šã€‚ä¸éé€™è£¡è¦æ³¨æ„ä¸€é»ï¼Œé‚£å°±æ˜¯ç€è¦½å™¨é€šå¸¸æœƒå¹«æˆ‘å€‘åœ¨éŒ¨é»åç¨±å‰åŠ å…¥ç›®å‰å®Œæ•´çš„ç¶²å€ï¼›å› æ­¤æˆ‘é€™è£¡ä¾¿ä½¿ç”¨æ­£è¦å¼ä¾†å–å¾—å¸¶äº•å­—è™Ÿçš„éŒ¨é»åç¨±ï¼Œä¹Ÿå‰›å¥½ç›´æ¥è®“ jQuery ä½¿ç”¨ã€‚</p>
<h2 id="æ¸›å°‘å¤šé¤˜çš„æŸ¥è©¢">æ¸›å°‘å¤šé¤˜çš„æŸ¥è©¢</h2>
<p>å†çœ‹ä¸€æ¬¡ç¨‹å¼ï¼Œæˆ‘ç™¼ç¾æœ‰å€‹åœ°æ–¹é‡è¤‡æŸ¥è©¢äº†å…©æ¬¡ï¼Œé‚£å°±æ˜¯ <code>$('div.tabBlock', container)</code> ï¼›ç¬¬ä¸€æ¬¡æ˜¯åœ¨æˆ‘å€‘åªé¡¯ç¤ºç¬¬ä¸€å€‹å…§å®¹å€å¡Šæ™‚ï¼Œè€Œç¬¬äºŒæ¬¡å‰‡åœ¨é»é¸é€£çµæ™‚è¦éš±è—æ‰€æœ‰å…§å®¹å€å¡Šæ™‚ã€‚é€™è£¡æˆ‘å€‘å¯ä»¥åˆ©ç”¨æš«å­˜è®Šæ•¸ä¾†è§£æ±ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">$tabBlocks</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabBlock&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">);</span> <span class="c1">// åŠ å…¥é€™è¡Œ
</span><span class="c1"></span>    <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">().</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span> <span class="c1">// æ”¹ç”¨ $tabBlocks
</span><span class="c1"></span>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li a&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
        <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span> <span class="c1">// æ”¹ç”¨ $tabBlocks
</span><span class="c1"></span>        <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(#.+)$/</span><span class="p">))[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">};</span>

</code></pre></div><p>ä¸éä¹Ÿä¸æ˜¯æ¯å€‹é‡è¤‡çš„æŸ¥è©¢éƒ½è¦ç”¨æš«å­˜è®Šæ•¸ï¼Œå› ç‚ºå‡è¨­ç•¶ä½ åœ¨ Plugin é‹ä½œçš„éç¨‹ä¸­ï¼Œå° <code>div.tabBlock</code> æœ‰é€²è¡Œå¢æ¸›çš„è©±ï¼Œé‚£éº¼é‡è¤‡å†æŸ¥ä¸€æ¬¡å°±æ˜¯å¿…è¦çš„å‹•ä½œäº†ï¼Œé€™æ¨£æ‰èƒ½ç¢ºä¿æˆ‘å€‘æŠ“åˆ°æ­£ç¢ºæ•¸é‡çš„å…ƒç´ é›†ã€‚</p>
<p>åˆ°é€™è£¡æˆ‘å€‘çš„ mytab.js åˆç‰ˆç®—æ˜¯å®Œæˆäº†ï¼Œè©¦è©¦çœ‹å®ƒæ˜¯ä¸æ˜¯ä¾ç…§æˆ‘å€‘çš„è¦æ±‚æ­£ç¢ºå‹•ä½œå‘¢ï¼Ÿ</p>
<h2 id="åŠ å¼·-plugin">åŠ å¼· Plugin</h2>
<p>é›–ç„¶æˆ‘å€‘çš„ Plugin å·²ç¶“å¯ä»¥å‹•ä½œäº†ï¼Œä½†å…¶å¯¦é‚„æ˜¯æœ‰äº›åœ°æ–¹å¯ä»¥åŠ å¼·ï¼›è€ŒåŠ å…¥é€™äº›åŠŸèƒ½å…¶å¯¦å°±æ˜¯ç‚ºäº†è®“ Plugin èƒ½æ›´æœ‰å½ˆæ€§ï¼Œä»¥æ‡‰ä»˜å„ç¨®ä¸åŒçš„ç‹€æ³ã€‚</p>
<p>é€™è£¡æˆ‘ç°¡å–®ä»‹ç´¹å…©å€‹åŠ å¼·çš„åŠŸèƒ½ï¼š</p>
<h3 id="ç”±å¤–éƒ¨æ±ºå®š-class">ç”±å¤–éƒ¨æ±ºå®š class</h3>
<p>æˆ‘å€‘å¸Œæœ›å¯ä»¥æŒ‡å®š active çš„åç¨±ï¼Œè®“å¤–éƒ¨å¯ä»¥è‡ªè¡Œæ±ºå®šã€‚æˆ‘å€‘åœ¨ <code>_defaultSettings</code> ä¸­å¤šå®šç¾©äº†ä¸€å€‹ <code>activeClass</code> é …ç›®ï¼Œç„¶å¾ŒæŠŠç¨‹å¼è£¡çš„æ‰€æœ‰ <code>'active'</code> æ”¹ç‚º <code>_settings.activeClass</code> ã€‚ç¨‹å¼ç¢¼ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">mytab</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">_defaultSettings</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">activeClass</span><span class="o">:</span> <span class="s1">&#39;active&#39;</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">_settings</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">_defaultSettings</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">$tabBlocks</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabBlock&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">);</span>
        <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">().</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
        <span class="nx">$tabLinks</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">$tabLists</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
            <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(#.+)$/</span><span class="p">))[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">});</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_handler</span><span class="p">);</span>
<span class="p">};</span>

</code></pre></div><p>åŒæ¨£çš„åŸç†ï¼Œæˆ‘å€‘å¯ä»¥æ›´æ”¹ <code>div.tabs</code> å’Œ <code>div.tabBlock</code> çš„ class åç¨±ï¼Œé€™é‚Šæˆ‘ç•™çµ¦å„ä½è‡ªè¡Œè©¦è©¦ã€‚</p>
<h3 id="è‡ªå‹•åˆ‡æ›å…§å®¹å€å¡Š">è‡ªå‹•åˆ‡æ›å…§å®¹å€å¡Š</h3>
<p>ç¾åœ¨æˆ‘å¸Œæœ›é€²å…¥é é¢æ™‚ï¼Œèƒ½è®“å…§å®¹å€å¡Šè‡ªå‹•è·³åˆ°æˆ‘æŒ‡å®šçš„é ç±¤ã€‚é€™è£¡æˆ‘æœ‰å…©ç¨®æ–¹å¼å¯ä»¥æŒ‡å®šï¼šç”±ç¶²å€æ±ºå®šä»¥åŠç”¨ Server ç¨‹å¼æ±ºå®šã€‚</p>
<p>ä»¥ç¶²å€æ±ºå®šå°±æ˜¯æˆ‘å€‘åœ¨ç€è¦½å™¨çš„ç¶²å€åˆ—çš„ç¶²å€å¾Œé¢å†åŠ ä¸ŠéŒ¨é»åç¨±ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>http://localhost/mytab.htm#tab2
</code></pre><p>é€™å€‹ç¶²å€å¯ä»¥ç”±å¤–éƒ¨çš„ç¶²é ä»¥é€£çµçš„æ–¹å¼æŒ‡å®šï¼Œé€™æ¨£çš„è©±é€²å…¥æˆ‘å€‘é€™å€‹é ç±¤ç•«é¢æ™‚ï¼Œæˆ‘å€‘å°±å¯ä»¥ä¾ç…§é€™å€‹éŒ¨é»ä¾†æ±ºå®šè¦é¡¯ç¤ºçš„å…§å®¹å€å¡Šã€‚ç¨‹å¼å¾ˆç°¡å–®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">$tabBlocks</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabBlock&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">);</span>
    <span class="c1">// åŠ å…¥ä»¥ä¸‹é€™æ®µ
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">matches</span> <span class="o">=</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(#.+)$/</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">!==</span> <span class="nx">matches</span><span class="p">)</span> <span class="p">{</span>   <span class="c1">// æœ‰æ‰¾åˆ°ç¶²å€éŒ¨é»çš„è©±å°±åˆ‡æ›å…§å®¹
</span><span class="c1"></span>        <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>    <span class="c1">// å…ˆæŠŠå…¨éƒ¨çš„å…§å®¹å€å¡Šè—èµ·ä¾†
</span><span class="c1"></span>        <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>         <span class="c1">// é¡¯ç¤ºéŒ¨é»å°æ‡‰çš„å…§å®¹å€å¡Š
</span><span class="c1"></span>        <span class="c1">// å°‡å°æ‡‰çš„é ç±¤é€£çµåç™½
</span><span class="c1"></span>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li a&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">!==</span> <span class="nb">String</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">id</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">().</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="c1">// ... ç•¥ ...
</span><span class="c1"></span><span class="p">};</span>

</code></pre></div><p>åŸç†å°±æ˜¯é€ééŒ¨é»ä¾†é¡¯ç¤ºå°æ‡‰çš„å…§å®¹å€å¡Šï¼Œå†è·Ÿè‘—æŠŠå°æ‡‰é ç±¤é€£çµåç™½å³å¯ï¼›å¦‚æœæ²’æœ‰æŒ‡å®šéŒ¨é»çš„è©±ï¼Œå°±é¡¯ç¤ºç¬¬ä¸€å€‹å…§å®¹å€å¡Šã€‚</p>
<p>ç•¶ç„¶åˆ¥å¿˜äº†é‡æ§‹ï¼ŒæŠŠå¤šé¤˜çš„æŸ¥è©¢å‹•ä½œç”¨æš«å­˜è®Šæ•¸å–ä»£ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">$tabBlocks</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabBlock&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">$tabLists</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">$tabLinks</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li a&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">matches</span> <span class="o">=</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(#.+)$/</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">!==</span> <span class="nx">matches</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
        <span class="nx">$tabLists</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
        <span class="nx">$tabLinks</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">!==</span> <span class="nb">String</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">id</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">().</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">$tabLinks</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">$tabLists</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
        <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(#.+)$/</span><span class="p">))[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">};</span>

</code></pre></div><p>å›åˆ°ä¸»é¡Œï¼Œæˆ‘å€‘çš„å¦å¤–ä¸€ç¨®æŒ‡å®šå…§å®¹å€å¡Šçš„æ–¹å¼å°±æ˜¯åœ¨ Server ç«¯è¼¸å‡º HTML æ™‚ï¼Œå°±å…ˆæ±ºå®šå¥½ active çš„ LI å…ƒç´ äº†ã€‚å‡è¨­ç¾åœ¨é ç±¤éƒ¨ä»½çš„ HTML å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tabs&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#tab1&#34;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>TAB1<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;active&#34;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#tab2&#34;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>TAB2<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#tab3&#34;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>TAB3<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

</code></pre></div><p>ç¾åœ¨ TAB2 é€™å€‹ LI å…ƒç´ çš„ class æ˜¯ active ï¼Œé‚£éº¼æˆ‘å€‘æ‡‰è©²æ€éº¼è‡ªå‹•åˆ‡æ›åˆ°å°æ‡‰çš„å…§å®¹å€å¡Šå‘¢ï¼Ÿå¾ˆç°¡å–®ï¼Œå°±è®“ <code>li.active</code> åº•ä¸‹çš„ a ã€Œé»ä¸‹å»ã€å°±å¯ä»¥äº†ã€‚ç¨‹å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ... ç•¥ ...
</span><span class="c1"></span>    <span class="nx">$tabLinks</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">$tabLists</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
        <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(#.+)$/</span><span class="p">))[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="c1">// åŠ å…¥é€™æ®µ
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">$activeLink</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li.&#39;</span> <span class="o">+</span> <span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span> <span class="o">+</span> <span class="s1">&#39; &gt; a&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">!==</span> <span class="nx">$activeLink</span><span class="p">.</span><span class="nx">size</span><span class="p">())</span> <span class="p">{</span>
        <span class="nx">$activeLink</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

</code></pre></div><p>åŸç†å°±æ˜¯åœ¨æˆ‘å€‘æŒ‡å®šå¥½é ç±¤é€£çµçš„ click äº‹ä»¶å¾Œï¼Œå†è§¸ç™¼ <code>li.active</code> åº•ä¸‹çš„é€£çµçš„ click äº‹ä»¶å³å¯ï¼Œå¾ˆç°¡å–®å§ã€‚</p>
<h2 id="æ¸¬è©¦å†æ¸¬è©¦">æ¸¬è©¦å†æ¸¬è©¦</h2>
<p>ä»¥ä¸Šæˆ‘å€‘éƒ½åªåœ¨å–®ä¸€å€‹é ç±¤å…ƒä»¶ä¸Šæ¸¬è©¦è€Œå·² (ä¹Ÿå°±æ˜¯ <code>div#mytab</code> ) ï¼Œä½†ä¸€èˆ¬ä¾†èªªå¤§éƒ¨ä»½çš„ Plugin æ‡‰è©²è¦èƒ½åœ¨é é¢ä¸­è¢«å¥—ç”¨åˆ°å¤šå€‹å…ƒä»¶ä¸Šï¼›æ›å¥è©±èªªå°±æ˜¯é é¢ä¸Šæœƒå¥½å¹¾å€‹æœ‰é ç±¤çš„å€å¡Šï¼Œæ‰€ä»¥é€™è£¡æˆ‘å€‘å¾—æ¸¬è©¦é€™å€‹å¯èƒ½ç™¼ç”Ÿçš„ç‹€æ³ã€‚</p>
<p>æˆ‘åœ¨åŸä¾†çš„ <code>div#mytab</code> åº•ä¸‹å†åŠ å…¥ä¸€å€‹ <code>div#mytab2</code> ï¼Œå…§å®¹å’Œ <code>div#mytab</code> å·®ä¸å¤šï¼Œåªæ˜¯æŠŠ <code>#tab1</code>, <code>#tab2</code>, <code>#tab3</code> æ”¹æˆ <code>#tab4</code>, <code>#tab5</code>, <code>#tab6</code> è€Œå·²ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;mytab2&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tabs&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#tab4&#34;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>TAB4<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;active&#34;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#tab5&#34;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>TAB5<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#tab6&#34;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>TAB6<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;tab4&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tabBlock&#34;</span><span class="p">&gt;</span>
aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa aaa
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;tab5&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tabBlock&#34;</span><span class="p">&gt;</span>
bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb bbb
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;tab6&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tabBlock&#34;</span><span class="p">&gt;</span>
ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc ccc
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

</code></pre></div><p>ç„¶å¾Œæˆ‘ä¹Ÿç‚º <code>div#mytab</code> å’Œ <code>div#mytab2</code> åŠ å…¥ä¸€çµ„ <code>class=&quot;mytab&quot;</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;mytab&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;mytab&#34;</span><span class="p">&gt;</span>
... ç•¥ ...
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;mytab2&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;mytab&#34;</span><span class="p">&gt;</span>

</code></pre></div><p>ç¾åœ¨æˆ‘å€‘æŠŠ HTML é é¢ä¸Šå¥—ç”¨ Plugin çš„éƒ¨ä»½ç¨ä½œä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯æŠŠ id æ›æˆ class ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.mytab&#39;</span><span class="p">).</span><span class="nx">mytab</span><span class="p">();</span>
<span class="p">});</span>

</code></pre></div><p>ç„¶å¾Œæˆ‘å€‘é‡æ–°ç€è¦½ä¸€ä¸‹ï¼Œä¸€åˆ‡çœ‹èµ·ä¾†å¾ˆæ­£å¸¸ã€‚ç›´åˆ°æˆ‘æ¸¬è©¦äº†ç”¨ç¶²å€éŒ¨é»ä¾†è‡ªå‹•åˆ‡æ›å…§å®¹å€å¡Šæ™‚&hellip;å‡ºç¾äº†ä¸‹åœ–çš„å¥‡æ€ªç¾è±¡ï¼š</p>
<p><img src="/resources/jquery_plugin_tutorial/mytab04.jpg" alt="é ç±¤åŸºæœ¬å½¢å¼"></p>
<p>åŸå› å‡ºåœ¨æˆ‘å€‘ç™¼ç¾éŒ¨é»æ™‚ï¼Œå°±æœƒå…ˆéš±è—æ‰€æœ‰å…§å®¹å€å¡Šï¼Œç„¶å¾Œæ‰é¡¯ç¤ºéŒ¨é»å°æ‡‰çš„å…§å®¹å€å¡Šï¼›ä½†æ˜¯é€™æ¨£å°±æœƒä½¿å¾—æ²’æœ‰éŒ¨é»å°æ‡‰çš„å…§å®¹å€å¡Šé€šé€šä¸é¡¯ç¤ºï¼Œå‡ºç¾äº†ä¸Šåœ–çš„ç‹€æ³ã€‚</p>
<p>æ€éº¼è¾¦ï¼Ÿå…¶å¯¦ä¹Ÿå¾ˆç°¡å–®ï¼Œå°±æ˜¯å°‡è©²é ç±¤å…ƒä»¶æ‰€æ“æœ‰çš„é ç±¤é€£çµå°æ‡‰çš„éŒ¨é»å…ˆè¨˜ä¸‹ä¾†ï¼Œç„¶å¾Œæ‰¾æ‰¾çœ‹ç¶²å€æé»æœ‰æ²’æœ‰åœ¨é€™è£¡é¢ï¼Œæœ‰çš„è©±æ‰åšä¸Šé¢çš„å‹•ä½œï¼Œä¸ç„¶å°±ä¸€å®šè¦é¡¯ç¤ºç¬¬ä¸€å€‹å…§å®¹å€å¡Šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">$tabBlocks</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabBlock&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">$tabLists</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">$tabLinks</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.tabs li a&#39;</span><span class="p">,</span> <span class="nx">container</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">tabIdList</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="c1">// å…ˆè¨˜ä½æ‰€æœ‰é ç±¤é€£çµå°æ‡‰çš„éŒ¨é»
</span><span class="c1"></span>    <span class="nx">$tabLinks</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">matches</span> <span class="o">=</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(#.+)$/</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">!==</span> <span class="nx">matches</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">tabIdList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">matches</span> <span class="o">=</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(#.+)$/</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">!==</span> <span class="nx">matches</span> <span class="c1">// éŒ¨é»åœ¨åˆ—è¡¨è£¡çš„è©±å°±é¡¯ç¤º
</span><span class="c1"></span>    <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">!==</span> <span class="nx">$</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">tabIdList</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
        <span class="nx">$tabLists</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
        <span class="nx">$tabLinks</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">!==</span> <span class="nb">String</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">id</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">activeClass</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">$tabBlocks</span><span class="p">.</span><span class="nx">hide</span><span class="p">().</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="c1">// ... ç•¥ ...
</span><span class="c1"></span><span class="p">};</span>

</code></pre></div><p>é€™è£¡æˆ‘ç”¨äº†æœ€ç°¡å–® JavaScritp çš„é™£åˆ—ï¼Œé‚„æœ‰ jQuery çš„ <code>$.inArray</code> æ–¹æ³•ä¾†è§£æ±ºé€™å€‹å•é¡Œï¼›æƒ³æƒ³çœ‹ï¼Œæœ‰æ²’æœ‰æ›´æ–¹ä¾¿çš„è§£æ³•å‘¢ï¼Ÿ</p>
<p>ä¹‹å¾Œç•¶ç„¶æˆ‘å€‘é‚„å¾—å†å¤šè©¦è©¦å¹¾å€‹ä¸åŒçš„ç‹€æ³ï¼Œçœ‹çœ‹é‚„æœ‰æ²’æœ‰éœ€è¦è§£æ±ºçš„éƒ¨ä»½ï¼Œé€™è£¡å°±ç•™çµ¦å¤§å®¶è©¦è©¦çœ‹å›‰ã€‚</p>
<h2 id="é‚„æœ‰ä»€éº¼">é‚„æœ‰ä»€éº¼</h2>
<p>åœ¨çœ‹å®Œä»¥ä¸Šçš„ä»‹ç´¹å¾Œï¼Œæˆ‘æƒ³è‡ªå·±å¯«ä¸€å€‹ jQuery çš„ Plugin å…¶å¯¦ä¸¦ä¸å›°é›£ï¼Œå›°é›£çš„æ˜¯æˆ‘å€‘è¦æ€éº¼å»å®Œæˆè£¡é¢çš„å…§å®¹ã€‚æ‰€ä»¥åƒæ˜¯å° JavaScript çš„ä½œç”¨åŸŸçš„èªçŸ¥ã€å„å®¶ç€è¦½å™¨çš„å·®ç•°ã€ DHTML çš„åŸºæœ¬åŠŸï¼Œé‚„æœ‰å¦‚ä½•å»å‘ˆç¾æ•ˆæœçš„æƒ³åƒåŠ›ç­‰ï¼Œé€™äº›éƒ½æ˜¯åœ¨é–‹ç™¼ jQuery Plugin éå¸¸é‡è¦çš„ã€‚</p>
<p>å¦å¤–å°±æ˜¯ä¸€å®šè¦å°ç¨‹å¼ç¢¼åšé‡æ§‹èˆ‡æ¸¬è©¦çš„å‹•ä½œï¼Œå› ç‚ºå®ƒå€‘æœƒå½±éŸ¿é€™å€‹ Plugin çš„æ•ˆèƒ½èˆ‡ç©©å®šæ€§ã€‚é€™è£¡å¯ä»¥å¤šåƒè€ƒå…¶ä»– Plugin ä½œè€…çš„ç¨‹å¼ç¢¼ï¼Œè§€å¯Ÿä»–å€‘æ˜¯å¦‚ä½•è™•ç†æ•ˆèƒ½å•é¡Œï¼›ç„¶å¾Œæœ€å¥½èƒ½å»ºç«‹ä¸€å€‹æ¸¬è©¦é é¢ï¼ŒæŠŠæœ‰å¯èƒ½é‡åˆ°çš„ä½¿ç”¨æ–¹å¼å„˜å¯èƒ½åœ°åŒ…å«é€²ä¾†ï¼Œä»¥ä¾¿æ¸¬è©¦ Plugin çš„æ­£ç¢ºæ€§ã€‚</p>
<p>å¸Œæœ›é€éé€™å…©ç¯‡ç°¡å–®çš„æ•™å­¸ï¼Œèƒ½è®“å¤§å®¶èƒ½å¿«é€Ÿé€²å…¥ jQuery Plugin çš„ä¸–ç•Œï¼›ä¹Ÿå¸Œæœ›å¤§å®¶å¦‚æœé–‹ç™¼äº†å¥½çš„ Plugin å¾Œï¼Œèƒ½ä¸ååˆ†äº«å‡ºä¾†ã€‚</p>
<p>æ„Ÿè¬å¤§å®¶~~è¬è¬æ”¶çœ‹ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>[jQuery] è‡ªè£½ jQuery Plugin - Part 1</title>
			<link>https://jaceju.net/build-your-own-jquery-plugin-1/</link>
			<pubDate>Tue, 13 May 2008 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/build-your-own-jquery-plugin-1/</guid>
			<description>æœ‰æ™‚å€™å¯« jQuery æ™‚ï¼Œå¸¸æœƒç™¼ç¾ä¸€äº›ç°¡å–®çš„æ•ˆæœå¯ä»¥é‡è¤‡åˆ©ç”¨ã€‚åªæ˜¯æ¯æ¬¡ç”¨ Copy &amp;amp; Paste å¤§æ³•ä¼¼ä¹ä¸æ˜¯ä»¶å¥½äº‹ï¼Œæœ‰æ²’æœ‰ä»€éº¼æ–¹æ³•å¯ä»¥è®“æˆ‘å€‘æŠŠé€™äº›æ•ˆæœç”¨åˆ°å…¶ä»–åœ°æ–¹å‘¢ï¼Ÿ æ²’éŒ¯</description>
			<content type="html"><![CDATA[<p>æœ‰æ™‚å€™å¯« jQuery æ™‚ï¼Œå¸¸æœƒç™¼ç¾ä¸€äº›ç°¡å–®çš„æ•ˆæœå¯ä»¥é‡è¤‡åˆ©ç”¨ã€‚åªæ˜¯æ¯æ¬¡ç”¨ Copy &amp; Paste å¤§æ³•ä¼¼ä¹ä¸æ˜¯ä»¶å¥½äº‹ï¼Œæœ‰æ²’æœ‰ä»€éº¼æ–¹æ³•å¯ä»¥è®“æˆ‘å€‘æŠŠé€™äº›æ•ˆæœç”¨åˆ°å…¶ä»–åœ°æ–¹å‘¢ï¼Ÿ</p>
<p>æ²’éŒ¯ï¼Œå°±æ˜¯ç”¨ jQuery çš„ Plugin æ©Ÿåˆ¶ã€‚</p>
<p>ä¸é jQuery çš„ Plugin æ©Ÿåˆ¶å¥½åƒå¾ˆé›£æ‡‚ï¼Ÿå…¶å¯¦ä¸€é»ä¹Ÿä¸ã€‚ä»¥ä¸‹æˆ‘ç”¨æœ€ç°¡å–®çš„æ–¹å¼ä¾†ç‚ºå¤§å®¶è§£èªªå¦‚ä½•è‡ªè£½ä¸€å€‹ç°¡å–®çš„ Plugin ã€‚</p>
<p>ç•¶ç„¶åœ¨æ­¤ä¹‹å‰ï¼Œä½ å¾—å…ˆç­è§£ JavaScript çš„ class ã€ object ã€ variables scope é‚„æœ‰ anonymous function  ç­‰åŸºç¤ï¼Œé€™äº›å¯ä»¥åƒè€ƒã€Œ<a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9789866840036&amp;sid=37518"> JavaScript å¤§å…¨</a>ã€ä¸€æ›¸ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="plugin-æ¨£ç‰ˆ">Plugin æ¨£ç‰ˆ</h2>
<p>å¯« jQuery çš„ Plugin æœ€å¿«çš„æ–¹æ³•å°±æ˜¯æ‹¿ç¾æˆçš„ Plugin ä¾†æ”¹ï¼Œåªæ˜¯åœ¨é‚£éº¼å¤šçš„ Plugin ä¸­æ€éº¼æ‰¾åˆ°å¥½çš„ç¯„ä¾‹å‘¢ï¼Ÿåˆ¥æ“”å¿ƒï¼Œé€™é‚Šæˆ‘æä¾›ä¸€å€‹æœ€ç°¡å–®çš„ç¯„ä¾‹æ¨£ç‰ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">mytoolbox</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">});</span>
<span class="p">};</span>

</code></pre></div><p>é¦–å…ˆï¼Œ <code>mytoolbox</code> å°±æ˜¯æˆ‘å€‘çš„ plugin åç¨±ï¼Œåˆ©ç”¨ <code>jQuery.fn</code> æˆ‘å€‘å¯ä»¥å°‡å®ƒè¨»å†Šç‚º jQuery çš„ plugin ã€‚ç„¶å¾Œæˆ‘å€‘æŠŠ  <code>jQuery.fn.mytoolbox</code> æŒ‡å‘ä¸€å€‹åŒ¿åå‡½å¼ (anonymous function) ï¼Œåˆç¨±ç‚º callback ï¼›è€Œé€™å€‹ callback çš„å…§å®¹å¾ˆç°¡å–®ï¼Œå°±æ˜¯åˆ©ç”¨ jQuery çš„ <code>each</code> æ–¹æ³•ï¼Œä¾†ä¸€ä¸€åŸ·è¡Œå°æ‡‰çš„å‹•ä½œã€‚</p>
<p>ç‰¹åˆ¥è¦æ³¨æ„åŒ¿åå‡½å¼è£¡çš„ <code>this</code> é—œéµå­—ï¼Œå®ƒæœƒæŒ‡å‘ä¸€å€‹ jQuery ç‰©ä»¶ï¼›è€Œé€™å€‹ jQuery ç‰©ä»¶å‰‡æ˜¯æˆ‘å€‘è¦æŒ‡å®šçš„ï¼Œç¨å¾Œæˆ‘æœƒå†é€²ä¸€æ­¥èªªæ˜ã€‚</p>
<h2 id="ä½¿ç”¨-plugin">ä½¿ç”¨ Plugin</h2>
<p>ç¾åœ¨å°‡ä¸Šé¢çš„æ¨£ç‰ˆå­˜æˆ mytoolbox.js ï¼Œå’Œ jquery.js æ”¾åœ¨ä¸€èµ·ã€‚ç„¶å¾Œå»ºç«‹ä¸€å€‹ HTML æ¸¬è©¦æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html PUBLIC &#34;-//W3C//DTD XHTML 1.0 Transitional//EN&#34; &#34;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&#34;&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/1999/xhtml&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Content-Type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;text/html; charset=utf-8&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>jQuery TEST<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/css&#34;</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nc">test</span> <span class="p">{</span>
<span class="k">border</span><span class="p">:</span><span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#CCC</span><span class="p">;</span>
<span class="k">cursor</span><span class="p">:</span><span class="kc">pointer</span><span class="p">;</span>
<span class="k">padding</span><span class="p">:</span><span class="mi">3</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;test1&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;test&#34;</span><span class="p">&gt;</span>
é»æˆ‘ï¼
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;test2&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;test&#34;</span><span class="p">&gt;</span>
é»æˆ‘ï¼
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;debug&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;jquery/1.2.3.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;jquery/mytoolbox.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span><span class="p">&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.test&#39;</span><span class="p">).</span><span class="nx">mytoolbox</span><span class="p">();</span>
<span class="p">});</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>

</code></pre></div><p>é¦–å…ˆ HTML ä¸­å¼•ç”¨äº† jQuery å‡½å¼åº«åŠæˆ‘å€‘å¯«çš„ Plugin æª”æ¡ˆï¼Œç„¶å¾Œæˆ‘åœ¨ç•«é¢ä¸Šä½ˆç½®äº†å…©å€‹ class ç‚º <code>test</code> çš„ div å…ƒç´ ã€‚æ¥è‘—æˆ‘å€‘ç”¨ä»¥ä¸‹ç¨‹å¼ç¢¼ä¾†å‘¼å«æˆ‘å€‘çš„ Plugin ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.test&#39;</span><span class="p">).</span><span class="nx">mytoolbox</span><span class="p">();</span>
<span class="p">});</span>

</code></pre></div><p>é€™é‚Šçš„ç”¨æ„å°±æ˜¯å°‡ä¸Šé¢é‚£å…©å€‹ div å¥—ä¸Š mytoolbox é€™å€‹ Plugin ï¼Œé€™æ¨£ Plugin å°±èƒ½å‹•äº†ï¼Œå¾ˆç°¡å–®å§ï¼Ÿ</p>
<h2 id="åŠ å…¥å‹•ä½œ">åŠ å…¥å‹•ä½œ</h2>
<p>ç•¶ç„¶ï¼Œé€™å€‹ Plugin ä»€éº¼äº‹éƒ½é‚„æ²’é–‹å§‹åšï¼Œæ˜¯å€‹ç©ºéª¨æ¶è€Œå·²ã€‚ç¾åœ¨æˆ‘å€‘è¦ç‚ºå®ƒåŠ è¡€æ·»è‚‰ï¼Œè®“å®ƒå‹•èµ·ä¾†ã€‚</p>
<p>å…ˆç°¡å–®åœ¨ <code>each</code> çš„ callback è£¡åŠ å…¥ä¸€è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">mytoolbox</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span> <span class="c1">// åŠ å…¥æ­¤è¡Œ
</span><span class="c1"></span>    <span class="p">});</span>
<span class="p">};</span>

</code></pre></div><p>å†é‡æ–°ç€è¦½æ¸¬è©¦ç”¨çš„ HTML æª”ï¼Œä½ æœƒç™¼ç¾é é¢è‡ªå‹•è·³å‡ºäº†å…©æ¬¡è¨Šæ¯è¦–çª—ï¼Œå…§å®¹åˆ†åˆ¥æ˜¯ test1 å’Œ test2 ï¼›é€™è­‰æ˜äº†æˆ‘å€‘çš„ Plugin çš„ç¢ºæœ‰å¥—ç”¨åœ¨ class ç‚º <code>test</code> çš„å…©å€‹ div ä¸Šé¢ã€‚</p>
<p>ä¸éç¾åœ¨æœ‰å…©å€‹ <code>this</code> ï¼Œå®ƒå€‘æ˜¯ä¸€æ¨£çš„æ±è¥¿å—ï¼Ÿä¸ï¼Œå› ç‚º scope åŠè§¸ç™¼å°è±¡çš„ä¸åŒï¼Œå®ƒå€‘å…©å€‹æ˜¯ä¸åŒçš„æ±è¥¿ã€‚åœ¨å¤–é¢çš„ <code>this</code> æ˜¯ä¸€å€‹ jQuery ç‰©ä»¶ï¼ŒæŒ‡å‘æˆ‘å€‘æŒ‡å®šçš„ <code>$('.test')</code> é€™å€‹ç‰©ä»¶ï¼›è€Œ <code>each</code> callback è£¡çš„ <code>this</code> å‰‡æ˜¯ div å…ƒç´ ï¼Œå› ç‚º <code>each</code> æ˜¯å€‹ iterator function ï¼Œå› æ­¤ <code>alert(this.id)</code> æœƒåŸ·è¡Œå…©æ¬¡ã€‚åœ¨ç¬¬ä¸€æ¬¡çš„ <code>this</code> æœƒæŒ‡å‘ <code>#test1</code> é€™å€‹ div ï¼Œç¬¬äºŒæ¬¡å‰‡æŒ‡å‘ <code>#test2</code> é€™å€‹ div ã€‚</p>
<p>è¨»ï¼šé€™è£¡æˆ‘ç”¨ <code>#test1</code> è¡¨ç¤º id ç‚º <code>test1</code> çš„å…ƒç´ ã€‚</p>
<p>ç¾åœ¨æˆ‘å¸Œæœ›æ”¹æˆæŒ‰ä¸‹ div å…ƒç´ å¾Œæ‰æœƒ alert è©²å…ƒç´ çš„ id ï¼Œé€™è¦æ€éº¼åšå‘¢ï¼Ÿæˆ‘å€‘è¦æ”¹ç”¨ click äº‹ä»¶ï¼Œåšæ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">mytoolbox</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">};</span>

</code></pre></div><p>ç”±æ–¼ <code>each</code> callback è£¡çš„ <code>this</code> æ˜¯ DOM å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘å€‘è¦ç”¨ jQuery() æŠŠ <code>this</code> åŒ…èµ·ä¾†ï¼Œé€™æ¨£æ‰èƒ½æ–¹ä¾¿æŒ‡å®šè©²å…ƒç´ çš„ click äº‹ä»¶ã€‚ç¾åœ¨é‡æ–°ç€è¦½é é¢ï¼Œé»é¸ä»»ä½•ä¸€å€‹ div ï¼Œæ‡‰è©²å°±æœƒè·³å‡ºå°æ‡‰çš„è¨Šæ¯è¦–çª—äº†ã€‚</p>
<h2 id="å†åŒ…ä¸€å±¤">å†åŒ…ä¸€å±¤</h2>
<p>å¦‚æœåœ¨ <code>each</code> çš„ callback è£¡æœƒå‘¼å«åˆ°å¤šæ¬¡çš„ jQuery çš„è©±ï¼Œä¸€ç›´å¯« <code>jQuery</code> é€™å¹¾å€‹å­—å¯¦åœ¨æ˜¯å¾ˆç´¯äººçš„ä¸€ä»¶äº‹ï¼›è€Œä¸” <code>jQuery</code> ä¸æ˜¯å¯ä»¥ç°¡å¯«æˆ <code>$</code> è™Ÿå—ï¼Ÿä¸èƒ½ç›´æ¥ç”¨å—ï¼Ÿç•¶ç„¶å¯ä»¥ï¼Œåªæ˜¯é€™æ¨£å¯èƒ½æœƒå’Œå…¶ä»– JavaScript Library ç™¼ç”Ÿè¡çªï¼›æ‰€ä»¥æˆ‘å€‘è¦æ”¹ç”¨ä»¥ä¸‹çš„æ–¹å¼ä¾†åŒ…è¦†æˆ‘å€‘çš„ Plugin ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="p">;(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">mytoolbox</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">};</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>

</code></pre></div><p>JavaScript å¯ä»¥ç›´æ¥ç”¨ä¸€çµ„å°æ‹¬è™Ÿ <code>()</code> åŒ…è¦†ä¸€å€‹åŒ¿åå‡½å¼ï¼Œç„¶å¾Œå¾Œé¢å†æ¥ä¸€çµ„å°æ‹¬è™Ÿ <code>()</code>  è¡¨ç¤ºå‘¼å«é€™å€‹åŒ¿åå‡½å¼ï¼›è€Œç¬¬äºŒçµ„å°æ‹¬è™Ÿä¸­å°±å¯ä»¥æ”¾ç½®é€™å€‹åŒ¿åå‡½å¼çš„åƒæ•¸ã€‚æ‰€ä»¥åœ¨ä¸Šé¢çš„ç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘å€‘æŠŠ Plugin çš„ç¨‹å¼ç¢¼ç”¨ä¸€å€‹åŒ¿åå‡½å¼åŒ…è¦†èµ·ä¾†ï¼Œç„¶å¾Œåƒæ•¸å°±ç”¨æˆ‘å€‘å¸¸ç”¨çš„ <code>$</code> ç¬¦è™Ÿï¼›æ¥è‘—åœ¨åˆ©ç”¨å‰è¿°çš„åŸç†ï¼Œå°‡ <code>jQuery</code> é€™å€‹é¡åˆ¥å°å…¥çµ¦æˆ‘å€‘çš„ Plugin ï¼Œé€™æ¨£æˆ‘å€‘å°±å¯ä»¥å¾ˆå¿«æ¨‚åœ°åœ¨ Plugin ä¸­ä½¿ç”¨æˆ‘å€‘ç†Ÿæ‚‰çš„ <code>$</code> ç¬¦è™Ÿäº†ã€‚è‡³æ–¼æœ€å‰é¢çš„åˆ†è™Ÿ <code>;</code> ï¼Œä¸»è¦æ˜¯è€ƒæ…®é€™å€‹ Plugin æª”æ¡ˆæœƒå’Œå…¶ä»– JS æª”åˆä½µå£“ç¸®è€Œæ”¾é€²ä¾†çš„ã€‚</p>
<p>è¨»ï¼š <code>$</code> åœ¨ JavaScript è£¡æ˜¯åˆæ³•çš„è®Šæ•¸åç¨±ã€‚</p>
<p>å¾Œé¢çš„èªªæ˜æˆ‘æœƒç•¥éé€™å€‹åŒ…è¦†å‹•ä½œï¼Œåœ¨å¯¦éš›æª”æ¡ˆä¸­è«‹åˆ¥å¿˜äº†åŠ ã€‚</p>
<h2 id="åŠ å…¥é¸é …è¨­å®š">åŠ å…¥é¸é …è¨­å®š</h2>
<p>æ¥ä¸‹ä¾†æˆ‘å¸Œæœ›è®“ <code>each</code> çš„ callback å‡½å¼èƒ½è®“ä½¿ç”¨è€…è‡ªè¨‚ï¼Œå› æ­¤æˆ‘éœ€è¦ä¸€å€‹è®“ä½¿ç”¨è€…èƒ½è¨­å®šçš„é¸é …ã€‚å°±åƒå…¶ä»–çš„ Plugin ä¸€æ¨£ï¼Œæˆ‘å€‘è®“æˆ‘å€‘çš„ <code>mytoolbox</code> å¯ä»¥æ¥å—ä¸€å€‹ <code>settings</code> ç‰©ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">mytoolbox</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">_defaultSettings</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">_settings</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">_defaultSettings</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">callback</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

</code></pre></div><p>é¦–å…ˆæˆ‘å€‘ç‚º Plugin åŠ å…¥ <code>settings</code> åƒæ•¸ï¼Œä¹Ÿå°±æ˜¯ä¸€èˆ¬ Plugin å¸¸è¦‹çš„è¨­å®šå€¼ã€‚ç„¶å¾Œå‰‡æ˜¯ <code>_defaultSettings</code> ï¼Œå®ƒèƒ½å¹«æˆ‘å€‘åœ¨ä½¿ç”¨è€…æ²’æœ‰æŒ‡å®šä»»ä½•è¨­å®šå€¼çµ¦ <code>settings</code> æ™‚ï¼Œé‚„èƒ½å¤ æä¾›é è¨­çš„è¨­å®šå€¼ã€‚</p>
<p>æ¥è‘—æˆ‘ç”¨ jQuery æä¾›çš„ <code>extend</code> æ–¹æ³•ï¼Œå°‡ <code>settings</code> ä¸­æœ‰è¨­å®šçš„å€¼è¦†è“‹æ‰ <code>_defaultSettings</code> æ‰€è¨­å®šçš„é è¨­å€¼ï¼Œå†æŠŠçµæœå­˜æ”¾åœ¨ <code>_settings</code> é€™å€‹è®Šæ•¸ä¸­ï¼›å¾Œé¢æˆ‘å€‘å°±æœƒç”¨æ–°çš„ <code>_settings</code> è®Šæ•¸ç•¶åšæˆ‘å€‘çš„è¨­å®šå€¼ã€‚</p>
<p>ç¾åœ¨æˆ‘å€‘åœ¨ <code>_settings</code> ä¸­æŒ‡å®šäº†ä¸€å€‹ callback é …ç›® (é è¨­æ˜¯ç”¨ <code>alert</code> ) ï¼Œç„¶å¾Œå°‡å®ƒæŒ‡å®šçµ¦ div å…ƒç´ çš„ <code>click</code> è§¸ç™¼å™¨ã€‚ç¾åœ¨æˆ‘è¦åœ¨ HTML é é¢ä¸­æ›´æ”¹é€™å€‹äº‹ä»¶è™•ç†å™¨ï¼Œä½¿å®ƒä¸å†ä½¿ç”¨ <code>alert</code> ï¼Œè€Œæ˜¯æŠŠçµæœé¡¯ç¤ºåœ¨ <code>div#debug</code> è£¡ã€‚ç¨‹å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">debug</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#debug&#39;</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.test&#39;</span><span class="p">).</span><span class="nx">mytoolbox</span><span class="p">({</span>
        <span class="nx">callback</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">debug</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">debug</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;&lt;br /&gt;&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">});</span>

</code></pre></div><p>å†é‡æ–°ç€è¦½ä¸€æ¬¡é é¢ï¼Œçœ‹çœ‹æ•ˆæœæ˜¯ä¸æ˜¯ä¾ç…§æˆ‘å€‘æƒ³åƒçš„å®Œæˆå‘¢ï¼Ÿ</p>
<h2 id="ä¿®æ”¹è§¸ç™¼äº‹ä»¶">ä¿®æ”¹è§¸ç™¼äº‹ä»¶</h2>
<p>å‡è¨­ç¾åœ¨æˆ‘å€‘ä¸æƒ³ç”¨ <code>click</code> ï¼Œè€Œæ˜¯æƒ³è®“æ»‘é¼ ç§»éå°±è§¸ç™¼ callback å‘¢ï¼Ÿé€™æ™‚å°±è¦å€Ÿé‡ jQuery çš„ <code>bind</code> æ–¹æ³•äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">mytoolbox</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">_defaultSettings</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">bind</span><span class="o">:</span> <span class="s1">&#39;click&#39;</span><span class="p">,</span>
        <span class="nx">callback</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">_settings</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">_defaultSettings</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="nx">_settings</span><span class="p">.</span><span class="nx">bind</span><span class="p">,</span> <span class="nx">_settings</span><span class="p">.</span><span class="nx">callback</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

</code></pre></div><p>é€™è£¡æˆ‘åŠ å…¥ä¸€å€‹ <code>bind</code> è¨­å®šé …ç›®ï¼Œé è¨­æ˜¯ç”¨ click äº‹ä»¶è§¸ç™¼ã€‚å›åˆ° HTML é é¢ï¼Œæˆ‘å€‘æ”¹ç”¨ <code>mouseover</code> ä¾†è§¸ç™¼ callback ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">debug</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#debug&#39;</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.test&#39;</span><span class="p">).</span><span class="nx">mytoolbox</span><span class="p">({</span>
        <span class="nx">bind</span><span class="o">:</span> <span class="s1">&#39;mouseover&#39;</span><span class="p">,</span>
        <span class="nx">callback</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">debug</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">debug</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;&lt;br /&gt;&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">});</span>

</code></pre></div><p>é‡æ–°ç€è¦½ HTML é é¢ï¼Œç•¶æ»‘é¼ ç§»é div å…ƒç´ æ™‚ï¼Œæ˜¯ä¸æ˜¯æœƒå‡ºç¾å°æ‡‰çš„ id å‘¢ï¼Ÿ</p>
<p>åˆ°é€™è£¡ï¼Œç›¸ä¿¡å¤§å®¶éƒ½æ‡‰è©²å¤§è‡´ç­è§£å¦‚ä½•å»ºç«‹ä¸€å€‹ jQuery Plugin äº†å§ï¼Ÿæ¥ä¸‹ä¾†ï¼Œæˆ‘å°‡é€éå¯¦éš›çš„ä¾‹å­ç‚ºå¤§å®¶ä»‹ç´¹æ›´å¤šè‡ªè£½ jQuery Plugin æ‰€éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚</p>
<p>è«‹è§€è³ <a href="/2008/05/16/337/">Part 2</a> ã€‚</p>
<h2 id="åƒè€ƒç¶²å€">åƒè€ƒç¶²å€</h2>
<ul>
<li><a href="http://www.learningjquery.com/2007/10/a-plugin-development-pattern">A Plugin Development Pattern</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>[PHP] åœ¨ PHP5 ä¸­å¯¦ä½œ AOP çš„æ¦‚å¿µ</title>
			<link>https://jaceju.net/php-aop/</link>
			<pubDate>Mon, 14 Apr 2008 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/php-aop/</guid>
			<description>é€™ç¯‡ç©åœ¨æˆ‘é›»è…¦è£¡å¾ˆä¹…äº†ï¼Œä¸€ç›´æ²’å…¬é–‹&amp;hellip;é€™æ¬¡è¶è‘—è¦å¹«æˆ‘çš„ Library åŠ æ–™ï¼Œé †ä¾¿æ‹¿å‡ºä¾†åˆ†äº«ä¸€ä¸‹å¿ƒå¾—ã€‚ ä»€éº¼æ˜¯ AOP AOP å…¨åç‚º Aspect-Oriented Programming ï¼ŒåŸºæœ¬çš„è§€å¿µå¯ä»¥åƒè€ƒè‰¯</description>
			<content type="html"><![CDATA[<p>é€™ç¯‡ç©åœ¨æˆ‘é›»è…¦è£¡å¾ˆä¹…äº†ï¼Œä¸€ç›´æ²’å…¬é–‹&hellip;é€™æ¬¡è¶è‘—è¦å¹«æˆ‘çš„ Library åŠ æ–™ï¼Œé †ä¾¿æ‹¿å‡ºä¾†åˆ†äº«ä¸€ä¸‹å¿ƒå¾—ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="ä»€éº¼æ˜¯-aop">ä»€éº¼æ˜¯ AOP</h2>
<p>AOP å…¨åç‚º Aspect-Oriented Programming ï¼ŒåŸºæœ¬çš„è§€å¿µå¯ä»¥åƒè€ƒè‰¯è‘›æ ¼çš„ AOP å…¥é–€ï¼š</p>
<ul>
<li><a href="http://caterpillar.onlyfun.net/Gossip/SpringGossip/FromProxyToAOP.html">å¾ä»£ç†æ©Ÿåˆ¶åˆæ¢ AOP</a></li>
<li><a href="http://caterpillar.onlyfun.net/Gossip/SpringGossip/DynamicProxy.html">å‹•æ…‹ä»£ç†</a></li>
<li><a href="http://caterpillar.onlyfun.net/Gossip/SpringGossip/AOPConcept.html">AOP è§€å¿µèˆ‡è¡“èª</a></li>
</ul>
<p>é€™è£¡æˆ‘ç°¡å–®æä¸€ä¸‹ AOP çš„åŸºæœ¬æƒ³æ³•ï¼š</p>
<p>å‡è¨­ç•¶æˆ‘å€‘å‘¼å«ç‰©ä»¶çš„æŸäº›æ–¹æ³• (æˆ–æ˜¯<strong>æ¥­å‹™æµç¨‹</strong>) ä¹‹å¾Œï¼Œæœƒæƒ³è¦æŠŠç›¸é—œçš„è³‡è¨Šè¨˜éŒ„åˆ° log æª”è£¡ï¼Œæˆ‘å€‘ä¹Ÿè¨±æœƒé€™æ¨£å¯«ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="sd">/**
</span><span class="sd"> * Test
</span><span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Test</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * æŸå€‹æ–¹æ³•
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">doSomething</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// å»ºç«‹ Log ç‰©ä»¶
</span><span class="c1"></span>        <span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Log</span><span class="p">();</span>
        <span class="c1">// å¯«å…¥å‰ç½® Log
</span><span class="c1"></span>        <span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="s1">&#39;before do something.&#39;</span><span class="p">);</span>
        <span class="c1">// ä¸»è¦çš„å‹•ä½œ
</span><span class="c1"></span>        <span class="c1">// ...
</span><span class="c1"></span>        <span class="c1">// å¯«å…¥ Log
</span><span class="c1"></span>        <span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="s1">&#39;before do something.&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div><p>å¯æ˜¯å¦‚æœä»Šå¤©é€™å€‹è¨˜éŒ„ log çš„é€™å€‹å‹•ä½œåªæ˜¯è‡¨æ™‚çš„ï¼Œæˆ–æ˜¯åœ¨æœªä¾†å¯èƒ½æœƒéœ€è¦å†åŠ å…¥ä¸åŒçš„å‹•ä½œæ™‚ (ä¾‹å¦‚å¯„ä¿¡) ï¼Œé›£é“æˆ‘å€‘é‚„è¦åœ¨åŸæœ‰æ–¹æ³•çš„ç¨‹å¼ç¢¼è£¡ä¿®ä¿®æ”¹æ”¹å—ï¼Ÿæœ‰æ²’æœ‰ä»€éº¼æ–¹å¼èƒ½å”åŠ©æˆ‘å€‘å‹•æ…‹åœ°æŠŠè¨˜éŒ„çš„å‹•ä½œæ’åœ¨åŸæœ‰å‹•ä½œä¹‹å¾Œå‘¢ï¼Ÿ</p>
<p>AOP å°±æ˜¯å¾é€™å€‹è§’åº¦æ‰€å»¶ä¼¸å‡ºä¾†çš„ä¸€ç¨®è§€å¿µï¼Œå®ƒèƒ½å”åŠ©æˆ‘å€‘åœ¨ä¸ä¾µå…¥åŸæœ‰é¡åˆ¥ç¨‹å¼ç¢¼çš„ç‹€æ³ä¸‹ï¼Œå‹•æ…‹åœ°ç‚ºé¡åˆ¥æ–¹æ³•æ–°å¢é¡å¤–çš„æ¬Šè²¬ï¼›ç°¡å–®ä¾†èªªï¼Œ AOP ä¸»è¦çš„ç›®çš„å°±æ˜¯<!-- raw HTML omitted -->åˆ‡å…¥é¡åˆ¥åŸæœ‰æ–¹æ³•åŸ·è¡Œä¹‹å‰æˆ–ä¹‹å¾Œï¼Œä¸¦å®‰æ’æˆ‘å€‘æƒ³è¦åŸ·è¡Œçš„å‹•ä½œ<!-- raw HTML omitted -->ã€‚</p>
<p>è¨»ï¼š IT ç•Œä¼¼ä¹å¾ˆå–œæ­¡ç™¼æ˜æ·±å¥§çš„åè©ä¾†è©®é‡‹ä¸€å€‹ç°¡å–®çš„æ¦‚å¿µï¼Œç„¶å¾Œåƒæˆ‘é€™æ¨£ä¸å­¸ç„¡è¡“çš„é–‹ç™¼è€…å°±å¸¸è¢«å”¬å¾—ä¸€æ¥ä¸€æ¥çš„ã€‚</p>
<h2 id="aop-å’Œ-decorator">AOP å’Œ Decorator</h2>
<p>å…ˆä»‹ç´¹å¹¾ç¯‡å¯¦ä½œ AOP çš„æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://racklin.blogspot.com/2007/08/aop-for-jquery.html">AOP for jQuery</a></li>
<li><a href="http://blog.jonnay.net/archives/637-Aspect-Oriented-Programming-in-PHP-as-a-contrast-to-other-languages..html">Aspect Oriented Programming in PHP as a contrast to other languages.</a></li>
<li><a href="http://wiki.jonnay.net/bunny/bunnyaspectsphp">Bunny Aspects</a></li>
<li><a href="http://jaxn.org/article/2004/10/16/more-on-aspect-oriented-php/">More on Aspect Oriented PHP</a></li>
<li><a href="http://hi.baidu.com/thinkinginlamp/blog/item/864a0ef46d93b86eddc474f3.html">åœ¨PHPé‡Œåˆ©ç”¨é­”æœ¯æ–¹æ³•å®ç°å‡†AOP</a></li>
<li><a href="http://sushener.spaces.live.com/blog/cns!BB54050A5CFAFCDD!546.entry">AOPåœ¨PHPä¸­çš„å®ç°æ–¹å¼</a></li>
<li><a href="http://www.phpclasses.org/browse/package/2633.html">Class: AOP Library for PHP</a></li>
</ul>
<p>å…¶å¯¦ä¸€é–‹å§‹æˆ‘ä»¥ç‚º AOP å’Œ Decorator æ¨¡å¼åœ¨ PHP ä¸Šçš„å¯¦ä½œæ–¹å¼æ˜¯å·®ä¸å¤šçš„ï¼Œä¸éå¯¦éš›ä¸Šé‚„æœ‰æ˜¯äº›è¨±çš„å·®åˆ¥ã€‚</p>
<p>ä¸€èˆ¬åœ¨ Decorator æ¨¡å¼ä¸­ï¼Œå…·é«”é¡åˆ¥å’Œ Wrapper é¡åˆ¥éƒ½æœƒæœ‰å€‹å…±åŒçš„ç¥–å…ˆï¼Œäº¦å³ä¸€å€‹æŠ½è±¡é¡åˆ¥æˆ–ä»‹é¢ï¼Œå› æ­¤æ‰€ç”¢ç”Ÿå‡ºä¾†çš„ç‰©ä»¶å° Client ç¨‹å¼ä¾†èªªï¼Œå…¶æŠ½è±¡å‹æ…‹å¯ä»¥èªªæ˜¯ä¸€æ¨£çš„ã€‚</p>
<p>ä½†æ˜¯åœ¨ AOP in PHP ä¸­ï¼Œæˆ‘å€‘å¿…é ˆé€éä¸€å€‹ä»£ç†é¡åˆ¥ä¾†åˆ‡å…¥åŸæœ‰çš„é¡åˆ¥æ–¹æ³•è£¡ï¼Œé›–ç„¶é€™å€‹ä»£ç†é¡åˆ¥ä¹Ÿèƒ½å¤ æä¾›åŸæœ‰é¡åˆ¥ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œä½†æ˜¯å¯¦éš›ä¸Šå®ƒå»å·²ç¶“å¤±å»äº†èˆ‡åŸæœ‰é¡åˆ¥æ‰€æ“æœ‰çš„æŠ½è±¡å‹æ…‹äº†ã€‚</p>
<h2 id="ç”¨-php-å¯¦ä½œ-aop">ç”¨ PHP å¯¦ä½œ AOP</h2>
<p>é¦–å…ˆæˆ‘å€‘ä¾†çœ‹çœ‹é‚„æ²’æœ‰åˆ‡å…¥ä»»ä½•äº‹ä»¶çš„ç›®æ¨™é¡åˆ¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="sd">/**
</span><span class="sd"> * Test class
</span><span class="sd"> *
</span><span class="sd"> */</span>
<span class="k">class</span> <span class="nc">TestClass</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * Method 1
</span><span class="sd">     *
</span><span class="sd">     * @param string $message
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">method1</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="no">__METHOD__</span><span class="p">,</span> <span class="s2">&#34;:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="nv">$message</span><span class="p">,</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="sd">/**
</span><span class="sd">     * Method 2
</span><span class="sd">     *
</span><span class="sd">     * @return int
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">method2</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="no">__METHOD__</span><span class="p">,</span> <span class="s2">&#34;:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">rand</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="sd">/**
</span><span class="sd">     * Method 3
</span><span class="sd">     *
</span><span class="sd">     * @throws Exception
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">method3</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="no">__METHOD__</span><span class="p">,</span> <span class="s2">&#34;:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">&#39;Test Exception.&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div><p>é€™å€‹é¡åˆ¥æä¾›äº†ä¸‰å€‹æ–¹æ³•ï¼Œå…¶ä¸­ method1 å’Œ method2 åªæ˜¯ç°¡å–®çš„é¡¯ç¤ºè³‡æ–™è€Œå·²ï¼Œè€Œ method3 å‰‡æœƒä¸Ÿå‡ºä¸€å€‹ç•°å¸¸ã€‚</p>
<p>å¦å¤–æˆ‘å€‘éœ€è¦ä¸€å€‹ Log é¡åˆ¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="sd">/**
</span><span class="sd"> * Log
</span><span class="sd"> *
</span><span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Log</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * log message
</span><span class="sd">     *
</span><span class="sd">     * @param string $message
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">save</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$message</span><span class="p">,</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div><p>é€™å€‹ Log é¡åˆ¥åªæä¾›ä¸€å€‹ save() æ–¹æ³•ï¼Œä»¥é¡¯ç¤º log è¨Šæ¯ã€‚</p>
<p>ç¾åœ¨æˆ‘å€‘è¦å®Œæˆçš„ç›®æ¨™å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>åœ¨ method1 åŸ·è¡Œå‰å‘¼å« Log::save() ã€‚</p>
</li>
<li>
<p>åœ¨ method2 åŸ·è¡Œå¾Œå‘¼å« Log::save() ã€‚</p>
</li>
<li>
<p>åœ¨ method3 ç™¼ç”Ÿç•°å¸¸æ™‚å‘¼å« Log::save() ã€‚</p>
</li>
</ul>
<p>é€™è£¡æˆ‘ç”¨å¾ˆç°¡å–®çš„æ–¹å¼ä¾†åšï¼Œé‚£å°±æ˜¯ç›´æ¥ä½¿ç”¨ä¸€å€‹ Aspect é¡åˆ¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="sd">/**
</span><span class="sd"> * Aspect
</span><span class="sd"> *
</span><span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Aspect</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * Name of target class
</span><span class="sd">     *
</span><span class="sd">     * @var string
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$_className</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
    <span class="sd">/**
</span><span class="sd">     * Target object
</span><span class="sd">     *
</span><span class="sd">     * @var object
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$_target</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
    <span class="sd">/**
</span><span class="sd">     * Event callback
</span><span class="sd">     *
</span><span class="sd">     * @var array
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$_eventCallbacks</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="sd">/**
</span><span class="sd">     * Add object
</span><span class="sd">     *
</span><span class="sd">     * @param object $target
</span><span class="sd">     * @return Aspect
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">addObject</span><span class="p">(</span><span class="nv">$target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Aspect</span><span class="p">(</span><span class="nv">$target</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="sd">/**
</span><span class="sd">     * Contructor
</span><span class="sd">     *
</span><span class="sd">     * @param object $target
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">is_object</span><span class="p">(</span><span class="nv">$target</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_target</span> <span class="o">=</span> <span class="nv">$target</span><span class="p">;</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_className</span> <span class="o">=</span> <span class="nx">get_class</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_target</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="sd">/**
</span><span class="sd">     * Register event
</span><span class="sd">     *
</span><span class="sd">     * @param string $eventName
</span><span class="sd">     * @param string $methodName
</span><span class="sd">     * @param callback $callback
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="k">function</span> <span class="nf">_registerEvent</span><span class="p">(</span><span class="nv">$eventName</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$callback</span><span class="p">,</span> <span class="nv">$args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_eventCallbacks</span><span class="p">[</span><span class="nv">$methodName</span><span class="p">]))</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_eventCallbacks</span><span class="p">[</span><span class="nv">$methodName</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">is_callable</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_target</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">)))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="nx">get_class</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_target</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;::&#39;</span> <span class="o">.</span> <span class="nv">$methodName</span> <span class="o">.</span> <span class="s1">&#39; is not exists.&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">is_callable</span><span class="p">(</span><span class="nv">$callback</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_eventCallbacks</span><span class="p">[</span><span class="nv">$methodName</span><span class="p">](</span><span class="nv">$eventName</span><span class="p">)</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$callback</span><span class="p">,</span> <span class="nv">$args</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$callbackName</span> <span class="o">=</span> <span class="nx">Aspect</span><span class="o">::</span><span class="na">getCallbackName</span><span class="p">(</span><span class="nv">$callback</span><span class="p">);</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="nv">$callbackName</span> <span class="o">.</span> <span class="s1">&#39; is not callable.&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="sd">/**
</span><span class="sd">     * Register &#39;before&#39; handler
</span><span class="sd">     *
</span><span class="sd">     * @param string $methodName
</span><span class="sd">     * @param callback $callback
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">before</span><span class="p">(</span><span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$callback</span><span class="p">,</span> <span class="nv">$args</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_registerEvent</span><span class="p">(</span><span class="s1">&#39;before&#39;</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$callback</span><span class="p">,</span> <span class="p">(</span><span class="k">array</span><span class="p">)</span> <span class="nv">$args</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="sd">/**
</span><span class="sd">     * Register &#39;after&#39; handler
</span><span class="sd">     *
</span><span class="sd">     * @param string $methodName
</span><span class="sd">     * @param callback $callback
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">after</span><span class="p">(</span><span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$callback</span><span class="p">,</span> <span class="nv">$args</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_registerEvent</span><span class="p">(</span><span class="s1">&#39;after&#39;</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$callback</span><span class="p">,</span> <span class="p">(</span><span class="k">array</span><span class="p">)</span> <span class="nv">$args</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="sd">/**
</span><span class="sd">     * Register &#39;on catch exception&#39; handler
</span><span class="sd">     *
</span><span class="sd">     * @param string $methodName
</span><span class="sd">     * @param callback $callback
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">onCatchException</span><span class="p">(</span><span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$callback</span><span class="p">,</span> <span class="nv">$args</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_registerEvent</span><span class="p">(</span><span class="s1">&#39;onCatchException&#39;</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$callback</span><span class="p">,</span> <span class="p">(</span><span class="k">array</span><span class="p">)</span> <span class="nv">$args</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="sd">/**
</span><span class="sd">     * Trigger event
</span><span class="sd">     *
</span><span class="sd">     * @param string $eventName
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="k">function</span> <span class="nf">_trigger</span><span class="p">(</span><span class="nv">$eventName</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_eventCallbacks</span><span class="p">[</span><span class="nv">$methodName</span><span class="p">](</span><span class="nv">$eventName</span><span class="p">)))</span> <span class="p">{</span>
            <span class="k">list</span><span class="p">(</span><span class="nv">$callback</span><span class="p">,</span> <span class="nv">$args</span><span class="p">)</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_eventCallbacks</span><span class="p">[</span><span class="nv">$methodName</span><span class="p">](</span><span class="nv">$eventName</span><span class="p">);</span>
            <span class="nv">$args</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$target</span><span class="p">;</span>
            <span class="nx">call_user_func_array</span><span class="p">(</span><span class="nv">$callback</span><span class="p">,</span> <span class="nv">$args</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="sd">/**
</span><span class="sd">     * Execute method
</span><span class="sd">     *
</span><span class="sd">     * @param string $methodName
</span><span class="sd">     * @param array $args
</span><span class="sd">     * @return mixed
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__call</span><span class="p">(</span><span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">is_callable</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_target</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">)))</span> <span class="p">{</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_trigger</span><span class="p">(</span><span class="s1">&#39;before&#39;</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_target</span><span class="p">);</span>
                <span class="nv">$result</span> <span class="o">=</span> <span class="nx">call_user_func_array</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_target</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">),</span> <span class="nv">$args</span><span class="p">);</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_trigger</span><span class="p">(</span><span class="s1">&#39;after&#39;</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_target</span><span class="p">);</span>
                <span class="k">return</span> <span class="nv">$result</span> <span class="o">?</span> <span class="nv">$result</span> <span class="o">:</span> <span class="k">null</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_trigger</span><span class="p">(</span><span class="s1">&#39;onCatchException&#39;</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">,</span> <span class="nv">$e</span><span class="p">);</span>
                <span class="k">throw</span> <span class="nv">$e</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s2">&#34;Call to undefined method </span><span class="si">{</span>$this-&gt;_className<span class="si">}</span><span class="s2">::</span><span class="si">$methodName</span><span class="s2">.&#34;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="sd">/**
</span><span class="sd">     * Get name of callback
</span><span class="sd">     *
</span><span class="sd">     * @param callback $callback
</span><span class="sd">     * @return string
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">getCallbackName</span><span class="p">(</span><span class="nv">$callback</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$className</span>  <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="nv">$methodName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">is_array</span><span class="p">(</span><span class="nv">$callback</span><span class="p">)</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="mi">2</span> <span class="o">==</span> <span class="nx">count</span><span class="p">(</span><span class="nv">$callback</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">is_object</span><span class="p">(</span><span class="nv">$callback</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
                <span class="nv">$className</span> <span class="o">=</span> <span class="nx">get_class</span><span class="p">(</span><span class="nv">$callback</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nv">$className</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$callback</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="nv">$methodName</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$callback</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nx">is_string</span><span class="p">(</span><span class="nv">$callback</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$methodName</span> <span class="o">=</span> <span class="nv">$callback</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$className</span> <span class="o">.</span> <span class="p">((</span><span class="nv">$className</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;::&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="nv">$methodName</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div><p>é€™å€‹é¡åˆ¥æœ‰é»å°é•·ï¼Œç°¡å–®èªªæ˜å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>æˆ‘å€‘åˆ©ç”¨ Aspect::addObject() æ–¹æ³•ä¾†æŒ‡å®šè¦è¢«åˆ‡å…¥çš„ç‰©ä»¶ï¼› addObject() æ–¹æ³•æœƒå›å‚³ä¸€å€‹é€æ˜çš„ Aspect ç‰©ä»¶ã€‚</p>
</li>
<li>
<p>åˆ©ç”¨ before ã€ after å’Œ onCatchException ä¸‰å€‹æ–¹æ³•ä¾†æŒ‡å®šåˆ‡å…¥çš„æ™‚æ©Ÿï¼Œå®ƒå€‘æœƒå‘¼å« _registerEvent() æ–¹æ³•ä¾†è¨»å†Šè¦åŸ·è¡Œçš„å›å‘¼å‡½å¼ (callback) ã€‚</p>
</li>
<li>
<p>åŸ·è¡ŒåŸä¾†è¢«åˆ‡å…¥ç‰©ä»¶çš„æ–¹æ³•ï¼Œé€™æ™‚æœƒè§¸å‹• Aspect çš„ __call() æ–¹æ³•ï¼Œä¸¦åœ¨æŒ‡å®šçš„åˆ‡å…¥æ™‚æ©Ÿå‘¼å« _trigger() æ–¹æ³•ä¾†åŸ·è¡Œæˆ‘å€‘æ‰€åˆ‡å…¥çš„å›å‘¼å‡½å¼ã€‚</p>
</li>
</ul>
<p>å…ˆä¾†çœ‹çœ‹é‚„æ²’æœ‰ä½¿ç”¨ AOP å‰ï¼Œæˆ‘å€‘å° TestClass é¡åˆ¥çš„æ¸¬è©¦ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="s1">&#39;TestClass.php&#39;</span><span class="p">;</span>
<span class="nv">$test</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TestClass</span><span class="p">();</span>
<span class="cm">/* @var $test TestClass */</span>
<span class="k">echo</span> <span class="s2">&#34;=======</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="nv">$test</span><span class="o">-&gt;</span><span class="na">method1</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">&#34;=======</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$test</span><span class="o">-&gt;</span><span class="na">method2</span><span class="p">(),</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&#34;=======</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="nv">$test</span><span class="o">-&gt;</span><span class="na">method3</span><span class="p">();</span>
<span class="k">echo</span> <span class="s2">&#34;=======</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="cm">/* åŸ·è¡Œçµæœï¼š
</span><span class="cm">=======
</span><span class="cm">TestClass::method1:
</span><span class="cm">abc
</span><span class="cm">=======
</span><span class="cm">TestClass::method2:
</span><span class="cm">2
</span><span class="cm">=======
</span><span class="cm">TestClass::method3:
</span><span class="cm">Exception: Test Exception. in TestClass.php on line 38
</span><span class="cm">*/</span>

</code></pre></div><p>æ¥ä¸‹ä¾†æˆ‘å€‘åˆ©ç”¨ Aspect é¡åˆ¥ä¾†å° TestClass ç‰©ä»¶çš„ä¸‰å€‹æ–¹æ³•åˆ‡å…¥ Log::save() ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="s1">&#39;Aspect.php&#39;</span><span class="p">;</span>
<span class="k">require_once</span> <span class="s1">&#39;TestClass.php&#39;</span><span class="p">;</span>
<span class="k">require_once</span> <span class="s1">&#39;Log.php&#39;</span><span class="p">;</span>
<span class="nv">$test</span> <span class="o">=</span> <span class="nx">Aspect</span><span class="o">::</span><span class="na">addObject</span><span class="p">(</span><span class="k">new</span> <span class="nx">TestClass</span><span class="p">());</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Log</span><span class="p">();</span>
<span class="nv">$test</span><span class="o">-&gt;</span><span class="na">before</span><span class="p">(</span><span class="s1">&#39;method1&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="nv">$logger</span><span class="p">,</span> <span class="s1">&#39;save&#39;</span><span class="p">),</span> <span class="s1">&#39;Log saved (method1).&#39;</span><span class="p">);</span>
<span class="nv">$test</span><span class="o">-&gt;</span><span class="na">after</span><span class="p">(</span><span class="s1">&#39;method2&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="nv">$logger</span><span class="p">,</span> <span class="s1">&#39;save&#39;</span><span class="p">),</span> <span class="s1">&#39;Log saved (method2).&#39;</span><span class="p">);</span>
<span class="nv">$test</span><span class="o">-&gt;</span><span class="na">onCatchException</span><span class="p">(</span><span class="s1">&#39;method3&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="nv">$logger</span><span class="p">,</span> <span class="s1">&#39;save&#39;</span><span class="p">),</span> <span class="s1">&#39;Log saved (method3).&#39;</span><span class="p">);</span>
<span class="cm">/* @var $test TestClass */</span>
<span class="k">echo</span> <span class="s2">&#34;=======</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="nv">$test</span><span class="o">-&gt;</span><span class="na">method1</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">&#34;=======</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$test</span><span class="o">-&gt;</span><span class="na">method2</span><span class="p">(),</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&#34;=======</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="nv">$test</span><span class="o">-&gt;</span><span class="na">method3</span><span class="p">();</span>
<span class="k">echo</span> <span class="s2">&#34;=======</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="cm">/* åŸ·è¡Œçµæœï¼š
</span><span class="cm">=======
</span><span class="cm">Log saved (method1).
</span><span class="cm">TestClass::method1:
</span><span class="cm">abc
</span><span class="cm">=======
</span><span class="cm">TestClass::method2:
</span><span class="cm">Log saved (method2).
</span><span class="cm">8
</span><span class="cm">=======
</span><span class="cm">TestClass::method3:
</span><span class="cm">Log saved (method3).
</span><span class="cm">Exception: Test Exception. in TestClass.php on line 38
</span><span class="cm">*/</span>

</code></pre></div><h2 id="çµè«–">çµè«–</h2>
<p>æˆ‘å€‘å¯ä»¥å¾ç¯„ä¾‹çœ‹åˆ°ï¼Œ AOP èƒ½å¹«æˆ‘å€‘åœ¨æŸé¡åˆ¥çš„æ–¹æ³•ä¸­æ’å…¥ä¸€äº›é¡å¤–çš„å‹•ä½œï¼ŒåŒæ™‚åˆèƒ½ä¸ç ´å£åŸæœ‰é¡åˆ¥çš„ç¨‹å¼ç¢¼ã€‚è€Œå®ƒèˆ‡ Decorator æœ€å¤§çš„ä¸åŒæ˜¯ï¼Œ Decorator å¿…é ˆç”¨å¾ˆå¤šå°é¡åˆ¥ä¾†å®Œæˆç›¸åŒçš„å‹•ä½œï¼Œä½†æ˜¯ AOP å‰‡é€é PHP çš„å‹•æ…‹ç‰¹æ€§è§£æ±ºäº†é€™å€‹å•é¡Œã€‚</p>
<p>ç•¶ç„¶ AOP ä¹Ÿä¸æ˜¯è¬éˆä¸¹ï¼Œåƒåœ¨æœ¬æ–‡çš„å¯¦ä½œè£¡å®ƒå°±ä¸èƒ½æ¥è§¸ç›®æ¨™é¡åˆ¥çš„éå…¬é–‹å±¬æ€§ã€‚è€Œä¹‹å‰ä¹Ÿè·Ÿ <a href="http://blog.markplace.net/">Mark</a> èŠäº†ä¸€ä¸‹ï¼Œå…¶å¯¦ AOP åå‘æ–¼ç¨‹å¼çš„æ•´é«”è¨­è¨ˆï¼Œæ‰€ä»¥é€™è£¡çš„ç¯„ä¾‹å°šä¸èƒ½ç”¨æ–¼å¯¦æˆ°ä¹‹ä¸­ï¼Œåƒ…åƒ…åªæ˜¯æˆ‘å€‹äººä¸€å€‹æ¦‚å¿µçš„å¯¦ä½œè€Œå·²ã€‚</p>
<p>ä¾›å¤§å®¶åƒè€ƒçœ‹çœ‹å§ã€‚ä¹Ÿæ­¡è¿ä¸€èµ·è¨è«–~</p>
]]></content>
		</item>
		
		<item>
			<title>[PHP] PHP å¯†æŠ€ï¼š include èˆ‡ require</title>
			<link>https://jaceju.net/return-value-from-included-file/</link>
			<pubDate>Fri, 22 Feb 2008 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/return-value-from-included-file/</guid>
			<description>å¯ä»¥æ¥å—å›å‚³è³‡æ–™ï¼Ÿ å…ˆèª¿æŸ¥ä¸€ä¸‹ï¼ŒçŸ¥é“ include æˆ– require å¯ä»¥å–å¾—å›å‚³è³‡æ–™çš„è«‹èˆ‰æ‰‹&amp;hellip; (çœºæœ›) å‘ƒ&amp;hellip;ä¸çŸ¥é“çš„æœ‹å‹ä¹Ÿä¸ç”¨ç…©æƒ±ï¼Œæˆ‘ä¾†è§£é‡‹ä¸€</description>
			<content type="html"><![CDATA[<h2 id="å¯ä»¥æ¥å—å›å‚³è³‡æ–™">å¯ä»¥æ¥å—å›å‚³è³‡æ–™ï¼Ÿ</h2>
<p>å…ˆèª¿æŸ¥ä¸€ä¸‹ï¼ŒçŸ¥é“ include æˆ– require å¯ä»¥å–å¾—å›å‚³è³‡æ–™çš„è«‹èˆ‰æ‰‹&hellip; (çœºæœ›)</p>
<p>å‘ƒ&hellip;ä¸çŸ¥é“çš„æœ‹å‹ä¹Ÿä¸ç”¨ç…©æƒ±ï¼Œæˆ‘ä¾†è§£é‡‹ä¸€ä¸‹ã€‚</p>
<!-- raw HTML omitted -->
<p>å¦‚ä½•å›å‚³è³‡æ–™å‘¢ï¼Ÿå‡è¨­ç¾åœ¨æœ‰å€‹ php æª”å«åš <code>config.php</code> ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;456&#39;</span><span class="p">);</span>
</code></pre></div><p>å’¦ï¼Ÿé‚£é‚Šæœ‰äººèªª <code>return</code> æ”¾éŒ¯åœ°æ–¹äº†ï¼Ÿä¸ä¸ä¸ï¼Œ PHP èƒ½æ¥å—é€™æ¨£çš„å¯«æ³•ã€‚</p>
<p>å¥½ï¼Œç¾åœ¨æˆ‘å€‘ä¾†è­‰æ˜ <code>include</code> æˆ– <code>require</code> èƒ½å–å¾— <code>config.php</code> æ‰€ return å›ä¾†çš„è³‡æ–™ã€‚è«‹å»ºç«‹ä¸€æ”¯ <code>test.php</code> ï¼Œå…¶å…§å®¹æ˜¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$config</span> <span class="o">=</span> <span class="k">require</span> <span class="s1">&#39;config.php&#39;</span><span class="p">;</span>
<span class="nx">var_dump</span><span class="p">(</span><span class="nv">$config</span><span class="p">);</span>
</code></pre></div><p>åŸ·è¡Œçœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è·‘å‘€ï¼Ÿ</p>
<p>æ‰€ä»¥æˆ‘å€‘å¯ä»¥åœ¨æŸæ”¯ PHP ç¨‹å¼ä¸­ return ä¸€å€‹è³‡æ–™ (ä»»ä½•å‹æ…‹) ï¼Œç„¶å¾Œåœ¨å¦ä¸€æ”¯ PHP ç¨‹å¼ä¸­ç”¨ <code>include</code> æˆ– <code>require</code> ä¾†å–å¾—é€™å€‹è³‡æ–™ã€‚</p>
<h2 id="æŠŠ-require-æ”¾åœ¨åƒæ•¸è£¡">æŠŠ require æ”¾åœ¨åƒæ•¸è£¡</h2>
<p>ä»€éº¼ï¼Ÿé€™ä¸æ˜¯å¯†æŠ€ï¼Ÿä¸ä¸ä¸ï¼Œå¯†æŠ€åœ¨åº•ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">function test($config) {
    var_dump($config);
}
test(require &#39;config.php&#39;);
</code></pre></div><p>å°ï¼ä½ æ²’çœ‹éŒ¯ï¼ç›´æ¥æŠŠ <code>require</code> æ”¾åœ¨å‡½å¼çš„åƒæ•¸è£¡ï¼</p>
<p>é‚„æ²’å®Œå‘¢ï¼Œå†çœ‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Test
{
    public function __construct($config)
    {
        var_dump($config);
    }
}

$a = new Test(require &#39;config.php&#39;);
</code></pre></div><p>é€£ new å»ºæ§‹å­çš„åƒæ•¸éƒ½å¯ä»¥æ¥å— require ï¼</p>
<p>æ‰€ä»¥åªè¦èƒ½æ”¾è®Šæ•¸çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥æ”¾ <code>include</code> æˆ– <code>require</code> ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">if (require &#39;config.php&#39;) {
    var_dump(require &#39;config.php&#39;);
}

if ($config = require &#39;config.php&#39;) {
    var_dump($config);
}
</code></pre></div><p>è€Œä¸”ä¸åƒ…æ˜¯ <code>include</code> åŠ <code>require</code> ï¼Œé€£ <code>include_once</code> å’Œ <code>require_once</code> éƒ½å¯ä»¥é€™éº¼åšã€‚</p>
<p>æˆ‘åœ¨<a href="http://blog.astrumfutura.com/archives/340-The-Zend-Framework,-Dependency-Injection-and-Zend_Di.html">æŸç¯‡æ–‡ç« </a>ç™¼ç¾é€™å€‹å¯†æŠ€ä»¥å¾Œï¼Œåˆ†äº«çµ¦è¾¦å…¬å®¤è£¡çš„åŒäº‹å€‘ï¼›æ²’æƒ³åˆ°ç©äº† PHP é€™éº¼å¤šå¹´çš„ä»–å€‘ä¹Ÿæ²’çœ‹éé€™å€‹æ–¹æ³•ï¼Œçœ‹ä¾†å¤§å®¶å° PHP çš„ç­è§£éœ€è¦æ›´æ·±å…¥ä¸€é»å›‰ï¼</p>
<h2 id="scope-çš„å•é¡Œ">Scope çš„å•é¡Œ</h2>
<p>æ¥è‘—æˆ‘åŒäº‹å•äº†æˆ‘ä¸€å€‹å•é¡Œï¼šå¦‚æœåœ¨åƒæ•¸ä½¿ç”¨ <code>require</code> æ•˜è¿°ï¼Œè€Œä¸”è¢« require çš„ PHP ç¨‹å¼è£¡å¦‚æœæœ‰å®šç¾©å…¨åŸŸè®Šæ•¸çš„è©±ï¼Œé‚£éº¼é€™å€‹è®Šæ•¸åœ¨åŸ·è¡Œçš„ PHP ç¨‹å¼è£¡ï¼Œå®ƒçš„ scope åœ¨å“ªè£¡å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼šå®ƒé‚„æ˜¯å…¨åŸŸã€‚</p>
<p>æ€éº¼èªªå‘¢ï¼Ÿç¾åœ¨æˆ‘å€‘åœ¨å‰›å‰›çš„ <code>config.php</code> çš„ <code>return</code> æ•˜è¿°å‰åŠ ä¸Šä¸€è¡Œç¨‹å¼ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="s1">&#39;789&#39;</span><span class="p">;</span> <span class="c1">// åŠ ä¸Šé€™è¡Œ
</span><span class="c1"></span><span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;456&#39;</span><span class="p">);</span>
</code></pre></div><p>ç„¶å¾Œåœ¨ test.php è£¡çš„ Global éƒ¨ä»½ (ä¹Ÿå°±æ˜¯ä¸åœ¨å‡½å¼æˆ–é¡åˆ¥å®šç¾©è£¡) çš„ä»»æ„è™•åŠ å…¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">var_dump($data);
</code></pre></div><p>æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥æ­£ç¢ºé¡¯ç¤º <code>config.php</code> ä¸­ <code>$data</code> è®Šæ•¸æ‰€æŒ‡å®šçš„å…§å®¹å‘¢ï¼Ÿé€™å°±è¡¨ç¤ºåœ¨åƒæ•¸ä¸­ä½¿ç”¨ <code>require</code> ä¸æœƒå½±éŸ¿å…¨åŸŸè®Šæ•¸çš„ scope ã€‚</p>
<p>é‚„æœ‰å…¶ä»– <code>include</code> æˆ– <code>require</code> çš„å¯†æŠ€å—ï¼Ÿæ­¡è¿å¤§å®¶ä¸€èµ·è¨è«–å›‰~</p>
]]></content>
		</item>
		
		<item>
			<title>[PHP] äº¤æ›å…©å€‹è®Šæ•¸ (ä¸ä½¿ç”¨ tmp è®Šæ•¸) ç¨‹å¼å¯«æ³•</title>
			<link>https://jaceju.net/php-swap-variables/</link>
			<pubDate>Fri, 23 Nov 2007 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/php-swap-variables/</guid>
			<description>åœ¨å®—è‘£çš„ Blog çœ‹åˆ°é€™ç¯‡ï¼šäº¤æ›å…©å€‹è®Šæ•¸ (ä¸ä½¿ç”¨ tmp è®Šæ•¸) ç¨‹å¼å¯«æ³•ï¼Œæœ¬ä¾†æƒ³ç•™è¨€ï¼Œä¸éå®—è‘£çš„ Blog ç³»çµ±ä¼¼ä¹æœ‰å•é¡Œã€‚ å®—è‘£çš„æ–¹æ³•æ˜¯é€™æ¨£çš„ï¼š $a ^= $b; $b ^= $a; $a ^= $b; æˆ‘æ˜¯</description>
			<content type="html"><![CDATA[<p>åœ¨å®—è‘£çš„ Blog çœ‹åˆ°é€™ç¯‡ï¼š<a href="http://plog.longwin.com.tw/programming/2007/11/23/variable_swap_programming_2007">äº¤æ›å…©å€‹è®Šæ•¸ (ä¸ä½¿ç”¨ tmp è®Šæ•¸) ç¨‹å¼å¯«æ³•</a>ï¼Œæœ¬ä¾†æƒ³ç•™è¨€ï¼Œä¸éå®—è‘£çš„ Blog ç³»çµ±ä¼¼ä¹æœ‰å•é¡Œã€‚</p>
<p>å®—è‘£çš„æ–¹æ³•æ˜¯é€™æ¨£çš„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$a ^= $b;
$b ^= $a;
$a ^= $b;
</code></pre></div><p>æˆ‘æ˜¯æƒ³èªªæ—¢ç„¶æ˜¯ç”¨ PHP äº†ï¼Œå°±æ‡‰è©²å¥½å¥½å–„ç”¨ä¸€ä¸‹ PHP çš„åŸç”Ÿèªæ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">[$a, $b] = [$b, $a];
</code></pre></div><p>æå®š~~</p>
<p>é€™å€‹æ˜¯å¾ <a href="http://www.pearsoned.com.tw/chinese_show_title.asp?bkid=9867910672">PHP ç¨‹å¼è¨­è¨ˆå°ˆå®¶å¿…å‚™æ‰‹å†Š</a>ä¸€æ›¸çœ‹ä¾†çš„ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>[PHP] ç¥å¥‡çš„ $this</title>
			<link>https://jaceju.net/magic-this-in-php-class/</link>
			<pubDate>Fri, 26 Oct 2007 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/magic-this-in-php-class/</guid>
			<description>ä»Šå¤©ç™¼ç¾äº†ä¸€å€‹ PHP 5.2.4 çš„å¥‡æ€ªç¾è±¡ï¼ŒæŸ¥äº†å®˜æ–¹æ‰‹å†Šä¹Ÿæ²’ç™¼ç¾æœ‰äººç‰¹åˆ¥æèµ· (ä¹Ÿå¯èƒ½æ˜¯æˆ‘æ²’æ‰¾åˆ°) ã€‚ å­¸é PHP ç‰©ä»¶å°å‘çš„äººéƒ½çŸ¥é“ï¼Œ $this é€™å€‹é—œéµå­—æ˜¯åœ¨ç”Ÿæˆä¸€å€‹ç‰©ä»¶å¾Œ</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©ç™¼ç¾äº†ä¸€å€‹ PHP 5.2.4 çš„å¥‡æ€ªç¾è±¡ï¼ŒæŸ¥äº†å®˜æ–¹æ‰‹å†Šä¹Ÿæ²’ç™¼ç¾æœ‰äººç‰¹åˆ¥æèµ· (ä¹Ÿå¯èƒ½æ˜¯æˆ‘æ²’æ‰¾åˆ°) ã€‚</p>
<!-- raw HTML omitted -->
<p>å­¸é PHP ç‰©ä»¶å°å‘çš„äººéƒ½çŸ¥é“ï¼Œ $this é€™å€‹é—œéµå­—æ˜¯åœ¨ç”Ÿæˆä¸€å€‹ç‰©ä»¶å¾Œæ‰èƒ½ä½¿ç”¨çš„ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Foo
{
    private $_foo = &#39;_foo in class Foo.&#39;;
    public function test()
    {
        echo $this-&gt;_foo;
    }
}
$foo = new Foo();
$foo-&gt;test(); // _foo in class Foo.

</code></pre></div><p>è€Œä¸” <code>$this</code> åœ¨ Class çš„ç¨‹å¼ç¢¼è£¡ä»£è¡¨çš„ä¹Ÿæ˜¯é€™å€‹ç‰©ä»¶æœ¬èº«ï¼Œåœ¨ä¸Šä¾‹ä¸­å³ç‚º <code>$foo</code> ã€‚</p>
<p>ä¸éåœ¨ method è£¡ä½¿ç”¨ <code>$this</code> æœ‰å€‹é™åˆ¶ï¼Œé‚£å°±æ˜¯è©² method ä¸èƒ½ä»¥ <code>static</code> çš„æ–¹å¼ä¾†å‘¼å«ï¼›ä¹Ÿå°±æ˜¯èªªï¼Œä»¥ä¸‹çš„åŸ·è¡Œæ–¹å¼æ˜¯éŒ¯çš„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">Foo::test(); // Fatal error: Using $this when not in object context in xxx.php
</code></pre></div><p>å¯æ˜¯è«‹çœ‹ä»¥ä¸‹çš„ç¨‹å¼ç¢¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">class Foo
{
    private $_foo = &#39;_foo in class Foo.&#39;;

    public function test()
    {
        echo $this-&gt;_foo;
    }
}

class Bar
{
    public function test()
    {
        Foo::test();
    }
}

$b = new Bar();
$b-&gt;test(); // Notice: Undefined property:  Bar::$_foo in xxx.php
</code></pre></div><p>ç™¼ç¾ä»€éº¼å•é¡Œäº†å—ï¼Ÿåœ¨ <code>Bar::test()</code> è£¡æˆ‘å€‘ç«Ÿç„¶å¯ä»¥ç”¨ static çš„æ–¹å¼å‘¼å« <code>Foo::test()</code> ï¼ è€Œä¸”åœ¨ <code>Foo::test()</code> è£¡çš„ <code>$this-&gt;_foo</code> ç«Ÿç„¶è®Šæˆäº† <code>Bar</code> é¡åˆ¥çš„ <code>$_foo</code> å±¬æ€§ï¼</p>
<p>è‡³æ–¼é€™å€’åº•æ˜¯ PHP çš„ç‰¹è‰²é‚„æ˜¯ Bug ï¼Ÿæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œé‚„æœ›é«˜æ‰‹è³œæ•™ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>Linux ä¸Šçš„ Port Foward çš„å•é¡Œ</title>
			<link>https://jaceju.net/linux-port-forward/</link>
			<pubDate>Thu, 13 Sep 2007 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/linux-port-forward/</guid>
			<description>å•é¡Œ Mark å’Œæˆ‘å…©å€‹äººåœ¨ç ”ç©¶æ€éº¼æŠŠå°å¤–çš„ Port 9000 è½‰ç§»åˆ°å…§éƒ¨çš„ Port 80 ï¼Œçµæœæˆ‘é€™å€‹ Linux æ–°æ‰‹æäº†åŠå¤©é‚„æ˜¯æä¸å‡ºä¾†ã€‚ ç’°å¢ƒ æˆ‘çš„ç’°å¢ƒæ˜¯é€™æ¨£çš„ï¼š |-- (DMZ) --&amp;gt; Linux Server 1(192.168.1.1) IP åˆ†äº«å™¨ -| |-----------&amp;gt;</description>
			<content type="html"><![CDATA[<h2 id="å•é¡Œ">å•é¡Œ</h2>
<p>Mark å’Œæˆ‘å…©å€‹äººåœ¨ç ”ç©¶æ€éº¼æŠŠå°å¤–çš„ Port 9000 è½‰ç§»åˆ°å…§éƒ¨çš„ Port 80 ï¼Œçµæœæˆ‘é€™å€‹ Linux æ–°æ‰‹æäº†åŠå¤©é‚„æ˜¯æä¸å‡ºä¾†ã€‚</p>
<h2 id="ç’°å¢ƒ">ç’°å¢ƒ</h2>
<p>æˆ‘çš„ç’°å¢ƒæ˜¯é€™æ¨£çš„ï¼š</p>
<pre><code>           |-- (DMZ) --&gt; Linux Server 1(192.168.1.1)
IP åˆ†äº«å™¨ -|
           |-----------&gt; Linux Server 2(192.168.1.2)

</code></pre><p>è¨»ï¼šä¹‹å‰ç¤ºæ„åœ–ç•«éŒ¯äº†ï¼Œæ›´æ­£ä¸€ä¸‹ã€‚</p>
<p>ç„¶å¾Œå¾å¤–é¢ä¾†çš„ Port 9000 è¦ Forward åˆ° Linux Server 2 çš„ Port 80 ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å˜—è©¦">å˜—è©¦</h2>
<p>æˆ‘å€‘ç”¨çš„ IP åˆ†äº«å™¨åƒ…æ”¯æ´å–®ä¸€ Port å°æ‡‰çš„åŠŸèƒ½ (å°±æ˜¯ Port 80 å°±åªèƒ½å°åˆ° Port 80) ï¼Œæ‰€ä»¥åªå¥½æŠŠè…¦ç­‹å‹•åˆ° Linux Server 1 ä¸Šã€‚</p>
<p>æœ¬ä¾†ä»¥ç‚ºç”¨ iptables çš„ NAT åŠŸèƒ½å¯ä»¥ç”¨ï¼Œçœ‹äº†ä¸€ä¸‹<a href="http://linux.vbird.org/linux_server/0250simple_firewall.php">é³¥å“¥çš„ iptables æ•™å­¸</a>ï¼Œå¾—åˆ°ä»¥ä¸‹çš„æ–¹å¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># iptables -t nat -A PREROUTING -p tcp -i eth0 --dport 9000 -j DNAT --to 192.168.1.2:80</span>
</code></pre></div><p>ä¸éåŠ å…¥å»ä»¥å¾Œé‚„æ˜¯ä¸è¡Œ&hellip;å¾Œä¾† Mark åˆæ‰¾åˆ°ä¸€ç¯‡ <a href="http://linux.tnc.edu.tw/techdoc/firewall/iptables-intro.html">iptables å…¥é–€</a>ï¼Œè£¡é¢å¯«äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># iptables -t nat -A PREROUTING -i eth0 -p tcp -d 192.168.1.1 --dport 9000 -j DNAT --to-destination 192.168.1.2:80</span>
</code></pre></div><p>ä¹Ÿæ˜¯æ²’ç”¨&hellip;çœŸæ˜¯ä»¤äººæ´©æ°£&hellip;</p>
<h2 id="è§£æ±ºæ–¹æ¡ˆ">è§£æ±ºæ–¹æ¡ˆ</h2>
<p>å¾Œä¾†æˆ‘å•æˆ‘çš„åŒå­¸ (ä»–æ˜¯å€‹ FreeBSD å¼·è€…) ï¼Œä»–çµ¦æˆ‘ä¸€å€‹é€£çµï¼š <a href="http://antontw.blogspot.com/2007/05/linux-port-forward.html">[Linux] ç°¡å–®çš„ port forward å·¥å…·</a>ï¼Œè£¡é¢ä»‹ç´¹äº† <a href="http://www.linux.org/apps/AppId_865.html">redir</a> é€™å€‹å°ç¨‹å¼ï¼Œä¼¼ä¹ç¬¦åˆæˆ‘çš„è¦æ±‚ã€‚</p>
<p>ç„¶è€Œæˆ‘ç”¨çš„ OS æ˜¯ CentOS ï¼Œè¦è‡ªå·±ç·¨è­¯ redir ï¼›æŠŠ redir çš„ source æŠ“ä¸‹ä¾†å¾Œï¼ŒæŒ‰ç…§ä»¥ä¸‹æ–¹å¼ç·¨è­¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># cd /usr/local/src</span>
<span class="c1"># wget http://sammy.net/~sammy/hacks/redir-2.2.1.tar.gz</span>
<span class="c1"># tar xvzf redir-2.2.1.tar.gz</span>
<span class="c1"># cd redir-2.2.1</span>
<span class="c1"># make (æ²’æœ‰ install)</span>
<span class="c1"># mv redir /usr/local/bin/</span>
</code></pre></div><p>æ¥ä¸‹ä¾†æˆ‘ä¸‹çš„æŒ‡ä»¤æ˜¯é€™æ¨£å­çš„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># redir --lport 9000 --caddr=192.168.1.2 --cport=80</span>
</code></pre></div><p>ä¸éé‚„æ˜¯æ²’ç”¨ï¼Œè€Œä¸”å°± redir å°±æ²’æœ‰å›æ‡‰äº†ï¼Œå› ç‚º redir ä¸»è¦æ˜¯è·‘ Daemon æ¨¡å¼ã€‚æˆ‘æƒ³å¦‚æœåŠ ä¸Š Listen çš„ Address æ‡‰è©²å°±å¯ä»¥ï¼Œæ‰€ä»¥æˆ‘æŠŠæŒ‡ä»¤æ”¹æˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># redir --laddr 192.168.1.1  --lport 9000 --caddr=192.168.1.2 --cport=80 &amp;amp;</span>
</code></pre></div><p>æ²’æƒ³åˆ°å°±æˆåŠŸäº†ï¼è®“ Mark å’Œæˆ‘è‘—å¯¦æ„Ÿå‹•äº†ä¸€é™£å­ã€‚</p>
<p>æœ€å¾ŒæŠŠå®ƒåŠ åˆ° <code>/etc/rc.d/rc.local</code> è£¡ï¼Œè®“å®ƒèƒ½åœ¨é–‹æ©Ÿæ™‚è‡ªå‹•åŸ·è¡Œå°±å®Œæˆäº†ã€‚</p>
<h2 id="å¾Œè¨˜">å¾Œè¨˜</h2>
<p>é›–ç„¶æˆ‘æœ‰åœ¨ç© Linux ï¼Œä¸éå¾ˆå¤šæŠ€è¡“é‚„æ˜¯ä¸ç†Ÿï¼Œé€™æ¬¡ Mark å‡ºçš„å•é¡ŒçœŸçš„è®“æˆ‘å­¸åˆ°äº†ä¸å°‘æ±è¥¿ã€‚ä¹Ÿæ„Ÿè¬æˆ‘çš„å¼·è€…åŒå­¸ï¼Œä»–åœ¨ Unix like æ–¹é¢çš„çŸ¥è­˜çœŸçš„å¹«äº†æˆ‘ä¸å°‘å¿™ã€‚</p>
<p>å¦å¤–ï¼Œ redir çœŸçš„æ˜¯ä¸éŒ¯çš„å°å·¥å…·ï¼Œå¦‚æœè¦å®Œå…¨é  iptables ä¾†è™•ç†é€™å€‹å•é¡Œçš„è©±ï¼Œæˆ‘é€™å€‹æ–°æ‰‹å¤§æ¦‚å¼„å€‹ä¸‰å¤©ä¸‰å¤œä¹Ÿæä¸å®š&hellip;Orz</p>
<p>ç•¶ç„¶ï¼Œå¦‚æœå¤§å®¶æœ‰æ›´å¥½çš„æ–¹æ³•çš„è©±ï¼Œä¹Ÿæ­¡è¿åˆ†äº«å–”ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>PHP4 çš„ç›¡é ­</title>
			<link>https://jaceju.net/the-end-of-php4/</link>
			<pubDate>Fri, 13 Jul 2007 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/the-end-of-php4/</guid>
			<description>PHP å®˜æ–¹å®£ä½ˆåœæ­¢å° PHP4 çš„æ”¯æ´äº†ï¼ŒåŸæ–‡å¦‚ä¸‹ï¼š PHP 4 end of life announcement [13-Jul-2007]Today it is exactly three years ago since PHP 5 has been released. In those three years it has seen many improvements over PHP 4. PHP 5 is fast, stable &amp;amp; production-ready and as PHP 6 is on the way, PHP 4 will be discontinued.</description>
			<content type="html"><![CDATA[<p><a href="http://www.php.net">PHP å®˜æ–¹</a>å®£ä½ˆåœæ­¢å° PHP4 çš„æ”¯æ´äº†ï¼ŒåŸæ–‡å¦‚ä¸‹ï¼š</p>
<!-- raw HTML omitted -->
<h3 id="php-4-end-of-life-announcement">PHP 4 end of life announcement</h3>
<p><!-- raw HTML omitted -->[13-Jul-2007]<!-- raw HTML omitted --></p>
<p>Today it is exactly three years ago since PHP 5 has been released. In those three years it has seen many improvements over PHP 4. PHP 5 is fast, stable &amp; production-ready and as PHP 6 is on the way, PHP 4 will be discontinued.</p>
<p>The PHP development team hereby announces that support for PHP 4 will continue until the end of this year only. After 2007-12-31 there will be no more releases of PHP 4.4. We will continue to make critical security fixes available on a case-by-case basis until 2008-08-08. Please use the rest of this year to make your application suitable to run on PHP 5.</p>
<p>For documentation on migration for PHP 4 to PHP 5, we would like to point you to our <a href="/manual/en/migration5.php">migration guide</a>. There is additional information available in the <a href="/manual/en/migration51.php">PHP 5.0 to PHP 5.1</a> and <a href="/manual/en/migration52.php">PHP 5.1 to PHP 5.2</a> migration guides as well.</p>
<!-- raw HTML omitted -->
<p>å°æŸäº›äººä¾†èªªå¤§æ¦‚æ˜¯å£æ¶ˆæ¯ï¼Œä½†å°æˆ‘è€Œè¨€å»æ˜¯å¾ˆæ£’çš„æ–°èã€‚</p>
<p>PHP çµ‚æ–¼é†’äº†&hellip;</p>
]]></content>
		</item>
		
		<item>
			<title>æˆ‘ä¹Ÿä¾†å¯¦ä½œ PHP mix-in çš„æ¦‚å¿µ - Part 3</title>
			<link>https://jaceju.net/php-mix-in-3/</link>
			<pubDate>Tue, 27 Mar 2007 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/php-mix-in-3/</guid>
			<description>èªªæ˜ çŸ³é ­æˆè€å¤§æŠŠä»–å¿ƒç›®ä¸­çš„ mix-in ç›®æ¨™åšå‡ºä¾†äº†ï¼Œä»–ä¸»è¦çš„å¯¦ä½œæœ‰ä»¥ä¸‹å…©å€‹é‡é»ï¼š ç‰©ä»¶å¯¦é«”ç”Ÿæˆå¾Œå½¼æ­¤åš mix-in æ˜¯ä¸ç›¸å¹²çš„ã€‚ é¡åˆ¥æ–¹æ³•åœ¨å‹•æ…‹å§”æ´¾å¾Œè¦èƒ½éµå®ˆç¹¼æ‰¿åŸå‰‡</description>
			<content type="html"><![CDATA[<h2 id="èªªæ˜">èªªæ˜</h2>
<p>çŸ³é ­æˆè€å¤§æŠŠä»–å¿ƒç›®ä¸­çš„ mix-in <a href="http://blog.roodo.com/rocksaying/archives/2884871.html">ç›®æ¨™</a>åšå‡ºä¾†äº†ï¼Œä»–ä¸»è¦çš„å¯¦ä½œæœ‰ä»¥ä¸‹å…©å€‹é‡é»ï¼š</p>
<ul>
<li>ç‰©ä»¶å¯¦é«”ç”Ÿæˆå¾Œå½¼æ­¤åš mix-in æ˜¯ä¸ç›¸å¹²çš„ã€‚</li>
<li>é¡åˆ¥æ–¹æ³•åœ¨å‹•æ…‹å§”æ´¾å¾Œè¦èƒ½éµå®ˆç¹¼æ‰¿åŸå‰‡ï¼Œä¹Ÿå°±æ˜¯èªªå­æ‰¿çˆ¶ã€çˆ¶ä¸æ‰¿å­ã€‚</li>
</ul>
<p>å¦å¤–ä»–ä¹Ÿæåˆ°è¦å„²å­˜æ–¹æ³•æ˜¯ä¸€ä»¶å›°é›£çš„äº‹æƒ…ï¼Œå› ç‚º PHP æœ‰ä¸‰ç¨®å‡½å¼çš„å‘¼å«æ–¹æ³•ï¼šä¸€èˆ¬å‡½æ•¸ã€é¡åˆ¥éœæ…‹æ–¹æ³•ã€å¯¦ä¾‹æ–¹æ³•ã€‚è€Œæˆ‘åœ¨ <a href="http://blog.roodo.com/jaceju/archives/2853761.html">Part 2</a> è£¡çš„æ¦‚å¿µå¯¦ä½œå‰‡æ˜¯ç”¨ <a href="http://blog.roodo.com/jaceju/archives/409709.html">callback</a> è™›æ“¬å‹æ…‹ä¾†å„²å­˜ï¼Œä¸é<!-- raw HTML omitted --><!-- raw HTML omitted -->å»å¿˜äº†æŠŠä¸€èˆ¬å‡½å¼çµ¦æ”¾é€²å»ã€‚</p>
<p>ä¸é Part 2 çš„å¯¦ä½œå·²ç¶“å¯¦ç¾äº†ç¬¬ä¸€å€‹ç›®æ¨™ï¼Œæ‰€ä»¥åœ¨é€™æ¬¡ Part 3 çš„å¯¦ä½œè£¡ï¼Œæˆ‘é™¤äº†æ±ºå®šæŠŠä¸€èˆ¬å‡½å¼ä¹Ÿç´å…¥ mix-in çš„å¯¦ä½œè£¡ï¼Œè€Œä¸”é‚„è¦é”æˆçŸ³é ­æˆè€å¤§èªªçš„ç¬¬äºŒå€‹ç›®æ¨™ã€‚</p>
<!-- raw HTML omitted -->
<p>å¦å¤–æˆ‘è‡ªå·±ä¹ŸåŠ å…¥äº†ä»¥ä¸‹å¯¦ä½œé‡é»ï¼š</p>
<!-- raw HTML omitted -->
<p>ç¶“éä¸€ç•ªåŠªåŠ›ï¼Œæˆ‘çµ‚æ–¼è©¦å‡ºä¾†äº†ï¼›å…ˆä¾†çœ‹çœ‹æˆæœï¼Œå¾Œé¢æˆ‘æ‰ä¾†ä¸€ä¸€åˆ†æã€‚</p>
<h2 id="å¯ä»¥-mix-in-æ–¹æ³•çš„æ¸¬è©¦é¡åˆ¥">å¯ä»¥ mix-in æ–¹æ³•çš„æ¸¬è©¦é¡åˆ¥</h2>
<p>é¦–å…ˆæˆ‘å®šç¾©ä¸€å€‹ç¹¼æ‰¿è‡ª Prototype çš„é¡åˆ¥ç¨±ç‚º ParentClass ï¼š</p>
<pre><code>// ç¹¼æ‰¿è‡ª Prototype çš„é¡åˆ¥
class ParentClass extends Prototype
{
    public function method7($param)
    {
        echo get_class($this), '::method7';
        echo &quot;(&quot;, $param, &quot;)\n&quot;;
        echo &quot;\n&quot;;
    }
}

</code></pre><p>è¨»ï¼šå¯ä»¥ mix-in çš„æŠ½è±¡é¡åˆ¥æˆ‘é‚„æ˜¯ç¨±ç‚º Prototype ï¼Œå®ƒå¿…é ˆè¢«å…¶ä»–é¡åˆ¥ç¹¼æ‰¿ï¼Œè€Œç„¡æ³•ç¨è‡ªç”Ÿæˆå¯¦é«”ã€‚</p>
<p>ç‚ºäº†è¦å¯¦ç¾çŸ³é ­æˆè€å¤§çš„ç¬¬ä¸€å€‹ç›®æ¨™ï¼Œæˆ‘å†æ–°å¢ä¸‰å€‹é¡åˆ¥å¦‚ä¸‹ï¼š</p>
<pre><code>// æ¸¬è©¦ç”¨çš„ Prototype å­é¡åˆ¥ 1
class ChildClass1 extends ParentClass
{
}
// æ¸¬è©¦ç”¨çš„ Prototype å­é¡åˆ¥ 2
class ChildClass2 extends ParentClass
{
    public function __construct()
    {
    parent::__construct();
    echo &quot;I'm &quot; . __CLASS__ . '!!', &quot;\n&quot;;
    }
}
// æ¸¬è©¦ç”¨çš„ Prototype å­é¡åˆ¥ 3
class ChildClass3 extends ChildClass1
{
}

</code></pre><p>é€™è£¡ ChildClass1 å’Œ ChildClass2 éƒ½ç¹¼æ‰¿è‡ª ParentClass ï¼Œè€Œ ChildClass3 å‰‡ç¹¼æ‰¿è‡ª ChildClass1 ï¼Œè€Œä¸”å®ƒå€‘ä¹Ÿéƒ½æ˜¯ Prototype çš„å­é¡åˆ¥ã€‚</p>
<h2 id="å¯ç”¨ä¾†åš-mix-in-çš„-callback-å‡½å¼">å¯ç”¨ä¾†åš mix-in çš„ Callback å‡½å¼</h2>
<p>æ¥ä¸‹ä¾†æˆ‘è¦æº–å‚™å¯ä»¥ç•¶æˆ callback çš„å‡½å¼èˆ‡é¡åˆ¥ï¼Œé€™è£¡åˆ†æˆä¸€èˆ¬å‡½å¼ã€é¡åˆ¥å‡½å¼åŠ MethodObject ç‰©ä»¶ã€‚</p>
<p>ä¸éä¸Šæ¬¡çš„ MethodObject é¡åˆ¥åç¨±æˆ‘è¦ºå¾—é‚„æ˜¯ä¸å¤ªå¥½ï¼Œé€™æ¬¡æˆ‘æ”¹ç”¨ Callback é€™å€‹åç¨±ï¼Œä½†å¯¦éš›ä¸Šå®ƒçš„åŠŸèƒ½é‚„æ˜¯ä¸€æ¨£ï¼š</p>
<pre><code>// mix-in æ–¹æ³•çš„æŠ½è±¡é¡åˆ¥
abstract class Callback
{
    protected $object;
    public function __construct($object = NULL)
    {
        $this-&gt;object = $object;
    }
    abstract function run();
}

</code></pre><p>ä¸éæŠ½è±¡é¡åˆ¥æ˜¯ç„¡æ³•ç”¢ç”Ÿå¯¦é«”çš„ï¼Œæ‰€ä»¥å’Œå‰ä¸€ç‰ˆç›¸åŒï¼Œæˆ‘ç”¨ä¸€å€‹ TestMethod é¡åˆ¥ä¾†ç¹¼æ‰¿ Callback ï¼š</p>
<pre><code>// æ–¹æ³•é¡åˆ¥
class TestMethod extends Callback
{
    public function run()
    {
        $n = func_num_args();
        echo __METHOD__;
        echo '(', (1 == $n) ? func_get_arg(0) : '', &quot;)\n&quot;;
        echo &quot;\n&quot;;
    }
}

</code></pre><p>ç„¶å¾Œæ˜¯ä¸€å€‹æ™®é€šçš„é¡åˆ¥ Util ï¼Œä¸¦æä¾›äº†å…©å€‹å…¬é–‹æ–¹æ³•ï¼š</p>
<pre><code>// ä¸€èˆ¬é¡åˆ¥
class Util
{
    public function method1($param)
    {
        echo __METHOD__;
        echo &quot;(&quot;, $param, &quot;)\n&quot;;
        echo &quot;\n&quot;;
    }
    public function method2($param)
    {
        echo __METHOD__;
        echo &quot;(&quot;, $param, &quot;)\n&quot;;
        echo &quot;\n&quot;;
    }
}

</code></pre><p>æœ€å¾Œæ˜¯å…©å€‹å‡½å¼ normalFunc1 åŠ normalFunc2 ï¼Œå®ƒå€‘å°±æ˜¯ä¸€èˆ¬çš„è‡ªè¨‚å‡½å¼è€Œå·²ï¼š</p>
<pre><code>// ä¸€èˆ¬å‡½å¼
function normalFunc1($param)
{
    echo 'normalFunc1(' . $param, &quot;)\n&quot;;
    echo &quot;\n&quot;;
}
function normalFunc2($param, $object = NULL)
{
    echo 'normalFunc2(' . $param, &quot;)\n&quot;;
    var_export($object);
    echo &quot;\n&quot;;
}

</code></pre><h2 id="æ¸¬è©¦çµæœ">æ¸¬è©¦çµæœ</h2>
<p>ç¾åœ¨é‡é ­æˆ²ä¾†äº†ï¼Œæˆ‘å…ˆæŠŠéœ€è¦çš„ callback è®Šæ•¸æº–å‚™å¥½ï¼š</p>
<pre><code>// æ¸¬è©¦ç”¨çš„ç¨‹å¼ç¢¼
$a = new Util();
$callback1 = array ('Util', 'method1');
$callback2 = array ($a, 'method2');
$callback3 = 'TestMethod';
$callback4 = array ('TestMethod', 'run');
$callback5 = 'normalFunc1';
$callback6 = 'normalFunc2';

</code></pre><p>é€™è£¡åˆ†æˆ $callback1 åˆ° $callback6 ï¼Œå…¶ä¸­ $callback3 å’Œ $callback4 å…¶å¯¦æ˜¯ä¸€æ¨£çš„ï¼Œåªä¸éå¯«æ³•ä¸åŒè€Œå·²ã€‚</p>
<p>å…ˆä¾†çœ‹çœ‹çŸ³é ­æˆè€å¤§è¦çš„ç¬¬äºŒå€‹ç›®æ¨™ï¼Œåœ¨æˆ‘é€™è£¡æ˜¯æ€éº¼åšçš„ï¼š</p>
<pre><code>Prototype::delegate('ParentClass::method4', $callback4);
Prototype::delegate('ChildClass1::method5', $callback5);

</code></pre><p>å’ŒçŸ³é ­æˆè€å¤§çš„ä½œæ³•ä¸åŒï¼Œæˆ‘åœ¨ Prototype å®šç¾©äº†ä¸€å€‹éœæ…‹çš„ delegate å‡½å¼ï¼Œç„¶å¾Œç”¨ä¸Šé¢çš„æ–¹æ³•ä¾†æŒ‡å®šéœæ…‹çš„ mix-in ã€‚æœ¬ä¾†æˆ‘æƒ³æ˜¯ç›´æ¥ç”¨ <!-- raw HTML omitted -->ParentClass::delegate(&lsquo;method4&rsquo;, $callback)<!-- raw HTML omitted --> é€™ç¨®æ–¹å¼ä¾†å®Œæˆï¼Œä¸é <!-- raw HTML omitted -->PHP ä¸¦æ²’æœ‰è¾¦æ³•åœ¨ç¹¼æ‰¿ä¸‹ä¾†çš„éœæ…‹å‡½å¼è£¡å–å¾—è©²é¡åˆ¥çš„é¡åˆ¥åç¨±<!-- raw HTML omitted -->ï¼Œæ‰€ä»¥é€™è£¡æˆ‘æƒ³é‚„æ˜¯é€é Prototype ä¾†å®Œæˆï¼Œè€Œé€™ä¹Ÿç¬¦åˆæˆ‘è‡ªå·±çš„ç¬¬ä¸€å€‹å¯¦ä½œé‡é»ã€‚</p>
<p>é€™è£¡è¦æ³¨æ„ä¸€é»ï¼Œé‚£å°±æ˜¯é€™æ™‚æˆ‘å·²ç¶“å°‡ $callback4 æ··å…¥ ParentClass ï¼Œæ­¤æ™‚ ParentClass é™¤äº†è‡ªå·±çš„ <!-- raw HTML omitted -->method7<!-- raw HTML omitted --> æ–¹æ³•å¤–ï¼Œé‚„æœƒæœ‰ <!-- raw HTML omitted -->method4<!-- raw HTML omitted --> æ–¹æ³•å…±å…©å€‹æ–¹æ³•ã€‚è€Œ $callback5 å‰‡æ˜¯æ··å…¥ ChildClass1 ï¼Œåˆå› ç‚º ChildClass1 ç¹¼æ‰¿è‡ª ParentClass ï¼Œæ‰€ä»¥ ChildClass1 å°±æœƒæœ‰ä¸‰å€‹æ–¹æ³•ï¼š <!-- raw HTML omitted -->method4<!-- raw HTML omitted --> ã€ <!-- raw HTML omitted -->method5<!-- raw HTML omitted --> ã€ <!-- raw HTML omitted -->method7<!-- raw HTML omitted --> ã€‚</p>
<p>æ¥ä¸‹ä¾†æˆ‘å…ˆæŠŠ ParentClass å’Œ ChildClass çš„å¯¦é«”ç”¢ç”Ÿå‡ºä¾†ï¼Œåˆ†åˆ¥æ˜¯ $parent1 å’Œ $child1 ã€‚ç„¶å¾Œæˆ‘å†ä¸€æ¬¡æŠŠ $callback6 æ··å…¥ ParentClass ï¼Œæ¥è‘—å†å»ºç«‹ $parent2 ã€ $child2 èˆ‡ $child3 ç­‰ä¸‰å€‹åˆ†åˆ¥ç‚º ParentClass ã€ ChildClass2 å’Œ ChildClass3 é¡åˆ¥çš„å¯¦é«”ã€‚</p>
<pre><code>$parent1 = new ParentClass;
$child1 = new ChildClass1;
Prototype::delegate('ParentClass::method6', $callback6);
$parent2 = new ParentClass();
$child2 = new ChildClass2();
$child3 = new ChildClass3();

</code></pre><p>çŒœçŒœçœ‹ï¼Œé€™æ™‚ $parent1 é€™å€‹ç‰©ä»¶å¯¦é«”èƒ½å¤ å‘¼å« method6 é€™å€‹æ–¹æ³•å—ï¼Ÿå¦‚æœä¸è¡Œï¼Œé‚£ $parent2 å‘¢ï¼Ÿè€Œ $child2 å’Œ $child3 è£¡æ··å…¥çš„æ–¹æ³•åˆæœ‰å“ªäº›å‘¢ï¼Ÿ</p>
<p>åœ¨æˆ‘çš„æƒ³æ³•è£¡ï¼Œå› ç‚º method6 çš„æ··æˆæ˜¯åœ¨ $parent1 ç”¢ç”Ÿä¹‹å¾Œï¼Œæ‰€ä»¥ $parent1 ä¸¦æ²’æœ‰è¾¦æ³•å‘¼å« method6 (ç¬¦åˆçŸ³é ­æˆè€å¤§çš„è¦æ±‚) ï¼›ä¸é $parent2 å°±å¯ä»¥äº†ï¼Œå› ç‚ºå®ƒæ˜¯åœ¨æ··æˆ method6 ä»¥å¾Œæ‰å»ºç«‹çš„ã€‚</p>
<p>å¦å¤– $child2 å› ç‚ºç¹¼æ‰¿è‡ª ParentClass ï¼Œè€Œä¸”é‚„æ˜¯åœ¨ method6 æ··å…¥å¾Œæ‰å»ºç«‹çš„ï¼Œæ‰€ä»¥å®ƒå°±æœƒæœ‰ <!-- raw HTML omitted -->method4<!-- raw HTML omitted --> ã€ <!-- raw HTML omitted -->method6<!-- raw HTML omitted --> å’Œ <!-- raw HTML omitted -->method7<!-- raw HTML omitted --> ä¸‰å€‹æ–¹æ³•å¯ç”¨ã€‚å†çœ‹ $child3 ï¼Œå› ç‚ºå®ƒç¹¼æ‰¿äº† ChildClass1 ï¼Œæ‰€ä»¥å°±æœƒæœ‰ <!-- raw HTML omitted -->method4<!-- raw HTML omitted --> ã€ <!-- raw HTML omitted -->method5<!-- raw HTML omitted --> ã€ <!-- raw HTML omitted -->method6<!-- raw HTML omitted --> èˆ‡ <!-- raw HTML omitted -->method7<!-- raw HTML omitted --> ã€‚</p>
<p>ææ··äº†å—ï¼Ÿæˆ‘æƒ³æ‡‰è©²é‚„ä¸è‡³æ–¼ï¼Œç¾åœ¨æˆ‘å†æŠŠç¬¬ä¸€ç‰ˆçš„ mix-in æ–¹å¼åŠ é€²ä¾†ï¼š</p>
<pre><code>$parent1-&gt;method1 = $callback1;
$parent1-&gt;method2 = $callback2;
$parent1-&gt;method3 = $callback3;

</code></pre><p>æ³¨æ„é€™è£¡ $callback1 ã€ $callback2 å’Œ $callback3 æ˜¯ç›´æ¥æ··å…¥ $parent1 é€™å€‹ç‰©ä»¶å¯¦é«”ï¼Œæ‰€ä»¥ $parent2 ã€ $child1 ã€ $child2 èˆ‡ $child3 æ˜¯æ²’è¾¦æ³•å‘¼å« method1 ã€ method2 åŠ method3 çš„ (çŸ³é ­æˆè€å¤§çš„ç¬¬ä¸€å€‹ç›®æ¨™) ã€‚</p>
<p>å¥½äº†ï¼Œç¾åœ¨ä¾†è©¦è©¦å‘¼å« $parent1 çš„æ–¹æ³•ï¼›çŒœçŒœçœ‹å“ªäº›æ–¹æ³•æ˜¯èƒ½é‹ä½œçš„ï¼Ÿ</p>
<pre><code>try
{
    $parent1-&gt;method1('param1');
    $parent1-&gt;method2('param2');
    $parent1-&gt;method3('param3');
    $parent1-&gt;method4('param4');
    $parent1-&gt;method5('param5');
    $parent1-&gt;method6('param6');
    $parent1-&gt;method7('param7');
} catch (Exception $e) {
    echo $e, &quot;\n&quot;;
}

</code></pre><p>åªæœ‰ method1 ã€ method2 ã€ method3 ã€method4 åŠ method7 æ‰èƒ½é‹ä½œï¼ŒçŒœå°äº†å—ï¼Ÿ</p>
<p>è¨»ï¼šé€™è£¡çš„ try å¯«æ³•å…¶å¯¦æœ‰é»ä¸å¤ªå°ï¼Œå› ç‚ºåœ¨å‘¼å« method5 è€Œå‡ºç¾ Exception å¾Œå°±æœƒè·³å‡º try å€å¡Šäº†ã€‚æˆ‘æ˜¯åˆ©ç”¨è¨»è§£è®“å®ƒç¹¼çºŒå¾€ä¸‹åšï¼Œä¸‹é¢çš„ç¯„ä¾‹ä¹Ÿæ˜¯ç›¸åŒï¼Œé€™è£¡è«‹å¤§å®¶åˆ¥å¤ªåœ¨æ„ã€‚</p>
<p>åŒæ¨£çš„æ–¹æ³•å†ä¾†è©¦è©¦ $parent2 ã€ $child1 ã€ $child2 åŠ $child3ï¼š</p>
<pre><code>try
{
    $parent2-&gt;method1('param1'); // Exception!!
    $parent2-&gt;method2('param2'); // Exception!!
    $parent2-&gt;method3('param3'); // Exception!!
    $parent2-&gt;method4('param4'); // Work!!
    $parent2-&gt;method5('param5'); // Exception!!
    $parent2-&gt;method6('param6'); // Work!!
    $parent2-&gt;method7('param7'); // Work!!
} catch (Exception $e) {
    echo $e, &quot;\n&quot;;
}
try
{
    $child1-&gt;method1('param1'); // Exception!!
    $child1-&gt;method2('param2'); // Exception!!
    $child1-&gt;method3('param3'); // Exception!!
    $child1-&gt;method4('param4'); // Work!!
    $child1-&gt;method5('param5'); // Work!!
    $child1-&gt;method6('param6'); // Exception!!
    $child1-&gt;method7('param7'); // Work!!
} catch (Exception $e) {
    echo $e, &quot;\n&quot;;
}
try
{
    $child2-&gt;method1('param1'); // Exception!!
    $child2-&gt;method2('param2'); // Exception!!
    $child2-&gt;method3('param3'); // Exception!!
    $child2-&gt;method4('param4'); // Work!!
    $child2-&gt;method5('param5'); // Exception!!
    $child2-&gt;method6('param6'); // Work!!
    $child2-&gt;method7('param7'); // Work!!
} catch (Exception $e) {
    echo $e, &quot;\n&quot;;
}
try
{
    $child3-&gt;method1('param1'); // Exception!!
    $child3-&gt;method2('param2'); // Exception!!
    $child3-&gt;method3('param3'); // Exception!!
    $child3-&gt;method4('param4'); // Work!!
    $child3-&gt;method5('param5'); // Work!!
    $child3-&gt;method6('param6'); // Work!!
    $child3-&gt;method7('param7'); // Work!!
} catch (Exception $e) {
    echo $e, &quot;\n&quot;;
}

</code></pre><p>é‹ä½œæ–¹å¼å°±å¦‚åŒä¸Šé¢è¨»è§£æ‰€ç¤ºã€‚</p>
<p>é€™æ¨£ä¸€ä¾†ï¼Œæ‰€æœ‰çš„æ¸¬è©¦çµæœéƒ½ç¬¦åˆçŸ³é ­æˆè€å¤§çš„ç›®æ¨™ä»¥åŠæˆ‘è‡ªå·±æ‰€è¦æ±‚çš„é‡é»ã€‚è¦æ³¨æ„çš„äº‹é …æˆ‘ä¹Ÿä¸å†å¤šæäº†ï¼Œè«‹è‡ªè¡Œåƒè€ƒçŸ³é ­æˆè€å¤§çš„æ–‡ç« ï¼Œä»¥åŠæˆ‘å‰é¢çš„èªªæ˜ã€‚</p>
<p>å¦å¤–æˆ–è¨±å¤§å®¶æœƒæ³¨æ„åˆ°ï¼Œç‚ºä»€éº¼æˆ‘éƒ½æ˜¯åˆ©ç”¨ç‰©ä»¶ä¾†å‘¼å« mix-in æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨éœæ…‹å‘¼å«ã€‚é€™æ˜¯å› ç‚º PHP ä¹Ÿæ²’æä¾›éœæ…‹çš„ __call é­”è¡“æ–¹æ³•ï¼Œæ‰€ä»¥é€™è£¡ä¸¦æ²’è¾¦æ³•ç”¨ ParentClass::method1() é€™æ¨£çš„èªæ³•ï¼Œé€™æ˜¯æ­¤æ³•ç¾ä¸­ä¸è¶³çš„åœ°æ–¹ã€‚</p>
<h2 id="ä¸»è§’-prototye-é¡åˆ¥">ä¸»è§’ Prototye é¡åˆ¥</h2>
<p>æœ€å¾Œä¾†çœ‹çœ‹æˆ‘æ˜¯å¦‚ä½•å¯¦ä½œ Prototype é¡åˆ¥çš„ï¼Œé€™è£¡æˆ‘æå‡ºå¹¾å€‹é‡é»ï¼š</p>
<ul>
<li>å› ç‚ºé¡åˆ¥æ–¹æ³•å’Œå¯¦é«”æ–¹æ³•æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘å°‡å®ƒå€‘åˆ†é–‹å­˜æ”¾ï¼›ç­‰åˆ°ç‰©ä»¶ç”Ÿæˆæ™‚ï¼Œå†å°‡å®ƒå€‘ä¾ç…§ç¹¼æ‰¿é—œä¿‚åˆä½µåœ¨ä¸€èµ·ã€‚</li>
<li>åŸ·è¡Œæ™‚æœŸï¼Œ Prototype é¡åˆ¥çš„ __call é­”è¡“æ–¹æ³•åªåŸ·è¡Œå¯¦é«”æ–¹æ³•ã€‚</li>
</ul>
<p>å…ˆçœ‹çœ‹ Prototype çš„å±¬æ€§æˆå“¡å®£å‘Šï¼š</p>
<p>è¨»ï¼šå¾ä»¥ä¸‹ç¨‹å¼é–‹å§‹åˆ°æ–‡ç« çš„æœ€å¾Œï¼Œé™¤äº†èªªæ˜æ–‡å­—å¤–çš„ç¨‹å¼å€å¡Šéƒ½æ˜¯å±¬æ–¼ Prototype é¡åˆ¥çš„ç¨‹å¼ç¢¼ç¯„åœã€‚</p>
<pre><code>// å¯æ¥å— mix-in ç‰©ä»¶çš„æŠ½è±¡é¡åˆ¥
abstract class Prototype
{
    const PROTOTYPE_METHOD = 0;
    const INSTANCE_METHOD = 1;
    const CALLBACK_LENGTH = 2;
    public static $class_methods = array ();
    public $instance_methods = array ();

</code></pre><p>é€™è£¡æˆ‘å®šç¾©äº†å…©å€‹å­˜æ”¾ mix-in æ–¹æ³•çš„ é™£åˆ—ï¼Œ $class_method ç”¨ä»¥å­˜æ”¾é¡åˆ¥ mix-in æ–¹æ³•ï¼Œè€Œ $instance_methods å‰‡æ˜¯å­˜æ”¾è©²å¯¦é«”çš„ mix-in æ–¹æ³•ï¼Œé€™å€‹å’ŒçŸ³é ­æˆè€å¤§çš„æƒ³æ³•ç›¸ä¼¼ï¼›å¦å¤– PROTOTYPE_METHOD å’Œ INSTANCE_METHOD å‰‡æ˜¯ç”¨ä¾†è¡¨ç¤ºè©² mix-in æ–¹æ³•æ˜¯å±¬æ–¼é¡åˆ¥æ–¹æ³•é‚„æ˜¯å¯¦é«”æ–¹æ³•ï¼Œå¾Œé¢çš„ setCallback æ–¹æ³•æœƒç”¨åˆ°ã€‚</p>
<p>å…ˆçœ‹ Prototype çš„ delegate æ–¹æ³•ï¼š</p>
<pre><code>    public final function delegate($name, $callback)
    {
        $class_name = '';
        $method_name = '';
        $delegate = explode('::', $name);
        if (Prototype::CALLBACK_LENGTH == count($delegate)) {
            list($class_name, $method_name) = $delegate;
        } else {
            throw new Exception('Syntax error!!');
        }
        $class_name = strtolower($class_name);
        if (!class_exists($class_name)) {
            throw new Exception(&quot;Class $class_name not exists!!&quot;);
        }
        if (!is_subclass_of($class_name, __CLASS__)) {
            throw new Exception(&quot;Class $class_name not subclass of &quot; . __CLASS__ . &quot;!!&quot;);
        }
        self::setCallback($class_name, $method_name, $callback, Prototype::PROTOTYPE_METHOD);
    }

</code></pre><p>delegate è¦åšçš„äº‹æƒ…å¾ˆç°¡å–®ï¼Œå°±æ˜¯å°‡ callback è™›æ“¬å‹æ…‹è®Šæ•¸æ”¾åˆ° $class_methods ä¸­å°æ‡‰çš„é¡åˆ¥è£¡ï¼›æ›å¥è©±èªªï¼Œæˆ‘åœ¨ $class_methods è£¡æœƒæŠŠç¹¼æ‰¿è‡ª Prototype çš„é¡åˆ¥éƒ½ç”¨ä¸€å€‹é™£åˆ—ä¾†å­˜æ”¾ã€‚å¦å¤–æˆ‘ä¹Ÿå¸Œæœ› delegate æ–¹æ³•æ˜¯ä¸èƒ½è¢«å­é¡åˆ¥æ‰€æ¨ç¿»çš„ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨ final é—œéµå­—ä¾†å®£å‘Šå®ƒã€‚</p>
<p>è€Œå­˜æ”¾çš„ setCallback æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code>    private final function setCallback($class_name, $method_name, $callback, $method_type)
    {
        if (is_array($callback)) {
            if (is_object($callback[0])
                    || (is_string($callback[0])
                    &amp;amp;&amp;amp; class_exists($callback[0]))) {
                $callback = array ($callback[0], $callback[1]);
            }
        }
        if (is_callable($callback) ||
                (class_exists($callback) &amp;amp;&amp;amp; is_subclass_of($callback, 'Callback'))) {
            if (Prototype::PROTOTYPE_METHOD == $method_type) {
                self::$class_methods[$class_name]($method_name) = $callback;
            } elseif (Prototype::INSTANCE_METHOD == $method_type) {
                $this-&gt;instance_methods[$method_name] = $callback;
            }
        }
    }

</code></pre><p>å› ç‚º setCallback åªåœ¨ Prototype è£¡è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥å®£å‘Šæˆ private final ã€‚ setCallback æ–¹æ³•æœƒä¾ç…§æŒ‡å®šçš„é¡å‹ï¼ŒæŠŠ callback æ”¾åœ¨å°æ‡‰çš„ method é™£åˆ—è£¡ã€‚å¦å¤–æˆ‘é‚„åœ¨çŸ³é ­æˆè€å¤§é‚£é‚Šä¹Ÿå­¸æœƒ is_callable å‡½å¼çš„ç”¨æ³• (ç™¼ç¾è‡ªå·±ä»¥å‰å¥½è ¢) ï¼Œ é€™æ¨£çœ‹èµ·ä¾†ç¨‹å¼å°±æ¯”ä¹‹å‰è‡ªå·±åˆ¤æ–· callback å‹æ…‹ä¾†å¾—ç°¡å–®å¤šäº†ã€‚</p>
<p>ç„¶å¾Œæ˜¯ Prototype é¡åˆ¥çš„é‡é»ï¼Œå› ç‚ºçŸ³é ­æˆè€å¤§çš„ç¨‹å¼çµ¦æˆ‘ä¸€å€‹å•Ÿç™¼ï¼Œåˆ©ç”¨ for è¿´åœˆæˆ‘å¯ä»¥<!-- raw HTML omitted -->æ¨å±•å‡ºç›®å‰é¡åˆ¥çš„ç¹¼æ‰¿é—œä¿‚ï¼Œé€²è€ŒæŠŠæ‰€æœ‰çˆ¶é¡åˆ¥çš„é¡åˆ¥ mix-in æ–¹æ³•å…¨éƒ¨åˆä½µåˆ°ç›®å‰ç‰©ä»¶å¯¦é«”è£¡çš„ mix-in æ–¹æ³•é™£åˆ—ä¸­<!-- raw HTML omitted -->ã€‚</p>
<pre><code>    public function __construct()
    {
        $current_class = strtolower(get_class($this));
        $this-&gt;instance_methods = array ();
        for ($class_name = $current_class;
                $parent_name = strtolower(get_parent_class($class_name));
                $class_name = $parent_name) {
            if (isset(self::$class_methods[$class_name])) {
                $this-&gt;instance_methods = array_merge(
                $this-&gt;instance_methods,
                self::$class_methods[$class_name]);
            }
        }
    }

</code></pre><p>é€™è£¡ get_parent_class å‡½å¼æœƒå¹«æˆ‘å€‘æŠŠæŒ‡å®šé¡åˆ¥çš„ä¸Šä¸€å±¤çˆ¶é¡åˆ¥æ‰¾å‡ºä¾†ï¼›çŸ¥é“é€™å€‹æ–¹å¼å¾Œï¼Œå†ä»”ç´°çœ‹çœ‹ for è¿´åœˆè£¡çš„å¯«æ³•ï¼Œå°±æœƒç™¼ç¾çŸ³é ­æˆè€å¤§çœŸçš„å¾ˆç¥ (é€™æ˜¯å¾ä»–çš„ç¨‹å¼è£¡å·ä¾†çš„ XD ) ã€‚</p>
<p>ç›¸å°ä¹‹ä¸‹ï¼Œ __set é­”è¡“æ–¹æ³•å°±å¾ˆç°¡å–®äº†ï¼š</p>
<pre><code>    private final function __set($method_name, $callback)
    {
        $class_name = strtolower(get_class($this));
        self::setCallback($class_name, $method_name, $callback, Prototype::INSTANCE_METHOD);
    }

</code></pre><p>é€™è£¡å°±æ˜¯å–å¾—ç›®å‰é¡åˆ¥çš„åç¨±ï¼Œç„¶å¾Œå†äº¤ç”± setCallback å»è™•ç†ã€‚</p>
<p>æ¥ä¸‹ä¾†æ˜¯ __call é­”è¡“æ–¹æ³•ï¼š</p>
<pre><code>    private final function __call($callback, $args)
    {
        if (isset($this-&gt;instance_methods[$callback])) {
            $callback = $this-&gt;instance_methods[$callback];
            $this-&gt;executeCallback($callback, $args);
            return;
        }
        throw new Exception(get_class($this) . &quot;::$callback is not exists!&quot;);
    }

</code></pre><p>å®ƒä¹Ÿéå¸¸ç°¡å–®ï¼Œå°±æ˜¯æ‰¾å‡ºå°æ‡‰çš„å¯¦é«” mix-in æ–¹æ³•ï¼Œä¸¦äº¤ç”± executeCallback æ–¹æ³•ä¾†åŸ·è¡Œã€‚</p>
<p>æœ€å¾Œæ˜¯ executeCallback æ–¹æ³•ï¼Œä¹Ÿæ˜¯ä»¿ç…§ setCallback çš„æ–¹å¼ï¼Œåªä¸éå®ƒæ˜¯åŸ·è¡Œ callback ã€‚</p>
<pre><code>    private final function executeCallback($callback, $args)
    {
        $args[] = $this;
        if (is_callable($callback)) {
            call_user_func_array($callback, $args);
        } elseif (class_exists($callback)
                &amp;amp;&amp;amp; is_subclass_of($callback, 'Callback')) {
            $method_object = new $callback($this);
            call_user_func_array(array ($method_object, 'run'), $args);
        }
    }
} // End of Prototype

</code></pre><p>ç‰¹åˆ¥æ³¨æ„ä¸€é»ï¼Œæˆ‘æŠŠ Prototype ç‰©ä»¶å¯¦é«”æ”¾åœ¨ $args çš„æœ€å¾Œä¸€å€‹ï¼Œé€™æ¨£å¦‚æœåƒ normalFunc2 é€™æ¨£çš„å‡½å¼è¢«æ··å…¥çš„è©±ï¼Œå°±å¯ä»¥å­˜å–åˆ°é€™äº›ç‰©ä»¶å¯¦é«”äº†ã€‚</p>
<h2 id="å¾Œè¨˜">å¾Œè¨˜</h2>
<p>é›–ç„¶æˆ‘è¦ºå¾—é€™äº›æ–¹æ³•æœ‰æ™‚å€™æœƒä»¤äººè¿·æƒ‘ï¼Œä¸éå…¶å¯¦å®ƒä¹Ÿæœ‰å¥½ç”¨çš„ä¸€é¢ã€‚é€™è£¡æˆ‘ä¹Ÿå‘çŸ³é ­æˆè€å¤§å­¸ç¿’åˆ°å¾ˆå¤šç‰¹åˆ¥çš„æŠ€å·§ï¼Œä¹Ÿè®“æˆ‘è‡ªå·±å°éœæ…‹è®Šæ•¸èˆ‡å¯¦é«”è®Šæ•¸ä¹‹é–“æœ‰æ›´æ·±çš„ç­è§£ã€‚</p>
<p>PHP ä¹Ÿè¨±ä¸åƒ Ruby çš„èªæ³•é‚£æ¨£åœ°å¯Œæœ‰è®ŠåŒ–æ€§ï¼Œä¸éæˆ‘æƒ³åªè¦æ‡‰ç”¨å¾—ç•¶ï¼Œ PHP é‚„æ˜¯èƒ½å¤ ç™¼å±•å‡ºå±¬æ–¼è‡ªå·±çš„ç‰¹æ€§çš„ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>å¥½æ›¸æ¨è–¦</title>
			<link>https://jaceju.net/good-books/</link>
			<pubDate>Tue, 20 Mar 2007 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/good-books/</guid>
			<description>æ–°æ›¸é å‘Š ä»¥ä¸‹ç‚ºæœ€è¿‘å°‡æœƒå‡ºç‰ˆçš„æ›¸ç±ï¼Œå€¼å¾—æœŸå¾…ï¼š CSS å¤§å…¨ ç¬¬ä¸‰ç‰ˆ å¥½æ›¸æ¨è–¦ å¦å¤–æ•´ç†ä¸€äº›æˆ‘å€‹äººè¦ºå¾—ä¸éŒ¯çš„ Web é–‹ç™¼ç›¸é—œä¸­æ–‡æ›¸ç±ä¾›å¤§å®¶åƒè€ƒ (æˆ‘çœ‹éçš„æ‰ä»‹ç´¹) ï¼Œ</description>
			<content type="html"><![CDATA[<h2 id="æ–°æ›¸é å‘Š">æ–°æ›¸é å‘Š</h2>
<p>ä»¥ä¸‹ç‚ºæœ€è¿‘å°‡æœƒå‡ºç‰ˆçš„æ›¸ç±ï¼Œå€¼å¾—æœŸå¾…ï¼š</p>
<ul>
<li><a href="http://www.oreilly.com.tw/product2_web.php?id=a212">CSS å¤§å…¨ ç¬¬ä¸‰ç‰ˆ</a></li>
</ul>
<h2 id="å¥½æ›¸æ¨è–¦">å¥½æ›¸æ¨è–¦</h2>
<p>å¦å¤–æ•´ç†ä¸€äº›æˆ‘å€‹äººè¦ºå¾—ä¸éŒ¯çš„ Web é–‹ç™¼ç›¸é—œä¸­æ–‡æ›¸ç±ä¾›å¤§å®¶åƒè€ƒ (æˆ‘çœ‹éçš„æ‰ä»‹ç´¹) ï¼Œå®ƒå€‘éƒ½æ˜¯éå¸¸å€¼å¾—å¤§å®¶é–±è®€èˆ‡æ”¶è—çš„æŠ€è¡“æ›¸ç±ã€‚</p>
<p>è¨»ï¼šåªä»‹ç´¹ä¸­æ–‡æ›¸çš„åŸå› æ˜¯ç‚ºäº†è®“ç¶“é©—è¼ƒå°‘çš„ä¼™ä¼´ä¹Ÿèƒ½å¿«é€Ÿç­è§£é€™äº›æŠ€è¡“ï¼Œäº‹å¯¦ä¸Šé‚„æœ‰æ›´å¤šåŸæ–‡çš„å¥½æ›¸å€¼å¾—åƒè€ƒã€‚</p>
<!-- raw HTML omitted -->
<h3 id="css">CSS</h3>
<ul>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9575279409&amp;sid=32178">å‘ä¸–ç•Œæœ€TOPçš„ç¶²ç«™å­¸ CSS ç¶²é è¨­è¨ˆ</a>å¯ä»¥å­¸åˆ°ä¸€äº›çœŸå¯¦çš„ CSS è¨­è¨ˆæ¦‚å¿µã€‚* <a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9864217828&amp;sid=27407">Eric Meyer å†è«‡ CSS ç¶²é æ’ç‰ˆè¨­è¨ˆ</a> CSS å¤§å¸«è‘—ä½œï¼Œå¿…è®€ï¼</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=986719912X&amp;sid=26908">The Zen of CSS Designâ”€ç¶²é è¦–è¦ºè¨­è¨ˆçš„ç‹é“</a> é€™æœ¬æ›¸ä¹Ÿå¯ä»¥å­¸åˆ°å¾ˆå¤š <a href="http://www.csszengarden.com/">Zen Garden</a> åœ¨ CSS è¨­è¨ˆçš„æ¦‚å¿µã€‚* <a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9575278259&amp;sid=26381"> ç¶²é è¨­è¨ˆæ¨™æº–è¦æ ¼</a> è¦ç­è§£æ¨™æº–ç¶²é èˆ‡ CSS å¦‚ä½•æ­é…çš„è©±ï¼Œçœ‹é€™æœ¬å°±å°äº†ã€‚* <a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867529758&amp;sid=24438">CSS ç¶²é è¨­è¨ˆå¸«æ‰‹æœ­</a> å¤šåˆ°ä¸è¡Œçš„ CSS æŠ€å·§èªªæ˜ï¼Œå¿…è®€ï¼</p>
</li>
</ul>
<h3 id="javascript-amp-ajax">JavaScript &amp; AJAX</h3>
<ul>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867199855&amp;sid=32845">JavaScript ç¶²é è¨­è¨ˆå¸«æ‰‹æœ­</a> ç”¨ DOM çš„è§’åº¦ä¾†ä»‹ç´¹ JavaScript ï¼Œå€¼å¾—ä¸€è®€ã€‚</p>
</li>
<li>
<p><a href="http://www.oreilly.com.tw/product_web.php?id=a124">JavaScript å¤§å…¨</a>
çœ‹å®Œå®ƒæ‰èƒ½ç®—æ˜¯ç­è§£ JavaScript ã€‚<a href="http://www.oreilly.com.tw/product_web.php?id=a124">ä¸­æ–‡</a>ç›®å‰ç‚ºç¬¬ 4 ç‰ˆï¼Œ<a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=0596101996&amp;sid=32500">åŸæ–‡</a>å‰‡å·²ç¶“åˆ°ç¬¬ 5 ç‰ˆäº†ã€‚ä¸éå¤©ç“ç¶²ç«™ç«Ÿç„¶æ‰¾ä¸åˆ°äº†ï¼Œå¯ä»¥æ‰¾å…¶ä»–å®¶æ›¸åº—çœ‹çœ‹ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9574423522&amp;sid=30354">Ajax ç¶²é ç¨‹å¼è¨­è¨ˆâ”€Google æˆåŠŸèƒŒå¾Œçš„æŠ€è¡“</a> é€™æ˜¯å°ç£ç¬¬ä¸€æœ¬æœ‰å®Œæ•´å¯¦ä½œçš„ Ajax æ›¸ç±ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867794869&amp;sid=31332">Ajax å¿«é€Ÿä¸Šæ‰‹</a> ç¶­æŒæ·±å…¥æ·ºå‡ºç³»åˆ—çš„è‰¯å¥½é¢¨æ ¼ï¼Œå€‹äººå»ºè­°æ²’ç¢°é Ajax çš„äººå…ˆçœ‹é€™æœ¬ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867794842&amp;sid=31446">Ajax Hacks é§­å®¢å…«åæ‹›</a> ä»‹ç´¹å¾ˆå¤š Ajax æŠ€è¡“ï¼Œå¥½æ›¸ä¸€æœ¬ï¼</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9789861810362&amp;sid=31801">Ajax å¯¦æˆ°æ‰‹å†Š</a> é€™æœ¬æœ‰ä»‹ç´¹åˆ°å¯¦ä½œå¿…é ˆè€ƒé‡çš„åœ°æ–¹ï¼Œå€¼å¾—åƒè€ƒã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=986779494X&amp;sid=34207">Ajax è¨­è¨ˆæ¨¡å¼</a> æŠŠ Ajax ç›¸é—œæ¨¡å¼åŠéœ€è¦æ³¨æ„çš„åœ°æ–¹è§£é‡‹å¾—å¾ˆæ¸…æ¥šï¼Œå¿…è®€ï¼</p>
</li>
</ul>
<h3 id="php">PHP</h3>
<ul>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9575279530&amp;sid=32684">PHP 5 å¾¹åº•ç ”ç©¶</a> PHP 5 æœ‰å“ªäº›æ±è¥¿ï¼Ÿçœ‹é€™æœ¬æ›¸å¾Œå°±èƒ½æŒæ¡ä½ä¸ƒã€å…«æˆäº†ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867198417&amp;sid=30123">ç©¶æ¥µ PHPï¼šé€²éšç¶²è·¯æ‡‰ç”¨æŒ‡å—</a> æœ¬æ›¸å¯ä»¥å­¸ç¿’åˆ°å¾ˆå¤š PHP è™•ç†ç¶²è·¯é€šè¨Šçš„æŠ€è¡“ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9574423131&amp;sid=28289">PHP Smarty æ¨£ç‰ˆå¼•æ“</a>  å…§èˆ‰ä¸é¿è¦ªï¼Œæœ¬æ›¸ä¸»è¦é€é Smarty ä¾†ä»‹ç´¹åœ˜éšŠé–‹ç™¼çš„æ–¹å¼ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9864218204&amp;sid=27385">PHP ç²¾è¯å·¥å…·é›†æ¨¡çµ„ã€æ“´å……åŠŸèƒ½ã€æ•ˆèƒ½åŠ é€Ÿ</a> æœ¬æ›¸ä»‹ç´¹å¾ˆå¤š PHP å·¥å…·èˆ‡æŠ€è¡“ï¼Œå€¼å¾—ä¸€çœ‹ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867529677&amp;sid=23815">å°ˆæ¥­ PHP 5 ç¨‹å¼è¨­è¨ˆæŒ‡å—</a>  ç›®å‰æˆ‘çœ‹éæœ€å¥½çš„ PHP ç‰©ä»¶å°å‘ä¸­æ–‡æ›¸ç±ï¼Œå¯æƒœè²·ä¸åˆ°äº†ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867944704&amp;sid=15967">PHP ä¹‹æˆ€</a> å¤©ç“ç«Ÿç„¶é‚„æœ‰åœ¨è³£ï¼Œæœ¬æ›¸ä»‹ç´¹å¾ˆå¤šä½ æ²’çœ‹éçš„ PHP æ‡‰ç”¨ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867910672&amp;sid=13233">PHP ç¨‹å¼è¨­è¨ˆå°ˆå®¶å¿…å‚™æ‰‹å†Š</a> ä¸€å¤§å †çš„ PHP æŠ€å·§ï¼Œä½†æ˜¯ä¹Ÿè²·ä¸åˆ°äº†ï¼Œé‚„å¥½<a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=0672323257&amp;sid=12096">åŸæ–‡</a>å·²ç¶“æœ‰ç¬¬äºŒç‰ˆã€‚</p>
</li>
</ul>
<h3 id="web">Web</h3>
<ul>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867794176&amp;sid=17711">Apache æŠ€è¡“æ‰‹å†Š</a> å®‰è£èˆ‡è¨­å®š Apache å¿…çœ‹ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867794311&amp;sid=21291">Apache éŒ¦å›Šå¦™æŠ€</a> å‚³æˆè¨±å¤š Apache çš„ç§˜æŠ€ï¼Œè¨­å®š Apache å¿…çœ‹ã€‚</p>
</li>
<li>
<p><a href="http://www.books.com.tw/exep/prod/booksfile.php?item=0010336375">Web Site éŒ¦å›Šå¦™è¨ˆ</a> æ¶ç«™å¿…è®€å¥½æ›¸ï¼Œä¸éå¤©ç“ä¸çŸ¥é“ç‚ºä»€éº¼æ²’æœ‰ï¼Ÿè€Œä¸”ç«Ÿç„¶é‚„æ˜¯ä¸Šå¥‡å‡ºç‰ˆçš„æ­èŠç¦®æ›¸ç±&hellip;å‡ºç‰ˆç•ŒçœŸæ˜¯ä»¤äººæ‘¸ä¸é€å‘€&hellip;</p>
</li>
</ul>
<h3 id="design">Design</h3>
<ul>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867199499&amp;sid=29566">å¦‚ä½•è¨­è¨ˆå¥½ç¶²ç«™</a> ç¶²ç«™ä¸æ˜¯æ¼‚äº®å°±å¥½äº†ï¼Œé€™æœ¬æ›¸æ•™ä½ å¦‚ä½•å¾ä½¿ç”¨è€…çš„è§’åº¦å»è¨­è¨ˆç¶²ç«™ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=986779480X&amp;sid=30859">æ“ä½œä»‹é¢è¨­è¨ˆæ¨¡å¼</a> ç¾è¡Œçš„è»Ÿé«”ä»‹é¢æœ‰å“ªäº›å‘¢ï¼Ÿæœ¬æ›¸æ•´ç†äº†è¨±å¤šä»¤äººè®šå˜†çš„ä»‹é¢è¨­è¨ˆã€‚</p>
</li>
</ul>
<h3 id="programming">Programming</h3>
<ul>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867794524&amp;sid=32306">æ·±å…¥æ·ºå‡ºè¨­è¨ˆæ¨¡å¼</a> è¨­è¨ˆæ¨¡å¼æ˜¯ä»€éº¼ï¼Ÿé€™æœ¬æ›¸çœ‹å®Œå¾ŒåŒ…ä½ ä¸€æ¸…äºŒæ¥šã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9572054023&amp;sid=8021">ç‰©ä»¶å°å‘è¨­è¨ˆæ¨¡å¼</a> è¨­è¨ˆæ¨¡å¼çš„ç¶“å…¸åè‘—ï¼Œä¸éæˆ‘å»ºè­°å…ˆçœ‹çœ‹ã€Œæ·±å…¥æ·ºå‡ºè¨­è¨ˆæ¨¡å¼ã€å¾Œå†å›é ­çœ‹é€™æœ¬ã€‚å¦å¤–é‚„æœ‰<a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9572054112&amp;sid=10828">ç²¾è£æœ¬</a>ï¼Œæ”¶è—è€…å¿…å‚™ã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9575278356&amp;sid=26836">Design Patterns æ–¼ Java èªè¨€ä¸Šçš„å¯¦ç¿’æ‡‰ç”¨</a> ç”¨è¨±å¤š Java å¯¦ä¾‹ä¾†ä»‹ç´¹è¨­è¨ˆæ¨¡å¼ï¼Œå¯ä»¥è£œè¶³å‰é¢å…©æœ¬è¨­è¨ˆæ¨¡å¼æ›¸ç±çš„å¯¦ä½œè§€å¿µã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867594061&amp;sid=17667">é‡æ§‹ - æ”¹å–„æ—¢æœ‰ç¨‹å¼çš„è¨­è¨ˆ</a> ä»‹ç´¹è¨±å¤šç°¡å–®çš„é‡æ§‹æ‰‹æ³•ï¼Œå¯ä»¥å¹«åŠ©æˆ‘å€‘æŠŠç¨‹å¼é‡æ–°ä¿®æ”¹æˆè¼ƒæ˜“ç¶­è­·çš„æ¶æ§‹ï¼Œå¿…è®€ï¼</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867794702&amp;sid=29190">è»Ÿé«”é å…ˆæ¶æ§‹ä¹‹ç¾å­¸</a> å’Œé‡æ§‹æœ‰ç•°æ›²åŒå·¥ä¹‹å¦™ï¼Œä¸»è¦æ˜¯åˆ©ç”¨ç¶“é©—æ³•å‰‡ä¾†é¿å…æ‰å¾ŒçºŒéå¤šçš„é‡æ§‹å‹•ä½œï¼Œå€¼å¾—åƒè€ƒã€‚</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867910311&amp;sid=12245">æ¥µè‡´è»Ÿé«”è£½ç¨‹</a> XP å¤§å¸«è‘—ä½œï¼ŒåŒ…å«è¨±å¤šæœ‰è¶£çš„è»Ÿé«”é–‹ç™¼æ–¹æ³•ï¼Œå€¼å¾—ä¸€è®€ï¼</p>
</li>
<li>
<p><a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9861541489&amp;sid=26120">æ•æ·è»Ÿé«”é–‹ç™¼ï¼šåŸå‰‡ã€æ¨£å¼åŠå¯¦å‹™</a> æƒ³èµ°ç‰©ä»¶å°å‘è»Ÿé«”é–‹ç™¼å¿…è®€æ›¸ç±ï¼</p>
</li>
<li>
<p><a href="http://www.oreilly.com.tw/product2_java.php?id=a210">æ·±å…¥æ·ºå‡ºç‰©ä»¶å°å‘åˆ†æèˆ‡è¨­è¨ˆ</a>å¦‚æœè¦ºå¾—å¸‚é¢ä¸Šçš„ OO åˆ†ææ›¸ç±å¤ªéæ–¼è‰±æ·±çš„è©±ï¼Œé€™æœ¬å…¥é–€æ›¸çµ•å°å€¼å¾—ä¸€è®€ï¼</p>
</li>
</ul>
<p>ç•¶ç„¶ä¸€å®šé‚„æœ‰å…¶ä»–ä¸­æ–‡çš„å¥½æ›¸ï¼Œåªæ˜¯æˆ‘åŠ›æœ‰æœªé€®ç„¡æ³•ä¸€ä¸€æ‹œè®€ï¼›é€™è£¡ä¹Ÿæ­¡è¿å¤§å®¶ä¸€èµ·æ¨è–¦è‡ªå·±å¿ƒç›®ä¸­çš„å¥½æ›¸ï¼Œè®“å½¼æ­¤çš„åŠŸåŠ›é€²æ­¥å†é€²æ­¥ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>é€è¦– WebMVC</title>
			<link>https://jaceju.net/web-mvc/</link>
			<pubDate>Fri, 16 Mar 2007 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/web-mvc/</guid>
			<description>å‰è¨€ ä»¥å¾€æˆ‘æ‰€é–‹ç™¼çš„ Web å°ˆæ¡ˆï¼Œå¤§éƒ¨ä»½éƒ½æ˜¯æŠŠæ ¸å¿ƒæ”¾åœ¨æ“ä½œ HTML ï¼›å°±ç®—å¾Œä¾†ä½¿ç”¨äº† Smarty ï¼Œå»é‚„æ˜¯è¿·å¤±åœ¨è¦–è¦ºç‚ºé‡çš„è¨­è¨ˆè§€é»è£¡ï¼Œä½¿å¾—å¾ŒçºŒé–‹ç™¼èˆ‡ç¶­è­·éƒ½è®Šå¾—éå¸¸éº»ç…©ã€‚</description>
			<content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>ä»¥å¾€æˆ‘æ‰€é–‹ç™¼çš„ Web å°ˆæ¡ˆï¼Œå¤§éƒ¨ä»½éƒ½æ˜¯æŠŠæ ¸å¿ƒæ”¾åœ¨æ“ä½œ HTML ï¼›å°±ç®—å¾Œä¾†ä½¿ç”¨äº† Smarty ï¼Œå»é‚„æ˜¯è¿·å¤±åœ¨è¦–è¦ºç‚ºé‡çš„è¨­è¨ˆè§€é»è£¡ï¼Œä½¿å¾—å¾ŒçºŒé–‹ç™¼èˆ‡ç¶­è­·éƒ½è®Šå¾—éå¸¸éº»ç…©ã€‚å¾Œä¾†æˆ‘è‡ªå·±æ­¸ç´å‡ºå•é¡Œç™¼ç”Ÿçš„åŸå› ï¼Œçµ•å¤§éƒ¨ä»½åœ¨æ–¼æˆ‘æ¥è§¸çš„å°ˆæ¡ˆå¸¸å¸¸æ˜¯ã€Œç•«é¢å…ˆè¡Œã€ã€‚</p>
<p>ã€Œç•«é¢å…ˆè¡Œã€æ˜¯ç”±è¦–è¦ºè¨­è¨ˆäººå“¡ä¾†ä¸»å°å°ˆæ¡ˆçš„æ¶æ§‹ï¼Œè€Œé€™å€‹æ¶æ§‹å‰‡é€šå¸¸æ˜¯å› æ‡‰å®¢æˆ¶åœ¨ç¶²ç«™æµç¨‹ä¸Šçš„è¦æ±‚è€Œå»ºç«‹çš„ï¼›é€™ä¹Ÿä½¿å¾—æˆ‘åœ¨é–‹ç™¼ç¨‹å¼æ™‚å°±å¿…é ˆåœ°æ¡ç”¨ä»–å€‘æ±ºå®šå¥½çš„é é¢ä¾†å¥—ç”¨ç¨‹å¼ï¼Œæœ€å¾Œçš„çµæœå°±æ˜¯å°è‡´é‡è¤‡çš„æ¥­å‹™é‚è¼¯éå¸ƒåœ¨æ•´å€‹å°ˆæ¡ˆè£¡ã€‚</p>
<p><img src="/resources/webmvc/images/smarty_core.png" alt="ä»¥ Smarty ç‚ºæ ¸å¿ƒ"></p>
<p>ä¸éå°±ç®—ä½¿ç”¨äº† Smarty ï¼Œé€™ç¨®å•é¡Œä¹Ÿé‚„æ˜¯æ²’æœ‰å¾—åˆ°æ›´é€²ä¸€æ­¥çš„è§£æ±ºã€‚åŸå› å°±åœ¨æ–¼æˆ‘åªæ˜¯æŠŠ PHP ç¨‹å¼å’Œ HTML é é¢æ‹†é–‹ï¼Œè€Œå¯¦éš›ä¸ŠåŒæ¨£çš„æ¥­å‹™é‚è¼¯å»æ²’æœ‰èƒ½å¤ åŒ…è£èµ·ä¾†é‡è¤‡ä½¿ç”¨ã€‚ç›´åˆ°æˆ‘æ¥è§¸äº†ç‰©ä»¶å°å‘çš„è§€å¿µå¾Œï¼Œæˆ‘æ‰é©šè¦ºé€™ç¨®è¨­è¨ˆçœŸçš„æ˜¯ä¸å ªä¸€æ“Šã€‚</p>
<p>æ–¼æ˜¯æˆ‘å¾ˆèªçœŸåœ°ä½¿ç”¨ç‰©ä»¶å°å‘ä¾†å°è£æˆ‘çš„æ¥­å‹™é‚è¼¯ï¼Œä¸¦å¤©çœŸåœ°ä»¥ç‚ºè®“å®ƒå€‘èƒ½å¤  reuse å¾Œï¼Œç¨‹å¼çš„è¤‡é›œåº¦å°±æœƒé™ä½ï¼›ä½†æ˜¯é€æ¼¸åœ°æˆ‘ç™¼ç¾åˆ°ï¼Œæˆ‘èŠ±åœ¨ä¿®æ”¹é€™äº›ç‰©ä»¶çš„æ™‚é–“ç«Ÿç„¶è®Šå¾—æ¯”ä»¥å‰é•·ï¼Œæˆ‘å¿…é ˆä¸æ–·åœ°ç‚ºå®ƒåŠ å…¥ä¸åŒçš„åˆ¤æ–·æ¢ä»¶ï¼Œå¥½è®“å®ƒæ‡‰ä»˜æ‰€æœ‰å¯èƒ½ç™¼ç”Ÿçš„è®ŠåŒ–ã€‚å¯æ˜¯é€™ä¸æ˜¯æˆ‘æ‰€å¸Œæœ›ç™¼ç”Ÿçš„çµæœå‘€ï¼åˆ°åº•ç‚ºä»€éº¼æœƒè®Šæˆé€™æ¨£å‘¢ï¼Ÿ</p>
<p>æˆ‘ç™¼ç¾å¾ˆå¤šæ™‚å€™æˆ‘è®“ç‰©ä»¶åœ¨ç™¼ç”ŸéŒ¯èª¤æ™‚ï¼Œè‡ªè¡Œä¸Ÿå‡ºä¸€å€‹è¨Šæ¯çµ¦ç€è¦½å™¨ï¼Œæˆ–æ˜¯é€é Smarty å°‡é€™äº›è¨Šæ¯åŒ…è£æˆç•«é¢ã€‚ä½†æ˜¯éäº†å¹¾å€‹æœˆä¹‹å¾Œçš„æ”¹ç‰ˆï¼Œé€™å€‹ç‰©ä»¶çš„é‡ç”¨æ€§è®Šå¾—è¶Šä¾†è¶Šå·®ï¼Œè€Œä¸”ä¹Ÿè®Šå¾—è¶Šä¾†è¶Šå¤§ã€‚å¦å¤–å®ƒè·Ÿ Smarty çš„è€¦åˆæ€§ä¹Ÿå¤ªé«˜ï¼Œç•¢ç«Ÿæœ‰æ™‚å€™æˆ‘æ ¹æœ¬ä¸æƒ³åœ¨é€™å€‹æ™‚å€™ä½¿ç”¨ Smarty ä¸Ÿå‡ºç•«é¢ï¼Œè€Œæ˜¯æƒ³è®“ä¸Šä¸€å±¤ç¨‹å¼è‡ªå·±å»æ±ºå®šï¼</p>
<p>å¾Œä¾†æˆ‘æ­¸ç´å‡ºé€™ä¸€åˆ‡å•é¡Œçš„åŸå› ï¼Œéƒ½æ˜¯æˆ‘éŒ¯æŠŠ Smarty ç•¶æˆä¸»è§’ - ä¹Ÿå°±æ˜¯ç¶²ç«™æ¶æ§‹çš„æ ¸å¿ƒï¼</p>
<p>å‰›æ¥è§¸ Smarty æ™‚ï¼Œæˆ‘åŒæ™‚ä¹Ÿè€³èäº† MVC é€™å€‹è¨­è¨ˆæ¨¡å¼ã€‚ä¸éé‚£æ™‚å‰›å‰›æ¥è§¸ç‰©ä»¶å°å‘ï¼Œä¹Ÿé‚„ä¸ç­è§£ä»€éº¼æ˜¯è¨­è¨ˆæ¨¡å¼ï¼›åªçŸ¥é“ä½¿ç”¨ Smarty çš„å‰è¼©å€‘å€¡å°å¤§å‹çš„æ‡‰ç”¨é …ç›®éƒ½æ‡‰è©²æœå‘ MVC çš„æ¶æ§‹å»è¨­è¨ˆã€‚é›–ç„¶æˆ‘é‚£æ™‚ä»ä¸æ¸…æ¥š MVC çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç„¶è€Œé€™å€‹é–‹ç™¼æ–¹å¼å»å¸¶çµ¦æˆ‘ä¸€å€‹å¾ˆå¤§çš„æ€è€ƒç©ºé–“ï¼šç‚ºä»€éº¼è¦æŠŠä¸€å€‹æ‡‰ç”¨ç¨‹å¼åˆ†æˆä¸‰å€‹éƒ¨ä»½ï¼Ÿè€Œåœ¨ Web ä¸Šé€™ç¨®é–‹ç™¼æ–¹å¼ä¹Ÿè¡Œå¾—é€šå—ï¼Ÿåœ¨åƒè€ƒéä¸€äº›æ›¸ç±ï¼Œé€™äº›å•é¡Œä»ä¼¼æœ‰è‹¥ç„¡çš„å­˜åœ¨æˆ‘çš„å¿ƒä¸­ï¼Œæ‰€ä»¥æˆ‘çš„ç¨‹å¼æ¶æ§‹ä¾ç„¶æ²’æœ‰ä»€éº¼æ”¹é€²ã€‚</p>
<p>ç›´åˆ°åœ¨å¯«ã€Œ <a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9574423131">PHP Smarty æ¨£ç‰ˆå¼•æ“</a>ã€é€™æœ¬æ›¸æ™‚ï¼Œæˆ‘ä¹Ÿå‰›å¥½è®€åˆ°äº†ã€Œ<a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9867794524">æ·±å…¥æ·ºå‡ºè¨­è¨ˆæ¨¡å¼</a>ã€é€™æœ¬å¥½æ›¸ï¼›è€Œè©²æ›¸å° MVC æ¨¡å¼çš„ä»‹ç´¹ï¼Œæ­£å¥½è§£é–‹æˆ‘é•·å¹´ä»¥ä¾†çš„ç–‘æƒ‘ã€‚</p>
<p>åŸä¾†çœŸæ­£çš„ MVC æ˜¯å°‡ã€Œè³‡æ–™è™•ç†é‚è¼¯ã€ã€ã€Œç¨‹å¼æµç¨‹ã€èˆ‡ã€Œè³‡æ–™å‘ˆç¾ã€ä¸‰è€…åˆ†é›¢ï¼Œè€Œ Smarty åªæ˜¯æ‰®æ¼”äº†ã€Œè³‡æ–™å‘ˆç¾ã€çš„è§’è‰²è€Œå·²ï¼</p>
<p>ä¸éæ‡‚æ˜¯æ‡‚äº†ï¼Œä½†è¦å¦‚ä½•å°‡é€™å€‹æ¦‚å¿µèå…¥ Web é–‹ç™¼ä¸­ï¼Œé€™é»è®“æˆ‘è¦ºå¾—å¾ˆé ­ç—›ã€‚é›–ç„¶ç™¼ç¾å¾ˆæ—©å°±<a href="http://www.phpmvc.net/">æœ‰äºº</a>æŠŠ MVC å¸¶é€² PHP è£¡äº†ï¼Œåªå¯æƒœç”¨çš„äººä¸å¤šï¼Œæ–‡ä»¶ä¹Ÿæ¯”è¼ƒå°‘ã€‚æ‰€ä»¥åœ¨æˆ‘çš„æ›¸ä¸­çš„ MVC æ¶æ§‹ç”¨å¾—éå¸¸ç°¡é™‹ï¼Œåªèƒ½èªªæ˜¯ WebMVC çš„é››å½¢è€Œå·²ã€‚è€Œé€™æ™‚ Ruby on Rails å‰›å¥½åœ¨ç¶²è·¯ç•ŒèŒèŠ½ï¼Œè™Ÿç¨±å°‡ MVC å¸¶å…¥äº† Web é–‹ç™¼ä¸­ï¼›ä¸¦ä¸”é¦–é–‹å…ˆä¾‹ï¼Œç”¨å½±ç‰‡ä¾†ç¤ºç¯„ä¸€å€‹ Blog ç³»çµ±çš„èª•ç”Ÿï¼Œæ‰€ä»¥æˆ‘ä¹Ÿä¸å¯å…ä¿—åœ°å»æŠ“å›ä¾†ç©çœ‹çœ‹ (æˆ‘æƒ³å¾ˆå¤šå¯« Java çš„äººå¤§æ¦‚å°±æ˜¯é€™é»æ‰€å¸å¼•) ã€‚å¯æƒœæˆ‘ä¸€çœ‹åˆ° Ruby é‚£å€‹å¥‡æ€ªçš„èªæ³•ï¼Œå°±è¦ºå¾—çœ‹ä¸ä¸‹å»äº†ï¼Œæ‰€ä»¥åªæ˜¯ç…§æœ¬å®£ç§‘åœ°æŠŠç¯„ä¾‹ä½œä¸€ä½œï¼Œæœ€å¾Œä¸äº†äº†ä¹‹ (å¾Œä¾†æƒ³ä¸€æƒ³çœŸæ˜¯å¯æƒœ) ã€‚</p>
<p>ç›´åˆ°åˆéäº†å¥½ä¸€é™£å­ï¼Œåœ¨ CakePHP ã€ Code Igniter ç­‰è™Ÿç¨± PHP ç•Œçš„ Rails é–‹ç™¼æ¡†æ¶å‡ºç¾å¾Œï¼Œæˆ‘ä¾¿èˆˆè‡´å‹ƒå‹ƒåœ°å»ä¸‹è¼‰å›ä¾†ç ”ç©¶ã€‚è€Œåƒè€ƒäº†å®ƒå€‘çš„ç¯„ä¾‹å¾Œï¼Œé€™æ™‚æˆ‘æ‰çŒ›ç„¶é†’æ‚Ÿï¼åŸä¾† Web ä¸Šçš„ MVC æ¶æ§‹æ˜¯é•·æˆé€™å€‹æ¨£å­ï¼å¾Œä¾†ç‚ºäº†å°ˆæ¡ˆéœ€è¦ï¼Œæ›´æŠŠ LifeType çš„ç¨‹å¼ç¢¼è¿½äº†ä¸€éï¼Œé€™æ‰ç™¼ç¾ WebMVC ç«Ÿæ˜¯å¦‚æ­¤å½ˆæ€§è€Œå¯Œæœ‰è®ŠåŒ–ï¼</p>
<p>ç”±æ–¼æ·±åˆ»é«”èªåˆ°ç‰©ä»¶å°å‘æ‰€å¸¶çµ¦æˆ‘çš„è¡æ“Šï¼Œæˆ‘ä¸å¾—ä¸æ‰¿èªä»¥å¾€æˆ‘æ‰€åš®å¾€çš„é–‹ç™¼æ–¹å¼ä»ç„¶æœ‰å¾ˆå¤§çš„æ”¹é€²ç©ºé–“ã€‚æ‰€ä»¥æˆ‘æƒ³å°±å¾æ¶æ§‹çš„æ”¹é€²é–‹å§‹ï¼Œè®“è‡ªå·±é‡é ­å»èªè­˜æ–°çš„ Web é–‹ç™¼æ–¹å¼ã€‚</p>
<h2 id="å‚³çµ±çš„ç¨‹å¼æ¶æ§‹">å‚³çµ±çš„ç¨‹å¼æ¶æ§‹</h2>
<p>ä»¥å¾€æˆ‘æ‰€è¦‹åˆ°çš„ç¨‹å¼æ¶æ§‹ï¼Œå¤§å¤šéƒ½æ˜¯ä¸€å€‹åŠŸèƒ½ä¸€å€‹é é¢ã€‚å°±æ‹¿ç•™è¨€æ¿ä¾†èªªå¥½äº†ï¼Œä»¥å‰çš„æˆ‘å¤§æ¦‚æœƒé€™æ¨£è¦åŠƒï¼š</p>
<ul>
<li>
<p>index.php (ç•™è¨€åˆ—è¡¨é )</p>
</li>
<li>
<p>add.php (æ–°å¢ç•™è¨€è¡¨å–®)</p>
</li>
<li>
<p>do_add.php (è™•ç†æ–°å¢ç•™è¨€)</p>
</li>
<li>
<p>rss.php (å‡è¨­é€™å€‹ç•™è¨€æ¿æœ‰æä¾› RSS æœå‹™)</p>
</li>
</ul>
<p>ä»¥ä¸Šçš„è¦åŠƒæ–¹å¼å¾ˆæ˜é¡¯åœ°æ˜¯ä¸€å€‹åŠŸèƒ½ä¸€æ”¯ç¨‹å¼ï¼Œé€™åœ¨å°é …ç›®è£¡é¢å¾ˆå¸¸è¦‹ã€‚ç‚ºäº†æ¢è¨é€™ç¨®æ¶æ§‹çš„å„ªç¼ºé»ï¼Œä»¥ä¸‹æˆ‘ä¾¿æ¡ç”¨é€™ç¨®æ–¹å¼ä¾†å¯¦ä½œä¸€å€‹å‚³çµ±çš„ç•™è¨€æ¿ã€‚</p>
<p>è¨»ï¼šç•¶ç„¶ä¹Ÿå¯ä»¥å°‡å®ƒå€‘å…¨éƒ¨æ”¾åœ¨åŒä¸€æ”¯ç¨‹å¼ä¸­è™•ç†æ‰ï¼Œä¸éæˆ‘é‚„æ˜¯æš«æ™‚ä¸è¦è®Šå¾—é‚£éº¼ã€Œè°æ˜ã€ã€‚</p>
<h3 id="ç¨‹å¼ç¢¼">ç¨‹å¼ç¢¼</h3>
<p>å…ˆä»¥ index.php ä¾†èªªï¼Œä»¥ä¸‹æ˜¯ä¸€å€‹ç°¡å–®çš„å¯¦ä½œï¼š</p>
<pre><code>&lt;?php
// è¼‰å…¥è¨­å®š
require_once 'config.php';
// å¾æª”æ¡ˆä¸­å–å¾—æ‰€æœ‰ç•™è¨€
$messages = (file_exists(APP_STORAGE))
          ? unserialize(file_get_contents(APP_STORAGE))
          : array ();
// è¼¸å‡º HTML
header('Content-Type: text/html; charset=utf-8');
?&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;
&lt;head&gt;
.... (ç•¥) ....
&lt;div id=&quot;content&quot;&gt;
&lt;?php if (count($messages)): ?&gt;
&lt;?php foreach ($messages as $id =&gt; $message): ?&gt;
&lt;div class=&quot;messageBlock&quot;&gt;
&lt;h2&gt;&lt;?php echo $message['title']; ?&gt;&lt;/h2&gt;
&lt;p&gt;&lt;?php echo nl2br($message['body']); ?&gt;&lt;/p&gt;
&lt;p class=&quot;messageBlockFunctions&quot;&gt;By &lt;?php echo $message['author']; ?&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;?php endforeach; ?&gt;
&lt;?php else: ?&gt;
&lt;p&gt;æ²’æœ‰ä»»ä½•æ–‡ç« &lt;/p&gt;
&lt;?php endif; ?&gt;
&lt;/div&gt;
.... (ç•¥) ....
&lt;/body&gt;
&lt;/html&gt;

</code></pre><p><img src="/resources/webmvc/images/php_html.png" alt="PHP with HTML"></p>
<p>ä¸»è¦åœ¨é€™è£¡æˆ‘æ˜¯åˆ©ç”¨æ–‡å­—æª”ä¾†å­˜æ”¾ç•™è¨€å…§å®¹ï¼Œç„¶å¾Œåˆ©ç”¨ç¨‹å¼å–å¾—ç•™è¨€å¾Œå†å°‡å®ƒå€‘è¼¸åˆ°åˆ° HTML ã€‚é€™æ¨£çš„å¯«æ³•æŠŠç•™è¨€ç‰ˆçš„è™•ç†é‚è¼¯å’Œ HTML æ··åœ¨ä¸€èµ·ï¼Œæ˜¯ PHP å¸¸è¦‹çš„é–‹ç™¼æ–¹å¼ã€‚</p>
<p>è€Œ add.php ç´”ç²¹æ˜¯è¡¨å–®é ï¼Œé€™è£¡æˆ‘æŠŠå®ƒç•¥éã€‚æ¥ä¸‹ä¾†æ˜¯æˆ‘åœ¨ do_add.php ä¸Šçš„å¯¦ä½œï¼š</p>
<pre><code>&lt;?php
// è¼‰å…¥è¨­å®š
require_once 'config.php';
// å–å¾—è¡¨å–®è®Šæ•¸
$title = $_POST['title'];
$author = $_POST['author'];
$body = $_POST['body'];
// å¾æª”æ¡ˆä¸­å–å¾—æ‰€æœ‰ç•™è¨€
$messages = (file_exists(APP_STORAGE))
          ? unserialize(file_get_contents(APP_STORAGE))
          : array ();
// åœ¨æ‰€æœ‰ç•™è¨€çš„æœ€å¾ŒåŠ ä¸Šä¸€ç­†
$messages[] = array (
    'id'     =&gt; count($messages) + 1,
    'title'  =&gt; $title,
    'author' =&gt; $author,
    'body'   =&gt; $body,
);
// å°‡æ‰€æœ‰ç•™è¨€å¯«å›æª”æ¡ˆ
file_put_contents(APP_STORAGE, serialize($messages));
// å°å›åˆ—è¡¨é 
header('Location: ./');

</code></pre><p>çœ‹èµ·ä¾† do_add.php åšçš„äº‹å¤šäº†ä¸€é»ï¼Œä¸éæˆ‘æƒ³é‚„ä¸è‡³æ–¼å¤ªå›°é›£ã€‚é€™è£¡çš„ do_add.php æ²’æœ‰ä»‹é¢å¯è®“ä½¿ç”¨è€…æ“ä½œï¼Œåƒé€™æ¨£çš„ç¨‹å¼é€šå¸¸æ˜¯ç‚ºäº†è™•ç†è¡¨å–®è®Šæ•¸è€Œå­˜åœ¨çš„ã€‚</p>
<p>è¨»ï¼šä»¥ä¸Šç”¨æª”æ¡ˆå­˜å–ç•™è¨€çš„æ–¹å¼æ˜¯ç‚ºäº†ç°¡å–®èµ·è¦‹ï¼Œæ‰€ä»¥å¯«å¾—éå¸¸å·æ‡¶ï¼Œæˆ‘æƒ³ä¸å€¼å¾—å­¸ç¿’ã€‚</p>
<p>æœ€å¾Œä¾†çœ‹çœ‹ rss.php çš„å¯¦ä½œï¼š</p>
<pre><code>&lt;?php
// è¼‰å…¥è¨­å®š
require_once 'config.php';
// å¾æª”æ¡ˆä¸­å–å¾—æ‰€æœ‰ç•™è¨€
$messages = (file_exists(APP_STORAGE))
          ? unserialize(file_get_contents(APP_STORAGE))
          : array ();
// çµ„åˆ XML
$xml = '';
$xml .= '&lt;' . '?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?' . '&gt;' . &quot;\n&quot;;
$xml .= '&lt;rss version=&quot;2.0&quot;&gt;' . &quot;\n&quot;;
$xml .= '&lt;channel&gt;' . &quot;\n&quot;;
$xml .= '&lt;title&gt;TEST&lt;/title&gt;' . &quot;\n&quot;;
$xml .= '&lt;description&gt;TEST&lt;/description&gt;' . &quot;\n&quot;;
foreach ($messages as $message)
{
    $xml .= '&lt;item&gt;' . &quot;\n&quot;;
    $xml .= '&lt;title&gt;' . $message['title'] . '&lt;/title&gt;' . &quot;\n&quot;;
    $xml .= '&lt;description&gt;' . $message['body'] . '&lt;/description&gt;' . &quot;\n&quot;;
    $xml .= '&lt;/item&gt;' . &quot;\n&quot;;
}
$xml .= '&lt;/channel&gt;' . &quot;\n&quot;;
$xml .= '&lt;/rss&gt;';
// è¼¸å‡º XML
header('Content-Type: text/xml; charset=utf-8');
echo $xml;

</code></pre><p>é€™è£¡æˆ‘éµå¾ªæœ€ç°¡å–®çš„è¦ç¯„ï¼ŒæŠŠç•™è¨€å…§å®¹è¼¸å‡ºæˆå¯ä¾›è®€å–çš„ RSS æ ¼å¼ã€‚</p>
<p>ä¸Šé¢çš„ç¨‹å¼å…¶å¯¦èŠ±ä¸åˆ°æˆ‘å¹¾åˆ†é˜ï¼Œå€’æ˜¯ CSS çš„éƒ¨ä»½ç”¨çš„æ™‚é–“é•·äº†é» (å¤§æ¦‚åŠå°æ™‚) ï¼Œé€™ä¹Ÿèªªæ˜ PHP åœ¨å°å‹æ‡‰ç”¨ç¨‹å¼ä¸Šçš„é–‹ç™¼æ•ˆç‡æ˜¯å¾ˆé«˜çš„ (ä¹Ÿè¨±æ˜¯å› ç‚ºæˆ‘ç”¨äº†å·æ‡¶çš„æ–¹å¼ :P ) ã€‚ç„¶è€Œæˆ‘æ«å¿ƒè‡ªå•ï¼šå¦‚æœä»Šå¤©æ²¿ç”¨é€™æ¨£çš„æ¶æ§‹ä¾†é–‹ç™¼å¤§å‹å°ˆæ¡ˆçš„è©±ï¼Œé‚£éº¼å°åœ˜éšŠåˆä½œæœƒæœ‰ä»€éº¼æ¨£çš„å½±éŸ¿å‘¢ï¼Ÿ</p>
<h3 id="é¢è‡¨çš„å•é¡Œ">é¢è‡¨çš„å•é¡Œ</h3>
<p>æˆ‘å…ˆç°¡å–®æŠŠä¸Šé¢å¹¾æ”¯ç¨‹å¼æ‹†è§£é–‹ä¾†åˆ†æï¼Œä¾¿ç™¼ç¾ä»¥ä¸‹çš„é€šå‰‡ï¼š</p>
<ul>
<li>
<p>å¦‚æœéœ€è¦çš„è©±å‰‡å–å¾—è¡¨å–®è®Šæ•¸ (do_add.php) ã€‚</p>
</li>
<li>
<p>å­˜å–è³‡æ–™ä¸¦é€éç›¸é—œé‚è¼¯è™•ç† (index.php ã€ rss.php ã€ do_add.php) ã€‚</p>
</li>
<li>
<p>è¼¸å‡ºè³‡è¨Šçµ¦ç€è¦½å™¨æˆ–å…¶ä»–å¤–éƒ¨ç¨‹å¼ (index.php ã€ rss.php ã€ add.php) ã€‚</p>
</li>
</ul>
<p>è¨»ï¼šé›–ç„¶ do_add.php çš„ header(&lsquo;Location&rsquo;) æŒ‡ä»¤ä¹Ÿæ˜¯æœƒå‚³é€ HTTP çš„ Header è³‡è¨Šçµ¦ç€è¦½å™¨ï¼Œä½†æ˜¯æˆ‘æŠŠå®ƒè¦–ç‚ºæµç¨‹æ§åˆ¶è€Œéè³‡æ–™å‘ˆç¾ã€‚</p>
<p>æˆ‘æ‰‹é‚Šåœ¨ç¶­è­·çš„å¤§éƒ¨ä»½ PHP ç¨‹å¼éƒ½æ˜¯ä»¥é¡ä¼¼çš„æµç¨‹æ‰€å¯«æˆçš„ï¼Œç•¶ç„¶é€™æ¨£å¯«æ˜¯éå¸¸ç›´è¦ºçš„ã€‚ä½†æ˜¯å°±æ‹¿ä¸Šé¢ç•™è¨€æ¿çš„ä¾‹å­ä¾†èªªå¥½äº†ï¼Œæˆ‘å°±ç™¼ç¾é€™æ¨£çš„æ¶æ§‹æœƒå¸¶ä¾†ä»¥ä¸‹å¹¾å€‹ä¸»è¦çš„ç¼ºé»ï¼š</p>
<ul>
<li>å¦‚æœæˆ‘æƒ³å°‡æ–‡å­—æª”æ›æˆæ­£å¼çš„è³‡æ–™åº«ç³»çµ±æ™‚ï¼Œæˆ‘å¾—åŒæ™‚æ›´æ”¹ä¸‰æ”¯ç¨‹å¼æª”ã€‚</li>
<li>å¦‚æœåœ¨å¤šäººé–‹ç™¼ç’°å¢ƒä¸‹ï¼Œç¨‹å¼é–‹ç™¼æ²’è¾¦æ³•å’Œè¦–è¦ºè¨­è¨ˆä¸¦è¡Œï¼›å¦‚æœé é¢é¢¨æ ¼è¦æ›´æ”¹çš„è©±å¯èƒ½æœƒæ›´æ…˜ã€‚</li>
<li>é‡è¤‡çš„ç¨‹å¼ç¢¼å¤ªå¤š (ä¾‹å¦‚è®€å–è³‡æ–™éƒ¨ä»½) ï¼Œä¸€æ—¦ç™¼ç¾éŒ¯èª¤ï¼Œå¿…é ˆæŠŠæ‰€æœ‰ç›¸é—œçš„ç¨‹å¼æ‰¾å‡ºä¾†ä¸€å€‹ä¸€å€‹ä¿®æ”¹ã€‚</li>
</ul>
<p>é›–ç„¶åœ¨ç•™è¨€æ¿é€™ç¨®å°é …ç›®ä¸­ï¼Œä»¥ä¸Šçš„å•é¡Œä¸¦ä¸æœƒå½±éŸ¿å¤ªå¤§ï¼›å¯æ˜¯æˆ‘æ‰€ç¶­è­·æˆ–é–‹ç™¼çš„æ‡‰ç”¨ç¨‹å¼é€šå¸¸éƒ½æœƒåŒ…å«æ•¸åæ”¯ç”šè‡³ä¸Šç™¾æ”¯çš„é é¢ï¼Œé€™æ™‚å€™ä¸Šé¢çš„å•é¡Œå°±æœƒéš¨è‘—é é¢æ•¸é‡è€Œå‘ˆç¾ç­‰æ¯”ç´šæ•¸çš„æˆé•·ã€‚</p>
<p>æˆ‘æ›¾åœ¨ã€Œ <a href="http://tlsj.tenlong.com.tw/WebModule/BookSearch/bookSearchViewAction.do?isbn=9574423131">PHP Smarty æ¨£ç‰ˆå¼•æ“</a>ã€æéï¼Œç¶²ç«™é–‹ç™¼ä¸Šçµ•å°ä¸æ˜¯åªæœ‰ä¸€å€‹äººçš„äº‹æƒ…ï¼›é™¤äº†å°ˆæ¡ˆä¼åŠƒäººå“¡çš„åƒèˆ‡å¤–ï¼Œç¨‹å¼é–‹ç™¼äººå“¡åŠè¦–è¦ºè¨­è¨ˆäººå“¡ä¹‹é–“çš„å”èª¿æ›´æ˜¯é‡è¦ã€‚å¦‚æœä¸€å€‹æ¶æ§‹ä¸èƒ½åŒæ™‚è®“é€™å…©æ–¹äººé¦¬æœ‰è‰¯å¥½çš„äº’å‹•ï¼Œé‚£éº¼é€™å€‹æ¶æ§‹å°±ä¸å€¼å¾—åœ˜éšŠæ¡ç”¨ã€‚</p>
<p>ç•¶ç„¶æˆ‘å¯ä»¥åœ¨é€™è£¡å°å…¥æ¨£ç‰ˆå¼•æ“ (ä¾‹å¦‚ Smarty ) ï¼Œç„¶è€Œé€™æ¨£ä¾èˆŠç„¡æ³•æœ‰æ•ˆè§£æ±ºå¾ŒçºŒç¶­è­·ä¸Šçš„å•é¡Œï¼›è€Œä¸”æˆ‘å…ˆå‰ä¹Ÿéæ–¼ä¾è³´ä»¥æ¨£ç‰ˆå¼•æ“ç‚ºä¸»å¹¹çš„é–‹ç™¼æ–¹å¼ï¼Œè€Œæ²’æœ‰èªçœŸå»æ€è€ƒå¦‚ä½•æŠŠç›¸ä¼¼çš„éƒ¨ä»½æ•´åˆåœ¨ä¸€èµ·ã€‚å› æ­¤è‹¥æ˜¯è¦ä¸€æ¬¡è§£æ±ºä»¥ä¸Šçš„å•é¡Œï¼Œæˆ‘ä¾¿å¾—å¥½å¥½æ€è€ƒå¦‚ä½•çœŸæ­£æœ‰æ•ˆå»åˆ‡å‰²ä¸¦é‡çµ„é€™æ¨£çš„ç¨‹å¼æ¶æ§‹ã€‚</p>
<h2 id="è½‰æ›æ€è€ƒæ¨¡å¼">è½‰æ›æ€è€ƒæ¨¡å¼</h2>
<p>åœ¨å‰é¢çš„ç¨‹å¼è£¡é¢ï¼Œé™¤äº† PHP å’Œ HTML çœ‹èµ·ä¾†æ˜¯é‚„ç®—æœ‰æ˜é¡¯çš„å€éš”ï¼Œå…¶ä»–éƒ¨ä»½å…¶å¯¦é‚„æ»¿ä¸å®¹æ˜“çœ‹å‡ºå®ƒå€‘ä¹‹é–“çš„é—œä¿‚ã€‚åœ¨é‡åˆ°é€™æ¨£çš„å•é¡Œæ™‚ï¼Œæˆ‘å€‹äººéå¸¸å–œæ­¡ä½¿ç”¨åœ–å½¢åŒ–çš„æ€è€ƒæ¨¡å¼ï¼Œé€™æœƒæœ‰åŠ©æ–¼å°ç¨‹å¼æ•´é«”æ¶æ§‹çš„åˆ†æï¼Œæ‰€ä»¥æˆ‘ä¾¿æŠŠä»¥ä¸Šå››æ”¯ç¨‹å¼æ‰€åšçš„äº‹æƒ…åœ–å½¢åŒ–ã€‚åœ¨åœ–å½¢åŒ–ä¹‹å¾Œï¼Œæˆ‘ç™¼ç¾æ¯æ”¯ç¨‹å¼ä¸­éƒ½æœ‰ç›¸é—œçš„éƒ¨ä»½ï¼›å› æ­¤æˆ‘å°±æŠŠç›¸é—œçš„åŠŸèƒ½å°é½Šï¼Œå¦‚ä¸‹åœ–æ‰€ç¤ºï¼š</p>
<p><img src="/resources/webmvc/images/transition.png" alt="å‚³çµ±æ¶æ§‹"></p>
<p>ç¾åœ¨æ•´å€‹ç¨‹å¼æ¶æ§‹ç›¸ç•¶æ¸…æ¥šäº†ï¼Œåƒæ˜¯è®€å–ç•™è¨€æˆ–æ–°å¢ç•™è¨€éƒ½æ˜¯ç•™è¨€æ¿çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå·²ç¶“å°é½Šåœ¨åŒä¸€å€‹æ°´å¹³ä¸Šï¼›è€Œè¼¸å‡ºè³‡è¨Šçš„éƒ¨ä»½ä¹Ÿæ˜¯ä¸€æ¨£ï¼Œä¸è«–è¼¸å‡ºæ ¼å¼æ˜¯ HTML é‚„æ˜¯ RSS ï¼Œéƒ½å¯ä»¥ä¸€è¦–åŒä»ã€‚ç„¶è€Œæ¯”è¼ƒç‰¹åˆ¥çš„æ˜¯ï¼Œæˆ‘æ±ºå®šæŠŠé é¢æµç¨‹ä¹Ÿçœ‹æˆæ˜¯ç›¸é¡ä¼¼çš„åŠŸèƒ½é›†åˆï¼Œæ›å¥è©±èªªå°±æ˜¯æ·ºè—è‰²çš„éƒ¨ä»½ä¹Ÿç®—æ˜¯ç›¸é—œçš„ã€‚</p>
<p>æ¥è‘—æˆ‘æŠŠé€™äº›é‡è¤‡æˆ–ç›¸ä¼¼çš„éƒ¨ä»½æ²¿è‘—è™›ç·šå°‡å®ƒå€‘åˆ‡å‰²é–‹ä¾†ä¸¦é‡æ–°ç¾¤çµ„åœ¨ä¸€èµ·ï¼š</p>
<p><img src="/resources/webmvc/images/group.png" alt="è½‰æ›æˆMVC"></p>
<p>ç¾åœ¨æˆ‘æœ‰ç•™è¨€æ¿çš„æ ¸å¿ƒéƒ¨ä»½ (ä¹Ÿå°±æ˜¯å–å¾—æ‰€æœ‰ç•™è¨€ä»¥åŠæ–°å¢ç•™è¨€) ã€å…©ç¨®è¼¸å‡ºçš„å½¢æ…‹ (HTML èˆ‡ RSS ) ä»¥åŠç›¸é—œçš„é é¢å‹•ä½œ (index ã€ add ã€ do_add ã€ rss) ä¸‰å€‹ç¾¤çµ„ï¼Œçœ‹èµ·ä¾†å¥½åƒå¾ˆæ£’ï¼Œä½†æ˜¯æœ‰ä»€éº¼ç”¨å‘¢ï¼Ÿ</p>
<p>å›æƒ³ä¸€ä¸‹å‰é¢çš„å•é¡Œï¼Œé¦–å…ˆæˆ‘é‡åˆ°äº†è³‡æ–™åº«æœƒæ”¹è®Šé€™å€‹äº‹å¯¦ï¼Œä¸éçœ‹ä¾†æˆ‘åªéœ€è¦æŠŠ Guestbook é€™å€‹ç¾¤çµ„çš„å¯¦ä½œæ–¹å¼æŠ½æ›æ‰å°±å¯ä»¥è§£æ±ºã€‚ç•¶ç„¶æŠ½æ›çš„éç¨‹ä¸­ä¹Ÿä¸æœƒå½±éŸ¿åˆ°å…¶ä»–å…©å€‹ç¾¤çµ„çš„é‹ä½œï¼Œå› ç‚ºæˆ‘å·²ç¶“å°‡ç•™è¨€æ¿çš„æ ¸å¿ƒéƒ¨ä»½æ’é™¤åœ¨é é¢ä¹‹å¤–äº†ã€‚æ›å¥è©±èªªï¼Œä¸è«–æˆ‘çš„ç•™è¨€è¨Šæ¯æ˜¯ä»¥æª”æ¡ˆå­˜æ”¾æˆ–æ˜¯ä½¿ç”¨è³‡æ–™åº«å­˜æ”¾ï¼Œåªè¦ Guestbook ç¾¤çµ„æä¾›ç›¸åŒçš„æ“ä½œä»‹é¢ï¼Œéƒ½èƒ½è®“å…¶ä»–ç¨‹å¼è¦æ›´å‹•çš„éƒ¨ä»½æ¸›è‡³æœ€å°‘ã€‚</p>
<p>è€Œç¬¬äºŒå€‹å•é¡Œæˆ‘å¯ä»¥åœ¨ Output ç¾¤çµ„ä¸­æ‰¾åˆ°è§£ç­”ï¼Œå› ç‚ºé€™è£¡æˆ‘åªéœ€è¦å°å…¥æ¨£ç‰ˆçš„æ¦‚å¿µï¼Œé‚£éº¼ HTML æˆ–æ˜¯ RSS éƒ½å¯ä»¥ç¨ç«‹åœ¨ç¨‹å¼ä¹‹å¤–ã€‚è€Œä¸” HTML çš„éƒ¨ä»½æˆ‘å¯ä»¥æ­é… Smarty æˆ–å…¶ä»–æ¨£ç‰ˆå¼•æ“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å–®ç´”çš„ PHP å¥—ç‰ˆï¼›è€Œ RSS çš„éƒ¨ä»½é™¤äº†ä¸Šé¢ç›´æ¥ä½¿ç”¨å­—ä¸²ä¾†è¼¸å‡ºçš„æ–¹å¼å¤–ï¼Œæˆ‘ä¹Ÿå¯ä»¥æ”¹ç”¨å…¶ä»–æ–¹ä¾¿çš„ç¬¬ä¸‰æ–¹é¡åˆ¥åº«ä¾†å”åŠ©ç”¢ç”Ÿã€‚é€™æ¨£ä¸€ä¾†ä¸åƒ…è§£æ±ºå”åŒé–‹ç™¼çš„å•é¡Œï¼Œé‚„èƒ½å¤ è®“å°ˆæ¡ˆé¸ç”¨é©ç•¶çš„æ–¹æ³•ä¾†ç”¢ç”Ÿè¼¸å‡ºã€‚</p>
<p>æœ€å¾Œæˆ‘å†æŠŠé é¢çš„æµç¨‹æ”¾åœ¨ Actions ç¾¤çµ„è£¡ï¼Œä¹Ÿå°±æ˜¯èªªæˆ‘å¯ä»¥æŠŠé‡è¤‡çš„éƒ¨ä»½æç…‰å‡ºä¾†æ”¾åœ¨ä¸€èµ·ã€‚è€Œé€™æ¨£çš„èª¿æ•´å°±èƒ½ä½¿æˆ‘åœ¨å¢åŠ æ–°åŠŸèƒ½æˆ–æ˜¯ä¿®æ­£æŸäº›éŒ¯èª¤æ™‚ï¼Œèƒ½å¤ é¿å…ç›¸é—œçš„ç¨‹å¼ç¢¼é‡è¤‡ï¼›è€Œä¸”ä¹Ÿèƒ½å°‡ç›¸é—œåŠŸèƒ½æ”¾åœ¨åŒä¸€å€‹ç¾¤çµ„ä¸‹ä»¥ä¾¿ç®¡ç†ã€‚</p>
<h3 id="ç¨‹å¼ç¢¼-1">ç¨‹å¼ç¢¼</h3>
<p>ä¸Šé¢çš„ç†è«–é›–ç„¶æ„Ÿè¦ºèµ·ä¾†å¾ˆæ£’ï¼Œä½†æ˜¯é‚„ç¼ºå°‘å¯¦å‹™çš„æ”¯æŒï¼Œæ‰€ä»¥æˆ‘å¿…é ˆæŠŠé€™äº›ç¾¤çµ„è®Šæˆç¨‹å¼ç¢¼ã€‚ä¸éåœ¨å¯¦å‹™ä¸Šï¼Œã€Œç¾¤çµ„ã€ä¸¦ä¸æ˜¯çœŸæ­£èƒ½å¤ å¯¦ä½œçš„æ±è¥¿ï¼Œæ‰€ä»¥æˆ‘æƒ³é€™æ™‚å°±æ‡‰è©²å¼•é€²ç‰©ä»¶å°å‘çš„è§€å¿µäº†ã€‚å› ç‚ºå‰é¢æˆ‘æŠŠç›¸é¡ä¼¼çš„åŠŸèƒ½æ”¾åœ¨ä¸€èµ·ï¼Œæ‰€ä»¥å®ƒå€‘å°±èƒ½å½¢æˆä¸€å€‹ç‰©ä»¶å°å‘ä¸­çš„é¡åˆ¥ã€‚æ›å¥è©±èªª Guestbook æ˜¯ä¸€å€‹é¡åˆ¥ï¼Œè€Œ Output å’Œ Actions ä¹Ÿæ˜¯ä¸€æ¨£ï¼Œæ‰€ä»¥åœ¨æ–°çš„æ¶æ§‹è£¡æˆ‘å°±å¯ä»¥ä½¿ç”¨é¡åˆ¥ä¾†å¯¦ä½œç¨‹å¼ã€‚ç„¶è€Œäº‹å¯¦ä¸Šæˆ‘åªæ˜¯å…ˆæŠŠèˆŠçš„ç¨‹å¼ç¢¼æŒ‰ç…§ä¸Šé¢çš„é‚è¼¯é‡æ–°çµ„åˆåœ¨é¡åˆ¥ä»£ç¢¼è£¡ï¼Œä¸¦æ±‚èƒ½æ­£å¸¸åŸ·è¡Œã€‚</p>
<p>è¨»ï¼šäº‹å¯¦ä¸Šä¸¦éå°‡ç›¸ä¼¼åŠŸèƒ½æ”¾åœ¨ä¸€èµ·å°±èƒ½å¤ è½‰æ›æˆé¡åˆ¥ï¼Œæˆ‘å€‹äººåªæ˜¯ç‚ºäº†ç°¡åŒ–æ€è€ƒï¼Œæ‰æœƒæ¡ç”¨é€™æ¨£çš„æ¦‚å¿µã€‚</p>
<p>é¦–å…ˆæ˜¯ Guestbook.php ï¼Œå®ƒçš„é¡åˆ¥ä»£ç¢¼å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
// ç•™è¨€ç‰ˆé¡åˆ¥
class Guestbook
{
    // ç•™è¨€
    private $messages;
    // å»ºæ§‹å‡½å¼
    // é å…ˆå¾æª”æ¡ˆä¸­å–å¾—æ‰€æœ‰ç•™è¨€
    public function __construct()
    {
        $this-&gt;messages = (file_exists(APP_STORAGE))
                        ? unserialize(file_get_contents(APP_STORAGE))
                        : array ();
    }
    // å–å¾—æ‰€æœ‰ç•™è¨€
    public function getAllMessages()
    {
        return $this-&gt;messages;
    }

    // æ–°å¢ç•™è¨€
    // åœ¨æ‰€æœ‰ç•™è¨€çš„æœ€å¾ŒåŠ ä¸Šä¸€ç­†å¾Œå¯«å›æª”æ¡ˆ
    public function addMessage($title, $author, $body)
    {
        $this-&gt;messages[] = array (
            'id'     =&gt; count($this-&gt;messages) + 1,
            'title'  =&gt; $title,
            'author' =&gt; $author,
            'body'   =&gt; $body,
        );
        file_put_contents(APP_STORAGE, serialize($this-&gt;messages));
    }
    // è§£æ§‹å‡½å¼
    public function __destruct()
    {
        $this-&gt;messages = NULL;
    }
}

</code></pre><p>åœ¨ Guestbook é¡åˆ¥è£¡ï¼Œæˆ‘æŠŠè®€å–ç•™è¨€ (getAllMessages) å’Œæ–°å¢ç•™è¨€ (addMessage) çš„ç¨‹å¼è®Šæˆé¡åˆ¥æ–¹æ³•ï¼Œåœ¨å¯¦ä½œä¸Šé‚„æ˜¯æ¡ç”¨åŸä¾†æª”æ¡ˆå­˜å–çš„æ–¹å¼ã€‚åœ¨é€™è£¡ getAllMessages å’Œ addMessage å…©å€‹æ–¹æ³•ï¼Œå°±æ˜¯ä¾›å¤–éƒ¨å‘¼å«ç”¨çš„çµ±ä¸€ä»‹é¢ã€‚å¦‚æœä¹‹å¾Œå¦‚æœæˆ‘éœ€è¦æ›´æ›æˆè³‡æ–™åº«ï¼Œé‚£éº¼å°±å¯ä»¥åªæ›´æ”¹é€™äº›æ–¹æ³•çš„å¯¦ä½œå³å¯ã€‚</p>
<p>æ¥ä¸‹ä¾†æ˜¯ Output.php ï¼Œå®ƒçš„é¡åˆ¥ä»£ç¢¼å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
// è¼¸å‡ºé¡åˆ¥
class Output
{
    // è¼¸å‡ºé¡å‹
    private $type;
    // æ¨£ç‰ˆè®Šæ•¸
	private $vars = array ();
    // å»ºæ§‹å‡½å¼
    public function __construct($type)
    {
        $this-&gt;type = in_array($type, array('HTML', 'RSS'))
                    ? $type
                    : 'HTML';
    }
    // è¨­å®šæ¨£ç‰ˆè®Šæ•¸
    // é€™è£¡ä¸ç”¨ __set æ˜¯å› ç‚ºæˆ‘ä¸æƒ³åœ¨ PHP ç¨‹å¼è£¡ç›´æ¥å°ç‰©ä»¶æŒ‡å®šå±¬æ€§
    public function setVar($tpl_var, $value = null)
    {
        if (is_array($tpl_var))
        {
            foreach ($tpl_var as $key =&gt; $val)
            {
                if ($key != '')
                {
                    $this-&gt;vars[$key] = $val;
                }
            }
        }
        else
        {
            if ($tpl_var != '')
            {
                $this-&gt;vars[$tpl_var] = $value;
            }
        }
    }
    // è‡ªå‹•å–å¾—å°æ‡‰çš„æ¨£ç‰ˆè®Šæ•¸
    // åœ¨æ¨£ç‰ˆè£¡ç›´æ¥å–å¾—è®Šæ•¸æœƒæ¯”è¼ƒæ–¹ä¾¿
	private function __get($name)
	{
		return isset($this-&gt;vars[$name]) ? $this-&gt;vars[$name] : NULL;
	}
    // ä¾ç…§é¡å‹è¼¸å‡ºçµæœ
    // è¼¸å‡ºå‰å…ˆç”¨ header å‡½å¼è®“ç€è¦½å™¨å¾—çŸ¥æ­£ç¢ºçš„è¼¸å‡ºå‹æ…‹èˆ‡ç·¨ç¢¼
    public function render($template_file = '')
    {
        if ('HTML' == $this-&gt;type)
        {
            // è¼¸å‡º HTML
            header('Content-Type: text/html; charset=utf-8');
            echo $this-&gt;fetchHTML('templates/' . $template_file);
        }
        else
        {
            // è¼¸å‡º RSS
            header('Content-Type: text/xml; charset=utf-8');
            echo $this-&gt;fetchRSS();
        }
    }
    // æ“·å– HTML çµæœ
    // é€é Output Buffer ä¾†æ“·å–çµæœï¼Œé€™æ¨£æ–¹ä¾¿è¦–è¦ºå¥—ç‰ˆ
    private function fetchHTML($template_file)
    {
        $html = '';
        ob_start();
        include $template_file;
        $html = ob_get_contents();
        ob_end_clean();
        return $html;
    }

    // æ“·å– RSS çµæœ
    // å› ç‚º RSS æ ¼å¼å›ºå®šï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨å­—ä¸²ä¸²æ¥
    private function fetchRSS()
    {
        $xml = '';
        $xml .= '&lt;' . '?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?' . '&gt;' . &quot;\n&quot;;
        $xml .= '&lt;rss version=&quot;2.0&quot;&gt;';
        $xml .= '&lt;channel&gt;';
        $xml .= '&lt;title&gt;TEST&lt;/title&gt;';
        $xml .= '&lt;description&gt;TEST&lt;/description&gt;';
        foreach ($this-&gt;items as $item)
        {
            $xml .= '&lt;item&gt;';
            $xml .= '&lt;title&gt;' . $item['title'] . '&lt;/title&gt;';
            $xml .= '&lt;description&gt;' . $item['body'] . '&lt;/description&gt;';
            $xml .= '&lt;/item&gt;';
        }
        $xml .= '&lt;/channel&gt;';
        $xml .= '&lt;/rss&gt;';
        return $xml;
    }
}

</code></pre><p>æˆ‘è®“ Output è² è²¬ HTML å’Œ RSS å…©ç¨®å‹æ…‹çš„è¼¸å‡ºï¼Œä¸¦åœ¨å»ºç«‹ç‰©ä»¶æ™‚å°±æ±ºå®šè¼¸å‡ºçš„å‹æ…‹ã€‚åœ¨ Output é¡åˆ¥è£¡çš„ HTML è¼¸å‡ºéƒ¨ä»½æ¡ç”¨äº†æ¨£ç‰ˆçš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯å–å¾— HTML æ¨£ç‰ˆä¸¦ä»£å…¥ç›¸é—œçš„è®Šæ•¸ï¼Œæœ€å¾Œæ‰å–å¾—ä»£å…¥å¾Œçš„çµæœã€‚è€Œ HTML æ¨£ç‰ˆè‡ªå·±æœƒæ±ºå®šè¦è¼¸å‡ºä»€éº¼ï¼Œæˆ‘åªéœ€è¦å‘¼å«æ­£ç¢ºçš„æ¨£ç‰ˆå³å¯ã€‚ä¸éå€¼å¾—æ³¨æ„çš„æ˜¯ HTML æ¨£ç‰ˆçš„æ¨£ç‰ˆè®Šæ•¸ï¼Œå› ç‚ºæˆ‘åœ¨ Output é¡åˆ¥è£¡ä½¿ç”¨äº† setVar() æ–¹æ³•ä¾†æŒ‡å®šæ¨£ç‰ˆè®Šæ•¸ï¼Œè€Œä»¥ __get() é€™å€‹é­”è¡“æ–¹æ³•ä¾†å–å¾—è®Šæ•¸å…§å®¹ï¼›å› æ­¤ä»¥åˆ—è¡¨é çš„ HTML æ¨£ç‰ˆ (index.tpl.htm) ç‚ºä¾‹ï¼ŒåŸä¾†çš„ $messages å°±æœƒè®Šæˆ Output ç‰©ä»¶çš„å±¬æ€§ï¼Œå› æ­¤è¦å°‡ $messages æ”¹å¯«ç‚º $this-&gt;messages ï¼š</p>
<pre><code>&lt;?php if (count($this-&gt;messages)): ?&gt;
&lt;?php foreach ($this-&gt;messages as $id =&gt; $message): ?&gt;
&lt;div class=&quot;messageBlock&quot;&gt;
&lt;h2&gt;&lt;?php echo $message['title']; ?&gt;&lt;/h2&gt;
&lt;p&gt;&lt;?php echo nl2br($message['body']); ?&gt;&lt;/p&gt;
&lt;p class=&quot;messageBlockFunctions&quot;&gt;By &lt;?php echo $message['author']; ?&gt;&lt;/p&gt;

</code></pre><p>è€Œ RSS è¼¸å‡ºçš„éƒ¨ä»½ï¼Œæˆ‘å‰‡æ˜¯æŠŠåŸä¾†çš„ç¨‹å¼ç”¨é¡åˆ¥æ–¹æ³•åŒ…è£èµ·ä¾†ï¼Œç•¶ç„¶ $items ä¹Ÿè¦æ”¹æˆ $this-&gt;items ã€‚</p>
<p>ä»¥ä¸Šçš„å‹•ä½œæœƒç”± fetchHTML ã€ fetchRSS åŠ render ä¸‰å€‹æ–¹æ³•ä¾†å¹«æˆ‘å®Œæˆï¼›æˆ‘åªè¦åœ¨å»ºç«‹ç‰©ä»¶æ™‚æŒ‡å®šå¥½è¦è¼¸å‡ºçš„å‹æ…‹ï¼Œ render å‡½å¼å°±æœƒè‡ªè¡Œæ±ºå®šè¦å‘¼å« fetchHTML é‚„æ˜¯ fetchRSS ã€‚</p>
<p>ç„¶å¾Œæ˜¯ Actions.php ï¼Œå®ƒçš„é¡åˆ¥ä»£ç¢¼å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
// å‹•ä½œé¡åˆ¥
class Actions
{
    // å…±ç”¨çš„ç•™è¨€ç‰ˆç‰©ä»¶
    private $guestbook = NULL;
    // ä½¿ç”¨è€…é¸æ“‡çš„å‹•ä½œ
    private $action = 'index';
    // å»ºæ§‹å‡½å¼
    // åˆå§‹åŒ–è¦åŸ·è¡Œçš„å‹•ä½œä»¥åŠç•™è¨€æ¿ç‰©ä»¶
    public function __construct()
    {
        $this-&gt;action = isset($_GET['act'])
                      ? strtolower($_GET['act'])
                      : 'index';
        $this-&gt;guestbook = new GuestBook;
    }
    // åŸ·è¡Œé¸æ“‡çš„å‹•ä½œ
    public final function run()
    {
        $this-&gt;{$this-&gt;action}();
    }
    // é‡æ–°å°å‘
    // å€Ÿç”¨ header å‡½å¼ä¾†å°å‘æŒ‡å®šçš„ç¶²å€
    private function redirectTo($url)
    {
        header('Location: ' . $url);
    }
    // é è¨­çš„åˆ—è¡¨åŠŸèƒ½
    // ç­‰åŒæ–¼åŸä¾†çš„ index.php
    private function index()
    {
        $output = new Output('HTML');
        $output-&gt;setVar('messages', $this-&gt;guestbook-&gt;getAllMessages());
        $output-&gt;render('index.tpl.php');
    }
    // æ–°å¢è¡¨å–®é 
    // ç­‰åŒæ–¼åŸä¾†çš„ add.php
    private function add()
    {
        $output = new Output('HTML');
        $output-&gt;setVar('action', 'doAdd');
        $output-&gt;render('edit.tpl.php');
    }
    // æ–°å¢ç•™è¨€
    // ç­‰åŒæ–¼åŸä¾†çš„ do_add.php
    private function doAdd()
    {
        $title = $_POST['title'];
        $author = $_POST['author'];
        $body = $_POST['body'];
        $this-&gt;guestbook-&gt;addMessage($title, $author, $body);
        $this-&gt;redirectTo('./');
    }
    // è¼¸å‡º RSS
    // ç­‰åŒæ–¼åŸä¾†çš„ rss.php
    private function rss()
    {
        $output = new Output('RSS');
        $output-&gt;setVar('items', $this-&gt;guestbook-&gt;getAllMessages());
        $output-&gt;render();
    }
    // è§£æ§‹å‡½å¼
    public function __destruct()
    {
        $this-&gt;guestbook = NULL;
    }
}

</code></pre><p>åœ¨ Actions é¡åˆ¥è£¡æˆ‘æŠŠåŸä¾†çš„é é¢å…¨éƒ¨æ”¹æˆæ–¹æ³•ï¼Œæ¯å€‹æ–¹æ³•æˆ‘ç¨±å®ƒç‚ºä¸€å€‹ Action ã€‚åœ¨å»ºæ§‹ç¨‹å¼è£¡æœƒè§£æ $_GET[&lsquo;act&rsquo;] è®Šæ•¸æ‰€æ“æœ‰çš„å…§å®¹ç•¶åš Action çš„åç¨±ï¼Œé€™æ¨£å¤–éƒ¨ç¨‹å¼æœƒå°±å¯ä»¥é€éç¶²å€åƒæ•¸ act ä¾†æ±ºå®šè¦å‘¼å«å“ªä¸€å€‹ Action ã€‚ç•¶ç„¶å¦‚æœæ²’æœ‰æŒ‡å®š Action åç¨±çš„è©±ï¼Œé‚£éº¼é è¨­å°±æ˜¯ index (åˆ—è¡¨é ) ã€‚</p>
<p>æ¯å€‹ Action ä¸­æœƒé€éå‘¼å«ç‰©ä»¶çš„æ–¹æ³• (ä¹Ÿå¯èªªæˆå‚³éè¨Šæ¯) ï¼Œä¾†é”æˆåŸä¾†é é¢è£¡çš„æµç¨‹å‹•ä½œã€‚æ›å¥è©±èªª Actions é¡åˆ¥ä¸­çš„æ¯å€‹æ–¹æ³•æœƒå»æŒ‡å° Guestbook è©²æ€éº¼å‹•ä½œï¼Œä¾‹å¦‚å–å¾—æ‰€æœ‰ç•™è¨€æˆ–æ˜¯æ–°å¢ç•™è¨€ï¼›è€Œå¦‚æœéœ€è¦è¼¸å‡ºçš„è©±ï¼Œå°±æœƒé€é Output ç‰©ä»¶çš„ setVar ä¾†æ‹‰å– Guestbook è£¡çš„è³‡æ–™ï¼Œä»¥ç”¢ç”Ÿé©ç•¶æ ¼å¼çš„è¼¸å‡ºã€‚</p>
<p>æ¯”è¼ƒç‰¹åˆ¥çš„æ˜¯åœ¨ Actions é¡åˆ¥è£¡çš„ run é€™å€‹æ–¹æ³•ï¼Œæˆ‘æœƒé€éå®ƒä¾†åŸ·è¡Œ act ç¶²å€åƒæ•¸æ‰€æŒ‡å®šçš„ Action ã€‚æ›å¥è©±èªªï¼Œ run æ–¹æ³•æ˜¯å”¯ä¸€è®“å¤–ç•Œæ“ä½œ Actions ç‰©ä»¶çš„ä»‹é¢ã€‚</p>
<p>ä¸éè¦èƒ½å¤ æ­£å¸¸é‹ä½œé€™äº›æµç¨‹çš„è©±ï¼Œæˆ‘æƒ³æˆ‘é‚„éœ€è¦ä¸€å€‹é€²å…¥é» (Bootstrap) ï¼Œè² è²¬å»ºç«‹ä¸€å€‹ Actions ç‰©ä»¶ä¾†é–‹å§‹åŸ·è¡Œç¨‹å¼ï¼›ç•¶ç„¶é€™å€‹å·¥ä½œå°±è¦äº¤çµ¦ index.php ï¼Œç¨‹å¼ç¢¼æ”¹å¯«å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
// è¼‰å…¥è¨­å®š
require_once 'config.php';
// è‡ªå‹•è¼‰å…¥é¡åˆ¥
function __autoload($class_name)
{
    require_once $class_name . '.php';
}
// åŸ·è¡Œå°æ‡‰çš„å‹•ä½œ
$actions = new Actions;
$actions-&gt;run();

</code></pre><p>æˆ‘ç™¼ç¾æ”¹ç”¨æ–°çš„æ¶æ§‹å¾Œï¼Œä¸ä½† index.php çš„ç¨‹å¼è®Šå¾—ç°¡å–®ä¿è½è¨±å¤šï¼Œè€Œä¸”é€é PHP5 è‡ªå‹•è¼‰å…¥é¡åˆ¥çš„æ©Ÿåˆ¶ï¼Œæˆ‘ä¹Ÿä¸éœ€è¦åœ¨ä¸€é–‹å§‹å°±è¼‰å…¥æ‰€æœ‰çš„é¡åˆ¥æª”æ¡ˆã€‚</p>
<h3 id="åŸ·è¡Œæµç¨‹">åŸ·è¡Œæµç¨‹</h3>
<p><img src="/resources/webmvc/images/run.png" alt="åŸ·è¡Œ"></p>
<p>å…‰çœ‹ä¸Šé¢ç¨‹å¼çš„è©±ï¼Œå…¶å¯¦é‚„æ»¿ä¸å®¹æ˜“æ‡‚å®ƒçš„åŸ·è¡Œæ–¹å¼ï¼Œæˆ‘é‚„æ˜¯ä¸€æ­¥æ­¥ä¾†åˆ†æé€™å€‹æ¶æ§‹çš„æµç¨‹å¥½äº†ã€‚</p>
<p>ä»¥åˆ—è¡¨é çš„æµç¨‹ç‚ºä¾‹ï¼Œå®ƒçš„æ­¥é©Ÿå¦‚ä¸‹ï¼š</p>
<ul>
<li>é¦–å…ˆå¾ index.php é€²å…¥ç¨‹å¼ï¼Œ index.php æœƒå»ºç«‹ä¸€å€‹ Actions ç‰©ä»¶ã€‚</li>
<li>åœ¨å»ºç«‹ Actions ç‰©ä»¶çš„åŒæ™‚ï¼Œå› ç‚ºæ²’æœ‰ act é€™å€‹ç¶²å€åƒæ•¸ï¼Œæ‰€ä»¥ Actions ç‰©ä»¶çš„ action å±¬æ€§æœƒé è¨­ç‚º index ï¼›æ­¤æ™‚ Actions ä¹ŸæœƒåŒæ™‚åœ¨å®ƒçš„å…§éƒ¨å»ºç«‹ä¸€å€‹ Guestbook ç‰©ä»¶ã€‚</li>
<li>Guestbook ç‰©ä»¶å»ºç«‹çš„åŒæ™‚ï¼Œæœƒé å…ˆå¾æª”æ¡ˆä¸­å–å¾—æ‰€æœ‰ç•™è¨€ã€‚</li>
<li>å›åˆ° index.php ï¼Œé€™æ™‚æœƒåŸ·è¡Œ Actions ç‰©ä»¶çš„ run æ–¹æ³•ï¼›åœ¨ run æ–¹æ³•è£¡æœƒåŸ·è¡Œ action å±¬æ€§æ‰€æŒ‡å‘çš„ index æ–¹æ³•ã€‚</li>
<li>åœ¨ Actions ç‰©ä»¶çš„ index æ–¹æ³•è£¡ï¼Œæœƒå»ºç«‹ä¸€å€‹ HTML å‹æ…‹çš„ Output ç‰©ä»¶ï¼Œä¸¦å¾å‰›å‰›å»ºç«‹çš„ Guestbook ç‰©ä»¶è£¡æŠ“å‡ºç•™è¨€ï¼Œå†å¡çµ¦ Output ç‰©ä»¶ã€‚æœ€å¾Œç”¨ Output ç‰©ä»¶çš„ render æ–¹æ³•ä¾†é¡¯ç¤ºæ¨£ç‰ˆã€‚</li>
<li>Output ç‰©ä»¶æœƒä¾ç…§å‰›å‰›çµ¦çš„ç•™è¨€å…§å®¹ï¼Œä¸€ä¸€ä»£æ›æ¨£ç‰ˆè£¡çš„æ¨£ç‰ˆè®Šæ•¸ï¼Œæœ€å¾Œå‘ˆç¾çµæœçµ¦ç€è¦½å™¨ã€‚</li>
</ul>
<p>ç•¶ç„¶åŒæ¨£çš„åˆ†ææ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨æ–°å¢ç•™è¨€é€™å€‹å‹•ä½œä¸Šé¢ã€‚é›–ç„¶é€™æ¨£çš„æµç¨‹çœ‹èµ·ä¾†æœ‰é»å›‰å—¦ï¼Œä¸éæˆ‘æƒ³é€™å°±æ˜¯ç‰©ä»¶äº¤äº’çš„æ–¹å¼ï¼Œé€™å¤§æ¦‚ä¹Ÿæ˜¯åˆå­¸è€…å¾ˆå®¹æ˜“ææ··çš„åœ°æ–¹ã€‚</p>
<p>ä¾ç…§ä»¥ä¸Šçš„æ¶æ§‹ï¼Œå¦‚æœæˆ‘æƒ³åŠ å…¥æ–°å‹•ä½œçš„è©±ï¼Œå°±æœƒè®Šå¾—å¾ˆç›´è¦ºã€‚è€Œä¸”æˆ‘ä¸ç”¨æŠŠç›¸ä¼¼çš„é‚è¼¯æ•£æ”¾åœ¨å„å€‹é é¢è£¡ï¼Œè€Œæ˜¯ç¨ç«‹åœ¨æ¯å€‹å±¤ç´šè£¡ã€‚æ¯å€‹å±¤ç´šå¯ä»¥äº¤ç”±ä¸åŒçš„æˆå“¡å»è¨­è¨ˆæˆ–é–‹ç™¼ï¼Œç”šè‡³å¯ä»¥åŠ å…¥ç¬¬ä¸‰æ–¹çš„å‡½å¼åº«ï¼Œä¸€åˆ‡çœ‹èµ·ä¾†æ˜¯é€™éº¼çš„ç¾å¥½ï¼</p>
<h3 id="é‚„æ˜¯æœ‰ç¼ºé»">é‚„æ˜¯æœ‰ç¼ºé»</h3>
<p>é›–ç„¶æˆ‘è¦ºå¾—ä¸Šé¢çš„æ¶æ§‹å·²ç¶“å¾ˆä¸éŒ¯äº†ï¼Œä½†æ˜¯å¾æˆ‘ä»¥å‰çš„ç¶“é©—ä¾†çœ‹ï¼Œé€™æ¨£çš„å¯¦ä½œæ–¹å¼é‚„æ˜¯æœ‰äº›è¨±çš„ç¼ºé»ã€‚</p>
<!-- raw HTML omitted -->
<p>ã€Œä¸çŸ¥é“è¦å¾å“ªè£¡é–‹å§‹çœ‹æ‡‚ç¨‹å¼ç¢¼ï¼ã€é€™æ˜¯æˆ‘å‰›æ¥è§¸åˆ°æ–°æ¶æ§‹çš„æ„Ÿæƒ³ã€‚å…¶å¯¦æˆ‘åœ¨ä¸€é–‹å§‹ä¸¦æ²’æœ‰é€éä¸Šé¢çš„åˆ†æä¾†æ¨å°å‡ºé€™å€‹æ¶æ§‹ï¼Œè€Œæ˜¯ç”¨è »å¹¹çš„æ–¹å¼åŠ ä¸Šä¼¼æ‡‚éæ‡‚çš„ç†è«–èƒŒæ™¯å»æ­»è®€åˆ¥äººçš„æ¡†æ¶åŸå§‹ç¢¼ã€‚æˆ‘èº«é‚Šæœ‰äº›é–‹ç™¼è€…å¤§å¤šä¹Ÿæ˜¯é‡åˆ°äº†åŒæ¨£çš„å•é¡Œï¼Œä»¥è‡´æ¯å€‹äººæ‰€ç†è§£å‡ºä¾†çš„æ¶æ§‹éƒ½æœ‰äº›è¨±ä¸åŒã€‚</p>
<p>å¦å¤–å› ç‚ºæ–°çš„æ¶æ§‹æ˜¯å»ºæ§‹åœ¨ç‰©ä»¶å°å‘çš„åŸºç¤ä¸Šï¼Œæ‰€ä»¥æˆ‘å¦‚æœæ²’æœ‰ç‰©ä»¶å°å‘çš„ç›¸é—œçŸ¥è­˜æˆ–ç¶“é©—çš„è©±ï¼Œä¹Ÿå¾ˆé›£æƒ³åƒé€™æ¨£çš„æ¶æ§‹æœƒå¦‚ä½•åŸ·è¡Œã€‚æ™‚ä¸‹å¾ˆå¤šæ¡†æ¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¦‚æœåˆå­¸è€…ä¸€é–‹å§‹æ²’æœ‰æ­£ç¢ºçš„è§€å¿µï¼Œç›´æ¥ç…§æœ¬å®£ç§‘åœ°æŠŠç¯„ä¾‹åšå®Œï¼Œå¯èƒ½é‚„æ˜¯æœƒé›£ä»¥ç†è§£æ¡†æ¶æ¡ç”¨é€™ç¨®æ¶æ§‹çš„å¥½è™•ã€‚</p>
<p>è¨»ï¼šæ¶æ§‹èˆ‡æ¡†æ¶åœ¨é€™è£¡æˆ‘èªç‚ºæ˜¯ä¸ä¸€æ¨£çš„æ¦‚å¿µï¼›æ¶æ§‹æ˜¯æŒ‡ç†è«–ä¸Šç¨‹å¼äº¤äº’çš„æ–¹å¼ï¼Œä¸¦å®šç¾©å‡ºæ˜ç¢ºè€Œæœ‰å±¤æ¬¡çš„è¦ç¯„ï¼›è€Œæ¡†æ¶å‰‡æ˜¯å¸¶æœ‰å¯¦ä½œï¼Œä¸”å¯ä»¥é‡è¤‡åˆ©ç”¨çš„ç¨‹å¼æ¶æ§‹ã€‚</p>
<!-- raw HTML omitted -->
<p>å‚³çµ±æ¶æ§‹çš„æ–°å¢ç•™è¨€è¡¨å–®é åŸæœ¬åªè¦æ˜¯ä¸€å€‹éœæ…‹é é¢ï¼Œä½†æ˜¯ç¾åœ¨æ”¹ç”¨æ¨£ç‰ˆæŠ€è¡“è€Œé€ æˆäº†äº›è¨±çš„æ•ˆèƒ½è€—æã€‚ç„¶è€Œé€™é»æˆ‘å€‹äººèªç‚ºæ˜¯æœ‰åˆ©æœ‰å¼Šï¼Œå› ç‚ºæœ‰æ™‚å€™æˆ‘æœƒéœ€è¦çµ±ä¸€åŒ–çš„ç‰ˆå‹ï¼Œä¹Ÿå°±æ˜¯æ‰€è¬‚çš„ Master Page ã€‚åˆ©ç”¨æ¨£ç‰ˆæŠ€è¡“å¯ä»¥é”åˆ°é€™å€‹ç›®æ¨™ï¼Œä¹Ÿæ˜¯éœæ…‹é æ‰€ç„¡æ³•æä¾›çš„ã€‚å› æ­¤ç”¨ä¸€é»é»çš„æ•ˆèƒ½ä¾†æ›å–è¼ƒæœ‰å½ˆæ€§çš„æ¶æ§‹ï¼Œæˆ‘å€‹äººèªç‚ºæ˜¯å€¼å¾—çš„ã€‚</p>
<!-- raw HTML omitted -->
<p>å¾ HTML æ¨£ç‰ˆå’Œ Output é¡åˆ¥çš„ fetchRSS å¯¦ä½œä¸­å¯ä»¥çœ‹å¾—å‡ºä¾†ï¼Œåœ¨è¼¸å‡ºç•™è¨€çš„éƒ¨ä»½æ˜¯ä»¥é™£åˆ—å…ƒç´ çš„æ–¹å¼å»ç²å–ç•™è¨€è£¡çš„å…§å®¹ã€‚é€™è¡¨ç¤ºå…¶å¯¦ Output å’Œ Guestbook é‚„æ˜¯æœ‰å¯†åˆ‡çš„é—œä¿‚ï¼Œä¹Ÿå°±æ˜¯æ‰€è¬‚çš„é«˜è€¦åˆï¼›é«˜è€¦åˆè¡¨ç¤ºå…©å€‹é¡åˆ¥ç„¡æ³•ç¨ç«‹ä½¿ç”¨ï¼Œé€™åœ¨ç‰©ä»¶å°å‘åŸå‰‡è£¡æ˜¯éœ€è¦ç›¡å¯èƒ½é¿å…çš„ã€‚</p>
<p>ä¸éäº‹å¯¦ä¸Šé€™å€‹å•é¡Œä¹Ÿå¿…é ˆè€ƒé‡åˆ°å°ˆæ¡ˆçš„å¤§å°ï¼Œåƒç•™è¨€ç‰ˆé€™ç¨®ç­‰ç´šçš„æ‡‰ç”¨é …ç›®ï¼Œç›®å‰é€™æ¨£çš„è€¦åˆç¨‹åº¦é‚„å¯ä»¥ä»¤äººæ¥å—ã€‚</p>
<!-- raw HTML omitted -->
<p>æ”¹ç”¨æ–°æ¶æ§‹å¾Œï¼Œç¾åœ¨å…¥å£åªæœƒå‰©ä¸‹ index.php ï¼›ä¸éé€™æ¨£ä¸€ä¾†ï¼ŒåŸä¾†çš„ç¶²å€å°±å¾—è·Ÿè‘—æ”¹è®Šã€‚æ›å¥è©±èªªï¼ŒåŸä¾†å¦‚ä¸‹çš„ç¶²å€ï¼š</p>
<pre><code>http://localhost/webmvc/index.php
http://localhost/webmvc/add.php
http://localhost/webmvc/do_add.php
http://localhost/webmvc/rss.php

</code></pre><p>å°±è¦æ”¹ç‚ºï¼š</p>
<pre><code>http://localhost/webmvc/index.php (ä¸è®Š)
http://localhost/webmvc/index.php?act=add
http://localhost/webmvc/index.php?act=doAdd
http://localhost/webmvc/index.php?act=rss

</code></pre><p>æœ‰ä¸€äº›æ–‡ç« æŒ‡å‡ºå¸¶æœ‰åƒæ•¸çš„ç¶²å€ä¸åˆ©äººé¡è¨˜æ†¶ï¼Œè€Œä¸”åœ¨ SEO (æœå°‹å¼•æ“æœ€ä½³åŒ–) ä¸Šä¹Ÿæœƒæœ‰ä¸è‰¯çš„å½±éŸ¿ã€‚ç•¶ç„¶æˆ‘æƒ³å¦‚æœè¦æ”¹å–„é–‹ç™¼æ•ˆç‡çš„è©±ï¼Œå°±å‹¢å¿…è¦æœ‰ä¸€é»çŠ§ç‰²ï¼›ä¸éé‚„å¥½é€™æ–¹é¢çš„å›°æ“¾é‚„èƒ½é€éç¶²å€é‡å¯«æŠ€è¡“ (URL Rewriting) ä¾†å½Œè£œï¼Œå› æ­¤ä¸ç®—æ˜¯å¤ªåš´é‡çš„å•é¡Œã€‚</p>
<!-- raw HTML omitted -->
<p>æ¡ç”¨æ–°æ¶æ§‹ä¹‹å¾Œçš„ç•™è¨€ç‰ˆï¼Œæˆ‘æƒ³æ‡‰è©²å·²ç¶“æ¯”åŸä¾†çš„æ¶æ§‹æ›´å…·æœ‰å½ˆæ€§ï¼Œä¸éå¦‚æœä»Šå¤©æˆ‘æœ‰å¤šå€‹å°ˆæ¡ˆéƒ½æƒ³ä½¿ç”¨åŒæ¨£çš„æ¶æ§‹æ™‚è©²æ€éº¼è¾¦å‘¢ï¼Ÿé›£é“è£¡é¢çš„ç¨‹å¼ç¢¼æˆ‘é‚„å¾—å†é‡å¯«ä¸€æ¬¡å—ï¼Ÿæˆ–æ˜¯è¤‡è£½ç¾åœ¨é€™å€‹ç¨‹å¼ç„¶å¾Œåšä¿®æ”¹å‘¢ï¼Ÿ</p>
<p>æˆ‘æƒ³ç­”æ¡ˆæ‡‰è©²æ˜¯å¦å®šçš„ï¼Œå› ç‚ºæ‰€è¬‚çš„æ¡†æ¶ä¸æ˜¯æŠŠåŸä¾†çš„å·²ç¶“ç©©å®šçš„åŠŸèƒ½è®Šæˆå¦ä¸€å€‹å°ˆæ¡ˆçš„åƒåœ¾ã€‚åœ¨æˆ‘çš„ç¶“é©—è£¡é™¤äº†åŒæ€§è³ªçš„æ´»å‹•åªéœ€è¦æ›´æ”¹æ¨£ç‰ˆä»¥å¤–ï¼Œé®®å°‘æœ‰å…©å€‹å°ˆæ¡ˆçš„åŠŸèƒ½æ˜¯æœƒé•·å¾—ä¸€æ¨¡ä¸€æ¨£ï¼›æ›å¥è©±èªªï¼Œå¦‚æœåªæ˜¯ç”¨è¤‡è£½ä¸¦ä¿®æ”¹ç¾æœ‰ç¨‹å¼çš„æ–¹å¼ä¾†é–‹ç™¼ï¼Œé‚£éº¼å¯èƒ½å°±æœ‰ç¢°åˆ°ç¨‹å¼ç‚¸å½ˆçš„å±éšªæ€§ã€‚æ¸›å°‘ç”šè‡³å»é™¤åŸæœ‰å®¢è£½åŒ–çš„åŠŸèƒ½ï¼Œä¿ç•™åŸºæœ¬æ‰€éœ€çš„è¦ç´ ï¼Œæˆ‘æƒ³é€™æ¨£çš„æ¡†æ¶æ‰èƒ½å¤ æ“æœ‰æœ€å¤§çš„å½ˆæ€§ã€‚</p>
<h2 id="å»ºç«‹åŸºæœ¬-mvc-æ¡†æ¶">å»ºç«‹åŸºæœ¬ MVC æ¡†æ¶</h2>
<p>å¾ä¸Šé¢æ”¹è‰¯éçš„ç•™è¨€ç‰ˆä¾†çœ‹ï¼Œä¼¼ä¹æœ‰äº›åŠŸèƒ½æ˜¯å¯ä»¥è®“å¾€å¾Œçš„å°ˆæ¡ˆé‡è¤‡ä½¿ç”¨çš„ï¼›ä½†æ˜¯é€™äº›é‡è¤‡çš„éƒ¨ä»½ï¼Œä¾èˆŠåƒé›œåœ¨æ¯å€‹ç¨ç«‹çš„é¡åˆ¥è£¡ã€‚æ‰€ä»¥æˆ‘æ±ºå®šæŠŠé€™äº›åŠŸèƒ½æŠ½é›¢å‡ºä¾†ï¼Œç¨ç«‹æˆä¸€å€‹ç°¡æ˜“çš„æ¡†æ¶ï¼›ä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘æƒ³æˆ‘æœ‰å¿…è¦å…ˆç‚ºè‡ªå·±é‡æ¸…å‰é¢æ¶æ§‹åœ¨ MVC ä¸Šçš„é—œä¿‚ã€‚</p>
<p>åœ¨ã€Œæ·±å…¥æ·ºå‡ºè¨­è¨ˆæ¨¡å¼ã€è£¡ï¼Œå° MVC ä¸‰å€‹è§’è‰²çš„æè¿°å¦‚ä¸‹ï¼š</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted -->Model<!-- raw HTML omitted --> - æŒæœ‰è³‡æ–™ã€ç‹€æ…‹ã€ç¨‹å¼é‚è¼¯ï¼Œä¸¦æä¾›ä»‹é¢ä¾›äººå–å¾—è³‡æ–™èˆ‡ç‹€æ…‹ã€‚</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted -->View<!-- raw HTML omitted --> - ç”¨ä¾†å‘ˆç¾ Model ä¸­çš„è³‡æ–™èˆ‡ç‹€æ…‹ã€‚</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted -->Controller<!-- raw HTML omitted --> - å–å¾—ä½¿ç”¨è€…çš„è¼¸å…¥å¾Œï¼Œä¸¦è§£è®€æ­¤è¼¸å…¥ä»¥è½‰æ›æˆ Model å°æ‡‰çš„å‹•ä½œã€‚</p>
<!-- raw HTML omitted -->
<p>å¾ˆæ¸…æ¥šåœ°ï¼Œæˆ‘ç™¼ç¾å‰é¢çš„æ¶æ§‹å·²ç¶“å‘ˆç¾å‡º MVC çš„åŸºæœ¬é››å½¢äº†ï¼Œä¹Ÿå°±æ˜¯ Guestbook ã€ Output åŠ Actions å…¶å¯¦å¯ä»¥ä¸€ä¸€å°æ‡‰åˆ° Model ã€ View å’Œ Controller ã€‚</p>
<p><img src="/resources/webmvc/images/pre_to_mvc.png" alt="è½‰æ›æˆMVC"></p>
<p>ç‚ºä»€éº¼ Guestbook æ˜¯ä½æ–¼ Model çš„å±¤ç´šå‘¢ï¼Ÿå› ç‚ºæˆ‘æƒ³ Guestbook é€™å€‹é¡åˆ¥ä¸»è¦æ˜¯åœ¨æ“ä½œç•™è¨€è¨Šæ¯çš„å­˜å–ï¼Œæ›å¥è©±èªªå®ƒæŒæ§äº†è³‡æ–™èˆ‡ç‹€æ…‹ã€‚è€Œä¸” getAllMessages å’Œ addMessage å°±æ˜¯ Guestbook é¡åˆ¥å°å¤–çš„ä»‹é¢ï¼Œæ‰€ä»¥å®ƒå°±éå¸¸ç¬¦åˆ Model çš„æè¿°ã€‚</p>
<p>è€Œåœ¨ View çš„å±¤ç´šä¾†èªªï¼Œä»”ç´°ç ”ç©¶æ¡Œé¢æ‡‰ç”¨è»Ÿé«”çš„ MVC å¯¦ä½œå°±å¯ä»¥ç™¼ç¾ï¼Œå¤§éƒ¨ä»½ç¨‹å¼æ˜¯åˆ©ç”¨è¦–è¦ºå…ƒä»¶ä¾†çµ„åˆå‡ºè®“ä½¿ç”¨è€…æ“ä½œçš„ç•«é¢ã€‚åœ¨ Output é¡åˆ¥è£¡é›–ç„¶æˆ‘æ˜¯ä½¿ç”¨ Template çš„ä½œæ³•ï¼Œä¸éé€™å¾ˆé©åˆ Web å¹³å°çš„è¨­è¨ˆèˆ‡å¯¦ä½œã€‚å› ç‚ºè¦èƒ½å¤ å®Œå…¨ä»¥ç‰©ä»¶ä¾†å»ºæ§‹ç•«é¢ï¼Œå° HTML ä¾†èªªæ˜¯å¾ˆä¸æ–¹ä¾¿ä¹Ÿéå¸¸ä¸ç›´è¦ºï¼›è€Œä¸”å¦‚æœè¦èƒ½å¤ å¿«é€Ÿå¥—ç”¨è¦–è¦ºè¨­è¨ˆäººå“¡æ‰€è£½ä½œå‡ºä¾†çš„ç¯„æœ¬ï¼Œæ¨£ç‰ˆå¼•æ“å°±æœƒæ˜¯ä¸€å€‹æ¯”è¼ƒå¥½çš„è§£æ±ºæ–¹æ¡ˆã€‚</p>
<p>å°æ‡‰åˆ° Controller å±¤ç´šçš„ Actions é¡åˆ¥ï¼Œæ‰€è¬‚çš„ä½¿ç”¨è€…è¼¸å…¥å°±å¯ä»¥çœ‹æˆæ˜¯ act é€™å€‹ç¶²å€åƒæ•¸æ‰€ä»£è¡¨çš„å‹•ä½œåç¨±ã€‚åœ¨ Actions ç‰©ä»¶è£¡æœƒè‡ªå‹•è½‰æ›é€™å€‹åƒæ•¸ï¼Œä»¥å‘¼å«æ­£ç¢ºçš„å‹•ä½œä¾†åŸ·è¡Œã€‚è€Œ Controller ä¹Ÿå¿…é ˆæ˜ç¢ºåœ°æŒ‡ç¤º Model èˆ‡ View å…©è€…é–“çš„äº’å‹•æ–¹å¼ï¼Œè€Œåœ¨ Actions é¡åˆ¥è£¡çš„ç¢ºä¹Ÿæ˜¯é€™éº¼è™•ç†çš„ã€‚</p>
<p>çŸ¥é“äº†é€™å±¤é—œä¿‚ä¹‹å¾Œï¼Œæˆ‘å°±å¯ä»¥æƒ³æƒ³å“ªäº›éƒ¨ä»½æ˜¯å¯ä»¥æç…‰å‡ºä¾†åè¦†åˆ©ç”¨çš„ã€‚</p>
<h3 id="model">Model</h3>
<p>å¾ Guestbook çš„ç¨‹å¼ä¾†çœ‹ï¼Œäº‹å¯¦ä¸Šæˆ‘å¯ä»¥å®Œå…¨æŠŠæª”æ¡ˆæ“ä½œå¾è£¡é¢ç¨ç«‹å‡ºä¾†ï¼Œç„¶å¾Œåªå®šç¾© Guestbook çš„æŠ½è±¡åŒ–æ“ä½œæ–¹å¼ã€‚é€™æ¨£ä¸€ä¾†æˆ‘å¯ä»¥ç›´æ¥ä»¥åƒæ•¸å®šç¾©æˆ‘æƒ³ç”¨çš„å„²å­˜æ–¹å¼ï¼Œè®“å„²å­˜ç”¨çš„é¡åˆ¥ä¹Ÿè®Šæˆå…±ç”¨çš„å·¥å…·ä¹‹ä¸€ã€‚</p>
<p>å¯æ˜¯åœ¨é€™è£¡æˆ‘æ±ºå®šä¸é€™éº¼åšã€‚</p>
<p>ç‚ºä»€éº¼å‘¢ï¼Ÿé›–ç„¶æˆ‘å¾ˆæ˜ç™½æŠ½è±¡åŒ–çš„é‡è¦æ€§ï¼Œä¸éä¹Ÿä¸èƒ½ä»»ä½•äº‹ç‰©ä»¶åšæŠ½è±¡åŒ–ï¼Œå› ç‚ºé€™æ¨£æœƒé™·å…¥ã€Œéåº¦è¨­è¨ˆã€çš„æ³¥æ·–ä¸­ã€‚åœ¨ Guestbook é€™ç¨®ç­‰ç´šçš„æ‡‰ç”¨é …ç›®è£¡ï¼Œæˆ‘é¢å°çš„æ˜¯å¾ˆç°¡å–®çš„æª”æ¡ˆæ“ä½œï¼Œå°±ç®—æœ‰æ›´å‹•ä¹Ÿä¸è‡³æ–¼å½±éŸ¿å…¶ä»–ç¨‹å¼ã€‚æ›å¥è©±èªªï¼Œå¦‚æœä»Šå¤©çœŸçš„æœ‰éœ€è¦åˆ‡æ›æ­é…çš„å„²å­˜æ–¹å¼æ™‚ï¼Œæˆ‘é‚„æ˜¯å¯ä»¥é€éé‡æ§‹ Guestbook ä¾†å› æ‡‰ç’°å¢ƒä¸Šçš„è®ŠåŒ–ã€‚</p>
<p>ç•¶ç„¶å¦‚æœä»Šå¤©é¢å°çš„æ˜¯å¤§å‹çš„æ‡‰ç”¨é …ç›®ï¼Œè€Œä¸”å·²ç¶“ç¢ºå®šæœ‰é‡è¤‡æˆ–ç›¸ä¼¼çš„è®ŠåŒ–æ™‚ï¼Œé‚£éº¼ä¸€é–‹å§‹å°±ä½¿ç”¨æŠ½è±¡åŒ–çš„è¨­è¨ˆå°±æœƒæ˜¯æ¯”è¼ƒå¥½çš„é¸æ“‡ã€‚ç¸½ä¹‹ï¼Œåœ¨è¨­è¨ˆæ™‚æœŸå°±å¿…é ˆè¦è€ƒé‡å°ˆæ¡ˆçš„å¤§å°èˆ‡è®ŠåŒ–ï¼Œä»¥æ¡å–ä¸åŒçš„æ–¹å¼ä¾†å› æ‡‰ã€‚</p>
<p>å› æ­¤é€™è£¡æˆ‘å°‡ä¿ç•™ Guestbook é¡åˆ¥çš„å¯¦ä½œæ–¹å¼ï¼Œå¦å¤–ç•™è¨€é …ç›®æ¡ç”¨é™£åˆ—è¼¸å‡ºçš„æ–¹æ³•ä¹Ÿå°‡åŠ ä»¥ä¿ç•™ã€‚</p>
<h3 id="view">View</h3>
<p>ä¸åŒæ–¼ Guestbook ï¼Œæˆ‘ç™¼ç¾ Output åˆ†æˆäº† HTML å’Œ RSS å…©ç¨®è¼¸å‡ºæ ¼å¼ï¼›è€Œä¸”åœ¨æœªä¾†å¯èƒ½æœƒå¥—ç”¨ AJAX çš„ç‹€æ³ä¸‹ï¼Œè³‡æ–™æ ¼å¼ä¹Ÿå¯èƒ½åŠ å…¥ JSON ã€‚å› æ­¤ Output å°±éœ€è¦æŠ½è±¡åŒ–ï¼Œå°‡å…±ç”¨çš„éƒ¨ä»½æç…‰å‡ºä¾†ï¼Œæ¶æ§‹åœ–å¦‚ä¸‹ï¼š</p>
<p><img src="/resources/webmvc/images/to_view.png" alt="è½‰æ›æˆ View"></p>
<!-- raw HTML omitted -->
<p>é‚£äº›éƒ¨ä»½éœ€è¦è¢«æŠ½é›¢å‡ºä¾†å‘¢ï¼Ÿå¾åŸä¾†çš„ Output é¡åˆ¥ä¸­ï¼Œæˆ‘ç™¼ç¾ setVar å’Œ __get é€™å…©å€‹æ–¹æ³•å’Œè¼¸å‡ºæ ¼å¼ç„¡é—œï¼Œå®ƒå€‘çš„å¯¦ä½œæˆ‘æƒ³å°±å¯ä»¥æ¨åˆ°ä¸Šä¸€å±¤å»ã€‚è‡³æ–¼ render æ–¹æ³•å‰‡æœƒå› ç‚ºè¼¸å‡ºæ ¼å¼è€Œæœ‰ä¸åŒçš„å¯¦ä½œï¼Œé‚£æˆ‘å°±æŠŠå®ƒå€‘è®ŠæˆæŠ½è±¡æ–¹æ³•ï¼Œä¸¦ä¸”æŠŠå¯¦ä½œæ”¾åœ¨å­é¡åˆ¥è£¡ã€‚æ¯”è¼ƒç‰¹åˆ¥çš„æ˜¯ fetchHTML å’Œ fetchRSS å…©å€‹æ–¹æ³•ï¼Œå› ç‚ºåˆ°æ™‚å€™æœƒæœ‰å­é¡åˆ¥ä¾†åŠ ä»¥å€åˆ†å¯¦ä½œæ–¹å¼ï¼›æ‰€ä»¥é€™é‚Šæˆ‘å°±æ”¹ç”¨ fetch é€™å€‹æŠ½è±¡åç¨±ï¼Œè®“ render æ–¹æ³•ä¸å¿…ç‚ºäº†è¼¸å‡ºå‹æ…‹è€Œå€‹åˆ¥å‘¼å«ã€‚</p>
<p>è‡³æ–¼æŠ½å‡ºä¾†çš„éƒ¨ä»½ï¼Œæˆ‘æƒ³æˆ‘å°±ç”¨è¼ƒæ­£å¼çš„åç¨± View ä¾†åšç‚ºé¡åˆ¥åã€‚æ‰€ä»¥ View.php ç¨‹å¼å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
// æŠ½è±¡è¦–åœ–é¡åˆ¥
abstract class View
{
    // æ¨£ç‰ˆè®Šæ•¸
    protected $vars = array ();
    // è¨­å®šæ¨£ç‰ˆè®Šæ•¸
    public function setVar($tpl_var, $value = null)
    {
        if (is_array($tpl_var))
        {
            foreach ($tpl_var as $key =&gt; $val)
            {
                if ($key != '')
                {
                    $this-&gt;vars[$key] = $val;
                }
            }
        }
        else
        {
            if ($tpl_var != '')
            {
                $this-&gt;vars[$tpl_var] = $value;
            }
        }
    }
    // è‡ªå‹•å–å¾—å°æ‡‰çš„æ¨£ç‰ˆè®Šæ•¸
    private function __get($name)
    {
        return isset($this-&gt;vars[$name]) ? $this-&gt;vars[$name] : NULL;
    }
    // æŠ½è±¡ï¼šæ“·å–çµæœ
    public abstract function fetch();
    // æŠ½è±¡ï¼šè¼¸å‡ºçµæœ
    public abstract function render();
}

</code></pre><p>æ—¢ç„¶å·²ç¶“å°‡å…±ç”¨çš„å‡½å¼æŠ½é›¢å‡ºä¾†äº†ï¼Œå­é¡åˆ¥å°±å¯ä»¥ç”¨ç¹¼æ‰¿çš„æ–¹å¼ä¾†å¯¦ä½œã€‚</p>
<!-- raw HTML omitted -->
<p>é¦–å…ˆæ˜¯ç”¨ä¾†è¼¸å‡º HTML æ ¼å¼å…§å®¹çš„å­é¡åˆ¥ï¼Œé€™è£¡æˆ‘æŠŠåŸä¾†åœ¨ Output é¡åˆ¥ä¸­å±¬æ–¼ HTML çš„éƒ¨ä»½æ”¾åˆ°å®ƒèº«ä¸Šã€‚è€Œé€™å€‹å­é¡åˆ¥å› ç‚ºæ˜¯ View çš„ä¸€ç¨®ï¼Œåªä¸éè¼¸å‡ºæ ¼å¼ç‚º HTML ï¼Œæ‰€ä»¥å®ƒçš„åç¨±å°±ä»¥ HtmlView ä¾†è¡¨ç¤ºã€‚ä»¥ä¸‹å°±æ˜¯ HtmlView.php çš„å…§å®¹ï¼š</p>
<pre><code>&lt;?php
// è¼¸å‡º HTML æ ¼å¼å…§å®¹
class HtmlView extends View
{
    // å–å¾—æ¨£ç‰ˆä¸¦è§£æ
    public function fetch()
    {
        $args = func_get_args();
        $template_filename = $args[0];
        $html = '';
        ob_start();
        include 'templates/' . $template_filename;
        $html = ob_get_contents();
        ob_end_clean();
        return $html;
    }
    // è¼¸å‡º
    public function render()
    {
        // å› ç‚º View é¡åˆ¥çš„ render å‡½å¼æ²’æœ‰åƒæ•¸
        // æ‰€ä»¥ render è¦è‡ªè¡Œå–å¾—
        $args = func_get_args();
        $template_filename = $args[0];
        header('Content-Type: text/html; charset=utf-8');
        echo $this-&gt;fetch($template_filename);
    }
}

</code></pre><p>è€Œ RSS è¼¸å‡ºæ ¼å¼ä¹Ÿæ¯”ç…§è¾¦ç†ï¼š</p>
<pre><code>&lt;?php
// è¼¸å‡º RSS æ ¼å¼å…§å®¹
class RssView extends View
{

	// è½‰æ›æˆ RSS å…§å®¹
    public function fetch()
    {
        $xml = '';
        $xml .= '&lt;' . '?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?' . '&gt;' . &quot;\n&quot;;
        $xml .= '&lt;rss version=&quot;2.0&quot;&gt;';
        $xml .= '&lt;channel&gt;';
        $xml .= '&lt;title&gt;TEST&lt;/title&gt;';
        $xml .= '&lt;description&gt;TEST&lt;/description&gt;';
        foreach ($this-&gt;items as $item)
        {
            $xml .= '&lt;item&gt;';
            $xml .= '&lt;title&gt;' . $item['title'] . '&lt;/title&gt;';
            $xml .= '&lt;description&gt;' . $item['body'] . '&lt;/description&gt;';
            $xml .= '&lt;/item&gt;';
        }
        $xml .= '&lt;/channel&gt;';
        $xml .= '&lt;/rss&gt;';
        return $xml;
    }
    // è¼¸å‡º
    public function render()
    {
        header('Content-Type: text/xml; charset=utf-8');
        echo $this-&gt;fetch();
    }
}

</code></pre><p>ç¾åœ¨ View çš„éƒ¨ä»½å·²ç¶“å®Œæˆäº†æŠ½è±¡åŒ–ï¼Œæœªä¾†å¦‚æœè¦åŠ å…¥æ–°çš„è¼¸å‡ºæ ¼å¼ï¼Œæˆ‘åªéœ€è¦ç¹¼æ‰¿ View é€™å€‹æŠ½è±¡é¡åˆ¥ï¼Œå†å¯¦ä½œ fetch å’Œ render å…©å€‹æ–¹æ³•å³å¯ã€‚</p>
<h3 id="controller">Controller</h3>
<p>Actions æœ¬èº«ä¸¦æ²’æœ‰å°æ‡‰åˆ°å¤šç¨®æ ¼å¼çš„å•é¡Œï¼Œä¸éå®ƒé‚„æ˜¯æœ‰äº›éƒ¨ä»½æ˜¯ä¸€äº›æ‡‰ç”¨ç¨‹å¼å¸¸æœƒéœ€è¦ç”¨åˆ°çš„ï¼›æ›å¥è©±èªªï¼Œæˆ‘å¯ä»¥æŠŠèˆ‡ç•™è¨€ç‰ˆç„¡é—œçš„éƒ¨ä»½æŠ½é›¢å‡ºä¾†ã€‚</p>
<!-- raw HTML omitted -->
<p>ä»”ç´°è§€å¯Ÿ Actions é¡åˆ¥çš„å¯¦ä½œï¼Œæˆ‘ç™¼ç¾å¯ä»¥æŠ½é›¢çš„éƒ¨ä»½æœ‰ run ã€ redirectTo å…©å€‹æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘æ±ºå®šæŠŠé€™äº›éƒ¨ä»½æŠ½é›¢åˆ°æ–°çš„ Controller é¡åˆ¥è£¡ã€‚å¦å¤–æˆ‘ä¹Ÿå¸Œæœ›é è¨­çš„ index æ–¹æ³• (å‹•ä½œ) ä¸€å®šè¦è¢«å­é¡åˆ¥å¯¦ä½œï¼Œæ‰€ä»¥æˆ‘ä¹ŸæŠŠå®ƒè®ŠæˆæŠ½è±¡é¡åˆ¥è£¡çš„æŠ½è±¡æ–¹æ³•ã€‚</p>
<pre><code>&lt;?php
// æŠ½è±¡æ§åˆ¶é¡åˆ¥
abstract class Controller
{
    // å‹•ä½œåç¨±
    protected $action = '';
    // æŠ½è±¡ï¼šé è¨­å‹•ä½œ
    protected abstract function index();
    // åŸ·è¡Œå‹•ä½œ
    public final function run()
    {
        $this-&gt;{$this-&gt;action}();
    }
    // é é¢é‡å°å‘
    protected function redirectTo($url)
    {
        header('Location: ' . $url);
    }
}

</code></pre><p>ç„¶è€Œåœ¨ Actions é¡åˆ¥çš„å»ºæ§‹å¼ä¸­æœ‰æ®µç¨‹å¼å¾ˆç‰¹åˆ¥ï¼Œé‚£å°±æ˜¯è§£æ $_GET[&lsquo;act&rsquo;] çš„éƒ¨ä»½ï¼Œå®ƒä¼¼ä¹ä¹Ÿæ˜¯é–‹ç™¼æ–°çš„æ‡‰ç”¨ç¨‹å¼æœƒä½¿ç”¨åˆ°çš„åŠŸèƒ½ã€‚å¯æ˜¯å…ˆå‰æˆ‘è‡ªå·±èªªéä½¿ç”¨ GET åƒæ•¸çš„æ–¹å¼ï¼Œæœƒè®“ç¶²å€ä¸å®¹æ˜“è®“ç€è¦½è€…è¨˜æ†¶ï¼Œå› æ­¤åœ¨æ–°å°ˆæ¡ˆè£¡æˆ‘æƒ³ä½¿ç”¨ç¶²å€é‡å¯«çš„æŠ€è¡“ã€‚ä½†é€™åˆæœ‰å¦ä¸€å€‹å•é¡Œï¼Œå› ç‚ºç¾å­˜çš„é€™å€‹ç•™è¨€æ¿å°ˆæ¡ˆå·²ç¶“æä¾›ç€è¦½è€…å›ºå®šçš„ RSS ä½å€ï¼Œæ‰€ä»¥æƒ³æ›´å‹•åŸæœ‰è§£æ $_GET[&lsquo;act&rsquo;] çš„éƒ¨ä»½ä¹Ÿè®Šå¾—ä¸å¯è¡Œã€‚</p>
<p>é‚£éº¼æœ‰æ²’æœ‰ä»€éº¼æ–¹æ³•å¯ä»¥è®“ä¸åŒçš„å°ˆæ¡ˆä½¿ç”¨ä¸åŒçš„å‹•ä½œè§£æï¼Ÿè€Œä¸”é‚„èƒ½ä¸æ›´å‹•åˆ°æŠ½è±¡çš„ Controller é¡åˆ¥å‘¢ï¼Ÿ</p>
<p>è¨»ï¼šåœ¨ IIS ä¸Šï¼Œç¶²å€é‡å¯«æŠ€è¡“ä¹Ÿå¿…é ˆä¾è³´å…¶ä»– ISAPI æ“´å±•æ‰èƒ½å¯¦ç¾ã€‚æ‰€ä»¥é è¨­çš„æƒ…æ³ä¸‹ï¼Œé‚„æ˜¯å¾—é  GET åƒæ•¸ä¾†æä¾› action çš„åç¨±ã€‚</p>
<!-- raw HTML omitted -->
<p>å¦‚æœèªªæˆ‘æŠŠè§£æç¶²å€çš„å‹•ä½œæŠ½é›¢åˆ°ä¸€å€‹ç¨ç«‹çš„é¡åˆ¥è£¡ï¼Œè®“ Controller èƒ½ä»¥é€éæ›´æ›é¡åˆ¥çš„æ–¹å¼ä¾†å› æ‡‰ä¸åŒå°ˆæ¡ˆçš„ç¶²å€æ¨£å¼ï¼Œé€™æ¨£ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿè·¯ç”±å™¨å°±æ˜¯åœ¨é€™æ¨£çš„æƒ³æ³•ä¸‹ï¼Œæ‰€ç”¢ç”Ÿå‡ºä¾†çš„é¡åˆ¥ã€‚è·¯ç”±å™¨å¯ä»¥è®“ç€è¦½è€…è¼¸å…¥ä¸åŒç¶²å€æ™‚ï¼Œå”åŠ© Controller åˆ¤æ–·è©²èª¿ç”¨å“ªå€‹å‹•ä½œä¾†åŸ·è¡Œã€‚</p>
<p>æœ‰äº†é€™æ¨£çš„æƒ³æ³•å¾Œï¼Œæˆ‘ä¾¿å°‡è§£æ GET åƒæ•¸çš„ç¨‹å¼ç¢¼ç§»åˆ°äº† Router é¡åˆ¥ï¼š</p>
<pre><code>&lt;?php
// é è¨­çš„è·¯ç”±å™¨
class Router
{
    // é è¨­çš„å‹•ä½œ
    protected $action = 'index';
    // åœ¨å»ºæ§‹å‡½å¼ä¸­è§£æ GET è®Šæ•¸
    public function __construct()
    {
        $this-&gt;action = isset($_GET['act']) ? strtolower($_GET['act']) : 'index';
    }
    // å–å¾—è§£æå¾Œçš„å‹•ä½œåç¨±
    public function getAction()
    {
        return $this-&gt;action;
    }
}

</code></pre><p>ç„¶å¾Œåœ¨ Controller é¡åˆ¥åŠ å…¥ä»¥ä¸‹éƒ¨ä»½ï¼š</p>
<pre><code>&lt;?php
// æŠ½è±¡æ§åˆ¶é¡åˆ¥
abstract class Controller
{
    // ç•¥ ...
    // è·¯ç”±å™¨
    protected $router = NULL;
    // è¨­å®šè·¯ç”±å™¨
    public function setRouter(Router $router)
    {
        if (method_exists($this, ($action = $router-&gt;getAction())))
        {
            $this-&gt;action = $action;
        }
    }
    // ç•¥...
}

</code></pre><p>é€™æ¨£ä¸€ä¾†ï¼Œæˆ‘å°±å¯ä»¥é€éæ›´æ› Router çš„å¯¦ä½œï¼Œä¾†é”åˆ°è§£æä¸åŒç¶²å€æ¨£å¼çš„ç›®çš„ã€‚</p>
<!-- raw HTML omitted -->
<p>æœ‰äº†æŠ½è±¡çš„ Controller é¡åˆ¥ï¼Œç¾åœ¨æˆ‘å°±éœ€è¦æŠŠç•™è¨€æ¿åŸä¾†å‹•ä½œçš„éƒ¨ä»½åˆ†é›¢å‡ºä¾†ï¼Œä¸€èˆ¬æ¡†æ¶éƒ½æ˜¯ç”¨ IndexController ä¾†ç•¶åšé è¨­çš„åç¨±ï¼Œå®ƒæ˜¯ç¹¼æ‰¿è‡ª Controller çš„é¡åˆ¥ï¼š</p>
<pre><code>&lt;?php
// è‡ªè¨‚çš„ Controller
class IndexController extends Controller
{
    // å…±ç”¨çš„ç•™è¨€æ¿ç‰©ä»¶
    private $guestbook = NULL;
    // å»ºæ§‹å‡½å¼
    public function __construct()
    {
        $this-&gt;guestbook = new GuestBook;
    }
    // é è¨­çš„åˆ—è¡¨åŠŸèƒ½
    protected function index()
    {
        $view = new HtmlView;
        $view-&gt;setVar('messages', $this-&gt;guestbook-&gt;getAllMessages());
        $view-&gt;render('index.tpl.php');
    }
    // æ–°å¢è¡¨å–®é 
    protected function add()
    {
        $view = new HtmlView;
        $view-&gt;setVar('action', 'doAdd');
        $view-&gt;render('edit.tpl.php');
    }
    // æ–°å¢ç•™è¨€
    protected function doAdd()
    {
        $title = $_POST['title'];
        $author = $_POST['author'];
        $body = $_POST['body'];

        $this-&gt;guestbook-&gt;addMessage($title, $author, $body);
        $this-&gt;redirectTo('./');
    }
    // è¼¸å‡º RSS
    protected function rss()
    {
        $view = new RssView;
        $view-&gt;setVar('items', $this-&gt;guestbook-&gt;getAllMessages());
        $view-&gt;render();
    }
    // è§£æ§‹å‡½å¼
    public function __destruct()
    {
        $this-&gt;guestbook = NULL;
    }
}

</code></pre><p>å¾ä¸Šé¢çš„ç¨‹å¼å¯ä»¥çœ‹åˆ°ï¼ŒåŸä¾†çš„ Output é¡åˆ¥å·²ç¶“è¢«ä»£æ›æˆ HtmlView å’Œ RssView å…©å€‹é¡åˆ¥äº†ï¼›è€Œé€™å…©å€‹é¡åˆ¥ç”¨æ³•å’ŒåŸä¾†çš„ Output é¡åˆ¥ç›¸å·®ç„¡å¹¾ï¼Œä½†æ˜¯æ“´å……æ€§ä¸Šå»å¥½æ›´å¤šã€‚</p>
<!-- raw HTML omitted -->
<p>ç¾åœ¨æˆ‘å·²ç¶“æœ‰äº†å¹¾å€‹å…±ç”¨çš„æŠ½è±¡é¡åˆ¥ï¼Œé‚„æœ‰ç¹¼æ‰¿è‡ªå®ƒå€‘çš„å­é¡åˆ¥å¯¦ä½œï¼Œä½†æ˜¯æˆ‘ä¸å¸Œæœ›æŠŠå®ƒå€‘éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œé€™æ¨£çš„ç¶²ç«™æ¶æ§‹çœ‹èµ·ä¾†éå¸¸æ·©äº‚ã€‚è€Œä¸”å¦‚æœå¾Œé¢éœ€è¦å»ºç«‹ä¸€å€‹æ–°å°ˆæ¡ˆæ™‚ï¼Œæˆ‘å¸Œæœ›èƒ½èŠ±è²»æœ€å°çš„æ›´å‹•å°±èƒ½å¾ç›®å‰çš„å°ˆæ¡ˆä¸­æŠŠå…±ç”¨çš„æ¡†æ¶åˆ†é›¢å‡ºä¾†ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æˆ‘å°æ•´å€‹æª”æ¡ˆçµæ§‹çš„å®‰æ’ï¼š</p>
<pre><code>Project (å°ˆæ¡ˆç›®éŒ„)
|
|- core (æ ¸å¿ƒæ¡†æ¶)
|  |
|  |- Controller.php
|  |
|  |- Router.php
|  |
|  |- View.php
|
|- controllers (è‡ªè¨‚çš„ Controller å­˜æ”¾ç›®éŒ„)
|  |
|  |- IndexController.php
|
|- models (è‡ªè¨‚çš„ Model å­˜æ”¾ç›®éŒ„)
|  |
|  |- Guestbook.php
|
|- views (è‡ªè¨‚çš„ View å­˜æ”¾ç›®éŒ„)
|  |
|  |- HtmlView.php
|  |
|  |- RssView.php
|
|- database (è³‡æ–™åº«å­˜æ”¾ä½ç½®ï¼Œéå¿…è¦)
|  |
|  |- guestbook.txt
|
|- templates (HTML æ¨£ç‰ˆ)
|  |
|  | - edit.tpl.php
|  |
|  | - index.tpl.php
|
|- theme (ç¶²ç«™é¢¨æ ¼)
|  |
|  |- images
|  |  |
|  |  |- bg.png
|  |
|  |- main.css
|
|- config.php (ç¶²ç«™è¨­å®š)
|
|- index.php (é€²å…¥é»)

</code></pre><p>åœ¨ä½¿ç”¨äº†é€™å€‹æª”æ¡ˆæ¶æ§‹å¾Œï¼Œç›¸é—œè·¯å¾‘ä¹Ÿéœ€è¦åšèª¿æ•´ï¼Œä¾‹å¦‚æ¨£ç‰ˆ CSS çš„ä½ç½®è¦æ”¹åˆ° theme åº•ä¸‹ã€‚ä¸éæ¡†æ¶çš„æª”æ¡ˆæ¶æ§‹ä¸¦ä¸æ˜¯ä¸€å®šè¦ä¾ç…§ä¸Šé¢çš„è¦åŠƒæ–¹å¼ï¼Œæˆ‘çœ‹éæœ‰äº›æ¡†æ¶æŠŠ controllers ã€ models å’Œ views ä¸‰å€‹è³‡æ–™å¤¾ï¼Œæ”¾åœ¨ä¸€å€‹ application ç›®éŒ„è£¡ï¼Œé€™æ¨£å°±å¯ä»¥åœ¨åŒä¸€å°ˆæ¡ˆä¸‹ï¼Œå»ºç«‹ä¸åŒçš„æ‡‰ç”¨é …ç›®ã€‚</p>
<p>å‡è¨­ç¾åœ¨æˆ‘è¦å»ºç«‹ä¸€å€‹æ–°å°ˆæ¡ˆï¼Œé‚£éº¼æˆ‘åªéœ€è¦æŠŠ core ã€ config.php å’Œ index.php è¤‡è£½åˆ°æ–°å°ˆæ¡ˆçš„è³‡æ–™å¤¾ï¼Œç„¶å¾Œå†ä¾ç…§ä¸Šé¢çš„çµæœæŠŠç›¸é—œçš„ç›®éŒ„å»ºç«‹å‡ºä¾†å°±å¯ä»¥æ’°å¯«æ–°çš„ç¨‹å¼äº†ã€‚ç•¶ç„¶ HtmlView åœ¨æ–°å°ˆæ¡ˆè£¡æ‡‰è©²ä¹Ÿæ˜¯æœƒç”¨å¾—åˆ°ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ä¸€ä½µè¤‡è£½éå»ï¼›ä¸éåœ¨æ–°çš„å°ˆæ¡ˆè£¡ï¼Œæˆ‘ä¹Ÿé‚„æ˜¯å¯ä»¥ä½¿ç”¨ Smarty æˆ–å…¶ä»–çš„ Template å¼•æ“ä¾†å¯¦ä½œ View çš„éƒ¨ä»½ï¼Œé€™å°±æ˜¯æŠ½è±¡åŒ–çš„å¥½è™•ã€‚</p>
<!-- raw HTML omitted -->
<p>ä¸éäº‹æƒ…æ²’é‚£éº¼ç°¡å–®ï¼Œæ›äº†æ–°æª”æ¡ˆçµæ§‹å¾Œï¼ŒåŸä¾†çš„ index.php åœ¨è‡ªå‹•è¼‰å…¥é¡åˆ¥çš„åŠŸèƒ½å°±æœƒå¤±æ•ˆäº†ï¼›é€™æ˜¯å› ç‚ºæˆ‘æ²’æœ‰æŠŠ include_path è¨­å®šå¥½çš„é—œä¿‚ã€‚ä¸éæˆ‘ä¸å¸Œæœ›å»ä¿®æ”¹ php.ini ï¼Œä¹Ÿä¸æƒ³å¾ .htaccess è¨­å®šæª”ä¸‹æ‰‹ (å› ç‚º IIS ä¸Šä¸èƒ½ç”¨) ï¼›æ‰€ä»¥æˆ‘å¾—æ”¹ç”¨ set_include_path é€™å€‹å‡½å¼ã€‚</p>
<p>å¦å¤–ç”±æ–¼ Controller çš„å¯¦ä½œå·²ç¶“äº¤æ£’çµ¦ IndexController ï¼Œå› æ­¤æˆ‘ä¹Ÿå¿…é ˆæŠŠåŸä¾†çš„ Actions çµ¦æ›æ‰ã€‚</p>
<p>æ–°çš„ index.php å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
// è¼‰å…¥è¨­å®š
require_once 'config.php';
$include_path = array ();
// ç³»çµ±çš„ include_path
$include_path[] = get_include_path();
// ç›®å‰å°ˆæ¡ˆæ‰€éœ€è¦çš„ include_path
$include_path[] = APP_REAL_PATH . '/core';
$include_path[] = APP_REAL_PATH . '/controllers';
$include_path[] = APP_REAL_PATH . '/models';
$include_path[] = APP_REAL_PATH . '/views';
// è¨­å®šæ–°çš„ include_path
set_include_path(join(PATH_SEPARATOR, $include_path));
function __autoload($class_name)
{
    require_once $class_name . '.php';
}
$controller = new IndexController;
$controller-&gt;setRouter(new Router);
$controller-&gt;run();

</code></pre><p>å¾ä¸Šé¢çš„ç¨‹å¼ä¸­å¯ä»¥çœ‹åˆ° index.php çš„çµæ§‹é‚„æ˜¯å¾ˆç°¡å–®ï¼Œåªå·®å¤šäº† include_path çš„è¨­å®šèˆ‡åˆ†é›¢å‡ºè·¯ç”±å™¨çš„å¯¦ä½œè€Œå·²ã€‚ç¾åœ¨æˆ‘èƒ½ç¢ºä¿ç•™è¨€æ¿èƒ½æ­£å¸¸é‹ä½œï¼Œè€Œä¸”å¤§éƒ¨ä»½å…±ç”¨çš„åŠŸèƒ½å¯ä»¥æ‹¿åˆ°æ–°å°ˆæ¡ˆä¸Šä½¿ç”¨ï¼Œå¾é€™è£¡å¯ä»¥çœ‹åˆ°å»ºæ§‹ MVC æ¡†æ¶æ˜¯éå¸¸å€¼å¾—çš„ä¸€ä»¶äº‹æƒ…ã€‚</p>
<h3 id="å…¶ä»–éƒ¨ä»½">å…¶ä»–éƒ¨ä»½</h3>
<p>ä¸Šé¢çš„æ¡†æ¶åªæ˜¯å¾ˆç°¡å–®çš„æ¦‚å¿µå¯¦ä½œï¼Œå› ç‚ºé™¤äº† MVC ä»¥å¤–ï¼Œä¸€å€‹æ¡†æ¶è¦è€ƒé‡åˆ°çš„éƒ¨ä»½å…¶å¯¦é‚„æœ‰å¾ˆå¤šã€‚åƒæ˜¯å¦‚ä½•èˆ‡è³‡æ–™åº«åšçµåˆã€è‡ªå‹•åŒ–æ¸¬è©¦ã€æ¡†æ¶ç”¢ç”Ÿå™¨ç­‰ç­‰ï¼Œé€™äº›éƒ½æœƒæ˜¯ä¸€å€‹å¥½çš„æ¡†æ¶æ‰€éœ€è¦çš„éƒ¨ä»½ã€‚å› æ­¤å¤šå¸å–ç›®å‰ç¶²è·¯ä¸Šä¸€äº›å…¬é–‹æ¡†æ¶çš„ç¶“é©—ï¼Œæ‰èƒ½å°æ¡†æ¶çš„æ‡‰ç”¨æœ‰æ›´æ·±ä¸€å±¤çš„ç­è§£ã€‚</p>
<p>ä¸éå€’ä¹Ÿä¸ç”¨èªç‚ºæ¡†æ¶å°±ä¸€å®šéå¸¸é¾å¤§ï¼Œåƒæœ‰äº›æ¡†æ¶å°±åªæœƒå®šç¾©ä¸€äº›åŸºæœ¬çš„æŠ½è±¡é¡åˆ¥ (åƒä¸Šé¢æˆ‘å¯¦ä½œçš„é€™å€‹ç‰ˆæœ¬) ï¼Œè€Œæœ‰äº›æ¡†æ¶å‰‡æœƒæä¾›å¾ˆå¤šé¡åˆ¥åº«ä¾†è®“é–‹ç™¼äººå“¡ä½¿ç”¨ (åƒæ˜¯ .Net Framework æˆ– <a href="http://framework.zend.com/">Zend Framework</a>) ï¼›è€Œæœ‰äº›æ¡†æ¶å‰‡æ˜¯æœ‰ç‰¹å®šç”¨é€”ï¼Œå®ƒå€‘æœ‰å¯èƒ½å»ºæ§‹åœ¨å¦ä¸€å€‹æ¡†æ¶ä¸Šé¢ (å°±åƒ <a href="http://www.cakephp.org/">CakePHP</a> å»ºæ§‹åœ¨ <a href="http://www.php.net">PHP</a> é€™å€‹å¤§æ¡†æ¶ä¸Š) ã€‚æ‰€ä»¥æ¡†æ¶çš„çµ„æˆä¸æœƒåªä¾·é™åœ¨ MVC ä¹‹ä¸‹ï¼Œåªæ˜¯åœ¨é€™è£¡ MVC æ˜¯æˆ‘æ‰€æƒ³è¦é‡æ¸…çš„éƒ¨ä»½è€Œå·²ã€‚</p>
<p>è¨»ï¼š PHP æœ¬ä¾†å°±æ˜¯åŸºæ–¼ Web é–‹ç™¼è€Œå‡ºç¾çš„ä¸€å¥—èªè¨€æ¡†æ¶ã€‚</p>
<h2 id="çµè«–">çµè«–</h2>
<p>å…¶å¯¦å­¸éå¯«ç¨‹å¼çš„äººéƒ½çŸ¥é“ï¼Œå¦‚ä½•ç‚ºä¸€æ”¯ç¨‹å¼èµ·é ­æ˜¯æœ€å›°é›£çš„ä¸€ä»¶äº‹ï¼›ä¸éå¦‚æœæœ‰ä¸€å€‹å¥½ç”¨çš„æ¡†æ¶ç”¢ç”Ÿå™¨å†é…åˆä¸€å€‹ä¸éŒ¯çš„å…¥é–€æ–‡ä»¶çš„è©±ï¼Œé€™å€‹å•é¡Œé€šå¸¸å¾ˆå®¹æ˜“è¢«è§£æ±º (ä¸éå°å¤§éƒ¨ä»½è¤‡é›œçš„å°ˆæ¡ˆä¾†èªªé‚„æ˜¯å¤©æ–¹å¤œè­š) ã€‚å› æ­¤åƒ <a href="http://www.rubyonrails.org/">Ruby on Rails</a> æˆ– <a href="http://www.cakephp.org/">CakePHP</a> é€™é¡çš„ç¨‹å¼æ¡†æ¶ï¼Œä¹Ÿå°±å—åˆ°è¨±å¤šäººçš„é‡è¦–èˆ‡æ¨å´‡ã€‚</p>
<p>è€Œä½¿ç”¨æ¡†æ¶æœ€å¤§çš„å¥½è™•ï¼Œå°±æ˜¯å®ƒå€‘éš±è—äº†è¨±å¤šçœ‹èµ·ä¾†å¾ˆè¤‡é›œçš„æ©Ÿåˆ¶ï¼›æ›å¥è©±èªªï¼Œå®ƒæä¾›äº†ä¸€å€‹æŠ½è±¡åŒ–çš„è¨­è¨ˆæ¶æ§‹ï¼Œè®“é–‹ç™¼äººå“¡å¯ä»¥ä¾ç…§è‡ªå·±çš„æƒ³æ³•å»å»ºæ§‹å‡ºæ‰€éœ€è¦çš„æ‡‰ç”¨é …ç›®ã€‚é€™äº›æŠ½è±¡åŒ–çš„éƒ¨ä»½ï¼Œåƒæ˜¯ Controller ã€ View ç­‰ï¼Œéƒ½èƒ½å¤ æ¸›å°‘é–‹ç™¼äººå“¡åœ¨è™•ç†åº•å±¤ç¨‹å¼çš„æ™‚é–“ã€‚è€Œä¸”é€éæ¡†æ¶ç”¢ç”Ÿå™¨ï¼Œå°±é€£è¤‡è£½åŸºæœ¬æ¡†æ¶çš„å‹•ä½œä¹Ÿéƒ½çœäº†ï¼Œä¸å¯è¬‚ä¸æ–¹ä¾¿ã€‚</p>
<p>ä½†æ˜¯ä¸€å€‹å¥½çš„ Web é–‹ç™¼è€…ä¸€å®šè¦ç­è§£é€™äº›æ¡†æ¶èƒŒå¾Œé‹ä½œçš„åŸç†ï¼Œä¸ç„¶å¦‚æœæ‹¿æ‰é€™äº›æ‰€è¬‚çš„æ¡†æ¶å¾Œï¼Œæˆ‘æƒ³è¦å¯«å‡ºä¸€å€‹åŸºæœ¬çš„ç•™è¨€æ¿å°±ä¸æ˜¯é‚£éº¼å®¹æ˜“çš„ä¸€ä»¶äº‹äº† (æƒ³æƒ³çœ‹ä»¥å‰å¯« CGI çš„æ™‚ä»£) ã€‚é›–ç„¶æ¡†æ¶éš±è—äº†å¾ˆå¤šç´°ç¯€ï¼Œä½†ä¸è¡¨ç¤º Web é–‹ç™¼è€…å°±å¯ä»¥å®Œå…¨å¿½ç•¥é€™äº›ç´°ç¯€ï¼›å¾ˆå¤šé€²éšçš„åŠŸèƒ½éƒ½æœƒéœ€è¦ç†Ÿæ‚‰é€™äº›åŸç†å¾Œæ‰æœ‰è¾¦æ³•å¯¦ä½œå‡ºä¾†ï¼Œæ‰€ä»¥åƒè¬ä¸èƒ½å› ç‚ºæœƒä½¿ç”¨æŸå€‹æ¡†æ¶è€Œè‡ªå¾—æ„æ»¿ã€‚</p>
<h2 id="ç¯„ä¾‹ä¸‹è¼‰">ç¯„ä¾‹ä¸‹è¼‰</h2>
<p>ç…§æ…£ä¾‹ï¼Œæˆ‘æŠŠä¸Šé¢çš„ç¯„ä¾‹ç¢¼æ”¾åœ¨åº•ä¸‹ï¼š</p>
<ul>
<li>
<p><a href="/resources/webmvc/source/v1.zip">åŸå§‹ç•™è¨€ç‰ˆ</a></p>
</li>
<li>
<p><a href="/resources/webmvc/source/v2.zip">æ”¹è‰¯å¾Œçš„ MVC ç•™è¨€æ¿</a></p>
</li>
<li>
<p><a href="/resources/webmvc/source/v3.zip">æ¶æ§‹åœ¨ MVC æ¡†æ¶ä¸Šçš„ç•™è¨€æ¿ </a></p>
</li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>æˆ‘ä¹Ÿä¾†å¯¦ä½œ PHP mix-in çš„æ¦‚å¿µ - Part 2</title>
			<link>https://jaceju.net/php-mix-in-2/</link>
			<pubDate>Wed, 14 Mar 2007 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/php-mix-in-2/</guid>
			<description>çŸ³é ­æˆè€å¤§èªªä»–è¦ç‚ºä»–çš„ mix-in å¯¦ä½œ part 2 ï¼Œæˆ‘ä¹Ÿæƒ³åˆ°äº†ä¸€äº›å¥½ç©çš„æ±è¥¿ã€‚è¨˜å¾—å¾ˆä¹…ä¹‹å‰æˆ‘å¯«éä¸€ç¯‡ã€Œ PHP çš„ callback è™›æ“¬å‹æ…‹ã€ï¼Œé€™æ¬¡å°±æŠŠå®ƒç”¨åœ¨é€™è£¡ã€‚ é¦–å…ˆæˆ‘æŠŠåŸä¾†çš„ Prototype é¡</description>
			<content type="html"><![CDATA[<p><a href="http://blog.roodo.com/rocksaying">çŸ³é ­æˆ</a>è€å¤§èªªä»–è¦ç‚ºä»–çš„ <a href="http://blog.roodo.com/rocksaying/archives/2817003.html">mix-in</a> å¯¦ä½œ part 2 ï¼Œæˆ‘ä¹Ÿæƒ³åˆ°äº†ä¸€äº›å¥½ç©çš„æ±è¥¿ã€‚è¨˜å¾—å¾ˆä¹…ä¹‹å‰æˆ‘å¯«éä¸€ç¯‡ã€Œ <a href="http://www.jaceju.net/blog/archives/32">PHP çš„ callback è™›æ“¬å‹æ…‹</a>ã€ï¼Œé€™æ¬¡å°±æŠŠå®ƒç”¨åœ¨é€™è£¡ã€‚</p>
<!-- raw HTML omitted -->
<p>é¦–å…ˆæˆ‘æŠŠåŸä¾†çš„ Prototype é¡åˆ¥åŠ ä¸Šäº†å¯ä»¥æ¥å— callback è™›æ“¬å‹æ…‹çš„åƒæ•¸ï¼š</p>
<pre><code>&lt;?php
/**
* å¯¦ä½œ mix-in æ¦‚å¿µ
*
* åƒè€ƒ
* http://personal.schmalls.com/2006/11/06/prototype-based-programming-in-php/
* http://blog.roodo.com/rocksaying/archives/2817003.html
* http://blog.roodo.com/jaceju/archives/2832709.html
* http://blog.roodo.com/jaceju/archives/409709.html
**/
// å¯æ¥å— mix-in ç‰©ä»¶çš„æŠ½è±¡é¡åˆ¥
abstract class Prototype
{
    private function __set($name, $func)
    {
        if (is_array($func)) {
            if (is_object($func[0]) || (is_string($func[0]) &amp;amp;&amp;amp; class_exists($func[0]))) {
                $this-&gt;$name = array ($func[0], $func[1]);
            }
        } else {
            $this-&gt;$name = $func;
        }
    }
    private function __call($method, $args)
    {
        if (is_array($this-&gt;$method)) {
            call_user_func_array($this-&gt;$method, $args);
        } elseif (is_string($this-&gt;$method)
                &amp;amp;&amp;amp; class_exists($this-&gt;$method)
                &amp;amp;&amp;amp; is_subclass_of($this-&gt;$method, 'MethodObject')) {
            $method_object = new $this-&gt;$method($this);
            call_user_func_array(array ($method_object, 'run'), $args);
        }
    }
}

</code></pre><p>ç„¶å¾ŒæŠŠ MethodObject çš„ doWork æŠ½è±¡æ–¹æ³•æ”¹å‘½åç‚º run ï¼Œé€™æ¨£æ„Ÿè¦ºæ¯”è¼ƒå°å‘³ã€‚</p>
<pre><code>&lt;?php
// mix-in æ–¹æ³•çš„æŠ½è±¡é¡åˆ¥
abstract class MethodObject
{
    protected $object;
    public function __construct($object = NULL)
    {
        $this-&gt;object = $object;
    }
    abstract function run();
}

</code></pre><p>è€Œ ClassA æ˜¯ä¸€å€‹æ™®é€šçš„é¡åˆ¥ï¼Œæ“æœ‰ method1 å’Œ method2 å…©å€‹æ–¹æ³•ã€‚</p>
<pre><code>&lt;?php
class ClassA
{
    public function method1($param)
    {
        echo __CLASS__, &quot;\n&quot;;
        echo &quot;param is &quot;, $param, &quot;\n&quot;;
    }
    public function method2($param)
    {
        echo __METHOD__, &quot;\n&quot;;
        echo &quot;param is &quot;, $param, &quot;\n&quot;;
    }
}

</code></pre><p>è‡³æ–¼ ClassB æ˜¯ç¹¼æ‰¿è‡ª Prototype é¡åˆ¥ï¼Œå¯ä»¥ç‚ºå®ƒæ·»æ²¹åŠ é†‹ï¼›é€™è£¡æˆ‘è®“å®ƒä¿æŒæ¸…ç™½ä¹‹èº«å°±å¥½ã€‚</p>
<pre><code>&lt;?php
class ClassB extends Prototype
{
}

</code></pre><p>ClassC å‰‡ç¹¼æ‰¿è‡ª MethodObject ï¼Œç•¶åšæ˜¯åŠŸèƒ½è¼ƒè¤‡é›œçš„å‡½å¼ç‰©ä»¶ã€‚ä¹Ÿå°±æ˜¯èªª ClassC å¯ä»¥æœ‰è‡ªå·±çš„ç§æœ‰å±¬æ€§æˆ–æ˜¯ç§æœ‰æ–¹æ³•ï¼Œè®“ run æ–¹æ³•éæ–¼é¾å¤§æ™‚ï¼Œæœ‰é‡æ§‹çš„ç©ºé–“ã€‚</p>
<pre><code>&lt;?php
class ClassC extends MethodObject
{
    public function run()
    {
        $n = func_num_args();
        echo (1 == $n) ? func_get_arg(0) : '', &quot;\n&quot;;
    }
}

</code></pre><p>æœ€å¾Œå°±æ˜¯æ¸¬è©¦ç¨‹å¼ç¢¼äº†ï¼Œå¯ä»¥çœ‹åˆ° ClassB ç”Ÿæˆçš„ $b ç‰©ä»¶å¯ä»¥æ¥å— callback å‹æ…‹çš„é™£åˆ—è®Šæ•¸åšç‚ºåŸ·è¡Œå‡½å¼ã€‚</p>
<pre><code>&lt;?php
// æ¸¬è©¦ç”¨çš„ç¨‹å¼ç¢¼
$a = new ClassA;
$b = new ClassB;
$b-&gt;method1 = array ('ClassA', 'method1');
$b-&gt;method2 = array ($a, 'method2');
$b-&gt;method3 = 'ClassC';
$b-&gt;method1('param1');
$b-&gt;method2('param2');
$b-&gt;method3('param3');

</code></pre><p>é€™æ¨£ä¸€ä¾†ï¼Œç•¶ ClassB éœ€è¦æŸå€‹æ–¹æ³•ï¼Œè€Œ ClassA å·²ç¶“æœ‰å¯¦ä½œäº†ï¼Œé‚£éº¼æˆ‘å€‘å°±å¯ä»¥ç›´æ¥åˆ©ç”¨ ClassA çš„å¯¦ä½œã€‚åªæ˜¯é€™æ¨£ç¨‹å¼äº¤äº’çš„çµæœï¼Œä¹Ÿè¨±æœƒä½¿å¾—è¨­è¨ˆä¸Šå‡ºç¾å¾ˆå¤§çš„æ¼æ´ï¼Œä½¿ç”¨ä¸Šè¦ç‰¹åˆ¥æ³¨æ„ã€‚</p>
<p>ç•¶ç„¶é€™åªæ˜¯æ¦‚å¿µæ€§çš„å¯¦ä½œè€Œå·²ï¼Œæ­¡è¿å¤§å®¶ä¸€èµ·ä¾†è¨è«–çœ‹çœ‹ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>æˆ‘ä¹Ÿä¾†å¯¦ä½œ PHP mix-in çš„æ¦‚å¿µ</title>
			<link>https://jaceju.net/php-mix-in/</link>
			<pubDate>Sat, 10 Mar 2007 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/php-mix-in/</guid>
			<description>ä¹‹å‰æéä¸€ç¯‡ Prototype-based programming in PHP ï¼Œå¾Œä¾†åœ¨çŸ³é ­é–’èªé‚£è£¡ä¹Ÿçœ‹åˆ° PHP å¯¦è¸ mix-in æ¦‚å¿µä¹‹å¯è¡Œæ€§ï¼Œæˆ‘è‡ªå·±ä¹Ÿæ‰‹ç™¢å¯«äº†ä¸€å€‹ã€‚ä¸éæˆ‘æ˜¯æŠŠ function ç•¶æˆæ˜¯ä¸€å€‹ MethodObject ï¼Œæœ‰é» delegate å‘³é“ã€‚ç„¶è€Œå¤§éƒ¨ä»½é™</description>
			<content type="html"><![CDATA[<p>ä¹‹å‰æéä¸€ç¯‡ <a href="http://personal.schmalls.com/2006/11/06/prototype-based-programming-in-php/">Prototype-based programming in PHP</a> ï¼Œå¾Œä¾†åœ¨<a href="http://blog.roodo.com/rocksaying">çŸ³é ­é–’èª</a>é‚£è£¡ä¹Ÿçœ‹åˆ° <a href="http://blog.roodo.com/rocksaying/archives/2817003.html">PHP å¯¦è¸ mix-in æ¦‚å¿µä¹‹å¯è¡Œæ€§</a>ï¼Œæˆ‘è‡ªå·±ä¹Ÿæ‰‹ç™¢å¯«äº†ä¸€å€‹ã€‚ä¸éæˆ‘æ˜¯æŠŠ function ç•¶æˆæ˜¯ä¸€å€‹ MethodObject ï¼Œæœ‰é» delegate å‘³é“ã€‚ç„¶è€Œå¤§éƒ¨ä»½é™åˆ¶å°±åƒçŸ³é ­æˆæ‰€èªªçš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿä¸å¤šæäº†ã€‚é‚„æ˜¯ç­‰ PHP7 çš„è¦æ ¼å‡ºä¾†ï¼Œçœ‹å®ƒæœƒä¸æœƒ<a href="http://javaworld.com.tw/roller/page/ingramchen?entry=2007_1_1_WhyAddClosureInJava7">æ”¯æ´ closure</a> å¥½äº†  (è¦è·Ÿéš¨ Java 7 å—ï¼Ÿ XD) ã€‚</p>
<p>è¨»ï¼š PHP 6 å¯èƒ½æœƒå¯¦ç¾çš„æ±è¥¿è«‹åƒè€ƒ <a href="http://www.corephp.co.uk/archives/19-Prepare-for-PHP-6.html">Prepare for PHP 6</a> ã€‚</p>
<!-- raw HTML omitted -->
<p>ç¨‹å¼å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
/**
 * å¯¦ä½œ mix-in æ¦‚å¿µ
 *
 * åƒè€ƒ
 * http://personal.schmalls.com/2006/11/06/prototype-based-programming-in-php/
 * http://blog.roodo.com/rocksaying/archives/2817003.html
 **/
// å¯æ¥å— mix-in ç‰©ä»¶çš„æŠ½è±¡é¡åˆ¥
abstract class Prototype
{
    private function __set($name, $value)
    {
        $this-&gt;$name = $value;
    }
    private function __call($method, $args)
    {
        if (class_exists($this-&gt;$method)) {
            $method_object = new $this-&gt;$method($this);
            call_user_func_array(array ($method_object, 'doWork'), $args);
        }
    }
}
// mix-in æ–¹æ³•çš„æŠ½è±¡é¡åˆ¥
abstract class MethodObject
{
    protected $object;
    public function __construct($object = NULL)
    {
        $this-&gt;object = $object;
    }
    abstract function doWork();
}
// æ¸¬è©¦ç”¨çš„ Person é¡åˆ¥
class Person extends Prototype
{
    private $name;
    public function __construct($name)
    {
        $this-&gt;name = $name;
    }
    public function getName()
    {
        return $this-&gt;name;
    }
    public function __toString()
    {
        return $this-&gt;name;
    }
}
// æ¸¬è©¦ç”¨çš„ Car é¡åˆ¥
class Car extends Prototype
{
    private $owner;
    public function setOwner(Person $person)
    {
        $this-&gt;owner = $person;
    }
    public function __toString()
    {
        return 'This is ' . $this-&gt;owner-&gt;getName() . '\'s car.';
    }
}
// æ¸¬è©¦ç”¨çš„ PrintString é¡åˆ¥
class PrintString extends MethodObject
{
    public function doWork()
    {
        $n = func_num_args();
        echo $this-&gt;object, (1 == $n) ? func_get_arg(0) : '';
    }
}
// æ¸¬è©¦ç”¨çš„ç¨‹å¼ç¢¼
$me = new Person('Jace');
$me-&gt;printName = 'PrintString';
$me-&gt;printName(' Say: ');
$my_car = new Car;
$my_car-&gt;setOwner($me);
$my_car-&gt;printCarName = 'PrintString';
$my_car-&gt;printCarName();

</code></pre><p>æœ‰æ²’æœ‰ç”¨æˆ‘ä¹Ÿä¸æ¸…æ¥šï¼Œæˆ‘çš„å¯¦å‹™ç¶“é©—å¤ªå°‘ï¼Œæ²’è¾¦æ³•æƒ³åˆ°å®ƒçš„ç”¨é€”ã€‚ä¸éåæ­£åªæ˜¯å¯«å¥½ç©çš„ï¼Œä¹Ÿè¨±èƒ½æ¿€ç™¼åˆ¥äººçš„éˆæ„Ÿä¹Ÿèªªä¸ä¸€å®šã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>PHP è£¡çš„ Prototype-based é–‹ç™¼æ‰‹æ³•</title>
			<link>https://jaceju.net/prototype-based-php/</link>
			<pubDate>Fri, 10 Nov 2006 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/prototype-based-php/</guid>
			<description>ä¸Šæ¬¡ä»‹ç´¹äº†ä¸€ç¯‡ Bring some Ruby/Prototype flavour in your PHP array ï¼Œé€™æ¬¡æœ‰å€‹é¡ä¼¼çš„ã€‚ æ–‡ç« ç¶²å€ï¼š Prototype-based programming in PHP åŸæ–‡è½‰è¼‰å¦‚ä¸‹ï¼š For those who have been doing a lot of Javascript programming, you know what prototype-based programming is all about. The basic idea is that functions can be added to classes</description>
			<content type="html"><![CDATA[<p>ä¸Šæ¬¡ä»‹ç´¹äº†ä¸€ç¯‡ <a href="http://hasin.wordpress.com/2006/10/17/bring-some-rubyprototype-flavour-in-your-php-array/">Bring some Ruby/Prototype flavour in your PHP array</a>  ï¼Œé€™æ¬¡æœ‰å€‹é¡ä¼¼çš„ã€‚</p>
<p>æ–‡ç« ç¶²å€ï¼š <a href="http://personal.schmalls.com/2006/11/06/prototype-based-programming-in-php/">Prototype-based programming in PHP</a></p>
<!-- raw HTML omitted -->
<p>åŸæ–‡è½‰è¼‰å¦‚ä¸‹ï¼š</p>
<!-- raw HTML omitted -->
<p>For those who have been doing a lot of Javascript programming, you know what prototype-based programming is all about. The basic idea is that functions can be added to classes dynamically. In Javascript functions can be added to a static class (using prototype) and it will be added to all instances of the class, or they can be added to a specific instance and only be added to that instance.</p>
<p>Anyway, lets get to the point. I decided to try adding this functionality to PHP. I&rsquo;m not sure why its a good idea, or if it even is, but I&rsquo;ll let you be the judge of that. So here is the class I came up with:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">/**
 * @copyright   <span class="ni">&amp;amp;</span>#169; 2006, Schmalls / Joshua Thompson, All Rights Reserved
 * @license	 http://www.opensource.org/licenses/bsd-license.php New BSD
 * @author	  Joshua Thompson <span class="p">&lt;</span><span class="nt">spam.goes.in.here</span><span class="err">@</span><span class="na">gmail</span><span class="err">.</span><span class="na">com</span><span class="p">&gt;</span>
 * @version	 1.0.0
 * @link		http://www.countercubed.com
 */
/**
 * This class holds the prototype capabilities
 *
 * Extending this class makes it prototype capable
 */
class Prototype
{
    /**
     * Holds prototype functions
     *
     * @var  array
     */
    private $_functions = array();
    /**
     * Default constructor
     *
     * This is here so that php doesn&#39;t complain about the prototype function
     */
    public function __construct()
    {
    }
    /**
     * Sets the prototype functions or variables
     *
     * @param   string $name
     * @param   mixed $value
     */
    public function __set( $name, $value )
    {
        if ( function_exists( $value ) ) :
            $this-&gt;_functions[$name] = $value;
        else :
            $this-&gt;$name = $value;
        endif;
    }
    /**
     * Gets static prototype variables if they exist
     *
     * @param   string $name
     * @return  mixed
     */
    public function __get( $name )
    {
        if ( isset( $this-&gt;prototype()-&gt;$name ) ) :
            return $this-&gt;prototype()-&gt;$name;
        else :
            trigger_error( &#39;Undefined property: &#39; . __CLASS__ . &#39;::&#39; . $name, E_USER_NOTICE );
        endif;
    }
    /**
     * Calls a static prototype function
     *
     * @param   string $name
     * @param   array $arguments
     * @return  mixed
     */
    public function __call( $name, $arguments )
    {
        if ( isset( $this-&gt;_functions[$name] ) ) :
            return call_user_func_array( $this-&gt;_functions[$name], $arguments );
        elseif ( $this-&gt;prototype()-&gt;isCallable( $name ) ) :
            return call_user_func_array( array( $this-&gt;prototype(), $name ), $arguments );
        else :
            trigger_error( &#39;Call to undefined method &#39; . __CLASS__ . &#39;::&#39; . $name . &#39;()&#39;, E_USER_ERROR );
        endif;
    }
    /**
     * Returns the static prototype holder
     *
     * @return  Prototype
     */
    public static function prototype()
    {
        static $prototype = null;
        if ( $prototype === null ) :
            $prototype = new Prototype();
        endif;
        return $prototype;
    }
    /**
     * Needed for the static calling functionality
     *
     * @return  boolean
     */
    public function isCallable( $name )
    {
        return ( isset( $this-&gt;_functions[$name] ) );
    }
}

</code></pre></div><p>Now all a class needs to do is extend the Prototype class. A sample of its use follows:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">// make some prototype classes
class Test1 extends Prototype
{
}
class Test2 extends Prototype
{
}
class Test3 extends Test1
{
}
// lets create some test static functions
Test1::prototype()-&gt;fun1 = create_function( &#39;$arg1&#39;, &#39;
    echo \&#39;Static Test1::fun1 \&#39; . $arg1 . &#34;\n&#34;;
&#39;);
Test2::prototype()-&gt;fun2 = create_function( &#39;$arg1&#39;, &#39;
    echo \&#39;Static Test2::fun2 \&#39; . $arg1 . &#34;\n&#34;;
&#39;);
// now instantiate the objects
$test1 = new Test1();
$test2 = new Test2();
// and make some more functions
$test1-&gt;fun3 = create_function( &#39;$arg2&#39;, &#39;
echo \&#39;Test1::fun3 \&#39; . $arg2 . &#34;\n&#34;;
&#39;);
$test2-&gt;fun4 = create_function( &#39;$arg2&#39;, &#39;
echo \&#39;Test2::fun4 \&#39; . $arg2 . &#34;\n&#34;;
&#39;);
// output: Static Test1::fun1 bob
$test1-&gt;fun1( &#39;bob&#39; );
// create another function
Test1::prototype()-&gt;fun2 = create_function( &#39;$arg1&#39;, &#39;
echo \&#39;Static Test1::fun2 \&#39; . $arg1 . &#34;\n&#34;;
&#39;);
// output: Static Test1::fun2 bobby
$test1-&gt;fun2( &#39;bobby&#39; );
// output: Static Test2::fun2 robert
$test2-&gt;fun2( &#39;robert&#39; );
// output: Test1::fun3 robby
$test1-&gt;fun3( &#39;robby&#39; );
// output: Test2::fun4 rob
$test2-&gt;fun4( &#39;rob&#39; );
// another instance still has the static functions
$test1_2 = new Test1();
// output: Static Test1::fun1 bob
$test1_2-&gt;fun1( &#39;bob&#39; );
$test3 = new Test3();
// this will give an error because prototype functions do not extend down to a child class
$test3-&gt;fun1( &#39;roberto&#39; );
</code></pre></div><p>Once again, I don&rsquo;t know how useful it is, but let me know what you think.</p>
<!-- raw HTML omitted -->
<p>ä¸»è¦çš„æ¦‚å¿µæ˜¯ç”¨ PHP5 çš„ magic methods ï¼š <code>__set</code> ã€ <code>__get</code> ã€ <code>__call</code> ã€‚</p>
<p>åˆ©ç”¨ <code>__set</code> åŠç‰©ä»¶å…§éƒ¨çš„ _functions è®Šæ•¸è¨˜ä½ <code>create_function</code> æ‰€ç”¢ç”Ÿå‡ºä¾†çš„ callback åŒ¿åå‡½å¼ï¼Œç„¶å¾Œå†ç”¨ <code>__call</code> å‘¼å«é€™äº›å‹•æ…‹å»ºç«‹çš„ methods ã€‚</p>
<p>ç•¶ç„¶ magic methods å¿…é ˆåœ¨ç‰©ä»¶å¯¦é«”ç”¢ç”Ÿå¾Œæ‰èƒ½ä½¿ç”¨ï¼Œè©³ç´°çš„èªªæ˜å¯ä»¥åƒè€ƒä¸€ä¸‹è©²æ–‡å›æ‡‰çš„éƒ¨ä»½ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>[å¥½æ–‡] Check your PHP code at every level with unit tests</title>
			<link>https://jaceju.net/os-php-unit/</link>
			<pubDate>Mon, 21 Aug 2006 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/os-php-unit/</guid>
			<description>è§£é‡‹å¦‚ä½•åˆ©ç”¨ Unit Test ä¾†æ¸¬è©¦å„å±¤ç´šçš„ PHP ç¨‹å¼ã€‚ æ–‡ç« ç¶²å€ï¼šCheck your PHP code at every level with unit tests é‡é»æç¤ºï¼š It&amp;rsquo;s 3 a.m. Do you know if your code is still working?</description>
			<content type="html"><![CDATA[<p>è§£é‡‹å¦‚ä½•åˆ©ç”¨ Unit Test ä¾†æ¸¬è©¦å„å±¤ç´šçš„ PHP ç¨‹å¼ã€‚</p>
<p>æ–‡ç« ç¶²å€ï¼š<a href="http://www.ibm.com/developerworks/library/os-php-unit/">Check your PHP code at every level with unit tests</a></p>
<p>é‡é»æç¤ºï¼š</p>
<!-- raw HTML omitted -->
<p>It&rsquo;s 3 a.m. Do you know if your code is still working?</p>
<!-- raw HTML omitted -->
]]></content>
		</item>
		
		<item>
			<title>ASP è³¼ç‰©è»Šä¸‰éƒ¨æ›²(2)</title>
			<link>https://jaceju.net/classic-asp-shopping-cart-2/</link>
			<pubDate>Tue, 30 May 2006 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/classic-asp-shopping-cart-2/</guid>
			<description>ç°¡ä»‹ æ˜¯åˆ°äº†è©²çµå¸³çš„æ™‚å€™äº†ï¼Œå°±åƒä½ åœ¨å¤§è³£å ´è²·å®Œæ±è¥¿å¾Œï¼Œè¦åˆ°æ«ƒå°ä»˜éŒ¢æ˜¯ä¸€æ¨£çš„ã€‚ä½†æ˜¯åœ¨è³¼ç‰©ç¶²ç«™è²·å®Œæ±è¥¿å¾Œï¼Œç¸½æ˜¯è¦å¡«å¯«ä¸€äº›å€‹äººè³‡æ–™ï¼Œæ–¹ä¾¿å•†å®¶èƒ½å¤ æŠŠæ±</description>
			<content type="html"><![CDATA[<h2 id="ç°¡ä»‹">ç°¡ä»‹</h2>
<p>æ˜¯åˆ°äº†è©²çµå¸³çš„æ™‚å€™äº†ï¼Œå°±åƒä½ åœ¨å¤§è³£å ´è²·å®Œæ±è¥¿å¾Œï¼Œè¦åˆ°æ«ƒå°ä»˜éŒ¢æ˜¯ä¸€æ¨£çš„ã€‚ä½†æ˜¯åœ¨è³¼ç‰©ç¶²ç«™è²·å®Œæ±è¥¿å¾Œï¼Œç¸½æ˜¯è¦å¡«å¯«ä¸€äº›å€‹äººè³‡æ–™ï¼Œæ–¹ä¾¿å•†å®¶èƒ½å¤ æŠŠæ±è¥¿å¯„çµ¦ä½ ï¼Œé€™æ˜¯è™›æ“¬å•†åº—æ¯”è¼ƒä¸åŒçš„åœ°æ–¹ã€‚</p>
<p>è€Œè¦å¡«å¯«çš„è³‡æ–™ä¸å¤–ä¹æ˜¯è³¼è²·äººè³‡è¨Šã€æ”¶è²¨äººè³‡è¨Šç­‰ç­‰ï¼Œé€™äº›è³‡è¨Šå¤§éƒ¨ä»½éƒ½èƒ½åœ¨ä½¿ç”¨è€…ç™»å…¥æˆç‚ºæœƒå“¡å–å¾—ï¼Œé€™é€šå¸¸ä¹Ÿæ˜¯ä¸€èˆ¬æœƒå“¡åˆ¶è³¼ç‰©ç¶²ç«™çš„ä½œæ³•ã€‚</p>
<p>ä¸éé›£é¡Œä¾†äº†ï¼Œé›–ç„¶æˆ‘å€‘å»ºç«‹çš„æ˜¯ä¸€å€‹æœƒå“¡åˆ¶è³¼ç‰©ç¶²ç«™ï¼Œä½†æ˜¯å®¢æˆ¶å»å¸Œæœ›èƒ½è®“æœªè¨»å†Šçš„è¨ªå®¢ä¹Ÿèƒ½å¤ åœ¨é€™è£¡å…ˆè²·æ±è¥¿ï¼Œè€Œåˆ°çµå¸³æ™‚æ‰é¸æ“‡æ˜¯ä¸æ˜¯è¦åŠ å…¥æœƒå“¡ã€‚ç•¶ç„¶å®¢æˆ¶æ°¸é ä¸æœƒç­è§£æ¡å–é€™ç¨®æ–¹å¼çš„é›£åº¦ï¼Œä»–èªç‚ºä½ æ˜¯ç¶²ç«™é–‹ç™¼äººå“¡ï¼Œä½ ä¸€å®šæœƒæœ‰è¾¦æ³•çš„ã€‚</p>
<p>å…ˆä¸è¦ç¿»æ¡Œå­ï¼Œè§£æ±ºå•é¡Œæ˜¯æˆ‘å€‘çš„è²¬ä»»ã€‚ä»”ç´°æƒ³æƒ³ï¼Œè¨ªå®¢å°è³¼ç‰©ç¶²ç«™çš„ç¶“ç‡Ÿè€…è€Œè¨€ï¼Œä¹Ÿå¯èƒ½æ˜¯æ½›åœ¨çš„æ¶ˆè²»è€…ï¼›æ‰€ä»¥å¦‚æœèƒ½æä¾›ä¾¿åˆ©çš„æ–¹å¼è®“é€™äº›äººè½‰è®Šç‚ºæœƒå“¡ï¼Œå…¶å¯¦é‚„æ»¿é‡è¦çš„ã€‚</p>
<p>ç•¶ç„¶æˆ‘å€‘å¾—æä¾›ç•«é¢è®“ä½¿ç”¨è€…å¡«å¯«è³‡æ–™ï¼Œä¸¦ä¸”æŠŠé€™äº›è³‡æ–™åšé©ç•¶çš„è™•ç†ã€‚ä¸éå¾ŒçºŒçš„è™•ç†æ–¹å¼æˆ‘å°±ä¸å¤šæäº†ï¼Œç¾åœ¨æˆ‘å€‘æŠŠé‡é»å…ˆæ”¾åœ¨çµå¸³è¡¨å–®é¡¯ç¤ºçš„é é¢æµç¨‹ï¼Œä¾†çœ‹çœ‹ç‰©ä»¶å°å‘æ€ç¶­å¦‚ä½•æ‡‰ç”¨åœ¨é€™ä¸Šé¢ã€‚</p>
<p>è¨»ï¼šé€™è£¡æˆ‘ä¹Ÿæœƒç•¥éé‡‘æµåŠç‰©æµçš„éƒ¨ä»½ï¼Œå› ç‚ºå„å®¶é‡‘æµåŠç‰©æµçš„å¯¦ä½œæ–¹å¼éƒ½ä¸å¤ªä¸€æ¨£ï¼Œè¦å¯«çš„è©±å¯èƒ½åˆæœƒæ˜¯è½è½é•·ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å®šç¾©é é¢é¡¯ç¤ºçš„æµç¨‹">å®šç¾©é é¢é¡¯ç¤ºçš„æµç¨‹</h2>
<p>æš«æ™‚åˆ¥æƒ³å¤ªå¤šï¼Œæˆ‘å€‘å…ˆå°‡å¡«å¯«å€‹äººè³‡æ–™è¡¨å–®é é¢çš„ç”¢ç”Ÿæµç¨‹å®šç¾©ä¸‹ä¾†ï¼š</p>
<ul>
<li>åˆ¤æ–·æ˜¯ä¸æ˜¯å·²ç™»å…¥ï¼Œå¦‚æœæ˜¯å°±å–å¾—è©²æœƒå“¡çš„è³‡æ–™ (ä¸€èˆ¬æ˜¯å¾è³‡æ–™åº«å–å¾—) ã€‚</li>
<li>å¦‚æœä¸æ˜¯æœƒå“¡ (å³è¨ªå®¢) ï¼Œé¡¯ç¤ºç©ºå€¼è¡¨å–®ï¼Œä¸¦é¡¯ç¤ºä¸€å€‹é¸é …è®“è¨ªå®¢æ±ºå®šè¦ä¸è¦æˆç‚ºæœƒå“¡ï¼›å¦å‰‡è¡¨å–®å°±é å…ˆå¸¶å‡ºæœƒå“¡çš„è³‡æ–™ï¼Œä½†ä¸å¿…å†å¡«å¯«è³¼è²·äººçš„è³‡è¨Š (æ”¶è²¨äººå‰‡æ˜¯ä¸€å®šè¦å¡«å¯«çš„ï¼Œé€™æ˜¯ä¸€èˆ¬çµå¸³åŸå‰‡) ã€‚</li>
</ul>
<p>è€Œä¸ç®¡ä½¿ç”¨è€…æ˜¯ä¸æ˜¯æœƒå“¡ï¼Œæˆ‘å€‘éƒ½å…ˆæŠŠè³‡æ–™ç”¢ç”Ÿå‡ºä¾†ï¼Œæ”¾åˆ°ä¸€å€‹ Dictionary ç‰©ä»¶ä¸­ï¼Œä»¥ä¾¿ HTML é é¢å¯ä»¥ç”¨ä¸€è‡´çš„æ–¹å¼é¡¯ç¤ºè³‡æ–™ã€‚</p>
<p>çµå¸³æ™‚è™•ç†æœƒå“¡çš„ç¨‹å¼å¦‚ä¸‹ï¼š</p>
<p>/Checkout.asp</p>
<pre><code>&lt;%
Option Explicit
%&gt;
&lt;!-- #include virtual=&quot;/OOASP/functions/GetObject.asp&quot; --&gt;
&lt;%
Session(&quot;MemberID&quot;) = &quot;A123456789&quot;
' æœƒå“¡ç‰©ä»¶
Dim oMember : Set oMember = GetObject(&quot;Member&quot;)
' æœƒå“¡åˆå§‹åŒ–
oMember.Init
' HTML çš„éƒ¨ä»½åˆ©ç”¨ä¸Šé¢çš„ oMember ä¾†é¡¯ç¤ºè¡¨å–®é é¢
%&gt;
&lt;!-- #include file=&quot;CheckOut.tpl.asp&quot; --&gt;

</code></pre><p>å› ç‚ºåœ¨ ASP ä¸­æˆ‘å€‘æ²’è¾¦æ³•æŠŠè‡ªè¨‚é¡åˆ¥æ‰€ç”¢ç”Ÿçš„ç‰©ä»¶æ”¾åˆ° Session è£¡ï¼Œæ‰€ä»¥é€™é‚Šæˆ‘åªåˆ©ç”¨ Session ä¾†è¨˜ä½æŸå€‹é—œéµå±¬æ€§ã€‚å‡è¨­ç™»å…¥æ™‚ï¼Œ Session(&ldquo;MemberID&rdquo;) æœƒè¨˜ä½æœƒå“¡çš„èº«ä»½è­‰è™Ÿç¢¼ï¼›è€Œé€™å€‹ Session(&ldquo;MemberID&rdquo;) æ˜¯åœ¨ä½¿ç”¨è€…ç‚ºç™»å…¥æ™‚ï¼Œå‰‡æœƒæ˜¯ç©ºå€¼ã€‚</p>
<p>ç„¶å¾Œ HTML é é¢çš„éƒ¨ä»½æˆ‘æ˜¯ç”¨ SSI çš„ Include æ–¹å¼ï¼Œé€™åœ¨å°ç¨‹åºä¸Šéå¸¸å¥½ç”¨ï¼Œä»¥ä¸‹å°±æ˜¯éƒ¨ä»½çš„ HTML ç¢¼ï¼š</p>
<p>/Checkout.tpl.asp</p>
<pre><code>...
&lt;%
' å¦‚æœæ˜¯è¨ªå®¢å°±è¦å¡«å¯«è³¼è²·äººå§“ååŠèº«ä»½è­‰è™Ÿç¢¼
If Not oMember.IsLogin Then
%&gt;
&lt;p&gt;
&lt;label for=&quot;shopper_name&quot; class=&quot;text&quot;&gt;è³¼è²·äººå§“å&lt;/label&gt;
&lt;input type=&quot;text&quot; name=&quot;shopper_name&quot; id=&quot;shopper_name&quot;
value=&quot;&quot; /&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;label for=&quot;shopper_pid&quot; class=&quot;text&quot;&gt;èº«ä»½è­‰è™Ÿç¢¼&lt;/label&gt;
&lt;input type=&quot;text&quot; name=&quot;shopper_pid&quot; id=&quot;shopper_pid&quot;
value=&quot;&quot; /&gt;
&lt;/p&gt;
&lt;%
' å¦‚æœæ˜¯æœƒå“¡å°±ä¸ç”¨å¡«å¯«äº†
Else
%&gt;
&lt;p&gt;
&lt;label for=&quot;shopper_name&quot; class=&quot;text&quot;&gt;è³¼è²·äººå§“å&lt;/label&gt;
&lt;span&gt;&lt;% = oMember.GetField(&quot;Name&quot;) %&gt;&lt;/span&gt;
&lt;input type=&quot;hidden&quot; name=&quot;shopper_name&quot; id=&quot;shopper_name&quot;
value=&quot;&lt;% = oMember.GetField(&quot;Name&quot;) %&gt;&quot; /&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;label for=&quot;shopper_pid&quot; class=&quot;text&quot;&gt;èº«ä»½è­‰è™Ÿç¢¼&lt;/label&gt;
&lt;span&gt;&lt;% = oMember.GetField(&quot;PersonalNumer&quot;) %&gt;&lt;/span&gt;
&lt;input type=&quot;hidden&quot; name=&quot;shopper_pid&quot; id=&quot;shopper_pid&quot;
value=&quot;&lt;% = oMember.GetField(&quot;PersonalNumer&quot;) %&gt;&quot; /&gt;
&lt;/p&gt;
&lt;%
End If
%&gt;
...
&lt;label for=&quot;receiver_name&quot; class=&quot;text&quot;&gt;æ”¶ä»¶äººå§“å&lt;/label&gt;
&lt;input type=&quot;text&quot; name=&quot;receiver_name&quot; id=&quot;receiver_name&quot;
value=&quot;&lt;% = oMember.GetField(&quot;Name&quot;) %&gt;&quot; /&gt;
...
&lt;label for=&quot;receiver_address&quot; class=&quot;text&quot;&gt;æ”¶ä»¶äººåœ°å€&lt;/label&gt;
&lt;input type=&quot;text&quot; name=&quot;receiver_address&quot; id=&quot;receiver_address&quot; /&gt;
...
&lt;%
' åœ¨è¡¨å–®ä¸­åŠ ä¸Šä¸€å€‹ checkbox
' è®“ä½¿ç”¨è€…æ±ºå®šè¦ä¸è¦ç”¨ç¾åœ¨çš„è³‡æ–™æˆç‚ºæœƒå“¡
If Not oMember.IsLogin Then
%&gt;
&lt;fieldset&gt;&lt;legend&gt;é¸é … (éå¿…å¡«) &lt;/legend&gt;
&lt;input type=&quot;checkbox&quot; name=&quot;change_level&quot; id=&quot;change_level&quot; /&gt;
&lt;label for=&quot;change_level&quot;&gt;æ˜¯å¦æˆç‚ºæœƒå“¡ï¼Ÿ&lt;/label&gt;
&lt;/fieldset&gt;
&lt;%
End If
%&gt;
&lt;input type=&quot;submit&quot; value=&quot;ç¢ºå®š&quot; /&gt;
...

</code></pre><p>è¨»ï¼šç‚ºäº†ä¸è®“å¤§å®¶é ­ç—›ï¼Œåœ¨ HTML çš„éƒ¨ä»½æˆ‘çœç•¥æ‰å¾ˆå¤šæ±è¥¿ï¼Œåƒæ˜¯ JavaScript çš„è¡¨å–®é©—è­‰ç­‰ç­‰ï¼Œè«‹å…ˆå°ˆæ³¨åœ¨ ASP ç¨‹å¼ä¸Šå°±å¥½ã€‚</p>
<p>å…¶å¯¦çœ‹èµ·ä¾†ä¹Ÿä¸æœƒå¤ªé›£å—ï¼Ÿè€Œä¸”ä¸ç®¡æ€æ¨£ï¼Œä½¿ç”¨è€…éƒ½ä¸€å®šè¦å¡«å¯«å€‹äººè³‡æ–™ï¼›å› ç‚ºå¦‚æœä½¿ç”¨è€…çš„èº«åˆ†æ˜¯æœƒå“¡æ™‚ï¼Œè³¼è²·äººçš„è¼¸å…¥æ¬„å°±æœƒè®Šæˆéš±è—æ¬„ä½ï¼Œé€™æ¨£è™•ç†è³‡æ–™æ™‚å°±èƒ½å¤ ä¸€è‡´äº† (é™¤äº†è¨ªå®¢å¯èƒ½æœƒæˆç‚ºæœƒå“¡æ™‚) ã€‚</p>
<p>å…ˆä¾†çœ‹çœ‹é¡¯ç¤ºçš„çµæœå¥½äº†ï¼Œå¦‚æœä½¿ç”¨è€…å°šæœªç™»å…¥æˆç‚ºæœƒå“¡æ™‚ï¼Œå°±æœƒé¡¯ç¤ºä»¥ä¸‹ç•«é¢ï¼š</p>
<p><img src="/resources/ooasp_cart/images/01_checkout_guest.gif" alt=""></p>
<p>è€Œå¦‚æœå·²ç¶“ç™»å…¥æˆæœƒå“¡èº«ä»½æ™‚ï¼Œå°±æœƒé¡¯ç¤ºä»¥ä¸‹ç•«é¢ï¼š</p>
<p><img src="/resources/ooasp_cart/images/01_checkout_member.gif" alt=""></p>
<p>é€™æ™‚å€™æœƒå“¡å°±ä¸å¿…å¡«å¯«è³¼è²·äººå§“åå’Œèº«ä»½è­‰äº†ã€‚</p>
<p>è¨»ï¼šç•¶ç„¶å¯¦éš›æ‡‰ç”¨ä¸Šçš„è¡¨å–®æœƒæ¯”è¼ƒè¤‡é›œï¼Œé€™è£¡æˆ‘ç‰¹æ„ç°¡åŒ–äº†ã€‚</p>
<p>å¤§è‡´ç­è§£ç¨‹å¼èˆ‡ç•«é¢å¾Œï¼Œæˆ‘å€‘æ¥ä¸‹ä¾†å°±å¯ä»¥å®Œæˆæœƒå“¡é¡åˆ¥çš„ç¨‹å¼ç¢¼ï¼š</p>
<p>/class/Member.asp</p>
<pre><code>&lt;%
' å®šç¾©å¸¸æ•¸
Const LEVEL_GUEST  = 1   ' è¨ªå®¢
Const LEVEL_MEMBER = 2   ' ä¸€èˆ¬æœƒå“¡
' æœƒå“¡é¡åˆ¥
Class Member
Private Fields
Public IsLogin
' ç‰©ä»¶åˆå§‹åŒ–
Private Sub Class_Initialize()
IsLogin = False
' ç‚ºäº†æ–¹ä¾¿èªªæ˜ï¼Œæˆ‘åªç”¨äº†å¹¾å€‹ç°¡å–®çš„æœƒå“¡å±¬æ€§
Set Fields = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
With Fields
.Add &quot;Level&quot;, LEVEL_GUEST ' é è¨­ç­‰ç´šç‚ºè¨ªå®¢
.Add &quot;Name&quot;, &quot;&quot;           ' é è¨­å§“åç‚ºç©ºå­—ä¸²
.Add &quot;PersonalNumer&quot;, &quot;&quot;  ' é è¨­èº«ä»½è­‰è™Ÿç¢¼ç‚ºç©ºå­—ä¸²
End With
End Sub
' æœƒå“¡åˆå§‹åŒ–
Public Sub Init
Dim sName : sName = &quot;&quot;
Dim iLevel : iLevel = LEVEL_GUEST
Dim sPersonalNumer
sPersonalNumer = UCase(Trim(Session(&quot;MemberID&quot;)))
' å¾ Session å€¼åˆ¤æ–·æ˜¯å¦å·²ç™»å…¥
If sPersonalNumer = &quot;A123456789&quot; Then
sName = &quot;æˆ‘æ˜¯ä¸€èˆ¬æœƒå“¡&quot;
iLevel = LEVEL_MEMBER
IsLogin = True
End If
SetField &quot;Level&quot;, iLevel
SetField &quot;Name&quot;, sName
SetField &quot;PersonalNumer&quot;, sPersonalNumer
End Sub
' è¨­å®šæœƒå“¡å±¬æ€§
Public Sub SetField(sName, vValue)
If Fields.Exists(sName) Then
Fields(sName) = vValue
End If
End Sub
' å–å¾—æœƒå“¡å±¬æ€§
Public Function GetField(sName)
GetField = Null
If Fields.Exists(sName) Then
GetField = Fields(sName)
End If
End Function
' ç‰©ä»¶çµæŸ
Private Sub Class_Terminate()
Set Fields = Nothing
End Sub
End Class
%&gt;

</code></pre><p>è¨»ï¼šæœƒå“¡é¡åˆ¥åšçš„äº‹ç•¶ç„¶ä¸åƒ…é€™äº›ï¼Œé€™è£¡æˆ‘ç°¡åŒ–æ‰å¾ˆå¤šåŠŸèƒ½ï¼Œåƒæ˜¯ Login æ–¹æ³•ç­‰ï¼›ç›®å‰æˆ‘åªéœ€è¦è®“ç¯„ä¾‹èƒ½å¤ æˆåŠŸåŸ·è¡Œï¼Œè®“å¤§å®¶èƒ½å¤ å°ˆæ³¨åœ¨é é¢çš„æµç¨‹ä¸Šã€‚</p>
<h2 id="æµç¨‹çš„æ”¹è®Š">æµç¨‹çš„æ”¹è®Š</h2>
<p>ä¸éä¸Šé¢çš„åšæ³•è®“æˆ‘è¦ºå¾—å¿ƒç¥ä¸å¯§ï¼Œå› ç‚ºæˆ‘ç¸½æ˜¯èªç‚ºå®¢æˆ¶çµ•å°ä¸æœƒå°±é€™æ¨£æ»¿è¶³ã€‚æœä¸å…¶ç„¶ï¼Œæ²’å¤šä¹…å®¢æˆ¶å°±è¦æˆ‘å€‘åŠ ä¸Š VIP æœƒå“¡çš„æµç¨‹ã€‚ä¸€æ¨£ç‚ºäº†ç°¡åŒ–èªªæ˜ï¼Œé€™è£¡æˆ‘å…ˆæŠŠæ–°çš„æµç¨‹å®šç¾©å¦‚ä¸‹ï¼š</p>
<ul>
<li>åˆ¤æ–·æ˜¯ä¸æ˜¯å·²ç™»å…¥ï¼Œå¦‚æœæ˜¯å°±å–å¾—è©²æœƒå“¡çš„è³‡æ–™ (ä¸€èˆ¬æ˜¯å¾è³‡æ–™åº«å–å¾—) ã€‚</li>
<li>å¦‚æœä¸æ˜¯æœƒå“¡ (å³è¨ªå®¢) ï¼Œé¡¯ç¤ºç©ºå€¼è¡¨å–®ï¼Œä¸¦é¡¯ç¤ºä¸€å€‹é¸é …è®“è¨ªå®¢æ±ºå®šè¦ä¸è¦æˆç‚ºæœƒå“¡ï¼›å¦å‰‡è¡¨å–®å°±é å…ˆå¸¶å‡ºæœƒå“¡çš„è³‡æ–™ï¼Œä½†ä¸å¿…å†å¡«å¯«è³¼è²·äººçš„è³‡è¨Š (è‡³æ­¤éƒ½å’Œå‰é¢çš„è¦å‰‡ä¸€æ¨£) ã€‚</li>
<li>å¦‚æœæ˜¯ä¸€èˆ¬æœƒå“¡ï¼Œå°±è¦é¡¯ç¤ºå‡ç´šç‚º VIP æœƒå“¡çš„é¸é …ï¼›å¦‚æœæ˜¯ VIP æœƒå“¡ï¼Œè¦é¡å¤–é¡¯ç¤ºå¯ç”¨æŠ˜æ‰£é¡åº¦åŠæŠ˜æ‰£è¼¸å…¥çš„æ¬„ä½ã€‚</li>
</ul>
<p>è¨»ï¼šäº‹å¯¦ä¸Šï¼Œæˆ‘åœ¨å°ˆæ¡ˆè£¡æ‰€åŠ å…¥çš„åŠŸèƒ½é æ¯”å–®ç´”åŠ ä¸Š VIP æœƒå“¡æµç¨‹è¤‡é›œï¼›é€™è£¡åªæ˜¯ç‚ºäº†è®“å¤§å®¶å®¹æ˜“é€²å…¥ç‹€æ³ï¼Œæˆ‘ç‰¹åœ°ä»¥é€™ç¨®æ¯”è¼ƒç°¡å–®çš„æ–¹å¼ä¾†èªªæ˜ã€‚</p>
<p>æˆ‘å€‘å…ˆä¾†çœ‹çœ‹ç•«é¢æœ‰ä»€éº¼å·®åˆ¥ï¼Œé¦–å…ˆæ˜¯è¨ªå®¢ï¼š</p>
<p><img src="/resources/ooasp_cart/images/02_checkout_guest.gif" alt=""></p>
<p>æˆ‘å€‘å¯ä»¥çœ‹åˆ°è¨ªå®¢çš„è¡¨å–®è·Ÿå‰é¢æ˜¯ä¸€æ¨£çš„ã€‚</p>
<p>æ¥ä¸‹ä¾†æ˜¯ä¸€èˆ¬æœƒå“¡çš„è¡¨å–®ç•«é¢ï¼š</p>
<p><img src="/resources/ooasp_cart/images/02_checkout_member.gif" alt=""></p>
<p>å¦‚ä¸Šåœ–æ‰€ç¤ºï¼Œä¸€èˆ¬æœƒå“¡å¤šäº†ä¸€å€‹æ˜¯å¦å‡ç´šç‚º VIP æœƒå“¡çš„é¸é …ã€‚</p>
<p>æœ€å¾Œæ˜¯æ–°å¢çš„ VIP æœƒå“¡è¡¨å–®ç•«é¢ï¼š</p>
<p><img src="/resources/ooasp_cart/images/02_checkout_vip.gif" alt=""></p>
<p>å¾ˆæ¸…æ¥šåœ°ï¼Œä¸‰ç¨®ä¸åŒç­‰ç´šçš„ä½¿ç”¨è€…éƒ½æœ‰ä¸åŒé¸é …ï¼Œæ‰€ä»¥æˆ‘å€‘çš„ç¨‹å¼ä¹Ÿè¦æœ‰æ‰€å› æ‡‰ã€‚</p>
<p>ä¸éæœƒå“¡é¡åˆ¥çš„éƒ¨ä»½å…¶å¯¦å¯ä»¥ä¸ç”¨è®Šå‹•ï¼Œå› ç‚ºå¯¦éš›ä¸Šæœƒå“¡è³‡æ–™æ˜¯å¾è³‡æ–™åº«å–å¾—çš„ï¼›ä½†ç‚ºäº†æ¨¡æ“¬ç¨‹å¼æ•ˆæœï¼Œæˆ‘é‚„æ˜¯åŠ å…¥äº† VIP æœƒå“¡çš„å¸¸æ•¸å®šç¾©åŠç¨‹å¼åˆ¤æ–·ï¼š</p>
<p>/class/Member.asp</p>
<pre><code>' å®šç¾©å¸¸æ•¸
Const LEVEL_GUEST  = 1   ' è¨ªå®¢
Const LEVEL_MEMBER = 2   ' ä¸€èˆ¬æœƒå“¡
Const LEVEL_VIP    = 3   ' VIP æœƒå“¡
' æœƒå“¡é¡åˆ¥
Class Member
...
' æœƒå“¡åˆå§‹åŒ–
Public Sub Init
...
' å¾ Session å€¼åˆ¤æ–·æ˜¯å¦å·²ç™»å…¥
Select Case sPersonalNumer
Case &quot;A123456789&quot;
sName = &quot;ä¸€èˆ¬æœƒå“¡&quot;
iLevel = LEVEL_MEMBER
IsLogin = True
      Case &quot;V123456789&quot;
        sName = &quot; VIP æœƒå“¡&quot;
        iLevel = LEVEL_VIP
        IsLogin = True
End Select
...
End Sub
...
End Class

</code></pre><p>è‡³æ–¼ Checkout.asp å°±æš«æ™‚ä¸ç”¨ä¿®æ”¹äº†ï¼Œä¸»è¦çš„è®ŠåŒ–æ˜¯åœ¨ HTML é é¢ä¸Šï¼Œå› æ­¤æˆ‘å€‘å¯ä»¥å°‡ HTML é é¢çš„é¸é …å€ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<p>/Checkout.tpl.asp</p>
<pre><code>...
&lt;fieldset&gt;&lt;legend&gt;é¸é … (éå¿…å¡«) &lt;/legend&gt;
&lt;%
' åœ¨è¡¨å–®ä¸­åŠ ä¸Šä¸€å€‹ checkbox
' è®“ä½¿ç”¨è€…æ±ºå®šè¦ä¸è¦ç”¨ç¾åœ¨çš„è³‡æ–™æˆç‚ºæœƒå“¡
If Not oMember.IsLogin Then
%&gt;
&lt;input type=&quot;checkbox&quot; name=&quot;change_level&quot; id=&quot;change_level&quot; /&gt;
&lt;label for=&quot;change_level&quot;&gt;æ˜¯å¦æˆç‚ºæœƒå“¡ï¼Ÿ&lt;/label&gt;
&lt;%
' åœ¨è¡¨å–®ä¸­åŠ ä¸Šä¸€å€‹ checkbox
' è®“ä¸€èˆ¬æœƒå“¡æ±ºå®šè¦ä¸è¦å‡ç´šç‚º VIP æœƒå“¡
ElseIf LEVEL_MEMBER = oMember.GetField(&quot;Level&quot;) Then
%&gt;
&lt;input type=&quot;checkbox&quot; name=&quot;change_level&quot; id=&quot;change_level&quot; /&gt;
&lt;label for=&quot;change_level&quot;&gt;æ˜¯å¦å‡ç´šç‚º VIP æœƒå“¡ï¼Ÿ&lt;/label&gt;
&lt;%
' åœ¨è¡¨å–®ä¸­åŠ ä¸Šä¸€å€‹æ–‡å­—æ¬„ä½
' è®“ VIP æœƒå“¡ä½¿ç”¨é»æ•¸
ElseIf LEVEL_VIP = oMember.GetField(&quot;Level&quot;) Then
%&gt;
&lt;p&gt;æ‚¨å¯ç”¨çš„ ECoupon é»æ•¸ï¼š100&lt;/p&gt;
&lt;label for=&quot;ecoupon_number&quot;&gt;è¼¸å…¥æ¬²ä½¿ç”¨çš„ ECoupon é»æ•¸ï¼š&lt;/label&gt;
&lt;input type=&quot;text&quot; name=&quot;ecoupon_number&quot; id=&quot;ecoupon_number&quot; size=&quot;10&quot; /&gt;
&lt;%
End If
%&gt;
&lt;/fieldset&gt;

</code></pre><p>ä½†æ˜¯æˆ‘ä»”ç´°æ€è€ƒäº†ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘å€‘å†ç”¨ If Else çµæ§‹ï¼Œå¾€å¾Œç¶­è­·è‚¯å®šå¾ˆéº»ç…©ï¼Œè€Œä¸” Checkout.tpl.asp çš„æ¶æ§‹æœƒè®Šå¾—éå¸¸ä¹‹é¾å¤§ï¼Œé€™å¯ä¸æ˜¯æˆ‘æ¨‚æ„è¦‹åˆ°çš„ã€‚</p>
<p>è¨»ï¼šä¸Šé¢ç¨‹å¼ä¹‹æ‰€ä»¥çœ‹èµ·ä¾†å¾ˆç°¡å–®çš„åŸå› ï¼Œæ˜¯å› ç‚ºæˆ‘ç°¡ç•¥æ‰å¾ˆå¤šç´°ç¯€ã€‚</p>
<h2 id="æµç¨‹æŠ½è±¡åŒ–">æµç¨‹æŠ½è±¡åŒ–</h2>
<p>æˆ‘é‡æ–°æ­¸ç´ä¸¦ä¸”åˆ†é–‹ä¸‰ç¨®è§’è‰²çš„æµç¨‹ï¼Œçœ‹çœ‹å®ƒå€‘åˆ°åº•æœ‰ä»€éº¼ä¸åŒã€‚</p>
<p>è¨ªå®¢ï¼š</p>
<ul>
<li>å»ºç«‹ç©ºçš„æœƒå“¡è³‡æ–™ï¼Œè³¼è²·äººæ¬„ä½ç‚ºå¯å¡«ã€‚</li>
<li>é¡¯ç¤ºæ”¶è²¨äººçš„å¡«å¯«æ¬„ä½ã€‚</li>
<li>åŠ ä¸Šä¸€å€‹è©¢å•æ˜¯ä¸æ˜¯è¦æˆç‚ºæœƒå“¡çš„é¸é …ã€‚</li>
</ul>
<p>ä¸€èˆ¬æœƒå“¡ï¼š</p>
<ul>
<li>é å…ˆå¸¶å‡ºæœƒå“¡çš„è³‡æ–™ï¼Œä½†è³¼è²·äººæ¬„ä½è®Šç‚ºä¸å¯å¡«ã€‚</li>
<li>é¡¯ç¤ºæ”¶è²¨äººçš„å¡«å¯«æ¬„ä½ã€‚</li>
<li>åŠ ä¸Šå‡ç´šç‚º VIP æœƒå“¡çš„é¸é …ã€‚</li>
</ul>
<p>VIP æœƒå“¡ï¼š</p>
<ul>
<li>é å…ˆå¸¶å‡º VIP æœƒå“¡çš„è³‡æ–™ï¼Œä½†è³¼è²·äººæ¬„ä½è®Šç‚ºä¸å¯å¡«ã€‚</li>
<li>é¡¯ç¤ºæ”¶è²¨äººçš„å¡«å¯«æ¬„ä½ã€‚</li>
<li>é¡¯ç¤ºå¯ç”¨æŠ˜æ‰£é¡åº¦ã€‚</li>
</ul>
<p>çœ‹èµ·ä¾†åªæœ‰ç¬¬äºŒå€‹æ­¥é©Ÿæ˜¯ä¸€æ¨£çš„ï¼Œç¬¬ä¸€æ­¥å’Œç¬¬ä¸‰æ­¥å¥½åƒéƒ½ä¸å¤ªä¸€æ¨£ï¼Œä½†æ˜¯çœŸçš„æ˜¯ä¸ä¸€æ¨£å—ï¼Ÿ</p>
<p>åœ¨ä¸‰å€‹è§’è‰²çš„ç¬¬ä¸€å€‹æ­¥é©Ÿè£¡ï¼Œä¸ç®¡æ˜¯å»ºç«‹ç©ºçš„æœƒå“¡è³‡æ–™æˆ–æ˜¯å¾è³‡æ–™åº«è®€å–æœƒå“¡è³‡æ–™ï¼Œæœ€å¾Œä¸æ˜¯éƒ½æœƒåœ¨ HTML é é¢ä¸Šé¡¯ç¤ºè³¼è²·äººæ¬„ä½å—ï¼Ÿå·®åˆ¥åªæ˜¯è¦ä¸è¦å¡«å¯«è€Œå·²ã€‚å¾é€™å€‹æ–¹å‘å»æƒ³ï¼Œå…¶å¯¦å®ƒå€‘åšçš„äº‹æ˜¯æ»¿ç›¸åƒçš„ã€‚</p>
<p>åŒæ¨£åœ°å°ç¬¬ä¸‰å€‹æ­¥é©Ÿä¾†èªªï¼Œæ¯ç¨®å±¤ç´šéƒ½æœƒæœ‰ä¸åŒçš„é™„å±¬ç•«é¢ï¼Œä¾‹å¦‚è¨ªå®¢æœ‰è©¢å•æ˜¯å¦è¦æˆç‚ºæœƒå“¡çš„é¸é …ï¼Œè€Œ VIP æœƒå“¡æœƒæœ‰ä¸€å€‹é¡å¤–é¡¯ç¤ºå¯æŠ˜æ‰£é¡åº¦çš„åŠŸèƒ½ï¼›å…¶å¯¦æˆ‘å€‘ä¹Ÿå¯ä»¥å°‡å®ƒè¦–ç‚ºé™„å±¬åœ¨é¡¯ç¤ºè¡¨å–®æµç¨‹è£¡ã€‚</p>
<p>å› æ­¤ä¸ç®¡æ˜¯å“ªä¸€å€‹è§’è‰²ï¼Œæˆ‘å€‘éƒ½èƒ½å¾—åˆ°ä¸€å€‹åŸºæœ¬çš„æ¦‚å¿µæµç¨‹ï¼š</p>
<ul>
<li>å–å¾—è§’è‰²è³‡æ–™ï¼Œæ±ºå®šæ˜¯å¦è®“ä½¿ç”¨è€…å¡«å¯«è³¼è²·äººè³‡è¨Šã€‚</li>
<li>é¡¯ç¤ºæ”¶è²¨äººçš„å¡«å¯«æ¬„ä½ã€‚</li>
<li>ä¾ç…§ä½¿ç”¨è€…ç­‰ç´šæ±ºå®šè¡¨å–®æ‰€ä»¥é¡¯ç¤ºçš„é¡å¤–è³‡è¨Šã€‚</li>
</ul>
<p>é€™å°±æ˜¯æµç¨‹æŠ½è±¡åŒ–ã€‚</p>
<h2 id="template-method-æ¨¡å¼">Template Method æ¨¡å¼</h2>
<h3 id="ä»€éº¼æ˜¯-template-method">ä»€éº¼æ˜¯ Template Method</h3>
<p>æŠ½è±¡åŒ–æœ‰ä»€éº¼å¥½è™•é‚„è¨˜å¾—å—ï¼Ÿæ²’éŒ¯ï¼å°±æ˜¯å¯ä»¥ç”¨ç›¸åŒçš„æ–¹å¼ä¾†è™•ç†ä¸åŒçš„é‚è¼¯ã€‚æˆ‘å€‘å·²ç¶“å°‡ä¸Šé¢ä¸‰ç¨®æœƒå“¡çš„çµå¸³è¡¨å–®é¡¯ç¤ºæµç¨‹æ­¸ç´å‡ºäº†ç›¸åŒçš„æŠ½è±¡çµæ§‹ï¼Œæ‰€ä»¥æˆ‘å€‘æ˜¯ä¸æ˜¯èƒ½ç”¨ç›¸åŒçš„æ–¹å¼ä¾†è™•ç†å®ƒå€‘å‘¢ï¼Ÿé€™æ™‚å€™å°±æ˜¯ Template Method æ¨¡å¼å¤§å±•èº«æ‰‹çš„æ™‚æ©Ÿäº†ã€‚</p>
<p>Template Method çš„åŸºæœ¬æ¦‚å¿µå°±æ˜¯åœ¨çˆ¶é¡åˆ¥ (Base) çš„æŸå€‹æ–¹æ³• (Run) ä¸­å®šç¾©å¥½ä¸€å€‹æµç¨‹éª¨æ¶ï¼Œç„¶å¾Œè®“å­é¡åˆ¥ (ConcreteClass) ç¹¼æ‰¿ï¼Œå†ç”±å­é¡åˆ¥å»å¯¦ä½œæµç¨‹ä¸­çš„æ¯å€‹æ­¥é©Ÿã€‚æˆ‘å€‘å¯ä»¥ç”¨ä»¥ä¸‹çš„ UML åœ–ä¾†è¡¨ç¤ºï¼š</p>
<p><img src="/resources/ooasp_cart/images/template_method.png" alt="Template Method UML"></p>
<p>å¦‚ä½ æ‰€è¦‹ï¼Œ Base é¡åˆ¥çš„ Run å‡½å¼å®šç¾©å¥½äº†æ•´å€‹æµç¨‹éª¨æ¶ï¼Œè€Œå®ƒå°±ä¸èƒ½è¢«å­é¡åˆ¥æ‰€è¦†å¯«ï¼Œä»¥å…æ‰“äº‚äº†æ•´å€‹æµç¨‹ã€‚é€™åœ¨è‰¯å¥½ç‰©ä»¶å°å‘ç‰¹æ€§èªè¨€è£¡ï¼Œå¯ä»¥ç”¨ final é—œéµå­—ä¾†æŒ‡å®šã€‚</p>
<p>æ‰€ä»¥å­é¡åˆ¥ (ConcreteClass) åªéœ€è¦é—œå¿ƒæ­¥é©Ÿçš„å¯¦ä½œï¼Œè€ŒåŸ·è¡Œçš„é †åºæ—©å·²ç”± Base é¡åˆ¥çš„ Run å‡½å¼æ±ºå®šå¥½äº†ã€‚ä¹Ÿå› æ­¤æ¯å€‹è§’è‰²çš„æµç¨‹é›–ç„¶éƒ½ä¸€æ¨£ï¼Œä½†é€éå­é¡åˆ¥ä¸Šå„æ­¥é©Ÿå¯¦ä½œä¸Šçš„ä¸åŒï¼Œæˆ‘å€‘å°±èƒ½å¤ æ¸…æ¥šåœ°åˆ†é›¢æ¯å€‹è§’è‰²è©²åšçš„äº‹ã€‚</p>
<h3 id="å¦‚ä½•å¯¦ä½œ-template-method">å¦‚ä½•å¯¦ä½œ Template Method</h3>
<p>å…ˆå‰æé ASPUnit ç”¨åˆ°äº†ä¸€å€‹ Template Method æ¨¡å¼ï¼Œä½†æ˜¯æ²’æœ‰ç¹¼æ‰¿æ©Ÿåˆ¶çš„ ASP å¦‚ä½•å¯¦ä½œ Template Method å‘¢ï¼Ÿ</p>
<p>Template Method è£¡æœ‰å¥åè¨€ï¼š Don&rsquo;t Call Me, I Call You!</p>
<p>æ„æ€å°±æ˜¯çˆ¶é¡åˆ¥æœƒå»å‘¼å«å­é¡åˆ¥çš„æ–¹æ³•ï¼›é›–ç„¶åœ¨ä¼¼é¡ Java çš„èªè¨€è£¡ï¼Œå¯¦éš›åŸ·è¡Œå‹•ä½œçš„é‚„æ˜¯å­é¡åˆ¥çš„å¯¦é«” (å› ç‚ºçˆ¶é¡åˆ¥æ˜¯æŠ½è±¡çš„) ï¼Œä½†æ˜¯åœ¨ ASP ä¸­å»çœŸçš„æ˜¯ç”±çˆ¶é¡åˆ¥çš„å¯¦é«”å»å‘¼å«å­é¡åˆ¥çš„å¯¦é«”ï¼</p>
<p>é‚„æ˜¯å¯¦éš›ç”¨å‰é¢çš„ä¾‹å­ä¾†ç¤ºç¯„å¥½äº†ï¼Œé¦–å…ˆæˆ‘å…ˆæŠŠ Checkout.asp æ”¹ä¸€ä¸‹ï¼Œè®“å¤§å®¶æ¸…æ¥šç¨‹å¼æœƒæ€éº¼è·‘ï¼š</p>
<p>/Checkout.asp</p>
<pre><code>&lt;%
Option Explicit
%&gt;
&lt;!-- #include virtual=&quot;/OOASP/functions/GetObject.asp&quot; --&gt;
&lt;!-- #include file=&quot;class/CheckoutForm.asp&quot; --&gt;
&lt;%
Session(&quot;MemberID&quot;) = &quot;A123456789&quot;
' æœƒå“¡ç‰©ä»¶
Dim oMember : Set oMember = GetObject(&quot;Member&quot;)
' æœƒå“¡åˆå§‹åŒ–
oMember.Init
' å»ºç«‹è¡¨å–®é¡¯ç¤ºç‰©ä»¶
' å› ç‚ºç”¨åˆ°äº† SSI æŒ‡ä»¤ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ GetObject ä¾†å»ºç«‹ç‰©ä»¶
Dim oCheckoutForm : Set oCheckoutForm = New CheckoutForm
oCheckoutForm.SetMember oMember
oCheckoutForm.Display
%&gt;

</code></pre><p>ä½ æ‡‰è©²æœƒç™¼ç¾åŸä¾†çš„ SSI Include æŒ‡ä»¤è¢«æˆ‘æ›æˆä¸€å€‹ CheckoutForm é¡åˆ¥ç‰©ä»¶äº†ï¼Œå®ƒæ‰®æ¼”çš„è§’è‰²å°±æ˜¯ Template Method ä¸­çš„çˆ¶é¡åˆ¥ï¼Œä¹Ÿå°±æ˜¯è² è²¬å®šç¾©æµç¨‹éª¨æ¶çš„è§’è‰²ã€‚</p>
<p>æ¥ä¸‹ä¾†æ˜¯ CheckoutForm é¡åˆ¥ï¼Œå®ƒæ˜¯ç”¨ä¾†é¡¯ç¤ºè¡¨å–®çš„ï¼š</p>
<p>/class/CheckoutForm.asp</p>
<pre><code>&lt;!-- #include file=&quot;GuestCheckoutForm.asp&quot; --&gt;
&lt;!-- #include file=&quot;MemberCheckoutForm.asp&quot; --&gt;
&lt;!-- #include file=&quot;VIPCheckoutForm.asp&quot; --&gt;
&lt;%
Class CheckoutForm
' å¯¦é«”ç‰©ä»¶
Private ConcreteObject
' è¢«ç¹¼æ‰¿çš„ç‰©ä»¶
Public Prototype
' æœƒå“¡
Public Member
' æœƒå“¡å±¤ç´šçš„å°æ‡‰è¡¨
Private LevelList
' ç‰©ä»¶åˆå§‹åŒ–
Private Sub Class_Initialize()
Set ConcreteObject = Me
Set Prototype = Me
Set LevelList = _
Server.CreateObject(&quot;Scripting.Dictionary&quot;)
With LevelList
.Add LEVEL_GUEST, &quot;Guest&quot;
.Add LEVEL_MEMBER, &quot;Member&quot;
.Add LEVEL_VIP, &quot;VIP&quot;
End With
End Sub
' è¨­å®šæœƒå“¡
Public Sub SetMember(oMember)
Set Member = oMember
Set ConcreteObject = Me
On Error Resume Next
Execute &quot;Set ConcreteObject = New &quot; &amp;amp; _
LevelList(oMember.GetField(&quot;Level&quot;)) &amp;amp; _
&quot;CheckoutForm&quot;
On Error Goto 0
Set ConcreteObject.Prototype = Me
End Sub
' é¡¯ç¤ºè¡¨å–®
Public Sub Display()
%&gt;&lt;!-- #include file=&quot;../CheckOut.tpl.asp&quot; --&gt;&lt;%
End Sub
' é¡¯ç¤ºè³¼è²·äººæ¬„ä½
Public Sub DisplayShopperFields()
%&gt;&lt;p&gt;
&lt;label for=&quot;shopper_name&quot; class=&quot;text&quot;&gt;è³¼è²·äººå§“å&lt;/label&gt;
&lt;span&gt;&lt;% = Prototype.Member.GetField(&quot;Name&quot;) %&gt;&lt;/span&gt;
&lt;input type=&quot;hidden&quot; name=&quot;shopper_name&quot; id=&quot;shopper_name&quot;
value=&quot;&lt;% = Prototype.Member.GetField(&quot;Name&quot;) %&gt;&quot; /&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;label for=&quot;shopper_pid&quot; class=&quot;text&quot;&gt;èº«ä»½è­‰è™Ÿç¢¼&lt;/label&gt;
&lt;span&gt;&lt;% = Prototype.Member.GetField(&quot;PersonalNumer&quot;) %&gt;&lt;/span&gt;
&lt;input type=&quot;hidden&quot; name=&quot;shopper_pid&quot; id=&quot;shopper_pid&quot;
value=&quot;&lt;% = Prototype.Member.GetField(&quot;PersonalNumer&quot;) %&gt;&quot; /&gt;
&lt;/p&gt;&lt;%
End Sub
' é¡¯ç¤ºæ”¶è²¨äººæ¬„ä½
Public Sub DisplayReceiverFields()
%&gt;&lt;p&gt;
&lt;label for=&quot;receiver_name&quot; class=&quot;text&quot;&gt;æ”¶ä»¶äººå§“å&lt;/label&gt;
&lt;input type=&quot;text&quot; name=&quot;receiver_name&quot; id=&quot;receiver_name&quot;
value=&quot;&lt;% = Prototype.Member.GetField(&quot;Name&quot;) %&gt;&quot; /&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;label for=&quot;receiver_address&quot; class=&quot;text&quot;&gt;æ”¶ä»¶äººåœ°å€&lt;/label&gt;
&lt;input type=&quot;text&quot; name=&quot;receiver_address&quot; id=&quot;receiver_address&quot; /&gt;
&lt;/p&gt;&lt;%
End Sub
' é¡¯ç¤ºé¸æ“‡æ¬„ä½
Public Sub DisplayOptionFields()
End Sub
' ç‰©ä»¶çµæŸ
Private Sub Class_Terminate()
Set ConcreteObject = Nothing
Set Prototype = Nothing
Set LevelList = Nothing
Set Member = Nothing
End Sub
End Class
%&gt;

</code></pre><p>æ³¨æ„ï¼Œæˆ‘å€‘åœ¨ SetMember å‡½å¼è£¡ç”¨äº† Factory Method æ¨¡å¼ï¼Œå®ƒæœƒå¹«åŠ©æˆ‘å€‘è‡ªå‹•ç”¢ç”Ÿå°æ‡‰çš„ CheckoutForm è¡ç”Ÿç‰©ä»¶ã€‚</p>
<p>åœ¨ CheckoutForm é¡åˆ¥ä¸­ï¼Œ Display å‡½å¼å°±æ˜¯ä¸€å€‹ Template Method ï¼›çœ‹èµ·ä¾†å®ƒåªæ˜¯å°‡åŸä¾†å¼•å…¥ Checkout.tpl.asp çš„å‹•ä½œæ¬éä¾†è€Œå·²ï¼Œä½†é€™å…¶å¯¦æ˜¯å‘Šè¨´æˆ‘å€‘æµç¨‹å·²ç¶“å®šç¾©åœ¨ Checkout.tpl.asp è£¡ï¼š</p>
<p>/Checkout.tpl.asp</p>
<pre><code>...
&lt;fieldset&gt;&lt;legend&gt;è³¼è²·äººè³‡è¨Š&lt;/legend&gt;
&lt;% ConcreteObject.DisplayShopperFields %&gt;
&lt;/fieldset&gt;
&lt;fieldset&gt;&lt;legend&gt;æ”¶ä»¶äººè³‡è¨Š&lt;/legend&gt;
&lt;% ConcreteObject.DisplayReceiverFields %&gt;
&lt;/fieldset&gt;
&lt;fieldset&gt;&lt;legend&gt;é¸é … (éå¿…å¡«) &lt;/legend&gt;
&lt;% ConcreteObject.DisplayOptionFields %&gt;
&lt;/fieldset&gt;
...

</code></pre><p>è€Œ DisplayShopperFields ã€ DisplayReceiverFields ã€ DisplayOptionFields å°±æ˜¯æˆ‘å€‘çš„æ­¥é©Ÿå‡½å¼ï¼Œä¹Ÿå°±æ˜¯èªªå­é¡åˆ¥åªéœ€è¦å¯¦ä½œé€™ä¸‰å€‹å‡½å¼å³å¯ã€‚ç•¶ç„¶åœ¨ CheckoutForm é¡åˆ¥è£¡ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥æŠŠé è¨­çš„å‹•ä½œå¯«ä¸Šå»ï¼Œé€™æ¨£å­é¡åˆ¥å¦‚æœæœ‰ä¸æƒ³è¦†å¯«çš„æ­¥é©Ÿï¼Œå°±å¯ä»¥è½‰äº¤çµ¦çˆ¶é¡åˆ¥åŸ·è¡Œã€‚</p>
<p>å¯æ˜¯åˆ°åº•è¦æ€éº¼æ¨¡æ“¬ç¹¼æ‰¿å‘¢ï¼Ÿ ASPUnit æ¡ç”¨äº†ä¸€å€‹å¾ˆè°æ˜çš„ä½œæ³•ï¼Œä¹Ÿå°±æ˜¯åéä¾†å°‡å­é¡åˆ¥çš„æ–¹æ³•æˆ–å±¬æ€§ï¼Œç§»äº¤çµ¦çˆ¶é¡åˆ¥ä¾†åŸ·è¡Œã€‚</p>
<p>ä»€éº¼æ„æ€å‘¢ï¼Ÿé¦–å…ˆæˆ‘å€‘åœ¨çˆ¶é¡åˆ¥ä¸­å®šç¾©äº†å…©å€‹å±¬æ€§ï¼š Prototype åŠ ConcreteObject ï¼Œè€Œåœ¨å­é¡åˆ¥ä¸­å®šç¾©äº†ä¸€å€‹ Prototype å±¬æ€§ã€‚åœ¨ CheckForm é¡åˆ¥å¯¦é«”åŒ–æ™‚ï¼ŒæŠŠ Prototype åŠ ConcreteObject å…©å€‹å±¬æ€§éƒ½æŒ‡å‘è‡ªå·± (Me) ã€‚</p>
<p>è€Œåœ¨ Factory Method (ä¹Ÿå°±æ˜¯ SetMember) åŸ·è¡Œå¾Œï¼Œå°±æœƒæŠŠ ConcreteObject æŒ‡å‘çœŸæ­£çš„å­é¡åˆ¥ (GuestCheckoutForm ã€ MemberCheckoutForm ã€ VIPCheckoutForm å…¶ä¸­ä¹‹ä¸€) çš„å¯¦é«”ï¼›ä¸¦ä¸”åŒæ™‚å°‡å­é¡åˆ¥çš„ Prototype å±¬æ€§æŒ‡å‘ CheckoutForm çš„å¯¦é«” (Me) ï¼Œè®“é›™æ–¹éƒ½èƒ½åŒæ™‚ç›¸äº’åƒè€ƒã€‚</p>
<p>å¦‚æ­¤ä¸€ä¾†ï¼Œçˆ¶é¡åˆ¥å°±æœƒé€é ConcreteObject ä¾†å‘¼å«å­é¡åˆ¥ï¼›å¦‚æœå­é¡åˆ¥æœ‰ä¸æƒ³å¯¦ä½œçš„å‡½å¼ï¼Œå°±é€é Prototype å±¬æ€§æŠŠè¦æ±‚è½‰äº¤çµ¦çˆ¶é¡åˆ¥ï¼›æ•´å€‹åŸ·è¡Œçš„è§’è‰²å°±æ˜¯çˆ¶é¡åˆ¥ï¼Œè€Œé€™å…¶ä¸­çš„é—œéµå°±æ˜¯ SetMember å‡½å¼ã€‚</p>
<p>æ›å¥è©±èªªï¼Œæˆ‘å€‘åœ¨åŸ·è¡Œæ™‚æœŸåªæœƒæ“ä½œåˆ°çˆ¶é¡åˆ¥çš„å¯¦é«”ã€‚è‡³æ–¼å­é¡åˆ¥çš„å¯¦é«”ï¼Œå‰‡æ˜¯ç”±çˆ¶é¡åˆ¥å¯¦é«”è‡ªè¡Œç”¢ç”Ÿä¸¦æ§åˆ¶ã€‚</p>
<p>æˆ‘æƒ³ä½ å¤§æ¦‚å·²ç¶“æ˜äº†å§ï¼Ÿç›´æ¥çœ‹çœ‹ CheckoutForm çš„å­é¡åˆ¥å¥½äº†ï¼š</p>
<p>/class/GuestCheckoutForm.asp</p>
<pre><code>&lt;%
Class GuestCheckoutForm ' Extends CheckoutForm
' è¢«ç¹¼æ‰¿çš„ç‰©ä»¶
Public Prototype
' é¡¯ç¤ºè³¼è²·äººæ¬„ä½
Public Sub DisplayShopperFields()
%&gt;&lt;p&gt;
&lt;label for=&quot;shopper_name&quot; class=&quot;text&quot;&gt;è³¼è²·äººå§“å&lt;/label&gt;
&lt;input type=&quot;text&quot; name=&quot;shopper_name&quot; id=&quot;shopper_name&quot;
value=&quot;&quot; /&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;label for=&quot;shopper_pid&quot; class=&quot;text&quot;&gt;èº«ä»½è­‰è™Ÿç¢¼&lt;/label&gt;
&lt;input type=&quot;text&quot; name=&quot;shopper_pid&quot; id=&quot;shopper_pid&quot;
value=&quot;&quot; /&gt;
&lt;/p&gt;&lt;%
End Sub
' é¡¯ç¤ºæ”¶è²¨äººæ¬„ä½
Public Sub DisplayReceiverFields()
Prototype.DisplayReceiverFields
End Sub
' é¡¯ç¤ºé¸æ“‡æ¬„ä½
Public Sub DisplayOptionFields()
%&gt;&lt;input type=&quot;checkbox&quot; name=&quot;change_level&quot; id=&quot;change_level&quot; /&gt;
&lt;label for=&quot;change_level&quot;&gt;æ˜¯å¦æˆç‚ºæœƒå“¡ï¼Ÿ&lt;/label&gt;&lt;%
End Sub
End Class
%&gt;

</code></pre><p>ç”±æ–¼ GuestCheckoutForm çš„è³¼è²·äººæ¬„ä½å’Œå…¶ä»–å…©å€‹é¡åˆ¥ä¸åŒï¼Œæ‰€ä»¥æˆ‘è¦†å¯«äº† CheckoutForm çš„ DisplayShopperFields å‡½å¼ï¼Œè€Œ DisplayOptionFields ä¹Ÿæ˜¯ä¸€æ¨£ã€‚ä½†æ˜¯å› ç‚º DisplayReceiverFields ç”¨é è¨­çš„å³å¯ï¼Œå› æ­¤æˆ‘ä¾¿é€é Prototype ä¾†å‘¼å«çˆ¶é¡åˆ¥å¯¦é«”è£¡çš„ DisplayReceiverFields å‡½å¼ã€‚</p>
<p>å¦å¤–æˆ‘æŠŠ HTML é é¢ä¸­å±¬æ–¼è¨ªå®¢æ¢ä»¶å€å¡Šçš„éƒ¨ä»½é›†ä¸­åˆ° GuestCheckoutForm è£¡ï¼Œé€™æ¨£æˆ‘å€‘å°±èƒ½å¾ˆæ˜ç¢ºçŸ¥é“è¨ªå®¢æ‡‰è©²åŸ·è¡Œçš„æ­¥é©Ÿã€‚</p>
<p>è¨»ï¼šé€™è£¡ç”¨ ASP æ¨¡æ“¬ç¹¼æ‰¿æ™‚æœ‰å€‹ç¼ºé»ï¼Œé‚£å°±æ˜¯æ–¹æ³•å¿…é ˆå†å®£å‘Šä¸€æ¬¡ï¼Œç„¶å¾Œå‘¼å«çˆ¶é¡åˆ¥çš„å¯¦ä½œä¾†åŸ·è¡Œã€‚</p>
<p>ä»¥æ­¤é¡æ¨ï¼Œ MemberCheckoutForm åŠ VIPCheckoutForm ä¹Ÿæ˜¯ä¸€æ¨£çš„é“ç†ã€‚</p>
<p>/class/MemberCheckoutForm.asp</p>
<pre><code>&lt;%
Class MemberCheckoutForm ' Extends CheckoutForm
' è¢«ç¹¼æ‰¿çš„ç‰©ä»¶
Public Prototype
' é¡¯ç¤ºè³¼è²·äººæ¬„ä½
Public Sub DisplayShopperFields()
Prototype.DisplayShopperFields
End Sub
' é¡¯ç¤ºæ”¶è²¨äººæ¬„ä½
Public Sub DisplayReceiverFields()
Prototype.DisplayReceiverFields
End Sub
' é¡¯ç¤ºé¸æ“‡æ¬„ä½
Public Sub DisplayOptionFields()
%&gt;&lt;input type=&quot;checkbox&quot; name=&quot;change_level&quot; id=&quot;change_level&quot; /&gt;
&lt;label for=&quot;change_level&quot;&gt;æ˜¯å¦å‡ç´šç‚º VIP æœƒå“¡ï¼Ÿ&lt;/label&gt;&lt;%
End Sub
End Class
%&gt;

</code></pre><p>/class/VIPCheckoutForm.asp</p>
<pre><code>&lt;%
Class VIPCheckoutForm ' Extends CheckoutForm
' è¢«ç¹¼æ‰¿çš„ç‰©ä»¶
Public Prototype
' é¡¯ç¤ºè³¼è²·äººæ¬„ä½
Public Sub DisplayShopperFields()
Prototype.DisplayShopperFields
End Sub
' é¡¯ç¤ºæ”¶è²¨äººæ¬„ä½
Public Sub DisplayReceiverFields()
Prototype.DisplayReceiverFields
End Sub
' é¡¯ç¤ºé¸æ“‡æ¬„ä½
Public Sub DisplayOptionFields()
%&gt;&lt;p&gt;æ‚¨å¯ç”¨çš„ ECoupon é»æ•¸ï¼š100&lt;/p&gt;
&lt;label for=&quot;ecoupon_number&quot;&gt;è¼¸å…¥æ¬²ä½¿ç”¨çš„ ECoupon é»æ•¸ï¼š&lt;/label&gt;
&lt;input type=&quot;text&quot; name=&quot;ecoupon_number&quot; id=&quot;ecoupon_number&quot; size=&quot;10&quot; /&gt;&lt;%
End Sub
End Class
%&gt;

</code></pre><p>ç”±ä¸Šé¢çš„ç¨‹å¼ç¢¼å¯ä»¥çœ‹å‡ºï¼Œæˆ‘å€‘åœ¨å­é¡åˆ¥åªè¦å¯¦ä½œçˆ¶é¡åˆ¥æ‰€å®šç¾©çš„æ­¥é©Ÿå‡½å¼ï¼Œå°±èƒ½è¼•é¬†åœ°æ›´æ›æµç¨‹åŸ·è¡Œçš„éç¨‹ã€‚æ•´å€‹ç³»çµ±æ¶æ§‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/resources/ooasp_cart/images/shopping_cart_checkout.png" alt=""></p>
<h2 id="çµè«–">çµè«–</h2>
<p>çœ‹å®Œé€™ç¯‡çš„äººï¼Œå¤§æ¦‚åå€‹è£¡é¢æœƒæœ‰å…«å€‹èªªï¼šç‚ºä»€éº¼è¦å¼„å¾—é€™éº¼è¤‡é›œå‘€ï¼å…¶å¯¦é€™æ˜¯å› ç‚º ASP (VBScript) ä¸æ”¯æ´ç¹¼æ‰¿çš„é—œä¿‚ï¼›å¯¦éš›ä¸Šä½¿ç”¨æ”¯æ´ OO ç‰¹æ€§çš„èªè¨€ï¼Œè¦å¯¦ç¾ Template Method å°±æœƒè®Šå¾—å¾ˆç°¡å–®è€Œä¸”ä¹Ÿæ¯”è¼ƒå®¹æ˜“æ‡‚ã€‚ç•¶ç„¶ä»¥ä¸Šçš„ä¾‹å­ä¸¦ä¸èƒ½èªªæ˜¯éå¸¸å¥½ï¼Œä¸éæˆ‘æƒ³ä¹Ÿè¨±èƒ½è®“å¤§å®¶ç­è§£ Template Method çš„ç²¾ç¥ã€‚</p>
<p>Template Method å¯ä»¥èªªæ˜¯æŠŠç‰©ä»¶å°å‘ç‰¹æ€§ç™¼æ®çš„æ·‹æ¼“ç›¡è‡´ï¼šæµç¨‹çš„æŠ½è±¡åŒ–ã€æ­¥é©Ÿçš„ç¹¼æ‰¿ã€è§’è‰²çš„å¤šå‹ï¼›æ›å¥è©±èªªï¼Œå› ç‚º Template Method å·²ç¶“å¹«æˆ‘å€‘å®šç¾©å¥½äº†æµç¨‹éª¨æ¶ï¼Œæ‰€ä»¥å¦‚æœæœªä¾†æˆ‘å€‘æœ‰æ–°çš„ç›¸ä¼¼æµç¨‹ï¼Œå°±ä¸å¿…å†è·‘åˆ° HTML é é¢è£¡åŠ ä¸Šä¸€å¤§å †çš„æ¢ä»¶åˆ¤æ–·å¼ã€‚è€Œä¸”æˆ‘å€‘ä¹Ÿè¦æ¸…æ¥šåœ°åˆ†é›¢æµç¨‹ä¸­çš„æ¯å€‹æ­¥é©Ÿï¼ŒæŠŠå®ƒå€‘äº¤ç”±å­é¡åˆ¥ä¾†å¯¦ä½œï¼›é€™æ¨£æˆ‘å€‘å°±èƒ½å€éš”æ¯å€‹è§’è‰²æ‡‰è©²åšçš„äº‹ï¼Œè€Œä¸æœƒè¢«å¤§é‡çš„ If Else çµ¦æ·¹æ²’ã€‚</p>
<p>ä¸éæ‡‰ç”¨ Template Method æ¨¡å¼æ™‚ï¼Œé‚„æœ‰è¨±å¤šè¦æ³¨æ„çš„åœ°æ–¹ï¼Œåƒæ˜¯å¦‚ä½•åˆ‡å‰²æµç¨‹ã€è¨­è¨ˆæ›å‹¾å‡½å¼ (Hook) ç­‰ï¼Œéƒ½æ˜¯å¾ˆæœ‰è¶£çš„èª²é¡Œï¼›é€™äº›æˆ‘æƒ³å¾ˆå¤šæ›¸ä¸Šéƒ½æœ‰å¯«äº†ï¼Œæ‰€ä»¥æˆ‘å°±ä¸å†å¤šæäº†ã€‚</p>
<p>é‚„æœ‰æˆ‘å…¶å¯¦ä¸æ‡‰è©²æŠŠ HTML å¯«åœ¨é¡åˆ¥è£¡é¢ï¼Œæ‡‰è©²ä½¿ç”¨æ¨£ç‰ˆå¼•æ“å°‡å®ƒå€‘åˆ†é›¢ã€‚ä¸éç‚ºäº†ä¸è®“å¤§å®¶ææ··ï¼Œæ‰€ä»¥æˆ‘å°±çœç•¥æ‰äº†é€™äº›æç¯€ã€‚ä½†æ˜¯æˆ‘å¼·çƒˆå»ºè­°å¯¦éš›æ‡‰ç”¨æ™‚ï¼Œä¸è¦æŠŠ HTML å¯«åœ¨ç¨‹å¼è£¡é¢ã€‚</p>
<p>è¨»ï¼šä¸è¦æŠŠæ¨£ç‰ˆå’Œ Template Method ææ··äº†ã€‚æ¨£ç‰ˆä¸€èˆ¬æ˜¯æŒ‡ HTML ç•«é¢ï¼Œè€Œ Template Method çš„ Template æœ‰æµç¨‹éª¨æ¶çš„æ„æ€ã€‚</p>
<h2 id="ç¯„ä¾‹ç¨‹å¼ä¸‹è¼‰">ç¯„ä¾‹ç¨‹å¼ä¸‹è¼‰</h2>
<p>ç¯„ä¾‹ç¨‹å¼è£¡é¢åŒ…å«äº†ä¸Šé¢æ¯å€‹æ­¥é©Ÿæ‰€ä»‹ç´¹çš„çµå¸³è¡¨å–®åŸå§‹ç¨‹å¼ï¼Œä½ å¯ä»¥åƒè€ƒå£“ç¸®æª”æ¡ˆçš„ README.txt ä¾†å¾—çŸ¥å¦‚ä½•åŸ·è¡Œå®ƒå€‘ã€‚</p>
<p><a href="/resources/ooasp_cart/source/ooasp_02_src.rar">ä¸‹è¼‰</a></p>
]]></content>
		</item>
		
		<item>
			<title>[å¿ƒå¾—] ç¶²é ç¨‹å¼é–‹ç™¼å»ºè­°</title>
			<link>https://jaceju.net/suggestions-for-web-development/</link>
			<pubDate>Mon, 08 May 2006 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/suggestions-for-web-development/</guid>
			<description>é€™ç¯‡æ˜¯å¯«çµ¦æ–°åŒäº‹ä»¥åŠæˆ‘è‡ªå·±å‚™å¿˜ç”¨çš„ï¼Œä¹Ÿæ­¡è¿å¤§å®¶æå‡ºæŒ‡æ­£ã€‚ åœ¨æ’°å¯«ç¶²é ç¨‹å¼æ™‚ï¼Œæœ‰äº›åŸºæœ¬çš„æ±è¥¿è¦éå¸¸æ³¨æ„ï¼Œé€™æ¨£å¯«å‡ºä¾†çš„ç¨‹å¼æ‰ä¸å®¹æ˜“å‡ºç¾å•é¡Œï¼Œä¹Ÿæ‰èƒ½</description>
			<content type="html"><![CDATA[<p>é€™ç¯‡æ˜¯å¯«çµ¦æ–°åŒäº‹ä»¥åŠæˆ‘è‡ªå·±å‚™å¿˜ç”¨çš„ï¼Œä¹Ÿæ­¡è¿å¤§å®¶æå‡ºæŒ‡æ­£ã€‚</p>
<p>åœ¨æ’°å¯«ç¶²é ç¨‹å¼æ™‚ï¼Œæœ‰äº›åŸºæœ¬çš„æ±è¥¿è¦éå¸¸æ³¨æ„ï¼Œé€™æ¨£å¯«å‡ºä¾†çš„ç¨‹å¼æ‰ä¸å®¹æ˜“å‡ºç¾å•é¡Œï¼Œä¹Ÿæ‰èƒ½å¤ äº¤çµ¦å®¢æˆ¶ã€‚ä»¥ä¸‹å°±æ˜¯æˆ‘è‡ªå·±çš„é–‹ç™¼å¿ƒå¾—ï¼Œä¾›å¤§å®¶åƒè€ƒã€‚</p>
<h2 id="åˆ©ç”¨æ˜ç¢ºçš„æŒ‡å®šæ–¹å¼ä¾†å–å¾—é é¢å‚³ä¾†çš„è®Šæ•¸">åˆ©ç”¨æ˜ç¢ºçš„æŒ‡å®šæ–¹å¼ä¾†å–å¾—é é¢å‚³ä¾†çš„è®Šæ•¸</h2>
<p>ä¸ç®¡æ˜¯ GET æˆ– POST çš„åƒæ•¸ï¼Œæˆ‘æœƒå¸Œæœ›æ˜ç¢ºåœ°æŒ‡å®šå®ƒçš„å‹æ…‹ï¼Œä¾‹å¦‚ id æ‡‰è©²æ˜¯æ•´æ•¸ï¼Œ content æ˜¯æ–‡å­—ç­‰ã€‚è€Œä¸”æˆ‘ä¹Ÿå¸¸å¸¸ç™¼ç¾æœ‰äººæŠŠæ¥åˆ°é€™äº›è®Šæ•¸å¾Œï¼Œæ²’æœ‰äº‹å…ˆåšè™•ç†å°±ç›´æ¥ä¸²åˆ°ç¨‹å¼ä¸­ï¼Œé€™æ˜¯éå¸¸å±éšªçš„ä¸€ä»¶äº‹æƒ…ï¼</p>
<p>æœ€æ˜é¡¯çš„ä¾‹å­å°±æ˜¯ SQL Injection äº†ï¼Œæˆ‘æƒ³é€™æ‡‰è©²ä¸ç”¨å¤šèªªäº†ã€‚ç¸½è€Œè¨€ä¹‹ï¼Œä¸è¦éä»½ç›¸ä¿¡ç”¨æˆ¶ç«¯å‚³ä¾†çš„è³‡è¨Šï¼ŒæŠŠå®ƒè½‰æ›æˆä½ èƒ½æŒæ¡çš„å‹æ…‹å†ç”¨å§ã€‚</p>
<h2 id="è³‡æ–™åº«çš„é€£çµæ¯å€‹é é¢åªä½œä¸€æ¬¡">è³‡æ–™åº«çš„é€£çµæ¯å€‹é é¢åªä½œä¸€æ¬¡</h2>
<p>è³‡æ–™åº«é€£çµæ˜¯ç¶²ç«™é é¢å¸¸åšçš„äº‹æƒ…ï¼Œä½†æ˜¯å„˜å¯èƒ½ä¸è¦è®“ä¸€å€‹é é¢ç”¢ç”Ÿå¤ªå¤šçš„è³‡æ–™åº«é€£çµã€‚æˆ‘å€‘å¯ä»¥åˆ©ç”¨ Singleton æ¨¡å¼ä¾†å–å¾—è³‡æ–™åº«é€£çµç‰©ä»¶ï¼Œé€™æ¨£å¯ä»¥ç¢ºä¿ç¨‹å¼è£¡åªæœƒç”¨åˆ°ä¸€å€‹è³‡æ–™åº«é€£çµï¼›ç•¶ç„¶éœ€è¦é€£çµä¸åŒè³‡æ–™åº«çš„è©±å°±å¦ç•¶åˆ¥è«–ã€‚</p>
<p>æ‰€ä»¥æˆ‘å€‘è¦ç¢ºå®šè³‡æ–™åº«æœƒåœ¨é é¢åˆå§‹åŒ–æ™‚é€£çµï¼Œé é¢çµæŸæ™‚é—œé–‰ã€‚é€™æ¨£æœ‰å–®ä¸€çš„å…¥å£èˆ‡å‡ºå£ï¼Œç¨‹å¼ä¹Ÿå°±ä¸å®¹æ˜“å‡ºç¾å¥‡æ€ªçš„å•é¡Œã€‚</p>
<h2 id="ç›¸åŒçš„é‚è¼¯ä¸è¦å¯«å…©éä»¥ä¸Š">ç›¸åŒçš„é‚è¼¯ä¸è¦å¯«å…©éä»¥ä¸Š</h2>
<p>å¦‚æœç™¼ç¾æœ‰å…©æ”¯ç¨‹å¼æœƒç”¨åˆ°ç›¸åŒçš„ç¨‹å¼é‚è¼¯æ™‚ï¼Œä¸è¦çŒ¶è±«ï¼ŒæŠŠå®ƒæŠ½å‡ºä¾†è®Šæˆé¡åˆ¥æˆ–å‡½å¼ (æœ€å¥½æ˜¯é¡åˆ¥ï¼ŒåŸå› åœ¨ä¸‹ä¸€å‰‡) ã€‚å› ç‚ºå¦‚æœå“ªä¸€å¤©éœ€è¦æ›´æ–°ç¨‹å¼çš„é‚è¼¯æ™‚ï¼Œä½ åªéœ€è¦æ›´æ”¹ä¸€æ”¯ç¨‹å¼å³å¯ã€‚å°å¥å¿˜çš„äººä¾†èªªï¼Œé€™é»å°¤å…¶é‡è¦ã€‚</p>
<p>æˆ‘å°±é‡éæœ‰äººæŠŠç”¢ç”Ÿé¸å–®çš„é‚è¼¯é‡è¤‡å¯«åœ¨åå¤šæ”¯ç¨‹å¼è£¡ï¼Œçµæœæœ‰æ¬¡å®¢æˆ¶è¦æ±‚è¦ä¿®æ­£å…¶ä¸­ä¸€å€‹åœ°æ–¹ï¼Œå¯æ†çš„ç¶­è­·äººå“¡ (å°±æ˜¯æˆ‘å•¦) å°±å¾—ä¸€æ”¯ä¸€æ”¯åœ°å»ç¿»å‡ºä¾†æ”¹ã€‚</p>
<h2 id="åˆ©ç”¨ç‰©ä»¶ä¾†ç®¡ç†éŒ¯èª¤">åˆ©ç”¨ç‰©ä»¶ä¾†ç®¡ç†éŒ¯èª¤</h2>
<p>æˆ‘é€™è£¡æŒ‡çš„éŒ¯èª¤æ˜¯ä»»ä½•é æœŸä¸­çš„ç‹€æ³ï¼Œä¹Ÿå°±æ˜¯ä½ ä¸å¸Œæœ›ä½¿ç”¨è€…æ“ä½œçš„æ–¹å¼ï¼Œä¾‹å¦‚ç·¨è™Ÿä¸å­˜åœ¨æˆ–æ˜¯æª”æ¡ˆå¤§å°è¶…éé™åˆ¶ç­‰ã€‚</p>
<p>ç•¶éŒ¯èª¤ç™¼ç”Ÿæ™‚ï¼Œä¸è¦ç«‹åˆ»çµæŸï¼Œæ‡‰è©²åˆ©ç”¨éŒ¯èª¤ä¸Šå‡æ©Ÿåˆ¶ä¾†è®“é€šçŸ¥ä¸Šä¸€å±¤çš„ç¨‹å¼ï¼Œæœ€å¾Œå†ç”±é é¢æ§åˆ¶ç¨‹å¼ä¾†æ±ºå®šè¦å¦‚ä½•è™•ç†éŒ¯èª¤ã€‚æˆ‘å¸¸å¸¸æœƒé‡åˆ°æœ‰äººåœ¨å‡½å¼è£¡åˆ©ç”¨ exit é›¢é–‹ç¨‹å¼ï¼Œä½†æ˜¯é€™æ™‚å€™é é¢çš„è³‡æ–™åº«æˆ–å…¶ä»–ç‰©ä»¶ç­‰ç­‰éƒ½é‚„æ²’é‡‹æ”¾æ‰ï¼›é›–ç„¶ç¨‹å¼å¹³å°å¯èƒ½æœƒå¹«ä½ åšï¼Œä½†é‚£ç¸½æ˜¯å¾ˆé›£é æœŸã€‚</p>
<p>æ‰€ä»¥æˆ‘å»ºè­°ä¸è¦ä½¿ç”¨å‡½å¼ï¼Œè€Œæ”¹ç‚ºä½¿ç”¨ç‰©ä»¶çš„æ–¹æ³•ï¼Œç„¶å¾Œåˆ©ç”¨é¡ä¼¼ PEAR::isError() ä¾†åˆ¤æ–·æ˜¯å¦åŸ·è¡ŒæˆåŠŸï¼›å¦‚æœå¤±æ•—çš„è©±å°±æŠŠéŒ¯èª¤å¾€ä¸Šä¸Ÿï¼Œç›´åˆ°é é¢èƒ½å¤ æ§åˆ¶ç‚ºæ­¢ã€‚</p>
<h2 id="è©²é‡‹æ”¾çš„è¦è¨˜å¾—é‡‹æ”¾">è©²é‡‹æ”¾çš„è¦è¨˜å¾—é‡‹æ”¾</h2>
<p>ä¸ç®¡æ˜¯ç‰©ä»¶é‚„æ˜¯è³‡æ–™åº«ï¼Œéƒ½æ‡‰è©²åœ¨é é¢çµæŸå‰å°‡å®ƒå€‘éŠ·æ¯€æˆ–é—œé–‰ï¼Œè€Œä¸è¦éæ–¼ä¾è³´ç¨‹å¼åŸ·è¡Œå¹³å°ã€‚ç¶²é ç¨‹å¼æ˜¯å¾ˆå¤šäººæœƒåŒæ™‚å­˜å–çš„ï¼Œå¦‚æœæ²’æœ‰æ­£ç¢ºåœ°å°‡è³‡æºå³æ™‚é‡‹æ”¾æ‰çš„è©±ï¼Œä¹…è€Œä¹…ä¹‹å°±æœƒé€ æˆç³»çµ±æ•ˆèƒ½ä¸Šçš„ä¸ç©©å®šã€‚</p>
<p>è€Œé‡‹æ”¾çš„å‹•ä½œè¦ä»€éº¼æ™‚å€™åšå‘¢ï¼Ÿè¨˜ä½ä¸€å¥è©±ï¼šèª°é–‹çš„å°±èª°è² è²¬é—œã€‚ä¾‹å¦‚ä¸Šé¢é é¢æ§åˆ¶ç¨‹å¼é–‹å•Ÿè³‡æ–™åº«é€£çµï¼Œé‚£å°±åœ¨é é¢æ§åˆ¶ç¨‹å¼çš„æœ€å¾ŒæŠŠè³‡æ–™åº«é€£çµé—œé–‰ã€‚é¡åˆ¥å»ºæ§‹å‡½å¼ç”¢ç”Ÿçš„ç‰©ä»¶ï¼Œå°±åœ¨é¡åˆ¥è§£æ§‹ç¨‹å¼è£¡éŠ·æ¯€ã€‚å‡½å¼é–‹çš„é ­ï¼Œç•¶ç„¶å°±åœ¨å‡½å¼å°¾æ”¶æ‰ï¼›ä¸éæœ‰å€‹ä¾‹å¤–ï¼Œé‚£å°±æ˜¯é€™å€‹å‡½å¼å¦‚æœæœ¬èº«å°±æ˜¯è¦å›å‚³ç”¢ç”Ÿçš„ç‰©ä»¶æ™‚ï¼Œé‚£å°±ä¸èƒ½æŠŠå®ƒçµ¦é‡‹æ”¾å›‰ï¼Œè€Œæ˜¯è¦æ”¹ç‚ºå‘¼å«é€™å€‹å‡½å¼çš„ç¨‹å¼ä¾†é‡‹æ”¾ã€‚</p>
<h2 id="åˆ©ç”¨æ¨£ç‰ˆæŠ€è¡“">åˆ©ç”¨æ¨£ç‰ˆæŠ€è¡“</h2>
<p>æ¨£ç‰ˆæ˜¯ç”¨ä¾†åˆ†é›¢ç¨‹å¼é‚è¼¯èˆ‡è¦–è¦ºé é¢çš„ï¼Œä¹Ÿå¸¸å¸¸æœ‰äººç”¨ MVC é€™å€‹æ¨¡å¼ä¾†ç¨±å‘¼å®ƒã€‚ç„¶è€Œå…©è€…åˆ†é›¢é™¤äº†ä¸ç›¸äº’å¹²æ“¾å¤–ï¼Œå…¶å¯¦é‚„æœ‰ä¸€å€‹å¥½è™•ï¼šé‚£å°±æ˜¯ç¨‹å¼å¯ä»¥åœ¨éŒ¯èª¤ç™¼ç”Ÿå¾Œï¼Œæ±ºå®šè¦é¡¯ç¤ºçš„çµæœã€‚å°±åƒä¸Šé¢æåˆ°çš„éŒ¯èª¤ç®¡ç†ï¼Œç•¶æˆ‘å€‘åœ¨é é¢æ§åˆ¶ç¨‹å¼å–å¾—éŒ¯èª¤è¨Šæ¯æ™‚ï¼Œæˆ‘å€‘å°±å¯ä»¥è€Œç”¨ç½®æ›æ¨£ç‰ˆä¾†é¿å…æ‰é é¢çš„éŒ¯èª¤ï¼Œæˆ–è€…æ˜¯å°å‘åˆ¥çš„è™•ç†ç¨‹å¼ã€‚</p>
<p>é€™é»æˆ‘è¦ºå¾— PHP çš„ Smarty å°±è€ƒæ…®å¾—å¾ˆå¥½ï¼Œå› ç‚ºå®ƒæ˜¯å¾ŒæœŸé é¢ç¶å®š (Binding) ï¼Œè€Œä¸æœƒåƒå‚³çµ±æ¨£ç‰ˆå¼•æ“åœ¨å‰æœŸå°±æŠŠé é¢æ‹‰é€²ç¨‹å¼è™•ç†ï¼Œå°è‡´éŒ¯èª¤ç™¼ç”Ÿæ™‚å¾’ç„¶æµªè²»è™•ç†æ™‚é–“ (ç•¶ç„¶è¦çœ‹æ€éº¼è¨­è¨ˆçš„) ã€‚</p>
<h2 id="å¾¹åº•ç­è§£é–‹ç™¼ç’°å¢ƒçš„æ€§è³ª">å¾¹åº•ç­è§£é–‹ç™¼ç’°å¢ƒçš„æ€§è³ª</h2>
<p>ç¶²é ç¨‹å¼å’Œä¸€èˆ¬æ‡‰ç”¨ç¨‹å¼ (ä¾‹å¦‚è¦–çª—æ‡‰ç”¨ç¨‹å¼) åœ¨æœ¬è³ªä¸Šæ˜¯æœ‰å·®ç•°çš„ï¼Œé€™äº›å·®ç•°ä¸åƒ…æ˜¯åœ¨æ“ä½œä¸Šï¼Œå°±é€£åŸ·è¡Œçš„éç¨‹éƒ½éå¸¸çš„ä¸ä¸€æ¨£ã€‚é›–ç„¶ç¾åœ¨æœ‰ AJAX æˆ–å…¶ä»–æŠ€è¡“å¯ä»¥ç¸®å°å½¼æ­¤çš„å·®è·ï¼Œä½†æ˜¯å®ƒé‚„æ˜¯å»ºæ§‹åœ¨ HTTP é€™å€‹ç„¡ç‹€æ…‹å”å®šä¹‹ä¸Šã€‚èº«ç‚ºç¶²ç«™ç¨‹å¼é–‹ç™¼äººå“¡ï¼Œå…¶å¯¦æ‡‰è©²è¦ç­è§£é€™äº›åŸºç¤ï¼Œè€Œä¸è¦åªç†Ÿç¨”æŸäº›å·²ç¶“è¢«åŒ…è£éçš„æŠ€è¡“å°±é¡¯å¾—è‡ªå¾—æ„æ»¿ã€‚</p>
<p>æœ€ç°¡å–®çš„å°±æ˜¯ä¼ºæœç«¯ç¨‹å¼èˆ‡ç”¨æˆ¶ç«¯ç¨‹å¼ä¹‹é–“çš„æºé€šï¼Œä¾‹å¦‚ PHP å’Œ JavaScript ã€‚æˆ‘å¸¸å¸¸åœ¨ç¶²è·¯ä¸Šçœ‹è¦‹æœ‰äººå•é“ï¼šè¦å¦‚ä½•è®“ PHP å’Œ JavaScript ä¹‹é–“çš„è®Šæ•¸äº’é€šï¼Ÿå¦‚æœç­è§£ HTTP åŸ·è¡Œçš„éç¨‹ï¼Œé‚£éº¼ä½ å°±æœƒè‡ªå·±ç™¼ç¾é€™äº›å•é¡Œçš„ç­”æ¡ˆã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>ASP è³¼ç‰©è»Šä¸‰éƒ¨æ›²(1)</title>
			<link>https://jaceju.net/classic-asp-shopping-cart-1/</link>
			<pubDate>Sun, 23 Apr 2006 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/classic-asp-shopping-cart-1/</guid>
			<description>ç°¡ä»‹ ç‰©ä»¶å°å‘æ˜¯ä¸€ç¨®æ€ç¶­ï¼Œé€™é»æˆ‘æ·±ä¿¡ä¸ç–‘ã€‚ä½†æ˜¯åœ¨æˆ‘å¯«äº† ASP ç‰©ä»¶è¨­è¨ˆæ‰‹æ³•ç³»åˆ—æ–‡ç« å¾Œï¼Œæˆ‘æ‰ç™¼ç¾è‡ªå·±å…¶å¯¦æ·±é™·åœ¨èªè¨€çš„æ³¥æ·–è£¡ã€‚ æˆ‘æƒ³é€™è£¡ä¹Ÿè¨±è©²ç”¨ä¸€äº›çœŸæ­£çš„</description>
			<content type="html"><![CDATA[<h2 id="ç°¡ä»‹">ç°¡ä»‹</h2>
<p>ç‰©ä»¶å°å‘æ˜¯ä¸€ç¨®æ€ç¶­ï¼Œé€™é»æˆ‘æ·±ä¿¡ä¸ç–‘ã€‚ä½†æ˜¯åœ¨æˆ‘å¯«äº† ASP ç‰©ä»¶è¨­è¨ˆæ‰‹æ³•ç³»åˆ—æ–‡ç« å¾Œï¼Œæˆ‘æ‰ç™¼ç¾è‡ªå·±å…¶å¯¦æ·±é™·åœ¨èªè¨€çš„æ³¥æ·–è£¡ã€‚</p>
<p>æˆ‘æƒ³é€™è£¡ä¹Ÿè¨±è©²ç”¨ä¸€äº›çœŸæ­£çš„å¯¦ä¾‹ä¾†è¡¨é”æˆ‘çš„æƒ³æ³•äº†ï¼Œä¹Ÿå°±æ˜¯æˆ‘æƒ³å‘Šè¨´å¤§å®¶ï¼Œæˆ‘å¿ƒç›®ä¸­çš„ç‰©ä»¶å°å‘æ€ç¶­åˆ°åº•æ˜¯ä»€éº¼ï¼Ÿ</p>
<p>å‰é¢å¹¾ç¯‡çš„ ASP ç‰©ä»¶è¨­è¨ˆæ‰‹æ³•æˆ–è¨±çœ‹èµ·ä¾†å¾ˆç¥å¦™ï¼Œä½†é‚£åªä¸éæ˜¯ ASP åŸæœ¬å°±æœ‰çš„ä¸€äº›æ±è¥¿ã€‚åœ¨åˆ¥çš„ç‰©ä»¶å°å‘èªè¨€è£¡ï¼Œé€™äº›æ‰‹æ³•å¯èƒ½å°±åƒå‘¼å¸ä¸€æ¨£ç¨€é¬†å¹³å¸¸ã€‚æ‰€ä»¥å¦‚æœä½ æ‡‚çš„æ˜¯åˆ¥ç¨®é–‹ç™¼å¹³å° (ä¾‹å¦‚ PHP ã€ ASP.NET æˆ– JSP ) ä¹Ÿæ²’é—œä¿‚ï¼Œç­è§£ç‰©ä»¶å°å‘æ€ç¶­çš„æ„ç¾©å¾Œï¼Œä½ å¤§å¯å»ç™¼æ®é‚£å€‹å¹³å°çš„é•·è™•ã€‚</p>
<p>ç•¶ç„¶ä¸ä¸€å®šéå¾— ASP ä¸å¯ï¼Œæˆ‘å·²ç¶“ä¸æœƒå†å»è­‰æ˜ ASP èƒ½ä¸èƒ½è¾¦åˆ°ä»€éº¼ã€‚åªä¸éæˆ‘æƒ³æœƒå¯« Web ç¶²ç«™ç¨‹å¼çš„äººå¤§éƒ¨ä»½æ‡‰è©²éƒ½æ‡‚ ASP ï¼Œè€Œä¸”ä¹Ÿç‚ºäº†å»¶çºŒä¹‹å‰çš„ä¸»é¡Œï¼Œæ‰€ä»¥é€™è£¡å°±ç¹¼çºŒç”¨ ASP äº†ã€‚</p>
<p>è¨»ï¼šé€™è£¡çš„ ASP æ¡ç”¨çš„ç•¶ç„¶æ˜¯ VBScript ï¼Œä½ æƒ³ç”¨ JScript ä¾†åšæˆ‘ä¹Ÿä¸åå°ã€‚</p>
<p>æˆ‘å°‡åˆ©ç”¨ä¸€å€‹ç°¡åŒ–çš„è³¼ç‰©è»Šç¨‹å¼ï¼Œä¾†ä»‹ç´¹ä¸€äº›æˆ‘è¨­è¨ˆè³¼ç‰©è»Šç¨‹å¼æ™‚çš„æ¦‚å¿µï¼Œå…¶ä¸­æœƒåŒ…æ‹¬å…ˆå‰ä»‹ç´¹çš„ ASP ç‰©ä»¶è¨­è¨ˆæ‰‹æ³•ä»¥åŠè¨­è¨ˆæ¨¡å¼çš„æ‡‰ç”¨ã€‚</p>
<p>å»¢è©±ä¸å¤šèªªï¼Œå¾€ä¸‹çœ‹å§ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="è³¼ç‰©è»Š">è³¼ç‰©è»Š</h2>
<p>é–‹ç™¼éç¨å…·è¦æ¨¡å°ˆæ¡ˆçš„ç¨‹å¼è¨­è¨ˆå¸«å€‘ï¼Œæˆ‘æƒ³å¤§éƒ¨ä»½éƒ½å¯«éè³¼ç‰©è»Šç¨‹å¼å§ã€‚è³¼ç‰©è»Šå‰µé€ äº†å¤šå°‘å°ç£ç¶“æ¿Ÿå¥‡è¹Ÿæˆ‘æ˜¯ä¸æ¸…æ¥šï¼Œä½†æ˜¯è‡³å°‘å®ƒä¸€ç›´æ˜¯ç¶²ç«™é–‹ç™¼çš„é‡è¦èª²é¡Œä¹‹ä¸€ã€‚</p>
<p>å…¶å¯¦è³¼ç‰©è»Šçš„æœ¬æ„å¾ˆç°¡å–®ï¼Œä¹Ÿå°±æ˜¯åœ¨ä½¿ç”¨è€…ç€è¦½ç¶²ç«™çš„éç¨‹è£¡ï¼Œå°‡ä»–æ‰€é¸æ“‡çš„å•†å“è³‡è¨Šæ”¾åˆ°è¨˜æ†¶é«”æˆ–è³‡æ–™åº«ä¸­ï¼Œæœ€å¾Œå†æä¾›ä¸€å€‹ç•«é¢é¡¯ç¤ºä»–è²·éå“ªäº›æ±è¥¿ã€‚</p>
<p>è¨»ï¼šä¹Ÿè¨±æœ‰äººæœƒèªªè³¼ç‰©è»Šæ‡‰è©²é‚„æœ‰é‡‘æµç‰©æµç­‰æ©Ÿåˆ¶ï¼Œä¸éé€™è£¡æˆ‘æƒ³å°±å…ˆç•¥éä¸æäº†ã€‚æˆ‘å€‘å…ˆæŠŠç„¦é»æ”¾åœ¨æœ€å–®ç´”çš„è³¼ç‰©è»Šæ©Ÿåˆ¶ä¸Šï¼Œå°‡åŸºç¤æ‰“å¥½å¾Œå†å¾€ä¸‹ç¹¼çºŒã€‚</p>
<h3 id="åŠ å…¥è³¼ç‰©è»Š">åŠ å…¥è³¼ç‰©è»Š</h3>
<p>åœ¨ç‰©ä»¶å°å‘çš„æ€ç¶­è£¡ï¼Œæˆ‘å€‘ç¿’æ…£æŠŠè³¼ç‰©è»Šè¦–æˆä¸€å€‹ç‰©ä»¶ï¼Œè€Œå•†å“ç•¶ç„¶ä¹Ÿæ˜¯ä¸€å€‹ä¸€å€‹çš„ç‰©ä»¶ï¼Œé€™å…¶å¯¦å’Œç¾å¯¦ç”Ÿæ´»æ²’ä»€éº¼å…©æ¨£ã€‚æŠŠå–œæ­¡çš„å•†å“æ”¾åˆ°è³¼ç‰©è»Šè£¡ï¼Œé€™ç¨®å‹•ä½œå†è‡ªç„¶ä¹Ÿä¸éã€‚ç•¶ç„¶åœ¨ç¨‹å¼çš„ä¸–ç•Œè£¡ï¼Œæˆ‘å€‘å¾ˆå°‘æœƒå»å®Œæ•´æ¨¡æ“¬å‡ºè³¼ç‰©è»Šå’Œå•†å“çš„æ¨£å­ (æ˜¯èª°èªªç¶²ç«™è³¼ç‰©è»Šè¦æœ‰è¼ªå­çš„ï¼Ÿ) æˆ‘å€‘åªæœƒæŠŠè³¼ç‰©è»Šæ‰€è¦å…·å‚™çš„åŠŸèƒ½å¯¦ä½œå‡ºä¾†è€Œå·²ã€‚</p>
<p>æƒ³åƒä¸€ä¸‹ï¼Œä½ å¯èƒ½æœƒæŠŠä¸‰åŒ…ç§‘å­¸éºµã€å…©ç“¶å¯æ¨‚é‚„æœ‰ä¸€ç›’å·§å…‹åŠ›æ”¾åˆ°ä½ çš„è³¼ç‰©è»Šè£¡ã€‚</p>
<pre><code>Set oCart = New Shopping_Cart
oCart.AddCartItem &quot;ç§‘å­¸éºµ&quot;, 3
oCart.AddCartItem &quot;ç“¶è£å¯æ¨‚&quot;, 2
oCart.AddCartItem &quot;ç›’è£å·§å…‹åŠ›&quot;, 1

</code></pre><p>åœ¨ AddCartItem ä¸­ï¼Œç¬¬ä¸€å€‹åƒæ•¸è¡¨ç¤ºå•†å“ä»£ç¢¼ (åªæ˜¯é€™è£¡æˆ‘ç”¨å•†å“åç¨±) ï¼Œå¾Œé¢å‰‡æ˜¯è³¼è²·æ•¸é‡ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨è¼ƒå¤§è¦æ¨¡çš„ç¶²ç«™ä¸Šé€šå¸¸ä¸æœƒé‚£éº¼ç°¡å–®åœ°æ¡ç”¨é€™ç¨®è¨­è¨ˆã€‚æ€éº¼èªªå‘¢ï¼Ÿæƒ³æƒ³çœ‹ï¼Œç¶²ç«™å¯èƒ½æœƒæœ‰ä¿ƒéŠ·æ´»å‹•ï¼Œæœ‰äº›å•†å“å¯èƒ½æœƒæœ‰æ‰“æŠ˜ã€‚ç¸½ä¹‹ä½ çš„å®¢æˆ¶çµ•å°ä¸æœƒé€™éº¼è¼•æ˜“æŠŠä½ æ™¾åœ¨é‚£é‚Šï¼Œé€™æ™‚æˆ‘å€‘ä¹Ÿè¨±å¾—å…ˆã€Œé æ§‹ã€ä¸€ä¸‹ã€‚</p>
<p>è¨»ï¼šå¦‚æœä½ ä¸ç­ã€Œé æ§‹ã€é‚£ä¹Ÿæ²’é—œä¿‚ï¼Œé€™ç„¡æå®¢æˆ¶å°ä½ æ¥µç›¡å£“æ¦¨ä¹‹èƒ½äº‹ã€‚</p>
<p>é›–ç„¶æˆ‘å€‘ä¸æƒ³éåº¦è¨­è¨ˆï¼Œé å…ˆæ”¾å…¥éå¤šæœªä¾†ä¸ç¢ºå®šçš„åŠŸèƒ½ï¼Œä½†æ˜¯åŸºæœ¬æ‡‰ä»˜è®ŠåŒ–çš„èƒ½åŠ›ç¸½æ˜¯è¦æœ‰çš„ã€‚æˆ‘åœ¨åŠ å…¥è³¼ç‰©è»Šæ™‚ï¼Œå¤šäº†ä¸€å€‹å•†å“ç¨®é¡çš„åƒæ•¸ï¼š</p>
<pre><code>Set oCart = New Shopping_Cart
oCart.AddCartItem &quot;ç§‘å­¸éºµ&quot;, 3, &quot;Normal&quot;
oCart.AddCartItem &quot;ç“¶è£å¯æ¨‚&quot;, 2, &quot;Normal&quot;
oCart.AddCartItem &quot;ç›’è£å·§å…‹åŠ›&quot;, 1, &quot;Normal&quot;

</code></pre><p>æˆ‘ç‚ºä»€éº¼è¦å¤šå‡ºé€™å€‹åƒæ•¸å‘¢ï¼Ÿå…¶ç”¨æ„æ˜¯ä»€éº¼ï¼Ÿå•†å“ç¨®é¡æ˜¯å¾ˆæœ‰ç”¨çš„åƒæ•¸ï¼Œå› ç‚ºæœ‰æ™‚å€™ä»–å¯ä»¥å‘Šè¨´è³¼ç‰©è»Šï¼Œé€™æ˜¯ä¸€å€‹æ´»å‹•å•†å“é‚„æ˜¯ä¸€èˆ¬å•†å“ã€‚</p>
<p>æˆ‘çŸ¥é“ä½ æƒ³å•ç‚ºä»€éº¼æˆ‘çŸ¥é“æœƒæœ‰é€™äº›è®ŠåŒ–ï¼Œè€å¯¦èªªï¼Œæˆ‘ä¸€é–‹å§‹çš„æ™‚å€™ä¹Ÿä¸çŸ¥é“ã€‚å…¶å¯¦é€™äº›éƒ½æ˜¯ç¶“ç”±å®¢æˆ¶çš„éœ€æ±‚ä»¥åŠéå¾€çš„ç¶“é©—å»æ•´ç†å‡ºä¾†çš„ï¼›å¦‚æœå®¢æˆ¶æ“ºæ˜æœªä¾†æœ‰ä¸€é™£å­ä¸å¯èƒ½æœƒæœ‰é€™äº›æ±è¥¿ï¼Œé‚£å°±ä¸å€¼å¾—ä½ ç¾åœ¨å°±æŠŠå®ƒå€‘åŠ ä¸Šå»ã€‚</p>
<p>ç¾åœ¨çœ‹èµ·ä¾†æ˜¯èƒ½å¤ æ‡‰ä»˜è®ŠåŒ–äº†ï¼Œå¯æ˜¯é€™æ¨£å¥½å—ï¼Ÿ AddCartItem çœ‹èµ·ä¾†åƒæ•¸å¤ªå¤šäº†ï¼</p>
<p>è¨»ï¼šå…¶å¯¦æˆ‘ä¹Ÿèªªä¸ä¸Šä¾†é€™ç¨®è¨­è¨ˆå¥½ä¸å¥½ï¼Œåœ¨æˆ‘æŸå€‹å°ˆæ¡ˆçš„ç¬¬ä¸€ç‰ˆ (é‚„å­˜æ´»è‘—) å°±æ˜¯é€™éº¼åšçš„ã€‚äº‹å¯¦ä¸Šæˆ‘ä¹Ÿè¨±å¯ä»¥é‡æ§‹å®ƒï¼Œä¸éé‚£æ™‚å€™æˆ‘ä¸¦æ²’æœ‰è¶³å¤ çš„å–®å…ƒæ¸¬è©¦çŸ¥è­˜æ”¯æ´æˆ‘åšé€™ç¨®äº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘æ”¾æ£„äº† (ä½†è‡³å°‘ç¶­è­·èµ·ä¾†æ²’é‚£éº¼å›°é›£å°±æ˜¯äº†) ã€‚</p>
<p>é€™è£¡æˆ‘å€‘æ›å€‹æ–¹å¼å¥½äº†ï¼Œæˆ‘ä¸æ‰“ç®—è®“ AddCartItem æƒ³å¤ªå¤šï¼Œç•¢ç«Ÿå¦‚æœä»¥å¾Œæœ‰æ–°çš„åƒæ•¸æ™‚ï¼Œ AddCartItem çš„ä»‹é¢å°±å¾ˆé›£æ”¹å‹•ï¼Œé€ æˆå¾€å¾Œéœ€è¦æ›´å¤šå‹•ä½œä¾†è™•ç†ã€‚æˆ‘ä¹¾è„†ç›´æ¥è®“ AddCartItem æ¥å—ä¸€å€‹è³¼è²·é …ç›®ç‰©ä»¶å¥½äº†ï¼Œé›–ç„¶åœ¨ ASP (VBScript) è£¡å¯¦ç¾èµ·ä¾†æœ‰é»é›£çœ‹ï¼Œä½†åœ¨å…¶ä»–ç’°å¢ƒä¸­æˆ‘æƒ³å¯ä»¥å¾ˆæ¼‚äº®åœ°å®Œæˆã€‚</p>
<pre><code>Set oCart = New Shopping_Cart
Set oP1 = New Shopping_CartItem : oP1.Init &quot;ç§‘å­¸éºµ&quot;, 3, &quot;Normal&quot;
Set oP2 = New Shopping_CartItem : oP2.Init &quot;ç“¶è£å¯æ¨‚&quot;, 2, &quot;Normal&quot;
Set oP3 = New Shopping_CartItem : oP3.Init &quot;ç›’è£å·§å…‹åŠ›&quot;, 1, &quot;Normal&quot;
oCart.AddCartItem oP1
oCart.AddCartItem oP2
oCart.AddCartItem oP3
Set oP1 = Nothing
Set oP2 = Nothing
Set oP3 = Nothing

</code></pre><p>å…¶å¯¦æˆ‘çš„æƒ³æ³•æ‡‰è©²æ˜¯å¦‚æ­¤ï¼š</p>
<pre><code>oCart.AddCartItem(New Shopping_CartItem(&quot;ç§‘å­¸éºµ&quot;, 3, &quot;Normal&quot;))
oCart.AddCartItem(New Shopping_CartItem(&quot;ç“¶è£å¯æ¨‚&quot;, 2, &quot;Normal&quot;))
oCart.AddCartItem(New Shopping_CartItem(&quot;ç›’è£å·§å…‹åŠ›&quot;, 1, &quot;Normal&quot;))

</code></pre><p>ç•¶ç„¶é€™å€‹ç¨‹å¼æ˜¯ä¸èƒ½ç”¨çš„ï¼Œå› ç‚º ASP (VBScript) çš„å»ºæ§‹å¼æ²’è¾¦æ³•å‚³åƒæ•¸é€²å»ï¼Œè€Œä¸”ä¹Ÿä¸å…¬é–‹ï¼Œæ‰€ä»¥å°±å¿˜äº†å®ƒå§ã€‚</p>
<h3 id="æ›´æ–°è³¼ç‰©è»Šèˆ‡å–å¾—ç¸½é‡‘é¡">æ›´æ–°è³¼ç‰©è»Šèˆ‡å–å¾—ç¸½é‡‘é¡</h3>
<p>åœ¨å°‡å•†å“åŠ å…¥è³¼ç‰©è»Šæ™‚ï¼Œæˆ‘å€‘ä¸¦ä¸æœƒç«‹åˆ»å»è¨ˆç®—è³¼ç‰©è»Šçš„ç¸½é‡‘é¡ï¼Œè€Œæ˜¯ç­‰åˆ°éœ€è¦æ™‚å†é‡æ–°è¨ˆç®—æ•´å€‹è³¼ç‰©è»Šå…§çš„è³¼è²·é …ç›®æ‰€åŒ…å«çš„åƒ¹éŒ¢ã€‚</p>
<p>æ‰€ä»¥æˆ‘åœ¨ä¸Šé¢çš„æ¸¬è©¦ç¨‹å¼çš„æœ€å¾ŒåŠ ä¸Šæ›´æ–°è³¼ç‰©è»Šçš„æµç¨‹ã€‚</p>
<pre><code>Set oCart = New Shopping_Cart
Set oP1 = New Shopping_CartItem : oP1.Init &quot;ç§‘å­¸éºµ&quot;, 3, &quot;Normal&quot;
Set oP2 = New Shopping_CartItem : oP2.Init &quot;ç“¶è£å¯æ¨‚&quot;, 2, &quot;Normal&quot;
Set oP3 = New Shopping_CartItem : oP3.Init &quot;ç›’è£å·§å…‹åŠ›&quot;, 1, &quot;Normal&quot;
oCart.AddCartItem oP1
oCart.AddCartItem oP2
oCart.AddCartItem oP3
Set oP1 = Nothing
Set oP2 = Nothing
Set oP3 = Nothing
oCart.Update
Response.Write oCart.GetAmount

</code></pre><p>è¨»ï¼šå…¶å¯¦é™¤äº†æ›´æ–°æ•´å€‹è³¼ç‰©è»Šä»¥å¤–ï¼Œæ‡‰è©²é‚„è¦èƒ½å–®ç¨æ›´æ–°æŸå€‹æŒ‡å®šçš„å•†å“æˆ–æ˜¯æ¸…ç©ºè³¼ç‰©è»Šï¼Œä¸éæˆ‘æƒ³é€™å€‹å°±ç•™çµ¦ä½ è‡ªå·±å»æ€è€ƒå§ã€‚</p>
<h3 id="å¯«å‡ºç¨‹å¼">å¯«å‡ºç¨‹å¼</h3>
<p>ç¾åœ¨ï¼Œæˆ‘å€‘å°±å¯ä»¥æ•´ç†å‡º Shopping_Cart é¡åˆ¥æ‡‰è©²è¦æœ‰ä»€éº¼ä¸»è¦çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>åŠ å…¥å•†å“ (AddCartItem)</li>
<li>æ›´æ–°è³¼ç‰©è»Š (Update)</li>
<li>å–å¾—ç¸½é‡‘é¡ (GetAmount)</li>
</ul>
<p>ç•¶ç„¶ï¼Œåœ¨è³¼ç‰©è»Šå…§éƒ¨æˆ‘å€‘æ‡‰è¦æœƒéœ€è¦ä¸€å€‹é›†åˆç‰©ä»¶ï¼Œç”¨ä¾†å­˜æ”¾è³¼è²·é …ç›®ï¼Œè€Œ Dictionary ç‰©ä»¶å°±æ˜¯æœ€é©åˆçš„äº†ã€‚è‡³æ–¼å…¶ä»–çš„åŠŸèƒ½æ˜¯ç‚ºäº†èƒ½è®“æ¸¬è©¦èƒ½å¤ æ­£å¸¸åŸ·è¡Œï¼Œæˆ‘å€‘æš«æ™‚ç•¥éä¸æã€‚</p>
<p>æ•´å€‹è³¼ç‰©è»Šçš„ç¨‹å¼å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;%
' /class/Shopping/Cart.asp
' è³¼ç‰©è»Š
Class Shopping_Cart
Private CartItemList
Private Fields
' ç‰©ä»¶åˆå§‹åŒ–
Private Sub Class_Initialize()
' æˆ‘å€‘å»ºç«‹äº†ä¸€å€‹å­˜æ”¾è³¼è²·é …ç›®çš„ Dictionary ç‰©ä»¶
' ä»¥åŠä¸€å€‹å­˜æ”¾è³¼ç‰©è»Šè³‡è¨Šçš„ Dictionary ç‰©ä»¶
Set CartItemList = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
Set Fields = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
Fields.Add &quot;Amount&quot;, 0
End Sub
' åŠ å…¥å•†å“
Public Sub AddCartItem(oCartItem)
' æˆ‘å€‘æŠŠå•†å“åç¨±ç•¶åšç´¢å¼•éµï¼Œå¯¦éš›ä¸Šå‰‡æœƒæ¯”è¼ƒè¤‡é›œ
Dim sKey : sKey = oCartItem.GetField(&quot;Name&quot;)
' å…ˆåˆ¤æ–·æœ‰æ²’æœ‰ç›¸åŒçš„å•†å“å­˜åœ¨
If Not CartItemList.Exists(sKey) Then
CartItemList.Add sKey, oCartItem
' å·²ç¶“å­˜åœ¨å°±æ›´æ”¹æ•¸é‡
Else
Dim oExistedCartItem
Set oExistedCartItem = CartItemList(sKey)
oExistedCartItem.SetField &quot;Quantity&quot;, _
oExistedCartItem.GetField(&quot;Quantity&quot;) + _
oCartItem.GetField(&quot;Quantity&quot;)
End If
End Sub
' å–å¾—æ‰€æœ‰å•†å“
Public Function Items()
Items = CartItemList.Items
End Function
' åˆ¤æ–·æ˜¯å¦å­˜åœ¨æŸå€‹å•†å“
Public Function Exists(sKey)
Exists = CartItemList.Exists(sKey)
End Function
' æ›´æ–°è³¼ç‰©è»Š
Public Sub Update()
Dim oCartItem
Fields(&quot;Amount&quot;) = 0
For Each oCartItem In CartItemList.Items
oCartItem.Refresh
Fields(&quot;Amount&quot;) = Fields(&quot;Amount&quot;) + oCartItem.GetField(&quot;SubTotal&quot;)
Next
End Sub
' å–å¾—ç¸½é‡‘é¡
Public Function GetAmount()
GetAmount = Fields(&quot;Amount&quot;)
End Function
' ç‰©ä»¶çµæŸ
Private Sub Class_Terminate()
Set CartItemList = Nothing
Set Fields = Nothing
End Sub
End Class
%&gt;

</code></pre><p>å¦‚ä½ æ‰€è¦‹ï¼Œç›®å‰å®ƒåªæ˜¯å€‹ç°¡å–®çš„è³¼ç‰©è»Šï¼Œå¾Œé¢æˆ‘å€‘å†ä¾†è«‡è«‡å®ƒæœƒå¦‚ä½•å› æ‡‰è®ŠåŒ–ã€‚</p>
<h2 id="è³¼è²·é …ç›®">è³¼è²·é …ç›®</h2>
<p>è³¼è²·é …ç›® (CartItem) å’Œå•†å“ (Product) æ˜¯ä¸ä¸€æ¨£çš„æ¦‚å¿µï¼Œå•†å“ä¸æœƒçŸ¥é“è‡ªå·±æœƒå±¬æ–¼ä»€éº¼æ´»å‹•ï¼Œä¹Ÿä¸æœƒçŸ¥é“è³¼è²·æ•¸é‡çš„è³‡è¨Šã€‚è€Œè³¼è²·é …ç›®ä¸»è¦æ˜¯è¨˜éŒ„æ¶ˆè²»è€…è²·äº†äº›ä»€éº¼ï¼Œä¸¦è²·äº†å¤šå°‘ã€‚</p>
<p>ç”±æ–¼æˆ‘å€‘å·²ç¶“å¯«å¥½äº†è³¼ç‰©è»Šé¡åˆ¥ï¼Œæ‰€ä»¥æˆ‘å€‘ä¹Ÿèƒ½å¤ å¾ˆæ¸…æ¥šè³¼è²·é …ç›®æ‡‰è©²è¦æä¾›ä»€éº¼è³‡è¨Šçµ¦è³¼ç‰©è»Šã€‚åŒ…æ‹¬ï¼š</p>
<ul>
<li>åˆå§‹åŒ–å•†å“è³‡æ–™ (Init)</li>
<li>å–å¾—æŒ‡å®šæ¬„ä½ (GetField)</li>
<li>æ›´æ–°è³¼è²·é …ç›®çš„å°è¨ˆé‡‘é¡ (Refresh)</li>
</ul>
<p>è³¼è²·é …ç›®çš„ç¨‹å¼å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;%
' /class/Shopping/CartItem.asp
Class Shopping_CartItem
Private Fields
Private Sub Class_Initialize()
Set Fields = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
Fields.Add &quot;Price&quot;, 0
Fields.Add &quot;Quantity&quot;, 0
Fields.Add &quot;SubTotal&quot;, 0
Fields.Add &quot;EventType&quot;, &quot;&quot;
Fields.Add &quot;EventID&quot;, 0
End Sub
Private Sub Class_Terminate()
Set Fields = Nothing
End Sub
Private Sub SetField(sName, vValue)
If Fields.Exists(sName) Then
Fields(sName) = vValue
End If
End Sub
' åˆå§‹åŒ–å•†å“è³‡æ–™
Public Sub Init(sName, iQuantity, sEventType)
Dim iPrice
Dim oProduct
Set oProduct = GetObject(&quot;Shopping_MockProduct&quot;)
oProduct.Init sName
' å¾è³‡æ–™åº«å–å¾—è³‡æ–™
If oProduct.Exists Then
iPrice = oProduct.GetPrice
SetField &quot;Price&quot;, iPrice
SetField &quot;Quantity&quot;, iQuantity
SetField &quot;SubTotal&quot;, iPrice * iQuantity
SetField &quot;EventType&quot;, sEventType
SetField &quot;EventID&quot;, iEventID
End If
End Sub
' å–å¾—æŒ‡å®šæ¬„ä½è³‡æ–™
Public Function GetField(sName)
GetField = Null
If Fields.Exists(sName) Then
GetField = Fields(sName)
End If
End Function
' æ›´æ–°è³¼è²·é …ç›®å…§å®¹
Public Sub Refresh()
Fields(&quot;SubTotal&quot;) = Fields(&quot;Price&quot;) * Fields(&quot;Quantity&quot;)
End Sub
End Class
%&gt;

</code></pre><p>ä¸€èˆ¬åœ¨è³¼è²·é …ç›®åˆå§‹åŒ–æ™‚ï¼Œæœƒå¾è³‡æ–™åº«å»å–å¾—å•†å“çš„è³‡æ–™ï¼Œä¸éé€™è£¡æˆ‘ç‚ºäº†ç°¡åŒ–ç¨‹å¼ï¼Œå°±æ²’æœ‰å¯¦éš›å»é€£çµè³‡æ–™åº«ï¼Œè€Œæ˜¯æŠŠè³‡æ–™å¯«æ­» (<a href="http://en.wikipedia.org/wiki/Hard_code">hard-code</a>) åœ¨æ¨¡æ“¬ç”¨çš„å•†å“é¡åˆ¥è£¡ã€‚å¦‚æœåˆ°æ™‚å€™çœŸçš„è¦é€£çµè³‡æ–™åº«æ™‚ï¼Œæˆ‘åªè¦æŠ½æ›æ‰é€™å€‹å‡çš„å•†å“é¡åˆ¥ï¼Œæ›ä¸ŠæœƒçœŸæ­£æŠ“å–è³‡æ–™åº«çš„å•†å“é¡åˆ¥å³å¯ã€‚</p>
<p>è‡³æ–¼æ¨¡æ“¬ç”¨çš„å•†å“é¡åˆ¥ (MockProduct) ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;%
' /class/Shopping/MockProduct.asp
Class Shopping_MockProduct
Private ProductData
Private Name
' ç‰©ä»¶å•Ÿå‹•
Private Sub Class_Initialize()
Set ProductData = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
ProductData.Add &quot;ç§‘å­¸éºµ&quot;, 6
ProductData.Add &quot;ç“¶è£å¯æ¨‚&quot;, 20
ProductData.Add &quot;ç›’è£å·§å…‹åŠ›&quot;, 100
Name = &quot;&quot;
End Sub
' ç‰©ä»¶çµæŸ
Private Sub Class_Terminate()
Set ProductData = Nothing
End Sub
' å•†å“åˆå§‹åŒ–
Public Sub Init(sName)
Name = sName
End Sub
' å•†å“æ˜¯å¦å­˜åœ¨
Public Function Exists()
Exists = ProductData.Exists(Name)
End Function
' å–å¾—åƒ¹éŒ¢
Public Function GetPrice()
GetPrice = ProductData(Name)
End Function
End Class
%&gt;

</code></pre><p>è¨»ï¼šç‚ºäº†ç°¡åŒ–ç¨‹å¼ç¯‡å¹…ï¼Œæˆ‘æ‹¿æ‰äº†è¨±å¤šé˜²å‘†ç¨‹å¼ç¢¼ã€‚</p>
<p>ç¾åœ¨æ•´å€‹ç¨‹å¼çš„æ¶æ§‹å¦‚ä¸‹ (æˆ‘ç°¡ç•¥æ‰ä¸€äº›é€šç”¨çš„å‡½å¼åŠå±¬æ€§) ï¼š</p>
<p><img src="/resources/ooasp_cart/images/ooasp_cart_1_1.png" alt="åŸå§‹è³¼ç‰©è»Šæ¶æ§‹"></p>
<h2 id="æ–°çš„è³¼ç‰©æ¨¡å¼">æ–°çš„è³¼ç‰©æ¨¡å¼</h2>
<p>è©²ä¾†çš„é‚„æ˜¯æœƒä¾†ï¼Œå®¢æˆ¶ç¸½æ˜¯ä¸æœƒè®“æˆ‘å€‘éå¥½æ—¥å­çš„ã€‚æˆ‘å€‘æ¥åˆ°äº†å…©å€‹æ–°çš„éœ€æ±‚ï¼ŒæŠ˜æ‰£æ´»å‹•èˆ‡è´ˆå“æ´»å‹•ã€‚è¦æ ¼ç°¡è¿°å¦‚ä¸‹ï¼š</p>
<ul>
<li>æŠ˜æ‰£æ´»å‹•ï¼šæœ‰éƒ¨ä»½å•†å“å¯ä»¥æœ‰æŠ˜æ‰£ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹ç¾æœ‰çš„å•†å“è³‡æ–™ï¼Œè€Œæ˜¯è¦åœ¨åŠ å…¥è³¼ç‰©è»Šæ™‚å°‡é‡‘é¡è‡ªå‹•æŠµæ‰£æ‰ã€‚</li>
<li>è´ˆå“æ´»å‹•ï¼šå¦‚æœæ¶ˆè²»è€…è²·äº†æŸå€‹æŒ‡å®šå•†å“ï¼Œé‚£éº¼è³¼ç‰©è»Šè¦è‡ªå‹•å¹«ä»–åŠ å…¥é™„å±¬åœ¨é€™å€‹å•†å“ä¸‹çš„è´ˆå“ã€‚</li>
</ul>
<p>è¨»ï¼šåˆ¥æ‡·ç–‘ï¼Œé€™å…©å€‹è¡ŒéŠ·æ‰‹æ³•åœ¨å¯¦éš›çš„ç¶²ç«™ä¸Šæ˜¯å¸¸è¦‹çš„ï¼Œè€Œä¸”é‚„ç®—ç°¡å–®ï¼ŒçœŸæ­£é›£æçš„æ´»å‹•æˆ‘é‚„æ²’å¯«å‡ºä¾†å‘¢ã€‚</p>
<p>ç‚ºäº†ç°¡åŒ–èªªæ˜ï¼Œæˆ‘æŠŠå¯¦ä½œè¦æ ¼å®šç¾©å¦‚ä¸‹ï¼š</p>
<ul>
<li>æŠ˜æ‰£æ´»å‹•ï¼šæœ‰æŠ˜æ‰£çš„å•†å“è¢«æ­¸é¡æ–¼ Discount åˆ†é¡ï¼Œè€Œå•†å“åƒ¹æ ¼ä¸€å¾‹ç‚º 9 æŠ˜ã€‚</li>
<li>è´ˆå“æ´»å‹•ï¼šç•¶æˆ‘å€‘è²·äº†ä¸€ç“¶å¯æ¨‚å¾Œï¼Œè³¼ç‰©è»Šæœƒè‡ªå‹•å¹«æˆ‘å€‘åŠ ä¸Šä¸€åŒ…ç§‘å­¸éºµã€‚</li>
</ul>
<p>åœ¨è´ˆå“æ´»å‹•çš„éƒ¨ä»½ï¼Œæˆ‘å¸Œæœ›è´ˆå“çš„åƒ¹æ ¼æ˜¯ 0 ï¼Œæ‰€ä»¥åœ¨æˆ‘ Shopping_MockProduct é¡åˆ¥åˆå§‹åŒ–æ™‚åŠ å…¥äº†ä¸€å€‹åƒ¹æ ¼ç‚º 0 çš„ã€Œç§‘å­¸éºµ(è´ˆå“)ã€ï¼š</p>
<pre><code>  ' ç‰©ä»¶å•Ÿå‹•
Private Sub Class_Initialize()
Set ProductData = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
ProductData.Add &quot;ç§‘å­¸éºµ&quot;, 6
ProductData.Add &quot;ç§‘å­¸éºµ(è´ˆå“)&quot;, 0
ProductData.Add &quot;ç“¶è£å¯æ¨‚&quot;, 20
ProductData.Add &quot;ç›’è£å·§å…‹åŠ›&quot;, 100
Name = &quot;&quot;
End Sub

</code></pre><p>å…¶å¯¦æˆ‘å¸Œæœ›é™¤äº†é€™å…©å€‹æ´»å‹•ä»¥å¤–ï¼Œæˆ‘çš„è³¼ç‰©è»Šèƒ½å¤ æ‡‰ä»˜å…¶ä»–é¡å‹çš„æ´»å‹•ï¼Œå› æ­¤æˆ‘åœ¨ AddCartItem å‘¼å«äº†ä¸€å€‹å‡½å¼ï¼Œç”¨ä¾†æª¢æŸ¥å•†å“æ‰€å±¬çš„æ´»å‹•ï¼Œä¹Ÿå°±æ˜¯èªªæˆ‘æŠŠæª¢æŸ¥çš„å‹•ä½œå¾ AddCartItem ä¸­ç¨ç«‹å‡ºä¾†ï¼š</p>
<pre><code>  ' åŠ å…¥å•†å“
Public Sub AddCartItem(oCartItem)
' æˆ‘å€‘æŠŠå•†å“åç¨±ç•¶åšç´¢å¼•éµï¼Œå¯¦éš›ä¸Šå‰‡æœƒæ¯”è¼ƒè¤‡é›œ
Dim sKey : sKey = oCartItem.GetField(&quot;Name&quot;)
' å…ˆåˆ¤æ–·æœ‰æ²’æœ‰ç›¸åŒçš„å•†å“å­˜åœ¨
If Not CartItemList.Exists(sKey) Then
CartItemList.Add sKey, oCartItem
' æª¢æŸ¥å•†å“æ˜¯å¦å±¬æ–¼æŸå€‹æ´»å‹•
CheckCartItemForEvent oCartItem
' å·²ç¶“å­˜åœ¨å°±æ›´æ”¹æ•¸é‡
Else
Dim oExistedCartItem
Set oExistedCartItem = CartItemList(sKey)
oExistedCartItem.SetField &quot;Quantity&quot;, _
oExistedCartItem.GetField(&quot;Quantity&quot;) + _
oCartItem.GetField(&quot;Quantity&quot;)
End If
End Sub

</code></pre><p>CheckCartItemForEvent å‡½å¼ä¸»è¦æœƒåˆ¤æ–·å•†å“çš„æ´»å‹•å‹æ…‹ï¼Œä»¥è™•ç†å°æ‡‰çš„å‹•ä½œï¼Œå…¶ç¨‹å¼å¦‚ä¸‹ï¼š</p>
<pre><code>  ' æª¢æŸ¥æ˜¯å¦ç‚ºæŸå€‹æ´»å‹•çš„å•†å“
Private Sub CheckCartItemForEvent(oCartItem)
Select Case oCartItem.GetField(&quot;EventType&quot;)
' æŠ˜æ‰£æ´»å‹•
Case &quot;Discount&quot;
oCartItem.SetField &quot;Price&quot;, oCartItem.GetField(&quot;Price&quot;) * 0.9
oCartItem.Refresh
' è´ˆå“æ´»å‹•
Case &quot;Gift&quot;
If &quot;ç“¶è£å¯æ¨‚&quot; = oCartItem.GetField(&quot;Name&quot;) Then
Dim oGiftCartItem
Set oGiftCartItem = GetObject(&quot;Shopping_CartItem&quot;)
oGiftCartItem.Init &quot;ç§‘å­¸éºµ(è´ˆå“)&quot;, 1, &quot;Normal&quot;
AddCartItem oGiftCartItem
End If
' ä¸€èˆ¬å•†å“ï¼Œä»€éº¼ä¹Ÿä¸ç”¨ä½œ
Case Else
End Select
End Sub

</code></pre><p>å› ç‚º CheckCartItemForEvent ä¸æœƒè¢«å¤–éƒ¨å‘¼å«ï¼Œæ‰€ä»¥æˆ‘ç”¨ Private ä¾†æŒ‡å®šå®ƒçš„å­˜å–æ¬Šé™ã€‚</p>
<h2 id="strategy-æ¨¡å¼">Strategy æ¨¡å¼</h2>
<p>é›–ç„¶ç¾åœ¨ CheckCartItemForEvent å‡½å¼çœ‹èµ·ä¾†é‚„ä¸æ˜¯å¾ˆé¾å¤§ï¼Œä¸éæ—¢ç„¶å·²ç¶“æœ‰ä¸‰å€‹ä¸åŒçš„æ´»å‹•äº† (ä¸€èˆ¬å•†å“ä¹Ÿå¯æ­¸å±¬ç‚ºä¸€ç¨®æ´»å‹•)ï¼Œç•¶ç„¶é‚„æœƒå¯èƒ½æœ‰ç¬¬å››å€‹æˆ–ç¬¬äº”å€‹ã€‚å¯æƒ³è€ŒçŸ¥æœªä¾† CheckCartItemForEvent æœƒé€æ¼¸è®Šå¾—è½è½é•·ï¼Œè¶…å‡ºæˆ‘å€‘æ‰€èƒ½ç†è§£çš„ç¯„åœã€‚</p>
<p>å¦‚æœæˆ‘å€‘èƒ½æŠŠæ´»å‹•æ©Ÿåˆ¶ç¨ç«‹åœ¨è³¼ç‰©è»Šå¤–æ˜¯ä¸æ˜¯æ¯”è¼ƒå¥½å‘¢ï¼Ÿé€™æ¨£ä¹Ÿèƒ½ä½¿å¾—è³¼ç‰©è»Šä¸å†èƒŒè² éå¤šçš„å•†æ¥­é‚è¼¯ï¼Œåœ¨é–‹ç™¼ä¸Šä¹Ÿèƒ½éˆæ´»è¨±å¤šã€‚</p>
<p>é¦–å…ˆæˆ‘å®šç¾©ä¸€å€‹è™›å‡çš„æ´»å‹•é¡åˆ¥å¥½äº†ï¼Œæˆ‘å€‘è¦åœ¨æ¦‚å¿µä¸Šç¹¼æ‰¿å®ƒ (å°±æ˜¯ Duck Typing å•¦) ï¼Œé€™å€‹é¡åˆ¥çš„å®šç¾©å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;%
Class Event
' è™•ç†è³¼è²·é …ç›®
Public Sub Check(oCartItem, oCart)
End Sub
End Class
%&gt;

</code></pre><p>åœ¨ Event è™›æ“¬é¡åˆ¥ä¸­ï¼Œæˆ‘å€‘æä¾›äº†ä¸€å€‹ Check å‡½å¼ï¼Œç”¨ä¾†æª¢æŸ¥å³å°‡è¦åŠ å…¥çš„å•†å“ oCartItem ã€‚ä¸éç‚ºä»€éº¼é‚„éœ€è¦ä¸€å€‹ oCart åƒæ•¸å‘¢ï¼Ÿé€™æ˜¯å› ç‚ºæŸäº›æ´»å‹•å¯èƒ½æœƒéœ€è¦è³¼ç‰©è»Šå…§çš„å…¶ä»–å•†å“ï¼Œæ‰€ä»¥æˆ‘å€‘å°±æŠŠè³¼ç‰©è»Šç‰©ä»¶å‚³é€²ä¾†è®“ Event è‡ªè¡Œæ‡‰ç”¨ï¼Œç¨å¾Œæˆ‘å€‘å°±èƒ½çœ‹åˆ°å¯¦éš›çš„ä¾‹å­ã€‚</p>
<p>æ¥è‘—æˆ‘å»ºç«‹ä¸€å€‹è™•ç†ä¸€èˆ¬å•†å“çš„æ´»å‹•é¡åˆ¥ Event_Normalï¼Œç„¶è€Œé€™å€‹ç‰©ä»¶å…¶å¯¦ä»€éº¼ä¹Ÿä¸åšï¼š</p>
<pre><code>&lt;%
' /class/Event/Normal.asp
Class Event_Normal ' Extends Event
' è™•ç†è³¼è²·é …ç›®
Public Sub Check(oCartItem, oCart)
End Sub
End Class
%&gt;

</code></pre><p>ç•¶ç„¶æˆ‘å€‘é‚„æœ‰å…©ç¨®æ´»å‹•é¡åˆ¥ï¼Œå…ˆçœ‹çœ‹ Discount å¥½äº†ï¼Œå®ƒæ¯”è¼ƒç°¡å–®ï¼š</p>
<pre><code>&lt;%
' /class/Event/Discount.asp
Class Event_Discount ' Extends Event
' è™•ç†è³¼è²·é …ç›®
Public Sub Check(oCartItem, oCart)
oCartItem.SetField &quot;Price&quot;, oCartItem.GetField(&quot;Price&quot;) * 0.9
oCartItem.Refresh
End Sub
End Class
%&gt;

</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°æˆ‘ç”¨äº†ä¸€å€‹å¾ˆç°¡å–®çš„åšæ³•ï¼šæŠŠåŸä¾†çš„å€¼ä¹˜ä»¥ 0.9 å¾Œï¼Œå†å°‡å®ƒè¨­å› oCartItem çš„å–®åƒ¹è£¡ã€‚</p>
<p>è¨»ï¼šæ³¨æ„ï¼ ASP çš„ç‰©ä»¶æ˜¯ä»¥å‚³åƒè€ƒçš„æ–¹å¼ä¾†å‚³éçš„ï¼Œæ‰€ä»¥é€™é‚Šåªè¦ä¸€æ›´æ–°ï¼Œå°±æœƒç›´æ¥åæ‡‰å›è³¼ç‰©è»Šå…§æ‰€å°æ‡‰çš„ CartItem ç‰©ä»¶ã€‚</p>
<p>å‰©ä¸‹çš„ Gift é¡åˆ¥å°±æ¯”è¼ƒè¤‡é›œäº†ï¼Œå‰›å‰›å®šç¾©çš„ oCart ç¾åœ¨å°±æ´¾ä¸Šç”¨å ´äº†ã€‚</p>
<pre><code>&lt;%
' /class/Event/Gift.asp
Class Event_Gift ' Extends Event
' è™•ç†è³¼è²·é …ç›®
Public Sub Check(oCartItem, oCart)
If &quot;ç“¶è£å¯æ¨‚&quot; = oCartItem.GetField(&quot;Name&quot;) Then
Dim oGiftCartItem
Set oGiftCartItem = GetObject(&quot;Shopping_CartItem&quot;) : oGiftCartItem.Init &quot;ç§‘å­¸éºµ(è´ˆå“)&quot;, 1, &quot;Normal&quot;
oCart.AddCartItem oGiftCartItem
End If
End Sub
End Class
%&gt;

</code></pre><p>ç•¶ Event_Gift ç™¼ç¾ oCartItem çš„ Name æ˜¯ã€Œç“¶è£å¯æ¨‚ã€æ™‚ï¼Œå°±æœƒå»ºç«‹ä¸€å€‹ã€Œç§‘å­¸éºµ(è´ˆå“)ã€çš„ CartItem ç‰©ä»¶ï¼Œ ä¸¦åˆ©ç”¨ oCart çš„ AddCartItem æŠŠé€™å€‹è´ˆå“å†åŠ ä¸Šå»ã€‚</p>
<p>å¥½ï¼Œç¾åœ¨ä¸‰ç¨®æ´»å‹•é¡åˆ¥éƒ½å·²ç¶“å®šç¾©å¥½äº†ï¼Œæˆ‘å€‘å°±ä¾†çœ‹çœ‹æ€éº¼ç”¨å§ã€‚</p>
<p>æˆ‘æŠŠåŸä¾†çš„ CheckCartItemForEvent æ”¹æˆä»¥ä¸‹çš„å½¢å¼ï¼š</p>
<pre><code>  ' æª¢æŸ¥æ˜¯å¦ç‚ºæŸå€‹æ´»å‹•çš„å•†å“
Private Sub CheckCartItemForEvent(oCartItem)
Dim oEvent
Select Case oCartItem.GetField(&quot;EventType&quot;)
' æŠ˜æ‰£æ´»å‹•
Case &quot;Discount&quot;
        Set oEvent = GetObject(&quot;Event_Discount&quot;)
' è´ˆå“æ´»å‹•
Case &quot;Gift&quot;
        Set oEvent = GetObject(&quot;Event_Gift&quot;)
' ä¸€èˆ¬å•†å“
Case Else
        Set oEvent = GetObject(&quot;Event_Normal&quot;)
End Select
    oEvent.Check oCartItem, Me
End Sub

</code></pre><p>ç™¼ç¾ä»€éº¼æ²’æœ‰ï¼Ÿæˆ‘å€‘ç«Ÿç„¶å¯ä»¥ç”¨åŒæ¨£çš„ Check å‡½å¼ä¾†æª¢æŸ¥å•†å“ï¼é€™å°±æ˜¯æ‰€è¬‚çš„ Strategy æ¨¡å¼ï¼</p>
<p>Strategy æ¨¡å¼ä¸»è¦çš„æ¦‚å¿µå°±æ˜¯å¯æŠ½æ›çš„ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯åœ¨ç¨‹å¼åŸ·è¡Œçš„éšæ®µè£¡ï¼Œæˆ‘å€‘èƒ½ç”¨åŒä¸€ç¨®æ“ä½œæ–¹å¼ (å¦‚ä¸Šé¢çš„ Check å‡½å¼) ä¾†å°è³‡æ–™é€²è¡Œä¸åŒçš„é‹ç®—æ¢ä»¶ï¼Œè€Œé€™äº›é‹ç®—é‚è¼¯å‰‡å®šç¾©åœ¨ä¸åŒçš„ç­–ç•¥é¡åˆ¥è£¡ï¼Œå°±åƒä¸Šé¢çš„ Event_xxx é¡åˆ¥ã€‚</p>
<p>åœ¨å®Œæ•´æ”¯æ´ç‰©ä»¶å°å‘æŠ€è¡“çš„èªè¨€ä¸­ï¼Œé€™äº›ç­–ç•¥é¡åˆ¥æ‡‰è©²æ˜¯ç¹¼æ‰¿è‡ªä¸€å€‹æŠ½è±¡é¡åˆ¥æˆ–ä»‹é¢ (å°±æ˜¯æˆ‘å€‘ä¸Šé¢æåˆ°çš„è™›æ“¬ Event é¡åˆ¥) ï¼Œè€Œ Event çš„ Check å‡½å¼å°±æ˜¯éœ€è¦è¢«å¯¦ä½œçš„äº†ã€‚å°±å› ç‚º Event é¡åˆ¥æ‰€è¡ç”Ÿçš„é¡åˆ¥åœ¨å¯¦ä½œä¸Šæ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘å€‘æ‰èƒ½ç”¨åŒä¸€å€‹ Check å‡½å¼ä¾†å°æ‡‰åˆ°ä¸åŒçš„æ´»å‹•æ¢ä»¶ã€‚</p>
<p>è¨»ï¼šè©±èªªå›ä¾†ï¼Œ ASP (VBScript) æ—¢ç„¶æ²’æœ‰ç¹¼æ‰¿ï¼Œæ‰€ä»¥åªè¦æ˜¯æœ‰å¯¦ä½œç›¸åŒå‡½å¼ä»‹é¢çš„é¡åˆ¥æ‰€ç”¢ç”Ÿçš„å¯¦é«”ï¼Œéƒ½æœ‰å¯èƒ½è¢«æ‹¿ä¾†ç•¶åšæ˜¯ç­–ç•¥ç‰©ä»¶ã€‚é€™é»æ˜¯ ASP (VBScript) è‡ªç”±å»ä¹Ÿæ˜¯ä¸åˆç‰©ä»¶å°å‘èªè¨€è¦ç¯„çš„åœ°æ–¹ã€‚</p>
<p>å¦å¤–æ³¨æ„ä¸€é»ï¼Œå°±æ˜¯ Me é—œéµå­—çš„æ‡‰ç”¨ã€‚æˆ‘åˆ©ç”¨ Me é—œéµå­—æŠŠ CheckCartItemForEvent æ‰€åœ¨é€™å€‹ç‰©ä»¶ (ä¹Ÿå°±æ˜¯ Shopping_Cart çš„å¯¦é«”) ï¼Œå‚³éçµ¦ Event_xxx ç‰©ä»¶ï¼Œé€™æ¨£é€™äº› Event_xxx ç‰©ä»¶å°±æ˜¯åˆ©ç”¨ oCart åƒæ•¸ä¾†å­˜å–ç›®å‰çš„è³¼ç‰©è»Šå…§å®¹ã€‚é€™ç¨®æ–¹å¼ç¨±ç‚º delegate (å§”è¨—) ï¼Œ Shopping_Cart ç‰©ä»¶æ‹œè¨— Event ç‰©ä»¶åšä¸€äº›äº‹æƒ…ï¼Œæ‰€ä»¥è¦æŠŠè‡ªå·± (Me) è¨—ä»˜çµ¦å®ƒã€‚é€™åœ¨å§”è¨—è€…ç¼ºå°‘æŸäº›åŠŸèƒ½ï¼Œè€Œéœ€è¦å¤–éƒ¨ç‰©ä»¶å”åŠ©æ™‚éå¸¸æœ‰ç”¨ã€‚</p>
<p>å’Œå‰é¢ä¸€æ¨£ï¼Œæˆ‘ç°¡å–®åœ°æŠŠåŠ å…¥æ´»å‹•é¡åˆ¥çš„æ¶æ§‹åœ–æç¹ªå¦‚ä¸‹ï¼š</p>
<p><img src="/resources/ooasp_cart/images/ooasp_cart_1_2.png" alt="æ–°çš„è³¼ç‰©è»Šæ¶æ§‹"></p>
<h2 id="factory-method-æ¨¡å¼">Factory Method æ¨¡å¼</h2>
<p>åœ¨ä¸Šé¢çš„ç¨‹å¼è£¡ï¼Œæˆ‘å€‘é‚„æ˜¯åœ¨ CheckCartItemForEvent å‡½å¼ä¸­åƒé›œäº† Select Case æ•˜è¿°ï¼Œé€™ä½¿å¾—æˆ‘å€‘åˆ°æ™‚å€™è¦æ–°å¢æ´»å‹•æ™‚ï¼Œé‚„æ˜¯å¾—å›ä¾†åŠ ä¸Šæ–°çš„æ´»å‹•é¡åˆ¥å»ºæ§‹ç¨‹å¼ã€‚æœ‰æ²’æœ‰ä»€éº¼æ–¹æ³•å¯ä»¥é¿å…é€™äº›å‹•ä½œå‘¢ï¼Ÿæˆ–æ˜¯ç›´æ¥æ‹¿æ‰ Select Case æ•˜è¿°å‘¢ï¼Ÿ</p>
<p>æˆ‘ç›¸ä¿¡å¤§å®¶ä¹Ÿçœ‹å‡ºä¸€äº›ç«¯å€ªäº†ã€‚æˆ‘æ‰€ç”¨çš„é¡åˆ¥ä»£è™Ÿ Normal ã€ Gift åŠ Discount ï¼Œå…¶å¯¦å°±å°æ‡‰åˆ° Event çš„å¯¦ä½œé¡åˆ¥åç¨±ã€‚é€™è¡¨ç¤ºæˆ‘å€‘èƒ½å¤ åˆ©ç”¨é¡åˆ¥ä»£è™Ÿä¾†ç”¢ç”Ÿæˆ‘å€‘æ‰€éœ€è¦çš„ç‰©ä»¶ï¼Œä½†æ˜¯æ€éº¼åšå‘¢ï¼Ÿ</p>
<p>å¾ä¸Šé¢çš„ç¨‹å¼è£¡ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ° GetObject éœ€è¦ä¸€å€‹é¡åˆ¥åç¨±ä¾†ç•¶åšå¼•æ•¸ã€‚é€™å€‹å¼•æ•¸å‰›å¥½æ˜¯ç”¨ Event_ åŠ ä¸Šé¡åˆ¥ä»£ç¢¼ï¼Œæ‰€ä»¥æˆ‘å€‘å°±èƒ½å¤ åˆ©ç”¨é€™é»ä¾†ä¸‹æ‰‹ã€‚</p>
<p>æˆ‘æŠŠå‰›å‰›çš„ Select Case æ›æˆä»¥ä¸‹ç²—é«”çš„éƒ¨ä»½ï¼š</p>
<pre><code>' æª¢æŸ¥æ˜¯å¦ç‚ºæŸå€‹æ´»å‹•çš„å•†å“
Private Sub CheckCartItemForEvent(oCartItem)
Dim oEvent
Set oEvent = CreateEvent(oCartItem.GetField(&quot;EventType&quot;))
oEvent.Check oCartItem, Me
End Sub

</code></pre><p>ç¾åœ¨æˆ‘å€‘å°±è¦æ€è€ƒ CreateEvent å‡½å¼è¦ä¸Ÿå‡ºä»€éº¼æ±è¥¿ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„å¯¦ä½œï¼š</p>
<pre><code>' å–å¾—æ´»å‹•å•†å“
Private Function CreateEvent(sEventType)
Set CreateEvent = Nothing
On Error Resume Next
Set CreateEvent = GetObject(&quot;Event_&quot; &amp;amp; sEventType)
If CreateEvent Is Nothing Then
  Set CreateEvent = GetObject(&quot;Event_Normal&quot;)
End If
On Error Goto 0
End Function

</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°æˆ‘ç”¨ä¹‹å‰ä»‹ç´¹éçš„ Factory Method æ‰‹æ³•ä¾†å®Œæˆå»ºæ§‹æ´»å‹•ç‰©ä»¶çš„éç¨‹ï¼Œåˆ©ç”¨éŒ¯èª¤å»¶é²æ©Ÿåˆ¶è®“ä¸å­˜åœ¨çš„æ´»å‹•é¡åˆ¥ä¸€å¾‹è¦–ç‚ºä¸€èˆ¬å•†å“ä¾†è™•ç†ï¼Œé¿å…æ‰ä¸€äº›ä¸å¿…è¦çš„éº»ç…©ã€‚</p>
<p>Factory Method æœ€å¤§çš„å¥½è™•å°±æ˜¯èƒ½å¤ éš±è—ç‰©ä»¶å»ºæ§‹çš„éç¨‹ï¼Œè®“å‘¼å«å®ƒçš„ç¨‹å¼èƒ½å¤ ä¿æŒç°¡å–®åŠä¸€è‡´æ€§ã€‚å®ƒå¯ä»¥æŠŠå»ºæ§‹ç‰©ä»¶çš„è¤‡é›œé‚è¼¯å°è£åœ¨åˆ¥çš„é¡åˆ¥è£¡é¢ï¼Œä½¿å¾—æˆ‘å€‘èƒ½å¤ é‡è¤‡ä½¿ç”¨é€™å€‹é¡åˆ¥ä¾†ç”¢ç”Ÿæˆ‘å€‘æ‰€è¦çš„æ±è¥¿ï¼Œä¹Ÿå°±æ˜¯èƒ½æ›´ç°¡å–®åœ°æŠŠå»ºæ§‹ç‰©ä»¶è‡ªå‹•åŒ–ã€‚ä¸éåœ¨é€™è£¡ï¼Œä½ æœƒç™¼ç¾åˆ°æˆ‘ä¸¦æ²’æœ‰å†åšå‡ºä¸€å€‹é¡åˆ¥ä¾†æ”¾ç½® Factory Method ï¼Œç‚ºä»€éº¼å‘¢ï¼Ÿ</p>
<p>é€™è¦æ­¸åŠŸæ–¼èƒ½æŠŠå­—ä¸²ç•¶åšç¨‹å¼æ•˜è¿°çš„ Execute (ExecuteGlobal) æŒ‡ä»¤ï¼›åœ¨å…¶ä»–ä¸æ”¯æ´æ­¤ç‰¹æ€§çš„èªè¨€è£¡ï¼Œé¡ä¼¼ Select Case çš„æ•˜è¿°åœ¨ Factory Method ä¸­é€šå¸¸æ˜¯ä¸å¯é¿å…çš„ï¼›ç„¶è€Œåœ¨ ASP (VBScript ã€ JavaScript) æˆ– PHP ç­‰èªè¨€å¹³å°ä¸­ï¼Œ Factory Method å› ç‚ºé€™äº›èªè¨€æ”¯æ´æŠŠå­—ä¸²è®Šæˆç¨‹å¼æŒ‡ä»¤çš„ç‰¹æ€§ï¼Œæ‰€ä»¥åœ¨å¯¦ä½œä¸Šå°±è®Šå¾—æ›´æœ‰å½ˆæ€§ã€‚</p>
<p>è¨»ï¼šæŠŠå­—ä¸²ç•¶åšç¨‹å¼æ•˜è¿°é€™ç¨®æ–¹å¼é€šå¸¸æœƒæœ‰å®‰å…¨æ€§ä¸Šçš„è­°é¡Œå‡ºç¾ï¼Œæ‰€ä»¥å¯«ç¨‹å¼æ™‚è¦ç‰¹åˆ¥å°å¿ƒã€‚</p>
<h2 id="çµè«–">çµè«–</h2>
<p>å›é ­æ€è€ƒçœ‹çœ‹ï¼Œç¾åœ¨å¦‚æœåˆæœ‰ä¸€å€‹æ–°çš„æ´»å‹•ï¼Œæˆ‘å€‘å·²ç¶“ä¸å¿…å†æ›´æ”¹ Shopping_Cart é¡åˆ¥è£¡é¢çš„ç¨‹å¼ï¼›åªè¦æ–°å¢ä¸€å€‹ Event_xxx é¡åˆ¥ï¼Œå¯¦ä½œè©²æ´»å‹•çš„è¦å‰‡ï¼Œå°±èƒ½è®“è³¼ç‰©è»Šè™•ç†é€™äº›æ´»å‹•å•†å“ï¼Œé€™æ¨£çš„å½ˆæ€§å°±æ˜¯ç‰©ä»¶å°å‘æ€ç¶­æ‰€å¸¶ä¾†çš„å¥½è™•ã€‚</p>
<p>ä¹Ÿè¨±ä½ æœƒæƒ³ï¼Œé€™æˆ‘ç”¨å‡½å¼ä¹Ÿèƒ½åšåˆ°å‘€ï¼å…¶å¯¦ä¹Ÿæ²’éŒ¯ã€‚ä¸éé€™è£¡æˆ‘è¦å¼·èª¿ä¸€ä»¶äº‹ï¼Œä¸ç®¡ä½ ç”¨ä»€éº¼æ–¹å¼é–‹ç™¼ï¼Œåªè¦é€™äº›ç¨‹å¼åœ¨ä½ äº¤æ¥å¾Œé‚„å¯èƒ½å­˜æ´»æ™‚ï¼Œæœ€å¾Œä¸€å®šè¦è€ƒæ…®åˆ°ç¨‹å¼çš„å»¶å±•æ€§ã€‚æˆ‘æ¡ç”¨ç‰©ä»¶å°å‘æ€ç¶­åŠé–‹ç™¼æ‰‹æ³•æ˜¯ç‚ºäº†æ›´å®¹æ˜“è¡¨é”æˆ‘å°é€™å€‹ç³»çµ±çš„æ¦‚å¿µï¼Œè€Œä¸”ä¹Ÿè®“æ•´å€‹ç³»çµ±å°±åœ¨ç‰©ä»¶äº¤äº’ä½œç”¨ä¹‹ä¸‹ï¼Œå®Œæˆäº†è¨±å¤šçœ‹ä¼¼è¤‡é›œçš„å·¥ä½œã€‚</p>
<p>å¦å¤–æˆ‘å»ºè­°æŠŠé€™äº›é–‹ç™¼çš„æ¦‚å¿µæ’°å¯«æˆæ–‡ä»¶ï¼Œè®“å¾ŒçºŒç¶­è­·çš„äººå“¡èƒ½å¤ é€²å…¥ç‹€æ³ï¼Œå°±åƒé€™ç¯‡æ–‡ç« ä¸€æ¨£ã€‚ä»–å€‘ä¸ä¸€å®šèƒ½å¤ æ¸…æ¥šç‚ºä»€éº¼è¦æ¡ç”¨é€™æ¨£çš„æ–¹å¼ï¼Œæ‰€ä»¥é€éé¡ä¼¼é€™ç¯‡æ–‡ç« çš„èªªæ˜ï¼Œä»–å€‘å°±èƒ½ä¸€æ­¥ä¸€æ­¥ç­è§£é–‹ç™¼è€…æ‰€å»ºç«‹çš„ç³»çµ±è¼ªå»“ã€‚</p>
<p>æˆ‘å¸Œæœ›é€éæˆ‘çš„ä»‹ç´¹ï¼Œèƒ½å¤ è®“æˆ‘çš„ä¼™ä¼´ç­è§£ç‰©ä»¶å°å‘æ˜¯æ€éº¼ä¸€å›äº‹ã€‚è€Œå®ƒåˆ°åº•æ˜¯ä¸æ˜¯çœŸçš„å¿…é ˆä¾è³´èªè¨€ï¼Ÿé‚„æ˜¯å”åŠ©æˆ‘å€‘æŠŠå¿ƒç›®ä¸­çš„ç³»çµ±æ¶æ§‹æç¹ªå‡ºä¾†çš„ä¸€ç¨®è¨­è¨ˆæ‰‹æ³•ï¼Ÿæˆ‘æƒ³é€™é‚Šå°±ç•™çµ¦å¤§å®¶å»æ€è€ƒï¼Œç•¢ç«Ÿæˆ‘ä¸æ˜¯å¤§å¸«ï¼Œé€™ç¨®å•é¡Œæˆ‘ç„¡æ³•è§£ç­”ï¼›æˆ‘èƒ½å¤ åšçš„å°±æ˜¯æŠŠé€™äº›æ¦‚å¿µå¯¦éš›è½‰æ›æˆç¨‹å¼ç¢¼ï¼Œè®“ç³»çµ±èƒ½å¤ é †åˆ©é‹ä½œè€Œå·²ã€‚</p>
<h2 id="ç¯„ä¾‹ç¨‹å¼ä¸‹è¼‰">ç¯„ä¾‹ç¨‹å¼ä¸‹è¼‰</h2>
<p>ç¯„ä¾‹ç¨‹å¼ä¸æ˜¯å€‹å¯ç”¨çš„è³¼ç‰©è»Šï¼Œå®ƒåªåŒ…å«äº†éƒ¨ä»½çš„å•†æ¥­é‚è¼¯è€Œå·²ï¼Œæ‰€ä»¥æƒ³è¦ç›´æ¥æ‹¿å®ƒä¾†æ”¹å¯«çš„æœ‹å‹å¯èƒ½æœƒå¤±æœ›ã€‚ä¸éè£¡é¢æˆ‘ç”¨åˆ°äº† ASPUnit ï¼Œæœ‰èˆˆè¶£å­¸ç¿’å¦‚ä½•æ’°å¯«å–®å…ƒæ¸¬è©¦çš„æœ‹å‹å¯ä»¥åƒè€ƒçœ‹çœ‹ã€‚å¦å¤–è£¡é¢åŒ…å«äº†ä¸Šé¢æ¯å€‹æ­¥é©Ÿæ‰€ä»‹ç´¹çš„è³¼ç‰©è»ŠåŸå§‹ç¨‹å¼ï¼Œä½ å¯ä»¥åƒè€ƒå£“ç¸®æª”æ¡ˆçš„ README.txt ä¾†å¾—çŸ¥å¦‚ä½•åŸ·è¡Œå®ƒå€‘ã€‚</p>
<p><a href="/resources/ooasp_cart/source/ooasp_01_src.rar">ä¸‹è¼‰</a></p>
]]></content>
		</item>
		
		<item>
			<title>å¾ˆæœ‰è¶£çš„ Fluent Interface</title>
			<link>https://jaceju.net/fluent-interface/</link>
			<pubDate>Tue, 07 Mar 2006 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/fluent-interface/</guid>
			<description>åœ¨ç ”ç©¶ Zend Framework Preview çš„æ–‡ä»¶æ™‚ï¼Œç™¼ç¾äº†ä¸€å€‹å¾ˆæœ‰è¶£çš„ PHP å¯«æ³•ï¼š $select-&amp;gt;from(&#39;round_table&#39;, &#39;*&#39;) -&amp;gt;where(&#39;noble_title = ?&#39;, &#39;Sir&#39;) -&amp;gt;order(&#39;first_name&#39;) -&amp;gt;limit(10, 20); çœ‹å‡ºä¾†æ²’ï¼Ÿé™¤äº† from å‡½å¼ä»¥å¤–ï¼Œæ¯ä¸€å€‹å‡½å¼éƒ½ç›´æ¥æ¥çºŒè‘—ä¸Šä¸€å€‹å‡½å¼ã€‚æ€éº¼è¾¦åˆ°çš„å‘¢ï¼Ÿ</description>
			<content type="html"><![CDATA[<p>åœ¨ç ”ç©¶ <a href="http://framework.zend.com/">Zend Framework Preview</a> çš„æ–‡ä»¶æ™‚ï¼Œç™¼ç¾äº†ä¸€å€‹å¾ˆæœ‰è¶£çš„ PHP å¯«æ³•ï¼š</p>
<pre><code>$select-&gt;from('round_table', '*')
       -&gt;where('noble_title = ?', 'Sir')
       -&gt;order('first_name')
       -&gt;limit(10, 20);

</code></pre><p>çœ‹å‡ºä¾†æ²’ï¼Ÿé™¤äº† from å‡½å¼ä»¥å¤–ï¼Œæ¯ä¸€å€‹å‡½å¼éƒ½ç›´æ¥æ¥çºŒè‘—ä¸Šä¸€å€‹å‡½å¼ã€‚æ€éº¼è¾¦åˆ°çš„å‘¢ï¼Ÿ</p>
<!-- raw HTML omitted -->
<p>æˆ‘ä¸€é–‹å§‹ä»¥ç‚ºé€™æ˜¯ PHP çš„ç‰¹ç•°åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘å…ˆè©¦äº†ä»¥ä¸‹ç¨‹å¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">TestA</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">a</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">b</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">c</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TestA</span><span class="p">();</span>
<span class="nv">$a</span><span class="o">-&gt;</span><span class="na">a</span><span class="p">()</span>
  <span class="o">-&gt;</span><span class="na">b</span><span class="p">()</span>
  <span class="o">-&gt;</span><span class="na">c</span><span class="p">();</span>

</code></pre></div><p>çµæœæ˜¯ä¸è¡Œçš„ï¼Œç„¶å¾Œæˆ‘æƒ³äº†ä¸€ä¸‹ï¼Œå¦‚æœæŠŠç‰©ä»¶è‡ªå·±çš„åƒè€ƒ ($this) ä¸Ÿå‡ºä¾†ä¸å°±è¡Œäº†ï¼Ÿ</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">TestA</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">a</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">b</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">c</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TestA</span><span class="p">;</span>
<span class="nv">$a</span><span class="o">-&gt;</span><span class="na">a</span><span class="p">()</span>
  <span class="o">-&gt;</span><span class="na">b</span><span class="p">()</span>
  <span class="o">-&gt;</span><span class="na">c</span><span class="p">();</span>

</code></pre></div><p>æœç„¶æˆåŠŸäº†ï¼Œå†å›é ­å»çœ‹ Zend Framework çš„åšæ³•ï¼Œçš„ç¢ºä¹Ÿæ˜¯é€™æ¨£å¯«ï¼ŒçœŸæ˜¯ä¸€ç¨®æœ‰è¶£çš„å¯«æ³•ã€‚</p>
<p>ä¸éé€™ç¨®æ–¹å¼æˆ‘æƒ³æ‡‰è©²åªé©ç”¨æ–¼åŸæœ¬å°±ä¸å‚³å›å€¼çš„å‡½å¼ï¼Œé‚£ç¨®è¦å‚³å›å…¶ä»–è³‡è¨Šæˆ–ç‰©ä»¶çš„å‡½å¼å°±æ²’æ³•é€™æ¨£ç©äº†ã€‚</p>
<p>è¨»ï¼šé€™å€‹æ–¹æ³•æ‡‰è©²åªæœ‰ PHP 5 æ‰èƒ½ç”¨ï¼ŒPHP 4 å¥½åƒä¸èƒ½ç›´æ¥ç”¨å‡½å¼ä¾†ç•¶åšç‰©ä»¶åƒè€ƒï¼›æœ‰éŒ¯çš„è©±è«‹æŒ‡æ­£æˆ‘ã€‚</p>
<p>è£œå……ï¼š ASP (VBScript) å’Œ JavaScript ä¹Ÿå¯ä»¥é€™æ¨£å¯«å–”ã€‚</p>
<p>ASP (VBScript) ç‰ˆï¼š</p>
<pre><code>&lt;%
Class TestA
    Public Function A()
        Response.Write &quot;A&quot;
        Set A = Me
    End Function
    Public Function B()
        Response.Write &quot;B&quot;
        Set B = Me
    End Function
    Public Function C()
        Response.Write &quot;C&quot;
        Set C = Me
    End Function
End Class
Dim oA : Set oA = New TestA
oA.A().B().C()
%&gt;

</code></pre><p>é€™è£¡æ˜¯ JavaScript çš„å‹•æ…‹ç‰ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">TestA</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Aa&#39;</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Ab&#39;</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Ac&#39;</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TestA</span><span class="p">();</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">a</span><span class="p">().</span><span class="nx">b</span><span class="p">().</span><span class="nx">c</span><span class="p">();</span>

</code></pre></div><p>ç„¶å¾Œé€™æ˜¯ JavaScript çš„éœæ…‹ç‰ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">TestB</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{}</span>
<span class="nx">TestB</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Ba&#39;</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">TestB</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Bb&#39;</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">TestB</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Bc&#39;</span><span class="p">);</span>
    <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">d</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">TestB</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span><span class="p">;</span>
<span class="nx">TestB</span><span class="p">.</span><span class="nx">a</span><span class="p">().</span><span class="nx">b</span><span class="p">().</span><span class="nx">c</span><span class="p">();</span>
<span class="c1">// b = new TestB();
</span><span class="c1">// b.a().b().c(); // é€™æ˜¯ä¸èƒ½åŸ·è¡Œçš„ï¼Œä¸èƒ½é€éç‰©ä»¶å–ç”¨éœæ…‹æ–¹æ³•ã€‚
</span></code></pre></div><p>å…¶å¯¦ JavaScript è£¡ä¹Ÿå·²ç¶“æœ‰é¡ä¼¼çš„ç”¨æ³•ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">s1</span> <span class="o">=</span> <span class="s1">&#39;ABC&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">s2</span> <span class="o">=</span> <span class="s1">&#39;DEF&#39;</span><span class="p">;</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">s1</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">s2</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">());</span>
</code></pre></div><p>è¨»ï¼šåŸä¾†é€™äº›éƒ½å·²ç¶“æ˜¯åˆ¥çš„ç‰©ä»¶å°å‘èªè¨€å¸¸ç”¨çš„å¯«æ³•ï¼Œå¯è¦‹æˆ‘é‚„æœ‰å¾ˆå¤šè¦å­¸çš„å‘¢ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>ASP ç‰©ä»¶è¨­è¨ˆæ‰‹æ³• (6) - å–®å…ƒæ¸¬è©¦</title>
			<link>https://jaceju.net/classic-asp-unit-testing/</link>
			<pubDate>Mon, 20 Feb 2006 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/classic-asp-unit-testing/</guid>
			<description>ASP ä¸Šçš„å–®å…ƒæ¸¬è©¦ æ²’éŒ¯ï¼Œä½ æ²’çœ‹éŒ¯ï¼Œ ASP ä¹Ÿæœ‰å–®å…ƒæ¸¬è©¦ã€‚ ä»€éº¼æ˜¯å–®å…ƒæ¸¬è©¦å‘¢ï¼Ÿæˆ‘æƒ³ä½¿ç”¨ Java æˆ– .NET ä¾†é–‹ç™¼ç¨‹å¼çš„æœ‹å‹å€‘ä¸€å®šå¾ˆç†Ÿæ‚‰ã€‚æˆ‘é€™è£¡åƒ…ç°¡å–®èªªæ˜ä¸€ä¸‹å®ƒçš„åŸç†ï¼Œè‡³</description>
			<content type="html"><![CDATA[<h2 id="asp-ä¸Šçš„å–®å…ƒæ¸¬è©¦">ASP ä¸Šçš„å–®å…ƒæ¸¬è©¦</h2>
<p>æ²’éŒ¯ï¼Œä½ æ²’çœ‹éŒ¯ï¼Œ ASP ä¹Ÿæœ‰å–®å…ƒæ¸¬è©¦ã€‚</p>
<p>ä»€éº¼æ˜¯å–®å…ƒæ¸¬è©¦å‘¢ï¼Ÿæˆ‘æƒ³ä½¿ç”¨ Java æˆ– .NET ä¾†é–‹ç™¼ç¨‹å¼çš„æœ‹å‹å€‘ä¸€å®šå¾ˆç†Ÿæ‚‰ã€‚æˆ‘é€™è£¡åƒ…ç°¡å–®èªªæ˜ä¸€ä¸‹å®ƒçš„åŸç†ï¼Œè‡³æ–¼æ·±å…¥çš„ä»‹ç´¹ï¼Œè«‹å¤§å®¶è‡ªè¡Œå»æ‰¾ XP (eXtreme Programming ï¼Œä¸­æ–‡å¸¸è­¯ç‚ºã€Œæ¥µè‡´ç·¨ç¨‹ã€) ç›¸é—œæ›¸ç±å§ã€‚</p>
<p>è¨»ï¼šå»ºè­°ä½ å»çœ‹çœ‹<a href="http://www.dotspace.idv.tw/">é»ç©ºé–“</a>è£¡æœ‰ç¯‡æ–‡ç« å«ã€Œ<a href="http://140.109.17.94/xp/2002/JUnit_test.htm">æ¸¬è©¦çš„æ¦‚å¿µ</a>ã€ï¼Œå¯«å¾—æ»¿ç°¡å–®æ˜“æ‡‚çš„ã€‚</p>
<p>åœ¨ ASP ä¸Šé¢è¦é€²è¡Œå–®å…ƒæ¸¬è©¦ï¼Œé¦–å…ˆå°±è¦æœ‰å–®å…ƒæ¸¬è©¦æ¡†æ¶ (Unit Testing Framework) ã€‚åœ¨ç¶²è·¯ä¸Šæˆ‘æ‰¾åˆ°äº†ä»¥ä¸‹å…©ç¨®æ¡†æ¶ï¼š</p>
<ul>
<li><a href="http://aspunit.sourceforge.net/">ASPUnit</a></li>
<li><a href="http://sourceforge.jp/projects/aspunit/">ASPunit</a> (é€™æ˜¯æ—¥æœ¬äººé–‹ç™¼çš„ã€‚)</li>
</ul>
<p>å®ƒå€‘çš„åå­—å·®åœ¨ U çš„å¤§å°å¯«ã€‚</p>
<p>æ—¥æœ¬äººé–‹ç™¼çš„ <!-- raw HTML omitted -->ASPunit<!-- raw HTML omitted --> æ¶æ§‹æ¯”è¼ƒè¤‡é›œï¼Œè€Œ <!-- raw HTML omitted -->ASPUnit<!-- raw HTML omitted --> çš„æ¯”è¼ƒç°¡å–®æ˜“æ‡‚ï¼Œè€Œä¸”ä¹Ÿå®¹æ˜“ä½¿ç”¨ï¼Œæ‰€ä»¥æœ¬ç¯‡å°‡åœç¹åœ¨ <!-- raw HTML omitted -->ASPUnit<!-- raw HTML omitted --> é€™å€‹æ¸¬è©¦æ¡†æ¶ä¸Šã€‚</p>
<!-- raw HTML omitted -->
<h2 id="ä¸‹è¼‰èˆ‡å®‰è£">ä¸‹è¼‰èˆ‡å®‰è£</h2>
<p>ä½ å¯ä»¥åˆ° <a href="http://aspunit.sourceforge.net/">ASPUnit çš„å®˜æ–¹ç¶²ç«™</a>å»ä¸‹è¼‰ ASPUnit ï¼Œç›®å‰æ˜¯ 0.9.2 ç‰ˆã€‚ä½ ä¹Ÿå¯ä»¥ç”¨æˆ‘æ”¹éçš„<a href="/resources/aspunit/ASPUnit_zhtw.zip">é€™å€‹ä¸­æ–‡ç‰ˆæœ¬</a>ï¼Œå®ƒå·²é€šéäº† XHTML é©—è­‰ã€‚</p>
<p>è¨»ï¼šæˆ‘åªæ˜¯å°‡è£¡é¢çš„æ–‡å­—ç¿»è­¯æˆä¸­æ–‡ï¼Œä¸¦ä¸æœƒå½±éŸ¿åŠŸèƒ½çš„åŸ·è¡Œã€‚</p>
<p>ASPUnit å°±æ˜¯ç”¨ ASP é–‹ç™¼çš„ï¼Œæ‰€ä»¥ä¸€å®šè¦æœ‰å¯ä»¥åŸ·è¡Œ ASP çš„ç’°å¢ƒï¼Œæˆ‘çš„ç’°å¢ƒæ˜¯ IIS 6.0 ã€‚æˆ‘ä¸ç¢ºå®šé€™å€‹èƒ½ä¸èƒ½åœ¨ Apache ä¸Šçš„ ASP æ¨¡çµ„æ­£å¸¸åŸ·è¡Œï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹å¦‚æœè©¦æˆåŠŸçš„è©±éº»ç…©å‘ŠçŸ¥æˆ‘ä¸€ä¸‹ã€‚</p>
<p>å¦å¤–å¦‚æœä½ ä¸‹è¼‰äº†å®˜æ–¹ç‰ˆæœ¬ï¼Œè§£é–‹å¾Œè«‹æ”¾åœ¨ç¶²ç«™æ ¹ç›®éŒ„ä¸‹çš„ aspunit è³‡æ–™å¤¾ä¸‹ï¼Œå¦å‰‡ä½ å¾—å…ˆä¿®æ”¹ç¨‹å¼è£¡çš„ CSS è·¯å¾‘ã€‚</p>
<p>æª”æ¡ˆï¼š include\ASPUnitRunner.asp</p>
<pre><code>... ç•¥ ...
Const STYLESHEET = &quot;/aspunit/include/ASPUnit.css&quot; ' æ”¹é€™è£¡
... ç•¥ ...

</code></pre><p>è‡³æ–¼æˆ‘ä¿®æ”¹çš„ç‰ˆæœ¬å°±æ²’å¤šå¤§é—œä¿‚äº†ï¼Œè£¡é¢çš„è·¯å¾‘æ˜¯ç”¨ç›¸å°çš„ã€‚</p>
<p>è¨»ï¼šä¸éæˆ‘å»ºè­°å¤§å®¶ç”¨çµ•å°è·¯å¾‘çš„æ–¹å¼ä¾†å®‰è£ï¼Œå› ç‚ºä½ å¯èƒ½åŒæ™‚æœƒæœ‰å¤šå€‹å°ˆæ¡ˆéœ€è¦ç”¨åˆ°å®ƒã€‚ä¾‹å¦‚è£åœ¨ /ASPUnit åº•ä¸‹æœƒæ˜¯å€‹ä¸éŒ¯çš„é¸æ“‡ï¼Œé€™æ¨£å°±èƒ½å¤ ä½¿ç”¨ <!-- raw HTML omitted --> çš„æ–¹å¼ä¾†å¼•å…¥æ¸¬è©¦æ¡†æ¶æª”æ¡ˆã€‚</p>
<h2 id="ç‚ºä»€éº¼è¦æ¸¬è©¦">ç‚ºä»€éº¼è¦æ¸¬è©¦</h2>
<p>æƒ³åƒä¸€ä¸‹ï¼Œç•¶ä½ å¯«å¥½ä¸€å€‹ ASP é¡åˆ¥æ™‚ï¼Œä½ å¦‚ä½•çŸ¥é“å®ƒåŸ·è¡Œçµæœæ˜¯ä¸æ˜¯æ­£ç¢ºçš„å‘¢ï¼Ÿèˆ‰å€‹ç°¡å–®çš„ä¾‹å­ï¼Œå‡è¨­æˆ‘å€‘æœ‰å€‹å•†å“é¡åˆ¥å¥½äº†ï¼Œå®ƒçš„ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p>
<p>æª”æ¡ˆï¼š Product.asp</p>
<pre><code>&lt;%
Class Product
    Private Name
    Private Price
    Private Discount
    Public Sub Init(sName, iPrice, uDiscount)
        Name = sName
        Price = iPrice '* uDiscount
    End Sub
    Public Function GetName()
        GetName = Name
    End Function
    Public Function GetPrice()
        GetPrice = Price
    End Function
End Class
%&gt;

</code></pre><p>æƒ³çŸ¥é“å®ƒæ˜¯ä¸æ˜¯èƒ½å‹•ä½œï¼Œä¸€èˆ¬æˆ‘å€‘æœƒé€™éº¼å¯«ï¼š</p>
<p>æª”æ¡ˆï¼š TestProduct1.asp</p>
<pre><code>&lt;!-- #include file=&quot;Product.asp&quot; --&gt;
&lt;%
Dim oProduct1 : Set oProduct1 = New Product : oProduct1.Init &quot;å•†å“1&quot;, 100, 1    ' ä¸æ‰“æŠ˜
Dim oProduct2 : Set oProduct2 = New Product : oProduct2.Init &quot;å•†å“2&quot;, 120, 0.9  ' æ‰“ 9 æŠ˜
Response.Write oProduct1.GetName &amp;amp; &quot; çš„åƒ¹æ ¼æ˜¯ &quot;
Response.Write oProduct1.GetPrice &amp;amp; &quot;&lt;br /&gt;&quot;
Response.Write oProduct2.GetName &amp;amp; &quot; çš„åƒ¹æ ¼æ˜¯ &quot;
Response.Write oProduct2.GetPrice &amp;amp; &quot;&lt;br /&gt;&quot;
%&gt;

</code></pre><p>è¼¸å‡ºï¼š</p>
<pre><code>å•†å“1 çš„åƒ¹æ ¼æ˜¯ 100
å•†å“2 çš„åƒ¹æ ¼æ˜¯ 120

</code></pre><p>ä½†æ˜¯é€™ç¨®é©—è­‰æ–¹å¼æ¯æ¬¡éƒ½å¾—ä¾è³´æˆ‘å€‘äººè…¦å»åˆ¤æ–·è¼¸å‡ºçš„çµæœæ˜¯å¦åœ¨æˆ‘å€‘çš„é æœŸä¹‹å…§ï¼Œè€Œæ‰€è¬‚çš„é æœŸçµæœå‰‡å­˜æ”¾åœ¨æˆ‘å€‘çš„è…¦æµ·è£¡ï¼Œæ™‚é–“ä¸€ä¹…ï¼Œä¹Ÿè¨±å°±æœƒå¿˜äº†å®ƒæ˜¯ä¸æ˜¯å°çš„ã€‚æˆ‘å€‘å¸Œæœ›æ¸¬è©¦ç¨‹å¼èƒ½å¤ è‡ªå‹•æª¢æŸ¥åŸ·è¡Œçµæœæ˜¯ä¸æ˜¯æ­£ç¢ºçš„ï¼Œè€Œä¸”èƒ½å¤ å°‡æ¸¬è©¦çµæœç”¨æ¯”è¼ƒäººæ€§åŒ–çš„æ–¹å¼è¼¸å‡ºã€‚é€™æ¨£ä¸€ä¾†å°±ä¸å¿…é¢å°ä¸€å †å¥‡æ€ªçš„è¼¸å‡ºè¨Šæ¯è€Œæ‰‹è¶³ç„¡æªã€‚</p>
<p>é€™äº›å·¥ä½œ ASPUnit é€™å€‹æ¸¬è©¦æ¡†æ¶éƒ½å¹«æˆ‘å€‘ä½œå¥½äº†ï¼Œé›–ç„¶ä¸€æ¨£è¦å¯«ä¸Šé¢çš„æ¸¬è©¦ç¨‹å¼ï¼Œä½†æ˜¯åœ¨ ASPUnit ä¸­ï¼Œæˆ‘å€‘ä¸å¿…è‡ªè¡Œè¼¸å‡ºé€™äº›çµæœä¾†åˆ¤æ–·ã€‚æˆ‘å€‘å¯ä»¥é å…ˆæŠŠæˆ‘å€‘é æœŸæœƒå¾—åˆ°çš„çµæœå‘Šè¨´ ASPUnit ï¼Œè®“å®ƒä¾†æ±ºå®šæ¸¬è©¦çš„çµæœæ˜¯ä¸æ˜¯æ­£ç¢ºçš„ï¼›å¦‚æœä¸€å€‹æ¸¬è©¦æ­£ç¢ºäº†ï¼Œç•«é¢å°±æœƒçµ¦æˆ‘å€‘ä¸€å€‹ç¶ è‰²å…‰æ£’ (å¾Œé¢æœƒè©³è¿°) ï¼Œä¸€æ—¦å…¨éƒ½æ˜¯ç¶ è‰²å…‰æ£’æ™‚ï¼Œæˆ‘å€‘å°±èƒ½ç¢ºå®šæ‰€æœ‰çš„æ¸¬è©¦éƒ½æˆåŠŸäº†ï¼</p>
<p>è¨»ï¼šç¶ è‰²å…‰æ£’åœ¨ Java çš„ JUnit æ¸¬è©¦æ¡†æ¶æ˜¯æ¸¬è©¦æˆåŠŸçš„æ„æ€ï¼Œæ˜¯å¾ˆæœ‰è¶£ä¹Ÿå¾ˆæœ‰æ„ç¾©çš„ä¸€ç¨®è¡¨ç¤ºæ–¹æ³•ã€‚</p>
<p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å°‡ä»‹ç´¹å¦‚ä½•æ’°å¯«ä¸€å€‹èƒ½è®“ ASPUnit è§£è®€çš„æ¸¬è©¦ç¨‹å¼ã€‚</p>
<h2 id="ä½¿ç”¨-aspunit-æ¸¬è©¦æ¡†æ¶">ä½¿ç”¨ ASPUnit æ¸¬è©¦æ¡†æ¶</h2>
<h3 id="åŸºæœ¬çµæ§‹">åŸºæœ¬çµæ§‹</h3>
<p>å…ˆä¾†ä»‹ç´¹ä¸€ä¸‹ ASPUnit çš„åŸºæœ¬çµæ§‹ï¼Œé€™æ¨£åœ¨æ’°å¯«æ¸¬è©¦æ™‚æ¯”è¼ƒèƒ½å¤ æ¸…æ¥šè‡ªå·±åœ¨åšä»€éº¼ã€‚</p>
<p>ä½ ä¹Ÿè¨±å·²ç¶“çœ‹é Java çš„ JUnit æ¸¬è©¦æ¡†æ¶çš„ UML åœ–äº†ï¼Œå…¶å¯¦ ASPUnit ä¹Ÿæ˜¯åŸºæ–¼ JUnit çš„ä¸€å¥—æ¸¬è©¦æ¡†æ¶ï¼Œå› æ­¤åœ¨æ¦‚å¿µèˆ‡å¯¦ä½œä¸Šéƒ½éå¸¸é¡ä¼¼ã€‚ä¸‹é¢çš„ UML åœ–ä¸­ï¼Œæˆ‘æŠŠ ASPUnit æ¯”è¼ƒé‡è¦çš„å¹¾å€‹é¡åˆ¥ç•«äº†å‡ºä¾†ã€‚</p>
<p><img src="/resources/aspunit/images/001.gif" alt=""></p>
<p>å…¶ä¸­ Test ä»‹é¢æ˜¯è™›æ“¬çš„ (å¯¦éš›ä¸Šä¸¦ä¸å­˜åœ¨) ï¼Œå› ç‚º ASP (VBScript) ä¸¦æ²’æœ‰ä»‹é¢ (interface) é€™ç¨®æ±è¥¿ï¼Œæ‰€ä»¥å°±å¿˜äº†é€™ä»¶äº‹å§ï¼Œæˆ‘å€‘æœå‘ Duck Typing å‰é€²ã€‚ (Duck Typing çš„æ„æ€æ˜¯èªªã€Œå¦‚æœå®ƒèµ°èµ·è·¯ä¾†åƒé´¨å­ï¼Œå«èµ·ä¾†ä¹Ÿåƒé´¨å­ï¼Œé‚£éº¼å®ƒä¸€å®šæ˜¯é´¨å­ï¼ã€)</p>
<p>é‚£éº¼ç‚ºä»€éº¼è¦æœ‰ä¸€å€‹ Test ä»‹é¢ï¼Ÿå› ç‚º Test ä»‹é¢åŒ…å«äº†ä¸€å€‹ Run å‡½å¼ï¼Œä»¥ä¾¿ ASPUnitRunner èƒ½å¤ æ­£ç¢ºå‘¼å«ã€‚å› æ­¤åœ¨æ„ç¾©çš„è¡¨é”ä¸Šï¼Œ Test ä»‹é¢æ˜¯ä¸å¯æˆ–ç¼ºçš„ (åªæ˜¯é€™è£¡æ˜¯ç”¨ Duck Typing ) ã€‚</p>
<p>è€Œå¯¦ä½œäº† Test ä»‹é¢çš„é¡åˆ¥ï¼Œæˆ‘å€‘ç¨±ç‚ºæ¸¬è©¦å®¹å™¨ã€‚æ¸¬è©¦å®¹å™¨æ˜¯ä»€éº¼å‘¢ï¼Ÿé€™è£¡æŒ‡çš„å°±æ˜¯ TestCase å’Œ TestSuite é€™å…©å€‹é¡åˆ¥ã€‚ TestCase æœƒåŒ…å«æ•¸å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼Œç®—æ˜¯æ¯”è¼ƒå°çš„å®¹å™¨ï¼› TestSuite å‰‡æ˜¯æ›´å¤§çš„æ¸¬è©¦å®¹å™¨ï¼Œä»»ä½•å¯¦ä½œäº† Run å‡½å¼çš„æ¸¬è©¦å®¹å™¨éƒ½å¯ä»¥æ”¾åˆ° TestSuite è£¡é¢ï¼ŒåŒ…å«å®ƒè‡ªå·±ã€‚</p>
<p>è¨»ï¼šä¸Šé¢èªªçš„å°±æ˜¯ Composite é€™å€‹è‘—åçš„è¨­è¨ˆæ¨¡å¼ (Design Patterns) ï¼ç°¡å–®ä¾†èªªå°±æ˜¯å¤§çš„åŒ…å°çš„ï¼Œä¸ç„¶å°±è‡ªå·±åŒ…è‡ªå·±ï¼Œç„¶å¾Œå¤§å®¶éƒ½ä¸€è¦–åŒä» (éƒ½æ˜¯ Test ä»‹é¢) ã€‚åœ¨é€™ç¯‡ <a href="http://junit.sourceforge.net/doc/cookstour/cookstour.htm">JUnit A Cook&rsquo;s Tour</a> æ–‡ç« ä¸­ï¼Œæåˆ°äº† JUnit ç”¨äº†é‚£äº›è¨­è¨ˆæ¨¡å¼ï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥åƒè€ƒçœ‹çœ‹ã€‚</p>
<h3 id="å»ºç«‹æ¸¬è©¦">å»ºç«‹æ¸¬è©¦</h3>
<p>åœ¨ ASPUnit ä¸­ï¼Œæœ€ç°¡å–®çš„æ¸¬è©¦å®¹å™¨ (Test Container) é¡åˆ¥å¦‚ä¸‹ï¼Œå®ƒæœƒç¹¼æ‰¿ TestCase ï¼š (ç•¶ç„¶åˆæ˜¯ Duck Typing ã€‚)</p>
<p>æª”æ¡ˆï¼š Sample/ProductTest.asp</p>
<pre><code>&lt;%
Class ProductTest ' Extends TestCase
    Public Function TestCaseNames()
        TestCaseNames = Array()
    End Function
    Public Sub SetUp()
    End Sub
    Public Sub TearDown()
    End Sub
End Class
%&gt;

</code></pre><p>TestCaseNames é€™å€‹å‡½å¼æœƒå›å‚³ä¸€å€‹åŒ…å«æ¸¬è©¦æ¡ˆä¾‹åç¨±çš„é™£åˆ—ï¼Œå¦‚æœä½ çš„æ¸¬è©¦æ¡ˆä¾‹æ²’æ”¾åœ¨é€™è£¡é¢ï¼Œé‚£éº¼ ASPUnitRunner å°±ä¸æœƒåŸ·è¡Œä»»ä½•æ¸¬è©¦ã€‚æ‰€ä»¥é€™å€‹é¡åˆ¥é›–ç„¶èƒ½åŸ·è¡Œï¼Œä½†ä¹Ÿçœ‹ä¸å‡ºä»€éº¼çµæœã€‚è‡³æ–¼ SetUp åŠ TearDown å‰‡ä¸€å®šè¦æœ‰ï¼Œå¾Œé¢æˆ‘å€‘æœƒèªªæ˜å®ƒå€‘çš„ç”¨é€”ã€‚</p>
<p>ç¾åœ¨æˆ‘å€‘æŠŠè¦æ¸¬è©¦çš„é¡åˆ¥å¼•å…¥ï¼Œè«‹åœ¨ ProductTest.asp çš„ç¬¬ä¸€è¡ŒåŠ ä¸Šï¼š</p>
<pre><code>&lt;!-- #include file=&quot;Product.asp&quot;--&gt;

</code></pre><p>ç„¶å¾Œç‚º ProductTest é¡åˆ¥å»ºç«‹ä¸€å€‹æ–°çš„å…¬é–‹å‡½å¼ï¼š</p>
<pre><code>Public Sub TestProduct(oTestResult)
    Dim oProduct : Set oProduct = New Product
    oTestResult.AssertExists oProduct, &quot;ç‰©ä»¶ä¸å­˜åœ¨ï¼&quot;
    Set oProduct = Nothing
End Sub

</code></pre><p>é€™å€‹å…¬é–‹å‡½å¼å°±æ˜¯ä¸€å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼Œå®ƒå¿…é ˆå¸¶å…¥ä¸€å€‹ TestResult ç‰©ä»¶ï¼Œé€™å€‹ TestResult ç‰©ä»¶æœƒæä¾›ä¸‹åˆ—æ–¹æ³•å¹«æˆ‘å€‘åˆ†æè¨˜éŒ„æ¸¬è©¦çš„çµæœï¼š</p>
<!-- raw HTML omitted -->
<p>Assert å°±æ˜¯æ–·è¨€çš„æ„æ€ï¼Œå®ƒè¡¨ç¤ºæˆ‘å€‘èªç‚ºç¨‹å¼åˆ°é€™è£¡çš„åŸ·è¡Œçµæœæ‡‰è©²ç‚ºä½•ã€‚è€Œ sMessage å‰‡æ˜¯ç•¶çµæœä¸å¦‚æˆ‘å€‘é æœŸæ™‚ï¼Œæˆ‘å€‘æƒ³è¦é¡¯ç¤ºçš„è¨Šæ¯ã€‚å¦‚æœæ¸¬è©¦æˆåŠŸçš„è©±ï¼Œå°±åªæœƒé¡¯ç¤ºæ¸¬è©¦æˆåŠŸã€‚è€Œä¸Šé¢çš„æ¸¬è©¦æ¡ˆä¾‹æ˜¯èªªï¼Œæˆ‘å€‘å…ˆå»ºç«‹ä¸€å€‹ Product ç‰©ä»¶ï¼Œä¸¦æ–·è¨€æ­¤ç‰©ä»¶æ˜¯å­˜åœ¨çš„ã€‚</p>
<p>å¯«å¥½æ¸¬è©¦æ¡ˆä¾‹ (å‡½å¼) å¾Œï¼Œè¨˜å¾—å°‡å®ƒçš„å‡½å¼åç¨±æ”¾åˆ° TestCaseNames çš„é™£åˆ—è£¡ï¼š</p>
<pre><code>TestCaseNames = Array(&quot;TestProduct&quot;)

</code></pre><p>é€™æ¨£ ASPUnitRunner æ‰èƒ½å¤ çŸ¥é“è¦æ¸¬è©¦ä»€éº¼ã€‚</p>
<p>æœ€å¾Œçš„æ•´å€‹æ¸¬è©¦å®¹å™¨ç¨‹å¼å¦‚ä¸‹ï¼š</p>
<p>æª”æ¡ˆï¼š Sample/ProductTest.asp</p>
<pre><code>&lt;!-- #include file=&quot;Product.asp&quot; --&gt;
&lt;%
Class ProductTest ' Extends TestCase
    Public Function TestCaseNames()
        TestCaseNames = Array(&quot;TestProduct&quot;)
    End Function
    Public Sub SetUp()
    End Sub
    Public Sub TearDown()
    End Sub
    Public Sub TestProduct(oTestResult)
        Dim oProduct : Set oProduct = New Product
        oTestResult.AssertExists oProduct, &quot;ç‰©ä»¶ä¸å­˜åœ¨ï¼&quot;
        Set oProduct = Nothing
    End Sub
End Class
%&gt;

</code></pre><h3 id="åŸ·è¡Œæ¸¬è©¦">åŸ·è¡Œæ¸¬è©¦</h3>
<p>å¥½äº†ï¼Œç•¶æœ‰äº†æ¸¬è©¦ç¨‹å¼ï¼Œæ€éº¼è®“å®ƒè·‘èµ·ä¾†å‘¢ï¼ŸåŸºæœ¬ä¸Šæˆ‘å€‘å°±æ˜¯è¦ç”¨ UnitRunner å»åŸ·è¡Œæ‰€æœ‰çš„æ¸¬è©¦ï¼Œè«‹çœ‹ä»¥ä¸‹ç¨‹å¼ï¼š</p>
<p>æª”æ¡ˆï¼š Sample/Go.asp</p>
<pre><code>&lt;%
Option Explicit
%&gt;
&lt;!-- #include file=&quot;../include/ASPUnitRunner.asp&quot;--&gt;
&lt;!-- #include file=&quot;ProductTest.asp&quot;--&gt;
&lt;%
Dim oRunner
Set oRunner = New UnitRunner
oRunner.AddTestContainer New ProductTest
oRunner.Display()
%&gt;

</code></pre><p>é¦–å…ˆï¼Œæˆ‘å€‘å¾—å…ˆå¼•å…¥ UnitRunner é¡åˆ¥ï¼Œç„¶å¾Œå¼•å…¥è¦æ¸¬è©¦çš„å®¹å™¨é¡åˆ¥æª”ã€‚</p>
<p>æ¥è‘—å»ºç«‹ä¸€å€‹ UnitRunner ç‰©ä»¶åŠå®¹å™¨ç‰©ä»¶ (ä¹Ÿå°±æ˜¯ ProductTest) ï¼Œç„¶å¾ŒæŠŠå®¹å™¨ç‰©ä»¶æ”¾åˆ° UnitRunner è£¡é¢ã€‚</p>
<p>æœ€å¾ŒæŠŠå‘¼å« UnitRunner çš„ Display å‡½å¼ï¼Œä»¥é¡¯ç¤ºåŸ·è¡Œä»‹é¢ã€‚</p>
<p>åŸ·è¡Œæ­¤ç¨‹å¼ï¼Œæˆ‘å€‘æœƒå¾—åˆ°ä¸‹åœ–ï¼š</p>
<p><img src="/resources/aspunit/images/002.gif" alt=""></p>
<p>æ•´å€‹ ASPUnitRunner çš„åŸ·è¡Œä»‹é¢åˆ†æˆäº†å…©å€‹éƒ¨ä»½ï¼šä¸Šæ–¹çš„æ§åˆ¶å°å’Œä¸‹æ–¹çš„åŸ·è¡Œçµæœã€‚æˆ‘å€‘å¯ä»¥é¸æ“‡è¦æ¸¬è©¦çš„å®¹å™¨é¡åˆ¥åŠè©²å®¹å™¨è£¡æ‰€åŒ…å«çš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥é¸æ“‡æ˜¯å¦é¡¯ç¤ºå·²ç¶“æˆåŠŸé€šéæ¸¬è©¦çš„æ¡ˆä¾‹ã€‚</p>
<p>ä½†æ˜¯å…ˆåˆ¥ç®¡å…¶ä»–è¨­å®šï¼Œç›´æ¥æŒ‰ä¸‹ã€ŒåŸ·è¡Œæ¸¬è©¦ã€ï¼Œå°±æœƒçœ‹åˆ°ï¼š</p>
<p><img src="/resources/aspunit/images/003.gif" alt=""></p>
<p>è¡¨ç¤ºæˆ‘å€‘çš„æ¸¬è©¦æˆåŠŸäº†ï¼</p>
<h2 id="é€²è¡Œå¤šå€‹æ¸¬è©¦æ¡ˆä¾‹">é€²è¡Œå¤šå€‹æ¸¬è©¦æ¡ˆä¾‹</h2>
<p>å‰é¢æéä¸€å€‹æ¸¬è©¦å®¹å™¨è£¡é¢å¯ä»¥åŒ…å«æ•¸å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼Œè€Œä¸Šé¢çš„ TestProduct å‡½å¼å°±æ˜¯ä¸€å€‹æ¸¬è©¦æ¡ˆä¾‹ã€‚ç•¶æˆ‘å€‘åœ¨æ’°å¯«æ¸¬è©¦æ™‚ï¼ŒæœƒæŠŠè¢«æ¸¬è©¦é¡åˆ¥è£¡çš„æ¯ä¸€å€‹æ–¹æ³•è¦–ç‚ºä¸€å€‹å–®å…ƒ (æ³¨æ„ï¼šé€™æ˜¯ç‹¹ç¾©çš„è§£é‡‹) ï¼Œæ¯å€‹æ¸¬è©¦æ¡ˆä¾‹éƒ½æ˜¯åªé‡å°ä¸€å€‹æ–¹æ³•ä¾†æ’°å¯«ã€‚æ¸¬è©¦æ¡ˆä¾‹çš„åç¨±åœ¨ ASPUnit ä¸­æ˜¯ä¸é‡è¦çš„ï¼Œåªè¦èƒ½å¤ è¡¨é”å‡ºæƒ³æ¸¬è©¦ä»€éº¼å³å¯ã€‚ä½†æ˜¯ä¸€èˆ¬é‚„æ˜¯æœƒæŒ‰ç…§æ…£ä¾‹ï¼Œä½¿ç”¨ TestXXX çš„æ–¹å¼ä¾†å‘½åã€‚</p>
<p>è¨»ï¼šåœ¨æ—¥æœ¬äººé–‹ç™¼çš„ ASPunit ä¸­ï¼Œæ‡‰è©²æœƒè‡ªå‹•å–å¾— TestXXX ä¾†åŸ·è¡Œï¼Œè€Œä¸ç”¨æˆ‘å€‘è‡ªè¡ŒåŠ åœ¨ TestCaseNames ä¸­ã€‚åƒ JUnit ä¹Ÿæ˜¯ï¼Œåªè¦å‘½åæˆ testXXX() ï¼Œé‚£éº¼æ¸¬è©¦æ¡†æ¶å°±æœƒè‡ªå‹•å–å¾—é€™äº›æ¸¬è©¦æ¡ˆä¾‹ã€‚</p>
<p>æˆ‘å€‘å°‡ ProductTest åŠ å…¥ä»¥ä¸‹çš„æ¸¬è©¦æ¡ˆä¾‹ï¼š</p>
<pre><code>Public Sub TestGetName(oTestResult)
    Dim oProduct : Set oProduct = New Product
    oProduct.Init &quot;å•†å“1&quot;, 100, 1
    oTestResult.AssertEquals &quot;å•†å“1&quot;, oProduct.GetName, &quot;åç¨±ä¸åŒï¼&quot;
    Set oProduct = Nothing
End Sub
Public Sub TestGetPrice(oTestResult)
    Dim oProduct : Set oProduct = New Product
    oProduct.Init &quot;å•†å“1&quot;, 100, 1
    oTestResult.AssertEquals 100, oProduct.GetPrice, &quot;åƒ¹æ ¼ä¸åŒï¼&quot;
    Set oProduct = Nothing
End Sub

</code></pre><p><!-- raw HTML omitted -->æ³¨æ„ï¼åœ¨ AssertEquals å‡½å¼è£¡ï¼Œé æœŸçµæœè¦åœ¨å‰é¢ï¼å¯¦éš›çµæœåœ¨å¾Œé¢ï¼æˆ‘å¸¸æœƒä¸å°å¿ƒçŠ¯ä¸‹é€™ç¨®éŒ¯èª¤ã€‚<!-- raw HTML omitted --></p>
<p>ç•¶ç„¶ï¼Œåˆ¥å¿˜äº†æŠŠé€™å…©å€‹æ¸¬è©¦æ¡ˆä¾‹çš„åç¨±æ”¾åˆ° TestCaseNames ä¸­ï¼š</p>
<pre><code>TestCaseNames = Array(&quot;TestProduct&quot;, &quot;TestGetName&quot;, &quot;TestGetPrice&quot;)

</code></pre><p>æ¥è‘—å†åŸ·è¡Œ Go.asp ï¼š</p>
<p><img src="/resources/aspunit/images/004.gif" alt=""></p>
<p>æˆ‘å€‘å¯ä»¥çœ‹åˆ°ï¼Œä¸‰å€‹æ¸¬è©¦éƒ½éäº†ã€‚</p>
<h2 id="å¤±æ•—çš„æ¸¬è©¦">å¤±æ•—çš„æ¸¬è©¦</h2>
<p>ä½†æ˜¯æ¸¬è©¦éäº†ï¼Œä¸è¡¨ç¤ºä¸€åˆ‡éƒ½å®Œç¾äº†ï¼Œæœ‰å¯èƒ½æˆ‘å€‘æ ¹æœ¬æ²’æœ‰æ¸¬è©¦åˆ°é‡é»ã€‚ç¾åœ¨æˆ‘å€‘å†åŠ å…¥ä¸€å€‹æ¸¬è©¦ï¼Œå®ƒæœƒå°‡å»ºç«‹ä¸€å€‹æ‰“ä¹æŠ˜çš„å•†å“ï¼Œè€ŒåŸåƒ¹æ˜¯ 100 å…ƒï¼Œè€Œæ‰“æŠ˜å¾Œæ‡‰è©²æ˜¯ 90 å…ƒã€‚æˆ‘å€‘èªªéï¼Œè¦è®“æ¸¬è©¦è‡ªå‹•åŒ–ï¼Œæ‰€ä»¥é æœŸçµæœ 90 å…ƒå°±æ‡‰è©²å¯«åœ¨æ¸¬è©¦ä¸­ã€‚</p>
<pre><code>Public Sub TestGetDiscountedPrice(oTestResult)
    Dim oProduct : Set oProduct = New Product
    oProduct.Init &quot;å•†å“2&quot;, 100, 0.9
    oTestResult.AssertEquals 90, oProduct.GetPrice, &quot;åƒ¹æ ¼ä¸åŒï¼&quot;
    Set oProduct = Nothing
End Sub

</code></pre><p>åˆ¥å¿˜äº†åŠ å…¥ TestCaseName é™£åˆ—ï¼Œå†åŸ·è¡Œä¸€æ¬¡ï¼š</p>
<p><img src="/resources/aspunit/images/005.gif" alt=""></p>
<p>å•¥ç±³ï¼ç«Ÿç„¶å¤±æ•—äº†ï¼å’Œæˆ‘å€‘é æœŸçš„çµæœä¸åŒï¼Œåƒ¹æ ¼ä»ç„¶æ˜¯ 100 å…ƒï¼ç‚ºä»€éº¼å‘¢ï¼Ÿ</p>
<p>å›åˆ°æˆ‘å€‘çš„ Product é¡åˆ¥ï¼Œå› ç‚º GetPrice å‰›å‰›å·²ç¶“é€šéæ¸¬è©¦ï¼Œæ‰€ä»¥æƒ³å¿…å•é¡Œæ‡‰è©²æœƒæ˜¯åœ¨ Init é€™å€‹åˆå§‹åŒ–å‡½å¼ä¸Šï¼š</p>
<pre><code>Public Sub Init(sName, iPrice, uDiscount)
    Name = sName
    Price = iPrice '* uDiscount
End Sub

</code></pre><p>çœ‹åˆ°æ²’ï¼Ÿåœ¨ä¹˜æ³•ç¬¦è™Ÿå‰ç«Ÿç„¶å¤šäº†å€‹å–®å¼•è™Ÿï¼Œä½¿å¾—å¾Œé¢çš„é‹ç®—è®Šæˆäº†è¨»è§£ (é›–ç„¶é€™æ˜¯æˆ‘æ•…æ„çš„) ã€‚æŠŠé€™å€‹å–®å¼•è™Ÿå»æ‰ä¹‹å¾Œå†åŸ·è¡Œä¸€æ¬¡æ¸¬è©¦ï¼š</p>
<p><img src="/resources/aspunit/images/006.gif" alt=""></p>
<p>ä¸å°±æˆåŠŸäº†å—ï¼Ÿ</p>
<p>è¨»ï¼šé»ƒè‰²çš„æ˜¯å¤±æ•—ï¼Œç´…è‰²å‰‡æ˜¯éŒ¯èª¤ï¼Œè€ŒéŒ¯èª¤é€šå¸¸æ˜¯æŒ‡åŸ·è¡Œæ™‚æœŸçš„ Error ï¼Œé€™è£¡æˆ‘å°±ä¸è©³è¿°äº†ã€‚</p>
<h2 id="æ¸¬è©¦è¨­å‚™">æ¸¬è©¦è¨­å‚™</h2>
<p>æ¯å€‹æ¸¬è©¦æ¡ˆä¾‹çš„åŸ·è¡Œæµç¨‹ (ä¹Ÿå°±æ˜¯ Run å‡½å¼åŸ·è¡Œçš„æ™‚å€™) ï¼Œå…¶æ¦‚å¿µæ˜¯æ¡ç”¨ Template Method é€™å€‹è¨­è¨ˆæ¨¡å¼ï¼Œæ›å¥è©±èªªï¼Œå®ƒæœƒä¾æ¬¡å‘¼å«ä»¥ä¸‹çš„æ¸¬è©¦å®¹å™¨å‡½å¼æˆå“¡ï¼š</p>
<ul>
<li>SetUp() ' åœ¨æ¯å€‹æ¸¬è©¦æ¡ˆä¾‹å‰åšè¨­å®šå‹•ä½œ</li>
<li>TestXXX() ' æ¸¬è©¦æ¡ˆä¾‹</li>
<li>TearDown() ' åœ¨æ¯å€‹æ¸¬è©¦æ¡ˆä¾‹å¾Œåšæ¸…é™¤å‹•ä½œ</li>
</ul>
<p>è¨»ï¼šæˆ–è¨±ä½ æœƒè¦ºå¾—å¾ˆæ‡·ç–‘ï¼Œ Template Method æ¨¡å¼ä¸æ˜¯è¦ç”¨åˆ°ç¹¼æ‰¿å—ï¼Ÿå˜¿ï¼Œé€™å°±æ˜¯ ASPUnit ä½œè€…å€‘åŠŸåŠ›é«˜æ·±ä¹‹è™•äº†ã€‚æœ‰èˆˆè¶£çš„è©±å»è¿½ä¸€ä¸‹ç¨‹å¼ï¼ŒåŒ…ä½ åŠŸåŠ›å¤§å¢ï¼ (ä½†åœ¨è¿½ä»¥å‰è«‹ä¿æŒé ­è…¦æ¸…æ™°ï¼Œå…å¾—åˆ°æœ€å¾Œè¿·å¤±äº†æ–¹å‘ã€‚)</p>
<p>é‚£ç‚ºä»€éº¼è¦åŸ·è¡Œ SetUp å’Œ TearDown å‘¢ï¼ŸåŸå› åœ¨æ–¼ç•¶æˆ‘å€‘å¦‚æœæœ‰å¤šå€‹æ¸¬è©¦æ¡ˆä¾‹ï¼Œè€Œé€™äº›æ¸¬è©¦æ¡ˆä¾‹åœ¨æ¯æ¬¡åŸ·è¡Œæ™‚å¯èƒ½éƒ½æœƒåˆå§‹åŒ–ä¸€äº›ç›¸åŒçš„è®Šæ•¸æˆ–ç‰©ä»¶ï¼Œé‚£éº¼æˆ‘å€‘å°±å¯ä»¥æŠŠé€™äº›ç›¸åŒçš„å‹•ä½œæ”¾åˆ° SetUp å‡½å¼è£¡ã€‚ç›¸å°çš„ï¼Œå¦‚æœè¦æ¸…é™¤é€™äº›è®Šæ•¸æˆ–ç‰©ä»¶ï¼Œå°±æœƒæ”¾åˆ° TearDown ä¸­ã€‚</p>
<p>æˆ‘å€‘æŠŠå‰›å‰›çš„ ProductTest.asp æ”¹æˆä¸‹é¢çš„å‹å¼ï¼š</p>
<pre><code>&lt;!-- #include file=&quot;Product.asp&quot; --&gt;
&lt;%
Class ProductTest ' Extends TestCase
    Private oProduct
    Public Function TestCaseNames()
        TestCaseNames = Array(&quot;TestProduct&quot;, &quot;TestGetName&quot;, &quot;TestGetPrice&quot;, &quot;TestGetDiscountedPrice&quot;)
    End Function
    Public Sub SetUp()
        Set oProduct = New Product
    End Sub
    Public Sub TearDown()
        Set oProduct = Nothing
    End Sub
    Public Sub TestProduct(oTestResult)
        oTestResult.AssertExists oProduct, &quot;ç‰©ä»¶ä¸å­˜åœ¨ï¼&quot;
    End Sub
    Public Sub TestGetName(oTestResult)
        oProduct.Init &quot;å•†å“1&quot;, 100, 1
        oTestResult.AssertEquals &quot;å•†å“1&quot;, oProduct.GetName, &quot;åç¨±ä¸åŒï¼&quot;
    End Sub
    Public Sub TestGetPrice(oTestResult)
        oProduct.Init &quot;å•†å“1&quot;, 100, 1
        oTestResult.AssertEquals 100, oProduct.GetPrice, &quot;åƒ¹æ ¼ä¸åŒï¼&quot;
    End Sub
    Public Sub TestGetDiscountedPrice(oTestResult)
        oProduct.Init &quot;å•†å“2&quot;, 100, 0.9
        oTestResult.AssertEquals 90, oProduct.GetPrice, &quot;åƒ¹æ ¼ä¸åŒï¼&quot;
    End Sub
End Class
%&gt;

</code></pre><p>åœ¨ä¸Šé¢çš„ç¨‹å¼è£¡ï¼Œ oProduct é€™å€‹è®Šæ•¸è®Šæˆäº† ProductTest é¡åˆ¥çš„ç§æœ‰è®Šæ•¸ï¼Œæ‰€ä»¥å®ƒåœ¨æ•´å€‹ ProductTest è£¡éƒ½å¯ä»¥è¢«åƒç”¨åˆ°ã€‚</p>
<p>åœ¨é€™è£¡ï¼Œæˆ‘å€‘æŠŠ oProduct ç¨±ç‚ºã€Œæ¸¬è©¦è¨­å‚™ (Fixture) ã€ã€‚æ¸¬è©¦è¨­å‚™å¯ä»¥æœ‰å¾ˆå¤šå€‹ï¼Œç•¶ç„¶æœ€å¥½æ˜¯æ¯å€‹æ¸¬è©¦éƒ½æœƒç”¨åˆ°çš„ç‰©ä»¶ï¼Œæˆ‘å€‘æ‰å°‡å®ƒè½‰ç‚ºæ¸¬è©¦è¨­å‚™ï¼›å¦‚æœåªæœ‰ä¸€å€‹æ¸¬è©¦æ¡ˆä¾‹æœƒç”¨åˆ°ï¼Œé‚£éº¼ç›´æ¥åœ¨è©²æ¡ˆä¾‹ä¸­è‡ªè¡Œå»ºç«‹å³å¯ã€‚</p>
<p>å› æ­¤ Runner åœ¨å‘¼å«æ¸¬è©¦å®¹å™¨çš„ Run å‡½å¼æ™‚ï¼Œå°±æœƒä¾ç…§ä»¥ä¸‹é †åºå»åŸ·è¡Œå…¶ä»–å‡½å¼ï¼š</p>
<ul>
<li>SetUp()</li>
</ul>
<!-- raw HTML omitted -->
<p>é‚£éº¼ç‚ºä»€éº¼ä¸ä¿ç•™ oProduct çš„å…§å®¹ï¼Œç›´æ¥è®“æ¥ä¸‹ä¾†çš„æ¸¬è©¦æ¡ˆä¾‹ä½¿ç”¨å‘¢ï¼Ÿåè¦†çš„å»ºç«‹å’ŒéŠ·æ¯€ï¼Œæ•ˆç‡ä¸æ˜¯å¾ˆå·®å—ï¼Ÿ</p>
<p>éŒ¯ï¼å–®å…ƒæ¸¬è©¦ä¸¦æ²’æœ‰ç‰¹åˆ¥è¦æ±‚æ¸¬è©¦æ™‚çš„åŸ·è¡Œæ•ˆç‡ï¼Œå…¶åœ¨æ„çš„æ˜¯ç¨‹å¼çš„ç©©å®šæ€§ï¼›ä¹Ÿå°±æ˜¯èªªï¼Œæˆ‘å€‘éœ€è¦çš„æ˜¯æ¯å€‹æ¸¬è©¦æ¡ˆä¾‹è‡ªè¡Œé‹ä½œæ™‚çš„ç¨ç«‹æ€§ã€‚è€Œ SetUp å’Œ TearDown å…©å€‹å‡½å¼èƒ½å”åŠ©æˆ‘å€‘å»ºç«‹æ¯æ¬¡åŸ·è¡Œæ¸¬è©¦æ™‚çš„éš”é›¢ç’°å¢ƒï¼Œè®“æˆ‘å€‘èƒ½ä¿¡ä»»æ¸¬è©¦çµæœçš„å¯é æ€§ã€‚</p>
<h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>å…¶å¯¦æˆ‘é‚„å¾ˆå¤šé—œæ–¼å–®å…ƒæ¸¬è©¦çš„æ±è¥¿æ²’æœ‰èªªæ˜ï¼Œä¸éé€™ç¯‡æ–‡ç« ä¸»è¦ç›®çš„æ˜¯ä»‹ç´¹ ASPUnit ä»¥åŠå–®å…ƒæ¸¬è©¦ä¸€äº›ç°¡å–®çš„æ¦‚å¿µã€‚ç•¶ç„¶æˆ‘æƒ³å°å¤§å®¶ä¾†èªªï¼Œé€™ç¯‡æ–‡ç« çš„ç´€éŒ„æ„ç¾©é å¤§æ–¼å¯¦ç”¨æ„ç¾©ï¼Œæœ‰å¤šå°‘äººæœƒçœŸçš„æœƒå»ç”¨å®ƒå‘¢ï¼Ÿå¯¦åœ¨å¾ˆé›£èªªã€‚</p>
<p>æœ‰å¾ˆå¤šæ–‡ç« å’Œæ›¸ç±éƒ½æåˆ°äº†æ¸¬è©¦ï¼Œä»¥ä¸‹åˆ—å‡ºå¹¾æœ¬æˆ‘è¦ºå¾—ä¸éŒ¯çš„ä¸­æ–‡è‘—ä½œï¼Œå¸Œæœ›å°å¤§å®¶æœ‰ç”¨ï¼š</p>
<ul>
<li><a href="http://www.tenlong.com.tw/BookSearch/Search.php?isbn=9867910311&amp;sid=12245">æ¥µè‡´è»Ÿé«”è£½ç¨‹ (Extreme Programming Explained)</a></li>
<li><a href="http://www.tenlong.com.tw/BookSearch/Search.php?isbn=9861541489&amp;sid=26120">æ•æ·è»Ÿé«”é–‹ç™¼ï¼šåŸå‰‡ã€æ¨£å¼åŠå¯¦å‹™ (Agile Software Development: Principles, Patterns, and Practices)</a></li>
<li><a href="http://www.tenlong.com.tw/BookSearch/Search.php?isbn=9867594061&amp;sid=17667">é‡æ§‹â”€æ”¹å–„æ—¢æœ‰ç¨‹å¼çš„è¨­è¨ˆ</a></li>
</ul>
<p>ç¸½è€Œè¨€ä¹‹ï¼Œæ¸¬è©¦æ˜¯ä¸€ä»¶éå¸¸é‡è¦çš„äº‹æƒ…ï¼Œä¸è«–ä½ ç”¨å“ªä¸€ç¨®ç¨‹å¼èªè¨€ï¼Œæ‰¾åˆ°ä¸€å€‹è¶³ä»¥ä¿¡ä»»çš„æ¸¬è©¦æ¡†æ¶ï¼Œåšå¥½è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œé€™æ¨£åšèµ·äº‹ä¾†æ‰èƒ½äº‹åŠåŠŸå€ã€‚</p>
<p>æ­¡è¿éš¨æ™‚å›ä¾†æŒ‡æ­£æˆ‘ã€‚</p>
<h2 id="ç›¸é—œæ–‡ç« ">ç›¸é—œæ–‡ç« </h2>
<ul>
<li><a href="http://www.jaceju.net/blog/archives/51/">ASP ç‰©ä»¶å°å‘ (1) - åŸºç¤</a></li>
<li><a href="http://www.jaceju.net/blog/archives/52/">ASP ç‰©ä»¶å°å‘ (2) - åˆç´šæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/54/">ASP ç‰©ä»¶å°å‘ (3) - é€²éšæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/57/">ASP ç‰©ä»¶å°å‘ (4) - å‹•æ…‹è¼‰å…¥é¡åˆ¥</a></li>
<li><a href="http://www.jaceju.net/blog/archives/59/">ASP ç‰©ä»¶å°å‘ (5) - Me é—œéµå­—</a></li>
<li><a href="http://www.jaceju.net/blog/archives/76/">ASP ç‰©ä»¶å°å‘ (6) - å–®å…ƒæ¸¬è©¦</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>JavaScript çš„éœæ…‹è®Šæ•¸èˆ‡éœæ…‹æ–¹æ³•</title>
			<link>https://jaceju.net/javascript-static-property-and-static-method/</link>
			<pubDate>Mon, 06 Feb 2006 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/javascript-static-property-and-static-method/</guid>
			<description>ä¹‹å‰æåˆ° JavaScript æ’°å¯«ç‰©ä»¶æ™‚çš„å¯«æ³•ï¼š var ç‰©ä»¶é¡åˆ¥åç¨± = function([åƒæ•¸]) { this.å±¬æ€§1 = null; this.å±¬æ€§2 = new Array(); this.æ–¹æ³•1 = fun</description>
			<content type="html"><![CDATA[<p>ä¹‹å‰æåˆ° JavaScript æ’°å¯«ç‰©ä»¶æ™‚çš„å¯«æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">ç‰©ä»¶é¡åˆ¥åç¨±</span> <span class="o">=</span> <span class="kd">function</span><span class="p">([</span><span class="nx">åƒæ•¸</span><span class="p">])</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">å±¬æ€§1</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">å±¬æ€§2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">æ–¹æ³•1</span> <span class="o">=</span> <span class="kd">function</span><span class="p">([</span><span class="nx">åƒæ•¸</span><span class="p">])</span> <span class="p">{</span>
    <span class="c1">// æ–¹æ³•1ç¨‹å¼ç¢¼
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">å±¬æ€§1</span> <span class="o">=</span> <span class="s1">&#39;DEF&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">this</span><span class="p">.</span><span class="nx">æ–¹æ³•2</span> <span class="o">=</span> <span class="kd">function</span><span class="p">([</span><span class="nx">åƒæ•¸</span><span class="p">])</span> <span class="p">{</span>
    <span class="c1">// æ–¹æ³•2ç¨‹å¼ç¢¼
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">å±¬æ€§2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div><p>é€™ç¨®æ–¹æ³•åœ¨æœ‰ç‰©ä»¶å¯¦é«”æ™‚æ‰æœƒæœ‰ä½œç”¨ï¼Œå¦‚æœè¦åƒ Java æˆ– PHP ä¸€æ¨£å‘¼å«éœæ…‹æ–¹æ³•çš„è©±ï¼Œå°±è¦é€™æ¨£å¯«ï¼š</p>
<!-- raw HTML omitted -->
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">ç‰©ä»¶é¡åˆ¥åç¨±</span> <span class="o">=</span> <span class="kd">function</span><span class="p">([</span><span class="nx">åƒæ•¸</span><span class="p">])</span> <span class="p">{</span>
<span class="p">}</span>

<span class="c1">// ä¸€å®šè¦åœ¨å»ºæ§‹å‡½å¼ä¹‹å¾Œå†å®£å‘Šï¼Œå¦å‰‡æœƒæœ‰éŒ¯èª¤ã€‚
</span><span class="c1"></span><span class="nx">ç‰©ä»¶é¡åˆ¥åç¨±</span><span class="p">.</span><span class="nx">éœæ…‹è®Šæ•¸</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="nx">ç‰©ä»¶é¡åˆ¥åç¨±</span><span class="p">.</span><span class="nx">éœæ…‹æ–¹æ³•</span> <span class="o">=</span> <span class="kd">function</span><span class="p">([</span><span class="nx">åƒæ•¸</span><span class="p">])</span> <span class="p">{</span>
  <span class="c1">// é€™æ™‚å€™ä¸å¯ä½¿ç”¨ this é—œéµå­—
</span><span class="c1"></span>  <span class="nx">ç‰©ä»¶é¡åˆ¥åç¨±</span><span class="p">.</span><span class="nx">éœæ…‹è®Šæ•¸1</span> <span class="o">=</span> <span class="s1">&#39;DEF&#39;</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div><p>é€™æ¨£æˆ‘å€‘å¯ä»¥åˆ©ç”¨å®ƒä¾†å»ºç«‹ä¸€å€‹ Singleton é¡åˆ¥  ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">MyTest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">msg</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">echo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">msg</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">setMsg</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">msg</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// é€™è£¡æ˜¯é—œéµ
</span><span class="c1"></span><span class="nx">MyTest</span><span class="p">.</span><span class="nx">_instance</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="nx">MyTest</span><span class="p">.</span><span class="nx">getInstance</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">MyTest</span><span class="p">.</span><span class="nx">_instance</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">MyTest</span><span class="p">.</span><span class="nx">_instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyTest</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">msg</span> <span class="o">=</span> <span class="s1">&#39;test!&#39;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">MyTest</span><span class="p">.</span><span class="nx">_instance</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div><p>æ¸¬è©¦å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;test.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="c">&lt;!--</span>
<span class="kd">var</span> <span class="nx">test1</span> <span class="o">=</span> <span class="nx">MyTest</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">();</span>
<span class="nx">test1</span><span class="p">.</span><span class="nx">echo</span><span class="p">();</span> <span class="c1">// show &#39;null&#39;
</span><span class="c1"></span><span class="nx">test1</span><span class="p">.</span><span class="nx">setMsg</span><span class="p">(</span><span class="s1">&#39;this is test1!&#39;</span><span class="p">);</span>
<span class="nx">test1</span><span class="p">.</span><span class="nx">echo</span><span class="p">();</span> <span class="c1">// show &#39;this is test1!&#39;
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">test2</span> <span class="o">=</span> <span class="nx">MyTest</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">();</span>
<span class="nx">test2</span><span class="p">.</span><span class="nx">echo</span><span class="p">();</span> <span class="c1">// show &#39;this is test1!&#39;
</span><span class="c1"></span><span class="nx">test2</span><span class="p">.</span><span class="nx">setMsg</span><span class="p">(</span><span class="s1">&#39;this is test2!&#39;</span><span class="p">);</span>
<span class="nx">test1</span><span class="p">.</span><span class="nx">echo</span><span class="p">();</span> <span class="c1">// show &#39;this is test2!&#39;
</span><span class="c1">//--&gt;
</span><span class="c1"></span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

</code></pre></div><p>å¯ä»¥çœ‹å¾—å‡ºä¾†ï¼Œ test1 å’Œ test2 å…¶å¯¦éƒ½æ˜¯æŒ‡å‘ MyTest._instance ã€‚</p>
<p>ç•¶ç„¶ç”¨ JavaScript å¯¦ä½œ Singleton çš„å¯¦éš›æ„ç¾©ä¸å¤§ (å»ºæ§‹å¼é‚„æ˜¯å…¬é–‹çš„) ï¼Œé€™è£¡æˆ‘åªæ˜¯åœ¨å¼·èª¿ JavaScript éœæ…‹æ–¹æ³•åŠè®Šæ•¸çš„å¯«æ³•è€Œå·²ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>ç”¨ Xdebug ä¾†æ‰¾å‡º PHP ç¨‹å¼éŒ¯èª¤</title>
			<link>https://jaceju.net/php-debuging-with-xdebug/</link>
			<pubDate>Mon, 19 Dec 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/php-debuging-with-xdebug/</guid>
			<description>æœ‰æ™‚å€™ PHP åœ¨åŸ·è¡Œåˆ°æŸå€‹éŒ¯èª¤æ™‚ï¼Œåªæœƒä¸Ÿå‡ºä¸€è¡Œçš„è¨Šæ¯ï¼Œå‘Šè¨´ä½ ç¨‹å¼ç™¼ç”ŸéŒ¯èª¤ã€‚ ä¾‹å¦‚ä»¥ä¸‹çš„ç¨‹å¼ï¼š &amp;lt;?php function test($var) { $var-&amp;gt;display(); } $abc = 123; test($abc); ?&amp;gt; åŸ·è¡Œå¾Œæœƒå‡ºç¾ä»¥ä¸‹çš„éŒ¯èª¤ï¼š Fatal error: Call to a</description>
			<content type="html"><![CDATA[<p>æœ‰æ™‚å€™ PHP åœ¨åŸ·è¡Œåˆ°æŸå€‹éŒ¯èª¤æ™‚ï¼Œåªæœƒä¸Ÿå‡ºä¸€è¡Œçš„è¨Šæ¯ï¼Œå‘Šè¨´ä½ ç¨‹å¼ç™¼ç”ŸéŒ¯èª¤ã€‚ ä¾‹å¦‚ä»¥ä¸‹çš„ç¨‹å¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">test</span><span class="p">(</span><span class="nv">$var</span><span class="p">)</span>
<span class="p">{</span>
   <span class="nv">$var</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">();</span>
<span class="p">}</span>
<span class="nv">$abc</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
<span class="nx">test</span><span class="p">(</span><span class="nv">$abc</span><span class="p">);</span>
<span class="cp">?&gt;</span>

</code></pre></div><p>åŸ·è¡Œå¾Œæœƒå‡ºç¾ä»¥ä¸‹çš„éŒ¯èª¤ï¼š</p>
<pre><code>Fatal error:  Call to a member function display() on a non-object in D:\WEB\wwwroot\index.php on line 4

</code></pre><p>æˆ‘å€‘å¯ä»¥çŸ¥é“åœ¨ç¬¬ 4 è¡Œçš„åœ°æ–¹å› ç‚º test å‡½å¼å° $var å‘¼å«äº†ç‰©ä»¶æ“ä½œå‡½å¼ï¼Œå»å› ç‚º $var ä¸æ˜¯ç‰©ä»¶è€Œå°è‡´éŒ¯èª¤ (Fatal Error) ã€‚ä½†æ˜¯æˆ‘å€‘æ€éº¼çŸ¥é“ $var è®Šæ•¸æ˜¯å¾é‚£è£¡ä¾†çš„å‘¢ï¼Ÿå°±ä¸Šä¾‹è€Œè¨€ï¼Œå¾ˆæ˜é¡¯åœ°å¾€å›æ¨åˆ°ç¬¬ 8 è¡Œå‘¼å« test å‡½å¼çš„åœ°æ–¹ï¼Œæˆ‘å€‘çµ¦å®ƒçš„æ˜¯ $abc è®Šæ•¸ï¼Œè€Œ $abc è®Šæ•¸å­˜æ”¾å‰‡æ˜¯ä¸€å€‹æ•¸å€¼ï¼Œä¹Ÿå› æ­¤é€ æˆ test å‡½å¼çš„éŒ¯èª¤ã€‚</p>
<p>ç•¶ç„¶åœ¨ç¨‹å¼ç¢¼æ¯”è¼ƒçŸ­æ™‚ï¼Œæˆ‘å€‘å¯ä»¥å¾ˆå®¹æ˜“çŸ¥é“æ•´å€‹ç¨‹å¼åŸ·è¡Œçš„æµç¨‹å‹•å‘ï¼›ä¸éç•¶æˆ‘å€‘çš„ç¨‹å¼ç¢¼æš´æ¼²åˆ°ä¸Šç™¾è¡Œæˆ–æ˜¯ä¸­é–“å¼•å…¥ä¸åŒæª”æ¡ˆæ™‚ï¼Œè¦ä¸€ä¸‹å­æ­¸ç´å‡ºå®ƒçš„å‹•ç·šå°±å¾ˆä¸å®¹æ˜“äº†ã€‚æ›å¥è©±èªªï¼Œå¦‚æœç¬¬ 6 è¡Œä¸­æˆ‘å€‘æœ‰ä¸Šç™¾è¡Œçš„ç¨‹å¼ç¢¼ï¼Œé‚£éº¼æˆ‘å€‘å¦‚ä½•ä¸€ä¸‹å­å°±æ‰¾åˆ° test å‡½å¼çš„å¼•ç”¨é»å‘¢ï¼Ÿ</p>
<!-- raw HTML omitted -->
<h2 id="xdebug">Xdebug</h2>
<p>ä¹‹å‰æˆ‘å¯«äº†ä¸€ç¯‡ <a href="http://www.jaceju.net/blog/archives/21">Xdebug çš„æ–‡ç« </a>ï¼Œä¸éç•¶æ™‚è«‡åˆ°çš„æ˜¯ç°¡æ¸¬ PHP ç¨‹å¼çš„æ•ˆèƒ½ã€‚å…¶å¯¦ Xdebug <!-- raw HTML omitted -->æ•…åæ€æ„<!-- raw HTML omitted --><a href="http://140.111.34.46/chengyu/">é¡§åæ€ç¾©</a>å°±æ˜¯è®“æˆ‘å€‘å¯ä»¥å°ç¨‹å¼é€²è¡Œé™¤éŒ¯ï¼ŒåŒæ™‚ä¹Ÿè¨˜éŒ„ç›¸é—œçš„è³‡è¨Šã€‚è€Œå®ƒæœ‰å€‹å¾ˆå¸¸ç”¨çš„åŠŸèƒ½ï¼Œå°±æ˜¯è®“æˆ‘å€‘åœ¨ç¨‹å¼å‡ºéŒ¯æ™‚ï¼Œå¯ä»¥çŸ¥é“ç™¼ç”ŸéŒ¯èª¤å‰ï¼Œç¨‹å¼æ‰€åŸ·è¡Œçš„æµç¨‹ã€‚</p>
<p>ä¾‹å¦‚ä¸Šä¾‹åœ¨ä½¿ç”¨å®‰è£ Xdeubg å¾Œï¼Œæ‰€å‡ºç¾çš„éŒ¯èª¤ç•«é¢ï¼š (å®‰è£æ–¹å¼è«‹åƒè€ƒä¸Šé¢æåˆ°çš„æ–‡ç« )</p>
<p><a href="//www.jaceju.net/resources/xdebug_debug/001.png"><img src="//www.jaceju.net/resources/xdebug_debug/001.png" alt="ç¨‹å¼ä¸€çš„éŒ¯èª¤ç•«é¢"></a></p>
<p>å…¶ä¸­ç´…è‰²éƒ¨ä»½å°±æ˜¯åŸä¾†çš„éŒ¯èª¤è¨Šæ¯ï¼Œè€Œåº•ä¸‹çš„è¡¨æ ¼éƒ¨ä»½å°±æ˜¯ç¨‹å¼åŸ·è¡Œçš„é †åº (ä¸”å·²æ­£ç¢ºåŸ·è¡Œ) ã€‚æ‰€ä»¥æˆ‘å€‘èƒ½å¾ˆæ¸…æ¥šåœ°çŸ¥é“ç¨‹å¼æ˜¯åœ¨ç¬¬ 8 è¡Œå¼•ç”¨ test å‡½å¼å¾Œç™¼ç”Ÿäº†éŒ¯èª¤ï¼Œé€™æ¨£ä¸€ä¾†å°±èƒ½æ¸›å°æˆ‘å€‘æœç´¢çš„ç¯„åœã€‚</p>
<p>ä¸éæœ‰ç¨®æƒ…æ³ Xdebug ç™¼æ®ä¸äº†ä½œç”¨ï¼Œé‚£å°±æ˜¯ PHP.INI éŒ¯èª¤å›å ±ç­‰ç´šè¢«èª¿æ•´éäº†ã€‚ä¾‹å¦‚ä»¥ä¸‹ç¯„ä¾‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">test</span>
<span class="p">{</span>
  <span class="k">private</span> <span class="nv">$var</span> <span class="o">=</span> <span class="s1">&#39;123&#39;</span><span class="p">;</span>
  <span class="k">public</span> <span class="k">function</span> <span class="nf">display</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">varr</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">function</span> <span class="nf">test</span><span class="p">()</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">test</span><span class="p">;</span>
<span class="p">}</span>
<span class="nv">$abc</span> <span class="o">=</span> <span class="nx">test</span><span class="p">();</span>
<span class="nv">$abc</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">();</span>
<span class="cp">?&gt;</span>

</code></pre></div><p>å¦‚æœç•¶ä½ åŸ·è¡Œé€™æ®µç¨‹å¼æ™‚ï¼Œæ²’æœ‰å‡ºç¾ä»»ä½•éŒ¯èª¤ï¼Œé‚£éº¼å°±è¡¨ç¤º PHP.INI éŒ¯èª¤å›å ±ç­‰ç´šæ²’æœ‰å°ã€Œè®Šæ•¸æœªå®šç¾©ã€ç”¢ç”Ÿè­¦å‘Š (Â NOTICE) ã€‚é€šå¸¸é€™æ˜¯åœ¨ä¸Šç·šç³»çµ±æ‰€å¿…é ˆé—œé–‰çš„ï¼Œå› ç‚ºå¾ˆå¤šæ™‚å€™æˆ‘å€‘å¸¸æœƒæ¼æ‰å®£å‘Šé€™äº›è®Šæ•¸ (çµ¦åˆå§‹å€¼) ï¼›å¦‚æœä¸é—œæ‰çš„è©±ï¼Œé é¢å°±æœƒç”¢ç”Ÿä¸€å †è®“ä½¿ç”¨è€…è²»è§£çš„è¨Šæ¯ã€‚</p>
<p>è©¦è‘—åœ¨ &lt;?php çš„ä¸‹ä¸€è¡ŒåŠ ä¸Šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">error_reporting(E_ALL);

</code></pre></div><p>é‡æ–°åŸ·è¡Œå¾Œæˆ‘å€‘å°±æœƒçœ‹åˆ°ï¼š</p>
<p><a href="//www.jaceju.net/resources/xdebug_debug/002.png"><img src="//www.jaceju.net/resources/xdebug_debug/002.png" alt="ç¨‹å¼äºŒçš„éŒ¯èª¤ç•«é¢"></a></p>
<p>ä¸Šé¢çš„æ„æ€å°±æ˜¯æœªå®£å‘Šçš„å±¬æ€§ï¼Œå›é ­çœ‹ä¸€ä¸‹é¡åˆ¥ç¨‹å¼ï¼ŒåŸä¾†æˆ‘å€‘å¤šè¼¸å…¥äº†ä¸€å€‹ r å­—æ¯ (è®Šæˆ var<!-- raw HTML omitted -->r<!-- raw HTML omitted -->) ã€‚é€™ç¨®éŒ¯èª¤ä¹Ÿå¸¸è¦‹æ–¼ä¸€å€‹è¼ƒå¤§å‹çš„ç‰©ä»¶é¡åˆ¥ç¨‹å¼ä¸­å¦‚æœæœ‰è¼ƒé•·åç¨±çš„å±¬æ€§æ™‚ï¼Œæˆ‘å€‘å¾ˆå®¹æ˜“å¯«éŒ¯å®ƒå€‘çš„åå­— (å°¤å…¶åƒè‹±æ–‡ä¸å¥½çš„æˆ‘) ã€‚</p>
<p>å› æ­¤å¦‚æœè¦ä½¿ç”¨ Xdebug ï¼Œä¸€å®šè¦è¨˜å¾—æŠŠéŒ¯èª¤å›å ±ç­‰ç´šè¨­å®šè‡³æœ€åš´æ ¼ï¼Œé€™æ¨£æ‰èƒ½æŠ“å‡ºæ‰€æœ‰çš„å•é¡Œé»ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>ASP ç‰©ä»¶è¨­è¨ˆæ‰‹æ³• (5) - Me é—œéµå­—</title>
			<link>https://jaceju.net/classic-asp-oo-5/</link>
			<pubDate>Fri, 16 Dec 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/classic-asp-oo-5/</guid>
			<description>ä¸€ç›´ä»¥ä¾†æˆ‘éƒ½ä»¥ç‚º Me é€™å€‹é—œéµå­—åªèƒ½åœ¨ VB ä¸Šç”¨ï¼Œæ²’æƒ³åˆ°é€™å…©å¤©æˆ‘ç”¨äº† Me ç•¶é¡åˆ¥å±¬æ€§æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œé€™è®“æˆ‘å¾—é‡æ–°æª¢è¦–å®ƒæ˜¯ä¸æ˜¯å€‹ VBScript çš„é è¨­é—œéµå­—ã€‚ æˆ‘æ‰¾é MSDN çš„ Scripting ï¼Œ</description>
			<content type="html"><![CDATA[<p>ä¸€ç›´ä»¥ä¾†æˆ‘éƒ½ä»¥ç‚º Me é€™å€‹é—œéµå­—åªèƒ½åœ¨ VB ä¸Šç”¨ï¼Œæ²’æƒ³åˆ°é€™å…©å¤©æˆ‘ç”¨äº† Me ç•¶é¡åˆ¥å±¬æ€§æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œé€™è®“æˆ‘å¾—é‡æ–°æª¢è¦–å®ƒæ˜¯ä¸æ˜¯å€‹ VBScript çš„é è¨­é—œéµå­—ã€‚</p>
<p>æˆ‘æ‰¾é <a href="http://msdn.microsoft.com/library/">MSDN</a> çš„ <a href="http://msdn.microsoft.com/library/en-us/dnanchor/html/Scriptinga.asp">Scripting</a> ï¼Œè£¡é¢ä¸¦æ²’æœ‰æåˆ° Me é€™å€‹é—œéµå­—ï¼Œåè€Œæ˜¯åœ¨ VB 6.0 è£¡æ‰¾åˆ°é€™å€‹é—œéµå­—çš„<a href="http://msdn.microsoft.com/library/default.asp?url=https://jaceju.net/library/en-us/vbenlr98/html/vakeyme.asp">èªªæ˜</a>ã€‚çœŸæ˜¯ç¥ã€Œ Me ã€ å‘€ï¼å®ƒåœ¨ VB ä¸­çš„ä¸»è¦ç”¨é€”ä¸€ç‚ºæŒ‡å‘é¡åˆ¥è‡ªå·±ï¼ŒäºŒç‚ºæŒ‡å‘ Form ç‰©ä»¶ã€‚ä¸é ASP ä¸­æ‡‰è©²æ˜¯æ²’æœ‰ Form ç‰©ä»¶å¯åƒè€ƒ (é€™è£¡æˆ‘ä¿ç•™é€™æ¨£çš„æƒ³æ³•ï¼Œä¹Ÿè¨±å°‡ä¾†åˆç™¼ç¾è‡ªå·±éŒ¯äº†) ï¼Œæ‰€ä»¥å°æˆ‘ä¾†èªªé€™å€‹é—œéµå­—å°±æ˜¯ç”¨åœ¨ Class ä¸Šçš„ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="me-é—œéµå­—çš„ç”¨æ³•">Me é—œéµå­—çš„ç”¨æ³•</h2>
<p>æˆ‘å¯«äº†ä¸€å€‹å°ç¨‹å¼ä¾†æ¸¬è©¦ Me é—œéµå­—ï¼Œå…¶å¯¦ä¹Ÿæ²’æœ‰å¾ˆè¤‡é›œï¼Œç”¨æ³•å’Œ JavaScript çš„ this é—œéµå­—å¾ˆåƒã€‚</p>
<pre><code>&lt;%
Class ClassMessage
    Private Message

    Private Sub Class_Initialize()
        Me.SetMessage &quot;TEST&quot;
    End Sub

    Public Sub SetDisplay(oDisplay)
        oDisplay.Display Me
    End Sub

    Public Sub SetMessage(sMessage)
        Message = sMessage
        ' ä¸å¯ä»¥å¯«æˆï¼š
        ' Me.Message = sMessage
    End Sub

    Public Function GetMessage()
        GetMessage = Message
    End Function
End Class

Class ClassDisplay
    Public Sub Display(oMessage)
        Response.Write oMessage.GetMessage
    End Sub
End Class

Dim oMessage : Set oMessage = New ClassMessage
Dim oDisplay : Set oDisplay = New ClassDisplay

oMessage.SetDisplay oDisplay
Set oMessage = Nothing
Set oDisplay = Nothing
%&gt;

</code></pre><p>é€™æ¨£ä¸€ä¾†ï¼Œæœ‰å¾ˆå¤šè¨­è¨ˆæ¨¡å¼å¯ç”¨äº†ï¼Œæœ‰ç©ºå¯ä»¥å¥½å¥½ç ”ç©¶ä¸€ä¸‹ã€‚</p>
<p>ä¸éå€¼å¾—æ³¨æ„çš„æ˜¯ Me é—œéµå­—ä¼¼ä¹ä¸èƒ½ç”¨åœ¨å±¬æ€§ä¸Šï¼Œæ‰€ä»¥æˆ‘è¦ºå¾—å®ƒæ›´åƒ PHP çš„ self é—œéµå­—ï¼›ä¹Ÿå°±æ˜¯èªª Me é—œéµå­—åœ¨æŸç¨®ç¨‹åº¦ä¸Šä¾†èªªæ‡‰è©²å±¬æ–¼é¡åˆ¥å±¤ç´šï¼Œè€Œéç‰©ä»¶å±¤ç´šã€‚ å¯æ˜¯å®ƒåˆå¯ä»¥æŠŠè‡ªå·±ä¸Ÿçµ¦åˆ¥çš„ç‰©ä»¶åƒè€ƒï¼Œå’Œ PHP çš„ $this åˆæœ‰é»åƒï¼Œæˆ‘æƒ³é€™é»è¦ç‰¹åˆ¥æ³¨æ„ã€‚</p>
<p>é™„å¸¶ä¸€æï¼Œ MSDN æœ€è¿‘é€£çµå¤§æ”¹ï¼Œæœ‰é»é›£ä»¥é©æ‡‰ã€‚</p>
<h2 id="ç›¸é—œæ–‡ç« ">ç›¸é—œæ–‡ç« </h2>
<ul>
<li><a href="http://www.jaceju.net/blog/archives/51/">ASP ç‰©ä»¶å°å‘ (1) - åŸºç¤</a></li>
<li><a href="http://www.jaceju.net/blog/archives/52/">ASP ç‰©ä»¶å°å‘ (2) - åˆç´šæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/54/">ASP ç‰©ä»¶å°å‘ (3) - é€²éšæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/57/">ASP ç‰©ä»¶å°å‘ (4) - å‹•æ…‹è¼‰å…¥é¡åˆ¥</a></li>
<li><a href="http://www.jaceju.net/blog/archives/59/">ASP ç‰©ä»¶å°å‘ (5) - Me é—œéµå­—</a></li>
<li><a href="http://www.jaceju.net/blog/archives/76/">ASP ç‰©ä»¶å°å‘ (6) - å–®å…ƒæ¸¬è©¦</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>ASP ç‰©ä»¶è¨­è¨ˆæ‰‹æ³• (4) - å‹•æ…‹è¼‰å…¥é¡åˆ¥</title>
			<link>https://jaceju.net/classic-asp-oo-4/</link>
			<pubDate>Sat, 10 Dec 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/classic-asp-oo-4/</guid>
			<description>ç‚ºäº†é¿å…é¡åˆ¥é‡è¦†å®£å‘Šï¼Œæˆ‘æƒ³ç›¡è¾¦æ³•åšäº†ä¸€äº›èª¿æ•´ï¼Œä½†éƒ½ä¸å¦‚å·²æ„ã€‚å¾Œä¾†æˆ‘å›æƒ³èµ·è‡ªå·±æ›¾ç¶“æ‰¾éä¸€ç¯‡å‹•æ…‹è¼‰å…¥ ASP ç¨‹å¼çš„æ–‡ç« ï¼Œé‚£æ™‚å› ç‚ºå®ƒç„¡æ³•é”åˆ°æˆ‘çš„éœ€æ±‚è€Œæ”¾</description>
			<content type="html"><![CDATA[<p>ç‚ºäº†é¿å…é¡åˆ¥é‡è¦†å®£å‘Šï¼Œæˆ‘æƒ³ç›¡è¾¦æ³•åšäº†ä¸€äº›èª¿æ•´ï¼Œä½†éƒ½ä¸å¦‚å·²æ„ã€‚å¾Œä¾†æˆ‘å›æƒ³èµ·è‡ªå·±æ›¾ç¶“æ‰¾éä¸€ç¯‡<a href="http://www.blueidea.com/tech/program/2003/101.asp">å‹•æ…‹è¼‰å…¥ ASP ç¨‹å¼çš„æ–‡ç« </a>ï¼Œé‚£æ™‚å› ç‚ºå®ƒç„¡æ³•é”åˆ°æˆ‘çš„éœ€æ±‚è€Œæ”¾æ£„ï¼Œä½†æ˜¯ç¾åœ¨å®ƒå»æœ‰æ–°çš„ç”¨æ³•ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="è¼‰å…¥æ–‡ä»¶">è¼‰å…¥æ–‡ä»¶</h2>
<p>é¦–å…ˆé€é ADODB.Stream ï¼Œæˆ‘å€‘å¯ä»¥æŠŠä¸€ä»½æ–‡å­—æª”è¼‰å…¥è¨˜æ†¶é«”ï¼š</p>
<pre><code>LoadFile.asp
&lt;%
Public Function LoadFile(sFilePath)
    Dim oStream
    On Error Resume Next
    Set oStream = Server.CreateObject(&quot;ADODB.Stream&quot;)
    With oStream
        .Type = 2
        .Mode = 3
        .CharSet = &quot;BIG5&quot;
        .Open
        .LoadFromFile Server.MapPath(sFilePath)
        If Err.Number &lt;&gt; 0 Then
            Err.Clear
            Response.Write &quot;[FUNCTION] LoadFile Error - æ‰¾ä¸åˆ°æª”æ¡ˆï¼š&quot; &amp;amp; sFilePath
            Response.End
        End If
        LoadFile = .ReadText
        .Close
    End With
    Set oStream = Nothing
End Function
%&gt;

</code></pre><p>æœ‰äº›äººç¿’æ…£ä½¿ç”¨ FileSystemObject ä¾†è¼‰å…¥æª”æ¡ˆå…§å®¹ï¼Œä½†æ˜¯åˆ©ç”¨ ADODB.Stream çš„æ•ˆç‡æœƒæ¯”è¼ƒå¥½ã€‚</p>
<h2 id="å‹•æ…‹è¼‰å…¥-asp-é¡åˆ¥æª”">å‹•æ…‹è¼‰å…¥ ASP é¡åˆ¥æª”</h2>
<p>ä»¥ä¸‹çš„ç¨‹å¼å°±æ˜¯å¾å‰é¢é‚£ç¯‡æ–‡ç« æ‰€æä¾›çš„ç¨‹å¼ä¿®æ”¹è€Œä¾†çš„ï¼Œ</p>
<pre><code>Include.asp
&lt;!-- #include file = &quot;LoadFile.asp&quot; --&gt;
&lt;%
Public Const ASP_LEFT = &quot;&lt;%&quot;
Public Const ASP_RIGHT = &quot;%\&gt;&quot;
Public Function Include(sFileName)
    Dim sContent : sContent = LoadFile(sFileName)
    Dim iEnd : iEnd = 1
    Dim iStart : iStart = InStr(iEnd, sContent, ASP_LEFT) + 2
    Do While iStart &gt; iEnd + 1
        iEnd = InStr(iStart, sContent, ASP_RIGHT) + 2
        ExecuteGlobal(Mid(sContent, iStart, iEnd - iStart - 2))
        iStart = InStr(iEnd, sContent, ASP_LEFT) + 2
    Loop
End Function
%&gt;

</code></pre><p>å…¶ä¸­ &ldquo;%&gt;&rdquo; æ˜¯ç‚ºäº†é¿é–‹ ASP è§£è­¯ç¨‹å¼ä¸Šçš„éŒ¯èª¤ã€‚ä¸»è¦çš„æ¦‚å¿µå°±æ˜¯åˆ©ç”¨ <a href="http://msdn.microsoft.com/library/en-us/script56/html/vsstmExecuteGlobal.asp">ExecuteGlobal</a> ä¾†åŸ·è¡Œ ASP æª”æ¡ˆä¸­çš„ &lt;% åŠ %&gt; å…©å€‹ç¬¦è™Ÿé–“çš„å…§å®¹ï¼Œå¦‚æœä½¿ç”¨ <a href="http://msdn.microsoft.com/library/default.asp?url=https://jaceju.net/library/en-us/script56/html/vsstmExecute.asp">Execute</a> çš„è©±ï¼Œæœƒç™¼ç”Ÿæ‰¾ä¸åˆ° Class çš„éŒ¯èª¤ã€‚</p>
<h2 id="å»ºç«‹ç‰©ä»¶">å»ºç«‹ç‰©ä»¶</h2>
<p>é‚„è¨˜å¾—å‰é¢æ‰€ä»‹ç´¹çš„é¡åˆ¥å‘½åè¦å‰‡å’Œå·¥å» æ–¹æ³•å—ï¼Ÿé€™è£¡å°±æ´¾ä¸Šç”¨å ´äº†ã€‚</p>
<pre><code>GetObject.asp
&lt;!-- #include file=&quot;Include.asp&quot; --&gt;
&lt;%
Public Const CLASS_DIR = &quot;&quot;
Public Function GetObject(sClassName)
    Dim sFileName
    sFileName = Replace(sClassName, &quot;_&quot;, &quot;/&quot;) &amp;amp; &quot;.asp&quot;
    Set GetObject = Nothing
    On Error Resume Next
    Include sFileName
    Execute &quot;Set GetObject = New &quot; &amp;amp; sClassName
    On Error Goto 0
End Function
%&gt;

</code></pre><p>é¦–å…ˆæˆ‘å€‘æŠŠé¡åˆ¥åç¨±ä¸­çš„ &ldquo;_&rdquo; (åº•ç·š) æ›æˆ &ldquo;/&rdquo; (æ–œç·š) å†åŠ ä¸Š &ldquo;.asp&rdquo; ï¼Œç„¶å¾Œåˆ©ç”¨å·¥å» æ–¹æ³•ä¾†å›å‚³å»ºç«‹å¥½çš„ç‰©ä»¶ã€‚</p>
<p>è¨»ï¼šå› ç‚º ASP (VBScript) æ²’æœ‰å…§å»º GetObject å‡½å¼ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥é€™æ¨£å¯«ã€‚å¦‚æœæ˜¯åœ¨ WScript è£¡é¢å°±ä¸èƒ½ç”¨ GetObject ï¼Œå› ç‚ºå®ƒæ˜¯å…§å»ºå‡½å¼ã€‚</p>
<p>ä»¥ä¸‹å°±æ˜¯ç°¡å–®çš„æ¸¬è©¦æ–¹å¼ï¼š</p>
<pre><code>&lt;!-- #include file=&quot;GetObject.asp&quot; --&gt;
&lt;%
Dim oCache1 : Set oCache1 = GetObject(&quot;HTML_Cache&quot;)
Response.Write TypeName(oCache1) &amp;amp; &quot;&lt;br /&gt;&quot; &amp;amp; vbCrLf
oCache1.SetExpire 10
If oCache1.IsCached Then
    Response.Write &quot;File1 is cached.&lt;br /&gt;&quot; &amp;amp; vbCrLf
End If
Set oCache1 = Nothing

Dim oCache2 : Set oCache2 = GetObject(&quot;HTML_Cache&quot;)
Response.Write TypeName(oCache2) &amp;amp; &quot;&lt;br /&gt;&quot; &amp;amp; vbCrLf
If oCache2.IsCached Then
    Response.Write &quot;File2 is cached.&lt;br /&gt;&quot; &amp;amp; vbCrLf
End If
Set oCache2 = Nothing
%&gt;

</code></pre><p>è€Œæ¸¬è©¦ç”¨çš„é¡åˆ¥æª”å¦‚ä¸‹ (æˆ‘ç°¡åŒ–äº†è¨±å¤šä¸å¿…è¦çš„ç¨‹å¼) ï¼š</p>
<pre><code>HTML\Cache.asp
&lt;%
Class HTML_Cache
    Private Expire

    Public Function IsCached()
        IsCached = True
    End Function

    Public Sub SetExpire(iSecond)
        Expire = iSecond
    End Sub
End Class
%&gt;

</code></pre><p>æ¸¬è©¦ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯å¾ˆæœ‰è¶£å‘¢ï¼Ÿ</p>
<h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>å°æˆ‘è€Œè¨€ï¼Œå¦‚æœæŠŠè¤‡é›œçš„äº‹æƒ…ç°¡åŒ–ï¼Œæ˜¯ä¸€ç¨®å­¸ç¿’çš„å‹•åŠ›ã€‚é€éé€™äº›æ­¥é©Ÿï¼Œæˆ‘èƒ½å¤ å¾ˆè¼•é¬†åœ°è¼‰å…¥æˆ‘æƒ³è¦çš„é¡åˆ¥ï¼Œè€Œä¸å¿…å†ç…©æƒ±æ˜¯ä¸æ˜¯è¼‰å…¥äº†é‡è¤‡çš„é¡åˆ¥æª”æ¡ˆã€‚é€™ç³»åˆ—çš„æ–‡ç« å¦‚æœèƒ½å°æŸäº›æƒ³è¦å­¸ç¿’çš„äººæœ‰ç”¨ï¼Œé‚£éº¼å°±å€¼å¾—äº†ã€‚</p>
<h2 id="ç›¸é—œæ–‡ç« ">ç›¸é—œæ–‡ç« </h2>
<ul>
<li><a href="http://www.jaceju.net/blog/archives/51/">ASP ç‰©ä»¶å°å‘ (1) - åŸºç¤</a></li>
<li><a href="http://www.jaceju.net/blog/archives/52/">ASP ç‰©ä»¶å°å‘ (2) - åˆç´šæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/54/">ASP ç‰©ä»¶å°å‘ (3) - é€²éšæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/57/">ASP ç‰©ä»¶å°å‘ (4) - å‹•æ…‹è¼‰å…¥é¡åˆ¥</a></li>
<li><a href="http://www.jaceju.net/blog/archives/59/">ASP ç‰©ä»¶å°å‘ (5) - Me é—œéµå­—</a></li>
<li><a href="http://www.jaceju.net/blog/archives/76/">ASP ç‰©ä»¶å°å‘ (6) - å–®å…ƒæ¸¬è©¦</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>ASP ç‰©ä»¶è¨­è¨ˆæ‰‹æ³• (1) - åŸºç¤</title>
			<link>https://jaceju.net/classic-asp-oo-1/</link>
			<pubDate>Tue, 06 Dec 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/classic-asp-oo-1/</guid>
			<description>é€™æ˜¯å¯«çµ¦å…¬å¸åŒäº‹çš„ä¸€ç³»åˆ— ASP (VBScript) ç‰©ä»¶è¨­è¨ˆæ‰‹æ³•æ–‡ç« ï¼Œæˆ‘ç›¡å¯èƒ½å¯«å¾—æ¯”è¼ƒç°¡å–®æ˜“æ‡‚ã€‚é›–ç„¶ ASP ç›®å‰å·²ç¶“ä¸å†æ˜¯å¸‚å ´ä¸»æµï¼Œä½†é‚„æ˜¯æˆ‘çš„æ‰‹é‚Šæœ‰å¾ˆå¤šå°ˆæ¡ˆæ²’æœ‰è¾¦æ³•å°å…¥æ¯”</description>
			<content type="html"><![CDATA[<p>é€™æ˜¯å¯«çµ¦å…¬å¸åŒäº‹çš„ä¸€ç³»åˆ— ASP (VBScript) ç‰©ä»¶è¨­è¨ˆæ‰‹æ³•æ–‡ç« ï¼Œæˆ‘ç›¡å¯èƒ½å¯«å¾—æ¯”è¼ƒç°¡å–®æ˜“æ‡‚ã€‚é›–ç„¶ ASP ç›®å‰å·²ç¶“ä¸å†æ˜¯å¸‚å ´ä¸»æµï¼Œä½†é‚„æ˜¯æˆ‘çš„æ‰‹é‚Šæœ‰å¾ˆå¤šå°ˆæ¡ˆæ²’æœ‰è¾¦æ³•å°å…¥æ¯”è¼ƒå…ˆé€²çš„æŠ€è¡“ (åƒ ASP.NET æˆ– JSP ç­‰) ã€‚æ‰€ä»¥ç­è§£å¦‚ä½•ç”¨ ASP çš„ç‰©ä»¶è¨­è¨ˆæ‰‹æ³•ä¾†è§£æ±ºå•é¡Œï¼Œæ˜¯é€™ç³»åˆ—æ–‡ç« ä¸»è¦çš„ç›®çš„ã€‚</p>
<p>åœ¨ç¹¼çºŒä¸‹å»ä¹‹å‰ï¼Œé¦–å…ˆå…ˆé‡æ¸…ä¸€å€‹è§€å¿µï¼Œç‰©ä»¶å°å‘æ˜¯ä¸€ç¨®æ€ç¶­ï¼Œè€Œéåƒ…æ˜¯èªè¨€çš„ç‰¹æ€§ã€‚ç•¶ç„¶ï¼Œæˆ‘ä¹Ÿä¸æƒ³å»ä»”ç´°æ¢è¨ ASP (VBScript) æ˜¯ä¸æ˜¯ç‰©ä»¶å°å‘èªè¨€ã€‚æˆ‘å·²ç¶“ç”¨é€™ç¨®æ–¹å¼å¯«äº†ä¸€äº›å°ˆæ¡ˆï¼ŒåŸ·è¡Œæˆæœä¹Ÿé‚„ä¸éŒ¯ã€‚å°æ–¼é‚£äº›æœ‰ç–‘å•çš„æœ‹å‹ï¼Œæˆ‘é‚„èƒ½å¤ æ‹¿å‡ºä¸€é»ä¸ç®—å¤ªé›£çœ‹çš„æˆæœä¾›ä»–å€‘åƒè€ƒã€‚</p>
<p>ç¶“éäº†ä¸€äº›è¨è«–èˆ‡æ€è€ƒï¼Œæˆ‘æ±ºå®šæŠŠé€™ç³»åˆ—æ–‡ç« æ›´åç‚ºã€ŒASP ç‰©ä»¶è¨­è¨ˆæ‰‹æ³•ã€ã€‚</p>
<p>å°æ–¼ç‰©ä»¶å°å‘æˆ‘ä¸æ˜¯é«˜æ‰‹ï¼Œæˆ‘ä¹Ÿé‚„åœ¨ç ”ç©¶ç•¶ä¸­ã€‚æˆ‘åªæ˜¯å¸Œæœ›é€éé€™æ¨£çš„èªªæ˜ï¼Œè®“æˆ‘èº«é‚Šçš„ä¼™ä¼´èƒ½å¤ æ¸…æ¥šæˆ‘çš„æƒ³æ³• (èˆ‡å¯«æ³•) è€Œå·²ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="class-èªæ³•">Class èªæ³•</h2>
<p>ASP (VBScript) æä¾›äº†ä¸€å€‹ Class æ•˜è¿°è®“æˆ‘å€‘å»ºç«‹ä¸€å€‹ç‰©ä»¶é¡åˆ¥ï¼š</p>
<pre><code>&lt;%
Class ClassName
    ' ç‰©ä»¶åˆå§‹åŒ–
    Private Sub Class_Initialize()
    End Sub
    ' ç‰©ä»¶çµæŸ
    Private Sub Class_Terminate()
    End Sub
End Class
%&gt;

</code></pre><p>å…¶ä¸­ ClassName æ˜¯é¡åˆ¥åç¨±ï¼Œè€Œ Class_Initialize() åŠ Class_Terminate() å…©å€‹ç§æœ‰å‡½å¼æ˜¯ VBScript çš„ç‰¹æ®Šå‡½å¼ï¼Œå®ƒå€‘åˆ†åˆ¥æœƒåœ¨ç‰©ä»¶è¢«èµ·å§‹åŒ–åŠç‰©ä»¶çµæŸæ™‚å‘¼å« (ä¹Ÿå°±æ˜¯ Event ) ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>&lt;%
' åˆå§‹åŒ–ä¸€å€‹ oTest ç‰©ä»¶ï¼Œä¸¦å‘¼å« ClassName é¡åˆ¥çš„ Class_Initialize æ–¹æ³•
Dim oTest : Set oTest = New ClassName
' å‘¼å« Class_Terminate
Set oTest = Nothing
%&gt;

</code></pre><p>é€™è£¡æœ‰ä¸€äº›è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p>
<ul>
<li>ä¸èƒ½é‡è¤‡å®£å‘Š Class ã€‚ä¸€èˆ¬ ASP ç¨‹å¼å¯ä»¥é‡è¤‡ include å¤šæ¬¡ Function ï¼Œä½†æ˜¯ Class ä¸è¡Œï¼›è€Œä¸” Class è£¡é¢ä¹Ÿä¸èƒ½é‡è¤‡å®£å‘Š Function ã€‚</li>
<li>é€™äº›é¡åˆ¥æ‰€ç”¢ç”Ÿå‡ºä¾†çš„ç‰©ä»¶å…§å®¹ä¸èƒ½å­˜åˆ° Application æˆ– Session è®Šæ•¸ä¸­ï¼Œåªæœ‰åˆ©ç”¨ Server.CreateObject æ–¹æ³•æ‰€å»ºç«‹çš„ç‰©ä»¶æ‰å¯ä»¥ã€‚</li>
<li>åœ¨åŸ·è¡Œ New æ•˜è¿°æ™‚ï¼Œæˆ‘å€‘ä¸¦æ²’æœ‰æ²’è¾¦æ³•å‚³éåƒæ•¸çµ¦å»ºæ§‹å‡½å¼ï¼Œä¹Ÿå°±æ˜¯èªª Set oTest = New ClassName(&ldquo;xxx&rdquo;) é€™æ¨£çš„æ•˜è¿°æ˜¯éŒ¯çš„ã€‚</li>
<li>ç•¶ ASP ç¨‹å¼çµæŸæ™‚ï¼Œä¸¦ä¸ä¸€å®šæœƒè‡ªå‹•å‘¼å« Class_Terminate å‡½å¼ã€‚æˆ‘å€‘å¯ä»¥æ‰‹å‹•ä»¥ Set oTest = Nothing çš„æ–¹å¼ä¾†è®“ç‰©ä»¶æ¶ˆå¤±å‰ï¼Œèƒ½ç¢ºå¯¦åŸ·è¡Œ Class_Terminate æ–¹æ³•ã€‚</li>
<li>å°±åƒ VBScript çš„ Function ä¸­å¯ä»¥å­˜å–å…¨åŸŸè®Šæ•¸ä¸€æ¨£ï¼ŒClass è£¡ä¹ŸåŒæ¨£ä¹Ÿèƒ½å¤ ç›´æ¥å–å¾—å…¨åŸŸè®Šæ•¸ã€‚</li>
<li>ASP (VBScript) æ˜¯ç”¨ Pass By Reference çš„æ–¹å¼ä¾†å‚³éç‰©ä»¶ã€‚</li>
<li>VBScript çš„ Class å­˜å–ç­‰ç´šåªæœ‰å…©ç¨®ï¼š Public åŠ Private ã€‚</li>
</ul>
<!-- raw HTML omitted -->
<h2 id="é è¨­å‡½å¼">é è¨­å‡½å¼</h2>
<p>é è¨­å‡½å¼æ˜¯æŒ‡ä¸éœ€è¦ç‰¹åˆ¥æŒ‡å®šå‡½å¼çš„åç¨±ï¼Œç›´æ¥ä½¿ç”¨ç‰©ä»¶è®Šæ•¸åç¨±ä¾†å‘¼å«ç‰©ä»¶ä¸­çš„æŸå€‹å‡½å¼ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>Dim oTest : Set oTest = New Test
' å‘¼å« Sub
Call oTest(&quot;Test&quot;)
' æˆ–æ˜¯å–å¾— Function å›å‚³å€¼
Dim sTemp = oTest(&quot;Test&quot;)

</code></pre><p>æˆ‘å€‘å¯ä»¥ç”¨ä»¥ä¸‹èªæ³•ä¾†å»ºç«‹ä¸€å€‹é è¨­çš„å‡½å¼ï¼š</p>
<pre><code>Class Test
    ' ç‰©ä»¶åˆå§‹åŒ–
    Public Defalut Sub|Function MethodName() ' æ³¨æ„ Default
    ' Do Something
    End Sub|Function
End Class

</code></pre><p>ä¹Ÿå°±æ˜¯åœ¨ä¸€èˆ¬å‡½å¼çš„ Sub æˆ– Function å‰ï¼ŒåŠ ä¸Šä¸€å€‹ Default é—œéµå­—ã€‚ç‰¹åˆ¥è¦æ³¨æ„çš„æ˜¯ï¼Œé è¨­å‡½å¼å¿…é ˆæ˜¯ Public çš„å­˜å–ç­‰ç´šã€‚</p>
<p>é€™ç¨®æ–¹å¼éå¸¸å¥½ç”¨ï¼Œå°¤å…¶æ˜¯ç•¶æˆ‘å€‘æƒ³è·Ÿä¸€äº› ASP å…§å»ºç‰©ä»¶åšæ•´åˆæ™‚å¯ä»¥ç”¨åˆ°ã€‚</p>
<h2 id="ç¹¼æ‰¿">ç¹¼æ‰¿ï¼Ÿ</h2>
<p>ASP (VBScript) æ²’æœ‰ç¹¼æ‰¿èªæ³•ï¼Œä¸éå¯ä»¥ç”¨å…¶ä»–æ–¹å¼ä¾†é”æˆã€‚ç•¶ç„¶ï¼Œæ²’æœ‰ç¹¼æ‰¿èªæ³•çš„å”åŠ©ï¼Œå¯«ä¸€äº›ç¨‹å¼æ™‚æœƒæ¯”è¼ƒç´¯ä¸€é»ã€‚</p>
<p>ç¬¬ä¸€ç¨®æ–¹å¼æ˜¯ä½¿ç”¨ SSI çš„ include æŒ‡ä»¤ï¼Œé€™ç¨®æ–¹å¼æˆ‘ç¨±ç‚ºã€Œå‡ç¹¼æ‰¿ã€ï¼Œå› ç‚ºå¯¦éš›ä¸Šæ ¹æœ¬å°±æ²’æœ‰ç¹¼æ‰¿ä»»ä½• Class ï¼Œæˆ‘åªæ˜¯æŠŠå…±ç”¨çš„è®Šæ•¸æˆ–å‡½å¼å¯«åœ¨ä¸€å€‹ ASP æª”ä¸­ã€‚</p>
<pre><code>ClassA.asp
&lt;%
' Class ClassA å¯¦éš›ä¸Šæ˜¯æ²’æœ‰é€™å€‹é¡åˆ¥çš„
    ' ç‰©ä»¶å±¬æ€§
    Private Fields
    ' ç‰©ä»¶åˆå§‹åŒ–
    Private Sub Class_Initialize()
    Set Fields = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
    End Sub
    ' ç‰©ä»¶çµæŸ
    Private Sub Class_Terminate()
    Set Fields = Nothing
    End Sub
' End Class
%&gt;

</code></pre><pre><code>ClassB.asp
&lt;%
Class ClassB
    ' å‡ç¹¼æ‰¿ ClassA
    %&gt;&lt;!-- #include file=&quot;ClassA.asp&quot; --&gt;&lt;%
    ' éå…±ç”¨å‡½å¼
    Public Function OtherMethod()
    ' ... ç•¥ ...
    End Function
End Class
%&gt;

</code></pre><p>å› ç‚ºç„¡æ³•åœ¨ Class é‡è¤‡å®£å‘Š Function ï¼Œæ‰€ä»¥é€™ç¨®æ–¹å¼çš„ç¼ºé»å°±æ˜¯åªè¦å‡½å¼å¯¦ä½œæ–¹å¼æœ‰äº›è¨±ä¸åŒï¼Œå°±ä¸èƒ½å¯«åˆ°å…±ç”¨çš„ ClassA ä¸­ã€‚</p>
<p>ç¬¬äºŒç¨®å‰‡æ˜¯æ¡ç”¨<!-- raw HTML omitted -->è£é£¾è€…æ¨¡å¼ (Decorator Pattern)<!-- raw HTML omitted --> ï¼ŒåŸºæœ¬ä¸Šé€™æ˜¯ç”¨<!-- raw HTML omitted -->å§”æ´¾ (delegate)<!-- raw HTML omitted --> å–ä»£ç¹¼æ‰¿ã€‚</p>
<pre><code>ClassA.asp
&lt;%
Class ClassA
    ' ç‰©ä»¶å±¬æ€§
    Public Fields
    ' ç‰©ä»¶åˆå§‹åŒ–
    Private Sub Class_Initialize()
    Set Fields = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
    End Sub
    ' ç‰©ä»¶çµæŸ
    Private Sub Class_Terminate()
    Set Fields = Nothing
    End Sub
    ' è¦ Override çš„å‡½å¼
    Public Function OverrideMethod()
    Fields.Add &quot;Key1&quot;, 123
    End Function
    ' å…¶ä»–å‡½å¼
    Public Function OtherMethod()
    ' ... ç•¥ ...
    End Function
End Class
%&gt;

</code></pre><pre><code>ClassB.asp
&lt;%
Class ClassB
    ' è¢«è¨—ä»˜è€…
    Private Parent
    ' ç‰©ä»¶åˆå§‹åŒ–
    Private Sub Class_Initialize()
        Set Parent = New ClassA
    End Sub
    ' ç‰©ä»¶çµæŸ
    Private Sub Class_Terminate()
        Set Parent = Nothing
    End Sub
    ' è¦ Override çš„å‡½å¼
    Public Function OverrideMethod()
        Parent.Fields.Add &quot;Key2&quot;, 456
    End Function
    ' å…¶ä»–å‡½å¼
    Public Function OtherMethod()
        Parent.OtherMethod
    End Function
End Class
%&gt;

</code></pre><p>é€™ç¨®æ–¹å¼çš„ç¼ºé»ï¼Œå°±æ˜¯è¦å°æ¯å€‹å‡½å¼éƒ½å§”æ´¾çµ¦è¢«è¨—ä»˜è€…å»å®Œæˆï¼›å¦‚æœè¢«è¨—ä»˜è€…çš„å‡½å¼éå¸¸å¤šï¼Œå°±æœƒå¤šå‡ºä¸€äº›é›è‚‹å‡ºä¾†ã€‚å¦å¤– ClassA å° ClassB å¿…é ˆæ˜¯é€æ˜çš„ (Public) ï¼Œä¹Ÿå°±æ˜¯èªªé™¤äº†Class_Initialize åŠ Class_Terminate å¤–ï¼Œ ClassB è¦èƒ½å¤ å–å¾— ClassA çš„æ‰€æœ‰å±¬æ€§åŠå‡½å¼ (æœ‰é»åƒ PHP çš„ protected ) ã€‚</p>
<p>ä¸éè¦è¨˜ä½ä¸€ä»¶äº‹ï¼Œä¸Šé¢çš„æ–¹å¼åªæ˜¯ç‚ºäº†é‡ç”¨ç¨‹å¼ç¢¼è€Œå·²ï¼Œä¸¦ä¸æ˜¯çœŸæ­£çš„ç¹¼æ‰¿ã€‚å¦‚æœé‡ç”¨çš„ç¨‹å¼ä¸æ˜¯å¾ˆè¤‡é›œçš„è©±ï¼Œé‚£éº¼æœ€å¥½é‚„æ˜¯çœ‹ç‹€æ³ä¾†æ±ºå®šè¦ä¸è¦ä½¿ç”¨ã€‚</p>
<h2 id="è¨­å®šæˆ–å–å¾—å±¬æ€§">è¨­å®šæˆ–å–å¾—å±¬æ€§</h2>
<p>é¡åˆ¥å±¬æ€§çš„éƒ¨ä»½ï¼Œæˆ‘å¾Œä¾†å¤§éƒ¨ä»½æœƒä½¿ç”¨ä¸€å€‹ç§æœ‰çš„ Dictionary ç‰©ä»¶ä¾†å„²å­˜ã€‚ Dictionary ç‰©ä»¶æœ‰é»åƒæ˜¯ PHP çš„ associative array ï¼Œåˆ©ç”¨å­—ä¸²ç´¢å¼•ä¾†å„²å­˜æ¯ä¸€å€‹å…ƒç´ ã€‚é€™éº¼åšçš„å¥½è™•å¯ä»¥è®“æˆ‘å€‘ç”¨å¾ˆç°¡å–®çš„æ–¹å¼ä¾†è¨­å®šç‰©ä»¶çš„å±¬æ€§ï¼š</p>
<pre><code>ClassC.asp
&lt;%
Class ClassC
    ' ç‰©ä»¶å±¬æ€§
    Private Fields
    ' ç‰©ä»¶åˆå§‹åŒ–
    Private Sub Class_Initialize()
        Set Fields = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
        Fields.Add &quot;Attr1&quot;, &quot;&quot;
        Fields.Add &quot;Attr2&quot;, 0
        Fields.Add &quot;Attr3&quot;, Array()
    End Sub
    ' ç‰©ä»¶çµæŸ
    Private Sub Class_Terminate()
        Set Fields = Nothing
    End Sub
    ' è¨­å®šæŒ‡å®šçš„å±¬æ€§
    Public Sub SetField(sName, vValue)
        If Fields.Exists(sName) Then
            If IsObject(vValue) Then
                Set Fields(sName) = vValue
            Else
                Fields(sName) = vValue
            End If
        End If
    End Sub
    ' å–å¾—æŒ‡å®šçš„å±¬æ€§
    Public Function GetField(sName)
        GetField = Null
        If Fields.Exists(sName) Then
            If IsObject(Fields(sName)) Then
                Set GetField = Fields(sName)
            Else
                GetField = Fields(sName)
            End If
        End If
    End Function
End Class
%&gt;

</code></pre><p>ç•¶ç„¶ï¼Œåœ¨ SetField å‡½å¼è£¡æœ‰æ™‚å€™æœƒéœ€è¦é©—è­‰æ ¼å¼ï¼Œä¸éé€šå¸¸æˆ‘æœƒå…ˆåˆ©ç”¨å…¶ä»–æ–¹å¼é©—è­‰å®Œç•¢å¾Œå†å­˜å…¥ï¼Œä»¥æ¸›è¼•é€™å€‹é¡åˆ¥çš„é‡é‡ã€‚</p>
<p>VBScript é‚„æœ‰æä¾›ä¸€å€‹ Property èªæ³•ä¾†è®“æˆ‘å€‘è¨­å®šæˆ–å–å¾—é¡åˆ¥å±¬æ€§ï¼Œä½†æˆ‘å¤§éƒ¨ä»½é‚„æ˜¯æœƒåˆ©ç”¨ä¸Šé¢çš„æ–¹å¼ä¾†è¨­å®šã€‚</p>
<h2 id="ä½¿ç”¨é¡åˆ¥">ä½¿ç”¨é¡åˆ¥</h2>
<p>é¡åˆ¥ä½¿ç”¨çš„æ–¹å¼å¾ˆç°¡å–®ï¼Œå°±æ˜¯å…ˆç”¨ New é—œéµå­—ä¾†ç”¢ç”Ÿä¸€å€‹ç‰©ä»¶å¯¦é«”ï¼š</p>
<pre><code>&lt;%
Dim oTempC : Set oTempC = New ClassC
oTempC.SetField &quot;Attr1&quot;, &quot;123&quot;
oTempC.SetField &quot;Attr2&quot;, 123
oTempC.SetField &quot;Attr3&quot;, Array(123, 456)
Set oTempC = Nothing
%&gt;

</code></pre><p>æˆ‘å€‘ä¹Ÿå¯ä»¥ç”¨ With èªæ³•ä¾†å­˜å–ï¼Œé€™æ¨£æœƒæ¯”è¼ƒå¿«ä¸€é»ã€‚ (JScript çš„ With å‰‡æ¯”è¼ƒæ…¢ã€‚)</p>
<pre><code>&lt;%
Dim oTempC : Set oTempC = New ClassC
With oTempC
    .SetField &quot;Attr1&quot;, &quot;123&quot;
    .SetField &quot;Attr2&quot;, 123
    .SetField &quot;Attr3&quot;, Array(123, 456)
End With
Set oTempC = Nothing
%&gt;

</code></pre><h2 id="é¡åˆ¥å‘½åæ–¹å¼">é¡åˆ¥å‘½åæ–¹å¼</h2>
<p>é¡åˆ¥çš„å‘½åæ–¹å¼ä¸¦æ²’æœ‰ç‰¹åˆ¥ä¹‹è™•ï¼Œå°±æ˜¯å¦‚åŒä¸€èˆ¬ ASP è®Šæ•¸å‘½åçš„è¦å‰‡ã€‚ä¸éé€™è£¡æˆ‘æœ‰ä¸€å€‹å»ºè­°ï¼Œå°±æ˜¯åˆ©ç”¨ PHP PEAR å‡½å¼åº«çš„å‘½åè¦å‰‡ä¾†æ­¸ç´æˆ‘å€‘çš„é¡åˆ¥ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>/inc/class/HTML/Template.asp
&lt;%
Class HTML_Template
    ' ... ç•¥ ...
End Class
%&gt;

</code></pre><pre><code>/inc/class/HTML/Form.asp
&lt;%
Class HTML_Form
    ' ... ç•¥ ...
End Class
%&gt;

</code></pre><pre><code>/inc/class/HTML/Cache.asp
&lt;%
Class HTML_Cache
    ' ... ç•¥ ...
End Class
%&gt;

</code></pre><p>åœ¨å¼•å…¥é¡åˆ¥æª”æ™‚ï¼Œæˆ‘æœƒåˆ©ç”¨ä¸€å€‹é¡ä¼¼ package çš„æª”æ¡ˆæŠŠæ‰€æœ‰ç›¸é—œçš„é¡åˆ¥ä¸€èµ· include ï¼š</p>
<pre><code>/inc/HTML.asp
&lt;!-- #include file=&quot;class/HTML/Template.asp&quot; --&gt;
&lt;!-- #include file=&quot;class/HTML/Form.asp&quot; --&gt;
&lt;!-- #include file=&quot;class/HTML/Cache.asp&quot; --&gt;

</code></pre><p>å› æ­¤å¼•ç”¨æ™‚ï¼Œå°±åªè¦å¼•å…¥ /inc/HTML.asp å³å¯ (æœ‰é»åƒ C# çš„ using æŒ‡ä»¤) ã€‚ ä¸éé‚„æ˜¯è¦çœ‹ç‹€æ³è€Œå®šï¼Œé€™æ¨£çš„æ–¹å¼ä¸ä¸€å®šæ¯”è¼ƒå¥½ã€‚</p>
<h2 id="ç›¸é—œæ–‡ç« ">ç›¸é—œæ–‡ç« </h2>
<ul>
<li><a href="http://www.jaceju.net/blog/archives/51/">ASP ç‰©ä»¶å°å‘ (1) - åŸºç¤</a></li>
<li><a href="http://www.jaceju.net/blog/archives/52/">ASP ç‰©ä»¶å°å‘ (2) - åˆç´šæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/54/">ASP ç‰©ä»¶å°å‘ (3) - é€²éšæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/57/">ASP ç‰©ä»¶å°å‘ (4) - å‹•æ…‹è¼‰å…¥é¡åˆ¥</a></li>
<li><a href="http://www.jaceju.net/blog/archives/59/">ASP ç‰©ä»¶å°å‘ (5) - Me é—œéµå­—</a></li>
<li><a href="http://www.jaceju.net/blog/archives/76/">ASP ç‰©ä»¶å°å‘ (6) - å–®å…ƒæ¸¬è©¦</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>ASP ç‰©ä»¶è¨­è¨ˆæ‰‹æ³• (2) - åˆç´šæŠ€å·§</title>
			<link>https://jaceju.net/classic-asp-oo-2/</link>
			<pubDate>Tue, 06 Dec 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/classic-asp-oo-2/</guid>
			<description>Design Patterns æ˜¯æˆ‘è¿‘ä¾†ç ”ç©¶çš„èª²é¡Œä¹‹ä¸€ï¼Œæˆ‘åœ¨å¾Œä¾†çš„ ASP å°ˆæ¡ˆè£¡ï¼Œç‚ºäº†è§£æ±ºä¸€äº›å•é¡Œè€Œå°å…¥äº†éƒ¨ä»½çš„ Design Patterns è§€å¿µã€‚æˆ–è¨±æœ‰äººæœƒèªç‚º ASP (VBScript) æ²’è¾¦æ³•ä½¿ç”¨æ­£çµ±çš„ Design Patterns ï¼Œä¸éæˆ‘æ³¨é‡çš„</description>
			<content type="html"><![CDATA[<p>Design Patterns æ˜¯æˆ‘è¿‘ä¾†ç ”ç©¶çš„èª²é¡Œä¹‹ä¸€ï¼Œæˆ‘åœ¨å¾Œä¾†çš„ ASP å°ˆæ¡ˆè£¡ï¼Œç‚ºäº†è§£æ±ºä¸€äº›å•é¡Œè€Œå°å…¥äº†éƒ¨ä»½çš„ Design Patterns è§€å¿µã€‚æˆ–è¨±æœ‰äººæœƒèªç‚º ASP (VBScript) æ²’è¾¦æ³•ä½¿ç”¨æ­£çµ±çš„ Design Patterns ï¼Œä¸éæˆ‘æ³¨é‡çš„æ˜¯ Design Patterns çš„è§€å¿µæ‰€å¸¶ä¾†çš„è§£é¡Œæ–¹å¼ï¼Œè€Œä¸æ˜¯ Design Patterns çš„å½¢ã€‚</p>
<p>ä»¥ä¸‹æˆ‘æœƒèªªæ˜ä¸€äº›æˆ‘å¸¸ç”¨çš„æŠ€å·§ï¼Œé€™äº›éƒ½æ˜¯å¾ Design Patterns ä¸­å¾—åˆ°çš„ä¸€äº›å•Ÿç™¼ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å·¥å» æ–¹æ³•">å·¥å» æ–¹æ³•</h2>
<p>å·¥å» æ–¹æ³•é€šå¸¸ç”¨æ–¼å»ºç«‹åœ¨æŠ½è±¡å±¤æ¬¡ä¸Šå±¬æ–¼åŒä¸€é¡çš„ç‰©ä»¶ï¼Œä¾‹å¦‚åŒæ¨£æ˜¯äº¤é€šå·¥å…·ï¼Œæˆ‘å€‘å¯èƒ½æœƒå»ºç«‹å·´å£«ã€ç«è»Šæˆ–é£›æ©Ÿå…¶ä¸­ä¸€ç¨®ã€‚ä¸€èˆ¬å¯ä»¥ç›´æ¥ç”¨ä¸€å€‹å‡½å¼ä¾†å–å¾—ç‰©ä»¶ï¼Œç•¶ç„¶å¦‚æœæƒ³ç”¨é¡åˆ¥ä¹Ÿå¯ä»¥ï¼Œä½†è¦çœ‹ç¨‹å¼è¤‡é›œåº¦è€Œå®š (å¦‚æœè©²é¡åˆ¥ä¸å–®ç´”åªæœ‰å·¥å» æ–¹æ³•) ï¼š</p>
<pre><code>/inc/VehicleFactory.asp
&lt;%
Function VehicleFactory(sType)
    Dim oVehicle
    Set VehicleFactory = Nothing
    On Error Resume Next
    Execute &quot;Set oVehicle = New Vehicle_&quot; &amp;amp; sType
    Set VehicleFactory = oVehicle
    On Error Goto 0
End Function
%&gt;

</code></pre><p>æˆ‘å€‘å…ˆå°‡è¦å‚³å›çš„ç‰©ä»¶è¨­ç‚º Nothing ç‰©ä»¶ï¼Œç„¶å¾Œåˆ©ç”¨ On Error Resume Next ä¾†å•Ÿç”¨éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ã€‚å¦‚æœç•¶æƒ³è¦å»ºç«‹çš„ç‰©ä»¶ä¸å­˜åœ¨æ™‚ï¼Œæˆ‘å€‘å°±å¯ä»¥åˆ©ç”¨éŒ¯èª¤è™•ç†æ©Ÿåˆ¶è®“å‚³å›çš„ç‰©ä»¶æœƒä¾ç„¶ä¿æŒç‚º Nothing ç‰©ä»¶ã€‚</p>
<p>ç”¨æ³•éå¸¸ç°¡å–®ï¼š</p>
<pre><code>&lt;!-- #include virtual=&quot;/inc/Vehicle.asp&quot; --&gt;
&lt;!-- #include virtual=&quot;/inc/VehicleFactory.asp&quot; --&gt;
&lt;%
Set oVehicle = VehicleFactory(&quot;Bus&quot;)
If Not oVehicle Is Nothing Then
    ' ... ç•¥ ...
End If
%&gt;

</code></pre><p>å·¥å» æ–¹æ³•å…¶å¯¦é‚„æ»¿å¸¸ç”¨çš„ï¼Œåƒæ˜¯åˆ©ç”¨ ADODB.Connection ä¾†å»ºç«‹è³‡æ–™åº«é€£ç·š (å¯èƒ½é€£åˆ° Access æˆ– MSSQL) ï¼Œé€™ä¹Ÿç®—æ˜¯å·¥å» æ–¹æ³•çš„ä¸€ç¨®è®Šå½¢ã€‚å¦å¤– Server ç‰©ä»¶çš„ CreateObject æ–¹æ³•ä¹Ÿæ˜¯ç¶“å…¸çš„å·¥å» æ–¹æ³•ä¹‹ä¸€ã€‚</p>
<h2 id="è¤‡è£½ç‰©ä»¶">è¤‡è£½ç‰©ä»¶</h2>
<p>è¤‡è£½ç‰©ä»¶æ˜¯è®“ä¸€å€‹ç‰©ä»¶æœ‰åˆ†èº«çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯ Prototype Pattern ã€‚å¦‚æœå–®ç´”åªç”¨ Set æŒ‡ä»¤ï¼Œä¸¦æ²’æœ‰è¾¦æ³•è®“ç‰©ä»¶è®Šæˆå…©å€‹ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>&lt;%
Class ClassA
    Private Number
    Public Sub SetNumber(vValue)
        Number = vValue
    End Sub
    Public Function GetNumber
        GetNumber = Number
    End Function
End Class
Dim oA, oB
Set oA = New ClassA
oA.SetNumber 1
Set oB = oA
oB.SetNumber 2
Response.Write oA.GetNumber &amp;amp; vbCrLf ' é¡¯ç¤º 2
Response.Write oB.GetNumber &amp;amp; vbCrLf ' é¡¯ç¤º 2
%&gt;

</code></pre><p>é€™æ¨£åªæ˜¯è®“ oB è®Šæˆ oA ç‰©ä»¶çš„åˆ¥åï¼Œä¸€æ—¦ oB ç‰©ä»¶æ”¹è®Šå±¬æ€§ï¼Œ oA ç‰©ä»¶ä¹Ÿæœƒè·Ÿè‘—æ”¹è®Šã€‚</p>
<p>é‚£å¦‚ä½•è®“ oA å’Œ oB åˆ†åˆ¥æˆç‚ºä¸åŒçš„å€‹é«”å‘¢ï¼Ÿæˆ‘ç¿’æ…£ä½¿ç”¨ä»¥ä¸‹çš„æ–¹å¼ï¼š</p>
<pre><code>ClassD.asp
&lt;%
Class ClassD
    ' ç‰©ä»¶å±¬æ€§
    Private Fields
    ' ç‰©ä»¶åˆå§‹åŒ–
    Private Sub Class_Initialize()
        Set Fields = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
        Fields.Add &quot;Attr1&quot;, &quot;&quot;
        Fields.Add &quot;Attr2&quot;, 0
        Fields.Add &quot;Attr3&quot;, Array()
    End Sub
    ' ç‰©ä»¶çµæŸ
    Private Sub Class_Terminate()
        Set Fields = Nothing
    End Sub
    ' è¨­å®šæŒ‡å®šçš„å±¬æ€§
    Public Sub SetField(sName, vValue)
        If Fields.Exists(sName) Then
            If IsObject(vValue) Then
                Set Fields(sName) = vValue
            Else
                Fields(sName) = vValue
            End If
        End If
    End Sub
    ' å–å¾—æŒ‡å®šçš„å±¬æ€§
    Public Function GetField(sName)
        GetField = Null
        If Fields.Exists(sName) Then
            If IsObject(Fields(sName)) Then
                Set GetField = Fields(sName)
            Else
                GetField = Fields(sName)
            End If
        End If
    End Function
    ' è¨­å®šåˆ†èº«çš„å±¬æ€§
    Public Sub CloneFields(oFields)
        Dim sKey
        For Each sKey In oFields
            If IsObject(oFields(sKey)) Then
                Set Fields(sKey) = oFields(sKey) // æ³¨æ„é€™è£¡
            Else
                Fields(sKey) = oFields(sKey) // æ³¨æ„é€™è£¡
            End If
        Next
    End Sub
    ' å–å¾—åˆ†èº«
    Public Function Clone()
        Dim oTempD
        Set oTempD = New ClassD
        oTempD.CloneFields Fields
        Set Clone = oTempD
    End Function
End Class
Dim oD1, oD2
Set oD1 = New ClassD
oD1.SetField &quot;Attr1&quot;, &quot;123&quot;
oD1.SetField &quot;Attr2&quot;, 123
oD1.SetField &quot;Attr3&quot;, Array(123, 456)
Set oD2 = oD1.Clone
oD1.SetField &quot;Attr1&quot;, &quot;456&quot;
Response.Write oD1.GetField(&quot;Attr1&quot;) &amp;amp; vbCrLf ' é¡¯ç¤º 123
Response.Write oD1.GetField(&quot;Attr2&quot;) &amp;amp; vbCrLf ' é¡¯ç¤º 123
Response.Write oD2.GetField(&quot;Attr1&quot;) &amp;amp; vbCrLf ' é¡¯ç¤º 456
Response.Write oD2.GetField(&quot;Attr2&quot;) &amp;amp; vbCrLf ' é¡¯ç¤º 123
%&gt;

</code></pre><p>åœ¨ Clone å‡½å¼ä¸­ï¼Œæˆ‘è®“ç‰©ä»¶è‡ªå·±ç”¢ç”Ÿè‡ªå·±ï¼Œç„¶å¾Œåˆ©ç”¨ CloneFields æŠŠç¾åœ¨ç‰©ä»¶çš„å±¬æ€§å€¼è¤‡è£½ä¸€ä»½åˆ°æ–°çš„ç‰©ä»¶ä¸Šï¼Œé€™ä¹Ÿå°±æ˜¯æˆ‘ç‚ºä»€éº¼è¦ç”¨ Dictionary ç‰©ä»¶ä¾†å­˜æ”¾ç‰©ä»¶å±¬æ€§å€¼çš„åŸå› ã€‚</p>
<h2 id="dictionary-ç‰©ä»¶">Dictionary ç‰©ä»¶</h2>
<p>Dictionary ç‰©ä»¶å¯ä»¥åƒè€ƒå¾®è»Ÿçš„ <a href="http://msdn.microsoft.com/library/en-us/script56/html/b4a7ddb3-2474-49ef-8540-8d67a747c8db.asp">MSDN</a> ï¼Œé€™è£¡æˆ‘åƒ…ç°¡å–®èªªæ˜ä¸€ä¸‹å®ƒçš„å­˜å–æ–¹å¼ã€‚æˆ‘å¸¸ç”¨çš„ Dictionary å­˜å–æ–¹å¼æœ‰å…©ç¨®ï¼šç¬¬ä¸€ç¨®æ˜¯ç•¶ä½ ä¸æƒ³é€éç´¢å¼•å€¼ä¾†è™•ç†æ¯ä¸€å€‹é …ç›®ï¼š</p>
<pre><code>&lt;%
Set oTempDic = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
oTempDic.Add oTempDic.Count &quot;1&quot;
oTempDic.Add oTempDic.Count &quot;2&quot;
oTempDic.Add oTempDic.Count &quot;3&quot;
oTempDic.Add oTempDic.Count &quot;4&quot;
oTempDic.Add oTempDic.Count &quot;5&quot;
Dim oItem
For Each oItem In oTempDic.Items
    Response.Write oItem &amp;amp; vbCrLf
Next
%&gt;

</code></pre><p>ç¬¬äºŒç¨®æ–¹å¼å‰‡æ˜¯å¦‚æœä½ éœ€è¦ç´¢å¼•å€¼æ™‚ï¼š</p>
<pre><code>&lt;%
Set oTempDic = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
oTempDic.Add oTempDic.Count &quot;1&quot;
oTempDic.Add oTempDic.Count &quot;2&quot;
oTempDic.Add oTempDic.Count &quot;3&quot;
oTempDic.Add oTempDic.Count &quot;4&quot;
oTempDic.Add oTempDic.Count &quot;5&quot;
Dim oItem
Dim sKey
For Each sKey In oTempDic
    Set oItem = oTempDic(sKey) // æ³¨æ„é€™è£¡
    Response.Write sKey &amp;amp; &quot; =&gt; &quot; &amp;amp; oItem &amp;amp; vbCrLf
Next
%&gt;

</code></pre><p>Dictionary ç‰©ä»¶éå¸¸æœ‰ç”¨ï¼Œæˆ‘å¸¸ç”¨å®ƒä¾†å­˜æ”¾ç‰©ä»¶å±¬æ€§ã€‚è€Œä¸”å®ƒèƒ½å¤ å­˜æ”¾åˆ° Session ç•¶ä¸­ï¼Œå› æ­¤å¾Œé¢æœ‰å¾ˆå¤šæœ‰ç”¨çš„æŠ€å·§éƒ½æœƒä¾è³´å®ƒä¾†å¯¦ç¾ã€‚</p>
<h2 id="è¨»å†Šæ©Ÿåˆ¶">è¨»å†Šæ©Ÿåˆ¶</h2>
<p>è¨»å†Šæ©Ÿåˆ¶æ˜¯ä¸€å€‹å¾ˆæœ‰è¶£çš„æ–¹å¼ï¼Œæˆ‘å¸¸ç”¨å®ƒä¾†åšä¸€äº›åŒé¡å‹è³‡æ–™æˆ–æ˜¯å‹•ä½œä¸Šçš„è™•ç†ï¼›ä¾‹å¦‚ç”¢ç”Ÿä¸‹æ‹‰å¼é¸å–®ï¼Œæˆ–æ˜¯è¡¨å–®å®Œæˆå¾Œä¸€é€£ä¸²çš„è¡¨æ ¼æ›´æ–°ã€‚å¸¸è¦‹çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;%
Class ClassE
    ' ç‰©ä»¶å±¬æ€§
    Private Items
    ' ç‰©ä»¶åˆå§‹åŒ–
    Private Sub Class_Initialize()
        Set Items = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
    End Sub
    ' è¨»å†Šé …ç›®
    Public Sub Register(vItem)
        Items.Add Items.Count, vItem
    End Sub
    ' ä¾åºè™•ç†æ¯å€‹é …ç›®
    Public Function DoSomething()
        Dim vItem
        For Each vItem In Items.Items
            Response.Write vItem &amp;amp; vbCrLf
        Next
    End Function
    ' ç‰©ä»¶çµæŸ
    Private Sub Class_Terminate()
        Set Items = Nothing
    End Sub
End Class
Dim oE : Set oE = New ClassE
With oE
    .Register &quot;123&quot;
    .Register &quot;456&quot;
    .Register &quot;789&quot;
    .DoSomething
End With
%&gt;

</code></pre><p>vItem å¦‚æœæ˜¯åŒé¡å‹çš„ç‰©ä»¶ï¼Œå…¶å¯¦å°±å’Œ Observer Pattern å¾ˆåƒã€‚æˆ‘æ›¾ç”¨é€™ç¨®æ–¹å¼ä¾†æ›´æ–°ä¸€é€£ä¸²çš„è¡¨æ ¼ï¼Œä¹Ÿå°±æ˜¯è®“æ¯å€‹ vItem æˆç‚ºä¸€å€‹åŸ·è¡Œ SQL æŒ‡ä»¤çš„ç‰©ä»¶ï¼Œåœ¨æ¥åˆ°è¦æ›´æ–°çš„è³‡æ–™å¾Œï¼Œè®“æ¯å€‹ vItem è² è²¬è‡ªå·±æ‰€è¦å„²å­˜çš„è¡¨æ ¼ã€‚</p>
<h2 id="ç›¸é—œæ–‡ç« ">ç›¸é—œæ–‡ç« </h2>
<ul>
<li><a href="http://www.jaceju.net/blog/archives/51/">ASP ç‰©ä»¶å°å‘ (1) - åŸºç¤</a></li>
<li><a href="http://www.jaceju.net/blog/archives/52/">ASP ç‰©ä»¶å°å‘ (2) - åˆç´šæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/54/">ASP ç‰©ä»¶å°å‘ (3) - é€²éšæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/57/">ASP ç‰©ä»¶å°å‘ (4) - å‹•æ…‹è¼‰å…¥é¡åˆ¥</a></li>
<li><a href="http://www.jaceju.net/blog/archives/59/">ASP ç‰©ä»¶å°å‘ (5) - Me é—œéµå­—</a></li>
<li><a href="http://www.jaceju.net/blog/archives/76/">ASP ç‰©ä»¶å°å‘ (6) - å–®å…ƒæ¸¬è©¦</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>ASP ç‰©ä»¶è¨­è¨ˆæ‰‹æ³• (3) - é€²éšæŠ€å·§</title>
			<link>https://jaceju.net/classic-asp-oo-3/</link>
			<pubDate>Tue, 06 Dec 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/classic-asp-oo-3/</guid>
			<description>æ¥ä¸‹ä¾†çš„æŠ€å·§æœƒæ¯”è¼ƒè¤‡é›œä¸€é»ï¼Œä¸éå¦‚æœèƒ½å¤ å–„ç”¨çš„è©±ï¼Œå°±æœƒæ˜¯ä¸€é …å¾ˆå¥½ç”¨çš„æ­¦å™¨ã€‚æˆ‘åœ¨è¼ƒå¤§å‹çš„å°ˆæ¡ˆè£¡ç”¨éé€™æ¨£çš„æ–¹å¼ï¼Œå®ƒæä¾›äº†æˆ‘åœ¨é–‹ç™¼ç¨‹å¼ä¸ä¸€æ¨£çš„è§’åº¦</description>
			<content type="html"><![CDATA[<p>æ¥ä¸‹ä¾†çš„æŠ€å·§æœƒæ¯”è¼ƒè¤‡é›œä¸€é»ï¼Œä¸éå¦‚æœèƒ½å¤ å–„ç”¨çš„è©±ï¼Œå°±æœƒæ˜¯ä¸€é …å¾ˆå¥½ç”¨çš„æ­¦å™¨ã€‚æˆ‘åœ¨è¼ƒå¤§å‹çš„å°ˆæ¡ˆè£¡ç”¨éé€™æ¨£çš„æ–¹å¼ï¼Œå®ƒæä¾›äº†æˆ‘åœ¨é–‹ç™¼ç¨‹å¼ä¸ä¸€æ¨£çš„è§’åº¦ã€‚è‡³å°‘æˆ‘ä¸å¿…å†å¯«ä¸€äº›è¤‡é›œçš„åˆ¤æ–·å¼ï¼Œæ¸›å°‘éŒ¯èª¤çš„ç™¼ç”Ÿã€‚ç•¶ç„¶éŒ¯èª¤é‚„æ˜¯æœƒæœ‰ï¼Œä½†é€™æ˜¯å€‹äººæ€è€ƒé‚è¼¯çš„å•é¡Œï¼Œå’Œç‰©ä»¶å°å‘é–‹ç™¼æ–¹å¼é—œä¿‚ä¸å¤§ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="é›†åˆé«”">é›†åˆé«”</h2>
<p>è¨­è¨ˆè³¼ç‰©è»Šæ™‚ï¼Œæˆ‘å¸¸ç”¨é›†åˆé«”çš„æ–¹å¼ä¾†å®Œæˆã€‚ä¸€å€‹è³¼ç‰©è»ŠåŸºæœ¬å‹å¦‚ä¸‹ï¼š</p>
<pre><code class="language-aspx-vb" data-lang="aspx-vb">&lt;%
' è³¼ç‰©è»Š
Class Shopping_Cart
    Private List

    Private Fields

    ' ç‰©ä»¶åˆå§‹åŒ–
    Private Sub Class_Initialize()
        Set List = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
        Set Fields = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
        Fields.Add &quot;Amount&quot;, 0
    End Sub

    ' åŠ å…¥å•†å“
    Public Sub AddProduct(oProduct)
        List.Add List.Count, oProduct
    End Sub

    ' æ›´æ–°è³¼ç‰©è»Š
    Public Sub Update()
        Dim oProduct
        Fields(&quot;Amount&quot;) = 0
        For Each oProduct In List.Items
            oProduct.Refresh
            Fields(&quot;Amount&quot;) = Fields(&quot;Amount&quot;) + oProduct.GetField(&quot;SubTotal&quot;)
        Next
    End Sub

    ' å–å¾—ç¸½é‡‘é¡
    Public Function GetAmount()
        GetAmount = Fields(&quot;Amount&quot;)
    End Function

    ' ç‰©ä»¶çµæŸ
    Private Sub Class_Terminate()
        Set List = Nothing
        Set Fields = Nothing
    End Sub
End Class
%&gt;

</code></pre><p>æˆ‘åˆ©ç”¨äº† Dictionary ç‰©ä»¶ä¾†å¹«æˆ‘ç¶­è­·æ¯é …å•†å“ç‰©ä»¶ï¼Œä¹Ÿç”¨åˆ°äº†è¨»å†Šæ©Ÿåˆ¶ã€‚é›†åˆé«”çš„é¡å‹é‚„æœ‰å¾ˆå¤šç¨®ï¼Œä»¥ä¸Šæ˜¯è¼ƒåŸºæœ¬çš„æ“ä½œæ–¹å¼ã€‚</p>
<p>å•†å“çš„éƒ¨ä»½å¾ˆç°¡å–®ï¼Œå°±æ˜¯åŸºæœ¬çš„è¨­å®šå±¬æ€§åŠå–å¾—å±¬æ€§ã€‚ç‚ºäº†æ–¹ä¾¿èªªæ˜ï¼Œæˆ‘æ²’æœ‰æŠŠå•†å“åç¨±æˆ–å…¶ä»–å•†å“å±¬æ€§æ”¾é€²å»ã€‚</p>
<pre><code class="language-aspx-vb" data-lang="aspx-vb">&lt;%
' å•†å“
Class Shopping_Product
    Private Fields

    Private Sub Class_Initialize()
        Set Fields = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
        Fields.Add &quot;Price&quot;, 0
        Fields.Add &quot;Quantity&quot;, 0
        Fields.Add &quot;SubTotal&quot;, 0
    End Sub

    Private Sub Class_Terminate()
        Set Fields = Nothing
    End Sub

    Public Sub SetField(sName, vValue)
        If Fields.Exists(sName) Then
            Fields(sName) = vValue
        End If
    End Sub

    Public Function GetField(sName)
        GetField = Null
        If Fields.Exists(sName) Then
            GetField = Fields(sName)
        End If
    End Function

    Public Sub Refresh()
        Fields(&quot;SubTotal&quot;) = Fields(&quot;Price&quot;) * Fields(&quot;Quantity&quot;)
    End Sub
End Class
%&gt;

</code></pre><p>ä»¥ä¸‹æ˜¯ä¸€å€‹ç°¡å–®çš„æ¸¬è©¦ï¼š</p>
<pre><code>&lt;!-- #include virtual=&quot;/inc/class/Shopping/Cart.asp&quot; --&gt;
&lt;!-- #include virtual=&quot;/inc/class/Shopping/Product.asp&quot; --&gt;
&lt;%
Dim oCart : Set oCart = New Shopping_Cart
Dim oP1 : Set oP1 = New Shopping_Product
Dim oP2 : Set oP2 = New Shopping_Product
Dim oP3 : Set oP3 = New Shopping_Product
oP1.SetField &quot;Price&quot;, 100
oP1.SetField &quot;Quantity&quot;, 1
oP2.SetField &quot;Price&quot;, 120
oP2.SetField &quot;Quantity&quot;, 2
oP3.SetField &quot;Price&quot;, 150
oP3.SetField &quot;Quantity&quot;, 1
oCart.AddProduct oP1
oCart.AddProduct oP2
oCart.AddProduct oP3
oCart.Update
Response.Write oCart.GetAmount
%&gt;

</code></pre><h2 id="åºåˆ—åŒ–åŠååºåˆ—åŒ–">åºåˆ—åŒ–åŠååºåˆ—åŒ–</h2>
<p>é€™è£¡èªªçš„åºåˆ—åŒ–å…¶å¯¦ä¸æ˜¯çœŸçš„åºåˆ—åŒ–ï¼Œåªæ˜¯æˆ‘æ‰¾ä¸åˆ°å¥½çš„åè©ä¾†èªªæ˜ã€‚ä¹‹å‰æéåˆ©ç”¨ Class é—œéµå­—æ‰€ç”¢ç”Ÿå‡ºä¾†çš„ç‰©ä»¶æ˜¯ä¸èƒ½å­˜åœ¨ Session ä¸­çš„ï¼Œå› æ­¤æˆ‘æœƒåˆ©ç”¨ Dictionary é€™ç¨®ç”¨ Server.CreateObject æ‰€ç”¢ç”Ÿå‡ºä¾†çš„ç‰©ä»¶ä¾†å­˜æ”¾ç‰©ä»¶è³‡è¨Šã€‚</p>
<p>ä»¥ä¸Šé¢çš„è³¼ç‰©è»Šç‚ºä¾‹ï¼Œå¦‚æœæˆ‘æƒ³è¦æŠŠå•†å“è³‡æ–™å­˜å…¥ Session ï¼Œä¸èƒ½æŠŠ Cart ç›´æ¥å­˜å…¥ Session ä¸­ï¼Œé€™æ¨£æœƒä½¿å¾—æ”¾åœ¨ List å±¬æ€§ä¸­çš„å•†å“è³‡è¨Šæ¶ˆå¤±ï¼›é€™æ™‚å€™å°±è¦æ”¹ç”¨ Dictionary ç‰©ä»¶ä¾†å„²å­˜ã€‚</p>
<p>å•†å“çš„åºåˆ—åŒ–å‹•ä½œæ¯”è¼ƒç°¡å–®ï¼Œå°±æ˜¯å°‡ Fields å±¬æ€§å‚³å›å³å¯ï¼›è€Œååºåˆ—åŒ–æ™‚ï¼Œå‰‡æ˜¯æŠŠå–å‡ºçš„ Fields å±¬æ€§æŒ‡å®šå›å»ï¼š</p>
<pre><code class="language-aspx-vb" data-lang="aspx-vb">&lt;%
' å•†å“
Class Shopping_Product
    Private Fields

    ' ... ç•¥ ...

    Public Function Serialize()
        Set Serialize = Fields
    End Function

    Public Function Unserialize(oFields)
        Set Fields = oFields
    End Function
End Class
%&gt;

</code></pre><p>è‡³æ–¼è³¼ç‰©è»Šçš„åºåˆ—åŒ–æ¯”è¼ƒè¤‡é›œä¸€é»ï¼Œé¦–å…ˆè¦å°‡æ¯å€‹å•†å“çš„åºåˆ—åŒ–å­˜åˆ°ä¸€å€‹ Dictionary ç‰©ä»¶ (oItems)ï¼Œå†æŠŠé€™å€‹ Dictionary ç‰©ä»¶ (oItems) æ”¾åˆ° Cart çš„åºåˆ—åŒ–ç‰©ä»¶ (oFields) ä¸­ï¼Œæœ€å¾Œå›å‚³ Cart çš„åºåˆ—åŒ–ç‰©ä»¶ï¼›ååºåˆ—åŒ–å‰‡æ­£å¥½ç›¸åã€‚ä¸éååºåˆ—åŒ–è¦å…ˆç”¢ç”Ÿä¸€å€‹å•†å“ç‰©ä»¶ (oProduct) ï¼Œå†æŠŠå•†å“çš„åºåˆ—åŒ–ç‰©ä»¶ (oItem) æŒ‡å®šçµ¦è©²å•†å“ç‰©ä»¶ã€‚</p>
<pre><code class="language-aspx-vb" data-lang="aspx-vb">&lt;%
' è³¼ç‰©è»Š
Class Shopping_Cart
    Private List

    Private Fields

    ' ... ç•¥ ....

    Public Function Serialize()
        Dim oFields : Set oFields = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
        Dim oItems : Set oItems = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
        Dim oProduct
        &lt;strong&gt;For Each oProduct In List.Items&lt;/strong&gt;
        &lt;strong&gt;oItems.Add oItems.Count, oProduct.Serialize&lt;/strong&gt;
        &lt;strong&gt;Next&lt;/strong&gt;
        &lt;strong&gt;oFields.Add &quot;Items&quot;, oItems&lt;/strong&gt;
        oFields.Add &quot;Amount&quot;, Fields(&quot;Amount&quot;)
        Set Serialize = oFields
        Set oItems = Nothing
        Set oFields = Nothing
    End Function

    Public Sub Unserialize(oSerializedFields)
        If oSerializedFields Is Nothing Then Exit Sub
        &lt;strong&gt;Set List = Server.CreateObject(&quot;Scripting.Dictionary&quot;)&lt;/strong&gt;
        Dim oItem
        Dim oProduct
        For Each oItem In oSerializedFields(&quot;Items&quot;).Items
            &lt;strong&gt;Set oProduct = New Shopping_Product&lt;/strong&gt;
            &lt;strong&gt;oProduct.Unserialize oItem&lt;/strong&gt;
        List.Add List.Count, oProduct
        Next
        Fields(&quot;Amount&quot;) = oSerializedFields(&quot;Amount&quot;)
    End Sub
End Class
%&gt;

</code></pre><p>ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;!-- #include virtual=&quot;/inc/class/Shopping/Cart.asp&quot; --&gt;
&lt;!-- #include virtual=&quot;/inc/class/Shopping/Product.asp&quot; --&gt;
&lt;%
Dim oCart : Set oCart = New Shopping_Cart
Dim oP1 : Set oP1 = New Shopping_Product
Dim oP2 : Set oP2 = New Shopping_Product
Dim oP3 : Set oP3 = New Shopping_Product
oP1.SetField &quot;Price&quot;, 100
oP1.SetField &quot;Quantity&quot;, 1
oP2.SetField &quot;Price&quot;, 120
oP2.SetField &quot;Quantity&quot;, 2
oP3.SetField &quot;Price&quot;, 150
oP3.SetField &quot;Quantity&quot;, 1
oCart.AddProduct oP1
oCart.AddProduct oP2
oCart.AddProduct oP3
oCart.Update
Set Session(&quot;Cart&quot;) = oCart.Serialize
Dim oNewCart : Set oNewCart = New Shopping_Cart
oNewCart.Unserialize Session(&quot;Cart&quot;)
%&gt;

</code></pre><h2 id="å·¢ç‹€-dictionary-ç‰©ä»¶">å·¢ç‹€ Dictionary ç‰©ä»¶</h2>
<p>é€™æ˜¯å¦ä¸€ç¨®é›†åˆé«”å’Œåºåˆ—åŒ–çš„è®Šå½¢ï¼Œé€šå¸¸æ˜¯ç”¨åœ¨æŠŠè³‡æ–™åº«ä¸­çš„è³‡æ–™è½‰æ›æˆ Dictionary ç‰©ä»¶ä¸Šã€‚ä¸»è¦åŸç†æ˜¯åœ¨è¿´åœˆä¸­å»ºç«‹ä¸€å€‹ Dictionary ç‰©ä»¶ (oItem) ï¼Œç„¶å¾Œåœ¨è¨­å®šå¥½å…§å®¹å¾Œï¼ŒæŠŠå®ƒæŒ‡å®šçµ¦æœ€å¤–å±¤çš„ Dictionary ç‰©ä»¶ (oItems) ã€‚</p>
<pre><code>&lt;%
Dim oItems : Set oItems = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
Dim oItem
Dim oField
While Not oTempRS.EOF
    Set oItem = Server.CreateObject(&quot;Scripting.Dictionary&quot;)
    ' å°‡æ‰€æœ‰æ¬„ä½æ”¾åˆ° oItem ä¸­
    For Each oField In oTempRS.Fields
        oItem.Add oField.Name, oField.Value
    Next
    oItems.Add oItems.Count oItem
    Set oItem = Nothing
Wend
Response.Write oItems(0)(&quot;Attr1&quot;) &amp;amp; vbCrLf
Response.Write oItems(0)(&quot;Attr2&quot;) &amp;amp; vbCrLf
Response.Write oItems(1)(&quot;Attr1&quot;) &amp;amp; vbCrLf
Response.Write oItems(1)(&quot;Attr2&quot;) &amp;amp; vbCrLf
%&gt;

</code></pre><h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>é›–ç„¶ ASP (VBScript) åœ¨ç‰©ä»¶å°å‘ä¸Šçš„æ©Ÿåˆ¶ä¸å¦‚ ASP (JScript) ä¾†å¾—å…ˆé€²ï¼Œä½†æ˜¯ä»¥ä¸Šçš„æŠ€å·§é‚„æ˜¯èƒ½å¤ è§£æ±ºå¤šæ•¸çš„å•é¡Œã€‚é€™äº›æŠ€å·§éƒ½æ˜¯æˆ‘åœ¨é–‹ç™¼å°ˆæ¡ˆæ™‚æ‰€å¾—åˆ°çš„å¿ƒå¾—ï¼Œå¦‚æœæœ‰æ›´å¤šæœ‰è¶£çš„æ–¹æ³•ï¼Œä¹Ÿæ­¡è¿å¤§å®¶åˆ†äº«ã€‚</p>
<h2 id="ç›¸é—œæ–‡ç« ">ç›¸é—œæ–‡ç« </h2>
<ul>
<li><a href="http://www.jaceju.net/blog/archives/51/">ASP ç‰©ä»¶å°å‘ (1) - åŸºç¤</a></li>
<li><a href="http://www.jaceju.net/blog/archives/52/">ASP ç‰©ä»¶å°å‘ (2) - åˆç´šæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/54/">ASP ç‰©ä»¶å°å‘ (3) - é€²éšæŠ€å·§</a></li>
<li><a href="http://www.jaceju.net/blog/archives/57/">ASP ç‰©ä»¶å°å‘ (4) - å‹•æ…‹è¼‰å…¥é¡åˆ¥</a></li>
<li><a href="http://www.jaceju.net/blog/archives/59/">ASP ç‰©ä»¶å°å‘ (5) - Me é—œéµå­—</a></li>
<li><a href="http://www.jaceju.net/blog/archives/76/">ASP ç‰©ä»¶å°å‘ (6) - å–®å…ƒæ¸¬è©¦</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>æ’°å¯«å¯ä»¥æ¥å— callback è™›æ“¬å‹æ…‹åƒæ•¸çš„å‡½å¼</title>
			<link>https://jaceju.net/write-php-function-with-callback/</link>
			<pubDate>Thu, 08 Sep 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/write-php-function-with-callback/</guid>
			<description>å‰é¢ä»‹ç´¹é callback è™›æ“¬å‹æ…‹ï¼Œä½†ä¸é™æ–¼ PHP å…§å»ºå‡½å¼ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥åœ¨å‡½å¼ä¸­è‡ªè¡Œè™•ç† callback è™›æ“¬å‹æ…‹çš„åƒæ•¸ã€‚ ä¾‹å¦‚ PHP å…§å»ºäº†ä¸€å€‹ array_map å‡½å¼ï¼Œä½†æ˜¯ç„¡æ³•è™•ç†å¤šéšé™£åˆ—ã€‚æˆ‘å€‘å¯ä»¥</description>
			<content type="html"><![CDATA[<p>å‰é¢ä»‹ç´¹é callback è™›æ“¬å‹æ…‹ï¼Œä½†ä¸é™æ–¼ PHP å…§å»ºå‡½å¼ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥åœ¨å‡½å¼ä¸­è‡ªè¡Œè™•ç† callback è™›æ“¬å‹æ…‹çš„åƒæ•¸ã€‚</p>
<!-- raw HTML omitted -->
<p>ä¾‹å¦‚ PHP å…§å»ºäº†ä¸€å€‹ array_map å‡½å¼ï¼Œä½†æ˜¯ç„¡æ³•è™•ç†å¤šéšé™£åˆ—ã€‚æˆ‘å€‘å¯ä»¥è‡ªè¡Œå»ºç«‹ä¸€å€‹ array_map_recursive å‡½å¼ä¾†ä½¿ç”¨ï¼Œç•¶ç„¶å…¶ä»‹é¢ä¹Ÿå¾—å’Œ array_map ä¸€æ¨£ï¼š</p>
<pre><code>&lt;?php
/**
 * ç”¨æ³•ï¼š
 * $a = array (1, 2, 3, 4, 5);
 * $a = array_map_recursive('function_name', $a); // callback function
 * $a = array_map_recursive(array ('class_name', 'class_method'), $a); // callback static class method
 * $a = array_map_recursive(array (&amp;amp; $object, 'object_method'), $a); // callback object method
 */
function array_map_recursive($func, $arr)
{
    $result = array();
    foreach ($arr as $key =&gt; $value) {
        if (is_array($value)) {
            $result[$key] = array_map_recursive($func, $value);
        } else {
            if (is_array($func)) {
                if (is_object($func[0]))
                    $result[$key] = $func[0]-&gt;$func[1]($value);
                if (is_string($func[0]))
                    eval('$result[$key] = ' . $func[0] . '::' . $func[1] . '($value);');
            } else {
                $result[$key] = $func($value);
            }
        }
    }
    return $result;
}

</code></pre><p>å…¶ä¸­ $func åƒæ•¸å°±æ˜¯ callback è™›æ“¬å‹æ…‹ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>PHP çš„ callback è™›æ“¬å‹æ…‹</title>
			<link>https://jaceju.net/php-callback/</link>
			<pubDate>Thu, 25 Aug 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/php-callback/</guid>
			<description>PHP æä¾›äº†ä¸€ç¨®å¾ˆæœ‰è¶£çš„è™›æ“¬å‹æ…‹ (Pseudo-type) : callback ï¼Œå®ƒå…¶å¯¦æ˜¯å­—ä¸²æˆ–é™£åˆ—çµ„æˆã€‚ä¸»è¦ç”¨ä¾†è™•ç†ä¸€äº›æœ‰ä¸å®¹æ˜“å¯«æ­»åœ¨ç¨‹å¼è£¡çš„å‡½å¼åç¨±ã€‚ å®ƒå¯ä»¥æ˜¯ä»¥ä¸‹å¯«æ³•ï¼š // å‘¼å«å‡½å¼ï¼Œç›¸</description>
			<content type="html"><![CDATA[<p>PHP æä¾›äº†ä¸€ç¨®å¾ˆæœ‰è¶£çš„è™›æ“¬å‹æ…‹ (Pseudo-type) : callback ï¼Œå®ƒå…¶å¯¦æ˜¯å­—ä¸²æˆ–é™£åˆ—çµ„æˆã€‚ä¸»è¦ç”¨ä¾†è™•ç†ä¸€äº›æœ‰ä¸å®¹æ˜“å¯«æ­»åœ¨ç¨‹å¼è£¡çš„å‡½å¼åç¨±ã€‚</p>
<!-- raw HTML omitted -->
<p>å®ƒå¯ä»¥æ˜¯ä»¥ä¸‹å¯«æ³•ï¼š</p>
<pre><code>// å‘¼å«å‡½å¼ï¼Œç›¸ç•¶æ–¼ functionName();
'functionName'
// å‘¼å«é¡åˆ¥éœæ…‹æ–¹æ³•ï¼Œç›¸ç•¶æ–¼ className::methodName();
array ('className', 'methodName');
// å‘¼å«ç‰©ä»¶æ–¹æ³•ï¼Œç›¸ç•¶æ–¼ $object-&gt;methodName();
array ($object, 'methodName');

</code></pre><p>ä¾‹å¦‚ï¼š</p>
<pre><code>&lt;?php
$ary = array (
    'abc',
    'def',
    'ghi',
    array (
        '123',
        '456',
        '789',
    ),
);
function doSomething(&amp;amp; $v)
{
    $v = 'f : ' . $v;
}
class TestClass
{
    public function doSomething(&amp;amp; $v)
    {
        $v = 'c : ' . $v;
    }
}
$test = new TestClass();
var_dump(call_user_func('doSomething', 123));
var_dump(call_user_func(array ('TestClass', 'doSomething'), 123));
var_dump(call_user_func(array ($test, 'doSomething'), 123));
array_walk_recursive($ary, 'doSomething');
var_dump($ary);
array_walk_recursive($ary, array ('TestClass', 'doSomething'));
var_dump($ary);
array_walk_recursive($ary, array ($test, 'doSomething'));
var_dump($ary);
?&gt;

</code></pre>]]></content>
		</item>
		
		<item>
			<title>Smarty å…¥é–€</title>
			<link>https://jaceju.net/getting-started-with-smarty/</link>
			<pubDate>Wed, 08 Jun 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/getting-started-with-smarty/</guid>
			<description>é€™æ˜¯æˆ‘ä¸€å¹´å‰å¯«çš„æ–‡ç« ï¼Œä¹‹å‰å¯„æ”¾åœ¨æœ‹å‹çš„ç«™ï¼š[PHP 5çŸ¥è­˜äº¤æ›ä¸­å¿ƒ]ã€‚ ä¸éå› ç‚ºæœ‰é‡å°èˆŠæœ‰çš„å…§å®¹åšä¸€äº›å°èª¿æ•´ï¼Œæ‰€ä»¥é€™æ¬¡æŠŠå®ƒæ”¾å›åˆ°è‡ªå·±çš„ Blog è£¡ã€‚ åºè¨€</description>
			<content type="html"><![CDATA[<p>é€™æ˜¯æˆ‘ä¸€å¹´å‰å¯«çš„æ–‡ç« ï¼Œä¹‹å‰å¯„æ”¾åœ¨æœ‹å‹çš„ç«™ï¼š<a href="http://www.php5.idv.tw/">[PHP 5çŸ¥è­˜äº¤æ›ä¸­å¿ƒ]</a>ã€‚</p>
<p>ä¸éå› ç‚ºæœ‰é‡å°èˆŠæœ‰çš„å…§å®¹åšä¸€äº›å°èª¿æ•´ï¼Œæ‰€ä»¥é€™æ¬¡æŠŠå®ƒæ”¾å›åˆ°è‡ªå·±çš„ Blog è£¡ã€‚</p>
<h2 id="åºè¨€">åºè¨€</h2>
<p>å‰›é–‹å§‹æ¥è§¸æ¨£ç‰ˆå¼•æ“çš„ PHP è¨­è¨ˆå¸«ï¼Œè½åˆ° Smarty æ™‚ï¼Œéƒ½æœƒè¦ºå¾—å¾ˆé›£ã€‚å…¶å¯¦ç­†è€…ä¹Ÿä¸ä¾‹å¤–ï¼Œç¢°éƒ½ä¸æ•¢ç¢°ä¸€ä¸‹ã€‚ä½†æ˜¯å¾Œä¾†åœ¨å‰–æ XOOPS çš„ç¨‹å¼æ¶æ§‹æ™‚ï¼Œé–‹å§‹ç™¼ç¾ Smarty å…¶å¯¦ä¸¦ä¸é›£ã€‚åªè¦å°‡ Smarty åŸºç¤åŠŸç·´å¥½ï¼Œåœ¨ä¸€èˆ¬æ‡‰ç”¨ä¸Šå°±å·²ç¶“ç›¸ç•¶è¶³å¤ äº†ã€‚ç•¶ç„¶åŸºç¤èƒ½æ‰“å¥½ï¼Œå¾Œé¢çš„é€²éšæ‡‰ç”¨ä¹Ÿå°±ä¸ç”¨æ€•äº†ã€‚</p>
<p>é€™æ¬¡çš„æ›´æ–°ï¼Œä¸»è¦åŠ ä¸Šäº†ä¸€äº›æ¦‚å¿µæ€§çš„æ±è¥¿ï¼Œç•¶ç„¶ä¹Ÿæœ‰ä¸€äº›é€²éšçš„æŠ€å·§ã€‚ä¸éé€™äº›ä¹Ÿè¨±æ—©å·²æ·±å…¥å¤§å®¶çš„ç¨‹å¼ä¹‹ä¸­ï¼Œå¦‚æœæœ‰æ›´å¥½çš„è§€é»ï¼Œä¹Ÿæ­¡è¿å¤§å®¶èƒ½å¤ å›é¥‹ã€‚æ–‡ç« ä¸­çš„ç¨‹å¼æ¶æ§‹åƒ…ä¾›åƒè€ƒï¼Œä¸¦ä¸æ˜¯æœ€å¥½çš„ä½œæ³•ã€‚ä¸éå¦‚æœå‰›å­¸ç¿’Smartyï¼Œå€’æ˜¯å¯ä»¥å…ˆä»¥é€™æ¨£çš„å¯«æ³•ç‚ºåŸºç¤ã€‚</p>
<p>jaceju@gmail 2005/03/12</p>
<h2 id="smarty-ä»‹ç´¹">Smarty ä»‹ç´¹</h2>
<h3 id="ä»€éº¼æ˜¯æ¨£ç‰ˆå¼•æ“">ä»€éº¼æ˜¯æ¨£ç‰ˆå¼•æ“</h3>
<p>ä¸çŸ¥é“å¾ä»€éº¼æ™‚å€™é–‹å§‹ï¼Œæœ‰äººé–‹å§‹å° HTML å…§åµŒå…¥ Server Script è¦ºå¾—ä¸å¤ªæ»¿æ„ã€‚ç„¶è€Œä¸è«–æ˜¯å¾®è»Ÿçš„ ASP æˆ–æ˜¯é–‹æ”¾æºç¢¼çš„ PHPï¼Œéƒ½æ˜¯å±¬æ–¼å…§åµŒ Server Script çš„ç¶²é ä¼ºæœç«¯èªè¨€ã€‚å› æ­¤ä¹Ÿå°±æœ‰äººæƒ³åˆ°ï¼Œå¦‚æœèƒ½æŠŠç¨‹å¼æ‡‰ç”¨é‚è¼¯ (æˆ–ç¨±å•†æ¥­æ‡‰ç”¨é‚è¼¯) èˆ‡ç¶²é å‘ˆç¾ (Layout) é‚è¼¯åˆ†é›¢çš„è©±ï¼Œæ˜¯ä¸æ˜¯æœƒæ¯”è¼ƒå¥½å‘¢ï¼Ÿ</p>
<p>å…¶å¯¦é€™å€‹å•é¡Œæ—©å°±å­˜åœ¨å·²ä¹…ï¼Œå¾äº’å‹•å¼ç¶²é é–‹å§‹é¢¨è¡Œæ™‚ï¼Œä¸è«–æ˜¯ ASP æˆ–æ˜¯ PHP çš„ä½¿ç”¨è€…éƒ½æ˜¯èº«å…¼ç¨‹å¼é–‹ç™¼è€…èˆ‡è¦–è¦ºè¨­è¨ˆå¸«å…©ç¨®èº«ä»½ã€‚å¯æ˜¯é€šå¸¸é€™äº›ä½¿ç”¨è€…ä¸æ˜¯ç¨‹å¼å¼·å°±æ˜¯ç¾å·¥å¼·ï¼Œå¦‚æœè¦å…©è€…åŒæ™‚å…¼é¡§ï¼Œé‚£å¯å¾—æ­»æ‰ä¸å°‘è…¦ç´°èƒ&hellip;</p>
<p>æ‰€ä»¥æ¨£ç‰ˆå¼•æ“å°±æ‡‰é‹è€Œç”Ÿå•¦ï¼æ¨£ç‰ˆå¼•æ“çš„ç›®çš„ï¼Œå°±æ˜¯è¦é”åˆ°ä¸Šè¿°æåˆ°çš„é‚è¼¯åˆ†é›¢çš„åŠŸèƒ½ã€‚å®ƒèƒ½è®“ç¨‹å¼é–‹ç™¼è€…å°ˆæ³¨æ–¼è³‡æ–™çš„æ§åˆ¶æˆ–æ˜¯åŠŸèƒ½çš„é”æˆï¼›è€Œè¦–è¦ºè¨­è¨ˆå¸«å‰‡å¯å°ˆæ³¨æ–¼ç¶²é æ’ç‰ˆï¼Œè®“ç¶²é çœ‹èµ·ä¾†æ›´å…·æœ‰å°ˆæ¥­æ„Ÿï¼å› æ­¤æ¨£ç‰ˆå¼•æ“å¾ˆé©åˆå…¬å¸çš„ç¶²ç«™é–‹ç™¼åœ˜éšŠä½¿ç”¨ï¼Œä½¿æ¯å€‹äººéƒ½èƒ½ç™¼æ®å…¶å°ˆé•·ï¼</p>
<p>å°±ç­†è€…æ¥è§¸éçš„æ¨£ç‰ˆå¼•æ“ä¾†èªªï¼Œä¾è³‡æ–™å‘ˆç¾æ–¹å¼å¤§æ¦‚åˆ†æˆï¼šéœ€æ­é…ç¨‹å¼è™•ç†çš„æ¨£ç‰ˆå¼•æ“å’Œå®Œå…¨ç”±æ¨£ç‰ˆæœ¬èº«è‡ªè¡Œæ±ºå®šçš„æ¨£ç‰ˆå¼•æ“å…©ç¨®å½¢å¼ã€‚</p>
<p>åœ¨éœ€æ­é…ç¨‹å¼è™•ç†çš„æ¨£ç‰ˆå¼•æ“ä¸­ï¼Œç¨‹å¼é–‹ç™¼è€…å¿…é ˆè¦è² è²¬è®Šæ•¸çš„å‘ˆç¾é‚è¼¯ï¼Œä¹Ÿå°±æ˜¯èªªä»–å¿…é ˆæŠŠè®Šæ•¸çš„å…§å®¹åœ¨è¼¸å‡ºåˆ°æ¨£ç‰ˆå‰å…ˆè™•ç†å¥½ï¼Œæ‰èƒ½åš assign çš„å·¥ä½œã€‚æ›å¥è©±èªªï¼Œç¨‹å¼é–‹ç™¼è€…é‚„æ˜¯å¾—å¤šå¯«ä¸€äº›ç¨‹å¼ä¾†æ±ºå®šè®Šæ•¸å‘ˆç¾çš„é¢¨è²Œã€‚è€Œå®Œå…¨ç”±æ¨£ç‰ˆæœ¬èº«è‡ªè¡Œæ±ºå®šçš„æ¨£ç‰ˆå¼•æ“ï¼Œå®ƒå…è¨±è®Šæ•¸ç›´æ¥ assign åˆ°æ¨£ç‰ˆä¸­ï¼Œè®“è¦–è¦ºè¨­è¨ˆå¸«åœ¨è¨­è¨ˆæ¨£ç‰ˆæ™‚å†æ±ºå®šè®Šæ•¸è¦å¦‚ä½•å‘ˆç¾ã€‚å› æ­¤å®ƒå°±å¯èƒ½æœƒæœ‰å¦ä¸€å¥—å±¬æ–¼è‡ªå·±çš„æ¨£ç‰ˆç¨‹å¼èªæ³• (å¦‚ Smarty) ï¼Œä»¥æ–¹ä¾¿æ§åˆ¶è®Šæ•¸çš„å‘ˆç¾ã€‚ä½†é€™æ¨£ä¸€ä¾†ï¼Œè¦–è¦ºè¨­è¨ˆå¸«ä¹Ÿå¾—å­¸ç¿’å¦‚ä½•ä½¿ç”¨æ¨£ç‰ˆèªè¨€ã€‚</p>
<h3 id="æ¨£ç‰ˆå¼•æ“çš„é‹ä½œåŸç†">æ¨£ç‰ˆå¼•æ“çš„é‹ä½œåŸç†</h3>
<p>é¦–å…ˆæˆ‘å€‘å…ˆçœ‹çœ‹ä»¥ä¸‹çš„é‹ä½œåœ–ï¼š</p>
<p><img src="/resources/smarty_basic/1-01.gif" alt="test"></p>
<p>ä¸€èˆ¬çš„æ¨£ç‰ˆå¼•æ“ (å¦‚ PHPLib) éƒ½æ˜¯åœ¨å»ºç«‹æ¨£ç‰ˆç‰©ä»¶æ™‚å–å¾—è¦è§£æçš„æ¨£ç‰ˆï¼Œç„¶å¾ŒæŠŠè®Šæ•¸å¥—å…¥å¾Œï¼Œé€é parse() é€™å€‹æ–¹æ³•ä¾†è§£ææ¨£ç‰ˆï¼Œæœ€å¾Œå†å°‡ç¶²é è¼¸å‡ºã€‚</p>
<p><img src="/resources/smarty_basic/1-02.gif" alt="test"></p>
<p>å° Smarty çš„ä½¿ç”¨è€…ä¾†èªªï¼Œ<strong>ç¨‹å¼è£¡ä¹Ÿä¸éœ€è¦åšä»»ä½• parse çš„å‹•ä½œäº†</strong>ï¼Œé€™äº› Smarty è‡ªå‹•æœƒå¹«æˆ‘å€‘åšã€‚è€Œä¸”å·²ç¶“ç·¨è­¯éçš„ç¶²é ï¼Œå¦‚æœæ¨£ç‰ˆæ²’æœ‰è®Šå‹•çš„è©±ï¼Œ Smarty å°±è‡ªå‹•è·³éç·¨è­¯çš„å‹•ä½œï¼Œç›´æ¥åŸ·è¡Œç·¨è­¯éçš„ç¶²é ï¼Œä»¥ç¯€çœç·¨è­¯çš„æ™‚é–“ã€‚</p>
<h3 id="ä½¿ç”¨-smarty-çš„ä¸€äº›æ¦‚å¿µ">ä½¿ç”¨ Smarty çš„ä¸€äº›æ¦‚å¿µ</h3>
<p>åœ¨ä¸€èˆ¬æ¨£ç‰ˆå¼•æ“ä¸­ï¼Œæˆ‘å€‘å¸¸çœ‹åˆ°å€åŸŸçš„è§€å¿µï¼Œæ‰€è¬‚å€å¡Šå¤§æ¦‚éƒ½æœƒé•·æˆé€™æ¨£ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="c">&lt;!-- START : Block name --&gt;</span>
å€åŸŸå…§å®¹
<span class="c">&lt;!-- END : Block name --&gt;</span>
</code></pre></div><p>é€™äº›å€å¡Šå¤§éƒ¨ä»½éƒ½æœƒåœ¨ PHP ç¨‹å¼ä¸­ä»¥ <code>if</code> æˆ– <code>for</code>, <code>while</code> ä¾†æ§åˆ¶å®ƒå€‘çš„é¡¯ç¤ºç‹€æ…‹ï¼Œé›–ç„¶æ¨£ç‰ˆçœ‹èµ·ä¾†ç°¡æ½”å¤šäº†ï¼Œä½†åªè¦ä¸€æ›äº†é¡¯ç¤ºæ–¹å¼ä¸åŒçš„æ¨£ç‰ˆï¼Œ PHP ç¨‹å¼å‹¢å¿…è¦å†æ”¹ä¸€æ¬¡ï¼</p>
<p>**åœ¨ Smarty ä¸­ï¼Œä¸€åˆ‡ä»¥è®Šæ•¸ç‚ºä¸»ï¼Œæ‰€æœ‰çš„å‘ˆç¾é‚è¼¯éƒ½è®“æ¨£ç‰ˆè‡ªè¡Œæ§åˆ¶ã€‚**å› ç‚º Smarty æœƒæœ‰è‡ªå·±çš„æ¨£ç‰ˆèªè¨€ï¼Œæ‰€ä»¥ä¸ç®¡æ˜¯å€å¡Šæ˜¯å¦è¦é¡¯ç¤ºé‚„æ˜¯è¦é‡è¦†ï¼Œéƒ½æ˜¯ç”¨ Smarty çš„æ¨£ç‰ˆèªæ³• (if, foreach, section) æ­é…è®Šæ•¸å…§å®¹ä½œå‘ˆç¾ã€‚é€™æ¨£ä¸€ä¾†æ„Ÿè¦ºä¸Šå¥½åƒæ¨£ç‰ˆè®Šå¾—æœ‰é»è¤‡é›œï¼Œä½†å¥½è™•æ˜¯åªè¦è¦åŠƒå¾—ç•¶ï¼Œ PHP ç¨‹å¼ä¸€è¡Œéƒ½ä¸å¿…æ”¹ã€‚</p>
<p>ç”±ä¸Šé¢çš„èªªæ˜ï¼Œæˆ‘å€‘å¯ä»¥çŸ¥é“ä½¿ç”¨ Smarty è¦æŒæ¡ä¸€å€‹åŸå‰‡ï¼šå°‡ç¨‹å¼æ‡‰ç”¨é‚è¼¯èˆ‡ç¶²é å‘ˆç¾é‚è¼¯æ˜ç¢ºåœ°åˆ†é›¢ã€‚å°±æ˜¯èªª PHP ç¨‹å¼è£¡ä¸è¦æœ‰å¤ªå¤šçš„ HTML ç¢¼ã€‚ç¨‹å¼ä¸­åªè¦æ±ºå®šå¥½é‚£äº›è®Šæ•¸è¦å¡åˆ°æ¨£ç‰ˆè£¡ï¼Œè®“æ¨£ç‰ˆè‡ªå·±æ±ºå®šè©²å¦‚ä½•å‘ˆç¾é€™äº›è®Šæ•¸ (ç”šè‡³ä¸å‘ˆç¾ä¹Ÿè¡Œ) ã€‚</p>
<h2 id="smarty-çš„åŸºç¤">Smarty çš„åŸºç¤</h2>
<h3 id="å®‰è£-smarty">å®‰è£ Smarty</h3>
<p>é¦–å…ˆï¼Œæˆ‘å€‘å…ˆæ±ºå®šç¨‹å¼æ”¾ç½®çš„ä½ç½®ã€‚</p>
<ul>
<li>Windowsä¸‹å¯èƒ½æœƒé¡ä¼¼é€™æ¨£çš„ä½ç½®ï¼š <code>d:\appserv\web\demo\</code> ã€‚</li>
<li>Linuxä¸‹å¯èƒ½æœƒé¡ä¼¼é€™æ¨£çš„ä½ç½®ï¼š <code>/home/jaceju/public_html/</code> ã€‚</li>
</ul>
<p>æ¥è‘—åœ¨ç¨‹å¼ä¸»è³‡æ–™å¤¾ä¸‹å»ºç«‹ä¸€å€‹ <code>library</code> è³‡æ–™å¤¾ï¼Œé€™æ˜¯æˆ‘å€‘ç”¨ä¾†æ”¾ç½® Smarty å¥—ä»¶çš„åœ°æ–¹ã€‚</p>
<p>ç„¶å¾Œæˆ‘å€‘åˆ° Smarty çš„å®˜æ–¹ç¶²ç«™ä¸‹è¼‰æœ€æ–°çš„ Smarty å¥—ä»¶ï¼š <a href="http://smarty.php.net">http://smarty.php.net</a>ã€‚</p>
<p>è§£é–‹ Smarty 2.6.0 å¾Œï¼Œæœƒçœ‹åˆ°å¾ˆå¤šæª”æ¡ˆï¼Œå…¶ä¸­æœ‰å€‹ libs è³‡æ–™å¤¾ã€‚åœ¨ libs ä¸­æ‡‰è©²æœƒæœ‰ 3 å€‹ <code>class.php</code> æª” + 1 å€‹ <code>debug.tpl</code> + 1 å€‹ <code>plugin</code> è³‡æ–™å¤¾ + 1 å€‹ <code>core</code> è³‡æ–™å¤¾ã€‚**ç„¶å¾Œç›´æ¥å°‡ <code>libs</code> è¤‡è£½åˆ°å‰›å‰›å»ºç«‹çš„ <code>library</code> è³‡æ–™å¤¾ä¸‹ï¼Œå†æ›´åç‚º Smarty å°±å¯ä»¥äº†ã€‚**å°±é€™æ¨£ï¼Ÿæ²’éŒ¯ï¼é€™ç¨®å®‰è£æ³•æ¯”è¼ƒç°¡å–®ï¼Œé©åˆä¸€èˆ¬æ²’æœ‰è‡ªå·±ä¸»æ©Ÿçš„ä½¿ç”¨è€…ã€‚</p>
<p>è‡³æ–¼ Smarty å®˜æ–¹æ‰‹å†Šä¸­ç‚ºä»€éº¼è¦ä»‹ç´¹ä¸€äº›æ¯”è¼ƒè¤‡é›œçš„å®‰è£æ–¹å¼å‘¢ï¼ŸåŸºæœ¬ä¸Šä¾ç…§å®˜æ–¹çš„æ–¹å¼å®‰è£ï¼Œå¯ä»¥åªåœ¨ä¸»æ©Ÿå®‰è£ä¸€æ¬¡ï¼Œç„¶å¾Œæä¾›çµ¦è©²ä¸»æ©Ÿä¸‹æ‰€æœ‰è¨­è¨ˆè€…é–‹ç™¼ä¸åŒç¨‹å¼æ™‚ç›´æ¥å¼•ç”¨ï¼Œè€Œä¸æœƒé‡è¦†å®‰è£å¤ªå¤šçš„ Smarty è¤‡æœ¬ã€‚è€Œç­†è€…æ‰€æä¾›çš„æ–¹å¼å‰‡æ˜¯é©åˆè¦æŠŠç¨‹å¼å¸¶éä¾†ç§»éå»çš„ç¨‹å¼é–‹ç™¼è€…ä½¿ç”¨ï¼Œé€™æ¨£ä¸ç”¨ç…©æƒ±ä¸»æ©Ÿæœ‰æ²’æœ‰å®‰è£ Smarty ã€‚</p>
<h3 id="ç¨‹å¼çš„è³‡æ–™å¤¾è¨­å®š">ç¨‹å¼çš„è³‡æ–™å¤¾è¨­å®š</h3>
<p>ä»¥ç­†è€…åœ¨Windowså®‰è£Appservç‚ºä¾‹ï¼Œç¨‹å¼çš„ä¸»è³‡æ–™å¤¾æ˜¯ <code>d:\appserv\web\demo\</code> ã€‚å®‰è£å¥½ Smarty å¾Œï¼Œæˆ‘å€‘åœ¨ä¸»è³‡æ–™å¤¾ä¸‹å†å»ºç«‹é€™æ¨£çš„è³‡æ–™å¤¾ï¼š</p>
<p><img src="/resources/smarty_basic/2-01.gif" alt="test"></p>
<p><strong>åœ¨ Linux åº•ä¸‹ï¼Œè«‹è¨˜å¾—å°‡ <code>templates_c</code> çš„æ¬Šé™è®Šæ›´ç‚º <code>777 </code>ã€‚</strong> Windows ä¸‹å‰‡å°‡å…¶å”¯è®€å–æ¶ˆã€‚</p>
<h3 id="ç¬¬ä¸€å€‹ç”¨-smarty-å¯«çš„å°ç¨‹å¼">ç¬¬ä¸€å€‹ç”¨ Smarty å¯«çš„å°ç¨‹å¼</h3>
<p>æˆ‘å€‘å…ˆè¨­å®š Smarty çš„è·¯å¾‘ï¼Œè«‹å°‡ä»¥ä¸‹é€™å€‹æª”æ¡ˆå‘½åç‚º <code>main.php</code> ï¼Œä¸¦æ”¾ç½®åˆ°ä¸»è³‡æ–™å¤¾ä¸‹ï¼š</p>
<p><strong>main.php</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">include</span> <span class="s2">&#34;library/Smarty/Smarty.class.php&#34;</span><span class="p">;</span>
<span class="nx">define</span><span class="p">(</span><span class="s1">&#39;APP_PATH&#39;</span><span class="p">,</span> <span class="nx">str_replace</span><span class="p">(</span><span class="s1">&#39;\\&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nx">dirname</span><span class="p">(</span><span class="no">__FILE__</span><span class="p">)));</span>
<span class="nv">$tpl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Smarty</span><span class="p">();</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">template_dir</span> <span class="o">=</span> <span class="nx">APP_PATH</span> <span class="o">.</span> <span class="s2">&#34;/templates/&#34;</span><span class="p">;</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">compile_dir</span> <span class="o">=</span> <span class="nx">APP_PATH</span> <span class="o">.</span> <span class="s2">&#34;/templates_c/&#34;</span><span class="p">;</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">config_dir</span> <span class="o">=</span> <span class="nx">APP_PATH</span> <span class="o">.</span> <span class="s2">&#34;/configs/&#34;</span><span class="p">;</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">cache_dir</span> <span class="o">=</span> <span class="nx">APP_PATH</span> <span class="o">.</span> <span class="s2">&#34;/cache/&#34;</span><span class="p">;</span>
</code></pre></div><p>ç…§ä¸Šé¢æ–¹å¼è¨­å®šçš„ç”¨æ„åœ¨æ–¼ï¼Œç¨‹å¼å¦‚æœè¦ç§»æ¤åˆ°å…¶ä»–åœ°æ–¹ï¼Œåªè¦æ”¹ <code>APP_PATH</code> å°±å¯ä»¥å•¦ã€‚ (é€™è£¡æ˜¯åƒè€ƒ XOOPS çš„ )</p>
<p>Smarty çš„æ¨£ç‰ˆè·¯å¾‘è¨­å®šå¥½å¾Œï¼Œç¨‹å¼æœƒä¾ç…§é€™å€‹è·¯å¾‘ä¾†æŠ“æ‰€æœ‰æ¨£ç‰ˆçš„ç›¸å°ä½ç½® (ç¯„ä¾‹ä¸­æ˜¯ <code>d:/appserv/web/demo/templates/</code> ) ã€‚ç„¶å¾Œæˆ‘å€‘ç”¨ <code>display()</code> é€™å€‹ Smarty æ–¹æ³•ä¾†é¡¯ç¤ºæˆ‘å€‘çš„æ¨£ç‰ˆã€‚</p>
<p>æ¥ä¸‹ä¾†æˆ‘å€‘åœ¨ <code>templates</code> è³‡æ–™å¤¾ä¸‹æ”¾ç½®ä¸€å€‹ <code>test.htm</code> ï¼š (å‰¯æª”åå«ä»€éº¼éƒ½ç„¡æ‰€è¬‚ï¼Œä½†ä¾¿æ–¼è¦–è¦ºè¨­è¨ˆå¸«é–‹ç™¼ï¼Œç­†è€…éƒ½é‚„æ˜¯ä»¥ <code>.htm</code> ç‚ºä¸»ã€‚)</p>
<p><strong>templates/test.htm</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Content-Type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;text/html; charset=utf-8&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{$title}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
{$content}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><p>ç¾åœ¨æˆ‘å€‘è¦å°‡ä¸Šé¢çš„æ¨£ç‰ˆé¡¯ç¤ºå‡ºä¾†ï¼Œä¸¦å°‡ç¶²é æ¨™é¡Œ (<code>$title</code>) èˆ‡å…§å®¹ (<code>$content</code>) æ›´æ›ï¼Œè«‹å°‡ä»¥ä¸‹æª”æ¡ˆå…§å®¹å‘½åç‚º <code>test.php</code> ï¼Œä¸¦æ”¾ç½®åœ¨ä¸»è³‡æ–™å¤¾ä¸‹ï¼š</p>
<p><strong>test.php</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s2">&#34;main.php&#34;</span><span class="p">;</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;title&#34;</span><span class="p">,</span> <span class="s2">&#34;æ¸¬è©¦ç”¨çš„ç¶²é æ¨™é¡Œ&#34;</span><span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;content&#34;</span><span class="p">,</span> <span class="s2">&#34;æ¸¬è©¦ç”¨çš„ç¶²é å…§å®¹&#34;</span><span class="p">);</span>
<span class="c1">// ä¸Šé¢å…©è¡Œä¹Ÿå¯ä»¥ç”¨é€™è¡Œä»£æ›¿
</span><span class="c1">// $tpl-&gt;assign(array(&#34;title&#34; =&gt; &#34;æ¸¬è©¦ç”¨çš„ç¶²é æ¨™é¡Œ&#34;, &#34;content&#34; =&gt; &#34;æ¸¬è©¦ç”¨çš„ç¶²é å…§å®¹&#34;));
</span><span class="c1"></span><span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">(</span><span class="s1">&#39;test.htm&#39;</span><span class="p">);</span>
</code></pre></div><p>è«‹æ‰“é–‹ç€è¦½å™¨ï¼Œè¼¸å…¥ <code>http://localhost/demo/test.php</code> è©¦è©¦çœ‹(ä¾æ‚¨çš„ç’°å¢ƒæ±ºå®šç¶²å€)ï¼Œæ‡‰è©²æœƒçœ‹åˆ°ä»¥ä¸‹çš„ç•«é¢ï¼š</p>
<p><img src="/resources/smarty_basic/2-02.gif" alt="test"></p>
<p>å†åˆ° <code>templates_c</code> åº•ä¸‹ï¼Œæˆ‘å€‘æœƒçœ‹åˆ°å…¶ä¸­æœ‰ä¸€å€‹å¥‡æ€ªçš„æª”æ¡ˆï¼š</p>
<p><strong>%%6B^6B2^6B2BF9A3%%test.htm.php</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="cm">/* Smarty version 2.6.14, created on 2007-08-11 14:10:33
</span><span class="cm">compiled from test.htm */</span> <span class="cp">?&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Content-Type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;text/html; charset=utf-8&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_tpl_vars</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">];</span> <span class="cp">?&gt;</span>
<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_tpl_vars</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">];</span> <span class="cp">?&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><p>æ²’éŒ¯ï¼Œé€™å°±æ˜¯ Smarty ç·¨è­¯éçš„æª”æ¡ˆã€‚å®ƒå°‡æˆ‘å€‘åœ¨æ¨£ç‰ˆä¸­çš„è®Šæ•¸è½‰æ›æˆäº† PHP çš„èªæ³•ä¾†åŸ·è¡Œï¼Œä¸‹æ¬¡å†è®€å–åŒæ¨£çš„å…§å®¹æ™‚ï¼Œ Smarty å°±æœƒç›´æ¥æŠ“å–é€™å€‹æª”æ¡ˆä¾†åŸ·è¡Œäº†ã€‚</p>
<p>æœ€å¾Œæˆ‘å€‘æ•´ç†ä¸€ä¸‹æ•´å€‹ Smarty ç¨‹å¼æ’°å¯«æ­¥é©Ÿï¼š</p>
<ul>
<li>è¼‰å…¥ Smarty æ¨£ç‰ˆå¼•æ“ã€‚</li>
<li>å»ºç«‹ Smarty ç‰©ä»¶ã€‚</li>
<li>è¨­å®š Smarty ç‰©ä»¶çš„åƒæ•¸ã€‚</li>
<li>åœ¨ç¨‹å¼ä¸­è™•ç†è®Šæ•¸å¾Œï¼Œå†ç”¨ Smarty çš„ <code>assign</code> æ–¹æ³•å°‡è®Šæ•¸ç½®å…¥æ¨£ç‰ˆè£¡ã€‚</li>
<li>åˆ©ç”¨ Smarty çš„ <code>display</code> æ–¹æ³•å°‡ç¶²é ç§€å‡ºã€‚</li>
</ul>
<h3 id="å¦‚ä½•å®‰æ’ä½ çš„ç¨‹å¼æ¶æ§‹">å¦‚ä½•å®‰æ’ä½ çš„ç¨‹å¼æ¶æ§‹</h3>
<p>ä¸Šé¢æˆ‘å€‘çœ‹åˆ°é™¤äº† Smarty æ‰€éœ€è¦çš„è³‡æ–™å¤¾å¤– (<code>library</code> ã€  <code>templates</code> ã€ <code>templates_c</code>) ï¼Œé‚„æœ‰å…©å€‹è³‡æ–™å¤¾ï¼š <code>configs</code> ã€ <code>modules</code> ã€‚å…¶å¯¦é€™æ˜¯ç­†è€…æ¨¡ä»¿ XOOPS çš„æ¶æ§‹æ‰€å»ºç«‹å‡ºä¾†çš„ï¼Œå› ç‚º XOOPS æ˜¯ç­†è€…æ‰€æ¥è§¸åˆ°çš„ç¨‹å¼ä¸­ï¼Œå°‘æ•¸ä½¿ç”¨ Smarty æ¨£ç‰ˆå¼•æ“çš„æ¶ç«™ç¨‹å¼ã€‚æ‰€è¬‚è¥¿ç“œåå¤§é‚Šï¼Œç­†è€…é€™æ¨£çš„ç¨‹å¼æ¶æ§‹é›–æ²’æœ‰ XOOPS çš„ç™¾åˆ†ä¹‹ä¸€å¼·ï¼Œä½†è‡³å°‘çµ¦äººçœ‹æ™‚é‚„æœ‰ XOOPS æ’è…°ã€‚</p>
<ul>
<li>
<p><code>configs</code> è³‡æ–™å¤¾ä¸€èˆ¬éƒ½æ˜¯ç”¨ä¾†å­˜æ”¾è¨­å®šæª”çš„ï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥ç”¨æ”¾å­˜æ”¾ Smarty æœƒç”¨åˆ°çš„ config è¨­å®šã€‚</p>
</li>
<li>
<p><code>modules</code> é€™å€‹è³‡æ–™å¤¾å‰‡æ˜¯ç”¨ä¾†æ”¾ç½®ç¨‹å¼æ¨¡çµ„çš„ï¼Œå¦‚æ­¤ä¸€ä¾†ä¾¿ä¸æœƒæŠŠç¨‹å¼ä¸Ÿå¾—åˆ°è™•éƒ½æ˜¯ï¼Œæ•´é«”æ¶æ§‹ä¸€ç›®ç­ç„¶ã€‚</p>
</li>
</ul>
<p>ä¸Šé¢æˆ‘å€‘ä¹Ÿæåˆ° <code>main.php</code> ï¼Œé€™æ˜¯æ•´å€‹ç¨‹å¼çš„ä¸»è¦æ ¸å¿ƒï¼Œä¸è«–æ˜¯å¸¸æ•¸å®šç¾©ã€å¤–éƒ¨ç¨‹å¼è¼‰å…¥ã€å…±ç”¨è®Šæ•¸å»ºç«‹ç­‰ï¼Œéƒ½æ˜¯åœ¨é€™è£¡é–‹å§‹çš„ã€‚æ‰€ä»¥ä¹‹å¾Œçš„æ¨¡çµ„éƒ½åªè¦å°‡é€™å€‹æª”æ¡ˆåŒ…å«é€²ä¾†å°±å¯ä»¥å•¦ã€‚å› æ­¤åœ¨ç¨‹å¼æµç¨‹è¦åŠƒæœŸé–“ï¼Œå°±å¿…é ˆå¥½å¥½æ§‹æ€ <code>main.php</code> ä¸­æ‡‰è©²è¦æ”¾é‚£äº›æ±è¥¿ï¼›ç•¶ç„¶åˆ©ç”¨ <code>include</code> æˆ– <code>require</code> æŒ‡ä»¤ï¼ŒæŠŠæ¯å€‹ç’°ç¯€æ¸…æ¥šåˆ†é›¢æ˜¯å†å¥½ä¸éäº†ã€‚</p>
<p><img src="/resources/smarty_basic/2-03.gif" alt="test"></p>
<p>åœ¨ä¸Šç¯€æåˆ°çš„ Smarty ç¨‹å¼ 5 æ­¥é©Ÿï¼Œ <code>main.php</code> å°±æœƒå¹«æˆ‘å€‘å…ˆå°‡å‰ 3 å€‹æ­¥é©Ÿåšå¥½ï¼Œå¾Œé¢çš„æ¨¡çµ„ç¨‹å¼åªè¦åšå¾Œé¢å…©å€‹æ­¥é©Ÿå°±å¯ä»¥äº†ã€‚</p>
<h2 id="å¾è®Šæ•¸é–‹å§‹">å¾è®Šæ•¸é–‹å§‹</h2>
<h3 id="å¦‚ä½•ä½¿ç”¨è®Šæ•¸">å¦‚ä½•ä½¿ç”¨è®Šæ•¸</h3>
<p>å¾ä¸Šä¸€ç« ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°æˆ‘å€‘åˆ©ç”¨ <strong><code>{</code></strong> åŠ <strong><code>}</code></strong> é€™å…©å€‹æ¨™ç¤ºç¬¦è™Ÿ (delimiter) å°‡è®Šæ•¸åŒ…èµ·ä¾†ï¼Œé€™æ˜¯ Smarty é è¨­çš„æ¨™ç¤ºç¬¦è™Ÿã€‚è®Šæ•¸çš„å‘½åæ–¹å¼å’Œ PHP çš„è®Šæ•¸å‘½åæ–¹å¼æ˜¯ä¸€æ¨¡ä¸€æ¨£çš„ï¼Œå‰é¢ä¹Ÿæœ‰å€‹ <code>$</code> å­—è™Ÿ (é€™å’Œä¸€èˆ¬çš„æ¨£ç‰ˆå¼•æ“ä¸åŒ)ã€‚æ¨™ç¤ºç¬¦è™Ÿå°±æœ‰é»åƒæ˜¯ PHP ä¸­çš„ <code>&lt;?php</code> åŠ <code>?&gt;</code> (äº‹å¯¦ä¸Šå®ƒå€‘åœ¨å¤§éƒ¨ä»½çš„è§£æéç¨‹ä¸­ï¼Œçš„ç¢ºæœƒè¢«æ›¿æ›æˆé€™å€‹ç¬¦è™Ÿ) ï¼Œæ‰€ä»¥ä»¥ä¸‹çš„æ¨£ç‰ˆè®Šæ•¸å¯«æ³•éƒ½æ˜¯å¯è¡Œçš„ï¼š</p>
<ul>
<li>ä¸€èˆ¬çš„å¯«æ³•ï¼š</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"> {$var}
</code></pre></div><ul>
<li>èˆ‡è®Šæ•¸ä¸­é–“ç•™æœ‰ç©ºç™½ï¼š</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">{ $var }
</code></pre></div><ul>
<li>å•Ÿå§‹çš„æ¨™ç¤ºç¬¦è™Ÿå’ŒçµæŸçš„æ¨™ç¤ºç¬¦è™Ÿä¸åœ¨åŒä¸€è¡Œ</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">{$var
}
</code></pre></div><p>è¨»ï¼šæœ‰æ™‚ç‚ºäº†ä¸­æ–‡è¡ç¢¼åŠ JavaScript çš„é—œä¿‚ï¼Œæˆ‘å€‘é€é <code>$left_delimiter</code> å’Œ <code>$right_delimiter</code> å…©å€‹ Smarty é¡åˆ¥å±¬æ€§ï¼Œä¾†å°‡æ¨™ç¤ºç¬¦è™Ÿæ›æ‰ã€‚</p>
<p>åœ¨ Smarty è£¡ï¼Œ<strong>è®Šæ•¸é è¨­æ˜¯å…¨åŸŸçš„</strong>ï¼Œä¹Ÿå°±æ˜¯èªªä½ åªè¦æŒ‡å®šä¸€æ¬¡å°±å¥½äº†ã€‚**æŒ‡å®šå…©æ¬¡ä»¥ä¸Šçš„è©±ï¼Œè®Šæ•¸å…§å®¹æœƒä»¥æœ€å¾ŒæŒ‡å®šçš„ç‚ºä¸»ã€‚**å°±ç®—æˆ‘å€‘åœ¨ä¸»æ¨£ç‰ˆä¸­è¼‰å…¥äº†å¤–éƒ¨çš„å­æ¨£ç‰ˆï¼Œå­æ¨£ç‰ˆä¸­åŒæ¨£çš„è®Šæ•¸ä¸€æ¨£ä¹Ÿæœƒè¢«æ›¿ä»£ï¼Œé€™æ¨£æˆ‘å€‘å°±ä¸ç”¨å†é‡å°å­æ¨£ç‰ˆå†åšä¸€æ¬¡è§£æçš„å‹•ä½œã€‚</p>
<p>å¦‚æœæƒ³è¦é¡¯ç¤ºçš„è³‡æ–™å·²ç¶“æ”¾åœ¨ä¸€å€‹é™£åˆ—è£¡äº†ï¼Œæ˜¯å¦è¦å°‡è£¡é¢çš„è®Šæ•¸åˆ†é›¢å‡ºä¾†ï¼Œå†åš assign çš„å‹•ä½œå‘¢ï¼Ÿå…¶å¯¦ä¸éœ€è¦ï¼æˆ‘å€‘å¯ä»¥ç›´æ¥å°±æŠŠé€™å€‹é™£åˆ— assign åˆ°æ¨£ç‰ˆç‰©ä»¶ä¸­ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$this_user</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&#34;fullname&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;Jace Ju&#34;</span><span class="p">,</span> <span class="s2">&#34;phone&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;012345678&#34;</span><span class="p">,</span> <span class="s2">&#34;email&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;jaceju@seed.net.tw&#34;</span><span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;this_user&#34;</span><span class="p">,</span> <span class="nv">$this_user</span><span class="p">);</span>
</code></pre></div><p>ç„¶å¾Œåœ¨æ¨£ç‰ˆä¸­é€™è£¡ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">{$this_user.fullname}
{$this_user.phone}
{$this_user.email}
</code></pre></div><p>å¦‚æ­¤ä¸€ä¾†å°±ä¸éœ€å°‡é™£åˆ—åˆ†é›¢ï¼Œ PHP ç¨‹å¼è£¡ä¹Ÿä¸æœƒæœ‰ä¸€å¤§å †çš„ assign äº†ã€‚</p>
<p>å¦å¤–æˆ‘å€‘ä¹Ÿå¯ä»¥æŠŠã€Œç‰©ä»¶ã€ assign åˆ° Smarty è£¡ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SomeObject</span><span class="p">();</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;obj&#34;</span><span class="p">,</span> <span class="nv">$obj</span><span class="p">);</span>
</code></pre></div><p>è€Œåœ¨æ¨£ç‰ˆä¸­ä¹Ÿæ˜¯èˆ‡ PHP ä¸€æ¨£ä½¿ç”¨ã€Œ -&gt; ã€ä¾†å­˜å–è©²ç‰©ä»¶çš„å±¬æ€§èˆ‡æ–¹æ³•ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">{$obj-&gt;fullname}
{$obj-&gt;method1()}
</code></pre></div><h3 id="ä¿®é£¾ä½ çš„è®Šæ•¸">ä¿®é£¾ä½ çš„è®Šæ•¸</h3>
<p>ä¸Šé¢æˆ‘å€‘æåˆ° Smarty è®Šæ•¸å‘ˆç¾çš„é¢¨è²Œæ˜¯ç”±æ¨£ç‰ˆè‡ªè¡Œæ±ºå®šçš„ï¼Œæ‰€ä»¥ Smarty æä¾›äº†è¨±å¤šä¿®é£¾è®Šæ•¸çš„å‡½å¼ã€‚ä½¿ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">{è®Šæ•¸|ä¿®é£¾å‡½å¼} <span class="c">&lt;!-- ç•¶ä¿®é£¾å‡½å¼æ²’æœ‰åƒæ•¸æ™‚ --&gt;</span>
{è®Šæ•¸|ä¿®é£¾å‡½å¼:&#34;åƒæ•¸(éå¿…è¦ï¼Œè¦–å‡½å¼è€Œå®š)&#34;} <span class="c">&lt;!-- ç•¶ä¿®é£¾å‡½å¼æœ‰åƒæ•¸æ™‚ --&gt;</span>
</code></pre></div><p>ç¯„ä¾‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">{$var|nl2br} <span class="c">&lt;!-- å°‡è®Šæ•¸ä¸­çš„æ›è¡Œå­—å…ƒæ›æˆ &lt;br /&gt; --&gt;</span>
{$var|string_format:&#34;%02d&#34;} <span class="c">&lt;!-- å°‡è®Šæ•¸æ ¼å¼åŒ– --&gt;</span>
</code></pre></div><p>å¥½ï¼Œé‚£ç‚ºä»€éº¼è¦è®“æ¨£ç‰ˆè‡ªè¡Œæ±ºå®šè®Šæ•¸å‘ˆç¾çš„é¢¨è²Œï¼Ÿå…ˆçœ‹çœ‹åº•ä¸‹çš„ HTML ï¼Œé€™æ˜¯æŸå€‹è³¼ç‰©è»Šçµå¸³çš„éƒ¨ä»½ç•«é¢ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;total&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;hidden&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;21000&#34;</span> <span class="p">/&gt;</span>
ç¸½é‡‘é¡ï¼š21,000 å…ƒ
</code></pre></div><p>ä¸€èˆ¬æ¨£ç‰ˆå¼•æ“çš„æ¨£ç‰ˆå¯èƒ½æœƒé€™æ¨£å¯«ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;total&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;hidden&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;{total}&#34;</span> <span class="p">/&gt;</span>
ç¸½é‡‘é¡ï¼š{format_total} å…ƒ
</code></pre></div><p>å®ƒå€‘çš„ PHP ç¨‹å¼ä¸­è¦é€™æ¨£å¯«ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$total</span> <span class="o">=</span> <span class="mi">21000</span><span class="p">;</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;total&#34;</span><span class="p">,</span> <span class="nv">$total</span><span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;format_total&#34;</span><span class="p">,</span> <span class="nx">number_format</span><span class="p">(</span><span class="nv">$total</span><span class="p">));</span>
</code></pre></div><p>è€Œ Smarty çš„æ¨£ç‰ˆå°±å¯ä»¥é€™æ¨£å¯«ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;total&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;hidden&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34; {$total} &#34;</span> <span class="p">/&gt;</span>
ç¸½é‡‘é¡ï¼š {$total|number_format:&#34;&#34;} å…ƒ
</code></pre></div><p>Smarty çš„ PHP ç¨‹å¼ä¸­åªè¦é€™æ¨£å¯«ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$total</span> <span class="o">=</span> <span class="mi">21000</span><span class="p">;</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;total&#34;</span><span class="p">,</span> <span class="nv">$total</span><span class="p">);</span>
</code></pre></div><p>æ‰€ä»¥åœ¨ Smarty ä¸­æˆ‘å€‘åªè¦æŒ‡å®šä¸€æ¬¡è®Šæ•¸ï¼Œå‰©ä¸‹çš„äº¤çµ¦æ¨£ç‰ˆè‡ªè¡Œæ±ºå®šå³å¯ã€‚é€™æ¨£ç­è§£äº†å—ï¼Ÿé€™å°±æ˜¯è®“æ¨£ç‰ˆè‡ªè¡Œæ±ºå®šè®Šæ•¸å‘ˆç¾é¢¨è²Œçš„å¥½è™•ï¼</p>
<h2 id="æ§åˆ¶æ¨£ç‰ˆçš„å…§å®¹">æ§åˆ¶æ¨£ç‰ˆçš„å…§å®¹</h2>
<h3 id="é‡è¦†çš„å€å¡Š">é‡è¦†çš„å€å¡Š</h3>
<p>ä¸Šé¢ç­†è€…æåˆ°ï¼Œé‡å°å–®ä¸€çš„ä¸€éšé™£åˆ—ï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥å°‡å®ƒ assign åˆ°æ¨£ç‰ˆä¸Šï¼›ä½†å¦‚æœæˆ‘å€‘æƒ³å°‡è³‡æ–™åº«æ‰€é¸å–å‡ºä¾†çš„å¤šç­†è³‡æ–™ä¸€æ¬¡é¡¯ç¤ºåˆ°æ¨£ç‰ˆä¸Šæ™‚ï¼Œå‹¢å¿…è¦é€éè¿´åœˆå°‡è³‡æ–™å‚¾å°å‡ºä¾†ã€‚åœ¨æ¨£ç‰ˆè£¡ï¼Œæˆ‘å€‘å¯ä»¥åˆ©ç”¨é‡è¦†çš„å€å¡Šä¾†å®Œæˆé€™æ¨£çš„å‹•ä½œã€‚</p>
<p>åœ¨ Smarty æ¨£æ¿ä¸­ï¼Œæˆ‘å€‘è¦é‡è¦†ä¸€å€‹å€å¡Šæœ‰å…©ç¨®æ–¹å¼ï¼š <code>foreach</code> åŠ <code>section</code> ã€‚è€Œåœ¨ç¨‹å¼ä¸­æˆ‘å€‘å‰‡è¦ assign ä¸€å€‹é™£åˆ—ï¼Œé€™å€‹é™£åˆ—ä¸­å¯ä»¥åŒ…å«æ•¸çµ„é™£åˆ—ã€‚å°±åƒä¸‹é¢é€™å€‹ä¾‹å­ï¼š</p>
<p>é¦–å…ˆæˆ‘å€‘ä¾†çœ‹ PHP ç¨‹å¼æ˜¯å¦‚ä½•å¯«çš„ï¼š</p>
<p><strong>test2.php</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s2">&#34;main.php&#34;</span><span class="p">;</span>
<span class="nv">$array1</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="s2">&#34;è˜‹æœ&#34;</span><span class="p">,</span> <span class="mi">2</span> <span class="o">=&gt;</span> <span class="s2">&#34;é³³æ¢¨&#34;</span><span class="p">,</span> <span class="mi">3</span> <span class="o">=&gt;</span> <span class="s2">&#34;é¦™è•‰&#34;</span><span class="p">,</span> <span class="mi">4</span> <span class="o">=&gt;</span> <span class="s2">&#34;èŠ­æ¨‚&#34;</span><span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;array1&#34;</span><span class="p">,</span> <span class="nv">$array1</span><span class="p">);</span>
<span class="nv">$array2</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;index1&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data1-1&#34;</span><span class="p">,</span> <span class="s2">&#34;index2&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data1-2&#34;</span><span class="p">,</span> <span class="s2">&#34;index3&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data1-3&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;index1&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data2-1&#34;</span><span class="p">,</span> <span class="s2">&#34;index2&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data2-2&#34;</span><span class="p">,</span> <span class="s2">&#34;index3&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data2-3&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;index1&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data3-1&#34;</span><span class="p">,</span> <span class="s2">&#34;index2&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data3-2&#34;</span><span class="p">,</span> <span class="s2">&#34;index3&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data3-3&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;index1&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data4-1&#34;</span><span class="p">,</span> <span class="s2">&#34;index2&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data4-2&#34;</span><span class="p">,</span> <span class="s2">&#34;index3&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data4-3&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;index1&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data5-1&#34;</span><span class="p">,</span> <span class="s2">&#34;index2&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data5-2&#34;</span><span class="p">,</span> <span class="s2">&#34;index3&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;data5-3&#34;</span><span class="p">));</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;array2&#34;</span><span class="p">,</span> <span class="nv">$array2</span><span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">(</span><span class="s2">&#34;test2.htm&#34;</span><span class="p">);</span>
</code></pre></div><p>è€Œæ¨£ç‰ˆçš„å¯«æ³•å¦‚ä¸‹ï¼š</p>
<p><strong>templates/test2.htm</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Content-Type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;text/html; charset=utf-8&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>æ¸¬è©¦é‡è¦†å€å¡Š<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">pre</span><span class="p">&gt;</span>
ç›´æ¥å‘ˆç¾ array1
{$array1.1}
{$array1.2}
{$array1.3}
{$array1.4}
åˆ©ç”¨ foreach ä¾†å‘ˆç¾ array1
{foreach item=item1 from=$array1}
{$item1}
{/foreach}
åˆ©ç”¨ section ä¾†å‘ˆç¾ array1
{section name=sec1 loop=$array1}
{$array1[sec1]}
{/section}
åˆ©ç”¨ foreach ä¾†å‘ˆç¾ array2
{foreach item=index2 from=$array2}
{foreach key=key2 item=item2 from=$index2}
{$key2} : {$item2}
{/foreach}
{/foreach}
åˆ©ç”¨ section ä¾†å‘ˆç¾ array2
{section name=sec2 loop=$array2}
index1: {$array2[sec2].index1}
index2: {$array2[sec2].index2}
index3: {$array2[sec2].index3}
{/section}
<span class="p">&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><p>åŸ·è¡Œä¸Šä¾‹å¾Œï¼Œæˆ‘å€‘ç™¼ç¾ä¸ç®¡æ˜¯ <code>foreach</code> æˆ– <code>section</code> å…©å€‹åŸ·è¡Œçµæœæ˜¯ä¸€æ¨£çš„ã€‚é‚£éº¼å…©è€…åˆ°åº•æœ‰ä½•ä¸åŒå‘¢ï¼Ÿ</p>
<p>ç¬¬ä¸€å€‹å·®åˆ¥å¾ˆæ˜é¡¯ï¼Œå°±æ˜¯ <code>foreach</code> è¦ä»¥å·¢ç‹€è™•ç†çš„æ–¹å¼ä¾†å‘ˆç¾æˆ‘å€‘æ‰€ assign çš„å…©å±¤é™£åˆ—è®Šæ•¸ï¼Œè€Œ <code>section</code> å‰‡ä»¥<code>ä¸»é™£åˆ—[è¿´åœˆåç¨±].å­é™£åˆ—ç´¢å¼•</code>å³å¯å°‡æ•´å€‹é™£åˆ—å‘ˆç¾å‡ºä¾†ã€‚ç”±æ­¤å¯çŸ¥ï¼Œ Smarty åœ¨æ¨£ç‰ˆä¸­çš„ <code>foreach</code> å’Œ PHP ä¸­çš„ <code>foreach</code> æ˜¯ä¸€æ¨£çš„ï¼›è€Œ <code>section</code> å‰‡æ˜¯ Smarty ç‚ºäº†è™•ç†å¦‚ä¸Šåˆ—çš„é™£åˆ—è®Šæ•¸æ‰€ç™¼å±•å‡ºä¾†çš„æ•˜è¿°ã€‚ç•¶ç„¶ <code>section</code> çš„åŠŸèƒ½é‚„ä¸åªå¦‚æ­¤ï¼Œé™¤äº†ä¸‹ä¸€ç¯€æ‰€è«‡åˆ°çš„å·¢ç‹€è³‡æ–™å‘ˆç¾å¤–ï¼Œå®˜æ–¹æ‰‹å†Šä¸­ä¹Ÿæä¾›äº†å¥½å¹¾å€‹ <code>section</code> çš„æ‡‰ç”¨ç¯„ä¾‹ã€‚</p>
<p><strong>ä¸éè¦æ³¨æ„çš„æ˜¯ï¼Œä¸Ÿçµ¦ <code>section</code> çš„é™£åˆ—ç´¢å¼•å¿…é ˆæ˜¯å¾ 0 é–‹å§‹çš„æ­£æ•´æ•¸ï¼Œå³ <code>0, 1, 2, 3, ...</code>ã€‚</strong></p>
<p>å¦‚æœæ‚¨çš„é™£åˆ—ç´¢å¼•ä¸æ˜¯å¾ 0 é–‹å§‹çš„æ­£æ•´æ•¸ï¼Œé‚£éº¼å°±å¾—æ”¹ç”¨ <code>foreach</code> ä¾†å‘ˆç¾æ‚¨çš„è³‡æ–™ã€‚æ‚¨å¯ä»¥åƒè€ƒå®˜æ–¹è¨è«–å€ä¸­çš„<a href="http://www.phpinsider.com/smarty-forum/viewtopic.php?t=1574">æ­¤ç¯‡è¨è«–</a>ï¼Œå…¶ä¸­æ¢è¨äº† <code>section</code> å’Œ <code>foreach</code> çš„ç”¨æ³•ã€‚</p>
<h3 id="å·¢ç‹€è³‡æ–™çš„å‘ˆç¾">å·¢ç‹€è³‡æ–™çš„å‘ˆç¾</h3>
<p>æ¨£ç‰ˆå¼•æ“è£¡æœ€ä»¤äººå‚·è…¦ç­‹çš„å¤§æ¦‚å°±æ˜¯å·¢ç‹€è³‡æ–™çš„å‘ˆç¾å§ï¼Œè¨±å¤šè‘—åçš„æ¨£ç‰ˆå¼•æ“éƒ½æœƒç‰¹æ„å¼·èª¿é€™é»ï¼Œä¸éé€™å° Smarty ä¾†èªªå»æ˜¯å°å…’ç§‘ã€‚</p>
<p>æœ€å¸¸è¦‹åˆ°çš„å·¢ç‹€è³‡æ–™ï¼Œå°±ç®—è«–è­ ç¨‹å¼ä¸­çš„è¨è«–ä¸»é¡Œå€å§ã€‚å‡è¨­è¦å‘ˆç¾çš„çµæœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">table</span>
        <span class="na">summary</span><span class="o">=</span><span class="s">&#34;è¨è«–å€æ ¼å¼&#34;</span>
        <span class="na">width</span><span class="o">=</span><span class="s">&#34;200&#34;</span>
        <span class="na">border</span><span class="o">=</span><span class="s">&#34;1&#34;</span>
        <span class="na">align</span><span class="o">=</span><span class="s">&#34;center&#34;</span>
        <span class="na">cellpadding</span><span class="o">=</span><span class="s">&#34;3&#34;</span>
        <span class="na">cellspacing</span><span class="o">=</span><span class="s">&#34;0&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">colspan</span><span class="o">=</span><span class="s">&#34;2&#34;</span><span class="p">&gt;</span>å…¬å‘Šå€<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;25&#34;</span><span class="p">&gt;</span><span class="ni">&amp;nbsp;</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;164&#34;</span><span class="p">&gt;</span>ç«™å‹™å…¬å‘Š<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">colspan</span><span class="o">=</span><span class="s">&#34;2&#34;</span><span class="p">&gt;</span>æ–‡å­¸å°ˆå€<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;164&#34;</span> <span class="na">rowspan</span><span class="o">=</span><span class="s">&#34;2&#34;</span><span class="p">&gt;</span><span class="ni">&amp;nbsp;</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;164&#34;</span><span class="p">&gt;</span>å¥‡æ–‡å…±è³<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>å¥½æ›¸ä»‹ç´¹<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">colspan</span><span class="o">=</span><span class="s">&#34;2&#34;</span><span class="p">&gt;</span>é›»è…¦å°ˆå€<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;164&#34;</span> <span class="na">rowspan</span><span class="o">=</span><span class="s">&#34;2&#34;</span><span class="p">&gt;</span><span class="ni">&amp;nbsp;</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;164&#34;</span><span class="p">&gt;</span>è»Ÿé«”è¨è«–<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>ç¡¬é«”é€±é‚Š<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</code></pre></div><p>ç¨‹å¼ä¸­æˆ‘å€‘å…ˆä»¥éœæ…‹è³‡æ–™ç‚ºä¾‹ï¼š</p>
<p><strong>test3_1.php</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s2">&#34;main.php&#34;</span><span class="p">;</span>
<span class="nv">$forum</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;category_id&#34;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;category_name&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;å…¬å‘Šå€&#34;</span><span class="p">,</span>
        <span class="s2">&#34;topic&#34;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="k">array</span><span class="p">(</span><span class="s2">&#34;topic_id&#34;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;topic_name&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;ç«™å‹™å…¬å‘Š&#34;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;category_id&#34;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&#34;category_name&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;æ–‡å­¸å°ˆå€&#34;</span><span class="p">,</span>
        <span class="s2">&#34;topic&#34;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="k">array</span><span class="p">(</span><span class="s2">&#34;topic_id&#34;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&#34;topic_name&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;å¥½æ›¸ä»‹ç´¹&#34;</span><span class="p">),</span>
            <span class="k">array</span><span class="p">(</span><span class="s2">&#34;topic_id&#34;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&#34;topic_name&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;å¥‡æ–‡å…±è³&#34;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;category_id&#34;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&#34;category_name&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;é›»è…¦å°ˆå€&#34;</span><span class="p">,</span>
        <span class="s2">&#34;topic&#34;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="k">array</span><span class="p">(</span><span class="s2">&#34;topic_id&#34;</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&#34;topic_name&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;ç¡¬é«”é€±é‚Š&#34;</span><span class="p">),</span>
            <span class="k">array</span><span class="p">(</span><span class="s2">&#34;topic_id&#34;</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&#34;topic_name&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;è»Ÿé«”è¨è«–&#34;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;forum&#34;</span><span class="p">,</span> <span class="nv">$forum</span><span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">(</span><span class="s2">&#34;test3.htm&#34;</span><span class="p">);</span>
</code></pre></div><p>æ¨£ç‰ˆçš„å¯«æ³•å¦‚ä¸‹ï¼š</p>
<p><strong>templates/test3.htm</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>å·¢ç‹€è¿´åœˆæ¸¬è©¦<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">table</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;200&#34;</span> <span class="na">border</span><span class="o">=</span><span class="s">&#34;1&#34;</span> <span class="na">align</span><span class="o">=</span><span class="s">&#34;center&#34;</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">&#34;3&#34;</span> <span class="na">cellspacing</span><span class="o">=</span><span class="s">&#34;0&#34;</span><span class="p">&gt;</span>
    {section name=sec1 loop=$forum}
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">colspan</span><span class="o">=</span><span class="s">&#34;2&#34;</span><span class="p">&gt;</span> {$forum[sec1].category_name} <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {section name=sec2 loop=$forum[sec1].topic}
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;25&#34;</span><span class="p">&gt;</span><span class="ni">&amp;nbsp;</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;164&#34;</span><span class="p">&gt;</span> {$forum[sec1].topic[sec2].topic_name} <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {/section}
    {/section}
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><p>åŸ·è¡Œçš„çµæœå°±åƒç­†è€…ä¸Šé¢èˆ‰çš„ä¾‹å­ä¸€æ¨£ã€‚</p>
<p>å› æ­¤å‘¢ï¼Œåœ¨ç¨‹å¼ä¸­æˆ‘å€‘åªè¦æƒ³è¾¦æ³•æŠŠæ‰€è¦é‡è¦†å€¼ä¸€å±¤ä¸€å±¤çš„å¡åˆ°é™£åˆ—ä¸­ï¼Œå†åˆ©ç”¨ <code>{ç¬¬ä¸€å±¤é™£åˆ—[è¿´åœˆ1].ç¬¬äºŒå±¤é™£åˆ—[è¿´åœˆ2].ç¬¬ä¸‰å±¤é™£åˆ—[è¿´åœˆ3]. ... .é™£åˆ—ç´¢å¼•}</code> é€™æ¨£çš„æ–¹å¼ä¾†é¡¯ç¤ºæ¯ä¸€å€‹å·¢ç‹€è¿´åœˆä¸­çš„å€¼ã€‚è‡³æ–¼ç”¨ä»€éº¼æ–¹æ³•å‘¢ï¼Ÿä¸‹ä¸€ç¯€ä½¿ç”¨è³‡æ–™åº«æ™‚æˆ‘å€‘å†æã€‚</p>
<h3 id="è½‰æ›è³‡æ–™åº«ä¸­çš„è³‡æ–™">è½‰æ›è³‡æ–™åº«ä¸­çš„è³‡æ–™</h3>
<p>ä¸Šé¢æåˆ°å¦‚ä½•é¡¯ç¤ºå·¢ç‹€è¿´åœˆï¼Œè€Œå¯¦éš›ä¸Šæ‡‰ç”¨æ™‚æˆ‘å€‘çš„è³‡æ–™å¯èƒ½æ˜¯å¾è³‡æ–™åº«ä¸­æŠ“å–å‡ºä¾†çš„ï¼Œæ‰€ä»¥æˆ‘å€‘å°±å¾—æƒ³è¾¦æ³•æŠŠè³‡æ–™åº«çš„è³‡æ–™è®Šæˆä¸Šè¿°çš„å¤šé‡é™£åˆ—çš„å½¢å¼ã€‚é€™è£¡ç­†è€…ç”¨ <a href="http://www.php.net/manual/en/ref.mysqli.php">MySQLi</a> ä¾†æŠ“å–è³‡æ–™åº«ä¸­çš„è³‡æ–™ï¼Œå¦‚æœå„ä½æœ‰å…¶ä»–è‡ªå·±å–œå¥½çš„è³‡æ–™åº«æŠ½è±¡å¥—ä»¶çš„è©±ï¼ŒåŸç†ä¹Ÿæ˜¯å·®ä¸å¤šçš„ã€‚</p>
<p>æˆ‘å€‘åªä¿®æ”¹ PHP ç¨‹å¼ï¼Œæ¨£ç‰ˆé‚„æ˜¯ä¸Šé¢é‚£å€‹ (é€™å°±æ˜¯æ¨£ç‰ˆå¼•æ“çš„å¥½è™•~)ï¼Œè€Œä¸”æŠ“å‡ºä¾†çš„è³‡æ–™å°±æ˜¯ä¸Šé¢çš„ä¾‹å­ã€‚</p>
<p><strong>test3_2.php</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s2">&#34;main.php&#34;</span><span class="p">;</span>
<span class="c1">// å»ºç«‹è³‡æ–™åº«é€£çµ
</span><span class="c1"></span><span class="nv">$mysqli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">mysqli</span><span class="p">(</span><span class="s2">&#34;localhost&#34;</span><span class="p">,</span> <span class="s2">&#34;username&#34;</span><span class="p">,</span> <span class="s2">&#34;password&#34;</span><span class="p">,</span> <span class="s2">&#34;testdb&#34;</span><span class="p">);</span>
<span class="c1">// å…ˆå»ºç«‹ç¬¬ä¸€å±¤é™£åˆ—åŠ SQL æŒ‡ä»¤
</span><span class="c1"></span><span class="nv">$category</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$sql1</span> <span class="o">=</span> <span class="s2">&#34;SELECT category_id, category_name FROM categories&#34;</span><span class="p">;</span>
<span class="c1">// æŠ“å–ç¬¬ä¸€å±¤è¿´åœˆçš„è³‡æ–™
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="nv">$result1</span> <span class="o">=</span> <span class="nv">$mysqli</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="nv">$sql1</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="nv">$item_category</span> <span class="o">=</span> <span class="nv">$result1</span><span class="o">-&gt;</span><span class="na">fetch_assoc</span><span class="p">())</span> <span class="p">{</span>
        <span class="c1">// å»ºç«‹ç¬¬äºŒå±¤é™£åˆ—åŠ SQL æŒ‡ä»¤
</span><span class="c1"></span>        <span class="nv">$topic</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
        <span class="nv">$sql2</span> <span class="o">=</span> <span class="nx">sprintf</span><span class="p">(</span>
            <span class="s2">&#34;SELECT topic_id, topic_name FROM topics WHERE category_id = &#39;%s&#39;&#34;</span><span class="p">,</span>
            <span class="nv">$item_category</span><span class="p">[</span><span class="s1">&#39;category_id&#39;</span><span class="p">]</span>
        <span class="p">);</span>
        <span class="c1">// æŠ“å–ç¬¬äºŒå±¤è¿´åœˆçš„è³‡æ–™
</span><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nv">$result2</span> <span class="o">=</span> <span class="nv">$mysqli</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="nv">$sql2</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">while</span> <span class="p">(</span><span class="nv">$item_topic</span> <span class="o">=</span> <span class="nv">$result2</span><span class="o">-&gt;</span><span class="na">fetch_assoc</span><span class="p">())</span> <span class="p">{</span>
                <span class="c1">// æŠŠæŠ“å–çš„è³‡æ–™æ¨å…¥ç¬¬äºŒå±¤é™£åˆ—ä¸­
</span><span class="c1"></span>                <span class="nx">array_push</span><span class="p">(</span><span class="nv">$topic</span><span class="p">,</span> <span class="nv">$item_topic</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nv">$result2</span><span class="o">-&gt;</span><span class="na">close</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="c1">// æŠŠç¬¬äºŒå±¤é™£åˆ—æŒ‡å®šç‚ºç¬¬ä¸€å±¤é™£åˆ—æ‰€æŠ“å–çš„è³‡æ–™ä¸­çš„ä¸€å€‹æˆå“¡
</span><span class="c1"></span>        <span class="nv">$item_category</span><span class="p">[</span><span class="s1">&#39;topic&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$topic</span><span class="p">;</span>
        <span class="c1">// æŠŠç¬¬ä¸€å±¤è³‡æ–™æ¨å…¥ç¬¬ä¸€å±¤é™£åˆ—ä¸­
</span><span class="c1"></span>        <span class="nx">array_push</span><span class="p">(</span><span class="nv">$category</span><span class="p">,</span> <span class="nv">$item_category</span><span class="p">);</span>
        <span class="nv">$result1</span><span class="o">-&gt;</span><span class="na">close</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nv">$mysqli</span><span class="o">-&gt;</span><span class="na">close</span><span class="p">();</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;forum&#34;</span><span class="p">,</span> <span class="nv">$category</span><span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">(</span><span class="s2">&#34;test3.htm&#34;</span><span class="p">);</span>
</code></pre></div><p>åœ¨è³‡æ–™åº«æŠ“å–ä¸€ç­†è³‡æ–™å¾Œï¼Œæˆ‘å€‘å¾—åˆ°çš„æ˜¯ä¸€å€‹åŒ…å«è©²ç­†è³‡æ–™çš„é™£åˆ—ã€‚é€é <code>while</code> æ•˜è¿°åŠ <code>array_push</code> å‡½å¼ï¼Œæˆ‘å€‘å°‡è³‡æ–™åº«ä¸­çš„è³‡æ–™ä¸€ç­†ä¸€ç­†å¡åˆ°é™£åˆ—è£¡ã€‚å¦‚æœæ‚¨åªç”¨åˆ°å–®å±¤è¿´åœˆï¼Œå°±æŠŠç¬¬äºŒå±¤è¿´åœˆ (ç´…è‰²çš„éƒ¨ä»½) å»æ‰å³å¯ã€‚</p>
<h3 id="æ±ºå®šå…§å®¹æ˜¯å¦é¡¯ç¤º">æ±ºå®šå…§å®¹æ˜¯å¦é¡¯ç¤º</h3>
<p>è¦æ±ºå®šæ˜¯å¦é¡¯ç¤ºå…§å®¹ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ <code>if</code> é€™å€‹èªæ³•ä¾†åšé¸æ“‡ã€‚ä¾‹å¦‚å¦‚æœä½¿ç”¨è€…å·²ç¶“ç™»å…¥çš„è©±ï¼Œæˆ‘å€‘çš„æ¨£ç‰ˆå°±å¯ä»¥é€™æ¨£å¯«ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">{if $is_login == true}
é¡¯ç¤ºä½¿ç”¨è€…æ“ä½œé¸å–®
{else}
é¡¯ç¤ºè¼¸å…¥å¸³è™Ÿå’Œå¯†ç¢¼çš„è¡¨å–®
{/if}
</code></pre></div><p><code>if</code> èªæ³•ä¸€èˆ¬çš„æ‡‰ç”¨å¯ä»¥åƒç…§å®˜æ–¹ä½¿ç”¨èªªæ˜ï¼Œæ‰€ä»¥ç­†è€…åœ¨é€™è£¡å°±ä¸è©³åŠ ä»‹ç´¹äº†ã€‚ä¸éç­†è€…ç™¼ç¾äº†ä¸€å€‹æœ‰è¶£çš„æ‡‰ç”¨ï¼šå¸¸å¸¸æœƒçœ‹åˆ°ç¨‹å¼è£¡è¦ç”¢ç”Ÿé€™æ¨£çš„ä¸€å€‹è¡¨æ ¼ï¼š (æ•¸å­—ä»£è¡¨çš„æ˜¯è³‡æ–™é›†çš„é †åº)</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">table</span>
        <span class="na">summary</span><span class="o">=</span><span class="s">&#34;æ©«å‘é‡è¦†è¡¨æ ¼&#34;</span>
        <span class="na">width</span><span class="o">=</span><span class="s">&#34;100&#34;</span>
        <span class="na">border</span><span class="o">=</span><span class="s">&#34;1&#34;</span>
        <span class="na">align</span><span class="o">=</span><span class="s">&#34;center&#34;</span>
        <span class="na">cellpadding</span><span class="o">=</span><span class="s">&#34;3&#34;</span>
        <span class="na">cellspacing</span><span class="o">=</span><span class="s">&#34;0&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">align</span><span class="o">=</span><span class="s">&#34;center&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>2<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">align</span><span class="o">=</span><span class="s">&#34;center&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>3<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>4<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">align</span><span class="o">=</span><span class="s">&#34;center&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>5<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>6<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">align</span><span class="o">=</span><span class="s">&#34;center&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>7<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>8<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</code></pre></div><p>é€™å€‹ç­†è€…ç¨±ä¹‹ç‚ºã€Œæ©«å‘é‡è¦†è¡¨æ ¼ã€ã€‚å®ƒçš„ç‰¹è‰²å’Œå‚³çµ±çš„ç¸±å‘é‡è¦†ä¸åŒï¼Œå‰å¹¾ç¯€æˆ‘å€‘çœ‹åˆ°çš„é‡è¦†è¡¨æ ¼éƒ½æ˜¯å¾ä¸Šè€Œä¸‹ï¼Œä¸€åˆ—åªæœ‰ä¸€ç­†è³‡æ–™ã€‚è€Œæ©«å‘é‡è¦†è¡¨æ ¼å‰‡å¯ä»¥æ©«å‘åœ°åœ¨ä¸€åˆ—ä¸­ç”¢ç”Ÿ n ç­†è³‡æ–™å¾Œï¼Œå†æ›ä¸‹ä¸€åˆ—ï¼Œç›´åˆ°æ•´å€‹è¿´åœˆçµæŸã€‚è¦é”åˆ°é€™æ¨£çš„åŠŸèƒ½ï¼Œæœ€ç°¡å–®çš„æ–¹å¼åªéœ€è¦ <code>section</code> å’Œ <code>if</code> æ­é…å³å¯ã€‚</p>
<p>æˆ‘å€‘ä¾†çœ‹çœ‹ä¸‹é¢é€™å€‹ä¾‹å­ï¼š</p>
<p><strong>test4.php</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s2">&#34;main.php&#34;</span><span class="p">;</span>
<span class="nv">$my_array</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;value&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;0&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;value&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;1&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;value&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;2&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;value&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;3&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;value&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;4&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;value&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;5&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;value&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;6&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;value&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;7&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;value&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;8&#34;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&#34;value&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;9&#34;</span><span class="p">)</span>
<span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;my_array&#34;</span><span class="p">,</span> <span class="nv">$my_array</span><span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">(</span><span class="s1">&#39;test4.htm&#39;</span><span class="p">);</span>

</code></pre></div><p>æ¨£ç‰ˆçš„å¯«æ³•å¦‚ä¸‹ï¼š</p>
<p><strong>templates/test4.htm</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>æ©«å‘é‡è¦†è¡¨æ ¼æ¸¬è©¦<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">table</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;500&#34;</span> <span class="na">border</span><span class="o">=</span><span class="s">&#34;1&#34;</span> <span class="na">cellspacing</span><span class="o">=</span><span class="s">&#34;0&#34;</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">&#34;3&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
{section name=sec1 loop=$my_array}
<span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span> {$my_array[sec1].value} <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
{if $smarty.section.sec1.rownum is div by 2
<span class="err">&amp;&amp;</span> $smarty.section.sec1.rownum <span class="err">&lt;</span> $smarty.section.sec1.total}
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
{/if}
{/section}
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><p>é‡é»åœ¨æ–¼ <code>$smarty.section.sec1.rownum</code> åŠ <code>$smarty.section.sec1.total</code> é€™å…©å€‹ Smarty è®Šæ•¸ï¼Œåœ¨ <code>section</code> è¿´åœˆä¸­é€™å€‹ <code>rownum</code> è®Šæ•¸æœƒå–å¾—å¾ 1 é–‹å§‹çš„ ç´¢å¼•å€¼ï¼Œæ‰€ä»¥ç•¶ <code>rownum</code> èƒ½è¢« 2 é™¤ç›¡æ™‚ï¼Œå°±è¼¸å‡º <strong><code>&lt;/tr&gt;&lt;tr&gt;</code></strong> ä½¿è¡¨æ ¼æ›åˆ— (æ³¨æ„ï¼æ˜¯ <strong><code>&lt;/tr&gt;</code></strong> åœ¨å‰é¢ <strong><code>&lt;tr&gt;</code></strong> åœ¨å¾Œé¢) ï¼Œå› æ­¤æ•¸å­— 2 å°±æ˜¯æˆ‘å€‘åœ¨ä¸€åˆ—ä¸­æƒ³è¦å‘ˆç¾çš„è³‡æ–™ç­†æ•¸ã€‚è€Œ <code>total</code> é€™å€‹è®Šæ•¸æœƒå›å‚³è³‡æ–™ç¸½ç­†æ•¸ï¼Œæ‰€ä»¥è®“ <code>rownum</code> åœ¨å°æ–¼ <code>total</code> é€™å€‹è®Šæ•¸æ‰åšè¼¸å‡º <code>&lt;/tr&gt;&lt;tr&gt;</code> çš„å‹•ä½œï¼Œæœƒç¢ºä¿ä¸æœƒå‡ºç¾æœ€å¾Œä¸€å€‹ç©ºçš„ <code>&lt;tr&gt;&lt;/tr&gt;</code> ã€‚</p>
<p>å„ä½å¯ä»¥ç”±æ­¤å»è®ŠåŒ–å…¶ä»–ä¸åŒçš„å‘ˆç¾æ–¹å¼ã€‚</p>
<h3 id="è¼‰å…¥å¤–éƒ¨å…§å®¹">è¼‰å…¥å¤–éƒ¨å…§å®¹</h3>
<p>æˆ‘å€‘å¯ä»¥åœ¨æ¨£ç‰ˆå…§è¼‰å…¥ PHP ç¨‹å¼ç¢¼æˆ–æ˜¯å¦ä¸€å€‹å­æ¨£ç‰ˆï¼Œåˆ†åˆ¥æ˜¯ä½¿ç”¨ <code>include_php</code> åŠ <code>include</code> é€™å…©å€‹ Smarty æ¨£ç‰ˆèªæ³•ï¼› <code>include_php</code> ç­†è€…è¼ƒå°‘ç”¨ï¼Œä½¿ç”¨æ–¹å¼å¯ä»¥æŸ¥è©¢å®˜æ–¹æ‰‹å†Šï¼Œé€™è£¡ä¸å†æ•˜è¿°ã€‚</p>
<p>åœ¨ä½¿ç”¨ <code>include</code> æ™‚ï¼Œæˆ‘å€‘å¯ä»¥é å…ˆè¼‰å…¥å­æ¨£ç‰ˆï¼Œæˆ–æ˜¯å‹•æ…‹è¼‰å…¥å­æ¨£ç‰ˆã€‚é å…ˆè¼‰å…¥é€šå¸¸ä½¿ç”¨åœ¨æœ‰å…±åŒçš„æ–‡ä»¶æ¨™é ­åŠç‰ˆæ¬Šå®£å‘Šï¼›è€Œå‹•æ…‹è¼‰å…¥å‰‡å¯ä»¥ç”¨åœ¨çµ±ä¸€çš„æ¡†æ¶é ï¼Œè€Œé€²ä¸€æ­¥é”åˆ°å¦‚ Winamp èˆ¬å¯æ› Skin ã€‚ç•¶ç„¶é€™å…©ç¨®æˆ‘å€‘ä¹Ÿå¯ä»¥æ··ç”¨ï¼Œè¦–ç‹€æ³è€Œå®šã€‚</p>
<p>æˆ‘å€‘ä¾†çœ‹çœ‹ä¸‹é¢é€™å€‹ä¾‹å­ï¼š</p>
<p><strong>test5.php</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s2">&#34;main.php&#34;</span><span class="p">;</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;title&#34;</span><span class="p">,</span> <span class="s2">&#34;Include æ¸¬è©¦&#34;</span><span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;content&#34;</span><span class="p">,</span> <span class="s2">&#34;é€™æ˜¯æ¨£ç‰ˆ 2 ä¸­çš„è®Šæ•¸&#34;</span><span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s2">&#34;dyn_page&#34;</span><span class="p">,</span> <span class="s2">&#34;test5_3.htm&#34;</span><span class="p">);</span>
<span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">(</span><span class="s1">&#39;test5_1.htm&#39;</span><span class="p">);</span>
</code></pre></div><p>æ¨£ç‰ˆ 1 çš„å¯«æ³•å¦‚ä¸‹ï¼š</p>
<p><strong>templates/test5_1.htm</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Content-Type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;text/html; charset=utf-8&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span> {$title} <span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
{include file=&#34;test5_2.htm&#34;}
{include file=$dyn_page}
{include file=&#34;test5_4.htm&#34; custom_var=&#34;è‡ªè¨‚è®Šæ•¸çš„å…§å®¹&#34;}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><p>æ¨£ç‰ˆ 2 çš„å¯«æ³•å¦‚ä¸‹ï¼š</p>
<p><strong>templates/test5_2.htm</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{$content}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></div><p>æ¨£ç‰ˆ 3 çš„å¯«æ³•å¦‚ä¸‹ï¼š</p>
<p><strong>templates/test5_3.htm</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>é€™æ˜¯æ¨£ç‰ˆ 3 çš„å…§å®¹<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></div><p>æ¨£ç‰ˆ 4 çš„å¯«æ³•å¦‚ä¸‹ï¼š</p>
<p><strong>templates/test5_4.htm</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{$custom_var}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></div><p>é€™è£¡æ³¨æ„å¹¾å€‹é‡é»ï¼š</p>
<ul>
<li>æ¨£ç‰ˆçš„ä½ç½®éƒ½æ˜¯ä»¥å…ˆå‰å®šç¾©çš„ <code>template_dir</code> ç‚ºåŸºæº–ã€‚</li>
<li>æ‰€æœ‰ <code>include</code> é€²ä¾†çš„å­æ¨£ç‰ˆä¸­ï¼Œå…¶è®Šæ•¸ä¹Ÿæœƒè¢«è§£è­¯ã€‚</li>
<li><code>include</code> ä¸­å¯ä»¥ç”¨ <code>è®Šæ•¸åç¨±=è®Šæ•¸å…§å®¹</code> ä¾†æŒ‡å®šå¼•å«é€²ä¾†çš„æ¨£ç‰ˆä¸­æ‰€åŒ…å«çš„è®Šæ•¸ï¼Œå¦‚åŒä¸Šé¢æ¨£ç‰ˆ 4 çš„åšæ³•ã€‚</li>
</ul>
<h2 id="ç¯„ä¾‹ä¸‹è¼‰">ç¯„ä¾‹ä¸‹è¼‰</h2>
<p><a href="/resources/smarty_basic/example.zip">ä¸‹è¼‰</a>æœ¬æ–‡æ‰€æœ‰ç¯„ä¾‹ã€‚</p>
<p>è€Œå…¶ä»– Smarty æ›´é€²éšçš„éƒ¨ä»½ï¼Œå°±è«‹çœ‹ç­†è€…çš„æ‹™ä½œï¼šã€Œ <a href="http://www.flag.com.tw/book/5105.asp?bokno=F5471">PHP Smarty æ¨£ç‰ˆå¼•æ“</a>ã€ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>ç°¡å–®æ¸¬è©¦ PHP åŸ·è¡Œçš„æ•ˆèƒ½</title>
			<link>https://jaceju.net/php-profiling-with-xdebug/</link>
			<pubDate>Mon, 30 May 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/php-profiling-with-xdebug/</guid>
			<description>æœ‰æ™‚å€™åŸ·è¡ŒæŸäº› PHP ç¶²é æ™‚ï¼Œéƒ½æœƒè¦ºå¾—å¾ˆæ…¢ï¼Œä½†åˆä¸æ›‰å¾—å•é¡Œå‡ºåœ¨å“ªï¼Ÿä»¥ä¸‹ä»‹ç´¹ä¸€å€‹å¥½å·¥å…·ï¼Œå¯ä»¥è®“æˆ‘å€‘å¾ˆå®¹æ˜“çŸ¥é“æˆ‘å€‘å¯«çš„ PHP åŸ·è¡Œç“¶é ¸åœ¨å“ªè£¡ã€‚ Xdebug æ˜¯ PHP ä¸Šçš„ä¸€å€‹</description>
			<content type="html"><![CDATA[<p>æœ‰æ™‚å€™åŸ·è¡ŒæŸäº› PHP ç¶²é æ™‚ï¼Œéƒ½æœƒè¦ºå¾—å¾ˆæ…¢ï¼Œä½†åˆä¸æ›‰å¾—å•é¡Œå‡ºåœ¨å“ªï¼Ÿä»¥ä¸‹ä»‹ç´¹ä¸€å€‹å¥½å·¥å…·ï¼Œå¯ä»¥è®“æˆ‘å€‘å¾ˆå®¹æ˜“çŸ¥é“æˆ‘å€‘å¯«çš„ PHP åŸ·è¡Œç“¶é ¸åœ¨å“ªè£¡ã€‚</p>
<p><a href="http://www.xdebug.org/">Xdebug</a> æ˜¯ PHP ä¸Šçš„ä¸€å€‹æ“´å……æ¨¡çµ„ï¼Œå®ƒå¯ä»¥å”åŠ©æˆ‘å€‘è¿½è¹¤ç¨‹å¼ä¸Šçš„åµéŒ¯è¨Šæ¯ã€ç¨‹å¼åŸ·è¡Œäº†å“ªäº›å€æ®µï¼Œä»¥åŠå…¶ä»–è¨±å¤šæœ‰ç”¨çš„è³‡è¨Šã€‚ä¸éé€™è£¡æˆ‘å€‘åƒ…æœƒç”¨åˆ°æª¢è¦–åŸ·è¡Œæ•ˆèƒ½ä¸Šçš„åŠŸèƒ½ã€‚æˆ‘ç¤ºç¯„çš„å¹³å°æ˜¯ä»¥ Windows + Apache 2.0 ç‚ºä¸»ï¼ŒPHP ç‰ˆæœ¬ç‚º 5.0.4 ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="å®‰è£">å®‰è£</h2>
<p>é¦–å…ˆæˆ‘å€‘åˆ° <a href="http://www.xdebug.org/download.php">Xdebug å®˜æ–¹ç¶²ç«™</a> ä¸‹è¼‰æœ€æ–°çš„ Xdebug 2.1.0 (è«‹å°æ‡‰ä½ çš„ PHP ç‰ˆæœ¬)ï¼Œä¸¦å°‡å®ƒè¤‡è£½åˆ° PHP å®‰è£ç›®éŒ„ çš„ <code>ext</code> å­è³‡æ–™å¤¾è£¡ã€‚</p>
<p>**è£œå……ï¼š**è«‹è¨˜å¾—è¨­å®š <code>php.ini</code> çš„ <code>extension_dir=&quot;c:/php5/ext/&quot;</code> ï¼›æˆ–æ˜¯æŠŠ Windows çš„ PATH ç³»çµ±è®Šæ•¸å¾Œé¢åŠ ä¸Š <code>;c:\php5\ext</code> ï¼Œç„¶å¾Œé‡æ–°å•Ÿå‹•é›»è…¦ã€‚</p>
<p>**è£œå……ï¼š**æœ‰æ™‚å€™ Windows é‚„æ˜¯ä¸èƒ½æ‰¾åˆ° <code>ext</code> åº•ä¸‹çš„ dll æª” (ä¾‹å¦‚ PHP 5.1 å°±æœƒå¦‚æ­¤) ï¼Œé€™æ™‚å€™åªè¦æŠŠ <code>c:\php5\ext;</code> æ”¹åŠ åœ¨ PATH è®Šæ•¸ä¹‹å‰å°±è¡Œäº†ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code>c:\php5;c:\php5\ext;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem

</code></pre><p>æ¥è‘—åœ¨ PHP.INI ä¸­åŠ å…¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">[Xdebug] zend_extension_ts</span><span class="o">=</span><span class="s">php_xdebug.dll</span>
<span class="na">xdebug.profiler_enable</span><span class="o">=</span><span class="s">on</span>
<span class="na">xdebug.trace_output_dir</span><span class="o">=</span><span class="s">â€œC:/TEMP/php/xdebugâ€</span>
<span class="na">xdebug.profiler_output_dir</span><span class="o">=</span><span class="s">â€œC:/TEMP/php/xdebugâ€ ```</span>

</code></pre></div><p>è¨˜å¾—é‡æ–°å•Ÿå‹• Apache ï¼Œå¦å‰‡ Xdebug æ˜¯ä¸æœƒå‹•ä½œçš„ã€‚</p>
<p>æª¢è¦– <code>phpinfo()</code> ï¼š</p>
<p><img src="/resources/xdebug_profile/01.gif" alt=""></p>
<p>å‡ºç¾ Xdebug çš„è©±ï¼Œå°±ç®—å®Œæˆäº†ã€‚</p>
<h2 id="æª¢è¦–åŸ·è¡Œæ•ˆèƒ½">æª¢è¦–åŸ·è¡Œæ•ˆèƒ½</h2>
<p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘ä»»æ„åŸ·è¡Œä¸€å€‹ PHP ç¨‹å¼ï¼Œè®“ Xdebug å°å®ƒåšå´å¯« (profiling) ã€‚ç„¶å¾Œæˆ‘å€‘åˆ° <code>C:\TEMP\php\xdebug\</code> é€™å€‹è³‡æ–™å¤¾ä¸‹ï¼Œå°±æœƒçœ‹åˆ°æ•¸æ”¯ <code>cachegrind.out.xxxxxxx</code> æª”ã€‚ç”¨æ–‡å­—ç·¨è¼¯å™¨é–‹å•Ÿå®ƒï¼Œè£¡é¢å°±æ˜¯æˆ‘å€‘å‰›å‰›åŸ·è¡Œçš„ PHP æª”æ‰€ç”¢ç”Ÿçš„ç›¸é—œåµéŒ¯è³‡è¨Šã€‚</p>
<p>ä¸éé€™æ¨£å¯¦åœ¨æ˜¯ä¸å®¹æ˜“çœ‹æ‡‚å®ƒï¼Œæˆ‘å€‘å¯ä»¥å€Ÿé‡é€™å€‹å·¥å…·ï¼š <a href="http://sourceforge.net/projects/wincachegrind">WinCacheGrind</a> ä¾†å°‡é€™äº›æ–‡å­—æª”ä½œè¼ƒå¥½æ ¼å¼çš„è¼¸å‡ºã€‚ä¸€æ¨£ä¸‹è¼‰ WinCacheGrind å›ä¾†å®‰è£ï¼Œè€Œå®‰è£æ­¥é©Ÿå¾ˆç°¡å–®ï¼Œå°±æ˜¯ä¸€ç›´æŒ‰ã€Œä¸‹ä¸€æ­¥ã€å°±å¯ä»¥å®‰è£å®Œæˆï¼Œé€™è£¡æˆ‘å°±ä¸å¤šåŠ æè¿°ã€‚</p>
<p>å®‰è£å¥½å¾Œï¼Œé–‹å•Ÿ WinCacheGrind ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ç•«é¢ï¼š</p>
<p><img src="/resources/xdebug_profile/02.gif" alt=""></p>
<p>æ¥è‘—é¸æ“‡ <code>Tools / Optionsâ€¦</code> ï¼Œåœ¨ <code>Main</code> é ç±¤ä¸­çš„ <code>Working folder</code> é¸æ“‡ <code>C:\Temp\php\xdebug</code> å¾Œï¼ŒæŒ‰ä¸‹ <code>OK</code> ã€‚</p>
<p><img src="/resources/xdebug_profile/03.gif" alt=""></p>
<p>é»å…©ä¸‹æƒ³æŸ¥çœ‹çš„ <code>cachegrint.out</code> ï¼Œå°±æœƒé¡¯ç¤ºå‡ºé€™æ”¯ç¨‹å¼æ‰€åŸ·è¡Œéçš„å‡½å¼ã€ç‰©ä»¶ã€ä»¥åŠå®ƒå€‘çš„åŸ·è¡Œç§’æ•¸ã€‚</p>
<p><img src="/resources/xdebug_profile/05.gif" alt=""></p>
<p>å¦‚æœå¤§å®¶æœ‰ç™¼ç¾ä»€éº¼ Xdebug æœ‰ä»€éº¼æ›´æ£’çš„åŠŸèƒ½ï¼Œæ­¡è¿åˆ†äº«ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>CSS æ’ç‰ˆè§€å¿µï¼šFloat</title>
			<link>https://jaceju.net/css-float/</link>
			<pubDate>Fri, 13 May 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/css-float/</guid>
			<description>å¦‚æœèªªæµ®å‹• (float) æ˜¯ CSS æ’ç‰ˆçš„é‡è¦æŠ€å·§ä¹‹ä¸€ï¼Œå¯¦åœ¨ä¸€é»ä¹Ÿä¸ç‚ºéï¼›å¾ˆå¤šè‘—åçš„ CSS ç‰ˆå‹éƒ½æœƒç”¨åˆ°æµ®å‹•æŠ€å·§ã€‚æœ¬æ–‡å°±ä¾†ä»‹ç´¹æµ®å‹•æ‰€éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä»¥åŠå¯èƒ½æœƒç¢°åˆ°çš„å•</description>
			<content type="html"><![CDATA[<p>å¦‚æœèªªæµ®å‹• (float) æ˜¯ CSS æ’ç‰ˆçš„é‡è¦æŠ€å·§ä¹‹ä¸€ï¼Œå¯¦åœ¨ä¸€é»ä¹Ÿä¸ç‚ºéï¼›å¾ˆå¤šè‘—åçš„ CSS ç‰ˆå‹éƒ½æœƒç”¨åˆ°æµ®å‹•æŠ€å·§ã€‚æœ¬æ–‡å°±ä¾†ä»‹ç´¹æµ®å‹•æ‰€éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä»¥åŠå¯èƒ½æœƒç¢°åˆ°çš„å•é¡Œã€‚</p>
<!-- raw HTML omitted -->
<p>æµ®å‹•æ˜¯è¨­å®šå…ƒç´ çš„ <code>float</code> å±¬æ€§ï¼Œæˆ‘å€‘èƒ½è¨­å®šå‘å·¦ (<code>left</code>) æˆ–å‘å³ (<code>right</code>) æµ®å‹•ã€‚æµ®å‹•åŸºæœ¬ä¸Šæœƒä½¿å¾—å…ƒç´ åœ¨æœ‰è¶³å¤ çš„ç©ºé–“æ™‚ï¼Œå¾€çˆ¶å…ƒç´ çš„å·¦é‚Šæˆ–å³é‚Šé ç·Šã€‚æ¥è‘—åŸæœ¬è·Ÿåœ¨é€™å€‹å…ƒç´ å¾Œé¢çš„å…¶ä»–å…ƒç´ ï¼Œå°±æœƒè‡ªå‹•å¾€ä¸Šè·‘ã€‚ (ä¸éé€™è£¡æœƒæœ‰éƒ¨ä»½è¦è€ƒé‡çš„åœ°æ–¹ï¼Œç¨å¾Œå†è«‡ã€‚)</p>
<p>ç•¶å…ƒç´ è¢«è¨­å®šæµ®å‹•æ™‚ï¼Œæœƒè‡ªå‹•è®Šæˆå€å¡Šé¡¯ç¤ºå…ƒç´  (<code>display: block</code>) ï¼Œé€™æ™‚å€™æˆ‘å€‘å°±å¯ä»¥è¨­å®šå…ƒç´ çš„ <code>width</code> å’Œ <code>height</code> äº†ã€‚</p>
<p>ä¸éè¦æ³¨æ„ä¸€é»ï¼šç•¶æˆ‘å€‘æŠŠ <code>position</code> è¨­ç‚º <code>absolute</code> æ™‚ï¼Œæµ®å‹•æœƒå¤±æ•ˆã€‚</p>
<p>æµ®å‹•æœƒå› ç‚ºå…ƒç´ å…ˆå¾Œé †åºè€Œæœ‰æ‰€å½±éŸ¿ï¼Œä¾‹å¦‚æˆ‘å€‘æœ‰ A ã€ B å…©å€‹å€å¡Šé¡¯ç¤ºå…ƒç´ å¦‚ä¸‹åœ–ï¼Œå…¶ä¸­è™›ç·šéƒ¨ä»½çš„å…§éƒ¨ç‚ºçˆ¶å…ƒç´ çš„å…§å®¹å€ï¼š</p>
<p><img src="/resources/css_float/float1.png" alt=""></p>
<p>å¦‚æœæˆ‘å€‘æŠŠ A å…ƒç´ è¨­ç‚ºå‘å³æµ®å‹•ï¼Œé‚£éº¼ B å…ƒç´ å°±æœƒè‡ªå‹•å¾€ä¸Šè·‘ï¼Œå¦‚ä¸‹åœ–ï¼š</p>
<p><img src="/resources/css_float/float2.png" alt=""></p>
<p>è€ŒæŠŠ B å…ƒç´ å‘å³æµ®å‹•çš„è©±ï¼Œ A å…ƒç´ ä¸¦ä¸æœƒå—åˆ°å¹²æ“¾ï¼Œ B å…ƒç´ ä¹Ÿä¸æœƒå¾€çˆ¶å…ƒç´ çš„ä¸Šé‚Šé ï¼Œå¦‚ä¸‹åœ–ï¼š</p>
<p><img src="/resources/css_float/float3.png" alt=""></p>
<p>é‚£å¦‚æœä¸å¾€å³æµ®å‹•ï¼Œè€Œæ˜¯å‘å·¦æµ®å‹•å‘¢ï¼Ÿé‚£å°±éå¸¸è¤‡é›œäº†ã€‚ç‚ºä»€éº¼å‘¢ï¼Ÿå› ç‚ºå„å®¶ç€è¦½å™¨çš„å¯¦ä½œä¸åŒï¼å¦‚æœæˆ‘å€‘è©¦è‘—æŠŠ A å…ƒç´ å‘å·¦æµ®å‹•ï¼Œå°±æœƒç™¼ç¾ IE æœƒè®“ B å…ƒç´ è·‘åˆ° A å…ƒç´ çš„å³é‚Šï¼›å¯æ˜¯åœ¨ Firefox å’Œ Opera ä¸Šï¼Œé›–ç„¶ A å…ƒç´ æœƒé åˆ°çˆ¶å…ƒç´ å…§å®¹å€çš„å·¦é‚Šï¼Œä½†æ˜¯å‰‡æœƒè®“ B çš„ Content å€è¢«æ“ åˆ° A å…ƒç´ çš„ä¸‹æ–¹ (è©­ç•°çš„æ˜¯ B å…ƒç´ çš„èƒŒæ™¯å€å»é å‘çˆ¶å…ƒç´ å…§å®¹å€çš„ä¸Šæ–¹) ã€‚æ‰€ä»¥åœ¨æ’ç‰ˆæ™‚ï¼Œè¦ç‰¹åˆ¥æ³¨æ„é€™ç¨®æƒ…æ³ã€‚</p>
<p>å¦‚æœæˆ‘å€‘ä¸å¸Œæœ›åœ¨ç·Šè·Ÿåœ¨ A å…ƒç´ åŠ B å…ƒç´ å¾Œé¢çš„å…ƒç´ è¢«æµ®å‹•æ‰€å½±éŸ¿ï¼Œé‚£éº¼å°±è©²å°æ­¤å…ƒç´ è¨­å®š <code>clear: both;</code> ã€‚</p>
<p>å¦å¤–å…ƒç´ çš„ Box Model ä¹Ÿæœƒå½±éŸ¿å…ƒç´ çš„æµ®å‹•ï¼Œæˆ‘åœ¨ <a href="/blog/archives/17">CSS æ’ç‰ˆè§€å¿µï¼šBox Model</a> è£¡æåˆ°äº†ä¸€äº›è¦é»ï¼Œé€™è£¡å†èªªæ˜ä¸€ä¸‹ã€‚</p>
<p>Box Model æ­£ç¢ºçš„å¯¬åº¦ï¼Œé€šå¸¸å°±æ˜¯å½±éŸ¿æµ®å‹•æ˜¯å¦èƒ½æ­£å¸¸çš„é—œéµã€‚å¦‚ä¸‹åœ–ï¼Œæ˜¯æˆ‘å€‘å¸¸è¦‹çš„ç½®ä¸­å…©æ¬„å¼ float æ’ç‰ˆã€‚ Sidebar å¾€å·¦æµ®å‹•ï¼Œ Content å‰‡æ˜¯å¾€å³æµ®å‹•ã€‚</p>
<p><img src="/resources/css_float/float4.png" alt=""></p>
<p>åœ¨æµ®å‹• Sidebar æ™‚ï¼Œå¦‚æœæ²’æœ‰è€ƒæ…®å¥½ Content çš„ <code>margin</code> å’Œ <code>padding</code> ï¼Œæˆ–æ˜¯ Content è£¡çš„å…§å®¹éé•·ç„¡æ³•æŠ˜è¡Œæ™‚ï¼Œ Sidebar çš„éƒ¨ä»½å°±æœƒæ•´å€‹å¾€ä¸‹æ‰ï¼Œå¦‚ä¸‹åœ–ã€‚</p>
<p><img src="/resources/css_float/float5.png" alt=""></p>
<p>å› æ­¤åœ¨åˆ©ç”¨æµ®å‹•è£½ä½œç‰ˆé¢æ™‚ï¼Œä¸€å®šä¹Ÿè¦è¨˜å¾—å’Œ Box Model ç›¸äº’æ­é…ï¼Œé€™æ¨£æ‰èƒ½å¤ è£½ä½œæ­£ç¢ºè€Œå¯¦ç”¨çš„ç‰ˆå‹ã€‚</p>
<p>ç¸½è€Œè¨€ä¹‹ï¼Œæµ®å‹•æŠ€å·§æ˜¯ CSS æ’ç‰ˆä¸­éå¸¸é‡è¦çš„ä¸€é–€å­¸å•ã€‚ä¸‹æ¬¡æˆ‘å€‘å°±ä¾†æ­£å¼æŒ‘æˆ°ä¸€äº›å¸¸è¦‹çš„ç‰ˆå‹ï¼Œä¸ä½†å‘Šè¨´ä½ æ€éº¼åšï¼Œé‚„å‘Šè¨´ä½ ç‚ºä»€éº¼è¦é€™æ¨£åšã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>CSS æ’ç‰ˆè§€å¿µï¼šBox Model</title>
			<link>https://jaceju.net/css-box-model/</link>
			<pubDate>Mon, 09 May 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/css-box-model/</guid>
			<description>CSS æ’ç‰ˆæœ‰ä¸€å€‹å¾ˆé‡è¦çš„è§€å¿µï¼š Box Model ã€‚å®ƒæè¿°äº†å…ƒç´ ä¹‹é–“çš„å½¼é„°é—œä¿‚ï¼ŒåŒæ™‚ä¹Ÿå·¦å³äº†æˆ‘å€‘æ˜¯å¦èƒ½å¤ æˆåŠŸé€é CSS ï¼Œå®Œæˆæ•´å€‹é é¢çš„å‘ˆç¾ã€‚ Box Model çš„æ„æ€æ˜¯èªªï¼Œæ¯ä¸€å€‹å…ƒ</description>
			<content type="html"><![CDATA[<p>CSS æ’ç‰ˆæœ‰ä¸€å€‹å¾ˆé‡è¦çš„è§€å¿µï¼š Box Model ã€‚å®ƒæè¿°äº†å…ƒç´ ä¹‹é–“çš„å½¼é„°é—œä¿‚ï¼ŒåŒæ™‚ä¹Ÿå·¦å³äº†æˆ‘å€‘æ˜¯å¦èƒ½å¤ æˆåŠŸé€é CSS ï¼Œå®Œæˆæ•´å€‹é é¢çš„å‘ˆç¾ã€‚</p>
<!-- raw HTML omitted -->
<p>Box Model çš„æ„æ€æ˜¯èªªï¼Œæ¯ä¸€å€‹å…ƒç´ æˆ‘å€‘éƒ½å¯è¦–å®ƒç‚ºä¸€å€‹ Box ã€‚ä¸€å€‹ Box ç”±ä»¥ä¸‹å±¬æ€§çµ„æˆï¼š <code>margin</code> ã€ <code>padding</code> ã€ <code>border</code> ã€ <code>content</code> ã€‚</p>
<p>è¨»ï¼š <code>content</code> éçœŸçš„å¯ç”¨çš„ CSS å±¬æ€§ï¼Œé€™è£¡åªæ˜¯ç‚ºäº†æ–¹ä¾¿èªªæ˜ã€‚</p>
<p>è€Œä¸€å€‹ Box çš„å¯¦éš›å¯¬åº¦ (é«˜åº¦) æ˜¯ç”± <code>padding</code> + <code>border</code> + <code>width</code> (<code>height</code>) æ‰€çµ„æˆï¼Œå¦‚ä¸‹åœ– (å–è‡ª <a href="http://msdn.microsoft.com/library/default.asp?url=https://jaceju.net/library/en-us/dnie60/html/cssenhancements.asp">MSDN</a>)ï¼š</p>
<p><img src="/resources/css_boxmodel/boxdim.gif" alt="IE Box Model"></p>
<p>æ‰€ä»¥ä¸€èˆ¬æˆ‘å€‘æŒ‡å®šçš„ <code>width</code> å’Œ <code>height</code> æ˜¯ content çš„å¯¬å’Œé«˜ï¼Œè€Œæ²’æœ‰åŒ…å« <code>border</code> å’Œ <code>padding</code> ã€‚æ›å¥è©±èªªï¼Œä¸€å€‹å…ƒç´ çœŸæ­£ä½”ç”¨çš„è¦–è¦ºç©ºé–“ï¼Œæ‡‰è©²æ˜¯ content + <code>padding</code> + <code>border</code> ï¼Œé€™æ˜¯æ¨™æº–çš„ CSS è¦ç¯„ã€‚</p>
<p>ä¸éåœ¨ IE5/5.5 æ™‚ä»£ï¼Œä¸€å€‹å…ƒç´ çš„å¯¬é«˜å‰‡åŒ…å«äº† content + padding + border ã€‚é€™å€‹éŒ¯èª¤çš„å¯¦ä½œï¼Œé€ æˆç¾ä»Šè¨±å¤š CSS æ’ç‰ˆä¸Šçš„å›°æ“¾ï¼Œä½†æ˜¯ä¹Ÿä¸æ˜¯æ²’ä¸æ˜¯æ²’æœ‰è¾¦æ³•è§£æ±ºã€‚ <a href="http://tantek.com/CSS/Examples/boxmodelhack.html">Box Model Hack</a> æä¾›äº†è§£æ±ºä¹‹é“ï¼Œé‡é»åœ¨æ–¼åˆ©ç”¨ IE5/5.5 å° CSS è§£è®€ä¸Šçš„ Bug ï¼Œè®“æˆ‘å€‘æ‰€å¸Œæœ›ä¹‹å…ƒç´ æ­£ç¢ºçš„å¯¬é«˜èƒ½æ­£ç¢ºåœ°åœ¨ IE5/5.5 é¡¯ç¤ºå‡ºä¾†ã€‚</p>
<p>å°æ–¼ <code>absolute</code> å’Œ <code>fixed</code> è€Œè¨€ï¼ŒéŒ¯èª¤çš„ Box Model æˆ–è¨±å½±éŸ¿è¼ƒå° (ä¸éä¹Ÿçµ•å°ä¸æ˜¯æ²’æœ‰å½±éŸ¿ï¼Œåƒæ˜¯å¦‚æœè¦æ­£ç¢ºæ§åˆ¶åœ–å±¤çš„å¯¬åº¦æ™‚)ï¼›ä½†å° <code>relative</code> å’Œ <code>static</code> ä¾†èªªï¼Œå› ç‚ºå®ƒå€‘éƒ½é‚„æ˜¯æœƒä¿ç•™å…¶æ‰€ä½”æœ‰çš„ç©ºé–“ã€‚å› æ­¤å¦‚ä½•æ­£ç¢ºåœ°èª¿æ•´ content çš„å¤§å°ï¼Œå°±æœƒå½±éŸ¿åˆ°æˆ‘å€‘çš„æ’ç‰ˆã€‚</p>
<p>ä»¥ä¸‹æˆ‘å€‘ä¾†çœ‹çœ‹ Box Model çš„å„å€‹çµ„æˆåˆ†å­ã€‚</p>
<p>è«‹ç‰¹åˆ¥æ³¨æ„ï¼šæˆ‘åœ¨ä»¥ä¸‹åœ–ç¤ºä¸­ï¼Œå…ƒç´ ä¸Šè‰²çš„éƒ¨ä»½ï¼Œé™¤äº†æœ‰ç‰¹åˆ¥èªªæ˜å¤–ï¼Œéƒ½æ˜¯åŒ…å« border + padding + content ï¼Œé€™é»éå¸¸é‡è¦ï¼å› ç‚ºé™¤äº† <code>body</code> æ¨™ç±¤å¤–ï¼Œå…ƒç´ çš„ <code>background</code> å±¬æ€§çš„ä½œç”¨éƒ½ä¸æœƒåŒ…å« <code>margin</code> ã€‚</p>
<h2 id="border">border</h2>
<p><code>border</code> æ˜¯ä¸€å€‹ã€ŒåŠ ä¸Šå»ã€çš„å±¬æ€§ï¼Œæ›å¥è©±èªªï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨ä¾†å€éš”å…ƒç´ èˆ‡å…ƒç´ ç”¨çš„ã€‚ <code>border</code> çš„å¤–åœå³ç‚ºå…ƒç´ çš„æœ€å¤–åœï¼Œå› æ­¤è¨ˆç®—å…ƒç´ å¯¦éš›çš„å¯¬é«˜æ™‚ï¼Œå°±ä¸€å®šè¦å°‡ <code>border</code> ç´å…¥ã€‚æ›å¥è©±èªªï¼Œ <code>border</code> æœƒä½”æœ‰ç©ºé–“ï¼Œæ‰€ä»¥åœ¨è¨ˆç®—ç²¾ç´°çš„ç‰ˆé¢æ™‚ï¼Œä¸€å®šè¦å°‡ <code>border</code> çš„å½±éŸ¿è€ƒæ…®é€²å»ã€‚</p>
<p>å¦‚ä¸‹åœ–ï¼Œé»‘è‰²è™›ç·šéƒ¨ä»½å³ç‚º <code>border</code> ï¼š</p>
<p><img src="/resources/css_boxmodel/border1.png" alt="border"></p>
<p>é‚„æœ‰ä¸€é»è¦ç‰¹åˆ¥æ³¨æ„ï¼Œå¦‚æœæˆ‘å€‘åœ¨å…ƒç´ ä¸Šè¨­å®šèƒŒæ™¯è‰²æ™‚ï¼Œ IE æ˜¯ä½œç”¨åœ¨ padding + content ï¼Œè€Œ Firefox å‰‡æ˜¯ä½œç”¨åœ¨ border + padding + content ä¸Šã€‚</p>
<h2 id="padding">padding</h2>
<p><code>padding</code> æœƒåœ¨å…ƒç´ å…§å®¹çš„å‘¨åœåŠ ä¸Šæˆ‘å€‘æ‰€æŒ‡å®šå¤§å°çš„ç©ºé–“ï¼›è€Œå¦‚æœæˆ‘å€‘æ²’æœ‰æŒ‡å®šå…ƒç´ çš„å¯¬é«˜æ™‚ï¼Œé‚£éº¼è©²å…ƒç´ çš„å…§å®¹å°±æœƒå—åˆ° <code>padding</code> æ‰€æ“ å£“ã€‚å¦‚ä¸‹åœ–ï¼š</p>
<p><img src="/resources/css_boxmodel/padding1.png" alt="padding"></p>
<p>å¦‚æœå…ƒç´ çš„å…§å®¹ä¸­æœ‰è¡Œå…§é¡¯ç¤ºå…ƒç´ æ™‚ï¼Œæˆ‘å€‘å¯ä»¥åˆ©ç”¨ padding çš„è¨­å®šä¾†è®“å®ƒå€‘åœ¨æˆ‘å€‘æƒ³è¦çš„åœ°æ–¹æŠ˜è¡Œï¼Œè€Œä¸ç”¨å° content æŒ‡å®šå¯¬åº¦ï¼›é€™æ¨£çš„æŠ€å·§æˆ‘ç”¨åœ¨å…¨ç‰ˆé¢çš„å…©æ¬„å¼ç‰ˆé¢ä¸Šï¼Œä½¿å¾—æˆ‘ä¸ç”¨å°é›£ç”¨çš„ <code>width</code> å±¬æ€§å‚·è…¦ç­‹ã€‚</p>
<p>å…¶å¯¦ <code>padding</code> å°±é€™éº¼ç°¡å–®ï¼Œä¸éå¯åˆ¥å°çœ‹å®ƒï¼Œåœ¨ CSS æ’ç‰ˆè£¡ï¼Œ <code>padding</code> åŠ ä¸Š <code>margin</code> çš„è¨­å®šï¼Œå°±èƒ½å¤ ä½¿ç‰ˆé¢åƒè®Šè¬åŒ–ã€‚</p>
<h2 id="margin">margin</h2>
<p><code>margin</code> çš„æ„ç¾©å°±æ˜¯è©²å…ƒç´ èˆ‡å…¶ä»–å…ƒç´ é–“çš„é‚Šç•Œè·é›¢ï¼Œå®ƒçš„æ‡‰ç”¨å¤§æ¦‚ä¹Ÿç®—æ˜¯ CSS æ’ç‰ˆå¾ˆé‡è¦çš„æŠ€è¡“ä¹‹ä¸€ã€‚æ‰€ä»¥æˆ‘æ‰“ç®—å¤šèŠ±ä¸€é»æ™‚é–“è§£é‡‹å®ƒã€‚</p>
<p>æˆ‘å€‘å¯ä»¥åˆ†ä»¥ä¸‹å…©ç¨®ç‹€æ³è§£é‡‹ï¼šã€Œå…ƒç´ èˆ‡ç›¸é„°å…ƒç´ çš„è·é›¢ã€åŠã€Œå…ƒç´ èˆ‡çˆ¶å…ƒç´ é–“çš„è·é›¢ã€ã€‚</p>
<p>ã€Œå…ƒç´ èˆ‡ç›¸é„°å…ƒç´ çš„è·é›¢ã€æŒ‡å¾—æ˜¯å…ƒç´ é–“æ˜¯ç·Šé„°çš„ (ä¸è«–æ˜¯å€å¡Šé¡¯ç¤ºå…ƒç´ æˆ–è¡Œå…§é¡¯ç¤ºå…ƒç´ ) ï¼Œè€Œæ²’æœ‰éšå±¤é—œä¿‚ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;i1&#34;</span><span class="p">&gt;</span>è¡Œå…§é¡¯ç¤ºå…ƒç´ 1<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;i2&#34;</span><span class="p">&gt;</span>è¡Œå…§é¡¯ç¤ºå…ƒç´ 2<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</code></pre></div><p>é€™å…©å€‹ <code>span</code> æ¨™ç±¤å°±æ˜¯ç·Šé„°é—œä¿‚ã€‚è€Œ <code>span</code> æ¨™ç±¤é è¨­å±¬æ–¼è¡Œå…§é¡¯ç¤ºå…ƒç´  (<code>display: inline</code>) ï¼Œå› æ­¤å®ƒå€‘çš„é‚Šç•Œè·é›¢å°±æ˜¯ <code>i1</code> çš„ <code>margin-right</code> åŠ ä¸Š <code>i2</code> çš„ <code>margin-left</code> ï¼Œå¦‚ä¸‹åœ–ã€‚</p>
<p><img src="/resources/css_boxmodel/margin1.png" alt="è¡Œå…§ margin"></p>
<p>å¦ä¸€ç¨®ç·Šé„°é—œä¿‚æ˜¯å€å¡Šé¡¯ç¤ºå…ƒç´ ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;b1&#34;</span><span class="p">&gt;</span>å€å¡Šé¡¯ç¤ºå…ƒç´ 1<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;b2&#34;</span><span class="p">&gt;</span>å€å¡Šé¡¯ç¤ºå…ƒç´ 2<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div><p><code>div</code> æ¨™ç±¤é è¨­å±¬æ–¼å€å¡Šé¡¯ç¤ºå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åœ¨å®ƒçš„å‰å¾ŒæœƒåŠ å…¥æ›è¡Œçš„æ§åˆ¶ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œå€å¡Šé¡¯ç¤ºå…ƒç´ å®ƒå€‘çš„é‚Šç•Œè·é›¢æ˜¯é‡ç–Šçš„ï¼è€Œç•¶ <code>b1</code> çš„ <code>margin-bottom</code> å¤§æ–¼ <code>b2</code> çš„ <code>margin-top</code> æ™‚ï¼Œ <code>b1</code> å’Œ <code>b2</code> å¯¦éš›çš„è·é›¢å°±ä»¥ <code>b1</code> çš„ <code>margin-bottom</code> ç‚ºæº–ï¼Œå¦‚ä¸‹åœ–ã€‚</p>
<p><img src="/resources/css_boxmodel/margin2.png" alt="å€å¡Š margin"></p>
<p>é‚„æœ‰ä¸€ç¨®ç·Šé„°é—œä¿‚æ˜¯æµ®å‹•å…ƒç´ ï¼ŒåŸºæœ¬ä¸Šå®ƒæœƒæ˜¯å€‹å€å¡Šé¡¯ç¤ºå…ƒç´ ï¼Œä½† <code>margin</code> çš„å‘ˆç¾é—œä¿‚å’Œè¡Œå…§é¡¯ç¤ºå…ƒç´ æ˜¯å¾ˆåƒçš„ï¼Œé€™æˆ‘æœƒåœ¨ä»‹ç´¹æµ®å‹•å…ƒç´ æ™‚å†åŠ ä»¥èªªæ˜ã€‚</p>
<p>ã€Œå…ƒç´ èˆ‡çˆ¶å…ƒç´ é–“çš„è·é›¢ã€å°±æ˜¯æŒ‡å…ƒç´ ä¹‹é–“æœ‰éšå±¤é—œä¿‚æ™‚çš„é‚Šç•Œè·é›¢ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;b3&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;b4&#34;</span><span class="p">&gt;</span>å…§éƒ¨å€å¡Š<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div><p>å…¶ä¸­ b3 å°±æ˜¯çˆ¶å…ƒç´ ï¼Œ b4 å‰‡æ˜¯å­å…ƒç´ ã€‚ å®ƒå€‘çš„é‚Šç•Œé—œä¿‚å¦‚ä¸‹åœ–ï¼š</p>
<p><img src="/resources/css_boxmodel/margin3.png" alt="çˆ¶å­å…ƒç´  margin"></p>
<p>æˆ‘å€‘å¯ä»¥çœ‹åˆ°ï¼Œå­å…ƒç´ çš„é‚Šç•Œèµ·å§‹æœƒä»¥çˆ¶å…ƒç´ çš„ Content å€ç‚ºåŸºæº–ã€‚</p>
<p>ä¸Šé¢æˆ‘å€‘éƒ½æ˜¯å°‡ margin è¨­ç‚ºæ­£å€¼ï¼Œä¾‹å¦‚å°‡å…ƒç´ çš„ <code>margin-top</code> è¨­ç‚º <code>20px</code> ï¼Œé‚£éº¼å…ƒç´ ä¸Šé¢å°±æœƒå¤šå‡º <code>20px</code> çš„ç©ºé–“ã€‚æ³¨æ„ï¼Œæˆ‘æ˜¯èªªå¤šå‡ºç©ºé–“ï¼Œè€Œéå‘ä¸‹ç§»å‹•ï¼æœ‰ä»€éº¼å·®åˆ¥å‘¢ï¼Ÿ</p>
<p>å‘ä¸‹ç§»å‹•çš„å®šç¾©æ˜¯æˆ‘å€‘è®“å…ƒç´ æˆç‚ºå€å¡Šé¡¯ç¤º (<code>display: block</code>) æˆ–æ˜¯å®ƒåŸæœ¬å°±æ˜¯å€å¡Šé¡¯ç¤ºå…ƒç´ ï¼Œç„¶å¾ŒæŒ‡å®šå®ƒçš„ <code>position</code> å±¬æ€§ç‚º <code>relative</code> ï¼Œæœ€å¾Œè¨­å®šå®ƒçš„ <code>top</code> å±¬æ€§ç‚ºæ­£å€¼ã€‚</p>
<p>è€Œå¤šå‡ºç©ºé–“å‰‡ä¸è«–å®ƒçš„ <code>position</code> å±¬æ€§è¨­å®šç‚ºä½•ï¼Œç¡¬æ˜¯æ“ é€²æˆ‘å€‘æŒ‡å®šçš„ç©ºé–“ã€‚è€Œä¸”è¨­å®š <code>margin</code> ä¹‹å¾Œï¼Œé é¢å…§å®¹è¶…éè¢å¹•é¡¯ç¤ºç¯„åœï¼Œå³æ™‚æœ‰æ²è»¸ä¹Ÿç„¡æ³•å‘ˆç¾å®Œæ•´çš„å…§å®¹ã€‚</p>
<p>ä¸é IE6 å’Œ FireFox å…©è€…å° Box Model åœ¨ margin çš„å¯¦ä½œåˆæœ‰é»ä¸å¤ªä¸€æ¨£ã€‚ IE6 å°±ç®—æŒ‡å®šäº†çˆ¶å…ƒç´ çš„ <code>height</code> å±¬æ€§ï¼Œå¦‚æœå­å…ƒç´ çš„é«˜åº¦è¶…éçˆ¶å…ƒç´ çš„ <code>height</code> ï¼Œçˆ¶å…ƒç´ å°±æœƒè¢«æ’å¤§ï¼Œç„¶å¾Œä¿ç•™å­å…ƒç´  <code>margin-bottom</code> çš„ç©ºé–“ï¼›è€Œ FireFox å°±ä¸æœƒã€‚å“ªå€‹å¯¦ä½œæ˜¯å°çš„ï¼Œæˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šã€‚</p>
<p>margin ä¹Ÿå¯ä»¥æŒ‡å®šç‚ºè² å€¼ï¼Œä¾‹å¦‚æˆ‘åœ¨é€™ç¯‡ã€Œ<a href="/blog/archives/9">å¦‚ä½•æ­£ç¢ºå¯¦ä½œå‡ºå›ºå®šå¯¬åº¦ä¸”ç½®ä¸­çš„ç‰ˆå‹ï¼Ÿ</a>ã€è£¡ï¼Œé‹ç”¨åˆ°äº†å°‡ <code>margin-left</code> è¨­å®šç‚ºè² å€¼çš„æŠ€å·§ã€‚é€™è£¡æˆ‘å†åŠ ä»¥èªªæ˜ï¼Œå°‡ <code>margin</code> è¨­å®šç‚ºè² å€¼æ˜¯æ€éº¼ä¸€å›äº‹ã€‚</p>
<p>åœ¨ã€Œå…ƒç´ èˆ‡å…ƒç´ é–“ç·Šé„°ã€æ™‚ï¼Œæˆ‘å€‘å°‡ <code>margin</code> è¨­å®šç‚ºè² å€¼ï¼Œæœƒä½¿å¾— <code>margin</code> è¨­å®šç‚ºè² å€¼çš„å…ƒç´ ã€Œç–Šã€åˆ°å¦ä¸€å€‹å…ƒç´ ä¸Š (ä¸éé‚„æ˜¯è¦è¦–å¦ä¸€å€‹å…ƒç´ æ‰€è¨­å®šçš„é‚Šç•Œè·é›¢è€Œå®š) ã€‚ä¾‹å¦‚ï¼Œæˆ‘å€‘å°‡ A å€å¡Šçš„ <code>margin-bottom</code> è¨­ç‚º 0 ï¼Œ B å€å¡Šçš„ <code>margin-top</code> è¨­ç‚º -10px ï¼Œé‚£éº¼ B å€å¡Šçš„æ–‡å­—å°±æœƒç–Šåˆ° A å€å¡Šçš„æ–‡å­—ä¸Šã€‚</p>
<p>ã€Œå…ƒç´ é–“æœ‰éšå±¤æ€§é—œä¿‚ã€æ™‚çš„é—œä¿‚ï¼Œå¦‚æœå­å…ƒç´ çš„æ‰€æŒ‡å®šçš„ margin è² å€¼çš„çµ•å°å€¼å¤§æ–¼çˆ¶å…ƒç´ çš„ border + padding æ™‚ï¼Œå°±æœƒä½¿å¾—å­å…ƒç´ è·‘åˆ°çˆ¶å…ƒç´ çš„å¤–éƒ¨å»äº†ã€‚å¦‚åœ–ï¼Œæˆ‘å€‘æŒ‡å®šè—è‰²å…ƒç´ çš„ <code>margin-left</code> ç‚º <code>-100px</code> ï¼Œé‚£éº¼è©²å…ƒç´ å°±æœƒå¾€å·¦è·‘ <code>100px</code> ï¼›é€™æ™‚å¦‚æœå…¶çˆ¶å…ƒç´  (æ·ºé»ƒè‰²) çš„ <code>border-left</code> å’Œ <code>padding-left</code> ç›¸åŠ å°æ–¼ <code>100px</code> ï¼Œæˆ‘å€‘å°±æœƒçœ‹åˆ°è©²å…ƒç´ å°±æœƒçªå‡ºæ–¼çˆ¶å…ƒç´ çš„å·¦é‚Šã€‚</p>
<p><img src="/resources/css_boxmodel/margin4.png" alt="negative margin"></p>
<p>ç¸½è€Œè¨€ä¹‹ï¼Œå°‡ <code>margin</code> æŒ‡å®šç‚ºè² å€¼åœ¨ CSS æ’ç‰ˆä¸Šæœ‰éå¸¸å¤§çš„ç”¨è™•ï¼Œå¦‚æœèƒ½å°‡å®ƒäº†ç„¶æ–¼èƒ¸ï¼Œç›¸ä¿¡ä½ åœ¨ CSS æ’ç‰ˆçš„åŠŸåŠ›ä¸€å®šæœƒå¤§å¢çš„ã€‚</p>
<p>é€™ç¯‡æˆ‘åƒ…æè¿°äº† CSS Box Model çš„ä¸€äº›åŸºæœ¬è§€å¿µï¼Œé›–ç„¶ä¸æ˜¯éå¸¸æ·±å…¥ï¼Œä½†å¸Œæœ›èƒ½å¤ è®“å¤§å®¶å°å®ƒå€‘æœ‰åŸºæœ¬çš„èªçŸ¥ã€‚è€Œ CSS æ’ç‰ˆé™¤äº† <a href="/blog/archives/15">Position</a> å’Œ Box Model å¤–ï¼Œé‚„æœ‰ä¸€æ¨£éå¸¸å€¼å¾—æ¢è¨çš„æŠ€è¡“ï¼Œå°±æ˜¯æµ®å‹• (float) ï¼›æˆ‘å°‡æœƒåœ¨ä¸‹æ¬¡çš„æ–‡ç« ä¸­è«‡åˆ°å®ƒã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>CSS æ’ç‰ˆè§€å¿µï¼šPosition</title>
			<link>https://jaceju.net/css-position/</link>
			<pubDate>Fri, 29 Apr 2005 00:00:00 +0800</pubDate>
			
			<guid>https://jaceju.net/css-position/</guid>
			<description>å¾ˆå¤šäººéƒ½æœƒç”¨åœ–å±¤ä¾†è£½ä½œç¶²é ï¼Œæˆ–è¨±å¸¸æœƒè½åˆ°æ‰€è¬‚çš„çµ•å°ä½ç½®å’Œç›¸å°ä½ç½®ã€‚å…¶å¯¦å®ƒå€‘éƒ½æ˜¯ CSS ä¸­ position çš„è¨­å®šå€¼ï¼Œé€éè¨­å®š position ï¼Œä¾¿èƒ½è®“æˆ‘å€‘éš¨æ„ç§»å‹•å…ƒç´ çš„ä½ç½®ã€‚ ä¸é</description>
			<content type="html"><![CDATA[<p>å¾ˆå¤šäººéƒ½æœƒç”¨åœ–å±¤ä¾†è£½ä½œç¶²é ï¼Œæˆ–è¨±å¸¸æœƒè½åˆ°æ‰€è¬‚çš„çµ•å°ä½ç½®å’Œç›¸å°ä½ç½®ã€‚å…¶å¯¦å®ƒå€‘éƒ½æ˜¯ CSS ä¸­ <code>position</code> çš„è¨­å®šå€¼ï¼Œé€éè¨­å®š <code>position</code> ï¼Œä¾¿èƒ½è®“æˆ‘å€‘éš¨æ„ç§»å‹•å…ƒç´ çš„ä½ç½®ã€‚</p>
<p>ä¸éå®ƒå€‘ä¹‹é–“åˆ°åº•æœ‰ä»€éº¼ä¸åŒå‘¢ï¼Ÿæœ¬æ–‡åšå€‹ç°¡å–®çš„èªªæ˜ã€‚</p>
<!-- raw HTML omitted -->
<h2 id="åƒæ•¸èªªæ˜">åƒæ•¸èªªæ˜</h2>
<p>é¦–å…ˆæˆ‘æŠŠå…¶ä¸­çš„é—œä¿‚æ•´ç†æˆè¡¨ï¼š</p>
<!-- raw HTML omitted -->
<p>ç•¶æˆ‘å€‘å°å…ƒç´ çš„ <code>position</code> å±¬æ€§ï¼ŒæŒ‡å®šäº† <code>absolute</code> ã€ <code>relative</code> æˆ– <code>fixed</code> å¾Œï¼Œé€™å€‹å…ƒç´ å°±å¯ä»¥ç§»å‹•äº†ã€‚æˆ‘å€‘å¯ä»¥ç”¨ <code>top</code>, <code>left</code>, <code>right</code>, <code>bottom</code> é€™å››ç¨®å±¬æ€§ä¾†æŒ‡å®šå…ƒç´ è¦å‘ˆç¾çš„ä½ç½®ã€‚</p>
<p>è¨»ï¼šç”±æ–¼ IE ä¸æ”¯æ´ <code>position: fixed</code> ï¼Œä½¿å¾—å›ºå®šä½ç½®é€™å€‹å¥½ç”¨çš„æŠ€å·§ä¸€ç›´ä¸å—å¤§å®¶çš„é‡è¦–ã€‚ä½†åœ¨é€™è£¡æˆ‘é‚„æ˜¯æä¸€ä¸‹ã€‚ä½ å¯ä»¥ä½¿ç”¨ FireFox ä¾†æ„Ÿå—ä¸€ä¸‹å›ºå®šä½ç½®çš„å¼·å¤§å¨åŠ›ï¼Œæˆ–æ˜¯ç­‰å¾…æ–°ç‰ˆçš„ IE æ”¯æ´ã€‚</p>
<p>æ¥ä¸‹ä¾†æˆ‘å€‘ä¾†è§£é‡‹ä¸Šé¢çš„è¡¨åˆ—è£¡ï¼Œæ¯å€‹åƒæ•¸èªªæ˜çš„æ„ç¾©ã€‚</p>
<h2 id="ç•«é¢ä½ç½®åƒè€ƒåŸºæº–">ç•«é¢ä½ç½®åƒè€ƒåŸºæº–</h2>
<p>ä»¥çµ•å°ä½ç½® (<code>position: absolute</code>) è€Œè¨€ï¼Œæ•…åæ€ç¾©ï¼Œå®ƒæ˜¯ä»¥çˆ¶å…ƒç´ çš„é‚Šç•Œç‚ºçµ•å°èµ·é»ã€‚ä¾‹å¦‚å¦‚æœæˆ‘å€‘è¨­å®š <code>top: 50px</code> ï¼Œé‚£éº¼é€™å€‹å…ƒç´ å°±æœƒåœ¨è·é›¢çˆ¶å…ƒç´ å…§å®¹å€ä¸Šé‚Šç•Œ 50px çš„åœ°æ–¹å‘ˆç¾ï¼Œå¦‚ä¸‹åœ–ï¼š</p>
<p><img src="/resources/css_position/absolute_1.png" alt="position: absolute"></p>
<p>__è£œå……ï¼š__å¦‚æœçˆ¶å…ƒç´ çš„ <code>position</code> ä¸æ˜¯ <code>absolute</code> æˆ– <code>relative</code> æ™‚ï¼Œé‚£éº¼å…ƒç´ çš„ä½ç½®å°±æœƒå†å°æ‡‰åˆ°çˆ¶å…ƒç´ çš„ä¸Šå±¤å…ƒç´ ï¼›å¦‚æœå…¶è¦ªä»£å…ƒç´ çš„ <code>position</code> éƒ½æ²’æœ‰è¨­å®š <code>absolute</code> æˆ– <code>relative</code> æ™‚ï¼Œå°±ä»¥è¦–çª—æœ€å¤§å¯è¦–ç¯„åœé‚Šç•Œç‚ºåŸºæº–ã€‚</p>
<p>è€Œä»¥ç›¸é—œä½ç½® (<code>position: relative</code>) è€Œè¨€ï¼Œå…¶æ„ç¾©å°±æ˜¯ç›¸å°æ–¼åŸæœ¬çš„ä½ç½®ã€‚ä¾‹å¦‚æˆ‘å€‘æŒ‡å®š top: 50px æ™‚ï¼Œé‚£éº¼é€™å€‹å…ƒç´ å°±æœƒå¾åŸæœ¬æ‡‰è©²å‘ˆç¾çš„ä½ç½®å¾€ä¸‹ç§»å‹• 50px ã€‚å¦‚ä¸‹åœ–ï¼Œç´…è‰²è™›ç·šéƒ¨ä»½å°±æ˜¯æœªè¨­å®š position: relative å‰ï¼Œå…ƒç´ åŸè©²æ‡‰è©²åœ¨çš„ä½ç½®ï¼š</p>
<p><img src="/resources/css_position/relative_1.png" alt="position: relative"></p>
<p>è€Œå›ºå®šä½ç½® (position: fixed) æŒ‡çš„å°±æ˜¯å›ºå®šåœ¨è¦–çª—æœ€å¤§å¯è¦–ç¯„åœä¸Šï¼Œå¦‚æœä¸æŒ‡å®šä½ç½® (top, left, right, bottom) æ™‚ï¼Œé‚£å…ƒç´ å°±æœƒå›ºå®šåœ¨åŸæœ¬çš„ä½ç½®ï¼›è€ŒæŒ‡å®šä½ç½®å¾Œï¼Œå°±æœƒä»¥è¦–çª—æœ€å¤§å¯è¦–ç¯„åœçš„é‚Šç•Œç‚ºçµ•å°åŸºæº–é»ã€‚å¦‚æœé é¢å…§å®¹è¶…éè¦–çª—æœ€å¤§å¯è¦–ç¯„åœå¤§å°æ™‚ï¼Œé‚£éº¼ä¸è«–æˆ‘å€‘å¦‚ä½•æ²å‹•é é¢ï¼Œå…ƒç´ éƒ½æœƒå›ºå®šåœ¨è¦–çª—æœ€å¤§å¯è¦–ç¯„åœä¸Šæˆ‘å€‘æ‰€æŒ‡å®šçš„ä½ç½®ã€‚</p>
<h2 id="ç§»å‹•åƒè€ƒåŸºæº–">ç§»å‹•åƒè€ƒåŸºæº–</h2>
<p>ç•¶é é¢å¯ä»¥æ²å‹•çš„æ™‚å€™ï¼Œ <code>absolute</code> ã€ <code>relative</code> ã€ <code>static</code> éƒ½æœƒè·Ÿè‘—ç§»å‹•ã€‚åªæœ‰ <code>fixed</code> æœƒå›ºå®šåœ¨è¦–çª—æœ€å¤§å¯è¦–ç¯„åœä¸Šï¼Œä¸æœƒè·Ÿè‘—ç§»å‹•ã€‚</p>
<h2 id="å¯æ”¹è®Šé¡¯ç¤ºä½ç½®">å¯æ”¹è®Šé¡¯ç¤ºä½ç½®</h2>
<p>å°±æ˜¯æˆ‘å€‘å¯ä»¥é€éæŒ‡å®šå…ƒç´ çš„ <code>top</code> ã€ <code>left</code> ã€ <code>right</code> ã€ <code>bottom</code> å››å€‹å±¬æ€§ï¼Œä½¿å…ƒç´ æ”¹è®Šé¡¯ç¤ºä½ç½®ã€‚å¦‚æœå…ƒç´ æ˜¯ <code>position: static</code> æ™‚ï¼Œæœƒè‡ªå‹•å¿½ç•¥æ‰€è¨­å®šçš„ <code>top</code> ã€ <code>left</code> ã€ <code>right</code> ã€ <code>bottom</code> ã€‚</p>
<h2 id="å¯èª¿æ•´å¤§å°">å¯èª¿æ•´å¤§å°</h2>
<p>æˆ‘å€‘å¯ä»¥é€é <code>width</code> ã€ <code>height</code> ä¾†èª¿æ•´å…ƒç´ å…§å®¹å€çš„å¤§å°ï¼Œä¸éç•¶ <code>position</code> æ˜¯ <code>relative</code> æˆ–æ˜¯ <code>static</code> æ™‚ï¼Œå…ƒç´ çš„ <code>display</code> å±¬æ€§å¿…é ˆç‚º <code>block</code> æ‰å¯èª¿æ•´å…¶å¤§å°ã€‚</p>
<h2 id="å¾é¡¯ç¤ºæµç¨‹ä¸­å»é™¤">å¾é¡¯ç¤ºæµç¨‹ä¸­å»é™¤</h2>
<p>é¡¯ç¤ºæµç¨‹çš„æ„ç¾©å°±æ˜¯é é¢ä¸Šçš„æ¯ä¸€å€‹å…ƒç´ çš„å‘ˆç¾ï¼Œæ›å¥è©±èªªï¼Œå°±æ˜¯è©²å…ƒç´ æœƒå‡ºç¾çš„ä½ç½®ï¼ŒåŠå…¶ä½”ç”¨çš„ç©ºé–“ç­‰ç­‰ã€‚</p>
<p>æˆ‘å€‘å¯ä»¥å°‡åŸä¾†çš„é é¢æƒ³æˆæ˜¯ä¸€å€‹åœ–å±¤ï¼Œæ¯å€‹å…ƒç´ éƒ½æ˜¯ä¸€å€‹ä¸€å€‹ç·Šæ¥åœ¨å‰ä¸€å€‹å…ƒç´ å¾Œé¢ã€‚å¦‚ä¸‹åœ–ï¼Œåœ¨å°šæœªæŒ‡å®š <code>position</code> æ™‚ï¼Œç²‰ç´«è‰²å€å¡Šæœƒç·Šæ¥åœ¨æ·ºè—è‰²å€å¡Šå¾Œã€‚</p>
<p><img src="/resources/css_position/layer1.png" alt="å¾é¡¯ç¤ºæµç¨‹ä¸­å»é™¤_1"></p>
<p>è«‹æ³¨æ„ï¼Œæˆ‘åœ¨é€™è£¡æåˆ°çš„åœ–å±¤ï¼ŒæŒ‡çš„æ˜¯ç€è¦½å™¨å»è§£è­¯ HTML å¾Œï¼Œå°‡å…ƒç´ å‘ˆç¾å‡ºä¾†çš„åœ–å±¤ï¼Œè€Œéä¸€èˆ¬æˆ‘å€‘æ‰€èªç‚ºï¼Œä»¥çµ•å°ä½ç½®å‘ˆç¾çš„åœ–å±¤ï¼›ä½ å¯ä»¥æŠŠå®ƒæƒ³åƒæˆæ˜¯ Photoshop è£¡çš„åœ–å±¤ã€‚</p>
<p>ç•¶æˆ‘å€‘æŒ‡å®šæ·ºè—è‰²å€å¡Šçš„ <code>position</code> å±¬æ€§ç‚º <code>absolute</code> æˆ– <code>fixed</code> å¾Œï¼Œæ·ºè—è‰²å€å¡Šå°±æœƒè·‘åˆ°å¦ä¸€å€‹åœ–å±¤ï¼›è€Œç²‰ç´«è‰²å€å¡Šå› ç‚ºæ·ºè—è‰²å€å¡Šå·²ç¶“å¾åŸåœ–å±¤çš„é¡¯ç¤ºæµç¨‹ä¸­å»é™¤äº†ï¼Œæ‰€ä»¥å®ƒå°±è‡ªå‹•å¾€ä¸Šè·‘ã€‚å¦‚ä¸‹åœ–ï¼Œç´…è‰²è™›ç·šå°±æ˜¯ç²‰ç´«è‰²å€å¡ŠåŸæœ¬çš„ä½ç½®ã€‚</p>
<p><img src="/resources/css_position/layer2.png" alt="å¾é¡¯ç¤ºæµç¨‹ä¸­å»é™¤_2"></p>
<p>è€Œå…ƒç´ å¦‚æœæŒ‡å®šç‚º <code>relative</code> æ™‚ï¼Œé›–ç„¶ä¹Ÿèƒ½ç§»å‹•ï¼Œä½†åŸæœ¬çš„é é¢åœ–å±¤é‚„æ˜¯æœƒä¿ç•™è©²å…ƒç´ æ‰€ä½”æœ‰çš„ç©ºé–“ã€‚</p>
<h2 id="å¾Œè¨˜">å¾Œè¨˜</h2>
<p>æˆ–è¨±ä½ åœ¨çœ‹å®Œé€™ç¯‡æ–‡ç« ä¹‹å¾Œï¼Œé‚„æ˜¯ç„¡æ³•å¾ˆæ¸…æ¥šåœ°äº†è§£ <code>position</code> å±¬æ€§çš„é‹ä½œæ–¹å¼ã€‚å»ºè­°ä½ æ‰“é–‹ä½ çš„ç€è¦½å™¨ (æœ€å¥½æ˜¯ç”¨ Firefox) ï¼Œå†ç”¨ä½ æ…£ç”¨çš„ HTML ç·¨è¼¯å™¨å»è©¦è©¦å®ƒå€‘ä¹‹é–“çš„å·®ç•°ã€‚ç„¶å¾Œå›ä¾†çœ‹çœ‹é€™ç¯‡æ–‡ç« ï¼Œä½ ä¹Ÿè¨±å°±èƒ½æ˜ç™½æˆ‘çš„æ„æ€ã€‚</p>
<p>__è£œå……ï¼š__å¦‚æœé é¢åœ¨æ¡†æ¶è£¡æ™‚ (<code>frame</code> æˆ– <code>iframe</code>) ï¼Œæ‰€æœ‰åƒç…§è¦–çª—æœ€å¤§å¯è¦–ç¯„åœé‚Šç•Œçš„å…ƒç´ å°±æœƒæ”¹ç‚ºåƒç…§æ¡†æ¶é‚Šç•Œã€‚</p>
<h2 id="ç¯„ä¾‹">ç¯„ä¾‹</h2>
<p>ä»¥ä¸‹é€™å€‹ç¯„ä¾‹ï¼Œä½ å¯ä»¥çœ‹åˆ°è¨­å®š position å‰åŠè¨­å®š position å¾Œçš„é—œä¿‚ï¼š</p>
<!-- raw HTML omitted -->
]]></content>
		</item>
		
	</channel>
</rss>
